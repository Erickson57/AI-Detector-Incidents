import{r as T,u as $r,S as Gx,a as Hx,b as bE,A as oy,C as Vx,c as Kx,i as Yx,d as Wx,t as Xx,e as Qx,_ as yi,f as gi,g as Jo,h as el,j as an,k as Zx,l as $u,m as ly,n as Jx,o as eI,p as tI,q as nI,s as rI,v as Lr,w as tl,P as os,x as iI,I as EE,y as Ci,R as Je,z as Ct,B as Wd,D as cs,L as aI,E as Xd,F as cy,G as vE,H as TE,T as uy,U as sI,J as Yc,K as hi,M as dy,N as oI,O as Zs,Q as lI,V as cI,W as uI,X as dI,Y as Wc,Z as Xc,$ as fI,a0 as la,a1 as Xr,a2 as Ea,a3 as hI,a4 as SE,a5 as Yr,a6 as nl,a7 as Nh,a8 as wE,a9 as mI,aa as _E,ab as Dh,ac as ju,ad as gI,ae as gc,af as pI,ag as us,ah as Ph,ai as So,aj as Oa,ak as ga,al as pc,am as yI,an as bI,ao as is,ap as EI,aq as vI,ar as TI,as as no,at as xE,au as SI,av as rl,aw as IE,ax as wI,ay as _I,az as Qd,aA as AE,aB as xI,aC as RE,aD as fy,aE as Vi,aF as yc,aG as ko,aH as bc,aI as Zd,aJ as hy,aK as II,aL as Ll,aM as AI,aN as RI,aO as my,aP as Qc,aQ as gy,aR as CI,aS as Mh,aT as CE,aU as yr}from"./index-CTswpRtR.js";function ki(r,e){const[t,n]=T.useState(r),i=e!==void 0?e:t;return $r(o=>{o||n(e)},[e]),[i,n]}function Ki(r,e){const t=Object.assign({},r);return Array.isArray(e)&&e.forEach(n=>{delete t[n]}),t}function Jd(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function kI(r){if(Array.isArray(r))return Jd(r)}function LI(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function kE(r,e){if(r){if(typeof r=="string")return Jd(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Jd(r,e):void 0}}function NI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(r){return kI(r)||LI(r)||kE(r)||NI()}const DI="cssVar",PI=(r,e)=>{const{key:t,prefix:n,unitless:i,ignore:o,token:l,hashId:c,scope:u}=r,{cache:{instanceId:d},container:m,hashPriority:f}=T.useContext(Gx),{_tokenKey:h}=l,g=Array.isArray(u)?u.join("@@"):u,p=[...r.path,t,g,h];return Hx(DI,p,()=>{const S=e(),[A,x]=Xx(S,t,{prefix:n,unitless:i,ignore:o,scope:u,hashPriority:f,hashCls:c}),k=Qx(p,x);return[A,x,k,t]},([,,S])=>{Yx&&Wx(S,{mark:oy,attachTo:m})},([,S,A])=>{if(!S)return;const x=bE(S,A,{mark:oy,prepend:"queue",attachTo:m,priority:-999});x[Vx]=d,x.setAttribute(Kx,t)})};class or{name;style;constructor(e,t){this.name=e,this.style=t}getName(e=""){return e?`${e}-${this.name}`:this.name}_keyframe=!0}function MI(r){if(Array.isArray(r))return r}function OI(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,l,c=[],u=!0,d=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(m){d=!0,i=m}finally{try{if(!u&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}}function FI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LE(r,e){return MI(r)||OI(r,e)||kE(r,e)||FI()}function py(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Rr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?py(Object(t),!0).forEach(function(n){yi(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):py(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Vs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Fo(r,e){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Fo(r,e)}function NE(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Fo(r,e)}function zo(r){return zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zo(r)}function Oh(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oh=function(){return!!r})()}function zI(r,e){if(e&&(gi(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vs(r)}function DE(r){var e=Oh();return function(){var t,n=zo(r);if(e){var i=zo(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return zI(this,t)}}var UI=Jo(function r(){el(this,r)}),PE="CALC_UNIT",BI=new RegExp(PE,"g");function qu(r){return typeof r=="number"?"".concat(r).concat(PE):r}var $I=(function(r){NE(t,r);var e=DE(t);function t(n,i){var o;el(this,t),o=e.call(this),yi(Vs(o),"result",""),yi(Vs(o),"unitlessCssVar",void 0),yi(Vs(o),"lowPriority",void 0);var l=gi(n);return o.unitlessCssVar=i,n instanceof t?o.result="(".concat(n.result,")"):l==="number"?o.result=qu(n):l==="string"&&(o.result=n),o}return Jo(t,[{key:"add",value:function(i){return i instanceof t?this.result="".concat(this.result," + ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," + ").concat(qu(i))),this.lowPriority=!0,this}},{key:"sub",value:function(i){return i instanceof t?this.result="".concat(this.result," - ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," - ").concat(qu(i))),this.lowPriority=!0,this}},{key:"mul",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof t?this.result="".concat(this.result," * ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," * ").concat(i)),this.lowPriority=!1,this}},{key:"div",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof t?this.result="".concat(this.result," / ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," / ").concat(i)),this.lowPriority=!1,this}},{key:"getResult",value:function(i){return this.lowPriority||i?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(i){var o=this,l=i||{},c=l.unit,u=!0;return typeof c=="boolean"?u=c:Array.from(this.unitlessCssVar).some(function(d){return o.result.includes(d)})&&(u=!1),this.result=this.result.replace(BI,u?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),t})(UI),jI=function(e,t){var n=$I;return function(i){return new n(i,t)}},yy=function(e,t){return"".concat([t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function by(r,e,t,n){var i=Rr({},e[r]);if(n!=null&&n.deprecatedTokens){var o=n.deprecatedTokens;o.forEach(function(c){var u=LE(c,2),d=u[0],m=u[1];if(i!=null&&i[d]||i!=null&&i[m]){var f;(f=i[m])!==null&&f!==void 0||(i[m]=i?.[d])}})}var l=Rr(Rr({},t),i);return Object.keys(l).forEach(function(c){l[c]===e[c]&&delete l[c]}),l}var ME=typeof CSSINJS_STATISTIC<"u",ef=!0;function Nr(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];if(!ME)return Object.assign.apply(Object,[{}].concat(e));ef=!1;var n={};return e.forEach(function(i){if(gi(i)==="object"){var o=Object.keys(i);o.forEach(function(l){Object.defineProperty(n,l,{configurable:!0,enumerable:!0,get:function(){return i[l]}})})}}),ef=!0,n}var Ey={};function qI(){}var GI=function(e){var t,n=e,i=qI;return ME&&typeof Proxy<"u"&&(t=new Set,n=new Proxy(e,{get:function(l,c){if(ef){var u;(u=t)===null||u===void 0||u.add(c)}return l[c]}}),i=function(l,c){var u;Ey[l]={global:Array.from(t),component:Rr(Rr({},(u=Ey[l])===null||u===void 0?void 0:u.component),c)}}),{token:n,keys:t,flush:i}};function vy(r,e,t){if(typeof t=="function"){var n;return t(Nr(e,(n=e[r])!==null&&n!==void 0?n:{}))}return t??{}}function HI(r){return{max:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return"max(".concat(n.map(function(o){return an(o)}).join(","),")")},min:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return"min(".concat(n.map(function(o){return an(o)}).join(","),")")}}}var VI=function(){return{}};function KI(r){var e=r.useCSP,t=e===void 0?VI:e,n=r.useToken,i=r.usePrefix,o=r.getResetStyles,l=r.getCommonStyle,c=r.getCompUnitless;function u(h,g,p,E){var S=Array.isArray(h)?h[0]:h;function A(O){return"".concat(String(S)).concat(O.slice(0,1).toUpperCase()).concat(O.slice(1))}var x=E?.unitless||{},k=typeof c=="function"?c(h):{},U=Rr(Rr({},k),{},yi({},A("zIndexPopup"),!0));Object.keys(x).forEach(function(O){U[A(O)]=x[O]});var Y=Rr(Rr({},E),{},{unitless:U,prefixToken:A}),Q=m(h,g,p,Y),L=d(S,p,Y);return function(O){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O,te=Q(O,G),ge=E?.extraCssVarPrefixCls,Me=typeof ge=="function"?ge({prefixCls:O,rootCls:G}):ge,he=L(Me!=null&&Me.length?[G].concat(Fr(Me)):G);return[te,he]}}function d(h,g,p){var E=p.unitless,S=p.prefixToken,A=p.ignore;return function(x){var k=n(),U=k.cssVar,Y=k.realToken;return PI({path:[h],prefix:U.prefix,key:U.key,unitless:E,ignore:A,token:Y,scope:x},function(){var Q=vy(h,Y,g),L=by(h,Y,Q,{deprecatedTokens:p?.deprecatedTokens});return Q&&Object.keys(Q).forEach(function(O){L[S(O)]=L[O],delete L[O]}),L}),U?.key}}function m(h,g,p){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},S=Array.isArray(h)?h:[h,h],A=LE(S,1),x=A[0],k=S.join("-"),U=r.layer||{name:"antd"};return function(Y){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y,L=n(),O=L.theme,G=L.realToken,te=L.hashId,ge=L.token,Me=L.cssVar,he=L.zeroRuntime,De=T.useMemo(function(){return he},[]);if(De)return te;var _e=i(),ke=_e.rootPrefixCls,Oe=_e.iconPrefixCls,He=t(),Pe="css",Ge=Zx(function(){var xe=new Set;return Object.keys(E.unitless||{}).forEach(function(Ie){xe.add($u(Ie,Me.prefix)),xe.add($u(Ie,yy(x,Me.prefix)))}),jI(Pe,xe)},[Pe,x,Me?.prefix]),qe=HI(),Ze=qe.max,ct=qe.min,mt={theme:O,token:ge,hashId:te,nonce:function(){return He.nonce},clientOnly:E.clientOnly,layer:U,order:E.order||-999};return typeof o=="function"&&ly(Rr(Rr({},mt),{},{clientOnly:!1,path:["Shared",ke]}),function(){return o(ge,{prefix:{rootPrefixCls:ke,iconPrefixCls:Oe},csp:He})}),ly(Rr(Rr({},mt),{},{path:[k,Y,Oe]}),function(){if(E.injectStyle===!1)return[];var xe=GI(ge),Ie=xe.token,Ke=xe.flush,H=vy(x,G,p),V=".".concat(Y),C=by(x,G,H,{deprecatedTokens:E.deprecatedTokens});H&&gi(H)==="object"&&Object.keys(H).forEach(function(Be){H[Be]="var(".concat($u(Be,yy(x,Me.prefix)),")")});var F=Nr(Ie,{componentCls:V,prefixCls:Y,iconCls:".".concat(Oe),antCls:".".concat(ke),calc:Ge,max:Ze,min:ct},H),oe=g(F,{hashId:te,prefixCls:Y,rootPrefixCls:ke,iconPrefixCls:Oe});Ke(x,C);var Z=typeof l=="function"?l(F,Y,Q,E.resetFont):null;return[E.resetStyle===!1?null:Z,oe]}),te}}function f(h,g,p){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},S=m(h,g,p,Rr({resetStyle:!1,order:-998},E)),A=function(k){var U=k.prefixCls,Y=k.rootCls,Q=Y===void 0?U:Y;return S(U,Q),null};return A}return{genStyleHooks:u,genSubStyleComponent:f,genComponentStyleHook:m}}const{genStyleHooks:ai,genComponentStyleHook:YI,genSubStyleComponent:WI}=KI({usePrefix:()=>{const{getPrefixCls:r,iconPrefixCls:e}=T.useContext(Lr);return{rootPrefixCls:r(),iconPrefixCls:e}},useToken:()=>{const[r,e,t,n,i,o]=tl();return{theme:r,realToken:e,hashId:t,token:n,cssVar:i,zeroRuntime:o}},useCSP:()=>{const{csp:r}=T.useContext(Lr);return r??{}},getResetStyles:(r,e)=>{const t=tI(r);return[t,{"&":t},nI(e?.prefix.iconPrefixCls??rI)]},getCommonStyle:Jx,getCompUnitless:()=>eI}),va=(r,e)=>{const t=`--${r.replace(/\./g,"")}-${e}-`;return[o=>`${t}${o}`,(o,l)=>l?`var(${t}${o}, ${l})`:`var(${t}${o})`]};function XI(r,e){return os.reduce((t,n)=>{const i=r[`${n}1`],o=r[`${n}3`],l=r[`${n}6`],c=r[`${n}7`];return{...t,...e(n,{lightColor:i,lightBorderColor:o,darkColor:l,textColor:c})}},{})}var QI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function OE(r){return r?.getRootNode?.()}function ZI(r){return OE(r)instanceof ShadowRoot}function Ec(r){return ZI(r)?OE(r):null}function JI(r){return r.replace(/-(.)/g,(e,t)=>t.toUpperCase())}function eA(r,e){Ci(r,`[@ant-design/icons] ${e}`)}function Ty(r){return typeof r=="object"&&typeof r.name=="string"&&typeof r.theme=="string"&&(typeof r.icon=="object"||typeof r.icon=="function")}function Sy(r={}){return Object.keys(r).reduce((e,t)=>{const n=r[t];return t==="class"?(e.className=n,delete e.class):(delete e[t],e[JI(t)]=n),e},{})}function tf(r,e,t){return t?Je.createElement(r.tag,{key:e,...Sy(r.attrs),...t},(r.children||[]).map((n,i)=>tf(n,`${e}-${r.tag}-${i}`))):Je.createElement(r.tag,{key:e,...Sy(r.attrs)},(r.children||[]).map((n,i)=>tf(n,`${e}-${r.tag}-${i}`)))}function FE(r){return iI(r)[0]}function zE(r){return r?Array.isArray(r)?r:[r]:[]}const tA=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
  vertical-align: inherit;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,nA=r=>{const{csp:e,prefixCls:t,layer:n}=T.useContext(EE);let i=tA;t&&(i=i.replace(/anticon/g,t)),n&&(i=`@layer ${n} {
${i}
}`),T.useEffect(()=>{const o=r.current,l=Ec(o);bE(i,"@ant-design-icons",{prepend:!n,csp:e,attachTo:l})},[])},Lo={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function rA({primaryColor:r,secondaryColor:e}){Lo.primaryColor=r,Lo.secondaryColor=e||FE(r),Lo.calculated=!!e}function iA(){return{...Lo}}const ro=r=>{const{icon:e,className:t,onClick:n,style:i,primaryColor:o,secondaryColor:l,...c}=r,u=T.useRef(null);let d=Lo;if(o&&(d={primaryColor:o,secondaryColor:l||FE(o)}),nA(u),eA(Ty(e),`icon should be icon definiton, but got ${e}`),!Ty(e))return null;let m=e;return m&&typeof m.icon=="function"&&(m={...m,icon:m.icon(d.primaryColor,d.secondaryColor)}),tf(m.icon,`svg-${m.name}`,{className:t,onClick:n,style:i,"data-icon":m.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",...c,ref:u})};ro.displayName="IconReact";ro.getTwoToneColors=iA;ro.setTwoToneColors=rA;function UE(r){const[e,t]=zE(r);return ro.setTwoToneColors({primaryColor:e,secondaryColor:t})}function aA(){const r=ro.getTwoToneColors();return r.calculated?[r.primaryColor,r.secondaryColor]:r.primaryColor}function nf(){return nf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},nf.apply(this,arguments)}UE(Wd.primary);const Dr=T.forwardRef((r,e)=>{const{className:t,icon:n,spin:i,rotate:o,tabIndex:l,onClick:c,twoToneColor:u,...d}=r,{prefixCls:m="anticon",rootClassName:f}=T.useContext(EE),h=Ct(f,m,{[`${m}-${n.name}`]:!!n.name,[`${m}-spin`]:!!i||n.name==="loading"},t);let g=l;g===void 0&&c&&(g=-1);const p=o?{msTransform:`rotate(${o}deg)`,transform:`rotate(${o}deg)`}:void 0,[E,S]=zE(u);return T.createElement("span",nf({role:"img","aria-label":n.name},d,{ref:e,tabIndex:g,onClick:c,className:h}),T.createElement(ro,{icon:n,primaryColor:E,secondaryColor:S,style:p}))});Dr.getTwoToneColor=aA;Dr.setTwoToneColor=UE;function rf(){return rf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},rf.apply(this,arguments)}const sA=(r,e)=>T.createElement(Dr,rf({},r,{ref:e,icon:QI})),BE=T.forwardRef(sA);var oA={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};function af(){return af=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},af.apply(this,arguments)}const lA=(r,e)=>T.createElement(Dr,af({},r,{ref:e,icon:oA})),Fh=T.forwardRef(lA);var cA={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};function sf(){return sf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},sf.apply(this,arguments)}const uA=(r,e)=>T.createElement(Dr,sf({},r,{ref:e,icon:cA})),$E=T.forwardRef(uA);var dA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};function of(){return of=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},of.apply(this,arguments)}const fA=(r,e)=>T.createElement(Dr,of({},r,{ref:e,icon:dA})),hA=T.forwardRef(fA);var mA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};function lf(){return lf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},lf.apply(this,arguments)}const gA=(r,e)=>T.createElement(Dr,lf({},r,{ref:e,icon:mA})),pA=T.forwardRef(gA),cf="add",uf="keep",df="remove",Gu="removed";function yA(r){let e;return r&&typeof r=="object"&&"key"in r?e=r:e={key:r},{...e,key:String(e.key)}}function ff(r=[]){return r.map(yA)}function bA(r=[],e=[]){let t=[],n=0;const i=e.length,o=ff(r),l=ff(e);o.forEach(d=>{let m=!1;for(let f=n;f<i;f+=1){const h=l[f];if(h.key===d.key){n<f&&(t=t.concat(l.slice(n,f).map(g=>({...g,status:cf}))),n=f),t.push({...h,status:uf}),n+=1,m=!0;break}}m||t.push({...d,status:df})}),n<i&&(t=t.concat(l.slice(n).map(d=>({...d,status:cf}))));const c={};return t.forEach(({key:d})=>{c[d]=(c[d]||0)+1}),Object.keys(c).filter(d=>c[d]>1).forEach(d=>{t=t.filter(({key:m,status:f})=>m!==d||f!==df),t.forEach(m=>{m.key===d&&(m.status=uf)})}),t}function hf(){return hf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hf.apply(this,arguments)}const EA=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function vA(r,e=cs){class t extends T.Component{static defaultProps={component:"div"};state={keyEntities:[]};static getDerivedStateFromProps({keys:i},{keyEntities:o}){const l=ff(i);return{keyEntities:bA(o,l).filter(u=>{const d=o.find(({key:m})=>u.key===m);return!(d&&d.status===Gu&&u.status===df)})}}removeKey=i=>{this.setState(o=>({keyEntities:o.keyEntities.map(c=>c.key!==i?c:{...c,status:Gu})}),()=>{const{keyEntities:o}=this.state;o.filter(({status:c})=>c!==Gu).length===0&&this.props.onAllRemoved&&this.props.onAllRemoved()})};render(){const{keyEntities:i}=this.state,{component:o,children:l,onVisibleChanged:c,onAllRemoved:u,...d}=this.props,m=o||T.Fragment,f={};return EA.forEach(h=>{f[h]=d[h],delete d[h]}),delete d.keys,T.createElement(m,d,i.map(({status:h,...g},p)=>{const E=h===cf||h===uf;return T.createElement(e,hf({},f,{key:g.key,visible:E,eventProps:g,onVisibleChanged:S=>{c?.(S,{key:g.key}),S||this.removeKey(g.key)}}),(S,A)=>l({...S,index:p},A))}))}}return t}const jE=vA(),TA=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,SA=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,wA=`${TA} ${SA}`.split(/[\s\n]+/),_A="aria-",xA="data-";function wy(r,e){return r.indexOf(e)===0}function qE(r,e=!1){let t;e===!1?t={aria:!0,data:!0,attr:!0}:e===!0?t={aria:!0}:t={...e};const n={};return Object.keys(r).forEach(i=>{(t.aria&&(i==="role"||wy(i,_A))||t.data&&wy(i,xA)||t.attr&&wA.includes(i))&&(n[i]=r[i])}),n}const GE=(r,e)=>{const t=T.useContext(aI),n=T.useMemo(()=>{const o=e||Xd[r],l=t?.[r]??{};return{...typeof o=="function"?o():o,...l||{}}},[r,e,t]),i=T.useMemo(()=>{const o=t?.locale;return t?.exist&&!o?Xd.locale:o},[t]);return[n,i]},Ba=r=>r!=null,IA=()=>Je.useReducer(r=>r+1,0),zh=(r,...e)=>{const t=r||{};return e.filter(Boolean).reduce((n,i)=>(Object.keys(i||{}).forEach(o=>{const l=t[o],c=i[o];if(l&&typeof l=="object")if(c&&typeof c=="object")n[o]=zh(l,n[o],c);else{const{_default:u}=l;u&&(n[o]=n[o]||{},n[o][u]=Ct(n[o][u],c))}else n[o]=Ct(n[o],c)}),n),{})},AA=(r,...e)=>T.useMemo(()=>zh.apply(void 0,[r].concat(e)),[r].concat(e)),HE=(...r)=>r.filter(Boolean).reduce((e,t={})=>(Object.keys(t).forEach(n=>{e[n]={...e[n],...t[n]}}),e),{}),RA=(...r)=>T.useMemo(()=>HE.apply(void 0,r),[].concat(r)),mf=(r,e)=>{const t={...r};return Object.keys(e).forEach(n=>{if(n!=="_default"){const i=e[n],o=t[n]||{};t[n]=i?mf(o,i):o}}),t},js=(r,e)=>typeof r=="function"?r(e):r,Ei=(r,e,t,n)=>{const i=r.map(u=>u?js(u,t):void 0),o=e.map(u=>u?js(u,t):void 0),l=AA.apply(void 0,[n].concat(Fr(i))),c=RA.apply(void 0,Fr(o));return T.useMemo(()=>n?[mf(l,n),mf(c,n)]:[l,c],[l,c,n])},_y=r=>r==="horizontal"||r==="vertical",CA=(r,e,t)=>T.useMemo(()=>{const n=_y(r);let i;return n?i=r:typeof e=="boolean"?i=e?"vertical":"horizontal":i=_y(t)?t:"horizontal",[i,i==="vertical"]},[t,r,e]),VE=Je.createContext(void 0),Da=100,kA=10,LA=Da*kA,KE={Modal:Da,Drawer:Da,Popover:Da,Popconfirm:Da,Tooltip:Da,Tour:Da,FloatButton:Da},NA={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1},DA=r=>r in KE,PA=(r,e)=>{const[,t]=tl(),n=Je.useContext(VE),i=DA(r);let o;if(e!==void 0)o=[e,e];else{let l=n??0;i?l+=(n?0:t.zIndexPopupBase)+KE[r]:l+=NA[r],o=[n===void 0?e:l,l]}return o},io=r=>`${r}-css-var`;function xy(r){return r?Array.isArray(r)?r:[r]:[]}function MA(r,e,t){return T.useMemo(()=>{const n=xy(e??r),i=xy(t??r),o=new Set(n),l=new Set(i);return o.has("hover")&&!o.has("click")&&o.add("touch"),l.has("hover")&&!l.has("click")&&l.add("touch"),[o,l]},[r,e,t])}function OA(r,e,t,n,i){$r(()=>{if(r&&e&&t){let f=function(){n(),i()};const o=e,l=t,c=cy(o),u=cy(l),d=vE(l),m=new Set([d,...c,...u]);return m.forEach(h=>{h.addEventListener("scroll",f,{passive:!0})}),d.addEventListener("resize",f,{passive:!0}),n(),()=>{m.forEach(h=>{h.removeEventListener("scroll",f),d.removeEventListener("resize",f)})}}},[r,e,t])}function FA(r,e,t,n,i,o,l,c){const u=T.useRef(r);u.current=r;const d=T.useRef(!1);T.useEffect(()=>{if(e&&n&&(!i||o)){const f=()=>{d.current=!1},h=E=>{u.current&&!l(E.composedPath?.()?.[0]||E.target)&&!d.current&&c(!1)},g=vE(n);g.addEventListener("pointerdown",f,!0),g.addEventListener("mousedown",h,!0),g.addEventListener("contextmenu",h,!0);const p=Ec(t);return p&&(p.addEventListener("mousedown",h,!0),p.addEventListener("contextmenu",h,!0)),()=>{g.removeEventListener("pointerdown",f,!0),g.removeEventListener("mousedown",h,!0),g.removeEventListener("contextmenu",h,!0),p&&(p.removeEventListener("mousedown",h,!0),p.removeEventListener("contextmenu",h,!0))}}},[e,t,n,i,o]);function m(){d.current=!0}return m}function zA(r=TE){return T.forwardRef((t,n)=>{const{prefixCls:i="rc-trigger-popup",children:o,action:l="hover",showAction:c,hideAction:u,popupVisible:d,defaultPopupVisible:m,onOpenChange:f,afterOpenChange:h,onPopupVisibleChange:g,afterPopupVisibleChange:p,mouseEnterDelay:E,mouseLeaveDelay:S=.1,focusDelay:A,blurDelay:x,mask:k,maskClosable:U=!0,getPopupContainer:Y,forceRender:Q,autoDestroy:L,popup:O,popupClassName:G,uniqueContainerClassName:te,uniqueContainerStyle:ge,popupStyle:Me,popupPlacement:he,builtinPlacements:De={},popupAlign:_e,zIndex:ke,stretch:Oe,getPopupClassNameFromAlign:He,fresh:Pe,unique:Ge,alignPoint:qe,onPopupClick:Ze,onPopupAlign:ct,arrow:mt,popupMotion:xe,maskMotion:Ie,mobile:Ke,...H}=t,V=L||!1,C=d===void 0,F=!!Ke,oe=T.useRef({}),Z=T.useContext(uy),Be=T.useMemo(()=>({registerSubPopup:(gn,Jn)=>{oe.current[gn]=Jn,Z?.registerSubPopup(gn,Jn)}}),[Z]),Xe=T.useContext(sI),$e=Yc(),[Ve,je]=T.useState(null),Qe=T.useRef(null),dt=hi(gn=>{Qe.current=gn,dy(gn)&&Ve!==gn&&je(gn),Z?.registerSubPopup($e,gn)}),[it,rt]=T.useState(null),Ot=T.useRef(null),pt=hi(gn=>{const Jn=oI(gn);dy(Jn)&&it!==Jn&&(rt(Jn),Ot.current=Jn)}),kt={},wt=hi(gn=>{const Jn=it;return Jn?.contains(gn)||Ec(Jn)?.host===gn||gn===Jn||Ve?.contains(gn)||Ec(Ve)?.host===gn||gn===Ve||Object.values(oe.current).some(Ti=>Ti?.contains(gn)||gn===Ti)}),fn=mt?{...mt!==!0?mt:{}}:null,[Tn,Fn]=ki(m||!1,d),In=Tn||!1,dn=T.useMemo(()=>{const gn=typeof o=="function"?o({open:In}):o;return T.Children.only(gn)},[o,In]),pn=dn?.props||{},Pt=hi(()=>In),At=hi((gn=0)=>({popup:O,target:it,delay:gn,prefixCls:i,popupClassName:G,uniqueContainerClassName:te,uniqueContainerStyle:ge,popupStyle:Me,popupPlacement:he,builtinPlacements:De,popupAlign:_e,zIndex:ke,mask:k,maskClosable:U,popupMotion:xe,maskMotion:Ie,arrow:fn,getPopupContainer:Y,getPopupClassNameFromAlign:He,id:$e,onEsc:qt}));$r(()=>{Xe&&Ge&&it&&!C&&!Z&&(In?Xe.show(At(E),Pt):Xe.hide(S))},[In,it]);const tt=T.useRef(In);tt.current=In;const ht=hi(gn=>{Zs.flushSync(()=>{In!==gn&&(Fn(gn),f?.(gn),g?.(gn))})}),Ut=lI(),Lt=(gn,Jn=0)=>{if(d!==void 0){Ut(()=>{ht(gn)},Jn);return}if(Xe&&Ge&&C&&!Z){gn?Xe.show(At(Jn),Pt):Xe.hide(Jn);return}Ut(()=>{ht(gn)},Jn)};function qt({top:gn}){gn&&Lt(!1)}const[en,Rt]=T.useState(!1);$r(gn=>{(!gn||In)&&Rt(!0)},[In]);const[Ft,Wt]=T.useState(null),[Jt,yt]=T.useState(null),Zt=gn=>{yt([gn.clientX,gn.clientY])},[un,jt,on,cn,Tt,ut,et,Gt,nn,bn,$n]=cI(In,Ve,qe&&Jt!==null?Jt:it,he,De,_e,ct,F),[Hn,lr]=MA(l,c,u),tr=Hn.has("click"),sr=lr.has("click")||lr.has("contextMenu"),ve=hi(()=>{en||$n()});OA(In,it,Ve,ve,()=>{tt.current&&qe&&sr&&Lt(!1)}),$r(()=>{ve()},[Jt,he]),$r(()=>{In&&!De?.[he]&&ve()},[JSON.stringify(_e)]);const rr=T.useMemo(()=>{const gn=uI(De,i,bn,qe);return Ct(gn,He?.(bn))},[bn,He,De,i,qe]);T.useImperativeHandle(n,()=>({nativeElement:Ot.current,popupElement:Qe.current,forceAlign:ve}));const[Tr,vr]=T.useState(0),[Qr,Sr]=T.useState(0),Mi=()=>{if(Oe&&it){const gn=it.getBoundingClientRect();vr(gn.width),Sr(gn.height)}},Ta=()=>{Mi(),ve()},qa=gn=>{Rt(!1),$n(),h?.(gn),p?.(gn)},fs=()=>new Promise(gn=>{Mi(),Wt(()=>gn)});$r(()=>{Ft&&($n(),Ft(),Wt(null))},[Ft]);function vi(gn,Jn,Ti,Hr,Fi){kt[gn]=(Cr,...hs)=>{(!Fi||!Fi())&&(Hr?.(Cr),Lt(Jn,Ti)),pn[gn]?.(Cr,...hs)}}const Oi=Hn.has("touch"),Sa=lr.has("touch"),Ht=T.useRef(!1);(Oi||Sa)&&(kt.onTouchStart=(...gn)=>{Ht.current=!0,tt.current&&Sa?Lt(!1):!tt.current&&Oi&&Lt(!0),pn.onTouchStart?.(...gn)}),(tr||sr)&&(kt.onClick=(gn,...Jn)=>{tt.current&&sr?Lt(!1):!tt.current&&tr&&(Zt(gn),Lt(!0)),pn.onClick?.(gn,...Jn),Ht.current=!1});const hn=FA(In,sr||Sa,it,Ve,k,U,wt,Lt),An=Hn.has("hover"),jn=lr.has("hover");let zn,Zn;const ir=()=>Ht.current;if(An){const gn=Jn=>{Zt(Jn)};vi("onMouseEnter",!0,E,gn,ir),vi("onPointerEnter",!0,E,gn,ir),zn=Jn=>{(In||en)&&Ve?.contains(Jn.target)&&Lt(!0,E)},qe&&(kt.onMouseMove=Jn=>{pn.onMouseMove?.(Jn)})}jn&&(vi("onMouseLeave",!1,S,void 0,ir),vi("onPointerLeave",!1,S,void 0,ir),Zn=()=>{Lt(!1,S)}),Hn.has("focus")&&vi("onFocus",!0,A),lr.has("focus")&&vi("onBlur",!1,x),Hn.has("contextMenu")&&(kt.onContextMenu=(gn,...Jn)=>{tt.current&&lr.has("contextMenu")?Lt(!1):(Zt(gn),Lt(!0)),gn.preventDefault(),pn.onContextMenu?.(gn,...Jn)});const Xn=T.useRef(!1);Xn.current||=Q||In||en;const Yn={...pn,...kt},Vn={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach(gn=>{H[gn]&&(Vn[gn]=(...Jn)=>{Yn[gn]?.(...Jn),H[gn](...Jn)})});const si={x:ut,y:et};dI(In,it,Ta);const oi=Wc(pt,Xc(dn)),li=T.cloneElement(dn,{...Yn,...Vn,ref:oi});return T.createElement(T.Fragment,null,li,Xn.current&&(!Xe||!Ge)&&T.createElement(uy.Provider,{value:Be},T.createElement(fI,{portal:r,ref:dt,prefixCls:i,popup:O,className:Ct(G,!F&&rr),style:Me,target:it,onMouseEnter:zn,onMouseLeave:Zn,onPointerEnter:zn,zIndex:ke,open:In,keepDom:en,fresh:Pe,onClick:Ze,onPointerDownCapture:hn,mask:k,motion:xe,maskMotion:Ie,onVisibleChanged:qa,onPrepare:fs,forceRender:Q,autoDestroy:V,getPopupContainer:Y,onEsc:qt,align:bn,arrow:fn,arrowPos:si,ready:un,offsetX:jt,offsetY:on,offsetR:cn,offsetB:Tt,onAlign:ve,stretch:Oe,targetWidth:Tr/Gt,targetHeight:Qr/nn,mobile:Ke})))})}const Uh=zA(TE),ri={TAB:9,ENTER:13,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};function vc(){return vc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},vc.apply(this,arguments)}const YE=T.forwardRef((r,e)=>{const{prefixCls:t,style:n,className:i,duration:o=4.5,showProgress:l,pauseOnHover:c=!0,eventKey:u,content:d,closable:m,props:f,onClick:h,onNoticeClose:g,times:p,hovering:E}=r,[S,A]=T.useState(!1),[x,k]=T.useState(0),[U,Y]=T.useState(0),Q=E||S,L=typeof o=="number"?o:0,O=L>0&&l,G=()=>{g(u)},te=_e=>{(_e.key==="Enter"||_e.code==="Enter"||_e.keyCode===ri.ENTER)&&G()};T.useEffect(()=>{if(!Q&&L>0){const _e=Date.now()-U,ke=setTimeout(()=>{G()},L*1e3-U);return()=>{c&&clearTimeout(ke),Y(Date.now()-_e)}}},[L,Q,p]),T.useEffect(()=>{if(!Q&&O&&(c||U===0)){const _e=performance.now();let ke;const Oe=()=>{cancelAnimationFrame(ke),ke=requestAnimationFrame(He=>{const Pe=He+U-_e,Ge=Math.min(Pe/(L*1e3),1);k(Ge*100),Ge<1&&Oe()})};return Oe(),()=>{c&&cancelAnimationFrame(ke)}}},[L,U,Q,O,p]);const ge=T.useMemo(()=>typeof m=="object"&&m!==null?m:{},[m]),Me=qE(ge,!0),he=100-(!x||x<0?0:x>100?100:x),De=`${t}-notice`;return T.createElement("div",vc({},f,{ref:e,className:Ct(De,i,{[`${De}-closable`]:m}),style:n,onMouseEnter:_e=>{A(!0),f?.onMouseEnter?.(_e)},onMouseLeave:_e=>{A(!1),f?.onMouseLeave?.(_e)},onClick:h}),T.createElement("div",{className:`${De}-content`},d),m&&T.createElement("button",vc({className:`${De}-close`,onKeyDown:te,"aria-label":"Close"},Me,{onClick:_e=>{_e.preventDefault(),_e.stopPropagation(),G()}}),ge.closeIcon??"x"),O&&T.createElement("progress",{className:`${De}-progress`,max:"100",value:he},he+"%"))}),WE=Je.createContext({}),UA=({children:r,classNames:e})=>Je.createElement(WE.Provider,{value:{classNames:e}},r),Iy=8,Ay=3,Ry=16,BA=r=>{const e={offset:Iy,threshold:Ay,gap:Ry};return r&&typeof r=="object"&&(e.offset=r.offset??Iy,e.threshold=r.threshold??Ay,e.gap=r.gap??Ry),[!!r,e]};function Tc(){return Tc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Tc.apply(this,arguments)}const $A=r=>{const{configList:e,placement:t,prefixCls:n,className:i,style:o,motion:l,onAllNoticeRemoved:c,onNoticeClose:u,stack:d}=r,{classNames:m}=T.useContext(WE),f=T.useRef({}),[h,g]=T.useState(null),[p,E]=T.useState([]),S=e.map(L=>({config:L,key:String(L.key)})),[A,{offset:x,threshold:k,gap:U}]=BA(d),Y=A&&(p.length>0||S.length<=k),Q=typeof l=="function"?l(t):l;return T.useEffect(()=>{A&&p.length>1&&E(L=>L.filter(O=>S.some(({key:G})=>O===G)))},[p,S,A]),T.useEffect(()=>{A&&f.current[S[S.length-1]?.key]&&g(f.current[S[S.length-1]?.key])},[S,A]),Je.createElement(jE,Tc({key:t,className:Ct(n,`${n}-${t}`,m?.list,i,{[`${n}-stack`]:!!A,[`${n}-stack-expanded`]:Y}),style:o,keys:S,motionAppear:!0},Q,{onAllRemoved:()=>{c(t)}}),({config:L,className:O,style:G,index:te},ge)=>{const{key:Me,times:he}=L,De=String(Me),{className:_e,style:ke,classNames:Oe,styles:He,...Pe}=L,Ge=S.findIndex(Ze=>Ze.key===De),qe={};if(A){const Ze=S.length-1-(Ge>-1?Ge:te-1),ct=t==="top"||t==="bottom"?"-50%":"0";if(Ze>0){qe.height=Y?f.current[De]?.offsetHeight:h?.offsetHeight;let mt=0;for(let Ke=0;Ke<Ze;Ke++)mt+=f.current[S[S.length-1-Ke].key]?.offsetHeight+U;const xe=(Y?mt:Ze*x)*(t.startsWith("top")?1:-1),Ie=!Y&&h?.offsetWidth&&f.current[De]?.offsetWidth?(h?.offsetWidth-x*2*(Ze<3?Ze:3))/f.current[De]?.offsetWidth:1;qe.transform=`translate3d(${ct}, ${xe}px, 0) scaleX(${Ie})`}else qe.transform=`translate3d(${ct}, 0, 0)`}return Je.createElement("div",{ref:ge,className:Ct(`${n}-notice-wrapper`,O,Oe?.wrapper),style:{...G,...qe,...He?.wrapper},onMouseEnter:()=>E(Ze=>Ze.includes(De)?Ze:[...Ze,De]),onMouseLeave:()=>E(Ze=>Ze.filter(ct=>ct!==De))},Je.createElement(YE,Tc({},Pe,{ref:Ze=>{Ge>-1?f.current[De]=Ze:delete f.current[De]},prefixCls:n,classNames:Oe,styles:He,className:Ct(_e,m?.notice),style:ke,times:he,key:Me,eventKey:Me,onNoticeClose:u,hovering:A&&p.length>0})))})},jA=T.forwardRef((r,e)=>{const{prefixCls:t="rc-notification",container:n,motion:i,maxCount:o,className:l,style:c,onAllRemoved:u,stack:d,renderNotifications:m}=r,[f,h]=T.useState([]),g=k=>{const U=f.find(O=>O.key===k),Y=U?.closable,Q=Y&&typeof Y=="object"?Y:{},{onClose:L}=Q;L?.(),U?.onClose?.(),h(O=>O.filter(G=>G.key!==k))};T.useImperativeHandle(e,()=>({open:k=>{h(U=>{let Y=[...U];const Q=Y.findIndex(O=>O.key===k.key),L={...k};return Q>=0?(L.times=(U[Q]?.times||0)+1,Y[Q]=L):(L.times=0,Y.push(L)),o>0&&Y.length>o&&(Y=Y.slice(-o)),Y})},close:k=>{g(k)},destroy:()=>{h([])}}));const[p,E]=T.useState({});T.useEffect(()=>{const k={};f.forEach(U=>{const{placement:Y="topRight"}=U;Y&&(k[Y]=k[Y]||[],k[Y].push(U))}),Object.keys(p).forEach(U=>{k[U]=k[U]||[]}),E(k)},[f]);const S=k=>{E(U=>{const Y={...U};return(Y[k]||[]).length||delete Y[k],Y})},A=T.useRef(!1);if(T.useEffect(()=>{Object.keys(p).length>0?A.current=!0:A.current&&(u?.(),A.current=!1)},[p]),!n)return null;const x=Object.keys(p);return Zs.createPortal(T.createElement(T.Fragment,null,x.map(k=>{const U=p[k],Y=T.createElement($A,{key:k,configList:U,placement:k,prefixCls:t,className:l?.(k),style:c?.(k),motion:i,onNoticeClose:g,onAllNoticeRemoved:S,stack:d});return m?m(Y,{prefixCls:t,key:k}):Y})),n)}),qA=()=>document.body;let Cy=0;function GA(...r){const e={};return r.forEach(t=>{t&&Object.keys(t).forEach(n=>{const i=t[n];i!==void 0&&(e[n]=i)})}),e}function HA(r={}){const{getContainer:e=qA,motion:t,prefixCls:n,maxCount:i,className:o,style:l,onAllRemoved:c,stack:u,renderNotifications:d,...m}=r,[f,h]=T.useState(),g=T.useRef(),p=T.createElement(jA,{container:f,ref:g,prefixCls:n,motion:t,maxCount:i,className:o,style:l,onAllRemoved:c,stack:u,renderNotifications:d}),[E,S]=T.useState([]),A=hi(k=>{const U=GA(m,k);(U.key===null||U.key===void 0)&&(U.key=`rc-notification-${Cy}`,Cy+=1),S(Y=>[...Y,{type:"open",config:U}])}),x=T.useMemo(()=>({open:A,close:k=>{S(U=>[...U,{type:"close",key:k}])},destroy:()=>{S(k=>[...k,{type:"destroy"}])}}),[]);return T.useEffect(()=>{h(e())}),T.useEffect(()=>{if(g.current&&E.length){E.forEach(Y=>{switch(Y.type){case"open":g.current.open(Y.config);break;case"close":g.current.close(Y.key);break;case"destroy":g.current.destroy();break}});let k,U;S(Y=>((k!==Y||!U)&&(k=Y,U=Y.filter(Q=>!E.includes(Q))),U))}},[E]),[x,p]}var VA={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};function gf(){return gf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},gf.apply(this,arguments)}const KA=(r,e)=>T.createElement(Dr,gf({},r,{ref:e,icon:VA})),Uo=T.forwardRef(KA),YA=r=>{const{componentCls:e,iconCls:t,boxShadow:n,colorText:i,colorSuccess:o,colorError:l,colorWarning:c,colorInfo:u,fontSizeLG:d,motionEaseInOutCirc:m,motionDurationSlow:f,marginXS:h,paddingXS:g,borderRadiusLG:p,zIndexPopup:E,contentPadding:S,contentBg:A}=r,x=`${e}-notice`,k=new or("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:g,transform:"translateY(0)",opacity:1}}),U=new or("MessageMoveOut",{"0%":{maxHeight:r.height,padding:g,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),Y={padding:g,textAlign:"center",[`${e}-custom-content`]:{display:"flex",alignItems:"center"},[`${e}-custom-content > ${t}`]:{marginInlineEnd:h,fontSize:d},[`${x}-content`]:{display:"inline-block",padding:S,background:A,borderRadius:p,boxShadow:n,pointerEvents:"all"},[`${e}-success > ${t}`]:{color:o},[`${e}-error > ${t}`]:{color:l},[`${e}-warning > ${t}`]:{color:c},[`${e}-info > ${t},
      ${e}-loading > ${t}`]:{color:u}};return[{[e]:{...la(r),color:i,position:"fixed",top:h,width:"100%",pointerEvents:"none",zIndex:E,[`${e}-move-up`]:{animationFillMode:"forwards"},[`
        ${e}-move-up-appear,
        ${e}-move-up-enter
      `]:{animationName:k,animationDuration:f,animationPlayState:"paused",animationTimingFunction:m},[`
        ${e}-move-up-appear${e}-move-up-appear-active,
        ${e}-move-up-enter${e}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:U,animationDuration:f,animationPlayState:"paused",animationTimingFunction:m},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}}},{[e]:{[`${x}-wrapper`]:{...Y}}},{[`${e}-notice-pure-panel`]:{...Y,padding:0,textAlign:"start"}}]},WA=r=>({zIndexPopup:r.zIndexPopupBase+LA+10,contentBg:r.colorBgElevated,contentPadding:`${(r.controlHeightLG-r.fontSize*r.lineHeight)/2}px ${r.paddingSM}px`}),XE=ai("Message",r=>{const e=Nr(r,{height:150});return YA(e)},WA),XA={info:T.createElement(pA,null),success:T.createElement(BE,null),error:T.createElement(Fh,null),warning:T.createElement(hA,null),loading:T.createElement(Uo,null)},QE=r=>{const{prefixCls:e,type:t,icon:n,children:i,classNames:o,styles:l}=r,c=n||t&&XA[t],u=Ea(c,d=>{const m={...d?.style,...l?.icon};return{className:Ct(d.className,o?.icon),style:m}});return T.createElement("div",{className:Ct(`${e}-custom-content`,`${e}-${t}`)},u,T.createElement("span",{className:o?.content,style:l?.content},i))},QA=r=>{const{prefixCls:e,className:t,style:n,type:i,icon:o,content:l,classNames:c,styles:u,...d}=r,{getPrefixCls:m,className:f,style:h,classNames:g,styles:p}=Xr("message"),E=e||m("message"),S=io(E),[A,x]=XE(E,S),[k,U]=Ei([g,c],[p,u],{props:r});return T.createElement(YE,{...d,prefixCls:E,className:Ct(f,k.root,t,A,`${E}-notice-pure-panel`,x,S),style:{...U.root,...h,...n},eventKey:"pure",duration:null,content:T.createElement(QE,{prefixCls:E,type:i,icon:o,classNames:k,styles:U},l)})};function ZA(r,e){return{motionName:e??`${r}-move-up`}}function Bh(r){let e;const t=new Promise(i=>{e=r(()=>{i(!0)})}),n=()=>{e?.()};return n.then=(i,o)=>t.then(i,o),n.promise=t,n}const JA=8,eR=3,tR=({children:r,prefixCls:e})=>{const t=io(e),[n,i]=XE(e,t);return T.createElement(UA,{classNames:{list:Ct(n,i,t)}},r)},nR=(r,{prefixCls:e,key:t})=>T.createElement(tR,{prefixCls:e,key:t},r),rR=T.forwardRef((r,e)=>{const{top:t,prefixCls:n,getContainer:i,maxCount:o,duration:l=eR,rtl:c,transitionName:u,onAllRemoved:d,pauseOnHover:m=!0}=r,{getPrefixCls:f,direction:h,getPopupContainer:g}=Xr("message"),{message:p}=T.useContext(Lr),E=n||f("message"),S=()=>({left:"50%",transform:"translateX(-50%)",top:t??JA}),A=()=>Ct({[`${E}-rtl`]:c??h==="rtl"}),x=()=>ZA(E,u),[k,U]=Ei([r?.classNames,p?.classNames],[r?.styles,p?.styles],{props:r}),[Y,Q]=HA({prefixCls:E,style:S,className:A,motion:x,closable:!1,duration:l,getContainer:()=>i?.()||g?.()||document.body,maxCount:o,onAllRemoved:d,renderNotifications:nR,pauseOnHover:m});return T.useImperativeHandle(e,()=>({...Y,prefixCls:E,message:p,classNames:k,styles:U})),Q});let ky=0;function ZE(r){const e=T.useRef(null);return[T.useMemo(()=>{const n=u=>{e.current?.close(u)},i=u=>{if(!e.current){const qe=()=>{};return qe.then=()=>{},qe}const{open:d,prefixCls:m,message:f,classNames:h,styles:g}=e.current,p=f?.className||{},E=f?.style||{},S=f?.classNames||{},A=f?.styles||{},x=`${m}-notice`,{content:k,icon:U,type:Y,key:Q,className:L,style:O,onClose:G,classNames:te={},styles:ge={},...Me}=u;let he=Q;Ba(he)||(ky+=1,he=`antd-message-${ky}`);const De={...r,...u},_e=js(S,{props:De}),ke=js(te,{props:De}),Oe=js(A,{props:De}),He=js(ge,{props:De}),Pe=zh(void 0,_e,ke,h),Ge=HE(Oe,He,g);return Bh(qe=>(d({...Me,key:he,content:T.createElement(QE,{prefixCls:m,type:Y,icon:U,classNames:Pe,styles:Ge},k),placement:"top",className:Ct({[`${x}-${Y}`]:Y},L,p,Pe.root),style:{...Ge.root,...E,...O},onClose:()=>{G?.(),qe()}}),()=>{n(he)}))},l={open:i,destroy:u=>{u!==void 0?n(u):e.current?.destroy()}};return["info","success","warning","error","loading"].forEach(u=>{const d=(m,f,h)=>{let g;m&&typeof m=="object"&&"content"in m?g=m:g={content:m};let p,E;typeof f=="function"?E=f:(p=f,E=h);const S={onClose:E,duration:p,...g,type:u};return i(S)};l[u]=d}),l},[]),T.createElement(rR,{key:"message-holder",...r,ref:e})]}function iR(r){return ZE(r)}const Sc="__rc_react_root__";function JE(r,e){const t=e[Sc]||hI.createRoot(e);t.render(r),e[Sc]=t}async function aR(r){return Promise.resolve().then(()=>{r[Sc]?.unmount(),delete r[Sc]})}const Hu=()=>({height:0,opacity:0}),Ly=r=>{const{scrollHeight:e}=r;return{height:e,opacity:1}},sR=r=>({height:r?r.offsetHeight:0}),Vu=(r,e)=>e?.deadline===!0||e.propertyName==="height",oR=(r=SE)=>({motionName:`${r}-motion-collapse`,onAppearStart:Hu,onEnterStart:Hu,onAppearActive:Ly,onEnterActive:Ly,onLeaveStart:sR,onLeaveActive:Hu,onAppearEnd:Vu,onEnterEnd:Vu,onLeaveEnd:Vu,motionDeadline:500}),ev=(r,e,t)=>t!==void 0?t:`${r}-${e}`,lR=r=>{const{componentCls:e,colorPrimary:t,motionDurationSlow:n,motionEaseInOut:i,motionEaseOutCirc:o,antCls:l}=r,[,c]=va(l,"wave");return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:c("color",t),boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:["box-shadow 0.4s","opacity 2s"].map(u=>`${u} ${o}`).join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:["box-shadow","opacity"].map(u=>`${u} ${n} ${i}`).join(",")}}}}},cR=YI("Wave",lR),tv=`${SE}-wave-target`;function Ny(r){return r&&typeof r=="string"&&r!=="#fff"&&r!=="#ffffff"&&r!=="rgb(255, 255, 255)"&&r!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(r)&&r!=="transparent"&&r!=="canvastext"}function uR(r,e=null){const t=getComputedStyle(r),{borderTopColor:n,borderColor:i,backgroundColor:o}=t;return e&&Ny(t[e])?t[e]:[n,i,o].find(Ny)??null}function Ku(r){return Number.isNaN(r)?0:r}const dR=r=>{const{className:e,target:t,component:n,colorSource:i}=r,o=T.useRef(null),{getPrefixCls:l}=T.useContext(Lr),c=l(),[u]=va(c,"wave"),[d,m]=T.useState(null),[f,h]=T.useState([]),[g,p]=T.useState(0),[E,S]=T.useState(0),[A,x]=T.useState(0),[k,U]=T.useState(0),[Y,Q]=T.useState(!1),L={left:g,top:E,width:A,height:k,borderRadius:f.map(te=>`${te}px`).join(" ")};d&&(L[u("color")]=d);function O(){const te=getComputedStyle(t);m(uR(t,i));const ge=te.position==="static",{borderLeftWidth:Me,borderTopWidth:he}=te;p(ge?t.offsetLeft:Ku(-Number.parseFloat(Me))),S(ge?t.offsetTop:Ku(-Number.parseFloat(he))),x(t.offsetWidth),U(t.offsetHeight);const{borderTopLeftRadius:De,borderTopRightRadius:_e,borderBottomLeftRadius:ke,borderBottomRightRadius:Oe}=te;h([De,_e,Oe,ke].map(He=>Ku(Number.parseFloat(He))))}if(T.useEffect(()=>{if(t){const te=Yr(()=>{O(),Q(!0)});let ge;return typeof ResizeObserver<"u"&&(ge=new ResizeObserver(O),ge.observe(t)),()=>{Yr.cancel(te),ge?.disconnect()}}},[t]),!Y)return null;const G=(n==="Checkbox"||n==="Radio")&&t?.classList.contains(tv);return T.createElement(cs,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(te,ge)=>{if(ge.deadline||ge.propertyName==="opacity"){const Me=o.current?.parentElement;aR(Me).then(()=>{Me?.remove()})}return!1}},({className:te},ge)=>T.createElement("div",{ref:nl(o,ge),className:Ct(e,te,{"wave-quick":G}),style:L}))},fR=(r,e)=>{const{component:t}=e;if(t==="Checkbox"&&!r.querySelector("input")?.checked)return;const n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.top="0px",r?.insertBefore(n,r?.firstChild),JE(T.createElement(dR,{...e,target:r}),n)},hR=(r,e,t,n)=>{const{wave:i}=T.useContext(Lr),[,o,l]=tl(),c=hi(m=>{const f=r.current;if(i?.disabled||!f)return;const h=f.querySelector(`.${tv}`)||f,{showEffect:g}=i||{};(g||fR)(h,{className:e,token:o,component:t,event:m,hashId:l,colorSource:n})}),u=T.useRef(null);return T.useEffect(()=>()=>{Yr.cancel(u.current)},[]),m=>{Yr.cancel(u.current),u.current=Yr(()=>{c(m)})}},mR=r=>{const{children:e,disabled:t,component:n,colorSource:i}=r,{getPrefixCls:o}=T.useContext(Lr),l=T.useRef(null),c=o("wave"),u=cR(c),d=hR(l,Ct(c,u),n,i);if(Je.useEffect(()=>{const f=l.current;if(!f||f.nodeType!==window.Node.ELEMENT_NODE||t)return;const h=g=>{!wE(g.target)||!f.getAttribute||f.getAttribute("disabled")||f.disabled||f.className.includes("disabled")&&!f.className.includes("disabled:")||f.getAttribute("aria-disabled")==="true"||f.className.includes("-leave")||d(g)};return f.addEventListener("click",h,!0),()=>{f.removeEventListener("click",h,!0)}},[t]),!Je.isValidElement(e))return e??null;const m=Nh(e)?nl(Xc(e),l):l;return Ea(e,{ref:m})},Zc=r=>{const e=Je.useContext(mI);return Je.useMemo(()=>r?typeof r=="string"?r??e:typeof r=="function"?r(e):e:e,[r,e])},nv=T.createContext(null),rv=(r,e)=>{const t=T.useContext(nv),n=T.useMemo(()=>{if(!t)return"";const{compactDirection:i,isFirstItem:o,isLastItem:l}=t,c=i==="vertical"?"-vertical-":"-";return Ct(`${r}-compact${c}item`,{[`${r}-compact${c}first-item`]:o,[`${r}-compact${c}last-item`]:l,[`${r}-compact${c}item-rtl`]:e==="rtl"})},[r,e,t]);return{compactSize:t?.compactSize,compactDirection:t?.compactDirection,compactItemClassnames:n}},gR=r=>{const{children:e}=r;return T.createElement(nv.Provider,{value:null},e)},iv=T.createContext(void 0),pR=r=>{const{getPrefixCls:e,direction:t}=T.useContext(Lr),{prefixCls:n,size:i,className:o,...l}=r,c=e("btn-group",n),[,,u]=tl(),d=T.useMemo(()=>{switch(i){case"large":return"lg";case"small":return"sm";default:return""}},[i]),m=Ct(c,{[`${c}-${d}`]:d,[`${c}-rtl`]:t==="rtl"},o,u);return T.createElement(iv.Provider,{value:i},T.createElement("div",{...l,className:m}))},Dy=/^[\u4E00-\u9FA5]{2}$/,pf=Dy.test.bind(Dy);function Py(r){return typeof r=="string"}function Yu(r){return r==="text"||r==="link"}function yR(r,e,t,n){if(!Ba(r)||r==="")return;const i=e?" ":"";return typeof r!="string"&&typeof r!="number"&&Py(r.type)&&pf(r.props.children)?Ea(r,o=>{const l=Ct(o.className,n)||void 0,c={...t,...o.style};return{...o,children:o.children.split("").join(i),className:l,style:c}}):Py(r)?Je.createElement("span",{className:n,style:t},pf(r)?r.split("").join(i):r):_E(r)?Je.createElement("span",{className:n,style:t},r):Ea(r,o=>({...o,className:Ct(o.className,n)||void 0,style:{...o.style,...t}}))}function bR(r,e,t,n){let i=!1;const o=[];return Je.Children.forEach(r,l=>{const c=typeof l,u=c==="string"||c==="number";if(i&&u){const d=o.length-1,m=o[d];o[d]=`${m}${l}`}else o.push(l);i=u}),Je.Children.map(o,l=>yR(l,e,t,n))}["default","primary","danger"].concat(Fr(os));const av=T.forwardRef((r,e)=>{const{className:t,style:n,children:i,prefixCls:o}=r,l=Ct(`${o}-icon`,t);return Je.createElement("span",{ref:e,className:l,style:n},i)}),My=T.forwardRef((r,e)=>{const{prefixCls:t,className:n,style:i,iconClassName:o}=r,l=Ct(`${t}-loading-icon`,n);return Je.createElement(av,{prefixCls:t,className:l,style:i,ref:e},Je.createElement(Uo,{className:o}))}),Wu=()=>({width:0,opacity:0,transform:"scale(0)"}),Xu=r=>({width:r.scrollWidth,opacity:1,transform:"scale(1)"}),ER=r=>{const{prefixCls:e,loading:t,existIcon:n,className:i,style:o,mount:l}=r,c=!!t;return n?Je.createElement(My,{prefixCls:e,className:i,style:o}):Je.createElement(cs,{visible:c,motionName:`${e}-loading-icon-motion`,motionAppear:!l,motionEnter:!l,motionLeave:!l,removeOnLeave:!0,onAppearStart:Wu,onAppearActive:Xu,onEnterStart:Wu,onEnterActive:Xu,onLeaveStart:Xu,onLeaveActive:Wu},({className:u,style:d},m)=>{const f={...o,...d};return Je.createElement(My,{prefixCls:e,className:Ct(i,u),style:f,ref:m})})},Oy=(r,e)=>({[`> span, > ${r}`]:{"&:not(:last-child)":{[`&, & > ${r}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${r}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),vR=r=>{const{componentCls:e,fontSize:t,lineWidth:n,groupBorderColor:i,colorErrorHover:o}=r;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:r.calc(n).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:t}},Oy(`${e}-primary`,i),Oy(`${e}-danger`,o)]}},Qu=r=>Math.round(Number(r||0)),TR=r=>{if(r instanceof Dh)return r;if(r&&typeof r=="object"&&"h"in r&&"b"in r){const{b:e,...t}=r;return{...t,v:e}}return typeof r=="string"&&/hsb/.test(r)?r.replace(/hsb/,"hsv"):r};class Bo extends Dh{constructor(e){super(TR(e))}toHsbString(){const e=this.toHsb(),t=Qu(e.s*100),n=Qu(e.b*100),i=Qu(e.h),o=e.a,l=`hsb(${i}, ${t}%, ${n}%)`,c=`hsba(${i}, ${t}%, ${n}%, ${o.toFixed(o===0?0:2)})`;return o===1?l:c}toHsb(){const{v:e,...t}=this.toHsv();return{...t,b:e,a:this.a}}}const SR=r=>r instanceof Bo?r:new Bo(r);SR("#1677ff");const wR=(r,e)=>r?.replace(/[^0-9a-f]/gi,"").slice(0,e?8:6)||"",_R=(r,e)=>r?wR(r,e):"";let yf=(function(){function r(e){if(el(this,r),this.cleared=!1,e instanceof r){this.metaColor=e.metaColor.clone(),this.colors=e.colors?.map(n=>({color:new r(n.color),percent:n.percent})),this.cleared=e.cleared;return}const t=Array.isArray(e);t&&e.length?(this.colors=e.map(({color:n,percent:i})=>({color:new r(n),percent:i})),this.metaColor=new Bo(this.colors[0].color.metaColor)):this.metaColor=new Bo(t?"":e),(!e||t&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Jo(r,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return _R(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:t}=this;return t?`linear-gradient(90deg, ${t.map(i=>`${i.color.toRgbString()} ${i.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(t){return!t||this.isGradient()!==t.isGradient()?!1:this.isGradient()?this.colors.length===t.colors.length&&this.colors.every((n,i)=>{const o=t.colors[i];return n.percent===o.percent&&n.color.equals(o.color)}):this.toHexString()===t.toHexString()}}])})();function ra(){return ra=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ra.apply(null,arguments)}const xR=r=>{const{componentCls:e,antCls:t,motionDurationMid:n,motionEaseInOut:i}=r;return{[e]:{[`${t}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`${["height","opacity"].map(o=>`${o} ${n} ${i}`).join(", ")} !important`}},[`${t}-motion-collapse`]:{overflow:"hidden",transition:`${["height","opacity"].map(o=>`${o} ${n} ${i}`).join(", ")} !important`}}}},IR=r=>({animationDuration:r,animationFillMode:"both"}),AR=r=>({animationDuration:r,animationFillMode:"both"}),$h=(r,e,t,n,i=!1)=>{const o=i?"&":"";return{[`
      ${o}${r}-enter,
      ${o}${r}-appear
    `]:{...IR(n),animationPlayState:"paused"},[`${o}${r}-leave`]:{...AR(n),animationPlayState:"paused"},[`
      ${o}${r}-enter${r}-enter-active,
      ${o}${r}-appear${r}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${o}${r}-leave${r}-leave-active`]:{animationName:t,animationPlayState:"running",pointerEvents:"none"}}},RR=new or("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),CR=new or("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),sv=(r,e=!1)=>{const{antCls:t}=r,n=`${t}-fade`,i=e?"&":"";return[$h(n,RR,CR,r.motionDurationMid,e),{[`
        ${i}${n}-enter,
        ${i}${n}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${n}-leave`]:{animationTimingFunction:"linear"}}]},kR=new or("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),LR=new or("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),NR=new or("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),DR=new or("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),PR=new or("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),MR=new or("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),OR=new or("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),FR=new or("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),zR={"slide-up":{inKeyframes:kR,outKeyframes:LR},"slide-down":{inKeyframes:NR,outKeyframes:DR},"slide-left":{inKeyframes:PR,outKeyframes:MR},"slide-right":{inKeyframes:OR,outKeyframes:FR}},Fy=(r,e)=>{const{antCls:t}=r,n=`${t}-${e}`,{inKeyframes:i,outKeyframes:o}=zR[e];return[$h(n,i,o,r.motionDurationMid),{[`
      ${n}-enter,
      ${n}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:r.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${n}-leave`]:{animationTimingFunction:r.motionEaseInQuint}}]},UR=new or("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),BR=new or("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),zy=new or("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Uy=new or("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),$R=new or("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),jR=new or("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),qR=new or("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),GR=new or("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),HR=new or("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),VR=new or("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),KR=new or("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),YR=new or("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),WR={zoom:{inKeyframes:UR,outKeyframes:BR},"zoom-big":{inKeyframes:zy,outKeyframes:Uy},"zoom-big-fast":{inKeyframes:zy,outKeyframes:Uy},"zoom-left":{inKeyframes:qR,outKeyframes:GR},"zoom-right":{inKeyframes:HR,outKeyframes:VR},"zoom-up":{inKeyframes:$R,outKeyframes:jR},"zoom-down":{inKeyframes:KR,outKeyframes:YR}},XR=(r,e)=>{const{antCls:t}=r,n=`${t}-${e}`,{inKeyframes:i,outKeyframes:o}=WR[e];return[$h(n,i,o,r.motionDurationFast),{[`
        ${n}-enter,
        ${n}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:r.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${n}-leave`]:{animationTimingFunction:r.motionEaseInOutCirc}}]},QR=r=>r instanceof yf?r:new yf(r),ZR=(r,e)=>{const{r:t,g:n,b:i,a:o}=r.toRgb(),l=new Bo(r.toRgbString()).onBackground(e).toHsv();return o<=.5?l.v>.5:t*.299+n*.587+i*.114>192},ov=r=>{const{paddingInline:e,onlyIconSize:t,borderColorDisabled:n}=r;return Nr(r,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:t,colorBorderDisabled:n})},lv=r=>{const e=r.contentFontSize??r.fontSize,t=r.contentFontSizeSM??r.fontSize,n=r.contentFontSizeLG??r.fontSizeLG,i=r.contentLineHeight??ju(e),o=r.contentLineHeightSM??ju(t),l=r.contentLineHeightLG??ju(n),c=ZR(new yf(r.colorBgSolid),"#fff")?"#000":"#fff",u=os.reduce((f,h)=>({...f,[`${h}ShadowColor`]:`0 ${an(r.controlOutlineWidth)} 0 ${gI(r[`${h}1`],r.colorBgContainer)}`}),{}),d=r.colorBgContainerDisabled,m=r.colorBgContainerDisabled;return{...u,fontWeight:400,iconGap:r.marginXS,defaultShadow:`0 ${r.controlOutlineWidth}px 0 ${r.controlTmpOutline}`,primaryShadow:`0 ${r.controlOutlineWidth}px 0 ${r.controlOutline}`,dangerShadow:`0 ${r.controlOutlineWidth}px 0 ${r.colorErrorOutline}`,primaryColor:r.colorTextLightSolid,dangerColor:r.colorTextLightSolid,borderColorDisabled:r.colorBorderDisabled,defaultGhostColor:r.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:r.colorBgContainer,paddingInline:r.paddingContentHorizontal-r.lineWidth,paddingInlineLG:r.paddingContentHorizontal-r.lineWidth,paddingInlineSM:8-r.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:r.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:r.colorText,textTextHoverColor:r.colorText,textTextActiveColor:r.colorText,textHoverBg:r.colorFillTertiary,defaultColor:r.colorText,defaultBg:r.colorBgContainer,defaultBorderColor:r.colorBorder,defaultBorderColorDisabled:r.colorBorder,defaultHoverBg:r.colorBgContainer,defaultHoverColor:r.colorPrimaryHover,defaultHoverBorderColor:r.colorPrimaryHover,defaultActiveBg:r.colorBgContainer,defaultActiveColor:r.colorPrimaryActive,defaultActiveBorderColor:r.colorPrimaryActive,solidTextColor:c,contentFontSize:e,contentFontSizeSM:t,contentFontSizeLG:n,contentLineHeight:i,contentLineHeightSM:o,contentLineHeightLG:l,paddingBlock:Math.max((r.controlHeight-e*i)/2-r.lineWidth,0),paddingBlockSM:Math.max((r.controlHeightSM-t*o)/2-r.lineWidth,0),paddingBlockLG:Math.max((r.controlHeightLG-n*l)/2-r.lineWidth,0),defaultBgDisabled:d,dashedBgDisabled:m}},JR=r=>{const{componentCls:e,antCls:t,lineWidth:n}=r,[i,o]=va(t,"btn");return{[e]:[{[i("border-width")]:n,[i("border-color")]:"#000",[i("border-color-hover")]:o("border-color"),[i("border-color-active")]:o("border-color"),[i("border-color-disabled")]:o("border-color"),[i("border-style")]:"solid",[i("text-color")]:"#000",[i("text-color-hover")]:o("text-color"),[i("text-color-active")]:o("text-color"),[i("text-color-disabled")]:o("text-color"),[i("bg-color")]:"#ddd",[i("bg-color-hover")]:o("bg-color"),[i("bg-color-active")]:o("bg-color"),[i("bg-color-disabled")]:r.colorBgContainerDisabled,[i("bg-color-container")]:r.colorBgContainer,[i("shadow")]:"none"},{border:[o("border-width"),o("border-style"),o("border-color")].join(" "),color:o("text-color"),backgroundColor:o("bg-color"),[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":{border:[o("border-width"),o("border-style"),o("border-color-hover")].join(" "),color:o("text-color-hover"),backgroundColor:o("bg-color-hover")},"&:active":{border:[o("border-width"),o("border-style"),o("border-color-active")].join(" "),color:o("text-color-active"),backgroundColor:o("bg-color-active")}}},{[`&${e}-variant-solid`]:{[i("solid-bg-color")]:o("color-base"),[i("solid-bg-color-hover")]:o("color-hover"),[i("solid-bg-color-active")]:o("color-active"),[i("border-color")]:"transparent",[i("text-color")]:r.colorTextLightSolid,[i("bg-color")]:o("solid-bg-color"),[i("bg-color-hover")]:o("solid-bg-color-hover"),[i("bg-color-active")]:o("solid-bg-color-active"),boxShadow:o("shadow")},[`&${e}-variant-outlined, &${e}-variant-dashed`]:{[i("border-color")]:o("color-base"),[i("border-color-hover")]:o("color-hover"),[i("border-color-active")]:o("color-active"),[i("bg-color")]:o("bg-color-container"),[i("text-color")]:o("color-base"),[i("text-color-hover")]:o("color-hover"),[i("text-color-active")]:o("color-active"),boxShadow:o("shadow")},[`&${e}-variant-dashed`]:{[i("border-style")]:"dashed",[i("bg-color-disabled")]:r.dashedBgDisabled},[`&${e}-variant-filled`]:{[i("border-color")]:"transparent",[i("text-color")]:o("color-base"),[i("bg-color")]:o("color-light"),[i("bg-color-hover")]:o("color-light-hover"),[i("bg-color-active")]:o("color-light-active")},[`&${e}-variant-text, &${e}-variant-link`]:{[i("border-color")]:"transparent",[i("text-color")]:o("color-base"),[i("text-color-hover")]:o("color-hover"),[i("text-color-active")]:o("color-active"),[i("bg-color")]:"transparent",[i("bg-color-hover")]:"transparent",[i("bg-color-active")]:"transparent",[`&:disabled, &${r.componentCls}-disabled`]:{background:"transparent",borderColor:"transparent"}},[`&${e}-variant-text`]:{[i("bg-color-hover")]:o("color-light"),[i("bg-color-active")]:o("color-light-active")}},{[`&${e}-variant-link`]:{[i("color-base")]:r.colorLink,[i("color-hover")]:r.colorLinkHover,[i("color-active")]:r.colorLinkActive,[i("bg-color-hover")]:r.linkHoverBg},[`&${e}-color-primary`]:{[i("color-base")]:r.colorPrimary,[i("color-hover")]:r.colorPrimaryHover,[i("color-active")]:r.colorPrimaryActive,[i("color-light")]:r.colorPrimaryBg,[i("color-light-hover")]:r.colorPrimaryBgHover,[i("color-light-active")]:r.colorPrimaryBorder,[i("shadow")]:r.primaryShadow,[`&${e}-variant-solid`]:{[i("text-color")]:r.primaryColor,[i("text-color-hover")]:o("text-color"),[i("text-color-active")]:o("text-color")}},[`&${e}-color-dangerous`]:{[i("color-base")]:r.colorError,[i("color-hover")]:r.colorErrorHover,[i("color-active")]:r.colorErrorActive,[i("color-light")]:r.colorErrorBg,[i("color-light-hover")]:r.colorErrorBgFilledHover,[i("color-light-active")]:r.colorErrorBgActive,[i("shadow")]:r.dangerShadow,[`&${e}-variant-solid`]:{[i("text-color")]:r.dangerColor,[i("text-color-hover")]:o("text-color"),[i("text-color-active")]:o("text-color")}},[`&${e}-color-default`]:{[i("solid-bg-color")]:r.colorBgSolid,[i("solid-bg-color-hover")]:r.colorBgSolidHover,[i("solid-bg-color-active")]:r.colorBgSolidActive,[i("color-base")]:r.defaultBorderColor,[i("color-hover")]:r.defaultHoverBorderColor,[i("color-active")]:r.defaultActiveBorderColor,[i("color-light")]:r.colorFillTertiary,[i("color-light-hover")]:r.colorFillSecondary,[i("color-light-active")]:r.colorFill,[i("text-color")]:r.defaultColor,[i("text-color-hover")]:r.defaultHoverColor,[i("text-color-active")]:r.defaultActiveColor,[i("shadow")]:r.defaultShadow,[`&${e}-variant-outlined`]:{[i("bg-color-disabled")]:r.defaultBgDisabled},[`&${e}-variant-solid`]:{[i("text-color")]:r.solidTextColor,[i("text-color-hover")]:o("text-color"),[i("text-color-active")]:o("text-color")},[`&${e}-variant-filled, &${e}-variant-text`]:{[i("text-color-hover")]:o("text-color"),[i("text-color-active")]:o("text-color")},[`&${e}-variant-outlined, &${e}-variant-dashed`]:{[i("text-color")]:r.defaultColor,[i("text-color-hover")]:r.defaultHoverColor,[i("text-color-active")]:r.defaultActiveColor,[i("bg-color-container")]:r.defaultBg,[i("bg-color-hover")]:r.defaultHoverBg,[i("bg-color-active")]:r.defaultActiveBg},[`&${e}-variant-text`]:{[i("text-color")]:r.textTextColor,[i("text-color-hover")]:r.textTextHoverColor,[i("text-color-active")]:r.textTextActiveColor,[i("bg-color-hover")]:r.textHoverBg},[`&${e}-background-ghost`]:{[`&${e}-variant-outlined, &${e}-variant-dashed`]:{[i("text-color")]:r.defaultGhostColor,[i("border-color")]:r.defaultGhostBorderColor}}}},os.map(l=>{const c=r[`${l}6`],u=r[`${l}1`],d=r[`${l}Hover`],m=r[`${l}2`],f=r[`${l}3`],h=r[`${l}Active`],g=r[`${l}ShadowColor`];return{[`&${e}-color-${l}`]:{[i("color-base")]:c,[i("color-hover")]:d,[i("color-active")]:h,[i("color-light")]:u,[i("color-light-hover")]:m,[i("color-light-active")]:f,[i("shadow")]:g}}}),{[`&:disabled, &${r.componentCls}-disabled`]:{cursor:"not-allowed",borderColor:r.colorBorderDisabled,background:o("bg-color-disabled"),color:r.colorTextDisabled,boxShadow:"none"}},{[`&${e}-background-ghost`]:{[i("bg-color")]:r.ghostBg,[i("bg-color-hover")]:r.ghostBg,[i("bg-color-active")]:r.ghostBg,[i("shadow")]:"none",[`&${e}-variant-outlined, &${e}-variant-dashed`]:{[i("bg-color-hover")]:r.ghostBg,[i("bg-color-active")]:r.ghostBg}}}]}},eC=r=>{const{componentCls:e,iconCls:t,fontWeight:n,opacityLoading:i,motionDurationSlow:o,motionEaseInOut:l,iconGap:c,calc:u}=r;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:c,alignItems:"center",justifyContent:"center",fontWeight:n,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",cursor:"pointer",transition:`all ${r.motionDurationMid} ${r.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation","&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:pI(),"> a":{color:"currentColor"},"&:not(:disabled)":gc(r),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${t})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"}},[`&${e}-loading`]:{opacity:i,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map(d=>`${d} ${o} ${l}`).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:u(c).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:u(c).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:u(c).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:u(c).mul(-1).equal()}}}}}},tC=r=>({minWidth:r.controlHeight,paddingInline:0,borderRadius:"50%"}),jh=(r,e="")=>{const{componentCls:t,controlHeight:n,fontSize:i,borderRadius:o,buttonPaddingHorizontal:l,iconCls:c,buttonPaddingVertical:u,buttonIconOnlyFontSize:d}=r;return[{[e]:{fontSize:i,height:n,padding:`${an(u)} ${an(l)}`,borderRadius:o,[`&${t}-icon-only`]:{width:n,[c]:{fontSize:d}}}},{[`${t}${t}-circle${e}`]:tC(r)},{[`${t}${t}-round${e}`]:{borderRadius:r.controlHeight,[`&:not(${t}-icon-only)`]:{paddingInline:r.buttonPaddingHorizontal}}}]},nC=r=>{const e=Nr(r,{fontSize:r.contentFontSize});return jh(e,r.componentCls)},rC=r=>{const e=Nr(r,{controlHeight:r.controlHeightSM,fontSize:r.contentFontSizeSM,padding:r.paddingXS,buttonPaddingHorizontal:r.paddingInlineSM,buttonPaddingVertical:0,borderRadius:r.borderRadiusSM,buttonIconOnlyFontSize:r.onlyIconSizeSM});return jh(e,`${r.componentCls}-sm`)},iC=r=>{const e=Nr(r,{controlHeight:r.controlHeightLG,fontSize:r.contentFontSizeLG,buttonPaddingHorizontal:r.paddingInlineLG,buttonPaddingVertical:0,borderRadius:r.borderRadiusLG,buttonIconOnlyFontSize:r.onlyIconSizeLG});return jh(e,`${r.componentCls}-lg`)},aC=r=>{const{componentCls:e}=r;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},sC=ai("Button",r=>{const e=ov(r);return[eC(e),nC(e),rC(e),iC(e),aC(e),JR(e),vR(e)]},lv,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function oC(r,e,t,n){const{focusElCls:i,focus:o,borderElCls:l}=t,c=l?"> *":"",u=["hover",o?"focus":null,"active"].filter(Boolean).map(d=>`&:${d} ${c}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:r.calc(r.lineWidth).mul(-1).equal()},[`&-item:not(${n}-status-success)`]:{zIndex:2},"&-item":{[u]:{zIndex:3},...i?{[`&${i}`]:{zIndex:3}}:{},[`&[disabled] ${c}`]:{zIndex:0}}}}function lC(r,e,t){const{borderElCls:n}=t,i=n?`> ${n}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${i}, &${r}-sm ${i}, &${r}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${i}, &${r}-sm ${i}, &${r}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function cv(r,e={focus:!0}){const{componentCls:t}=r,{componentCls:n}=e,i=n||t,o=`${i}-compact`;return{[o]:{...oC(r,o,e,i),...lC(i,o,e)}}}function cC(r,e,t){return{[`&-item:not(${e}-last-item)`]:{marginBottom:r.calc(r.lineWidth).mul(-1).equal()},[`&-item:not(${t}-status-success)`]:{zIndex:2},"&-item":{"&:hover,&:focus,&:active":{zIndex:3},"&[disabled]":{zIndex:0}}}}function uC(r,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${r}-sm, &${r}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${r}-sm, &${r}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function dC(r){const e=`${r.componentCls}-compact-vertical`;return{[e]:{...cC(r,e,r.componentCls),...uC(r.componentCls,e)}}}const fC=r=>{const{antCls:e,componentCls:t,lineWidth:n,calc:i,colorBgContainer:o}=r,l=`${t}-variant-solid:not([disabled])`,c=i(n).mul(-1).equal(),[u,d]=va(e,"btn"),m=f=>({[`${t}-compact${f?"-vertical":""}-item`]:{[u("compact-connect-border-color")]:d("bg-color-hover"),[`&${l}`]:{transition:"none",[`& + ${l}:before`]:[{position:"absolute",backgroundColor:d("compact-connect-border-color"),content:'""'},f?{top:c,insetInline:c,height:n}:{insetBlock:c,insetInlineStart:c,width:n}],"&:hover:before":{display:"none"}}}});return[m(),m(!0),{[`${l}${t}-color-default`]:{[u("compact-connect-border-color")]:`color-mix(in srgb, ${d("bg-color-hover")} 75%, ${o})`}}]},hC=WI(["Button","compact"],r=>{const e=ov(r);return[cv(e),dC(e),fC(e)]},lv);function mC(r){if(typeof r=="object"&&r){let e=r?.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!r,delay:0}}const gC={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},pC=Je.forwardRef((r,e)=>{const{_skipSemantic:t,loading:n=!1,prefixCls:i,color:o,variant:l,type:c,danger:u=!1,shape:d,size:m,disabled:f,className:h,rootClassName:g,children:p,icon:E,iconPosition:S,iconPlacement:A,ghost:x=!1,block:k=!1,htmlType:U="button",classNames:Y,styles:Q,style:L,autoInsertSpace:O,autoFocus:G,...te}=r,ge=us(p),Me=c||"default",{getPrefixCls:he,direction:De,autoInsertSpace:_e,className:ke,style:Oe,classNames:He,styles:Pe,loadingIcon:Ge,shape:qe,color:Ze,variant:ct}=Xr("button"),mt=d||qe||"default",[xe,Ie]=T.useMemo(()=>{if(o&&l)return[o,l];if(c||u){const jt=gC[Me]||[];return u?["danger",jt[1]]:jt}return Ze&&ct?[Ze,ct]:["default","outlined"]},[o,l,c,u,Ze,ct,Me]),[Ke,H]=T.useMemo(()=>x&&Ie==="solid"?[xe,"outlined"]:[xe,Ie],[xe,Ie,x]),V=Ke==="danger",C=V?"dangerous":Ke,F=O??_e??!0,oe=he("btn",i),[Z,Be]=sC(oe),Xe=T.useContext(Ph),$e=f??Xe,Ve=T.useContext(iv),je=T.useMemo(()=>mC(n),[n]),[Qe,dt]=T.useState(je.loading),[it,rt]=T.useState(!1),Ot=T.useRef(null),pt=Wc(e,Ot),kt=ge.length===1&&!E&&!Yu(H),wt=T.useRef(!0);Je.useEffect(()=>(wt.current=!1,()=>{wt.current=!0}),[]),$r(()=>{let jt=null;je.delay>0?jt=setTimeout(()=>{jt=null,dt(!0)},je.delay):dt(je.loading);function on(){jt&&(clearTimeout(jt),jt=null)}return on},[je.delay,je.loading]),T.useEffect(()=>{if(!Ot.current||!F)return;const jt=Ot.current.textContent||"";kt&&pf(jt)?it||rt(!0):it&&rt(!1)}),T.useEffect(()=>{G&&Ot.current&&Ot.current.focus()},[]);const fn=Je.useCallback(jt=>{if(Qe||$e){jt.preventDefault();return}r.onClick?.(("href"in r,jt))},[r.onClick,Qe,$e]),{compactSize:Tn,compactItemClassnames:Fn}=rv(oe,De),In={large:"lg",small:"sm",middle:void 0,medium:void 0},dn=Zc(jt=>m??Tn??Ve??jt),pn=dn?In[dn]??"":"",Pt=Qe?"loading":E,At=A??S??"start",tt=Ki(te,["navigate"]),ht={...r,type:Me,color:Ke,variant:H,danger:V,shape:mt,size:dn,disabled:$e,loading:Qe,iconPlacement:At},[Ut,Lt]=Ei([t?void 0:He,Y],[t?void 0:Pe,Q],{props:ht}),qt=Ct(oe,Z,Be,{[`${oe}-${mt}`]:mt!=="default"&&mt!=="square"&&mt,[`${oe}-${Me}`]:Me,[`${oe}-dangerous`]:u,[`${oe}-color-${C}`]:C,[`${oe}-variant-${H}`]:H,[`${oe}-${pn}`]:pn,[`${oe}-icon-only`]:!p&&p!==0&&!!Pt,[`${oe}-background-ghost`]:x&&!Yu(H),[`${oe}-loading`]:Qe,[`${oe}-two-chinese-chars`]:it&&F&&!Qe,[`${oe}-block`]:k,[`${oe}-rtl`]:De==="rtl",[`${oe}-icon-end`]:At==="end"},Fn,h,g,ke,Ut.root),en={...Lt.root,...Oe,...L},Rt={className:Ut.icon,style:Lt.icon},Ft=jt=>Je.createElement(av,{prefixCls:oe,...Rt},jt),Wt=Je.createElement(ER,{existIcon:!!E,prefixCls:oe,loading:Qe,mount:wt.current,...Rt}),Jt=n&&typeof n=="object"&&n.icon||Ge;let yt;E&&!Qe?yt=Ft(E):n&&Jt?yt=Ft(Jt):yt=Wt;const Zt=Ba(p)?bR(p,kt&&F,Lt.content,Ut.content):null;if(tt.href!==void 0)return Je.createElement("a",{...tt,className:Ct(qt,{[`${oe}-disabled`]:$e}),href:$e?void 0:tt.href,style:en,onClick:fn,ref:pt,tabIndex:$e?-1:0,"aria-disabled":$e},yt,Zt);let un=Je.createElement("button",{...te,type:U,className:qt,style:en,onClick:fn,disabled:$e,ref:pt},yt,Zt,Fn&&Je.createElement(hC,{prefixCls:oe}));return Yu(H)||(un=Je.createElement(mR,{component:"Button",disabled:Qe},un)),un}),wc=pC;wc.Group=pR;wc.__ANT_BUTTON=!0;function By(r,e=!1){if(wE(r)){const t=r.nodeName.toLowerCase(),n=["input","select","textarea","button"].includes(t)||r.isContentEditable||t==="a"&&!!r.getAttribute("href"),i=r.getAttribute("tabindex"),o=Number(i);let l=null;return i&&!Number.isNaN(o)?l=o:n&&l===null&&(l=0),n&&r.disabled&&(l=null),l!==null&&(l>=0||e&&l<0)}return!1}function yC(r,e=!1){const t=[...r.querySelectorAll("*")].filter(n=>By(n,e));return By(r,e)&&t.unshift(r),t}function bC(r,e){if(!r)return;r.focus(e);const{cursor:t}=e||{};if(t&&(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)){const n=r.value.length;switch(t){case"start":r.setSelectionRange(0,0);break;case"end":r.setSelectionRange(n,n);break;default:r.setSelectionRange(0,n)}}}const ns="RC_FORM_INTERNAL_HOOKS",gr=()=>{Ci(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Js=T.createContext({getFieldValue:gr,getFieldsValue:gr,getFieldError:gr,getFieldWarning:gr,getFieldsError:gr,isFieldsTouched:gr,isFieldTouched:gr,isFieldValidating:gr,isFieldsValidating:gr,resetFields:gr,setFields:gr,setFieldValue:gr,setFieldsValue:gr,validateFields:gr,submit:gr,getInternalHooks:()=>(gr(),{dispatch:gr,initEntityValue:gr,registerField:gr,useSubscribe:gr,setInitialValues:gr,destroyForm:gr,setCallbacks:gr,registerWatch:gr,getFields:gr,setValidateMessages:gr,setPreserve:gr,getInitialValue:gr})}),_c=T.createContext(null);function bf(r){return r==null?[]:Array.isArray(r)?r:[r]}function EC(r){return r&&!!r._init}function Ef(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",tel:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var vf=Ef();function vC(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function TC(r,e,t){if(Oh())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(r.bind.apply(r,n));return t&&Fo(i,t.prototype),i}function Tf(r){var e=typeof Map=="function"?new Map:void 0;return Tf=function(n){if(n===null||!vC(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return TC(n,arguments,zo(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Fo(i,n)},Tf(r)}var SC=/%[sdj%]/g,wC=function(){};function Sf(r){if(!r||!r.length)return null;var e={};return r.forEach(function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)}),e}function pi(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var i=0,o=t.length;if(typeof r=="function")return r.apply(null,t);if(typeof r=="string"){var l=r.replace(SC,function(c){if(c==="%%")return"%";if(i>=o)return c;switch(c){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return c}});return l}return r}function _C(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"||r==="tel"}function zr(r,e){return!!(r==null||e==="array"&&Array.isArray(r)&&!r.length||_C(e)&&typeof r=="string"&&!r)}function xC(r,e,t){var n=[],i=0,o=r.length;function l(c){n.push.apply(n,Fr(c||[])),i++,i===o&&t(n)}r.forEach(function(c){e(c,l)})}function $y(r,e,t){var n=0,i=r.length;function o(l){if(l&&l.length){t(l);return}var c=n;n=n+1,c<i?e(r[c],o):t([])}o([])}function IC(r){var e=[];return Object.keys(r).forEach(function(t){e.push.apply(e,Fr(r[t]||[]))}),e}var jy=(function(r){NE(t,r);var e=DE(t);function t(n,i){var o;return el(this,t),o=e.call(this,"Async Validation Error"),yi(Vs(o),"errors",void 0),yi(Vs(o),"fields",void 0),o.errors=n,o.fields=i,o}return Jo(t)})(Tf(Error));function AC(r,e,t,n,i){if(e.first){var o=new Promise(function(h,g){var p=function(A){return n(A),A.length?g(new jy(A,Sf(A))):h(i)},E=IC(r);$y(E,t,p)});return o.catch(function(h){return h}),o}var l=e.firstFields===!0?Object.keys(r):e.firstFields||[],c=Object.keys(r),u=c.length,d=0,m=[],f=new Promise(function(h,g){var p=function(S){if(m.push.apply(m,S),d++,d===u)return n(m),m.length?g(new jy(m,Sf(m))):h(i)};c.length||(n(m),h(i)),c.forEach(function(E){var S=r[E];l.indexOf(E)!==-1?$y(S,t,p):xC(S,t,p)})});return f.catch(function(h){return h}),f}function RC(r){return!!(r&&r.message!==void 0)}function CC(r,e){for(var t=r,n=0;n<e.length;n++){if(t==null)return t;t=t[e[n]]}return t}function qy(r,e){return function(t){var n;return r.fullFields?n=CC(e,r.fullFields):n=e[t.field||r.fullField],RC(t)?(t.field=t.field||r.fullField,t.fieldValue=n,t):{message:typeof t=="function"?t():t,fieldValue:n,field:t.field||r.fullField}}}function Gy(r,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];gi(n)==="object"&&gi(r[t])==="object"?r[t]=Rr(Rr({},r[t]),n):r[t]=n}}return r}var ws="enum",kC=function(e,t,n,i,o){e[ws]=Array.isArray(e[ws])?e[ws]:[],e[ws].indexOf(t)===-1&&i.push(pi(o.messages[ws],e.fullField,e[ws].join(", ")))},LC=function(e,t,n,i,o){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(pi(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var l=new RegExp(e.pattern);l.test(t)||i.push(pi(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},NC=function(e,t,n,i,o){var l=typeof e.len=="number",c=typeof e.min=="number",u=typeof e.max=="number",d=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=t,f=null,h=typeof t=="number",g=typeof t=="string",p=Array.isArray(t);if(h?f="number":g?f="string":p&&(f="array"),!f)return!1;p&&(m=t.length),g&&(m=t.replace(d,"_").length),l?m!==e.len&&i.push(pi(o.messages[f].len,e.fullField,e.len)):c&&!u&&m<e.min?i.push(pi(o.messages[f].min,e.fullField,e.min)):u&&!c&&m>e.max?i.push(pi(o.messages[f].max,e.fullField,e.max)):c&&u&&(m<e.min||m>e.max)&&i.push(pi(o.messages[f].range,e.fullField,e.min,e.max))},uv=function(e,t,n,i,o,l){e.required&&(!n.hasOwnProperty(e.field)||zr(t,l||e.type))&&i.push(pi(o.messages.required,e.fullField))},Nl;const DC=(function(){if(Nl)return Nl;var r="[a-fA-F\\d:]",e=function(Q){return Q&&Q.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(r,")|(?<=").concat(r,")(?=\\s|$))"):""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",i=["(?:".concat(n,":){7}(?:").concat(n,"|:)"),"(?:".concat(n,":){6}(?:").concat(t,"|:").concat(n,"|:)"),"(?:".concat(n,":){5}(?::").concat(t,"|(?::").concat(n,"){1,2}|:)"),"(?:".concat(n,":){4}(?:(?::").concat(n,"){0,1}:").concat(t,"|(?::").concat(n,"){1,3}|:)"),"(?:".concat(n,":){3}(?:(?::").concat(n,"){0,2}:").concat(t,"|(?::").concat(n,"){1,4}|:)"),"(?:".concat(n,":){2}(?:(?::").concat(n,"){0,3}:").concat(t,"|(?::").concat(n,"){1,5}|:)"),"(?:".concat(n,":){1}(?:(?::").concat(n,"){0,4}:").concat(t,"|(?::").concat(n,"){1,6}|:)"),"(?::(?:(?::".concat(n,"){0,5}:").concat(t,"|(?::").concat(n,"){1,7}|:))")],o="(?:%[0-9a-zA-Z]{1,})?",l="(?:".concat(i.join("|"),")").concat(o),c=new RegExp("(?:^".concat(t,"$)|(?:^").concat(l,"$)")),u=new RegExp("^".concat(t,"$")),d=new RegExp("^".concat(l,"$")),m=function(Q){return Q&&Q.exact?c:new RegExp("(?:".concat(e(Q)).concat(t).concat(e(Q),")|(?:").concat(e(Q)).concat(l).concat(e(Q),")"),"g")};m.v4=function(Y){return Y&&Y.exact?u:new RegExp("".concat(e(Y)).concat(t).concat(e(Y)),"g")},m.v6=function(Y){return Y&&Y.exact?d:new RegExp("".concat(e(Y)).concat(l).concat(e(Y)),"g")};var f="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",g=m.v4().source,p=m.v6().source,E="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",S="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",A="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",x="(?::\\d{2,5})?",k='(?:[/?#][^\\s"]*)?',U="(?:".concat(f,"|www\\.)").concat(h,"(?:localhost|").concat(g,"|").concat(p,"|").concat(E).concat(S).concat(A,")").concat(x).concat(k);return Nl=new RegExp("(?:^".concat(U,"$)"),"i"),Nl});var Zu={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,tel:/^(\+[0-9]{1,3}[-\s\u2011]?)?(\([0-9]{1,4}\)[-\s\u2011]?)?([0-9]+[-\s\u2011]?)*[0-9]+$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},wo={integer:function(e){return wo.number(e)&&parseInt(e,10)===e},float:function(e){return wo.number(e)&&!wo.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return gi(e)==="object"&&!wo.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Zu.email)},tel:function(e){return typeof e=="string"&&e.length<=32&&!!e.match(Zu.tel)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(DC())},hex:function(e){return typeof e=="string"&&!!e.match(Zu.hex)}},PC=function(e,t,n,i,o){if(e.required&&t===void 0){uv(e,t,n,i,o);return}var l=["integer","float","array","regexp","object","method","email","tel","number","date","url","hex"],c=e.type;l.indexOf(c)>-1?wo[c](t)||i.push(pi(o.messages.types[c],e.fullField,e.type)):c&&gi(t)!==e.type&&i.push(pi(o.messages.types[c],e.fullField,e.type))},MC=function(e,t,n,i,o){(/^\s+$/.test(t)||t==="")&&i.push(pi(o.messages.whitespace,e.fullField))};const er={required:uv,whitespace:MC,type:PC,range:NC,enum:kC,pattern:LC};var OC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t)&&!e.required)return n();er.required(e,t,i,l,o)}n(l)},FC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(t==null&&!e.required)return n();er.required(e,t,i,l,o,"array"),t!=null&&(er.type(e,t,i,l,o),er.range(e,t,i,l,o))}n(l)},zC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t)&&!e.required)return n();er.required(e,t,i,l,o),t!==void 0&&er.type(e,t,i,l,o)}n(l)},UC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t,"date")&&!e.required)return n();if(er.required(e,t,i,l,o),!zr(t,"date")){var u;t instanceof Date?u=t:u=new Date(t),er.type(e,u,i,l,o),u&&er.range(e,u.getTime(),i,l,o)}}n(l)},BC="enum",$C=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t)&&!e.required)return n();er.required(e,t,i,l,o),t!==void 0&&er[BC](e,t,i,l,o)}n(l)},jC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t)&&!e.required)return n();er.required(e,t,i,l,o),t!==void 0&&(er.type(e,t,i,l,o),er.range(e,t,i,l,o))}n(l)},qC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t)&&!e.required)return n();er.required(e,t,i,l,o),t!==void 0&&(er.type(e,t,i,l,o),er.range(e,t,i,l,o))}n(l)},GC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t)&&!e.required)return n();er.required(e,t,i,l,o),t!==void 0&&er.type(e,t,i,l,o)}n(l)},HC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(t===""&&(t=void 0),zr(t)&&!e.required)return n();er.required(e,t,i,l,o),t!==void 0&&(er.type(e,t,i,l,o),er.range(e,t,i,l,o))}n(l)},VC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t)&&!e.required)return n();er.required(e,t,i,l,o),t!==void 0&&er.type(e,t,i,l,o)}n(l)},KC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t,"string")&&!e.required)return n();er.required(e,t,i,l,o),zr(t,"string")||er.pattern(e,t,i,l,o)}n(l)},YC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t)&&!e.required)return n();er.required(e,t,i,l,o),zr(t)||er.type(e,t,i,l,o)}n(l)},WC=function(e,t,n,i,o){var l=[],c=Array.isArray(t)?"array":gi(t);er.required(e,t,i,l,o,c),n(l)},XC=function(e,t,n,i,o){var l=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(zr(t,"string")&&!e.required)return n();er.required(e,t,i,l,o,"string"),zr(t,"string")||(er.type(e,t,i,l,o),er.range(e,t,i,l,o),er.pattern(e,t,i,l,o),e.whitespace===!0&&er.whitespace(e,t,i,l,o))}n(l)},Dl=function(e,t,n,i,o){var l=e.type,c=[],u=e.required||!e.required&&i.hasOwnProperty(e.field);if(u){if(zr(t,l)&&!e.required)return n();er.required(e,t,i,c,o,l),zr(t,l)||er.type(e,t,i,c,o)}n(c)};const No={string:XC,method:GC,number:HC,boolean:zC,regexp:YC,integer:qC,float:jC,array:FC,object:VC,enum:$C,pattern:KC,date:UC,url:Dl,hex:Dl,email:Dl,tel:Dl,required:WC,any:OC};var il=(function(){function r(e){el(this,r),yi(this,"rules",null),yi(this,"_messages",vf),this.define(e)}return Jo(r,[{key:"define",value:function(t){var n=this;if(!t)throw new Error("Cannot configure a schema with no rules");if(gi(t)!=="object"||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach(function(i){var o=t[i];n.rules[i]=Array.isArray(o)?o:[o]})}},{key:"messages",value:function(t){return t&&(this._messages=Gy(Ef(),t)),this._messages}},{key:"validate",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},l=t,c=i,u=o;if(typeof c=="function"&&(u=c,c={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,l),Promise.resolve(l);function d(p){var E=[],S={};function A(k){if(Array.isArray(k)){var U;E=(U=E).concat.apply(U,Fr(k))}else E.push(k)}for(var x=0;x<p.length;x++)A(p[x]);E.length?(S=Sf(E),u(E,S)):u(null,l)}if(c.messages){var m=this.messages();m===vf&&(m=Ef()),Gy(m,c.messages),c.messages=m}else c.messages=this.messages();var f={},h=c.keys||Object.keys(this.rules);h.forEach(function(p){var E=n.rules[p],S=l[p];E.forEach(function(A){var x=A;typeof x.transform=="function"&&(l===t&&(l=Rr({},l)),S=l[p]=x.transform(S),S!=null&&(x.type=x.type||(Array.isArray(S)?"array":gi(S)))),typeof x=="function"?x={validator:x}:x=Rr({},x),x.validator=n.getValidationMethod(x),x.validator&&(x.field=p,x.fullField=x.fullField||p,x.type=n.getType(x),f[p]=f[p]||[],f[p].push({rule:x,value:S,source:l,field:p}))})});var g={};return AC(f,c,function(p,E){var S=p.rule,A=(S.type==="object"||S.type==="array")&&(gi(S.fields)==="object"||gi(S.defaultField)==="object");A=A&&(S.required||!S.required&&p.value),S.field=p.field;function x(L,O){return Rr(Rr({},O),{},{fullField:"".concat(S.fullField,".").concat(L),fullFields:S.fullFields?[].concat(Fr(S.fullFields),[L]):[L]})}function k(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=Array.isArray(L)?L:[L];!c.suppressWarning&&O.length&&r.warning("async-validator:",O),O.length&&S.message!==void 0&&S.message!==null&&(O=[].concat(S.message));var G=O.map(qy(S,l));if(c.first&&G.length)return g[S.field]=1,E(G);if(!A)E(G);else{if(S.required&&!p.value)return S.message!==void 0?G=[].concat(S.message).map(qy(S,l)):c.error&&(G=[c.error(S,pi(c.messages.required,S.field))]),E(G);var te={};S.defaultField&&Object.keys(p.value).map(function(he){te[he]=S.defaultField}),te=Rr(Rr({},te),p.rule.fields);var ge={};Object.keys(te).forEach(function(he){var De=te[he],_e=Array.isArray(De)?De:[De];ge[he]=_e.map(x.bind(null,he))});var Me=new r(ge);Me.messages(c.messages),p.rule.options&&(p.rule.options.messages=c.messages,p.rule.options.error=c.error),Me.validate(p.value,p.rule.options||c,function(he){var De=[];G&&G.length&&De.push.apply(De,Fr(G)),he&&he.length&&De.push.apply(De,Fr(he)),E(De.length?De:null)})}}var U;if(S.asyncValidator)U=S.asyncValidator(S,p.value,k,p.source,c);else if(S.validator){try{U=S.validator(S,p.value,k,p.source,c)}catch(L){var Y,Q;(Y=(Q=console).error)===null||Y===void 0||Y.call(Q,L),c.suppressValidatorError||setTimeout(function(){throw L},0),k(L.message)}U===!0?k():U===!1?k(typeof S.message=="function"?S.message(S.fullField||S.field):S.message||"".concat(S.fullField||S.field," fails")):U instanceof Array?k(U):U instanceof Error&&k(U.message)}U&&U.then&&U.then(function(){return k()},function(L){return k(L)})},function(p){d(p)},l)}},{key:"getType",value:function(t){if(t.type===void 0&&t.pattern instanceof RegExp&&(t.type="pattern"),typeof t.validator!="function"&&t.type&&!No.hasOwnProperty(t.type))throw new Error(pi("Unknown rule type %s",t.type));return t.type||"string"}},{key:"getValidationMethod",value:function(t){if(typeof t.validator=="function")return t.validator;var n=Object.keys(t),i=n.indexOf("message");return i!==-1&&n.splice(i,1),n.length===1&&n[0]==="required"?No.required:No[this.getType(t)]||void 0}}]),r})();yi(il,"register",function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");No[e]=t});yi(il,"warning",wC);yi(il,"messages",vf);yi(il,"validators",No);const ti="'${name}' is not a valid ${type}",dv={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ti,method:ti,array:ti,object:ti,number:ti,date:ti,boolean:ti,integer:ti,float:ti,regexp:ti,email:ti,tel:ti,url:ti,hex:ti},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Hy=il;function QC(r,e){return r.replace(/\\?\$\{\w+\}/g,t=>{if(t.startsWith("\\"))return t.slice(1);const n=t.slice(2,-1);return e[n]})}const Vy="CODE_LOGIC_ERROR";async function wf(r,e,t,n,i){const o={...t};if(delete o.ruleIndex,Hy.warning=()=>{},o.validator){const h=o.validator;o.validator=(...g)=>{try{return h(...g)}catch(p){return console.error(p),Promise.reject(Vy)}}}let l=null;o&&o.type==="array"&&o.defaultField&&(l=o.defaultField,delete o.defaultField);const c=new Hy({[r]:[o]}),u=So(dv,n.validateMessages);c.messages(u);let d=[];try{await Promise.resolve(c.validate({[r]:e},{...n}))}catch(h){h.errors&&(d=h.errors.map(({message:g},p)=>{const E=g===Vy?u.default:g;return T.isValidElement(E)?T.cloneElement(E,{key:`error_${p}`}):E}))}if(!d.length&&l&&Array.isArray(e)&&e.length>0)return(await Promise.all(e.map((g,p)=>wf(`${r}.${p}`,g,l,n,i)))).reduce((g,p)=>[...g,...p],[]);const m={...t,name:r,enum:(t.enum||[]).join(", "),...i};return d.map(h=>typeof h=="string"?QC(h,m):h)}function ZC(r,e,t,n,i,o){const l=r.join("."),c=t.map((d,m)=>{const f=d.validator,h={...d,ruleIndex:m};return f&&(h.validator=(g,p,E)=>{let S=!1;const x=f(g,p,(...k)=>{Promise.resolve().then(()=>{Ci(!S,"Your validator function has already return a promise. `callback` will be ignored."),S||E(...k)})});S=x&&typeof x.then=="function"&&typeof x.catch=="function",Ci(S,"`callback` is deprecated. Please return a promise instead."),S&&x.then(()=>{E()}).catch(k=>{E(k||" ")})}),h}).sort(({warningOnly:d,ruleIndex:m},{warningOnly:f,ruleIndex:h})=>!!d==!!f?m-h:d?1:-1);let u;if(i===!0)u=new Promise(async(d,m)=>{for(let f=0;f<c.length;f+=1){const h=c[f],g=await wf(l,e,h,n,o);if(g.length){m([{errors:g,rule:h}]);return}}d([])});else{const d=c.map(m=>wf(l,e,m,n,o).then(f=>({errors:f,rule:m})));u=(i?ek(d):JC(d)).then(m=>Promise.reject(m))}return u.catch(d=>d),u}async function JC(r){return Promise.all(r).then(e=>[].concat(...e))}async function ek(r){let e=0;return new Promise(t=>{r.forEach(n=>{n.then(i=>{i.errors.length&&t([i]),e+=1,e===r.length&&t([])})})})}function Ar(r){return bf(r)}function Ky(r,e){let t={};return e.forEach(n=>{const i=Oa(r,n);t=ga(t,n,i)}),t}function Ks(r,e,t=!1){return r&&r.some(n=>xc(e,n,t))}function xc(r,e,t=!1){return!r||!e||!t&&r.length!==e.length?!1:e.every((n,i)=>r[i]===n)}function tk(r,e){if(r===e)return!0;if(!r&&e||r&&!e||!r||!e||typeof r!="object"||typeof e!="object")return!1;const t=Object.keys(r),n=Object.keys(e);return[...new Set([...t,...n])].every(o=>{const l=r[o],c=e[o];return typeof l=="function"&&typeof c=="function"?!0:l===c})}function nk(r,...e){const t=e[0];return t&&t.target&&typeof t.target=="object"&&r in t.target?t.target[r]:t}function Yy(r,e,t){const{length:n}=r;if(e<0||e>=n||t<0||t>=n)return r;const i=r[e],o=e-t;return o>0?[...r.slice(0,t),i,...r.slice(t,e),...r.slice(e+1,n)]:o<0?[...r.slice(0,e),...r.slice(e+1,t+1),i,...r.slice(t+1,n)]:r}function _f(){return _f=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_f.apply(this,arguments)}const Xa=[],yo=[];function Ju(r,e,t,n,i,o){return typeof r=="function"?r(e,t,"source"in o?{source:o.source}:{}):n!==i}class rk extends T.Component{static contextType=Js;state={resetCount:0};cancelRegisterFunc=null;mounted=!1;touched=!1;dirty=!1;validatePromise;prevValidating;errors=Xa;warnings=yo;constructor(e){if(super(e),e.fieldContext){const{getInternalHooks:t}=e.fieldContext,{initEntityValue:n}=t(ns);n(this)}}componentDidMount(){const{shouldUpdate:e,fieldContext:t}=this.props;if(this.mounted=!0,t){const{getInternalHooks:n}=t,{registerField:i}=n(ns);this.cancelRegisterFunc=i(this)}e===!0&&this.reRender()}componentWillUnmount(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}cancelRegister=()=>{const{preserve:e,isListField:t,name:n}=this.props;this.cancelRegisterFunc&&this.cancelRegisterFunc(t,e,Ar(n)),this.cancelRegisterFunc=null};getNamePath=()=>{const{name:e,fieldContext:t}=this.props,{prefixName:n=[]}=t;return e!==void 0?[...n,...e]:[]};getRules=()=>{const{rules:e=[],fieldContext:t}=this.props;return e.map(n=>typeof n=="function"?n(t):n)};reRender(){this.mounted&&this.forceUpdate()}refresh=()=>{this.mounted&&this.setState(({resetCount:e})=>({resetCount:e+1}))};metaCache=null;triggerMetaEvent=e=>{const{onMetaChange:t}=this.props;if(t){const n={...this.getMeta(),destroy:e};pc(this.metaCache,n)||t(n),this.metaCache=n}else this.metaCache=null};onStoreChange=(e,t,n)=>{const{shouldUpdate:i,dependencies:o=[],onReset:l}=this.props,{store:c}=n,u=this.getNamePath(),d=this.getValue(e),m=this.getValue(c),f=t&&Ks(t,u);switch(n.type==="valueUpdate"&&n.source==="external"&&!pc(d,m)&&(this.touched=!0,this.dirty=!0,this.validatePromise=null,this.errors=Xa,this.warnings=yo,this.triggerMetaEvent()),n.type){case"reset":if(!t||f){this.touched=!1,this.dirty=!1,this.validatePromise=void 0,this.errors=Xa,this.warnings=yo,this.triggerMetaEvent(),l?.(),this.refresh();return}break;case"remove":{if(i&&Ju(i,e,c,d,m,n)){this.reRender();return}break}case"setField":{const{data:h}=n;if(f){"touched"in h&&(this.touched=h.touched),"validating"in h&&!("originRCField"in h)&&(this.validatePromise=h.validating?Promise.resolve([]):null),"errors"in h&&(this.errors=h.errors||Xa),"warnings"in h&&(this.warnings=h.warnings||yo),this.dirty=!0,this.triggerMetaEvent(),this.reRender();return}else if("value"in h&&Ks(t,u,!0)){this.reRender();return}if(i&&!u.length&&Ju(i,e,c,d,m,n)){this.reRender();return}break}case"dependenciesUpdate":{if(o.map(Ar).some(g=>Ks(n.relatedFields,g))){this.reRender();return}break}default:if(f||(!o.length||u.length||i)&&Ju(i,e,c,d,m,n)){this.reRender();return}break}i===!0&&this.reRender()};validateRules=e=>{const t=this.getNamePath(),n=this.getValue(),{triggerName:i,validateOnly:o=!1}=e||{},l=Promise.resolve().then(async()=>{if(!this.mounted)return[];const{validateFirst:c=!1,messageVariables:u,validateDebounce:d}=this.props;let m=this.getRules();if(i&&(m=m.filter(h=>h).filter(h=>{const{validateTrigger:g}=h;return g?bf(g).includes(i):!0})),d&&i&&(await new Promise(h=>{setTimeout(h,d)}),this.validatePromise!==l))return[];const f=ZC(t,n,m,e,c,u);return f.catch(h=>h).then((h=Xa)=>{if(this.validatePromise===l){this.validatePromise=null;const g=[],p=[];h.forEach?.(({rule:{warningOnly:E},errors:S=Xa})=>{E?p.push(...S):g.push(...S)}),this.errors=g,this.warnings=p,this.triggerMetaEvent(),this.reRender()}}),f});return o||(this.validatePromise=l,this.dirty=!0,this.errors=Xa,this.warnings=yo,this.triggerMetaEvent(),this.reRender()),l};isFieldValidating=()=>!!this.validatePromise;isFieldTouched=()=>this.touched;isFieldDirty=()=>{if(this.dirty||this.props.initialValue!==void 0)return!0;const{fieldContext:e}=this.props,{getInitialValue:t}=e.getInternalHooks(ns);return t(this.getNamePath())!==void 0};getErrors=()=>this.errors;getWarnings=()=>this.warnings;isListField=()=>this.props.isListField;isList=()=>this.props.isList;isPreserve=()=>this.props.preserve;getMeta=()=>(this.prevValidating=this.isFieldValidating(),{touched:this.isFieldTouched(),validating:this.prevValidating,errors:this.errors,warnings:this.warnings,name:this.getNamePath(),validated:this.validatePromise===null});getOnlyChild=e=>{if(typeof e=="function"){const n=this.getMeta();return{...this.getOnlyChild(e(this.getControlled(),n,this.props.fieldContext)),isFunction:!0}}const t=us(e);return t.length!==1||!T.isValidElement(t[0])?{child:t,isFunction:!1}:{child:t[0],isFunction:!1}};getValue=e=>{const{getFieldsValue:t}=this.props.fieldContext,n=this.getNamePath();return Oa(e||t(!0),n)};getControlled=(e={})=>{const{name:t,trigger:n="onChange",validateTrigger:i,getValueFromEvent:o,normalize:l,valuePropName:c="value",getValueProps:u,fieldContext:d}=this.props,m=i!==void 0?i:d.validateTrigger,f=this.getNamePath(),{getInternalHooks:h,getFieldsValue:g}=d,{dispatch:p}=h(ns),E=this.getValue(),S=u||(Y=>({[c]:Y})),A=e[n],x=t!==void 0?S(E):{},k={...e,...x};return k[n]=(...Y)=>{this.touched=!0,this.dirty=!0,this.triggerMetaEvent();let Q;o?Q=o(...Y):Q=nk(c,...Y),l&&(Q=l(Q,E,g(!0))),Q!==E&&p({type:"updateValue",namePath:f,value:Q}),A&&A(...Y)},bf(m||[]).forEach(Y=>{const Q=k[Y];k[Y]=(...L)=>{Q&&Q(...L);const{rules:O}=this.props;O&&O.length&&p({type:"validateField",namePath:f,triggerName:Y})}}),k};render(){const{resetCount:e}=this.state,{children:t}=this.props,{child:n,isFunction:i}=this.getOnlyChild(t);let o;return i?o=n:T.isValidElement(n)?o=T.cloneElement(n,this.getControlled(n.props)):(Ci(!n,"`children` of Field is not validate ReactElement."),o=n),T.createElement(T.Fragment,{key:e},o)}}function fv({name:r,...e}){const t=T.useContext(Js),n=T.useContext(_c),i=r!==void 0?Ar(r):void 0,o=e.isListField??!!n;let l="keep";return o||(l=`_${(i||[]).join("_")}`),T.createElement(rk,_f({key:l,name:i,isListField:o},e,{fieldContext:t}))}function ik({name:r,initialValue:e,children:t,rules:n,validateTrigger:i,isListField:o}){const l=T.useContext(Js),c=T.useContext(_c),d=T.useRef({keys:[],id:0}).current,m=T.useMemo(()=>[...Ar(l.prefixName)||[],...Ar(r)],[l.prefixName,r]),f=T.useMemo(()=>({...l,prefixName:m}),[l,m]),h=T.useMemo(()=>({getKey:p=>{const E=m.length,S=p[E];return[d.keys[S],p.slice(E+1)]}}),[d,m]);if(typeof t!="function")return Ci(!1,"Form.List only accepts function as children."),null;const g=(p,E,{source:S})=>S==="internal"?!1:p!==E;return T.createElement(_c.Provider,{value:h},T.createElement(Js.Provider,{value:f},T.createElement(fv,{name:[],shouldUpdate:g,rules:n,validateTrigger:i,initialValue:e,isList:!0,isListField:o??!!c},({value:p=[],onChange:E},S)=>{const{getFieldValue:A}=l,x=()=>A(m||[])||[],k={add:(Y,Q)=>{const L=x();Q>=0&&Q<=L.length?(d.keys=[...d.keys.slice(0,Q),d.id,...d.keys.slice(Q)],E([...L.slice(0,Q),Y,...L.slice(Q)])):(d.keys=[...d.keys,d.id],E([...L,Y])),d.id+=1},remove:Y=>{const Q=x(),L=new Set(Array.isArray(Y)?Y:[Y]);L.size<=0||(d.keys=d.keys.filter((O,G)=>!L.has(G)),E(Q.filter((O,G)=>!L.has(G))))},move(Y,Q){if(Y===Q)return;const L=x();Y<0||Y>=L.length||Q<0||Q>=L.length||(d.keys=Yy(d.keys,Y,Q),E(Yy(L,Y,Q)))}};let U=p||[];return Array.isArray(U)||(U=[]),t(U.map((Y,Q)=>{let L=d.keys[Q];return L===void 0&&(d.keys[Q]=d.id,L=d.keys[Q],d.id+=1),{name:Q,key:L,isListField:!0}}),k,S)})))}function ak(r){let e=!1,t=r.length;const n=[];return r.length?new Promise((i,o)=>{r.forEach((l,c)=>{l.catch(u=>(e=!0,u)).then(u=>{t-=1,n[c]=u,!(t>0)&&(e&&o(n),i(n))})})}):Promise.resolve([])}const xf="__@field_split__";function Pl(r){return r.map(e=>`${typeof e}:${e}`).join(xf)}class _s{kvs=new Map;set(e,t){this.kvs.set(Pl(e),t)}get(e){return this.kvs.get(Pl(e))}getAsPrefix(e){const t=Pl(e),n=t+xf,i=[],o=this.kvs.get(t);return o!==void 0&&i.push(o),this.kvs.forEach((l,c)=>{c.startsWith(n)&&i.push(l)}),i}update(e,t){const n=this.get(e),i=t(n);i?this.set(e,i):this.delete(e)}delete(e){this.kvs.delete(Pl(e))}map(e){return[...this.kvs.entries()].map(([t,n])=>{const i=t.split(xf);return e({key:i.map(o=>{const[,l,c]=o.match(/^([^:]*):(.*)$/);return l==="number"?Number(c):c}),value:n})})}toJSON(){const e={};return this.map(({key:t,value:n})=>(e[t.join(".")]=n,null)),e}}const sk=r=>{const e=new MessageChannel;e.port1.onmessage=r,e.port2.postMessage(null)};class ok{namePathList=[];taskId=0;watcherList=new Set;form;constructor(e){this.form=e}register(e){return this.watcherList.add(e),()=>{this.watcherList.delete(e)}}notify(e){e.forEach(t=>{this.namePathList.every(n=>!xc(n,t))&&this.namePathList.push(t)}),this.doBatch()}doBatch(){this.taskId+=1;const e=this.taskId;sk(()=>{if(e===this.taskId&&this.watcherList.size){const t=this.form.getForm(),n=t.getFieldsValue(),i=t.getFieldsValue(!0);this.watcherList.forEach(o=>{o(n,i,this.namePathList)}),this.namePathList=[]}})}}class lk{formHooked=!1;forceRootUpdate;subscribable=!0;store={};fieldEntities=[];initialValues={};callbacks={};validateMessages=null;preserve=null;lastValidatePromise=null;watcherCenter=new ok(this);constructor(e){this.forceRootUpdate=e}getForm=()=>({getFieldValue:this.getFieldValue,getFieldsValue:this.getFieldsValue,getFieldError:this.getFieldError,getFieldWarning:this.getFieldWarning,getFieldsError:this.getFieldsError,isFieldsTouched:this.isFieldsTouched,isFieldTouched:this.isFieldTouched,isFieldValidating:this.isFieldValidating,isFieldsValidating:this.isFieldsValidating,resetFields:this.resetFields,setFields:this.setFields,setFieldValue:this.setFieldValue,setFieldsValue:this.setFieldsValue,validateFields:this.validateFields,submit:this.submit,_init:!0,getInternalHooks:this.getInternalHooks});getInternalHooks=e=>e===ns?(this.formHooked=!0,{dispatch:this.dispatch,initEntityValue:this.initEntityValue,registerField:this.registerField,useSubscribe:this.useSubscribe,setInitialValues:this.setInitialValues,destroyForm:this.destroyForm,setCallbacks:this.setCallbacks,setValidateMessages:this.setValidateMessages,getFields:this.getFields,setPreserve:this.setPreserve,getInitialValue:this.getInitialValue,registerWatch:this.registerWatch}):(Ci(!1,"`getInternalHooks` is internal usage. Should not call directly."),null);useSubscribe=e=>{this.subscribable=e};prevWithoutPreserves=null;setInitialValues=(e,t)=>{if(this.initialValues=e||{},t){let n=So(e,this.store);this.prevWithoutPreserves?.map(({key:i})=>{n=ga(n,i,Oa(e,i))}),this.prevWithoutPreserves=null,this.updateStore(n)}};destroyForm=e=>{if(e)this.updateStore({});else{const t=new _s;this.getFieldEntities(!0).forEach(n=>{this.isMergedPreserve(n.isPreserve())||t.set(n.getNamePath(),!0)}),this.prevWithoutPreserves=t}};getInitialValue=e=>{const t=Oa(this.initialValues,e);return e.length?So(t):t};setCallbacks=e=>{this.callbacks=e};setValidateMessages=e=>{this.validateMessages=e};setPreserve=e=>{this.preserve=e};registerWatch=e=>this.watcherCenter.register(e);notifyWatch=(e=[])=>{this.watcherCenter.notify(e)};timeoutId=null;warningUnhooked=()=>{};updateStore=e=>{this.store=e};getFieldEntities=(e=!1)=>e?this.fieldEntities.filter(t=>t.getNamePath().length):this.fieldEntities;getFieldsMap=(e=!1)=>{const t=new _s;return this.getFieldEntities(e).forEach(n=>{const i=n.getNamePath();t.set(i,n)}),t};getFieldEntitiesForNamePathList=(e,t=!1)=>{if(!e)return this.getFieldEntities(!0);const n=this.getFieldsMap(!0);return t?e.flatMap(i=>{const o=Ar(i),l=n.getAsPrefix(o);return l.length?l:[{INVALIDATE_NAME_PATH:o}]}):e.map(i=>{const o=Ar(i);return n.get(o)||{INVALIDATE_NAME_PATH:Ar(i)}})};getFieldsValue=(e,t)=>{this.warningUnhooked();let n,i;if(e===!0||Array.isArray(e)?(n=e,i=t):e&&typeof e=="object"&&(i=e.filter),n===!0&&!i)return this.store;const o=this.getFieldEntitiesForNamePathList(Array.isArray(n)?n:null,!0),l=[],c=[];o.forEach(d=>{const m=d.INVALIDATE_NAME_PATH||d.getNamePath();if(d.isList?.()){c.push(m);return}if(!i)l.push(m);else{const f="getMeta"in d?d.getMeta():null;i(f)&&l.push(m)}});let u=Ky(this.store,l.map(Ar));return c.forEach(d=>{Oa(u,d)||(u=ga(u,d,[]))}),u};getFieldValue=e=>{this.warningUnhooked();const t=Ar(e);return Oa(this.store,t)};getFieldsError=e=>(this.warningUnhooked(),this.getFieldEntitiesForNamePathList(e).map((n,i)=>n&&!n.INVALIDATE_NAME_PATH?{name:n.getNamePath(),errors:n.getErrors(),warnings:n.getWarnings()}:{name:Ar(e[i]),errors:[],warnings:[]}));getFieldError=e=>{this.warningUnhooked();const t=Ar(e);return this.getFieldsError([t])[0].errors};getFieldWarning=e=>{this.warningUnhooked();const t=Ar(e);return this.getFieldsError([t])[0].warnings};isFieldsTouched=(...e)=>{this.warningUnhooked();const[t,n]=e;let i,o=!1;e.length===0?i=null:e.length===1?Array.isArray(t)?(i=t.map(Ar),o=!1):(i=null,o=t):(i=t.map(Ar),o=n);const l=this.getFieldEntities(!0),c=f=>f.isFieldTouched();if(!i)return o?l.every(f=>c(f)||f.isList()):l.some(c);const u=new _s;i.forEach(f=>{u.set(f,[])}),l.forEach(f=>{const h=f.getNamePath();i.forEach(g=>{g.every((p,E)=>h[E]===p)&&u.update(g,p=>[...p,f])})});const d=f=>f.some(c),m=u.map(({value:f})=>f);return o?m.every(d):m.some(d)};isFieldTouched=e=>(this.warningUnhooked(),this.isFieldsTouched([e]));isFieldsValidating=e=>{this.warningUnhooked();const t=this.getFieldEntities();if(!e)return t.some(i=>i.isFieldValidating());const n=e.map(Ar);return t.some(i=>{const o=i.getNamePath();return Ks(n,o)&&i.isFieldValidating()})};isFieldValidating=e=>(this.warningUnhooked(),this.isFieldsValidating([e]));resetWithFieldInitialValue=(e={})=>{const t=new _s,n=this.getFieldEntities(!0);n.forEach(l=>{const{initialValue:c}=l.props,u=l.getNamePath();if(c!==void 0){const d=t.get(u)||new Set;d.add({entity:l,value:c}),t.set(u,d)}});const i=l=>{l.forEach(c=>{const{initialValue:u}=c.props;if(u!==void 0){const d=c.getNamePath();if(this.getInitialValue(d)!==void 0)Ci(!1,`Form already set 'initialValues' with path '${d.join(".")}'. Field can not overwrite it.`);else{const f=t.get(d);if(f&&f.size>1)Ci(!1,`Multiple Field with path '${d.join(".")}' set 'initialValue'. Can not decide which one to pick.`);else if(f){const h=this.getFieldValue(d);!c.isListField()&&(!e.skipExist||h===void 0)&&this.updateStore(ga(this.store,d,[...f][0].value))}}}})};let o;e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach(l=>{const c=t.get(l);c&&o.push(...[...c].map(u=>u.entity))})):o=n,i(o)};resetFields=e=>{this.warningUnhooked();const t=this.store;if(!e){this.updateStore(So(this.initialValues)),this.resetWithFieldInitialValue(),this.notifyObservers(t,null,{type:"reset"}),this.notifyWatch();return}const n=e.map(Ar);n.forEach(i=>{const o=this.getInitialValue(i);this.updateStore(ga(this.store,i,o))}),this.resetWithFieldInitialValue({namePathList:n}),this.notifyObservers(t,n,{type:"reset"}),this.notifyWatch(n)};setFields=e=>{this.warningUnhooked();const t=this.store,n=[];e.forEach(i=>{const{name:o,...l}=i,c=Ar(o);n.push(c),"value"in l&&this.updateStore(ga(this.store,c,l.value)),this.notifyObservers(t,[c],{type:"setField",data:i})}),this.notifyWatch(n)};getFields=()=>this.getFieldEntities(!0).map(n=>{const i=n.getNamePath(),l={...n.getMeta(),name:i,value:this.getFieldValue(i)};return Object.defineProperty(l,"originRCField",{value:!0}),l});initEntityValue=e=>{const{initialValue:t}=e.props;if(t!==void 0){const n=e.getNamePath();Oa(this.store,n)===void 0&&this.updateStore(ga(this.store,n,t))}};isMergedPreserve=e=>(e!==void 0?e:this.preserve)??!0;registerField=e=>{this.fieldEntities.push(e);const t=e.getNamePath();if(this.notifyWatch([t]),e.props.initialValue!==void 0){const n=this.store;this.resetWithFieldInitialValue({entities:[e],skipExist:!0}),this.notifyObservers(n,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return(n,i,o=[])=>{if(this.fieldEntities=this.fieldEntities.filter(l=>l!==e),!this.isMergedPreserve(i)&&(!n||o.length>1)){const l=n?void 0:this.getInitialValue(t);if(t.length&&this.getFieldValue(t)!==l&&this.fieldEntities.every(c=>!xc(c.getNamePath(),t))){const c=this.store;this.updateStore(ga(c,t,l,!0)),this.notifyObservers(c,[t],{type:"remove"}),this.triggerDependenciesUpdate(c,t)}}this.notifyWatch([t])}};dispatch=e=>{switch(e.type){case"updateValue":{const{namePath:t,value:n}=e;this.updateValue(t,n);break}case"validateField":{const{namePath:t,triggerName:n}=e;this.validateFields([t],{triggerName:n});break}}};notifyObservers=(e,t,n)=>{if(this.subscribable){const i={...n,store:this.getFieldsValue(!0)};this.getFieldEntities().forEach(({onStoreChange:o})=>{o(e,t,i)})}else this.forceRootUpdate()};triggerDependenciesUpdate=(e,t)=>{const n=this.getDependencyChildrenFields(t);return n.length&&this.validateFields(n),this.notifyObservers(e,n,{type:"dependenciesUpdate",relatedFields:[t,...n]}),n};updateValue=(e,t)=>{const n=Ar(e),i=this.store;this.updateStore(ga(this.store,n,t)),this.notifyObservers(i,[n],{type:"valueUpdate",source:"internal"}),this.notifyWatch([n]);const o=this.triggerDependenciesUpdate(i,n),{onValuesChange:l}=this.callbacks;if(l){const c=this.getFieldsMap(!0).get(n),u=Ky(this.store,[n]),d=this.getFieldsValue(),m=yI([d,u],{prepareArray:f=>c?.isList()?[]:[...f||[]]});l(u,m)}this.triggerOnFieldsChange([n,...o])};setFieldsValue=e=>{this.warningUnhooked();const t=this.store;if(e){const n=So(this.store,e);this.updateStore(n)}this.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),this.notifyWatch()};setFieldValue=(e,t)=>{this.setFields([{name:e,value:t,errors:[],warnings:[],touched:!0}])};getDependencyChildrenFields=e=>{const t=new Set,n=[],i=new _s;this.getFieldEntities().forEach(l=>{const{dependencies:c}=l.props;(c||[]).forEach(u=>{const d=Ar(u);i.update(d,(m=new Set)=>(m.add(l),m))})});const o=l=>{(i.get(l)||new Set).forEach(u=>{if(!t.has(u)){t.add(u);const d=u.getNamePath();u.isFieldDirty()&&d.length&&(n.push(d),o(d))}})};return o(e),n};triggerOnFieldsChange=(e,t)=>{const{onFieldsChange:n}=this.callbacks;if(n){const i=this.getFields();if(t){const l=new _s;t.forEach(({name:c,errors:u})=>{l.set(c,u)}),i.forEach(c=>{c.errors=l.get(c.name)||c.errors})}const o=i.filter(({name:l})=>Ks(e,l));o.length&&n(o,i)}};validateFields=(e,t)=>{this.warningUnhooked();let n,i;Array.isArray(e)||typeof e=="string"||typeof t=="string"?(n=e,i=t):i=e;const o=!!n,l=o?n.map(Ar):[],c=[...l],u=[],d=String(Date.now()),m=new Set,{recursive:f,dirty:h}=i||{};this.getFieldEntities(!0).forEach(S=>{const A=S.getNamePath();if(o||((!S.isList()||!l.some(x=>xc(x,A,!0)))&&c.push(A),l.push(A)),!(!S.props.rules||!S.props.rules.length)&&!(h&&!S.isFieldDirty())&&(m.add(A.join(d)),!o||Ks(l,A,f))){const x=S.validateRules({validateMessages:{...dv,...this.validateMessages},...i});u.push(x.then(()=>({name:A,errors:[],warnings:[]})).catch(k=>{const U=[],Y=[];return k.forEach?.(({rule:{warningOnly:Q},errors:L})=>{Q?Y.push(...L):U.push(...L)}),U.length?Promise.reject({name:A,errors:U,warnings:Y}):{name:A,errors:U,warnings:Y}}))}});const g=ak(u);this.lastValidatePromise=g,g.catch(S=>S).then(S=>{const A=S.map(({name:x})=>x);this.notifyObservers(this.store,A,{type:"validateFinish"}),this.triggerOnFieldsChange(A,S)});const p=g.then(()=>this.lastValidatePromise===g?Promise.resolve(this.getFieldsValue(c)):Promise.reject([])).catch(S=>{const A=S.filter(k=>k&&k.errors.length),x=A[0]?.errors?.[0];return Promise.reject({message:x,values:this.getFieldsValue(l),errorFields:A,outOfDate:this.lastValidatePromise!==g})});p.catch(S=>S);const E=l.filter(S=>m.has(S.join(d)));return this.triggerOnFieldsChange(E),p};submit=()=>{this.warningUnhooked(),this.validateFields().then(e=>{const{onFinish:t}=this.callbacks;if(t)try{t(e)}catch(n){console.error(n)}}).catch(e=>{const{onFinishFailed:t}=this.callbacks;t&&t(e)})}}function hv(r){const e=T.useRef(null),[,t]=T.useState({});if(!e.current)if(r)e.current=r;else{const n=()=>{t({})},i=new lk(n);e.current=i.getForm()}return[e.current]}const If=T.createContext({triggerFormChange:()=>{},triggerFormFinish:()=>{},registerForm:()=>{},unregisterForm:()=>{}}),ck=({validateMessages:r,onFormChange:e,onFormFinish:t,children:n})=>{const i=T.useContext(If),o=T.useRef({});return T.createElement(If.Provider,{value:{...i,validateMessages:{...i.validateMessages,...r},triggerFormChange:(l,c)=>{e&&e(l,{changedFields:c,forms:o.current}),i.triggerFormChange(l,c)},triggerFormFinish:(l,c)=>{t&&t(l,{values:c,forms:o.current}),i.triggerFormFinish(l,c)},registerForm:(l,c)=>{l&&(o.current={...o.current,[l]:c}),i.registerForm(l,c)},unregisterForm:l=>{const c={...o.current};delete c[l],o.current=c,i.unregisterForm(l)}}},n)};function Af(){return Af=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Af.apply(this,arguments)}const uk=({name:r,initialValues:e,fields:t,form:n,preserve:i,children:o,component:l="form",validateMessages:c,validateTrigger:u="onChange",onValuesChange:d,onFieldsChange:m,onFinish:f,onFinishFailed:h,clearOnDestroy:g,...p},E)=>{const S=T.useRef(null),A=T.useContext(If),[x]=hv(n),{useSubscribe:k,setInitialValues:U,setCallbacks:Y,setValidateMessages:Q,setPreserve:L,destroyForm:O}=x.getInternalHooks(ns);T.useImperativeHandle(E,()=>({...x,nativeElement:S.current})),T.useEffect(()=>(A.registerForm(r,x),()=>{A.unregisterForm(r)}),[A,x,r]),Q({...A.validateMessages,...c}),Y({onValuesChange:d,onFieldsChange:(_e,...ke)=>{A.triggerFormChange(r,_e),m&&m(_e,...ke)},onFinish:_e=>{A.triggerFormFinish(r,_e),f&&f(_e)},onFinishFailed:h}),L(i);const G=T.useRef(null);U(e,!G.current),G.current||(G.current=!0),T.useEffect(()=>()=>O(g),[]);let te;const ge=typeof o=="function";if(ge){const _e=x.getFieldsValue(!0);te=o(_e,x)}else te=o;k(!ge);const Me=T.useRef(null);T.useEffect(()=>{tk(Me.current||[],t||[])||x.setFields(t||[]),Me.current=t},[t,x]);const he=T.useMemo(()=>({...x,validateTrigger:u}),[x,u]),De=T.createElement(_c.Provider,{value:null},T.createElement(Js.Provider,{value:he},te));return l===!1?De:T.createElement(l,Af({},p,{ref:S,onSubmit:_e=>{_e.preventDefault(),_e.stopPropagation(),x.submit()},onReset:_e=>{_e.preventDefault(),x.resetFields(),p.onReset?.(_e)}}),De)};function ed(r){try{return JSON.stringify(r)}catch{return Math.random()}}function dk(...r){const[e,t={}]=r,n=EC(t)?{form:t}:t,i=n.form,[o,l]=T.useState(()=>typeof e=="function"?e({}):void 0),c=T.useMemo(()=>ed(o),[o]),u=T.useRef(c);u.current=c;const d=T.useContext(Js),m=i||d,f=m&&m._init,{getFieldsValue:h,getInternalHooks:g}=m,{registerWatch:p}=g(ns),E=hi((A,x)=>{const k=n.preserve?x??h(!0):A??h(),U=typeof e=="function"?e(k):Oa(k,Ar(e));ed(o)!==ed(U)&&l(U)}),S=typeof e=="function"?e:JSON.stringify(e);return T.useEffect(()=>{f&&E()},[f,S]),T.useEffect(()=>f?p((x,k)=>{E(x,k)}):void 0,[f]),o}const fk=T.forwardRef(uk),al=fk;al.FormProvider=ck;al.Field=fv;al.List=ik;al.useForm=hv;al.useWatch=dk;const Rf=T.createContext({}),hk=({children:r,status:e,override:t})=>{const n=T.useContext(Rf),i=T.useMemo(()=>{const o={...n};return t&&delete o.isFormItemInput,e&&(delete o.status,delete o.hasFeedback,delete o.feedbackIcon),o},[e,t,n]);return T.createElement(Rf.Provider,{value:i},r)},mk=T.createContext(void 0),gk=r=>{const{space:e,form:t,children:n}=r;if(!Ba(n))return null;let i=n;return t&&(i=Je.createElement(hk,{override:!0,status:!0},i)),e&&(i=Je.createElement(gR,null,i)),i},pk=r=>{if(bI()&&window.document.documentElement){const e=Array.isArray(r)?r:[r],{documentElement:t}=window.document;return e.some(n=>n in t.style)}return!1};function Wy(r,e){return pk(r)}const Jc=r=>{const{prefixCls:e,className:t,style:n,size:i,shape:o}=r,l=Ct({[`${e}-lg`]:i==="large",[`${e}-sm`]:i==="small"}),c=Ct({[`${e}-circle`]:o==="circle",[`${e}-square`]:o==="square",[`${e}-round`]:o==="round"}),u=T.useMemo(()=>typeof i=="number"?{width:i,height:i,lineHeight:`${i}px`}:{},[i]);return T.createElement("span",{className:Ct(e,l,c,t),style:{...u,...n}})},yk=new or("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),qh=r=>({height:r,lineHeight:an(r)}),Fa=r=>({width:r,...qh(r)}),bk=r=>({background:r.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:yk,animationDuration:r.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),td=(r,e)=>({width:e(r).mul(5).equal(),minWidth:e(r).mul(5).equal(),...qh(r)}),Ek=r=>{const{skeletonAvatarCls:e,gradientFromColor:t,controlHeight:n,controlHeightLG:i,controlHeightSM:o}=r;return{[e]:{display:"inline-block",verticalAlign:"top",background:t,...Fa(n)},[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:{...Fa(i)},[`${e}${e}-sm`]:{...Fa(o)}}},vk=r=>{const{controlHeight:e,borderRadiusSM:t,skeletonInputCls:n,controlHeightLG:i,controlHeightSM:o,gradientFromColor:l,calc:c}=r;return{[n]:{display:"inline-block",verticalAlign:"top",background:l,borderRadius:t,...td(e,c)},[`${n}-lg`]:{...td(i,c)},[`${n}-sm`]:{...td(o,c)}}},mv=r=>{const{gradientFromColor:e,borderRadiusSM:t,imageSizeBase:n,calc:i}=r;return{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:e,borderRadius:t,...Fa(i(n).mul(2).equal())}},Tk=r=>({[r.skeletonNodeCls]:{...mv(r)}}),Sk=r=>{const{skeletonImageCls:e,imageSizeBase:t,calc:n}=r;return{[e]:{...mv(r),[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:{...Fa(t),maxWidth:n(t).mul(4).equal(),maxHeight:n(t).mul(4).equal()},[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}},[`${e}${e}-circle`]:{borderRadius:"50%"}}},nd=(r,e,t)=>{const{skeletonButtonCls:n}=r;return{[`${t}${n}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${t}${n}-round`]:{borderRadius:e}}},rd=(r,e)=>({width:e(r).mul(2).equal(),minWidth:e(r).mul(2).equal(),...qh(r)}),wk=r=>{const{borderRadiusSM:e,skeletonButtonCls:t,controlHeight:n,controlHeightLG:i,controlHeightSM:o,gradientFromColor:l,calc:c}=r;return{[t]:{display:"inline-block",verticalAlign:"top",background:l,borderRadius:e,width:c(n).mul(2).equal(),minWidth:c(n).mul(2).equal(),...rd(n,c)},...nd(r,n,t),[`${t}-lg`]:{...rd(i,c)},...nd(r,i,`${t}-lg`),[`${t}-sm`]:{...rd(o,c)},...nd(r,o,`${t}-sm`)}},_k=r=>{const{componentCls:e,skeletonAvatarCls:t,skeletonTitleCls:n,skeletonParagraphCls:i,skeletonButtonCls:o,skeletonInputCls:l,skeletonNodeCls:c,skeletonImageCls:u,controlHeight:d,controlHeightLG:m,controlHeightSM:f,gradientFromColor:h,padding:g,marginSM:p,borderRadius:E,titleHeight:S,blockRadius:A,paragraphLiHeight:x,controlHeightXS:k,paragraphMarginTop:U}=r;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:g,verticalAlign:"top",[t]:{display:"inline-block",verticalAlign:"top",background:h,...Fa(d)},[`${t}-circle`]:{borderRadius:"50%"},[`${t}-lg`]:{...Fa(m)},[`${t}-sm`]:{...Fa(f)}},[`${e}-section`]:{display:"table-cell",width:"100%",verticalAlign:"top",[n]:{width:"100%",height:S,background:h,borderRadius:A,[`+ ${i}`]:{marginBlockStart:f}},[i]:{padding:0,"> li":{width:"100%",height:x,listStyle:"none",background:h,borderRadius:A,"+ li":{marginBlockStart:k}}},[`${i}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-section`]:{[`${n}, ${i} > li`]:{borderRadius:E}}},[`${e}-with-avatar ${e}-section`]:{[n]:{marginBlockStart:p,[`+ ${i}`]:{marginBlockStart:U}}},[`${e}${e}-element`]:{display:"inline-block",width:"auto",...wk(r),...Ek(r),...vk(r),...Tk(r),...Sk(r)},[`${e}${e}-block`]:{width:"100%",[o]:{width:"100%"},[l]:{width:"100%"}},[`${e}${e}-active`]:{[`
        ${n},
        ${i} > li,
        ${t},
        ${o},
        ${l},
        ${c},
        ${u}
      `]:{...bk(r)}}}},xk=r=>{const{colorFillContent:e,colorFill:t}=r,n=e,i=t;return{color:n,colorGradientEnd:i,gradientFromColor:n,gradientToColor:i,titleHeight:r.controlHeight/2,blockRadius:r.borderRadiusSM,paragraphMarginTop:r.marginLG+r.marginXXS,paragraphLiHeight:r.controlHeight/2}},sl=ai("Skeleton",r=>{const{componentCls:e,calc:t}=r,n=Nr(r,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonNodeCls:`${e}-node`,skeletonImageCls:`${e}-image`,imageSizeBase:t(r.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${r.gradientFromColor} 25%, ${r.gradientToColor} 37%, ${r.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return _k(n)},xk,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),Ik=r=>{const{prefixCls:e,className:t,classNames:n,rootClassName:i,active:o,style:l,styles:c,shape:u="circle",size:d="default",...m}=r,{getPrefixCls:f}=T.useContext(Lr),h=f("skeleton",e),[g,p]=sl(h),E=Ct(h,`${h}-element`,{[`${h}-active`]:o},n?.root,t,i,g,p);return T.createElement("div",{className:E,style:c?.root},T.createElement(Jc,{prefixCls:`${h}-avatar`,className:n?.content,style:{...c?.content,...l},shape:u,size:d,...m}))},Ak=r=>{const{prefixCls:e,className:t,rootClassName:n,classNames:i,active:o,style:l,styles:c,block:u=!1,size:d="default",...m}=r,{getPrefixCls:f}=T.useContext(Lr),h=f("skeleton",e),[g,p]=sl(h),E=Ct(h,`${h}-element`,{[`${h}-active`]:o,[`${h}-block`]:u},i?.root,t,n,g,p);return T.createElement("div",{className:E,style:c?.root},T.createElement(Jc,{prefixCls:`${h}-button`,className:i?.content,style:{...c?.content,...l},size:d,...m}))},gv=r=>{const{prefixCls:e,className:t,classNames:n,rootClassName:i,internalClassName:o,style:l,styles:c,active:u,children:d}=r,{getPrefixCls:m}=T.useContext(Lr),f=m("skeleton",e),[h,g]=sl(f),p=Ct(f,`${f}-element`,{[`${f}-active`]:u},h,n?.root,t,i,g);return T.createElement("div",{className:p,style:c?.root},T.createElement("div",{className:Ct(n?.content,o||`${f}-node`),style:{...c?.content,...l}},d))},Rk=r=>{const{getPrefixCls:e}=T.useContext(Lr),t=e("skeleton",r.prefixCls);return T.createElement(gv,{...r,internalClassName:`${t}-image`},T.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${t}-image-svg`},T.createElement("title",null,"Image placeholder"),T.createElement("path",{d:"M365.7 329.1q0 45.8-32 77.7t-77.7 32-77.7-32-32-77.7 32-77.6 77.7-32 77.7 32 32 77.6M951 548.6v256H146.3V694.9L329 512l91.5 91.4L713 311zm54.8-402.3H91.4q-7.4 0-12.8 5.4T73 164.6v694.8q0 7.5 5.5 12.9t12.8 5.4h914.3q7.5 0 12.9-5.4t5.4-12.9V164.6q0-7.5-5.4-12.9t-12.9-5.4m91.4 18.3v694.8q0 37.8-26.8 64.6t-64.6 26.9H91.4q-37.7 0-64.6-26.9T0 859.4V164.6q0-37.8 26.8-64.6T91.4 73h914.3q37.8 0 64.6 26.9t26.8 64.6",className:`${t}-image-path`})))},Ck=r=>{const{prefixCls:e,className:t,classNames:n,rootClassName:i,active:o,block:l,style:c,styles:u,size:d="default",...m}=r,{getPrefixCls:f}=T.useContext(Lr),h=f("skeleton",e),[g,p]=sl(h),E=Ct(h,`${h}-element`,{[`${h}-active`]:o,[`${h}-block`]:l},n?.root,t,i,g,p);return T.createElement("div",{className:E,style:u?.root},T.createElement(Jc,{prefixCls:`${h}-input`,className:n?.content,style:{...u?.content,...c},size:d,...m}))},kk=(r,e)=>{const{width:t,rows:n=2}=e;if(Array.isArray(t))return t[r];if(n-1===r)return t},Lk=r=>{const{prefixCls:e,className:t,style:n,rows:i=0}=r,o=Array.from({length:i}).map((l,c)=>T.createElement("li",{key:c,style:{width:kk(c,r)}}));return T.createElement("ul",{className:Ct(e,t),style:n},o)},Nk=({prefixCls:r,className:e,width:t,style:n})=>T.createElement("h3",{className:Ct(r,e),style:{width:t,...n}});function id(r){return r&&typeof r=="object"?r:{}}function Dk(r,e){return r&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function Pk(r,e){return!r&&e?{width:"38%"}:r&&e?{width:"50%"}:{}}function Mk(r,e){const t={};return(!r||!e)&&(t.width="61%"),!r&&e?t.rows=3:t.rows=2,t}const ao=r=>{const{prefixCls:e,loading:t,className:n,rootClassName:i,classNames:o,style:l,styles:c,children:u,avatar:d=!1,title:m=!0,paragraph:f=!0,active:h,round:g}=r,{getPrefixCls:p,direction:E,className:S,style:A,classNames:x,styles:k}=Xr("skeleton"),U=p("skeleton",e),[Y,Q]=sl(U),L={...r,avatar:d,title:m,paragraph:f},[O,G]=Ei([x,o],[k,c],{props:L});if(t||!("loading"in r)){const te=!!d,ge=!!m,Me=!!f;let he;if(te){const ke={className:O.avatar,prefixCls:`${U}-avatar`,...Dk(ge,Me),...id(d),style:G.avatar};he=T.createElement("div",{className:Ct(O.header,`${U}-header`),style:G.header},T.createElement(Jc,{...ke}))}let De;if(ge||Me){let ke;if(ge){const He={className:O.title,prefixCls:`${U}-title`,...Pk(te,Me),...id(m),style:G.title};ke=T.createElement(Nk,{...He})}let Oe;if(Me){const He={className:O.paragraph,prefixCls:`${U}-paragraph`,...Mk(te,ge),...id(f),style:G.paragraph};Oe=T.createElement(Lk,{...He})}De=T.createElement("div",{className:Ct(O.section,`${U}-section`),style:G.section},ke,Oe)}const _e=Ct(U,{[`${U}-with-avatar`]:te,[`${U}-active`]:h,[`${U}-rtl`]:E==="rtl",[`${U}-round`]:g},O.root,S,n,i,Y,Q);return T.createElement("div",{className:_e,style:{...G.root,...A,...l}},he,De)}return u??null};ao.Button=Ak;ao.Avatar=Ik;ao.Input=Ck;ao.Image=Rk;ao.Node=gv;const Ok=Je.createContext({}),xs=void 0;function Fk(r,e){const{prefixCls:t,invalidate:n,item:i,renderItem:o,responsive:l,responsiveDisabled:c,registerSize:u,itemKey:d,className:m,style:f,children:h,display:g,order:p,component:E="div",...S}=r,A=l&&!g;function x(L){u(d,L)}T.useEffect(()=>()=>{x(null)},[]);const k=o&&i!==xs?o(i,{index:p}):h;let U;n||(U={opacity:A?0:1,height:A?0:xs,overflowY:A?"hidden":xs,order:l?p:xs,pointerEvents:A?"none":xs,position:A?"absolute":xs});const Y={};A&&(Y["aria-hidden"]=!0);let Q=T.createElement(E,ra({className:Ct(!n&&t,m),style:{...U,...f}},Y,S,{ref:e}),k);return l&&(Q=T.createElement(is,{onResize:({offsetWidth:L})=>{x(L)},disabled:c},Q)),Q}const _o=T.forwardRef(Fk);function zk(r){if(typeof MessageChannel>"u")Yr(r);else{const e=new MessageChannel;e.port1.onmessage=()=>r(),e.port2.postMessage(void 0)}}function Uk(){const r=T.useRef(null);return t=>{r.current||(r.current=[],zk(()=>{Zs.unstable_batchedUpdates(()=>{r.current.forEach(n=>{n()}),r.current=null})})),r.current.push(t)}}function Is(r,e){const[t,n]=T.useState(e),i=hi(o=>{r(()=>{n(o)})});return[t,i]}const Ic=Je.createContext(null),Bk=(r,e)=>{const t=T.useContext(Ic);if(!t){const{component:c="div",...u}=r;return T.createElement(c,ra({},u,{ref:e}))}const{className:n,...i}=t,{className:o,...l}=r;return T.createElement(Ic.Provider,{value:null},T.createElement(_o,ra({ref:e,className:Ct(n,o)},i,l)))},$k=T.forwardRef(Bk),pv="responsive",yv="invalidate";function jk(r){return`+ ${r.length} ...`}function qk(r,e){const{prefixCls:t="rc-overflow",data:n=[],renderItem:i,renderRawItem:o,itemKey:l,itemWidth:c=10,ssr:u,style:d,className:m,maxCount:f,renderRest:h,renderRawRest:g,prefix:p,suffix:E,component:S="div",itemComponent:A,onVisibleChange:x,...k}=r,U=u==="full",Y=Uk(),[Q,L]=Is(Y,null),O=Q||0,[G,te]=Is(Y,new Map),[ge,Me]=Is(Y,0),[he,De]=Is(Y,0),[_e,ke]=Is(Y,0),[Oe,He]=Is(Y,0),[Pe,Ge]=T.useState(null),[qe,Ze]=T.useState(null),ct=T.useMemo(()=>qe===null&&U?Number.MAX_SAFE_INTEGER:qe||0,[qe,Q]),[mt,xe]=T.useState(!1),Ie=`${t}-item`,Ke=Math.max(ge,he),H=f===pv,V=n.length&&H,C=f===yv,F=V||typeof f=="number"&&n.length>f,oe=T.useMemo(()=>{let dn=n;return V?Q===null&&U?dn=n:dn=n.slice(0,Math.min(n.length,O/c)):typeof f=="number"&&(dn=n.slice(0,f)),dn},[n,c,Q,f,V]),Z=T.useMemo(()=>V?n.slice(ct+1):n.slice(oe.length),[n,oe,V,ct]),Be=T.useCallback((dn,pn)=>typeof l=="function"?l(dn):(l&&dn?.[l])??pn,[l]),Xe=T.useCallback(i||(dn=>dn),[i]);function $e(dn,pn,Pt){qe===dn&&(pn===void 0||pn===Pe)||(Ze(dn),Pt||(xe(dn<n.length-1),x?.(dn)),pn!==void 0&&Ge(pn))}function Ve(dn,pn){L(pn.clientWidth)}function je(dn,pn){te(Pt=>{const At=new Map(Pt);return pn===null?At.delete(dn):At.set(dn,pn),At})}function Qe(dn,pn){De(pn),Me(he)}function dt(dn,pn){ke(pn)}function it(dn,pn){He(pn)}function rt(dn){return G.get(Be(oe[dn],dn))}$r(()=>{if(O&&typeof Ke=="number"&&oe){let dn=_e+Oe;const pn=oe.length,Pt=pn-1;if(!pn){$e(0,null);return}for(let At=0;At<pn;At+=1){let tt=rt(At);if(U&&(tt=tt||0),tt===void 0){$e(At-1,void 0,!0);break}if(dn+=tt,Pt===0&&dn<=O||At===Pt-1&&dn+rt(Pt)<=O){$e(Pt,null);break}else if(dn+Ke>O){$e(At-1,dn-tt-Oe+he);break}}E&&rt(0)+Oe>O&&Ge(null)}},[O,G,he,_e,Oe,Be,oe]);const Ot=mt&&!!Z.length;let pt={};Pe!==null&&V&&(pt={position:"absolute",left:Pe,top:0});const kt={prefixCls:Ie,responsive:V,component:A,invalidate:C},wt=o?(dn,pn)=>{const Pt=Be(dn,pn);return T.createElement(Ic.Provider,{key:Pt,value:{...kt,order:pn,item:dn,itemKey:Pt,registerSize:je,display:pn<=ct}},o(dn,pn))}:(dn,pn)=>{const Pt=Be(dn,pn);return T.createElement(_o,ra({},kt,{order:pn,key:Pt,item:dn,renderItem:Xe,itemKey:Pt,registerSize:je,display:pn<=ct}))},fn={order:Ot?ct:Number.MAX_SAFE_INTEGER,className:`${Ie}-rest`,registerSize:Qe,display:Ot},Tn=h||jk,Fn=g?T.createElement(Ic.Provider,{value:{...kt,...fn}},g(Z)):T.createElement(_o,ra({},kt,fn),typeof Tn=="function"?Tn(Z):Tn),In=T.createElement(S,ra({className:Ct(!C&&t,m),style:d,ref:e},k),p&&T.createElement(_o,ra({},kt,{responsive:H,responsiveDisabled:!V,order:-1,className:`${Ie}-prefix`,registerSize:dt,display:!0}),p),oe.map(wt),F?Fn:null,E&&T.createElement(_o,ra({},kt,{responsive:H,responsiveDisabled:!V,order:ct,className:`${Ie}-suffix`,registerSize:it,display:!0,style:pt}),E));return H?T.createElement(is,{onResize:Ve,disabled:!V},In):In}const za=T.forwardRef(qk);za.Item=$k;za.RESPONSIVE=pv;za.INVALIDATE=yv;const Gk=(r,e,t)=>Ct({[`${r}-status-success`]:e==="success",[`${r}-status-warning`]:e==="warning",[`${r}-status-error`]:e==="error",[`${r}-status-validating`]:e==="validating",[`${r}-has-feedback`]:t}),Hk=(r,e)=>e||r,bv=(r,e,t)=>{const{variant:n,[r]:i}=T.useContext(Lr),o=T.useContext(mk),l=i?.variant;let c;typeof e<"u"?c=e:t===!1?c="borderless":c=o??l??n??"outlined";const u=EI.includes(c);return[c,u]};var Vk={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};function Cf(){return Cf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Cf.apply(this,arguments)}const Kk=(r,e)=>T.createElement(Dr,Cf({},r,{ref:e,icon:Vk})),Ev=T.forwardRef(Kk),vv=r=>{const{children:e,prefixCls:t,id:n,classNames:i,styles:o,className:l,style:c}=r;return T.createElement("div",{id:n,className:Ct(`${t}-container`,i?.container,l),style:{...o?.container,...c},role:"tooltip"},typeof e=="function"?e():e)},As={shiftX:64,adjustY:1},Rs={adjustX:1,shiftY:!0},Ai=[0,0],Yk={left:{points:["cr","cl"],overflow:Rs,offset:[-4,0],targetOffset:Ai},right:{points:["cl","cr"],overflow:Rs,offset:[4,0],targetOffset:Ai},top:{points:["bc","tc"],overflow:As,offset:[0,-4],targetOffset:Ai},bottom:{points:["tc","bc"],overflow:As,offset:[0,4],targetOffset:Ai},topLeft:{points:["bl","tl"],overflow:As,offset:[0,-4],targetOffset:Ai},leftTop:{points:["tr","tl"],overflow:Rs,offset:[-4,0],targetOffset:Ai},topRight:{points:["br","tr"],overflow:As,offset:[0,-4],targetOffset:Ai},rightTop:{points:["tl","tr"],overflow:Rs,offset:[4,0],targetOffset:Ai},bottomRight:{points:["tr","br"],overflow:As,offset:[0,4],targetOffset:Ai},rightBottom:{points:["bl","br"],overflow:Rs,offset:[4,0],targetOffset:Ai},bottomLeft:{points:["tl","bl"],overflow:As,offset:[0,4],targetOffset:Ai},leftBottom:{points:["br","bl"],overflow:Rs,offset:[-4,0],targetOffset:Ai}};function kf(){return kf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},kf.apply(this,arguments)}const Wk=T.forwardRef((r,e)=>{const{trigger:t=["hover"],mouseEnterDelay:n=0,mouseLeaveDelay:i=.1,prefixCls:o="rc-tooltip",children:l,onVisibleChange:c,afterVisibleChange:u,motion:d,placement:m="right",align:f={},destroyOnHidden:h=!1,defaultVisible:g,getTooltipContainer:p,arrowContent:E,overlay:S,id:A,showArrow:x=!0,classNames:k,styles:U,...Y}=r,Q=Yc(A),L=T.useRef(null);T.useImperativeHandle(e,()=>L.current);const O={...Y};"visible"in r&&(O.popupVisible=r.visible);const G=T.useMemo(()=>{if(!x)return!1;const ge=x===!0?{}:x;return{...ge,className:Ct(ge.className,k?.arrow),style:{...ge.style,...U?.arrow},content:ge.content??E}},[x,k?.arrow,U?.arrow,E]),te=({open:ge})=>{const Me=T.Children.only(l),he={"aria-describedby":S&&ge?Q:void 0};return T.cloneElement(Me,he)};return T.createElement(Uh,kf({popupClassName:k?.root,prefixCls:o,popup:T.createElement(vv,{key:"content",prefixCls:o,id:Q,classNames:k,styles:U},S),action:t,builtinPlacements:Yk,popupPlacement:m,ref:L,popupAlign:f,getPopupContainer:p,onOpenChange:c,afterOpenChange:u,popupMotion:d,defaultPopupVisible:g,autoDestroy:h,mouseLeaveDelay:i,popupStyle:U?.root,mouseEnterDelay:n,arrow:G,uniqueContainerClassName:k?.uniqueContainer,uniqueContainerStyle:U?.uniqueContainer},O),te)});function Xk(r){const{sizePopupArrow:e,borderRadiusXS:t,borderRadiusOuter:n}=r,i=e/2,o=0,l=i,c=n*1/Math.sqrt(2),u=i-n*(1-1/Math.sqrt(2)),d=i-t*(1/Math.sqrt(2)),m=n*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),f=2*i-d,h=m,g=2*i-c,p=u,E=2*i-o,S=l,A=i*Math.sqrt(2)+n*(Math.sqrt(2)-2),x=n*(Math.sqrt(2)-1),k=`polygon(${x}px 100%, 50% ${x}px, ${2*i-x}px 100%, ${x}px 100%)`,U=`path('M ${o} ${l} A ${n} ${n} 0 0 0 ${c} ${u} L ${d} ${m} A ${t} ${t} 0 0 1 ${f} ${h} L ${g} ${p} A ${n} ${n} 0 0 0 ${E} ${S} Z')`;return{arrowShadowWidth:A,arrowPath:U,arrowPolygon:k}}const Qk=(r,e,t)=>{const{sizePopupArrow:n,arrowPolygon:i,arrowPath:o,arrowShadowWidth:l,borderRadiusXS:c,calc:u}=r;return{pointerEvents:"none",width:n,height:n,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:n,height:u(n).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[i,o]},content:'""'},"&::after":{content:'""',position:"absolute",width:l,height:l,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${an(c)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:t,zIndex:0,background:"transparent"}}},Tv=8;function Sv(r){const{contentRadius:e,limitVerticalRadius:t}=r,n=e>12?e+2:12;return{arrowOffsetHorizontal:n,arrowOffsetVertical:t?Tv:n}}function Ml(r,e){return r?e:{}}const Zk=(r,e,t)=>{const{componentCls:n,boxShadowPopoverArrow:i,arrowOffsetVertical:o,arrowOffsetHorizontal:l,antCls:c}=r,[u]=va(c,"tooltip"),{arrowDistance:d=0,arrowPlacement:m={left:!0,right:!0,top:!0,bottom:!0}}={};return{[n]:{[`${n}-arrow`]:[{position:"absolute",zIndex:1,display:"block",...Qk(r,e,i),"&:before":{background:e}}],...Ml(!!m.top,{[[`&-placement-top > ${n}-arrow`,`&-placement-topLeft > ${n}-arrow`,`&-placement-topRight > ${n}-arrow`].join(",")]:{bottom:d,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${n}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{[u("arrow-offset-x")]:l,[`> ${n}-arrow`]:{left:{_skip_check_:!0,value:l}}},"&-placement-topRight":{[u("arrow-offset-x")]:`calc(100% - ${an(l)})`,[`> ${n}-arrow`]:{right:{_skip_check_:!0,value:l}}}}),...Ml(!!m.bottom,{[[`&-placement-bottom > ${n}-arrow`,`&-placement-bottomLeft > ${n}-arrow`,`&-placement-bottomRight > ${n}-arrow`].join(",")]:{top:d,transform:"translateY(-100%)"},[`&-placement-bottom > ${n}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{[u("arrow-offset-x")]:l,[`> ${n}-arrow`]:{left:{_skip_check_:!0,value:l}}},"&-placement-bottomRight":{[u("arrow-offset-x")]:`calc(100% - ${an(l)})`,[`> ${n}-arrow`]:{right:{_skip_check_:!0,value:l}}}}),...Ml(!!m.left,{[[`&-placement-left > ${n}-arrow`,`&-placement-leftTop > ${n}-arrow`,`&-placement-leftBottom > ${n}-arrow`].join(",")]:{right:{_skip_check_:!0,value:d},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${n}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${n}-arrow`]:{top:o},[`&-placement-leftBottom > ${n}-arrow`]:{bottom:o}}),...Ml(!!m.right,{[[`&-placement-right > ${n}-arrow`,`&-placement-rightTop > ${n}-arrow`,`&-placement-rightBottom > ${n}-arrow`].join(",")]:{left:{_skip_check_:!0,value:d},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${n}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${n}-arrow`]:{top:o},[`&-placement-rightBottom > ${n}-arrow`]:{bottom:o}})}}};function Jk(r,e,t,n){if(n===!1)return{adjustX:!1,adjustY:!1};const i=n&&typeof n=="object"?n:{},o={};switch(r){case"top":case"bottom":o.shiftX=e.arrowOffsetHorizontal*2+t,o.shiftY=!0,o.adjustY=!0;break;case"left":case"right":o.shiftY=e.arrowOffsetVertical*2+t,o.shiftX=!0,o.adjustX=!0;break}const l={...o,...i};return l.shiftX||(l.adjustX=!0),l.shiftY||(l.adjustY=!0),l}const Xy={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},e1={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},t1=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function n1(r){const{arrowWidth:e,autoAdjustOverflow:t,arrowPointAtCenter:n,offset:i,borderRadius:o}=r,l=e/2,c={},u=Sv({contentRadius:o,limitVerticalRadius:!0});return Object.keys(Xy).forEach(d=>{const f={...n&&e1[d]||Xy[d],offset:[0,0],dynamicInset:!0};switch(c[d]=f,t1.has(d)&&(f.autoArrow=!1),d){case"top":case"topLeft":case"topRight":f.offset[1]=-l-i;break;case"bottom":case"bottomLeft":case"bottomRight":f.offset[1]=l+i;break;case"left":case"leftTop":case"leftBottom":f.offset[0]=-l-i;break;case"right":case"rightTop":case"rightBottom":f.offset[0]=l+i;break}if(n)switch(d){case"topLeft":case"bottomLeft":f.offset[0]=-u.arrowOffsetHorizontal-l;break;case"topRight":case"bottomRight":f.offset[0]=u.arrowOffsetHorizontal+l;break;case"leftTop":case"rightTop":f.offset[1]=-u.arrowOffsetHorizontal*2+l;break;case"leftBottom":case"rightBottom":f.offset[1]=u.arrowOffsetHorizontal*2-l;break}f.overflow=Jk(d,u,e,t),f.htmlRegion="visibleFirst"}),c}const r1=(r,e)=>{const t=n=>typeof n=="boolean"?{show:n}:n||{};return Je.useMemo(()=>{const n=t(r),i=t(e);return{...i,...n,show:n.show??i.show??!0}},[r,e])},Qy="50%",i1=r=>{const{calc:e,componentCls:t,tooltipMaxWidth:n,tooltipColor:i,tooltipBg:o,tooltipBorderRadius:l,zIndexPopup:c,controlHeight:u,boxShadowSecondary:d,paddingSM:m,paddingXS:f,arrowOffsetHorizontal:h,sizePopupArrow:g,antCls:p}=r,[E,S]=va(p,"tooltip"),A=e(l).add(g).add(h).equal(),k={minWidth:e(l).mul(2).add(g).equal(),minHeight:u,padding:`${an(r.calc(m).div(2).equal())} ${an(f)}`,color:S("overlay-color",i),textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:o,borderRadius:l,boxShadow:d,boxSizing:"border-box"},U={[E("valid-offset-x")]:S("arrow-offset-x","var(--arrow-x)"),transformOrigin:[S("valid-offset-x",Qy),`var(--arrow-y, ${Qy})`].join(" ")};return[{[t]:{...la(r),position:"absolute",zIndex:c,display:"block",width:"max-content",maxWidth:n,visibility:"visible",...U,"&-hidden":{display:"none"},[E("arrow-background-color")]:o,[`${t}-container`]:[k,sv(r,!0)],[`&:has(~ ${t}-unique-container)`]:{[`${t}-container`]:{border:"none",background:"transparent",boxShadow:"none"}},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:A},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:r.min(l,Tv)}},[`${t}-content`]:{position:"relative"},...XI(r,(Y,{darkColor:Q})=>({[`&${t}-${Y}`]:{[`${t}-container`]:{backgroundColor:Q},[`${t}-arrow`]:{[E("arrow-background-color")]:Q}}})),"&-rtl":{direction:"rtl"}}},Zk(r,S("arrow-background-color")),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:r.sizePopupArrow}},{[`${t}-unique-container`]:{...k,...U,position:"absolute",zIndex:e(c).sub(1).equal(),"&-hidden":{display:"none"},"&-visible":{transition:`all ${r.motionDurationSlow}`}}}]},a1=r=>({zIndexPopup:r.zIndexPopupBase+70,maxWidth:250,...Sv({contentRadius:r.borderRadius,limitVerticalRadius:!0}),...Xk(Nr(r,{borderRadiusOuter:Math.min(r.borderRadiusOuter,4)}))}),wv=(r,e,t=!0)=>ai("Tooltip",i=>{const{borderRadius:o,colorTextLightSolid:l,colorBgSpotlight:c,maxWidth:u}=i,d=Nr(i,{tooltipMaxWidth:u,tooltipColor:l,tooltipBorderRadius:o,tooltipBg:c});return[i1(d),XR(i,"zoom-big-fast")]},a1,{resetStyle:!1,injectStyle:t})(r,e),s1=os.map(r=>`${r}-inverse`);function o1(r,e=!0){return e?[].concat(Fr(s1),Fr(os)).includes(r):os.includes(r)}const _v=(r,e,t)=>{const n=o1(t),[i]=va(r,"tooltip"),o=Ct({[`${e}-${t}`]:t&&n}),l={},c={},u=QR(t).toRgb(),m=(.299*u.r+.587*u.g+.114*u.b)/255<.5?"#FFF":"#000";return t&&!n&&(l.background=t,l[i("overlay-color")]=m,c[i("arrow-background-color")]=t),{className:o,overlayStyle:l,arrowStyle:c}},l1=r=>{const{prefixCls:e,className:t,placement:n="top",title:i,color:o,overlayInnerStyle:l,classNames:c,styles:u}=r,{getPrefixCls:d}=T.useContext(Lr),m=d("tooltip",e),f=d(),h=io(m),[g,p]=wv(m,h),E=_v(f,m,o),S=E.arrowStyle,A=T.useMemo(()=>({container:{...l,...E.overlayStyle}}),[l,E.overlayStyle]),x={...r,placement:n},[k,U]=Ei([c],[A,u],{props:x}),Y=Ct(h,g,p,m,`${m}-pure`,`${m}-placement-${n}`,t,E.className);return T.createElement("div",{className:Y,style:S},T.createElement("div",{className:`${m}-arrow`}),T.createElement(vv,{...r,className:g,prefixCls:m,classNames:k,styles:U},i))},c1=T.forwardRef((r,e)=>{const{prefixCls:t,openClassName:n,getTooltipContainer:i,color:o,children:l,afterOpenChange:c,arrow:u,destroyTooltipOnHide:d,destroyOnHidden:m,title:f,overlay:h,trigger:g,builtinPlacements:p,autoAdjustOverflow:E=!0,motion:S,getPopupContainer:A,placement:x="top",mouseEnterDelay:k=.1,mouseLeaveDelay:U=.1,rootClassName:Y,styles:Q,classNames:L,onOpenChange:O,overlayInnerStyle:G,overlayStyle:te,overlayClassName:ge,...Me}=r,[,he]=tl(),{getPopupContainer:De,getPrefixCls:_e,direction:ke,className:Oe,style:He,classNames:Pe,styles:Ge,arrow:qe,trigger:Ze}=Xr("tooltip"),ct=r1(u,qe),mt=ct.show,xe=g||Ze||"hover",Ie=T.useRef(null),Ke=()=>{Ie.current?.forceAlign()};T.useImperativeHandle(e,()=>({forceAlign:Ke,nativeElement:Ie.current?.nativeElement,popupElement:Ie.current?.popupElement}));const[H,V]=ki(r.defaultOpen??!1,r.open),C=!f&&!h&&f!==0,F=ht=>{V(C?!1:ht),!C&&O&&O(ht)},oe=T.useMemo(()=>p||n1({arrowPointAtCenter:ct?.pointAtCenter??!1,autoAdjustOverflow:E,arrowWidth:mt?he.sizePopupArrow:0,borderRadius:he.borderRadius,offset:he.marginXXS}),[ct,p,he,mt,E]),Z=T.useMemo(()=>f===0?f:h||f||"",[h,f]),Be=T.createElement(gk,{space:!0,form:!0},typeof Z=="function"?Z():Z),Xe={...r,trigger:xe,color:o,placement:x,builtinPlacements:p,openClassName:n,arrow:u,autoAdjustOverflow:E,getPopupContainer:A,children:l,destroyTooltipOnHide:d,destroyOnHidden:m},[$e,Ve]=Ei([Pe,L],[Ge,Q],{props:Xe}),je=_e("tooltip",t),Qe=_e(),dt=r["data-popover-inject"];let it=H;!("open"in r)&&C&&(it=!1);const rt=T.isValidElement(l)&&!_E(l)?l:T.createElement("span",null,l),Ot=rt.props,pt=!Ot.className||typeof Ot.className=="string"?Ct(Ot.className,n||`${je}-open`):Ot.className,kt=io(je),[wt,fn]=wv(je,kt,!dt),Tn=_v(Qe,je,o),Fn=Tn.arrowStyle,In=Ct(kt,wt,fn),dn=Ct(ge,{[`${je}-rtl`]:ke==="rtl"},Tn.className,Y,In,Oe,$e.root),[pn,Pt]=PA("Tooltip",Me.zIndex),At={...Ve.container,...G,...Tn.overlayStyle},tt=T.createElement(Wk,{unique:!0,...Me,trigger:xe,zIndex:pn,showArrow:mt,placement:x,mouseEnterDelay:k,mouseLeaveDelay:U,prefixCls:je,classNames:{root:dn,container:$e.container,arrow:$e.arrow,uniqueContainer:Ct(In,$e.container)},styles:{root:{...Fn,...Ve.root,...He,...te},container:At,uniqueContainer:At,arrow:Ve.arrow},getTooltipContainer:A||i||De,ref:Ie,builtinPlacements:oe,overlay:Be,visible:it,onVisibleChange:F,afterVisibleChange:c,arrowContent:T.createElement("span",{className:`${je}-arrow-content`}),motion:{motionName:ev(Qe,"zoom-big-fast",typeof S?.motionName=="string"?S?.motionName:void 0),motionDeadline:1e3},destroyOnHidden:m??!!d},it?Ea(rt,{className:pt}):rt);return T.createElement(VE.Provider,{value:Pt},tt)}),ds=c1;ds._InternalPanelDoNotUseOrYouWillBeFired=l1;ds.UniqueProvider=vI;const{ESC:u1,TAB:d1}=ri;function f1({visible:r,triggerRef:e,onVisibleChange:t,autoFocus:n,overlayRef:i}){const o=T.useRef(!1),l=()=>{r&&(e.current?.focus?.(),t?.(!1))},c=()=>i.current?.focus?(i.current.focus(),o.current=!0,!0):!1,u=d=>{switch(d.keyCode){case u1:l();break;case d1:{let m=!1;o.current||(m=c()),m?d.preventDefault():l();break}}};T.useEffect(()=>r?(window.addEventListener("keydown",u),n&&Yr(c,3),()=>{window.removeEventListener("keydown",u),o.current=!1}):()=>{o.current=!1},[r])}const h1=T.forwardRef((r,e)=>{const{overlay:t,arrow:n,prefixCls:i}=r,o=T.useMemo(()=>{let c;return typeof t=="function"?c=t():c=t,c},[t]),l=nl(e,Xc(o));return Je.createElement(Je.Fragment,null,n&&Je.createElement("div",{className:`${i}-arrow`}),Je.cloneElement(o,{ref:Nh(o)?l:void 0}))}),Cs={adjustX:1,adjustY:1},ks=[0,0],m1={topLeft:{points:["bl","tl"],overflow:Cs,offset:[0,-4],targetOffset:ks},top:{points:["bc","tc"],overflow:Cs,offset:[0,-4],targetOffset:ks},topRight:{points:["br","tr"],overflow:Cs,offset:[0,-4],targetOffset:ks},bottomLeft:{points:["tl","bl"],overflow:Cs,offset:[0,4],targetOffset:ks},bottom:{points:["tc","bc"],overflow:Cs,offset:[0,4],targetOffset:ks},bottomRight:{points:["tr","br"],overflow:Cs,offset:[0,4],targetOffset:ks}};function Lf(){return Lf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Lf.apply(this,arguments)}const g1=Je.forwardRef((r,e)=>{const{arrow:t=!1,prefixCls:n="rc-dropdown",transitionName:i,animation:o,align:l,placement:c="bottomLeft",placements:u=m1,getPopupContainer:d,showAction:m,hideAction:f,overlayClassName:h,overlayStyle:g,visible:p,trigger:E=["hover"],autoFocus:S,overlay:A,children:x,onVisibleChange:k,...U}=r,[Y,Q]=Je.useState(),L="visible"in r?p:Y,O=o?`${n}-${o}`:i,G=Je.useRef(null),te=Je.useRef(null),ge=Je.useRef(null);Je.useImperativeHandle(e,()=>G.current);const Me=Ge=>{Q(Ge),k?.(Ge)};f1({visible:L,triggerRef:ge,onVisibleChange:Me,autoFocus:S,overlayRef:te});const he=Ge=>{const{onOverlayClick:qe}=r;Q(!1),qe&&qe(Ge)},De=()=>Je.createElement(h1,{ref:te,overlay:A,prefixCls:n,arrow:t}),_e=()=>typeof A=="function"?De:De(),ke=()=>{const{minOverlayWidthMatchTrigger:Ge,alignPoint:qe}=r;return"minOverlayWidthMatchTrigger"in r?Ge:!qe},Oe=()=>{const{openClassName:Ge}=r;return Ge!==void 0?Ge:`${n}-open`},He=Je.cloneElement(x,{className:Ct(x.props?.className,L&&Oe()),ref:Nh(x)?nl(ge,Xc(x)):void 0});let Pe=f;return!Pe&&E.indexOf("contextMenu")!==-1&&(Pe=["click"]),Je.createElement(Uh,Lf({builtinPlacements:u},U,{prefixCls:n,ref:G,popupClassName:Ct(h,{[`${n}-show-arrow`]:t}),popupStyle:g,action:E,showAction:m,hideAction:Pe,popupPlacement:c,popupAlign:l,popupMotion:{motionName:O},popupVisible:L,stretch:ke()?"minWidth":"",popup:_e(),onOpenChange:Me,onPopupClick:he,getPopupContainer:d}),He)}),xv=T.createContext(null);function Iv(r,e){return`${r}-${e}`}function Av(r){const e=T.useContext(xv);return Iv(e,r)}const Yi=T.createContext(null);function p1(r,e){const t={...r};return Object.keys(e).forEach(n=>{const i=e[n];i!==void 0&&(t[n]=i)}),t}function $o({children:r,locked:e,...t}){const n=T.useContext(Yi),i=TI(()=>p1(n,t),[n,t],(o,l)=>!e&&(o[0]!==l[0]||!pc(o[1],l[1],!0)));return T.createElement(Yi.Provider,{value:i},r)}const y1=[],Rv=T.createContext(null);function eu(){return T.useContext(Rv)}const Cv=T.createContext(y1);function ol(r){const e=T.useContext(Cv);return T.useMemo(()=>r!==void 0?[...e,r]:e,[e,r])}const kv=T.createContext(null),Gh=T.createContext({}),{LEFT:Nf,RIGHT:Df,UP:Pf,DOWN:nc,ENTER:rc,ESC:Lv,HOME:bo,END:Eo}=ri,Zy=[Pf,nc,Nf,Df];function b1(r,e,t,n){const i="prev",o="next",l="children",c="parent";if(r==="inline"&&n===rc)return{inlineTrigger:!0};const u={[Pf]:i,[nc]:o},d={[Nf]:t?o:i,[Df]:t?i:o,[nc]:l,[rc]:l},m={[Pf]:i,[nc]:o,[rc]:l,[Lv]:c,[Nf]:t?l:c,[Df]:t?c:l};switch({inline:u,horizontal:d,vertical:m,inlineSub:u,horizontalSub:m,verticalSub:m}[`${r}${e?"":"Sub"}`]?.[n]){case i:return{offset:-1,sibling:!0};case o:return{offset:1,sibling:!0};case c:return{offset:-1,sibling:!1};case l:return{offset:1,sibling:!1};default:return null}}function E1(r){let e=r;for(;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function v1(r,e){let t=r||document.activeElement;for(;t;){if(e.has(t))return t;t=t.parentElement}return null}function Hh(r,e){return yC(r,!0).filter(n=>e.has(n))}function Jy(r,e,t,n=1){if(!r)return null;const i=Hh(r,e),o=i.length;let l=i.findIndex(c=>t===c);return n<0?l===-1?l=o-1:l-=1:n>0&&(l+=1),l=(l+o)%o,i[l]}const Ac=(r,e)=>{const t=new Set,n=new Map,i=new Map;return r.forEach(o=>{const l=document.querySelector(`[data-menu-id='${Iv(e,o)}']`);l&&(t.add(l),i.set(l,o),n.set(o,l))}),{elements:t,key2element:n,element2key:i}};function T1(r,e,t,n,i,o,l,c,u,d){const m=T.useRef(),f=T.useRef();f.current=e;const h=()=>{Yr.cancel(m.current)};return T.useEffect(()=>()=>{h()},[]),g=>{const{which:p}=g;if([...Zy,rc,Lv,bo,Eo].includes(p)){const E=o();let S=Ac(E,n);const{elements:A,key2element:x,element2key:k}=S,U=x.get(e),Y=v1(U,A),Q=k.get(Y),L=b1(r,l(Q,!0).length===1,t,p);if(!L&&p!==bo&&p!==Eo)return;(Zy.includes(p)||[bo,Eo].includes(p))&&g.preventDefault();const O=G=>{if(G){let te=G;const ge=G.querySelector("a");ge?.getAttribute("href")&&(te=ge);const Me=k.get(G);c(Me),h(),m.current=Yr(()=>{f.current===Me&&te.focus()})}};if([bo,Eo].includes(p)||L.sibling||!Y){let G;!Y||r==="inline"?G=i.current:G=E1(Y);let te;const ge=Hh(G,A);p===bo?te=ge[0]:p===Eo?te=ge[ge.length-1]:te=Jy(G,A,Y,L.offset),O(te)}else if(L.inlineTrigger)u(Q);else if(L.offset>0)u(Q,!0),h(),m.current=Yr(()=>{S=Ac(E,n);const G=Y.getAttribute("aria-controls"),te=document.getElementById(G),ge=Jy(te,S.elements);O(ge)},5);else if(L.offset<0){const G=l(Q,!0),te=G[G.length-2],ge=x.get(te);u(te,!1),O(ge)}}d?.(g)}}function S1(r){Promise.resolve().then(r)}const Vh="__RC_UTIL_PATH_SPLIT__",eb=r=>r.join(Vh),w1=r=>r.split(Vh),Mf="rc-menu-more";function _1(){const[,r]=T.useState({}),e=T.useRef(new Map),t=T.useRef(new Map),[n,i]=T.useState([]),o=T.useRef(0),l=T.useRef(!1),c=()=>{l.current||r({})},u=T.useCallback((E,S)=>{const A=eb(S);t.current.set(A,E),e.current.set(E,A),o.current+=1;const x=o.current;S1(()=>{x===o.current&&c()})},[]),d=T.useCallback((E,S)=>{const A=eb(S);t.current.delete(A),e.current.delete(E)},[]),m=T.useCallback(E=>{i(E)},[]),f=T.useCallback((E,S)=>{const A=e.current.get(E)||"",x=w1(A);return S&&n.includes(x[0])&&x.unshift(Mf),x},[n]),h=T.useCallback((E,S)=>E.filter(A=>A!==void 0).some(A=>f(A,!0).includes(S)),[f]),g=()=>{const E=[...e.current.keys()];return n.length&&E.push(Mf),E},p=T.useCallback(E=>{const S=`${e.current.get(E)}${Vh}`,A=new Set;return[...t.current.keys()].forEach(x=>{x.startsWith(S)&&A.add(t.current.get(x))}),A},[]);return T.useEffect(()=>()=>{l.current=!0},[]),{registerPath:u,unregisterPath:d,refreshOverflowKeys:m,isSubPathKey:h,getKeyPath:f,getKeys:g,getSubPathKeys:p}}function xo(r){const e=T.useRef(r);e.current=r;const t=T.useCallback((...n)=>e.current?.(...n),[]);return r?t:void 0}function Nv(r,e,t,n){const{activeKey:i,onActive:o,onInactive:l}=T.useContext(Yi),c={active:i===r};return e||(c.onMouseEnter=u=>{t?.({key:r,domEvent:u}),o(r)},c.onMouseLeave=u=>{n?.({key:r,domEvent:u}),l(r)}),c}function Dv(r){const{mode:e,rtl:t,inlineIndent:n}=T.useContext(Yi);if(e!=="inline")return null;const i=r;return t?{paddingRight:i*n}:{paddingLeft:i*n}}function Pv({icon:r,props:e,children:t}){let n;return r===null||r===!1?null:(typeof r=="function"?n=T.createElement(r,{...e}):typeof r!="boolean"&&(n=r),n||t||null)}function Rc({item:r,...e}){return Object.defineProperty(e,"item",{get:()=>(Ci(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),r)}),e}function jo(){return jo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},jo.apply(this,arguments)}class x1 extends T.Component{render(){const{title:e,attribute:t,elementRef:n,...i}=this.props,o=Ki(i,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Ci(!t,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),T.createElement(za.Item,jo({},t,{title:typeof e=="string"?e:void 0},o,{ref:n}))}}const I1=T.forwardRef((r,e)=>{const{style:t,className:n,eventKey:i,warnKey:o,disabled:l,itemIcon:c,children:u,role:d,onMouseEnter:m,onMouseLeave:f,onClick:h,onKeyDown:g,onFocus:p,...E}=r,S=Av(i),{prefixCls:A,onItemClick:x,disabled:k,overflowDisabled:U,itemIcon:Y,selectedKeys:Q,onActive:L}=T.useContext(Yi),{_internalRenderMenuItem:O}=T.useContext(Gh),G=`${A}-item`,te=T.useRef(),ge=T.useRef(),Me=k||l,he=Wc(e,ge),De=ol(i),_e=Ie=>({key:i,keyPath:[...De].reverse(),item:te.current,domEvent:Ie}),ke=c||Y,{active:Oe,...He}=Nv(i,Me,m,f),Pe=Q.includes(i),Ge=Dv(De.length),qe=Ie=>{if(Me)return;const Ke=_e(Ie);h?.(Rc(Ke)),x(Ke)},Ze=Ie=>{if(g?.(Ie),Ie.which===ri.ENTER){const Ke=_e(Ie);h?.(Rc(Ke)),x(Ke)}},ct=Ie=>{L(i),p?.(Ie)},mt={};r.role==="option"&&(mt["aria-selected"]=Pe);let xe=T.createElement(x1,jo({ref:te,elementRef:he,role:d===null?"none":d||"menuitem",tabIndex:l?null:-1,"data-menu-id":U&&S?null:S},Ki(E,["extra"]),He,mt,{component:"li","aria-disabled":l,style:{...Ge,...t},className:Ct(G,{[`${G}-active`]:Oe,[`${G}-selected`]:Pe,[`${G}-disabled`]:Me},n),onClick:qe,onKeyDown:Ze,onFocus:ct}),u,T.createElement(Pv,{props:{...r,isSelected:Pe},icon:ke}));return O&&(xe=O(xe,r,{selected:Pe})),xe});function A1(r,e){const{eventKey:t}=r,n=eu(),i=ol(t);return T.useEffect(()=>{if(n)return n.registerPath(t,i),()=>{n.unregisterPath(t,i)}},[i]),n?null:T.createElement(I1,jo({},r,{ref:e}))}const tu=T.forwardRef(A1);function Of(){return Of=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Of.apply(this,arguments)}const R1=({className:r,children:e,...t},n)=>{const{prefixCls:i,mode:o,rtl:l}=T.useContext(Yi);return T.createElement("ul",Of({className:Ct(i,l&&`${i}-rtl`,`${i}-sub`,`${i}-${o==="inline"?"inline":"vertical"}`,r),role:"menu"},t,{"data-menu-list":!0,ref:n}),e)},Mv=T.forwardRef(R1);function Kh(r,e){return us(r).map((t,n)=>{if(T.isValidElement(t)){const{key:i}=t;let o=t.props?.eventKey??i;o==null&&(o=`tmp_key-${[...e,n].join("-")}`);const c={key:o,eventKey:o};return T.cloneElement(t,c)}return t})}const Kr={adjustX:1,adjustY:1},C1={topLeft:{points:["bl","tl"],overflow:Kr},topRight:{points:["br","tr"],overflow:Kr},bottomLeft:{points:["tl","bl"],overflow:Kr},bottomRight:{points:["tr","br"],overflow:Kr},leftTop:{points:["tr","tl"],overflow:Kr},leftBottom:{points:["br","bl"],overflow:Kr},rightTop:{points:["tl","tr"],overflow:Kr},rightBottom:{points:["bl","br"],overflow:Kr}},k1={topLeft:{points:["bl","tl"],overflow:Kr},topRight:{points:["br","tr"],overflow:Kr},bottomLeft:{points:["tl","bl"],overflow:Kr},bottomRight:{points:["tr","br"],overflow:Kr},rightTop:{points:["tr","tl"],overflow:Kr},rightBottom:{points:["br","bl"],overflow:Kr},leftTop:{points:["tl","tr"],overflow:Kr},leftBottom:{points:["bl","br"],overflow:Kr}};function Ov(r,e,t){if(e)return e;if(t)return t[r]||t.other}const L1={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function N1({prefixCls:r,visible:e,children:t,popup:n,popupStyle:i,popupClassName:o,popupOffset:l,disabled:c,mode:u,onVisibleChange:d}){const{getPopupContainer:m,rtl:f,subMenuOpenDelay:h,subMenuCloseDelay:g,builtinPlacements:p,triggerSubMenuAction:E,forceSubMenuRender:S,rootClassName:A,motion:x,defaultMotions:k}=T.useContext(Yi),[U,Y]=T.useState(!1),Q=f?{...k1,...p}:{...C1,...p},L=L1[u],O=Ov(u,x,k),G=T.useRef(O);u!=="inline"&&(G.current=O);const te={...G.current,leavedClassName:`${r}-hidden`,removeOnLeave:!1,motionAppear:!0},ge=T.useRef();return T.useEffect(()=>(ge.current=Yr(()=>{Y(e)}),()=>{Yr.cancel(ge.current)}),[e]),T.createElement(Uh,{prefixCls:r,popupClassName:Ct(`${r}-popup`,{[`${r}-rtl`]:f},o,A),stretch:u==="horizontal"?"minWidth":null,getPopupContainer:m,builtinPlacements:Q,popupPlacement:L,popupVisible:U,popup:n,popupStyle:i,popupAlign:l&&{offset:l},action:c?[]:[E],mouseEnterDelay:h,mouseLeaveDelay:g,onPopupVisibleChange:d,forceRender:S,popupMotion:te,fresh:!0},t)}function Ff(){return Ff=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ff.apply(this,arguments)}function D1({id:r,open:e,keyPath:t,children:n}){const i="inline",{prefixCls:o,forceSubMenuRender:l,motion:c,defaultMotions:u,mode:d}=T.useContext(Yi),m=T.useRef(!1);m.current=d===i;const[f,h]=T.useState(!m.current),g=m.current?e:!1;T.useEffect(()=>{m.current&&h(!1)},[d]);const p={...Ov(i,c,u)};t.length>1&&(p.motionAppear=!1);const E=p.onVisibleChanged;return p.onVisibleChanged=S=>(!m.current&&!S&&h(!0),E?.(S)),f?null:T.createElement($o,{mode:i,locked:!m.current},T.createElement(cs,Ff({visible:g},p,{forceRender:l,removeOnLeave:!1,leavedClassName:`${o}-hidden`}),({className:S,style:A})=>T.createElement(Mv,{id:r,className:S,style:A},n)))}function qo(){return qo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},qo.apply(this,arguments)}const P1=T.forwardRef((r,e)=>{const{style:t,className:n,styles:i,classNames:o,title:l,eventKey:c,warnKey:u,disabled:d,internalPopupClose:m,children:f,itemIcon:h,expandIcon:g,popupClassName:p,popupOffset:E,popupStyle:S,onClick:A,onMouseEnter:x,onMouseLeave:k,onTitleClick:U,onTitleMouseEnter:Y,onTitleMouseLeave:Q,popupRender:L,...O}=r,G=Av(c),{prefixCls:te,mode:ge,openKeys:Me,disabled:he,overflowDisabled:De,activeKey:_e,selectedKeys:ke,itemIcon:Oe,expandIcon:He,onItemClick:Pe,onOpenChange:Ge,onActive:qe,popupRender:Ze}=T.useContext(Yi),{_internalRenderSubMenuItem:ct}=T.useContext(Gh),{isSubPathKey:mt}=T.useContext(kv),xe=ol(),Ie=`${te}-submenu`,Ke=he||d,H=T.useRef(),V=T.useRef(),C=h??Oe,F=g??He,oe=Me.includes(c),Z=!De&&oe,Be=mt(ke,c),{active:Xe,...$e}=Nv(c,Ke,Y,Q),[Ve,je]=T.useState(!1),Qe=tt=>{Ke||je(tt)},dt=tt=>{Qe(!0),x?.({key:c,domEvent:tt})},it=tt=>{Qe(!1),k?.({key:c,domEvent:tt})},rt=T.useMemo(()=>Xe||(ge!=="inline"?Ve||mt([_e],c):!1),[ge,Xe,_e,Ve,c,mt]),Ot=Dv(xe.length),pt=tt=>{Ke||(U?.({key:c,domEvent:tt}),ge==="inline"&&Ge(c,!oe))},kt=xo(tt=>{A?.(Rc(tt)),Pe(tt)}),wt=tt=>{ge!=="inline"&&Ge(c,tt)},fn=()=>{qe(c)},Tn=G&&`${G}-popup`,Fn=T.useMemo(()=>T.createElement(Pv,{icon:ge!=="horizontal"?F:void 0,props:{...r,isOpen:Z,isSubMenu:!0}},T.createElement("i",{className:`${Ie}-arrow`})),[ge,F,r,Z,Ie]);let In=T.createElement("div",qo({role:"menuitem",style:Ot,className:`${Ie}-title`,tabIndex:Ke?null:-1,ref:H,title:typeof l=="string"?l:null,"data-menu-id":De&&G?null:G,"aria-expanded":Z,"aria-haspopup":!0,"aria-controls":Tn,"aria-disabled":Ke,onClick:pt,onFocus:fn},$e),l,Fn);const dn=T.useRef(ge);ge!=="inline"&&xe.length>1?dn.current="vertical":dn.current=ge;const pn=dn.current,Pt=T.useMemo(()=>{const tt=T.createElement($o,{classNames:o,styles:i,mode:pn==="horizontal"?"vertical":pn},T.createElement(Mv,{id:Tn,ref:V},f)),ht=L||Ze;return ht?ht(tt,{item:r,keys:xe}):tt},[L,Ze,xe,Tn,f,r,pn]);if(!De){const tt=dn.current;In=T.createElement(N1,{mode:tt,prefixCls:Ie,visible:!m&&Z&&ge!=="inline",popupClassName:p,popupOffset:E,popupStyle:S,popup:Pt,disabled:Ke,onVisibleChange:wt},In)}let At=T.createElement(za.Item,qo({ref:e,role:"none"},O,{component:"li",style:t,className:Ct(Ie,`${Ie}-${ge}`,n,{[`${Ie}-open`]:Z,[`${Ie}-active`]:rt,[`${Ie}-selected`]:Be,[`${Ie}-disabled`]:Ke}),onMouseEnter:dt,onMouseLeave:it}),In,!De&&T.createElement(D1,{id:Tn,open:Z,keyPath:xe},f));return ct&&(At=ct(At,r,{selected:Be,active:rt,open:Z,disabled:Ke})),T.createElement($o,{classNames:o,styles:i,onItemClick:kt,mode:ge==="horizontal"?"vertical":ge,itemIcon:C,expandIcon:F},At)}),Yh=T.forwardRef((r,e)=>{const{eventKey:t,children:n}=r,i=ol(t),o=Kh(n,i),l=eu();T.useEffect(()=>{if(l)return l.registerPath(t,i),()=>{l.unregisterPath(t,i)}},[i]);let c;return l?c=o:c=T.createElement(P1,qo({ref:e},r),o),T.createElement(Cv.Provider,{value:i},c)});function Fv({className:r,style:e}){const{prefixCls:t}=T.useContext(Yi);return eu()?null:T.createElement("li",{role:"separator",className:Ct(`${t}-item-divider`,r),style:e})}function Cc(){return Cc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Cc.apply(this,arguments)}const M1=T.forwardRef((r,e)=>{const{className:t,title:n,eventKey:i,children:o,...l}=r,{prefixCls:c,classNames:u,styles:d}=T.useContext(Yi),m=`${c}-item-group`;return T.createElement("li",Cc({ref:e,role:"presentation"},l,{onClick:f=>f.stopPropagation(),className:Ct(m,t)}),T.createElement("div",{role:"presentation",className:Ct(`${m}-title`,u?.listTitle),style:d?.listTitle,title:typeof n=="string"?n:void 0},n),T.createElement("ul",{role:"group",className:Ct(`${m}-list`,u?.list),style:d?.list},o))}),zv=T.forwardRef((r,e)=>{const{eventKey:t,children:n}=r,i=ol(t),o=Kh(n,i);return eu()?o:T.createElement(M1,Cc({ref:e},Ki(r,["warnKey"])),o)});function qs(){return qs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},qs.apply(this,arguments)}function zf(r,e,t){const{item:n,group:i,submenu:o,divider:l}=e;return(r||[]).map((c,u)=>{if(c&&typeof c=="object"){const{label:d,children:m,key:f,type:h,extra:g,...p}=c,E=f??`tmp-${u}`;return m||h==="group"?h==="group"?T.createElement(i,qs({key:E},p,{title:d}),zf(m,e,t)):T.createElement(o,qs({key:E},p,{title:d}),zf(m,e,t)):h==="divider"?T.createElement(l,qs({key:E},p)):T.createElement(n,qs({key:E},p,{extra:g}),d,(!!g||g===0)&&T.createElement("span",{className:`${t}-item-extra`},g))}return null}).filter(c=>c)}function tb(r,e,t,n,i){let o=r;const l={divider:Fv,item:tu,group:zv,submenu:Yh,...n};return e&&(o=zf(e,l,i)),Kh(o,t)}function Uf(){return Uf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Uf.apply(this,arguments)}const Qa=[],O1=T.forwardRef((r,e)=>{const{prefixCls:t="rc-menu",rootClassName:n,style:i,className:o,styles:l,classNames:c,tabIndex:u=0,items:d,children:m,direction:f,id:h,mode:g="vertical",inlineCollapsed:p,disabled:E,disabledOverflow:S,subMenuOpenDelay:A=.1,subMenuCloseDelay:x=.1,forceSubMenuRender:k,defaultOpenKeys:U,openKeys:Y,activeKey:Q,defaultActiveFirst:L,selectable:O=!0,multiple:G=!1,defaultSelectedKeys:te,selectedKeys:ge,onSelect:Me,onDeselect:he,inlineIndent:De=24,motion:_e,defaultMotions:ke,triggerSubMenuAction:Oe="hover",builtinPlacements:He,itemIcon:Pe,expandIcon:Ge,overflowedIndicator:qe="...",overflowedIndicatorPopupClassName:Ze,getPopupContainer:ct,onClick:mt,onOpenChange:xe,onKeyDown:Ie,openAnimation:Ke,openTransitionName:H,_internalRenderMenuItem:V,_internalRenderSubMenuItem:C,_internalComponents:F,popupRender:oe,...Z}=r,[Be,Xe]=T.useMemo(()=>[tb(m,d,Qa,F,t),tb(m,d,Qa,{},t)],[m,d,F]),[$e,Ve]=T.useState(!1),je=T.useRef(),Qe=Yc(h?`rc-menu-uuid-${h}`:"rc-menu-uuid"),dt=f==="rtl",[it,rt]=ki(U,Y),Ot=it||Qa,pt=(ve,Gn=!1)=>{function rr(){rt(ve),xe?.(ve)}Gn?Zs.flushSync(rr):rr()},[kt,wt]=T.useState(Ot),fn=T.useRef(!1),[Tn,Fn]=T.useMemo(()=>(g==="inline"||g==="vertical")&&p?["vertical",p]:[g,!1],[g,p]),In=Tn==="inline",[dn,pn]=T.useState(Tn),[Pt,At]=T.useState(Fn);T.useEffect(()=>{pn(Tn),At(Fn),fn.current&&(In?rt(kt):pt(Qa))},[Tn,Fn]);const[tt,ht]=T.useState(0),Ut=tt>=Be.length-1||dn!=="horizontal"||S;T.useEffect(()=>{In&&wt(Ot)},[Ot]),T.useEffect(()=>(fn.current=!0,()=>{fn.current=!1}),[]);const{registerPath:Lt,unregisterPath:qt,refreshOverflowKeys:en,isSubPathKey:Rt,getKeyPath:Ft,getKeys:Wt,getSubPathKeys:Jt}=_1(),yt=T.useMemo(()=>({registerPath:Lt,unregisterPath:qt}),[Lt,qt]),Zt=T.useMemo(()=>({isSubPathKey:Rt}),[Rt]);T.useEffect(()=>{en(Ut?Qa:Be.slice(tt+1).map(ve=>ve.key))},[tt,Ut]);const[un,jt]=ki(Q||L&&Be[0]?.key,Q),on=xo(ve=>{jt(ve)}),cn=xo(()=>{jt(void 0)});T.useImperativeHandle(e,()=>({list:je.current,focus:ve=>{const Gn=Wt(),{elements:rr,key2element:Tr,element2key:vr}=Ac(Gn,Qe),Qr=Hh(je.current,rr);let Sr;un&&Gn.includes(un)?Sr=un:Sr=Qr[0]?vr.get(Qr[0]):Be.find(Ta=>!Ta.props.disabled)?.key;const Mi=Tr.get(Sr);Sr&&Mi&&Mi?.focus?.(ve)},findItem:({key:ve})=>{const Gn=Wt(),{key2element:rr}=Ac(Gn,Qe);return rr.get(ve)||null}}));const[Tt,ut]=ki(te||[],ge),et=T.useMemo(()=>Array.isArray(Tt)?Tt:Tt==null?Qa:[Tt],[Tt]),Gt=ve=>{if(O){const{key:Gn}=ve,rr=et.includes(Gn);let Tr;G?rr?Tr=et.filter(Qr=>Qr!==Gn):Tr=[...et,Gn]:Tr=[Gn],ut(Tr);const vr={...ve,selectedKeys:Tr};rr?he?.(vr):Me?.(vr)}!G&&Ot.length&&dn!=="inline"&&pt(Qa)},nn=xo(ve=>{mt?.(Rc(ve)),Gt(ve)}),bn=xo((ve,Gn)=>{let rr=Ot.filter(Tr=>Tr!==ve);if(Gn)rr.push(ve);else if(dn!=="inline"){const Tr=Jt(ve);rr=rr.filter(vr=>!Tr.has(vr))}pc(Ot,rr,!0)||pt(rr,!0)}),Hn=T1(dn,un,dt,Qe,je,Wt,Ft,jt,(ve,Gn)=>{const rr=Gn??!Ot.includes(ve);bn(ve,rr)},Ie);T.useEffect(()=>{Ve(!0)},[]);const lr=T.useMemo(()=>({_internalRenderMenuItem:V,_internalRenderSubMenuItem:C}),[V,C]),tr=dn!=="horizontal"||S?Be:Be.map((ve,Gn)=>T.createElement($o,{key:ve.key,overflowDisabled:Gn>tt,classNames:c,styles:l},ve)),sr=T.createElement(za,Uf({id:h,ref:je,prefixCls:`${t}-overflow`,component:"ul",itemComponent:tu,className:Ct(t,`${t}-root`,`${t}-${dn}`,o,{[`${t}-inline-collapsed`]:Pt,[`${t}-rtl`]:dt},n),dir:f,style:i,role:"menu",tabIndex:u,data:tr,renderRawItem:ve=>ve,renderRawRest:ve=>{const Gn=ve.length,rr=Gn?Be.slice(-Gn):null;return T.createElement(Yh,{eventKey:Mf,title:qe,disabled:Ut,internalPopupClose:Gn===0,popupClassName:Ze},rr)},maxCount:dn!=="horizontal"||S?za.INVALIDATE:za.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:ve=>{ht(ve)},onKeyDown:Hn},Z));return T.createElement(Gh.Provider,{value:lr},T.createElement(xv.Provider,{value:Qe},T.createElement($o,{prefixCls:t,rootClassName:n,classNames:c,styles:l,mode:dn,openKeys:Ot,rtl:dt,disabled:E,motion:$e?_e:null,defaultMotions:$e?ke:null,activeKey:un,onActive:on,onInactive:cn,selectedKeys:et,inlineIndent:De,subMenuOpenDelay:A,subMenuCloseDelay:x,forceSubMenuRender:k,builtinPlacements:He,triggerSubMenuAction:Oe,getPopupContainer:ct,itemIcon:Pe,expandIcon:Ge,onItemClick:nn,onOpenChange:bn,popupRender:oe},T.createElement(kv.Provider,{value:Zt},sr),T.createElement("div",{style:{display:"none"},"aria-hidden":!0},T.createElement(Rv.Provider,{value:yt},Xe)))))}),ll=O1;ll.Item=tu;ll.SubMenu=Yh;ll.ItemGroup=zv;ll.Divider=Fv;var F1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};function Bf(){return Bf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Bf.apply(this,arguments)}const z1=(r,e)=>T.createElement(Dr,Bf({},r,{ref:e,icon:F1})),U1=T.forwardRef(z1);function Wh(r){return Nr(r,{inputAffixPadding:r.paddingXXS})}const Xh=r=>{const{controlHeight:e,fontSize:t,lineHeight:n,lineWidth:i,controlHeightSM:o,controlHeightLG:l,fontSizeLG:c,lineHeightLG:u,paddingSM:d,controlPaddingHorizontalSM:m,controlPaddingHorizontal:f,colorFillAlter:h,colorPrimaryHover:g,colorPrimary:p,controlOutlineWidth:E,controlOutline:S,colorErrorOutline:A,colorWarningOutline:x,colorBgContainer:k,inputFontSize:U,inputFontSizeLG:Y,inputFontSizeSM:Q}=r,L=U||t,O=Q||L,G=Y||c,te=Math.round((e-L*n)/2*10)/10-i,ge=Math.round((o-O*n)/2*10)/10-i,Me=Math.ceil((l-G*u)/2*10)/10-i;return{paddingBlock:Math.max(te,0),paddingBlockSM:Math.max(ge,0),paddingBlockLG:Math.max(Me,0),paddingInline:d-i,paddingInlineSM:m-i,paddingInlineLG:f-i,addonBg:h,activeBorderColor:p,hoverBorderColor:g,activeShadow:`0 0 0 ${E}px ${S}`,errorActiveShadow:`0 0 0 ${E}px ${A}`,warningActiveShadow:`0 0 0 ${E}px ${x}`,hoverBg:k,activeBg:k,inputFontSize:L,inputFontSizeLG:G,inputFontSizeSM:O}},B1=r=>({borderColor:r.hoverBorderColor,backgroundColor:r.hoverBg}),Qh=r=>({color:r.colorTextDisabled,backgroundColor:r.colorBgContainerDisabled,borderColor:r.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":{...B1(Nr(r,{hoverBorderColor:r.colorBorder,hoverBg:r.colorBgContainerDisabled}))}}),Uv=(r,e)=>({background:r.colorBgContainer,borderWidth:r.lineWidth,borderStyle:r.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:r.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:r.activeBg}}),nb=(r,e)=>({[`&${r.componentCls}-status-${e.status}:not(${r.componentCls}-disabled)`]:{...Uv(r,e),[`${r.componentCls}-prefix, ${r.componentCls}-suffix`]:{color:e.affixColor}},[`&${r.componentCls}-status-${e.status}${r.componentCls}-disabled`]:{borderColor:e.borderColor}}),$1=(r,e)=>({"&-outlined":{...Uv(r,{borderColor:r.colorBorder,hoverBorderColor:r.hoverBorderColor,activeBorderColor:r.activeBorderColor,activeShadow:r.activeShadow}),[`&${r.componentCls}-disabled, &[disabled]`]:{...Qh(r)},...nb(r,{status:"error",borderColor:r.colorError,hoverBorderColor:r.colorErrorBorderHover,activeBorderColor:r.colorError,activeShadow:r.errorActiveShadow,affixColor:r.colorError}),...nb(r,{status:"warning",borderColor:r.colorWarning,hoverBorderColor:r.colorWarningBorderHover,activeBorderColor:r.colorWarning,activeShadow:r.warningActiveShadow,affixColor:r.colorWarning}),...e}}),rb=(r,e)=>({[`&${r.componentCls}-group-wrapper-status-${e.status}`]:{[`${r.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),j1=r=>({"&-outlined":{[`${r.componentCls}-group`]:{"&-addon":{background:r.addonBg,border:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},...rb(r,{status:"error",addonBorderColor:r.colorError,addonColor:r.colorErrorText}),...rb(r,{status:"warning",addonBorderColor:r.colorWarning,addonColor:r.colorWarningText}),[`&${r.componentCls}-group-wrapper-disabled`]:{[`${r.componentCls}-group-addon`]:{...Qh(r)}}}}),q1=(r,e)=>{const{componentCls:t}=r;return{"&-borderless":{background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${t}-disabled, &[disabled]`]:{color:r.colorTextDisabled,cursor:"not-allowed"},[`&${t}-status-error`]:{"&, & input, & textarea":{color:r.colorError}},[`&${t}-status-warning`]:{"&, & input, & textarea":{color:r.colorWarning}},...e}}},Bv=(r,e)=>({background:e.bg,borderWidth:r.lineWidth,borderStyle:r.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:e?.inputColor??"unset"},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:r.activeBg}}),ib=(r,e)=>({[`&${r.componentCls}-status-${e.status}:not(${r.componentCls}-disabled)`]:{...Bv(r,e),[`${r.componentCls}-prefix, ${r.componentCls}-suffix`]:{color:e.affixColor}}}),G1=(r,e)=>({"&-filled":{...Bv(r,{bg:r.colorFillTertiary,hoverBg:r.colorFillSecondary,activeBorderColor:r.activeBorderColor,inputColor:r.colorText}),[`&${r.componentCls}-disabled, &[disabled]`]:{...Qh(r)},...ib(r,{status:"error",bg:r.colorErrorBg,hoverBg:r.colorErrorBgHover,activeBorderColor:r.colorError,inputColor:r.colorErrorText,affixColor:r.colorError}),...ib(r,{status:"warning",bg:r.colorWarningBg,hoverBg:r.colorWarningBgHover,activeBorderColor:r.colorWarning,inputColor:r.colorWarningText,affixColor:r.colorWarning}),...e}}),ab=(r,e)=>({[`&${r.componentCls}-group-wrapper-status-${e.status}`]:{[`${r.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),H1=r=>({"&-filled":{[`${r.componentCls}-group-addon`]:{background:r.colorFillTertiary,"&:last-child":{position:"static"}},...ab(r,{status:"error",addonBg:r.colorErrorBg,addonColor:r.colorErrorText}),...ab(r,{status:"warning",addonBg:r.colorWarningBg,addonColor:r.colorWarningText}),[`&${r.componentCls}-group-wrapper-disabled`]:{[`${r.componentCls}-group`]:{"&-addon":{background:r.colorFillTertiary,color:r.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`,borderTop:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`,borderBottom:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`,borderTop:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`,borderBottom:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`}}}}}),$v=(r,e)=>({background:r.colorBgContainer,borderWidth:`${an(r.lineWidth)} 0`,borderStyle:`${r.lineType} none`,borderColor:`transparent transparent ${e.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${e.hoverBorderColor} transparent`,backgroundColor:r.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${e.activeBorderColor} transparent`,outline:0,backgroundColor:r.activeBg}}),sb=(r,e)=>({[`&${r.componentCls}-status-${e.status}:not(${r.componentCls}-disabled)`]:{...$v(r,e),[`${r.componentCls}-prefix, ${r.componentCls}-suffix`]:{color:e.affixColor}},[`&${r.componentCls}-status-${e.status}${r.componentCls}-disabled`]:{borderColor:`transparent transparent ${e.borderColor} transparent`}}),V1=(r,e)=>({"&-underlined":{...$v(r,{borderColor:r.colorBorder,hoverBorderColor:r.hoverBorderColor,activeBorderColor:r.activeBorderColor,activeShadow:r.activeShadow}),[`&${r.componentCls}-disabled, &[disabled]`]:{color:r.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${r.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"},...sb(r,{status:"error",borderColor:r.colorError,hoverBorderColor:r.colorErrorBorderHover,activeBorderColor:r.colorError,activeShadow:r.errorActiveShadow,affixColor:r.colorError}),...sb(r,{status:"warning",borderColor:r.colorWarning,hoverBorderColor:r.colorWarningBorderHover,activeBorderColor:r.colorWarning,activeShadow:r.warningActiveShadow,affixColor:r.colorWarning}),...e}}),K1=r=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:r,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),jv=r=>{const{paddingBlockLG:e,lineHeightLG:t,borderRadiusLG:n,paddingInlineLG:i}=r;return{padding:`${an(e)} ${an(i)}`,fontSize:r.inputFontSizeLG,lineHeight:t,borderRadius:n}},qv=r=>({padding:`${an(r.paddingBlockSM)} ${an(r.paddingInlineSM)}`,fontSize:r.inputFontSizeSM,borderRadius:r.borderRadiusSM}),Gv=(r,e={})=>({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${an(r.paddingBlock)} ${an(r.paddingInline)}`,color:r.colorText,fontSize:r.inputFontSize,lineHeight:r.lineHeight,borderRadius:r.borderRadius,transition:`all ${r.motionDurationMid}`,...K1(r.colorTextPlaceholder),"&-lg":{...jv(r),...e.largeStyle},"&-sm":{...qv(r),...e.smallStyle},"&-rtl, &-textarea-rtl":{direction:"rtl"}}),Y1=r=>{const{componentCls:e,antCls:t}=r;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:r.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:{...jv(r)},[`&-sm ${e}, &-sm > ${e}-group-addon`]:{...qv(r)},[`&-lg ${t}-select-single`]:{height:r.controlHeightLG},[`&-sm ${t}-select-single`]:{height:r.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${an(r.paddingInline)}`,color:r.colorText,fontWeight:"normal",fontSize:r.inputFontSize,textAlign:"center",borderRadius:r.borderRadius,transition:`all ${r.motionDurationSlow}`,lineHeight:1,[`${t}-select`]:{margin:`${an(r.calc(r.paddingBlock).add(1).mul(-1).equal())} ${an(r.calc(r.paddingInline).mul(-1).equal())}`,[`&${t}-select-single:not(${t}-select-customize-input):not(${t}-pagination-size-changer)`]:{backgroundColor:"inherit",border:`${an(r.lineWidth)} ${r.lineType} transparent`,boxShadow:"none"}},[`${t}-cascader-picker`]:{margin:`-9px ${an(r.calc(r.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${t}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-select`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${t}-select`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0},"&:not(:first-child)":{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:{display:"block",...no(),[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:r.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${t}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:r.calc(r.lineWidth).mul(-1).equal(),borderInlineEndWidth:r.lineWidth},[e]:{float:"none"},[`& > ${t}-select,
      & > ${t}-select-auto-complete ${e},
      & > ${t}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:r.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${t}-select-focused`]:{zIndex:1},[`& > ${t}-select > ${t}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${t}-select:first-child,
      & > ${t}-select-auto-complete:first-child ${e},
      & > ${t}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:r.borderRadius,borderEndStartRadius:r.borderRadius},[`& > *:last-child,
      & > ${t}-select:last-child,
      & > ${t}-cascader-picker:last-child ${e},
      & > ${t}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:r.lineWidth,borderStartEndRadius:r.borderRadius,borderEndEndRadius:r.borderRadius},[`& > ${t}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:r.calc(r.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{}}}}},W1=r=>{const{componentCls:e,controlHeightSM:t,lineWidth:n,calc:i}=r,l=i(t).sub(i(n).mul(2)).sub(16).div(2).equal();return{[e]:{...la(r),...Gv(r),...$1(r),...G1(r),...q1(r),...V1(r),'&[type="color"]':{height:r.controlHeight,[`&${e}-lg`]:{height:r.controlHeightLG},[`&${e}-sm`]:{height:t,paddingTop:l,paddingBottom:l}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{appearance:"none"}}}},X1=r=>{const{componentCls:e}=r;return{[`${e}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:r.colorTextQuaternary,fontSize:r.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${r.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:r.colorIcon},"&:active":{color:r.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${an(r.inputAffixPadding)}`}}}},Q1=r=>{const{componentCls:e,inputAffixPadding:t,colorTextDescription:n,motionDurationSlow:i,colorIcon:o,colorIconHover:l,iconCls:c}=r,u=`${e}-affix-wrapper`,d=`${e}-affix-wrapper-disabled`;return{[u]:{...Gv(r),display:"inline-flex","&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:r.paddingXS}},"&-show-count-suffix":{color:n,direction:"ltr"},"&-show-count-has-suffix":{marginInlineEnd:r.paddingXXS},"&-prefix":{marginInlineEnd:t},"&-suffix":{marginInlineStart:t}},...X1(r),[`${c}${e}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${i}`,"&:hover":{color:l}}},[`${e}-underlined`]:{borderRadius:0},[d]:{[`${c}${e}-password-icon`]:{color:o,cursor:"not-allowed","&:hover":{color:o}}}}},Z1=r=>{const{componentCls:e,borderRadiusLG:t,borderRadiusSM:n}=r;return{[`${e}-group`]:{...la(r),...Y1(r),"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:t,fontSize:r.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:n}},...j1(r),...H1(r),[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}}},J1=r=>{const{componentCls:e}=r;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:r.colorError}}}},eL=ai(["Input","Shared"],r=>{const e=Nr(r,Wh(r));return[W1(e),Q1(e)]},Xh,{resetFont:!1});ai(["Input","Component"],r=>{const e=Nr(r,Wh(r));return[Z1(e),J1(e),cv(e,{focus:!0,focusElCls:`${e.componentCls}-affix-wrapper-focused`})]},Xh,{resetFont:!1});var tL={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};function $f(){return $f=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},$f.apply(this,arguments)}const nL=(r,e)=>T.createElement(Dr,$f({},r,{ref:e,icon:tL})),rL=T.forwardRef(nL);var vo={exports:{}},ob;function iL(){if(ob)return vo.exports;ob=1,vo.exports=n,vo.exports.isMobile=n,vo.exports.default=n;const r=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|redmi|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,t=/android|ipad|playbook|silk/i;function n(i){i||(i={});let o=i.ua;if(!o&&typeof navigator<"u"&&(o=navigator.userAgent),o&&o.headers&&typeof o.headers["user-agent"]=="string"&&(o=o.headers["user-agent"]),typeof o!="string")return!1;let l=r.test(o)&&!e.test(o)||!!i.tablet&&t.test(o);return!l&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&o.indexOf("Macintosh")!==-1&&o.indexOf("Safari")!==-1&&(l=!0),l}return vo.exports}var aL=iL();const sL=xE(aL);let ad;const oL=(()=>(typeof ad>"u"&&(ad=sL()),ad)),Zh=T.createContext(null),lL=r=>{const{activeTabOffset:e,horizontal:t,rtl:n,indicator:i={}}=r,{size:o,align:l="center"}=i,[c,u]=T.useState(),d=T.useRef(),m=Je.useCallback(h=>typeof o=="function"?o(h):typeof o=="number"?o:h,[o]);function f(){Yr.cancel(d.current)}return T.useEffect(()=>{const h={};if(e)if(t){h.width=m(e.width);const g=n?"right":"left";l==="start"&&(h[g]=e[g]),l==="center"&&(h[g]=e[g]+e.width/2,h.transform=n?"translateX(50%)":"translateX(-50%)"),l==="end"&&(h[g]=e[g]+e.width,h.transform="translateX(-100%)")}else h.height=m(e.height),l==="start"&&(h.top=e.top),l==="center"&&(h.top=e.top+e.height/2,h.transform="translateY(-50%)"),l==="end"&&(h.top=e.top+e.height,h.transform="translateY(-100%)");return f(),d.current=Yr(()=>{c&&h&&Object.keys(h).every(p=>{const E=h[p],S=c[p];return typeof E=="number"&&typeof S=="number"?Math.round(E)===Math.round(S):E===S})||u(h)}),f},[JSON.stringify(e),t,n,l,m]),{style:c}},lb={width:0,height:0,left:0,top:0};function cL(r,e,t){return T.useMemo(()=>{const n=new Map,i=e.get(r[0]?.key)||lb,o=i.left+i.width;for(let l=0;l<r.length;l+=1){const{key:c}=r[l];let u=e.get(c);u||(u=e.get(r[l-1]?.key)||lb);const d=n.get(c)||{...u};d.right=o-d.left-d.width,n.set(c,d)}return n},[r.map(n=>n.key).join("_"),e,t])}function cb(r,e){const t=T.useRef(r),[,n]=T.useState({});function i(o){const l=typeof o=="function"?o(t.current):o;l!==t.current&&e(l,t.current),t.current=l,n({})}return[t.current,i]}const uL=.1,ub=.01,ic=20,db=.995**ic;function dL(r,e){const[t,n]=T.useState(),[i,o]=T.useState(0),[l,c]=T.useState(0),[u,d]=T.useState(),m=T.useRef();function f(A){const{screenX:x,screenY:k}=A.touches[0];n({x,y:k}),window.clearInterval(m.current)}function h(A){if(!t)return;const{screenX:x,screenY:k}=A.touches[0];n({x,y:k});const U=x-t.x,Y=k-t.y;e(U,Y);const Q=Date.now();o(Q),c(Q-i),d({x:U,y:Y})}function g(){if(t&&(n(null),d(null),u)){const A=u.x/l,x=u.y/l,k=Math.abs(A),U=Math.abs(x);if(Math.max(k,U)<uL)return;let Y=A,Q=x;m.current=window.setInterval(()=>{if(Math.abs(Y)<ub&&Math.abs(Q)<ub){window.clearInterval(m.current);return}Y*=db,Q*=db,e(Y*ic,Q*ic)},ic)}}const p=T.useRef();function E(A){const{deltaX:x,deltaY:k}=A;let U=0;const Y=Math.abs(x),Q=Math.abs(k);Y===Q?U=p.current==="x"?x:k:Y>Q?(U=x,p.current="x"):(U=k,p.current="y"),e(-U,-U)&&A.preventDefault()}const S=T.useRef(null);S.current={onTouchStart:f,onTouchMove:h,onTouchEnd:g,onWheel:E},T.useEffect(()=>{function A(Y){S.current.onTouchStart(Y)}function x(Y){S.current.onTouchMove(Y)}function k(Y){S.current.onTouchEnd(Y)}function U(Y){S.current.onWheel(Y)}return document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",k,{passive:!0}),r.current.addEventListener("touchstart",A,{passive:!0}),r.current.addEventListener("wheel",U,{passive:!1}),()=>{document.removeEventListener("touchmove",x),document.removeEventListener("touchend",k)}},[])}function Hv(r){const[e,t]=T.useState(0),n=T.useRef(0),i=T.useRef();return i.current=r,SI(()=>{i.current?.()},[e]),()=>{n.current===e&&(n.current+=1,t(n.current))}}function fL(r){const e=T.useRef([]),[,t]=T.useState({}),n=T.useRef(typeof r=="function"?r():r),i=Hv(()=>{let l=n.current;e.current.forEach(c=>{l=c(l)}),e.current=[],n.current=l,t({})});function o(l){e.current.push(l),i()}return[n.current,o]}const fb={width:0,height:0,left:0,top:0,right:0};function hL(r,e,t,n,i,o,{tabs:l,tabPosition:c,rtl:u}){let d,m,f;return["top","bottom"].includes(c)?(d="width",m=u?"right":"left",f=Math.abs(t)):(d="height",m="top",f=-t),T.useMemo(()=>{if(!l.length)return[0,0];const h=l.length;let g=h;for(let E=0;E<h;E+=1){const S=r.get(l[E].key)||fb;if(Math.floor(S[m]+S[d])>Math.floor(f+e)){g=E-1;break}}let p=0;for(let E=h-1;E>=0;E-=1)if((r.get(l[E].key)||fb)[m]<f){p=E+1;break}return p>g?[0,-1]:[p,g]},[r,e,n,i,o,f,c,l.map(h=>h.key).join("_"),u])}function hb(r){let e;return r instanceof Map?(e={},r.forEach((t,n)=>{e[n]=t})):e=r,JSON.stringify(e)}const mL="TABS_DQ";function Vv(r){return String(r).replace(/"/g,mL)}function Jh(r,e,t,n){return!(!t||n||r===!1||r===void 0&&(e===!1||e===null))}const Kv=T.forwardRef((r,e)=>{const{prefixCls:t,editable:n,locale:i,style:o}=r;return!n||n.showAdd===!1?null:T.createElement("button",{ref:e,type:"button",className:`${t}-nav-add`,style:o,"aria-label":i?.addAriaLabel||"Add tab",onClick:l=>{n.onEdit("add",{event:l})}},n.addIcon||"+")}),mb=T.forwardRef((r,e)=>{const{position:t,prefixCls:n,extra:i}=r;if(!i)return null;let o,l={};return typeof i=="object"&&!T.isValidElement(i)?l=i:l.right=i,t==="right"&&(o=l.right),t==="left"&&(o=l.left),o?T.createElement("div",{className:`${n}-extra-content`,ref:e},o):null});function jf(){return jf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},jf.apply(this,arguments)}const gL=T.forwardRef((r,e)=>{const{prefixCls:t,id:n,tabs:i,locale:o,mobile:l,more:c={},style:u,className:d,editable:m,tabBarGutter:f,rtl:h,removeAriaLabel:g,onTabClick:p,getPopupContainer:E,popupClassName:S,popupStyle:A}=r,[x,k]=T.useState(!1),[U,Y]=T.useState(null),{icon:Q="More"}=c,L=`${n}-more-popup`,O=`${t}-dropdown`,G=U!==null?`${L}-${U}`:null,te=o?.dropdownAriaLabel;function ge(He,Pe){He.preventDefault(),He.stopPropagation(),m.onEdit("remove",{key:Pe,event:He})}const Me=T.createElement(ll,{onClick:({key:He,domEvent:Pe})=>{p(He,Pe),k(!1)},prefixCls:`${O}-menu`,id:L,tabIndex:-1,role:"listbox","aria-activedescendant":G,selectedKeys:[U],"aria-label":te!==void 0?te:"expanded dropdown"},i.map(He=>{const{closable:Pe,disabled:Ge,closeIcon:qe,key:Ze,label:ct}=He,mt=Jh(Pe,qe,m,Ge);return T.createElement(tu,{key:Ze,id:`${L}-${Ze}`,role:"option","aria-controls":n&&`${n}-panel-${Ze}`,disabled:Ge},T.createElement("span",null,ct),mt&&T.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:`${O}-menu-item-remove`,onClick:xe=>{xe.stopPropagation(),ge(xe,Ze)}},qe||m.removeIcon||""))}));function he(He){const Pe=i.filter(Ze=>!Ze.disabled);let Ge=Pe.findIndex(Ze=>Ze.key===U)||0;const qe=Pe.length;for(let Ze=0;Ze<qe;Ze+=1){Ge=(Ge+He+qe)%qe;const ct=Pe[Ge];if(!ct.disabled){Y(ct.key);return}}}function De(He){const{which:Pe}=He;if(!x){[ri.DOWN,ri.SPACE,ri.ENTER].includes(Pe)&&(k(!0),He.preventDefault());return}switch(Pe){case ri.UP:he(-1),He.preventDefault();break;case ri.DOWN:he(1),He.preventDefault();break;case ri.ESC:k(!1);break;case ri.SPACE:case ri.ENTER:U!==null&&p(U,He);break}}T.useEffect(()=>{const He=document.getElementById(G);He?.scrollIntoView&&He.scrollIntoView(!1)},[G,U]),T.useEffect(()=>{x||Y(null)},[x]);const _e={marginInlineStart:f};i.length||(_e.visibility="hidden",_e.order=1);const ke=Ct(S,{[`${O}-rtl`]:h}),Oe=l?null:T.createElement(g1,jf({prefixCls:O,overlay:Me,visible:i.length?x:!1,onVisibleChange:k,overlayClassName:ke,overlayStyle:A,mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:E},c),T.createElement("button",{type:"button",className:`${t}-nav-more`,style:_e,"aria-haspopup":"listbox","aria-controls":L,id:`${n}-more`,"aria-expanded":x,onKeyDown:De},Q));return T.createElement("div",{className:Ct(`${t}-nav-operations`,d),style:u,ref:e},Oe,T.createElement(Kv,{prefixCls:t,locale:o,editable:m}))}),pL=T.memo(gL,(r,e)=>e.tabMoving),yL=r=>{const{prefixCls:e,id:t,active:n,focus:i,tab:{key:o,label:l,disabled:c,closeIcon:u,icon:d},closable:m,renderWrapper:f,removeAriaLabel:h,editable:g,onClick:p,onFocus:E,onBlur:S,onKeyDown:A,onMouseDown:x,onMouseUp:k,style:U,className:Y,tabCount:Q,currentPosition:L}=r,O=`${e}-tab`,G=Jh(m,u,g,c);function te(_e){c||p(_e)}function ge(_e){_e.preventDefault(),_e.stopPropagation(),g.onEdit("remove",{key:o,event:_e})}const Me=T.useMemo(()=>d&&typeof l=="string"?T.createElement("span",null,l):l,[l,d]),he=T.useRef(null);T.useEffect(()=>{i&&he.current&&he.current.focus()},[i]);const De=T.createElement("div",{key:o,"data-node-key":Vv(o),className:Ct(O,Y,{[`${O}-with-remove`]:G,[`${O}-active`]:n,[`${O}-disabled`]:c,[`${O}-focus`]:i}),style:U,onClick:te},T.createElement("div",{ref:he,role:"tab","aria-selected":n,id:t&&`${t}-tab-${o}`,className:`${O}-btn`,"aria-controls":t&&`${t}-panel-${o}`,"aria-disabled":c,tabIndex:c?null:n?0:-1,onClick:_e=>{_e.stopPropagation(),te(_e)},onKeyDown:A,onMouseDown:x,onMouseUp:k,onFocus:E,onBlur:S},i&&T.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},`Tab ${L} of ${Q}`),d&&T.createElement("span",{className:`${O}-icon`},d),l&&Me),G&&T.createElement("button",{type:"button","aria-label":h||"remove",tabIndex:n?0:-1,className:`${O}-remove`,onClick:_e=>{_e.stopPropagation(),ge(_e)}},u||g.removeIcon||""));return f?f(De):De};function qf(){return qf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},qf.apply(this,arguments)}const bL=(r,e)=>{const{offsetWidth:t,offsetHeight:n,offsetTop:i,offsetLeft:o}=r,{width:l,height:c,left:u,top:d}=r.getBoundingClientRect();return Math.abs(l-t)<1?[l,c,u-e.left,d-e.top]:[t,n,o,i]},Ls=r=>{const{offsetWidth:e=0,offsetHeight:t=0}=r.current||{};if(r.current){const{width:n,height:i}=r.current.getBoundingClientRect();if(Math.abs(n-e)<1)return[n,i]}return[e,t]},Ol=(r,e)=>r[e?0:1],gb=T.forwardRef((r,e)=>{const{className:t,style:n,id:i,animated:o,activeKey:l,rtl:c,extra:u,editable:d,locale:m,tabPosition:f,tabBarGutter:h,children:g,onTabClick:p,onTabScroll:E,indicator:S,classNames:A,styles:x}=r,{prefixCls:k,tabs:U}=T.useContext(Zh),Y=T.useRef(null),Q=T.useRef(null),L=T.useRef(null),O=T.useRef(null),G=T.useRef(null),te=T.useRef(null),ge=T.useRef(null),Me=f==="top"||f==="bottom",[he,De]=cb(0,(cn,Tt)=>{Me&&E&&E({direction:cn>Tt?"left":"right"})}),[_e,ke]=cb(0,(cn,Tt)=>{!Me&&E&&E({direction:cn>Tt?"top":"bottom"})}),[Oe,He]=T.useState([0,0]),[Pe,Ge]=T.useState([0,0]),[qe,Ze]=T.useState([0,0]),[ct,mt]=T.useState([0,0]),[xe,Ie]=fL(new Map),Ke=cL(U,xe,Pe[0]),H=Ol(Oe,Me),V=Ol(Pe,Me),C=Ol(qe,Me),F=Ol(ct,Me),oe=Math.floor(H)<Math.floor(V+C),Z=oe?H-F:H-C,Be=`${k}-nav-operations-hidden`;let Xe=0,$e=0;Me&&c?(Xe=0,$e=Math.max(0,V-Z)):(Xe=Math.min(0,Z-V),$e=0);function Ve(cn){return cn<Xe?Xe:cn>$e?$e:cn}const je=T.useRef(null),[Qe,dt]=T.useState();function it(){dt(Date.now())}function rt(){je.current&&clearTimeout(je.current)}dL(O,(cn,Tt)=>{function ut(et,Gt){et(nn=>Ve(nn+Gt))}return oe?(Me?ut(De,cn):ut(ke,Tt),rt(),it(),!0):!1}),T.useEffect(()=>(rt(),Qe&&(je.current=setTimeout(()=>{dt(0)},100)),rt),[Qe]);const[Ot,pt]=hL(Ke,Z,Me?he:_e,V,C,F,{...r,tabs:U}),kt=hi((cn=l)=>{const Tt=Ke.get(cn)||{width:0,height:0,left:0,right:0,top:0};if(Me){let ut=he;c?Tt.right<he?ut=Tt.right:Tt.right+Tt.width>he+Z&&(ut=Tt.right+Tt.width-Z):Tt.left<-he?ut=-Tt.left:Tt.left+Tt.width>-he+Z&&(ut=-(Tt.left+Tt.width-Z)),ke(0),De(Ve(ut))}else{let ut=_e;Tt.top<-_e?ut=-Tt.top:Tt.top+Tt.height>-_e+Z&&(ut=-(Tt.top+Tt.height-Z)),De(0),ke(Ve(ut))}}),[wt,fn]=T.useState(),[Tn,Fn]=T.useState(!1),In=U.filter(cn=>!cn.disabled).map(cn=>cn.key),dn=cn=>{const Tt=In.indexOf(wt||l),ut=In.length,et=(Tt+cn+ut)%ut,Gt=In[et];fn(Gt)},pn=(cn,Tt)=>{const ut=In.indexOf(cn),et=U.find(nn=>nn.key===cn);Jh(et?.closable,et?.closeIcon,d,et?.disabled)&&(Tt.preventDefault(),Tt.stopPropagation(),d.onEdit("remove",{key:cn,event:Tt}),ut===In.length-1?dn(-1):dn(1))},Pt=(cn,Tt)=>{Fn(!0),Tt.button===1&&pn(cn,Tt)},At=cn=>{const{code:Tt}=cn,ut=c&&Me,et=In[0],Gt=In[In.length-1];switch(Tt){case"ArrowLeft":{Me&&dn(ut?1:-1);break}case"ArrowRight":{Me&&dn(ut?-1:1);break}case"ArrowUp":{cn.preventDefault(),Me||dn(-1);break}case"ArrowDown":{cn.preventDefault(),Me||dn(1);break}case"Home":{cn.preventDefault(),fn(et);break}case"End":{cn.preventDefault(),fn(Gt);break}case"Enter":case"Space":{cn.preventDefault(),p(wt??l,cn);break}case"Backspace":case"Delete":{pn(wt,cn);break}}},tt={};Me?tt.marginInlineStart=h:tt.marginTop=h;const ht=U.map((cn,Tt)=>{const{key:ut}=cn;return T.createElement(yL,{id:i,prefixCls:k,key:ut,tab:cn,className:A?.item,style:Tt===0?x?.item:{...tt,...x?.item},closable:cn.closable,editable:d,active:ut===l,focus:ut===wt,renderWrapper:g,removeAriaLabel:m?.removeAriaLabel,tabCount:In.length,currentPosition:Tt+1,onClick:et=>{p(ut,et)},onKeyDown:At,onFocus:()=>{Tn||fn(ut),kt(ut),it(),O.current&&(c||(O.current.scrollLeft=0),O.current.scrollTop=0)},onBlur:()=>{fn(void 0)},onMouseDown:et=>Pt(ut,et),onMouseUp:()=>{Fn(!1)}})}),Ut=()=>Ie(()=>{const cn=new Map,Tt=G.current?.getBoundingClientRect();return U.forEach(({key:ut})=>{const et=G.current?.querySelector(`[data-node-key="${Vv(ut)}"]`);if(et){const[Gt,nn,bn,$n]=bL(et,Tt);cn.set(ut,{width:Gt,height:nn,left:bn,top:$n})}}),cn});T.useEffect(()=>{Ut()},[U.map(cn=>cn.key).join("_")]);const Lt=Hv(()=>{const cn=Ls(Y),Tt=Ls(Q),ut=Ls(L);He([cn[0]-Tt[0]-ut[0],cn[1]-Tt[1]-ut[1]]);const et=Ls(ge);Ze(et);const Gt=Ls(te);mt(Gt);const nn=Ls(G);Ge([nn[0]-et[0],nn[1]-et[1]]),Ut()}),qt=U.slice(0,Ot),en=U.slice(pt+1),Rt=[...qt,...en],Ft=Ke.get(l),{style:Wt}=lL({activeTabOffset:Ft,horizontal:Me,indicator:S,rtl:c});T.useEffect(()=>{kt()},[l,Xe,$e,hb(Ft),hb(Ke),Me]),T.useEffect(()=>{Lt()},[c]);const Jt=!!Rt.length,yt=`${k}-nav-wrap`;let Zt,un,jt,on;return Me?c?(un=he>0,Zt=he!==$e):(Zt=he<0,un=he!==Xe):(jt=_e<0,on=_e!==Xe),T.createElement(is,{onResize:Lt},T.createElement("div",{ref:Wc(e,Y),role:"tablist","aria-orientation":Me?"horizontal":"vertical",className:Ct(`${k}-nav`,t,A?.header),style:{...x?.header,...n},onKeyDown:()=>{it()}},T.createElement(mb,{ref:Q,position:"left",extra:u,prefixCls:k}),T.createElement(is,{onResize:Lt},T.createElement("div",{className:Ct(yt,{[`${yt}-ping-left`]:Zt,[`${yt}-ping-right`]:un,[`${yt}-ping-top`]:jt,[`${yt}-ping-bottom`]:on}),ref:O},T.createElement(is,{onResize:Lt},T.createElement("div",{ref:G,className:`${k}-nav-list`,style:{transform:`translate(${he}px, ${_e}px)`,transition:Qe?"none":void 0}},ht,T.createElement(Kv,{ref:ge,prefixCls:k,locale:m,editable:d,style:{...ht.length===0?void 0:tt,visibility:Jt?"hidden":null}}),T.createElement("div",{className:Ct(`${k}-ink-bar`,A?.indicator,{[`${k}-ink-bar-animated`]:o.inkBar}),style:{...Wt,...x?.indicator}}))))),T.createElement(pL,qf({},r,{removeAriaLabel:m?.removeAriaLabel,ref:te,prefixCls:k,tabs:Rt,className:!Jt&&Be,popupStyle:x?.popup,tabMoving:!!Qe})),T.createElement(mb,{ref:L,position:"right",extra:u,prefixCls:k})))}),EL=({renderTabBar:r,...e})=>r?r(e,gb):T.createElement(gb,e),vL=T.forwardRef((r,e)=>{const{prefixCls:t,className:n,style:i,id:o,active:l,tabKey:c,children:u}=r,d=T.Children.count(u)>0;return T.createElement("div",{id:o&&`${o}-panel-${c}`,role:"tabpanel",tabIndex:l&&d?0:-1,"aria-labelledby":o&&`${o}-tab-${c}`,"aria-hidden":!l,style:i,className:Ct(t,l&&`${t}-active`,n),ref:e},u)});function kc(){return kc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},kc.apply(this,arguments)}const TL=r=>{const{id:e,activeKey:t,animated:n,tabPosition:i,destroyOnHidden:o,contentStyle:l,contentClassName:c}=r,{prefixCls:u,tabs:d}=T.useContext(Zh),m=n.tabPane,f=`${u}-tabpane`;return T.createElement("div",{className:Ct(`${u}-content-holder`)},T.createElement("div",{className:Ct(`${u}-content`,`${u}-content-${i}`,{[`${u}-content-animated`]:m})},d.map(h=>{const{key:g,forceRender:p,style:E,className:S,destroyOnHidden:A,...x}=h,k=g===t;return T.createElement(cs,kc({key:g,visible:k,forceRender:p,removeOnLeave:!!(o??A),leavedClassName:`${f}-hidden`},n.tabPaneMotion),({style:U,className:Y},Q)=>T.createElement(vL,kc({},x,{prefixCls:f,id:e,tabKey:g,animated:m,active:k,style:{...l,...E,...U},className:Ct(c,S,Y),ref:Q})))})))};function SL(r={inkBar:!0,tabPane:!1}){let e;return r===!1?e={inkBar:!1,tabPane:!1}:r===!0?e={inkBar:!0,tabPane:!1}:e={inkBar:!0,...typeof r=="object"?r:{}},e.tabPaneMotion&&e.tabPane===void 0&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}function Do(){return Do=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Do.apply(this,arguments)}let pb=0;const wL=T.forwardRef((r,e)=>{const{id:t,prefixCls:n="rc-tabs",className:i,items:o,direction:l,activeKey:c,defaultActiveKey:u,editable:d,animated:m,tabPosition:f="top",tabBarGutter:h,tabBarStyle:g,tabBarExtraContent:p,locale:E,more:S,destroyOnHidden:A,renderTabBar:x,onChange:k,onTabClick:U,onTabScroll:Y,getPopupContainer:Q,popupClassName:L,indicator:O,classNames:G,styles:te,...ge}=r,Me=T.useMemo(()=>(o||[]).filter(Ke=>Ke&&typeof Ke=="object"&&"key"in Ke),[o]),he=l==="rtl",De=SL(m),[_e,ke]=T.useState(!1);T.useEffect(()=>{ke(oL())},[]);const[Oe,He]=ki(u??Me[0]?.key,c),[Pe,Ge]=T.useState(()=>Me.findIndex(Ke=>Ke.key===Oe));T.useEffect(()=>{let Ke=Me.findIndex(H=>H.key===Oe);Ke===-1&&(Ke=Math.max(0,Math.min(Pe,Me.length-1)),He(Me[Ke]?.key)),Ge(Ke)},[Me.map(Ke=>Ke.key).join("_"),Oe,Pe]);const[qe,Ze]=ki(null,t);T.useEffect(()=>{t||(Ze(`rc-tabs-${pb}`),pb+=1)},[]);function ct(Ke,H){U?.(Ke,H);const V=Ke!==Oe;He(Ke),V&&k?.(Ke)}const mt={id:qe,activeKey:Oe,animated:De,tabPosition:f,rtl:he,mobile:_e},xe={...mt,editable:d,locale:E,more:S,tabBarGutter:h,onTabClick:ct,onTabScroll:Y,extra:p,style:g,getPopupContainer:Q,popupClassName:Ct(L,G?.popup),indicator:O,styles:te,classNames:G},Ie=T.useMemo(()=>({tabs:Me,prefixCls:n}),[Me,n]);return T.createElement(Zh.Provider,{value:Ie},T.createElement("div",Do({ref:e,id:t,className:Ct(n,`${n}-${f}`,{[`${n}-mobile`]:_e,[`${n}-editable`]:d,[`${n}-rtl`]:he},i)},ge),T.createElement(EL,Do({},xe,{renderTabBar:x})),T.createElement(TL,Do({destroyOnHidden:A},mt,{contentStyle:te?.content,contentClassName:G?.content,animated:De}))))}),_L={motionAppear:!1,motionEnter:!0,motionLeave:!0};function xL(r,e={inkBar:!0,tabPane:!1}){let t;return e===!1?t={inkBar:!1,tabPane:!1}:e===!0?t={inkBar:!0,tabPane:!0}:t={inkBar:!0,...typeof e=="object"?e:{}},t.tabPane&&(t.tabPaneMotion={..._L,motionName:ev(r,"switch")}),t}function IL(r){return r.filter(e=>e)}function AL(r,e){if(r)return r.map(n=>({...n,destroyOnHidden:n.destroyOnHidden??n.destroyInactiveTabPane}));const t=us(e).map(n=>{if(T.isValidElement(n)){const{key:i,props:o}=n,{tab:l,...c}=o||{};return{key:String(i),...c,label:l}}return null});return IL(t)}const RL=r=>{const{componentCls:e,motionDurationSlow:t}=r;return[{[e]:{[`${e}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${t}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${t}`}}}}},[Fy(r,"slide-up"),Fy(r,"slide-down")]]},CL=r=>{const{componentCls:e,tabsCardPadding:t,cardBg:n,cardGutter:i,colorBorderSecondary:o,itemSelectedColor:l}=r;return{[`${e}-card`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{margin:0,padding:t,background:n,border:`${an(r.lineWidth)} ${r.lineType} ${o}`,transition:`all ${r.motionDurationSlow} ${r.motionEaseInOut}`},[`${e}-tab-active`]:{color:l,background:r.colorBgContainer},[`${e}-tab-focus:has(${e}-tab-btn:focus-visible)`]:IE(r,-3),[`& ${e}-tab${e}-tab-focus ${e}-tab-btn:focus-visible`]:{outline:"none"},[`${e}-ink-bar`]:{visibility:"hidden"}},[`&${e}-top, &${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginLeft:{_skip_check_:!0,value:an(i)}}}},[`&${e}-top`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:`${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)} 0 0`},[`${e}-tab-active`]:{borderBottomColor:r.colorBgContainer}}},[`&${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:`0 0 ${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)}`},[`${e}-tab-active`]:{borderTopColor:r.colorBgContainer}}},[`&${e}-left, &${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginTop:an(i)}}},[`&${e}-left`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`${an(r.borderRadiusLG)} 0 0 ${an(r.borderRadiusLG)}`}},[`${e}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:r.colorBgContainer}}}},[`&${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)} 0`}},[`${e}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:r.colorBgContainer}}}}}}},kL=r=>{const{componentCls:e,itemHoverColor:t,dropdownEdgeChildVerticalPadding:n}=r;return{[`${e}-dropdown`]:{...la(r),position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:r.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${e}-dropdown-menu`]:{maxHeight:r.tabsDropdownHeight,margin:0,padding:`${an(n)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:r.colorBgContainer,backgroundClip:"padding-box",borderRadius:r.borderRadiusLG,outline:"none",boxShadow:r.boxShadowSecondary,"&-item":{...rl,display:"flex",alignItems:"center",minWidth:r.tabsDropdownWidth,margin:0,padding:`${an(r.paddingXXS)} ${an(r.paddingSM)}`,color:r.colorText,fontWeight:"normal",fontSize:r.fontSize,lineHeight:r.lineHeight,cursor:"pointer",transition:`all ${r.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:r.marginSM},color:r.colorIcon,fontSize:r.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:t}},"&:hover":{background:r.controlItemBgHover},"&-disabled":{"&, &:hover":{color:r.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}}}}}},LL=r=>{const{componentCls:e,margin:t,colorBorderSecondary:n,horizontalMargin:i,verticalItemPadding:o,verticalItemMargin:l,motionDurationSlow:c,calc:u}=r;return{[`${e}-top, ${e}-bottom`]:{flexDirection:"column",[`> ${e}-nav, > div > ${e}-nav`]:{margin:i,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${an(r.lineWidth)} ${r.lineType} ${n}`,content:"''"},[`${e}-ink-bar`]:{height:r.lineWidthBold,"&-animated":{transition:["width","left","right"].map(d=>`${d} ${c}`).join(", ")}},[`${e}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:r.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:r.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:r.boxShadowTabsOverflowRight},[`&${e}-nav-wrap-ping-left::before`]:{opacity:1},[`&${e}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${e}-top`]:{[`> ${e}-nav,
        > div > ${e}-nav`]:{"&::before":{bottom:0},[`${e}-ink-bar`]:{bottom:0}}},[`${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{order:1,marginTop:t,marginBottom:0,"&::before":{top:0},[`${e}-ink-bar`]:{top:0}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{order:0}},[`${e}-left, ${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{flexDirection:"column",minWidth:u(r.controlHeight).mul(1.25).equal(),[`${e}-tab`]:{padding:o,textAlign:"center"},[`${e}-tab + ${e}-tab`]:{margin:l},[`${e}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:r.controlHeight},"&::before":{top:0,boxShadow:r.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:r.boxShadowTabsOverflowBottom},[`&${e}-nav-wrap-ping-top::before`]:{opacity:1},[`&${e}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${e}-ink-bar`]:{width:r.lineWidthBold,"&-animated":{transition:["height","top"].map(d=>`${d} ${c}`).join(", ")}},[`${e}-nav-list, ${e}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${e}-left`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{marginLeft:{_skip_check_:!0,value:an(u(r.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`},[`> ${e}-content > ${e}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:r.paddingLG}}}},[`${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{order:1,[`${e}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:u(r.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`},[`> ${e}-content > ${e}-tabpane`]:{paddingRight:{_skip_check_:!0,value:r.paddingLG}}}}}},NL=r=>{const{componentCls:e,cardPaddingSM:t,cardPaddingLG:n,cardHeightSM:i,cardHeightLG:o,horizontalItemPaddingSM:l,horizontalItemPaddingLG:c}=r;return{[e]:{"&-small":{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:l,fontSize:r.titleFontSizeSM}}},"&-large":{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:c,fontSize:r.titleFontSizeLG,lineHeight:r.lineHeightLG}}}},[`${e}-card`]:{[`&${e}-small`]:{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:t},[`${e}-nav-add`]:{minWidth:i,minHeight:i}},[`&${e}-bottom`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:`0 0 ${an(r.borderRadius)} ${an(r.borderRadius)}`}},[`&${e}-top`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:`${an(r.borderRadius)} ${an(r.borderRadius)} 0 0`}},[`&${e}-right`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${an(r.borderRadius)} ${an(r.borderRadius)} 0`}}},[`&${e}-left`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`${an(r.borderRadius)} 0 0 ${an(r.borderRadius)}`}}}},[`&${e}-large`]:{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:n},[`${e}-nav-add`]:{minWidth:o,minHeight:o}}}}}},DL=r=>{const{componentCls:e,itemActiveColor:t,itemHoverColor:n,iconCls:i,tabsHorizontalItemMargin:o,horizontalItemPadding:l,itemSelectedColor:c,itemColor:u}=r,d=`${e}-tab`;return{[d]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:l,fontSize:r.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:u,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:t}},"&-btn":{outline:"none",transition:`all ${r.motionDurationSlow}`,[`${d}-icon:not(:last-child)`]:{marginInlineEnd:r.marginSM}},"&-remove":{flex:"none",lineHeight:1,marginRight:{_skip_check_:!0,value:r.calc(r.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:r.marginXS},color:r.colorIcon,fontSize:r.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${r.motionDurationSlow}`,"&:hover":{color:r.colorTextHeading},...gc(r)},"&:hover":{color:n},[`&${d}-active ${d}-btn`]:{color:c},[`&${d}-focus ${d}-btn:focus-visible`]:IE(r),[`&${d}-disabled`]:{color:r.colorTextDisabled,cursor:"not-allowed"},[`&${d}-disabled ${d}-btn, &${d}-disabled ${e}-remove`]:{"&:focus, &:active":{color:r.colorTextDisabled}},[`& ${d}-remove ${i}`]:{margin:0,verticalAlign:"middle"},[`${i}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:r.marginSM}}},[`${d} + ${d}`]:{margin:{_skip_check_:!0,value:o}}}},PL=r=>{const{componentCls:e,tabsHorizontalItemMarginRTL:t,iconCls:n,cardGutter:i,calc:o}=r;return{[`${e}-rtl`]:{direction:"rtl",[`${e}-nav`]:{[`${e}-tab`]:{margin:{_skip_check_:!0,value:t},[`${e}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[n]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:an(r.marginSM)}},[`${e}-tab-remove`]:{marginRight:{_skip_check_:!0,value:an(r.marginXS)},marginLeft:{_skip_check_:!0,value:an(o(r.marginXXS).mul(-1).equal())},[n]:{margin:0}}}},[`&${e}-left`]:{[`> ${e}-nav`]:{order:1},[`> ${e}-content-holder`]:{order:0}},[`&${e}-right`]:{[`> ${e}-nav`]:{order:0},[`> ${e}-content-holder`]:{order:1}},[`&${e}-card${e}-top, &${e}-card${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginRight:{_skip_check_:!0,value:i},marginLeft:{_skip_check_:!0,value:0}}}}},[`${e}-dropdown-rtl`]:{direction:"rtl"},[`${e}-menu-item`]:{[`${e}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},ML=r=>{const{componentCls:e,tabsCardPadding:t,cardHeight:n,cardGutter:i,itemHoverColor:o,itemActiveColor:l,colorBorderSecondary:c}=r;return{[e]:{...la(r),display:"flex",[`> ${e}-nav, > div > ${e}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${e}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${r.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${e}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${r.motionDurationSlow}`},[`${e}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${e}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${e}-nav-more`]:{position:"relative",padding:t,background:"transparent",border:0,color:r.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:r.calc(r.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${e}-nav-add`]:{minWidth:n,minHeight:n,marginLeft:{_skip_check_:!0,value:i},background:"transparent",border:`${an(r.lineWidth)} ${r.lineType} ${c}`,borderRadius:`${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:r.colorText,transition:`all ${r.motionDurationSlow} ${r.motionEaseInOut}`,"&:hover":{color:o},"&:active, &:focus:not(:focus-visible)":{color:l},...gc(r,-3)}},[`${e}-extra-content`]:{flex:"none"},[`${e}-ink-bar`]:{position:"absolute",background:r.inkBarColor,pointerEvents:"none"},...DL(r),[`${e}-content`]:{position:"relative",width:"100%"},[`${e}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${e}-tabpane`]:{...gc(r),"&-hidden":{display:"none"}}},[`${e}-centered`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-nav-wrap`]:{[`&:not([class*='${e}-nav-wrap-ping']) > ${e}-nav-list`]:{margin:"auto"}}}}}},OL=r=>{const{cardHeight:e,cardHeightSM:t,cardHeightLG:n,controlHeight:i,controlHeightLG:o}=r,l=e||o,c=t||i,u=n||o+8;return{zIndexPopup:r.zIndexPopupBase+50,cardBg:r.colorFillAlter,cardHeight:l,cardHeightSM:c,cardHeightLG:u,cardPadding:`${(l-r.fontHeight)/2-r.lineWidth}px ${r.padding}px`,cardPaddingSM:`${(c-r.fontHeight)/2-r.lineWidth}px ${r.paddingXS}px`,cardPaddingLG:`${(u-r.fontHeightLG)/2-r.lineWidth}px ${r.padding}px`,titleFontSize:r.fontSize,titleFontSizeLG:r.fontSizeLG,titleFontSizeSM:r.fontSize,inkBarColor:r.colorPrimary,horizontalMargin:`0 0 ${r.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${r.paddingSM}px 0`,horizontalItemPaddingSM:`${r.paddingXS}px 0`,horizontalItemPaddingLG:`${r.padding}px 0`,verticalItemPadding:`${r.paddingXS}px ${r.paddingLG}px`,verticalItemMargin:`${r.margin}px 0 0 0`,itemColor:r.colorText,itemSelectedColor:r.colorPrimary,itemHoverColor:r.colorPrimaryHover,itemActiveColor:r.colorPrimaryActive,cardGutter:r.marginXXS/2}},FL=ai("Tabs",r=>{const e=Nr(r,{tabsCardPadding:r.cardPadding,dropdownEdgeChildVerticalPadding:r.paddingXXS,tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${an(r.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${an(r.horizontalItemGutter)}`});return[NL(e),PL(e),LL(e),kL(e),CL(e),ML(e),RL(e)]},OL),zL=()=>null,UL=T.forwardRef((r,e)=>{const{type:t,className:n,rootClassName:i,size:o,onEdit:l,hideAdd:c,centered:u,addIcon:d,removeIcon:m,moreIcon:f,more:h,popupClassName:g,children:p,items:E,animated:S,style:A,indicatorSize:x,indicator:k,classNames:U,styles:Y,destroyInactiveTabPane:Q,destroyOnHidden:L,tabPlacement:O,tabPosition:G,...te}=r,{prefixCls:ge}=te,{getPrefixCls:Me,direction:he,getPopupContainer:De,className:_e,style:ke,classNames:Oe,styles:He}=Xr("tabs"),{tabs:Pe}=T.useContext(Lr),Ge=Me("tabs",ge),qe=io(Ge),[Ze,ct]=FL(Ge,qe),mt=T.useRef(null);T.useImperativeHandle(e,()=>({nativeElement:mt.current}));let xe;t==="editable-card"&&(xe={onEdit:(Xe,{key:$e,event:Ve})=>{l?.(Xe==="add"?Ve:$e,Xe)},removeIcon:m??Pe?.removeIcon??T.createElement($E,null),addIcon:(d??Pe?.addIcon)||T.createElement(rL,null),showAdd:c!==!0});const Ie=Me(),Ke=Zc(o),H=AL(E,p),V=xL(Ge,S),C={align:k?.align??Pe?.indicator?.align,size:k?.size??x??Pe?.indicator?.size??Pe?.indicatorSize},F=T.useMemo(()=>{const Xe=O??G??void 0,$e=he==="rtl";switch(Xe){case"start":return $e?"right":"left";case"end":return $e?"left":"right";default:return Xe}},[O,G,he]),oe={...r,size:Ke,tabPlacement:F,items:H},[Z,Be]=Ei([Oe,U],[He,Y],{props:oe},{popup:{_default:"root"}});return T.createElement(wL,{ref:mt,direction:he,getPopupContainer:De,...te,items:H,className:Ct({[`${Ge}-${Ke}`]:Ke,[`${Ge}-card`]:["card","editable-card"].includes(t),[`${Ge}-editable-card`]:t==="editable-card",[`${Ge}-centered`]:u},_e,n,i,Z.root,Ze,ct,qe),classNames:{...Z,popup:Ct(g,Ze,ct,qe,Z.popup?.root)},styles:Be,style:{...Be.root,...ke,...A},editable:xe,more:{icon:Pe?.more?.icon??Pe?.moreIcon??f??T.createElement(U1,null),transitionName:`${Ie}-slide-up`,...h},prefixCls:Ge,animated:V,indicator:C,destroyOnHidden:L??Q,tabPosition:F})}),Yv=UL;Yv.TabPane=zL;const Wv=({prefixCls:r,className:e,hoverable:t=!0,...n})=>{const{getPrefixCls:i}=T.useContext(Lr),o=i("card",r),l=Ct(`${o}-grid`,e,{[`${o}-grid-hoverable`]:t});return T.createElement("div",{...n,className:l})},BL=r=>{const{antCls:e,componentCls:t,headerHeight:n,headerPadding:i,tabsMarginBottom:o}=r;return{display:"flex",justifyContent:"center",flexDirection:"column",minHeight:n,marginBottom:-1,padding:`0 ${an(i)}`,color:r.colorTextHeading,fontWeight:r.fontWeightStrong,fontSize:r.headerFontSize,background:r.headerBg,borderBottom:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorderSecondary}`,borderRadius:`${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)} 0 0`,...no(),"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":{display:"inline-block",flex:1,...rl,[`
          > ${t}-typography,
          > ${t}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}},[`${e}-tabs-top`]:{clear:"both",marginBottom:o,color:r.colorText,fontWeight:"normal",fontSize:r.fontSize,"&-bar":{borderBottom:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorderSecondary}`}}}},$L=r=>{const{cardPaddingBase:e,colorBorderSecondary:t,cardShadow:n,lineWidth:i}=r;return{width:"33.33%",padding:e,border:0,borderRadius:0,boxShadow:`
      ${an(i)} 0 0 0 ${t},
      0 ${an(i)} 0 0 ${t},
      ${an(i)} ${an(i)} 0 0 ${t},
      ${an(i)} 0 0 0 ${t} inset,
      0 ${an(i)} 0 0 ${t} inset;
    `,transition:`all ${r.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:n}}},jL=r=>{const{componentCls:e,iconCls:t,actionsLiMargin:n,cardActionsIconSize:i,colorBorderSecondary:o,actionsBg:l}=r;return{margin:0,padding:0,listStyle:"none",background:l,borderTop:`${an(r.lineWidth)} ${r.lineType} ${o}`,display:"flex",borderRadius:`0 0 ${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)}`,...no(),"& > li":{margin:n,color:r.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:r.calc(r.cardActionsIconSize).mul(2).equal(),fontSize:r.fontSize,lineHeight:r.lineHeight,cursor:"pointer","&:hover":{color:r.colorPrimary,transition:`color ${r.motionDurationMid}`},[`a:not(${e}-btn), > ${t}`]:{display:"inline-block",width:"100%",color:r.colorIcon,lineHeight:an(r.fontHeight),transition:`color ${r.motionDurationMid}`,"&:hover":{color:r.colorPrimary}},[`> ${t}`]:{fontSize:i,lineHeight:an(r.calc(i).mul(r.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${an(r.lineWidth)} ${r.lineType} ${o}`}}}},qL=r=>({margin:`${an(r.calc(r.marginXXS).mul(-1).equal())} 0`,display:"flex",...no(),"&-avatar":{paddingInlineEnd:r.padding},"&-section":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:r.marginXS}},"&-title":{color:r.colorTextHeading,fontWeight:r.fontWeightStrong,fontSize:r.fontSizeLG,...rl},"&-description":{color:r.colorTextDescription}}),GL=r=>{const{componentCls:e,colorFillAlter:t,headerPadding:n,bodyPadding:i}=r;return{[`${e}-head`]:{padding:`0 ${an(n)}`,background:t,"&-title":{fontSize:r.fontSize}},[`${e}-body`]:{padding:`${an(r.padding)} ${an(i)}`}}},HL=r=>{const{componentCls:e}=r;return{overflow:"hidden",[`${e}-body`]:{userSelect:"none"}}},VL=r=>{const{componentCls:e,cardShadow:t,cardHeadPadding:n,colorBorderSecondary:i,boxShadowTertiary:o,bodyPadding:l,extraColor:c,motionDurationMid:u}=r;return{[e]:{...la(r),position:"relative",background:r.colorBgContainer,borderRadius:r.borderRadiusLG,[`&:not(${e}-bordered)`]:{boxShadow:o},[`${e}-head`]:BL(r),[`${e}-extra`]:{marginInlineStart:"auto",color:c,fontWeight:"normal",fontSize:r.fontSize},[`${e}-body`]:{padding:l,borderRadius:`0 0 ${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)}`,"&:first-child":{borderStartStartRadius:r.borderRadiusLG,borderStartEndRadius:r.borderRadiusLG},"&:not(:last-child)":{borderEndStartRadius:0,borderEndEndRadius:0}},[`${e}-grid`]:$L(r),[`${e}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)} 0 0`}},[`${e}-actions`]:jL(r),[`${e}-meta`]:qL(r)},[`${e}-bordered`]:{border:`${an(r.lineWidth)} ${r.lineType} ${i}`,[`${e}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${e}-hoverable`]:{cursor:"pointer",transition:["box-shadow","border-color"].map(d=>`${d} ${u}`).join(", "),"&:hover":{borderColor:"transparent",boxShadow:t}},[`${e}-contain-grid`]:{borderRadius:`${an(r.borderRadiusLG)} ${an(r.borderRadiusLG)} 0 0 `,[`&:not(:has(> ${e}-head))`]:{borderRadius:0},[`${e}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${e}-loading) ${e}-body`]:{marginBlockStart:r.calc(r.lineWidth).mul(-1).equal(),marginInlineStart:r.calc(r.lineWidth).mul(-1).equal(),padding:0}},[`${e}-contain-tabs`]:{[`> div${e}-head`]:{minHeight:0,[`${e}-head-title, ${e}-extra`]:{paddingTop:n}}},[`${e}-type-inner`]:GL(r),[`${e}-loading`]:HL(r),[`${e}-rtl`]:{direction:"rtl"}}},KL=r=>{const{componentCls:e,bodyPaddingSM:t,headerPaddingSM:n,headerHeightSM:i,headerFontSizeSM:o}=r;return{[`${e}-small`]:{[`> ${e}-head`]:{minHeight:i,padding:`0 ${an(n)}`,fontSize:o,[`> ${e}-head-wrapper`]:{[`> ${e}-extra`]:{fontSize:r.fontSize}}},[`> ${e}-body`]:{padding:t}},[`${e}-small${e}-contain-tabs`]:{[`> ${e}-head`]:{[`${e}-head-title, ${e}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},YL=r=>({headerBg:"transparent",headerFontSize:r.fontSizeLG,headerFontSizeSM:r.fontSize,headerHeight:r.fontSizeLG*r.lineHeightLG+r.padding*2,headerHeightSM:r.fontSize*r.lineHeight+r.paddingXS*2,actionsBg:r.colorBgContainer,actionsLiMargin:`${r.paddingSM}px 0`,tabsMarginBottom:-r.padding-r.lineWidth,extraColor:r.colorText,bodyPaddingSM:12,headerPaddingSM:12,bodyPadding:r.bodyPadding??r.paddingLG,headerPadding:r.headerPadding??r.paddingLG}),WL=ai("Card",r=>{const e=Nr(r,{cardShadow:r.boxShadowCard,cardHeadPadding:r.padding,cardPaddingBase:r.paddingLG,cardActionsIconSize:r.fontSize});return[VL(e),KL(e)]},YL),XL=r=>{const{actionClasses:e,actions:t=[],actionStyle:n}=r;return T.createElement("ul",{className:e,style:n},t.map((i,o)=>{const l=`action-${o}`;return T.createElement("li",{style:{width:`${100/t.length}%`},key:l},T.createElement("span",null,i))}))},QL=T.forwardRef((r,e)=>{const{prefixCls:t,className:n,rootClassName:i,style:o,extra:l,headStyle:c={},bodyStyle:u={},title:d,loading:m,bordered:f,variant:h,size:g,type:p,cover:E,actions:S,tabList:A,children:x,activeTabKey:k,defaultActiveTabKey:U,tabBarExtraContent:Y,hoverable:Q,tabProps:L={},classNames:O,styles:G,...te}=r,{getPrefixCls:ge,direction:Me,className:he,style:De,classNames:_e,styles:ke}=Xr("card"),[Oe]=bv("card",h,f),He=Zc(g),Pe={...r,size:He,variant:Oe,loading:m},[Ge,qe]=Ei([_e,O],[ke,G],{props:Pe}),Ze=Ot=>{r.onTabChange?.(Ot)},ct=T.useMemo(()=>us(x).some(pt=>T.isValidElement(pt)&&pt.type===Wv),[x]),mt=ge("card",t),[xe,Ie]=WL(mt),Ke=T.createElement(ao,{loading:!0,active:!0,paragraph:{rows:4},title:!1},x),H=k!==void 0,V={...L,[H?"activeKey":"defaultActiveKey"]:H?k:U,tabBarExtraContent:Y};let C;const F=!He||He==="default"?"large":He,oe=A?T.createElement(Yv,{size:F,...V,className:`${mt}-head-tabs`,onChange:Ze,items:A.map(({tab:Ot,...pt})=>({label:Ot,...pt}))}):null;if(d||l||oe){const Ot=Ct(`${mt}-head`,Ge.header),pt=Ct(`${mt}-head-title`,Ge.title),kt=Ct(`${mt}-extra`,Ge.extra),wt={...c,...qe.header};C=T.createElement("div",{className:Ot,style:wt},T.createElement("div",{className:`${mt}-head-wrapper`},d&&T.createElement("div",{className:pt,style:qe.title},d),l&&T.createElement("div",{className:kt,style:qe.extra},l)),oe)}const Z=Ct(`${mt}-cover`,Ge.cover),Be=E?T.createElement("div",{className:Z,style:qe.cover},E):null,Xe=Ct(`${mt}-body`,Ge.body),$e={...u,...qe.body},Ve=T.createElement("div",{className:Xe,style:$e},m?Ke:x),je=Ct(`${mt}-actions`,Ge.actions),Qe=S?.length?T.createElement(XL,{actionClasses:je,actionStyle:qe.actions,actions:S}):null,dt=Ki(te,["onTabChange"]),it=Ct(mt,he,{[`${mt}-loading`]:m,[`${mt}-bordered`]:Oe!=="borderless",[`${mt}-hoverable`]:Q,[`${mt}-contain-grid`]:ct,[`${mt}-contain-tabs`]:A?.length,[`${mt}-${He}`]:He,[`${mt}-type-${p}`]:!!p,[`${mt}-rtl`]:Me==="rtl"},n,i,xe,Ie,Ge.root),rt={...qe.root,...De,...o};return T.createElement("div",{ref:e,...dt,className:it,style:rt},C,Be,Ve,Qe)}),ZL=r=>{const{prefixCls:e,className:t,avatar:n,title:i,description:o,style:l,classNames:c,styles:u,...d}=r,{getPrefixCls:m,className:f,style:h,classNames:g,styles:p}=Xr("cardMeta"),S=`${m("card",e)}-meta`,[A,x]=Ei([g,c],[p,u],{props:r}),k=Ct(S,t,f,A.root),U={...h,...x.root,...l},Y=Ct(`${S}-avatar`,A.avatar),Q=Ct(`${S}-title`,A.title),L=Ct(`${S}-description`,A.description),O=Ct(`${S}-section`,A.section),G=n?T.createElement("div",{className:Y,style:x.avatar},n):null,te=i?T.createElement("div",{className:Q,style:x.title},i):null,ge=o?T.createElement("div",{className:L,style:x.description},o):null,Me=te||ge?T.createElement("div",{className:O,style:x.section},te,ge):null;return T.createElement("div",{...d,className:k,style:U},G,Me)},Lc=QL;Lc.Grid=Wv;Lc.Meta=ZL;function JL(r,e,t){var n=t||{},i=n.noTrailing,o=i===void 0?!1:i,l=n.noLeading,c=l===void 0?!1:l,u=n.debounceMode,d=u===void 0?void 0:u,m,f=!1,h=0;function g(){m&&clearTimeout(m)}function p(S){var A=S||{},x=A.upcomingOnly,k=x===void 0?!1:x;g(),f=!k}function E(){for(var S=arguments.length,A=new Array(S),x=0;x<S;x++)A[x]=arguments[x];var k=this,U=Date.now()-h;if(f)return;function Y(){h=Date.now(),e.apply(k,A)}function Q(){m=void 0}!c&&d&&!m&&Y(),g(),d===void 0&&U>r?c?(h=Date.now(),o||(m=setTimeout(d?Q:Y,r))):Y():o!==!0&&(m=setTimeout(d?Q:Y,d===void 0?r-U:r))}return E.cancel=p,E}function eN(r,e,t){var n={},i=n.atBegin,o=i===void 0?!1:i;return JL(r,e,{debounceMode:o!==!1})}function tN(r){return!!(r.addonBefore||r.addonAfter)}function nN(r){return!!(r.prefix||r.suffix||r.allowClear)}function yb(r,e,t){const n=e.cloneNode(!0),i=Object.create(r,{target:{value:n},currentTarget:{value:n}});return n.value=t,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(n.selectionStart=e.selectionStart,n.selectionEnd=e.selectionEnd),n.setSelectionRange=(...o)=>{e.setSelectionRange(...o)},i}function bb(r,e,t,n){if(!t)return;let i=e;if(e.type==="click"){i=yb(e,r,""),t(i);return}if(r.type!=="file"&&n!==void 0){i=yb(e,r,n),t(i);return}t(i)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Gf.apply(this,arguments)}const rN=Je.forwardRef((r,e)=>{const{inputElement:t,children:n,prefixCls:i,prefix:o,suffix:l,addonBefore:c,addonAfter:u,className:d,style:m,disabled:f,readOnly:h,focused:g,triggerFocus:p,allowClear:E,value:S,handleReset:A,hidden:x,classes:k,classNames:U,dataAttrs:Y,styles:Q,components:L,onClear:O}=r,G=n??t,te=L?.affixWrapper||"span",ge=L?.groupWrapper||"span",Me=L?.wrapper||"span",he=L?.groupAddon||"span",De=T.useRef(null),_e=Pe=>{De.current?.contains(Pe.target)&&p?.()},ke=nN(r);let Oe=T.cloneElement(G,{value:S,className:Ct(G.props?.className,!ke&&U?.variant)||null});const He=T.useRef(null);if(Je.useImperativeHandle(e,()=>({nativeElement:He.current||De.current})),ke){let Pe=null;if(E){const ct=!f&&!h&&S,mt=`${i}-clear-icon`,xe=typeof E=="object"&&E?.clearIcon?E.clearIcon:"";Pe=Je.createElement("button",{type:"button",tabIndex:-1,onClick:Ie=>{A?.(Ie),O?.()},onMouseDown:Ie=>Ie.preventDefault(),className:Ct(mt,{[`${mt}-hidden`]:!ct,[`${mt}-has-suffix`]:!!l})},xe)}const Ge=`${i}-affix-wrapper`,qe=Ct(Ge,{[`${i}-disabled`]:f,[`${Ge}-disabled`]:f,[`${Ge}-focused`]:g,[`${Ge}-readonly`]:h,[`${Ge}-input-with-clear-btn`]:l&&E&&S},k?.affixWrapper,U?.affixWrapper,U?.variant),Ze=(l||E)&&Je.createElement("span",{className:Ct(`${i}-suffix`,U?.suffix),style:Q?.suffix},Pe,l);Oe=Je.createElement(te,Gf({className:qe,style:Q?.affixWrapper,onClick:_e},Y?.affixWrapper,{ref:De}),o&&Je.createElement("span",{className:Ct(`${i}-prefix`,U?.prefix),style:Q?.prefix},o),Oe,Ze)}if(tN(r)){const Pe=`${i}-group`,Ge=`${Pe}-addon`,qe=`${Pe}-wrapper`,Ze=Ct(`${i}-wrapper`,Pe,k?.wrapper,U?.wrapper),ct=Ct(qe,{[`${qe}-disabled`]:f},k?.group,U?.groupWrapper);Oe=Je.createElement(ge,{className:ct,ref:He},Je.createElement(Me,{className:Ze},c&&Je.createElement(he,{className:Ge},c),Oe,u&&Je.createElement(he,{className:Ge},u)))}return Je.cloneElement(Oe,{className:Ct(Oe.props?.className,d)||null,style:{...Oe.props?.style,...m},hidden:x})});function iN(r,e){return T.useMemo(()=>{let t={};e&&(t.show=typeof e=="object"&&e.formatter?e.formatter:!!e),t={...t,...r};const{show:n,...i}=t;return{...i,show:!!n,showFormatter:typeof n=="function"?n:void 0,strategy:i.strategy||(o=>o.length)}},[r,e])}const aN=r=>{let e;return typeof r=="object"&&r?.clearIcon?e=r:r&&(e={clearIcon:Je.createElement(Fh,null)}),e};function Eb(r){return["small","middle","large"].includes(r)}const Xv=["wrap","nowrap","wrap-reverse"],Qv=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],Zv=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],sN=(r,e)=>{const t=e.wrap===!0?"wrap":e.wrap;return{[`${r}-wrap-${t}`]:t&&Xv.includes(t)}},oN=(r,e)=>{const t={};return Zv.forEach(n=>{t[`${r}-align-${n}`]=e.align===n}),t[`${r}-align-stretch`]=!e.align&&!!e.vertical,t},lN=(r,e)=>{const t={};return Qv.forEach(n=>{t[`${r}-justify-${n}`]=e.justify===n}),t},cN=(r,e)=>Ct({...sN(r,e),...oN(r,e),...lN(r,e)}),uN=r=>{const{componentCls:e}=r;return{[e]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},dN=r=>{const{componentCls:e}=r;return{[e]:{"&-gap-small":{gap:r.flexGapSM},"&-gap-middle":{gap:r.flexGap},"&-gap-large":{gap:r.flexGapLG}}}},fN=r=>{const{componentCls:e}=r,t={};return Xv.forEach(n=>{t[`${e}-wrap-${n}`]={flexWrap:n}}),t},hN=r=>{const{componentCls:e}=r,t={};return Zv.forEach(n=>{t[`${e}-align-${n}`]={alignItems:n}}),t},mN=r=>{const{componentCls:e}=r,t={};return Qv.forEach(n=>{t[`${e}-justify-${n}`]={justifyContent:n}}),t},gN=()=>({}),pN=ai("Flex",r=>{const{paddingXS:e,padding:t,paddingLG:n}=r,i=Nr(r,{flexGapSM:e,flexGap:t,flexGapLG:n});return[uN(i),dN(i),fN(i),hN(i),mN(i)]},gN,{resetStyle:!1}),Ns=Je.forwardRef((r,e)=>{const{prefixCls:t,rootClassName:n,className:i,style:o,flex:l,gap:c,vertical:u,orientation:d,component:m="div",children:f,...h}=r,{flex:g,direction:p,getPrefixCls:E}=Je.useContext(Lr),S=E("flex",t),[A,x]=pN(S),[,k]=CA(d,u??g?.vertical),U=Ct(i,n,g?.className,S,A,x,cN(S,{...r,vertical:k}),{[`${S}-rtl`]:p==="rtl",[`${S}-gap-${c}`]:Eb(c),[`${S}-vertical`]:k}),Y={...g?.style,...o};return Ba(l)&&(Y.flex=l),Ba(c)&&!Eb(c)&&(Y.gap=c),Je.createElement(m,{ref:e,className:U,style:Y,...Ki(h,["justify","wrap","align"])},f)});var yN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};function Hf(){return Hf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Hf.apply(this,arguments)}const bN=(r,e)=>T.createElement(Dr,Hf({},r,{ref:e,icon:yN})),EN=T.forwardRef(bN),vN=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,TN=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],sd={};let ci;function SN(r,e=!1){const t=r.getAttribute("id")||r.getAttribute("data-reactid")||r.getAttribute("name");if(e&&sd[t])return sd[t];const n=window.getComputedStyle(r),i=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),o=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),l=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),u={sizingStyle:TN.map(d=>`${d}:${n.getPropertyValue(d)}`).join(";"),paddingSize:o,borderSize:l,boxSizing:i};return e&&t&&(sd[t]=u),u}function wN(r,e=!1,t=null,n=null){ci||(ci=document.createElement("textarea"),ci.setAttribute("tab-index","-1"),ci.setAttribute("aria-hidden","true"),ci.setAttribute("name","hiddenTextarea"),document.body.appendChild(ci)),r.getAttribute("wrap")?ci.setAttribute("wrap",r.getAttribute("wrap")):ci.removeAttribute("wrap");const{paddingSize:i,borderSize:o,boxSizing:l,sizingStyle:c}=SN(r,e);ci.setAttribute("style",`${c};${vN}`),ci.value=r.value||r.placeholder||"";let u,d,m,f=ci.scrollHeight;if(l==="border-box"?f+=o:l==="content-box"&&(f-=i),t!==null||n!==null){ci.value=" ";const g=ci.scrollHeight-i;t!==null&&(u=g*t,l==="border-box"&&(u=u+i+o),f=Math.max(u,f)),n!==null&&(d=g*n,l==="border-box"&&(d=d+i+o),m=f>d?"":"hidden",f=Math.min(d,f))}const h={height:f,overflowY:m,resize:"none"};return u&&(h.minHeight=u),d&&(h.maxHeight=d),h}function Vf(){return Vf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Vf.apply(this,arguments)}const od=0,ld=1,cd=2,_N=T.forwardRef((r,e)=>{const{prefixCls:t,defaultValue:n,value:i,autoSize:o,onResize:l,className:c,style:u,disabled:d,onChange:m,onInternalAutoSize:f,...h}=r,[g,p]=ki(n,i),E=g??"",S=_e=>{p(_e.target.value),m?.(_e)},A=T.useRef();T.useImperativeHandle(e,()=>({textArea:A.current}));const[x,k]=T.useMemo(()=>o&&typeof o=="object"?[o.minRows,o.maxRows]:[],[o]),U=!!o,[Y,Q]=T.useState(cd),[L,O]=T.useState(),G=()=>{Q(od)};$r(()=>{U&&G()},[i,x,k,U]),$r(()=>{if(Y===od)Q(ld);else if(Y===ld){const _e=wN(A.current,!1,x,k);Q(cd),O(_e)}},[Y]);const te=T.useRef(),ge=()=>{Yr.cancel(te.current)},Me=_e=>{Y===cd&&(l?.(_e),o&&(ge(),te.current=Yr(()=>{G()})))};T.useEffect(()=>ge,[]);const De={...u,...U?L:null};return(Y===od||Y===ld)&&(De.overflowY="hidden",De.overflowX="hidden"),T.createElement(is,{onResize:Me,disabled:!(o||l)},T.createElement("textarea",Vf({},h,{ref:A,style:De,className:Ct(t,c,{[`${t}-disabled`]:d}),disabled:d,value:E,onChange:S})))});function Kf(){return Kf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Kf.apply(this,arguments)}const xN=Je.forwardRef(({defaultValue:r,value:e,onFocus:t,onBlur:n,onChange:i,allowClear:o,maxLength:l,onCompositionStart:c,onCompositionEnd:u,suffix:d,prefixCls:m="rc-textarea",showCount:f,count:h,className:g,style:p,disabled:E,hidden:S,classNames:A,styles:x,onResize:k,onClear:U,onPressEnter:Y,readOnly:Q,autoSize:L,onKeyDown:O,...G},te)=>{const[ge,Me]=ki(r,e),he=ge==null?"":String(ge),[De,_e]=Je.useState(!1),ke=Je.useRef(!1),[Oe,He]=Je.useState(null),Pe=T.useRef(null),Ge=T.useRef(null),qe=()=>Ge.current?.textArea,Ze=()=>{qe().focus()};T.useImperativeHandle(te,()=>({resizableTextArea:Ge.current,focus:Ze,blur:()=>{qe().blur()},nativeElement:Pe.current?.nativeElement||qe()})),T.useEffect(()=>{_e(rt=>!E&&rt)},[E]);const[ct,mt]=Je.useState(null);Je.useEffect(()=>{ct&&qe().setSelectionRange(...ct)},[ct]);const xe=iN(h,f),Ie=xe.max??l,Ke=Number(Ie)>0,H=xe.strategy(he),V=!!Ie&&H>Ie,C=(rt,Ot)=>{let pt=Ot;!ke.current&&xe.exceedFormatter&&xe.max&&xe.strategy(Ot)>xe.max&&(pt=xe.exceedFormatter(Ot,{max:xe.max}),Ot!==pt&&mt([qe().selectionStart||0,qe().selectionEnd||0])),Me(pt),bb(rt.currentTarget,rt,i,pt)},F=rt=>{ke.current=!0,c?.(rt)},oe=rt=>{ke.current=!1,C(rt,rt.currentTarget.value),u?.(rt)},Z=rt=>{C(rt,rt.target.value)},Be=rt=>{rt.key==="Enter"&&Y&&!rt.nativeEvent.isComposing&&Y(rt),O?.(rt)},Xe=rt=>{_e(!0),t?.(rt)},$e=rt=>{_e(!1),n?.(rt)},Ve=rt=>{Me(""),Ze(),bb(qe(),rt,i)};let je=d,Qe;xe.show&&(xe.showFormatter?Qe=xe.showFormatter({value:he,count:H,maxLength:Ie}):Qe=`${H}${Ke?` / ${Ie}`:""}`,je=Je.createElement(Je.Fragment,null,je,Je.createElement("span",{className:Ct(`${m}-data-count`,A?.count),style:x?.count},Qe)));const dt=rt=>{k?.(rt),qe()?.style.height&&He(!0)},it=!L&&!f&&!o;return Je.createElement(rN,{ref:Pe,value:he,allowClear:o,handleReset:Ve,suffix:je,prefixCls:m,classNames:{...A,affixWrapper:Ct(A?.affixWrapper,{[`${m}-show-count`]:f,[`${m}-textarea-allow-clear`]:o})},disabled:E,focused:De,className:Ct(g,V&&`${m}-out-of-range`),style:{...p,...Oe&&!it?{height:"auto"}:{}},dataAttrs:{affixWrapper:{"data-count":typeof Qe=="string"?Qe:void 0}},hidden:S,readOnly:Q,onClear:U},Je.createElement(_N,Kf({},G,{autoSize:L,maxLength:l,onKeyDown:Be,onChange:Z,onFocus:Xe,onBlur:$e,onCompositionStart:F,onCompositionEnd:oe,className:Ct(A?.textarea),style:{resize:p?.resize,...x?.textarea},disabled:E,prefixCls:m,onResize:dt,ref:Ge,readOnly:Q})))}),IN=r=>{const{componentCls:e,paddingLG:t}=r,n=`${e}-textarea`;return{[`textarea${e}`]:{maxWidth:"100%",height:"auto",minHeight:r.controlHeight,lineHeight:r.lineHeight,verticalAlign:"bottom",transition:`all ${r.motionDurationSlow}`,resize:"vertical",[`&${e}-mouse-active`]:{transition:`all ${r.motionDurationSlow}, height 0s, width 0s`}},[`${e}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[n]:{position:"relative","&-show-count":{[`${e}-data-count`]:{position:"absolute",bottom:r.calc(r.fontSize).mul(r.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:r.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${n}-has-feedback ${e}
      `]:{paddingInlineEnd:t},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:r.calc(r.controlHeight).sub(r.calc(r.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:r.paddingInline,insetBlockStart:r.paddingXS},[`${n}-suffix`]:{position:"absolute",top:0,insetInlineEnd:r.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-rtl`]:{[`${e}-suffix`]:{[`${e}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:r.paddingInlineSM}}}}}},AN=ai(["Input","TextArea"],r=>{const e=Nr(r,Wh(r));return IN(e)},Xh,{resetFont:!1}),RN=T.forwardRef((r,e)=>{const{prefixCls:t,bordered:n=!0,size:i,disabled:o,status:l,allowClear:c,classNames:u,rootClassName:d,className:m,style:f,styles:h,variant:g,showCount:p,onMouseDown:E,onResize:S,...A}=r,{getPrefixCls:x,direction:k,allowClear:U,autoComplete:Y,className:Q,style:L,classNames:O,styles:G}=Xr("textArea"),te=T.useContext(Ph),ge=o??te,{status:Me,hasFeedback:he,feedbackIcon:De}=T.useContext(Rf),_e=Hk(Me,l),[ke,Oe]=Ei([O,u],[G,h],{props:r}),He=T.useRef(null);T.useImperativeHandle(e,()=>({resizableTextArea:He.current?.resizableTextArea,focus:Xe=>{bC(He.current?.resizableTextArea?.textArea,Xe)},blur:()=>He.current?.blur(),nativeElement:He.current?.nativeElement||null}));const Pe=x("input",t),Ge=io(Pe),[qe,Ze]=eL(Pe,d);AN(Pe,Ge);const{compactSize:ct,compactItemClassnames:mt}=rv(Pe,k),xe=Zc(Xe=>i??ct??Xe),[Ie,Ke]=bv("textArea",g,n),H=aN(c??U),[V,C]=T.useState(!1),[F,oe]=T.useState(!1),Z=Xe=>{C(!0),E?.(Xe);const $e=()=>{C(!1),document.removeEventListener("mouseup",$e)};document.addEventListener("mouseup",$e)},Be=Xe=>{if(S?.(Xe),V&&typeof getComputedStyle=="function"){const $e=He.current?.nativeElement?.querySelector("textarea");$e&&getComputedStyle($e).resize==="both"&&oe(!0)}};return T.createElement(xN,{autoComplete:Y,...A,style:{...Oe.root,...L,...f},styles:Oe,disabled:ge,allowClear:H,className:Ct(Ze,Ge,m,d,mt,Q,ke.root,{[`${Pe}-textarea-affix-wrapper-resize-dirty`]:F}),classNames:{...ke,textarea:Ct({[`${Pe}-sm`]:xe==="small",[`${Pe}-lg`]:xe==="large"},qe,ke.textarea,V&&`${Pe}-mouse-active`),variant:Ct({[`${Pe}-${Ie}`]:Ke},Gk(Pe,_e)),affixWrapper:Ct(`${Pe}-textarea-affix-wrapper`,{[`${Pe}-affix-wrapper-rtl`]:k==="rtl",[`${Pe}-affix-wrapper-sm`]:xe==="small",[`${Pe}-affix-wrapper-lg`]:xe==="large",[`${Pe}-textarea-show-count`]:p||r.count?.show},qe)},prefixCls:Pe,suffix:he&&T.createElement("span",{className:`${Pe}-textarea-suffix`},De),showCount:p,ref:He,onResize:Be,onMouseDown:Z})}),Nc=100,Jv=Nc/5,eT=Nc/2-Jv/2,ud=eT*2*Math.PI,vb=50,Tb=r=>{const{dotClassName:e,style:t,hasCircleCls:n}=r;return T.createElement("circle",{className:Ct(`${e}-circle`,{[`${e}-circle-bg`]:n}),r:eT,cx:vb,cy:vb,strokeWidth:Jv,style:t})},CN=({percent:r,prefixCls:e})=>{const t=`${e}-dot`,n=`${t}-holder`,i=`${n}-hidden`,[o,l]=T.useState(!1);$r(()=>{r!==0&&l(!0)},[r!==0]);const c=Math.max(Math.min(r,100),0);if(!o)return null;const u={strokeDashoffset:`${ud/4}`,strokeDasharray:`${ud*c/100} ${ud*(100-c)/100}`};return T.createElement("span",{className:Ct(n,`${t}-progress`,c<=0&&i)},T.createElement("svg",{viewBox:`0 0 ${Nc} ${Nc}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c},T.createElement(Tb,{dotClassName:t,hasCircleCls:!0}),T.createElement(Tb,{dotClassName:t,style:u})))};function kN(r){const{prefixCls:e,percent:t=0,className:n,style:i}=r,o=`${e}-dot`,l=`${o}-holder`,c=`${l}-hidden`;return T.createElement(T.Fragment,null,T.createElement("span",{className:Ct(l,n,t>0&&c),style:i},T.createElement("span",{className:Ct(o,`${e}-dot-spin`)},[1,2,3,4].map(u=>T.createElement("i",{className:`${e}-dot-item`,key:u})))),T.createElement(CN,{prefixCls:e,percent:t}))}function LN(r){const{prefixCls:e,indicator:t,percent:n,className:i,style:o}=r,l=`${e}-dot`;return t&&T.isValidElement(t)?Ea(t,c=>({className:Ct(c.className,l,i),style:{...c.style,...o},percent:n})):T.createElement(kN,{prefixCls:e,percent:n,className:i,style:o})}const NN=new or("antSpinMove",{to:{opacity:1}}),DN=new or("antRotate",{to:{transform:"rotate(405deg)"}}),PN=r=>{const{componentCls:e}=r,t=`${e}-section`;return{[e]:{...la(r),position:"relative","&-rtl":{direction:"rtl"},[`&${t}, ${t}`]:{display:"flex",alignItems:"center",flexDirection:"column",gap:r.paddingSM,color:r.colorPrimary},[`&${t}`]:{display:"inline-flex"},[t]:{position:"absolute",top:"50%",left:{_skip_check_:!0,value:"50%"},transform:"translate(-50%, -50%)",zIndex:1},[`${e}-description`]:{fontSize:r.fontSize,lineHeight:1},[`${e}-container`]:{position:"relative",transition:`opacity ${r.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:r.colorBgContainer,opacity:0,transition:`all ${r.motionDurationSlow}`,content:'""',pointerEvents:"none"}},"&-spinning":{[`${e}-description`]:{textShadow:`0 0px 5px ${r.colorBgContainer}`},[`${e}-container`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-fullscreen":{position:"fixed",inset:0,backgroundColor:r.colorBgMask,zIndex:r.zIndexPopupBase,opacity:0,pointerEvents:"none",transition:`all ${r.motionDurationMid}`,[`&${e}-spinning`]:{opacity:1,pointerEvents:"auto"},[t]:{color:r.colorWhite,[`${e}-description`]:{color:r.colorTextLightSolid}}}}}},MN=r=>{const{componentCls:e,antCls:t,motionDurationSlow:n}=r,[i,o]=va(t,"spin");return{[e]:{[i("dot-holder-size")]:r.dotSize,[i("dot-item-size")]:`calc((${o("dot-holder-size")} - ${r.marginXXS} / 2) / 2)`,[`${e}-dot`]:{"&-holder":{width:"1em",height:"1em",fontSize:o("dot-holder-size"),display:"inline-block",transition:["transform","opacity"].map(l=>`${l} ${n} ease`).join(", "),transformOrigin:"50% 50%",lineHeight:1,"&-hidden":{transform:"scale(0.3)",opacity:0}},position:"relative",display:"inline-block",fontSize:o("dot-holder-size"),width:"1em",height:"1em","&-spin":{transform:"rotate(45deg)",animationName:DN,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-item":{position:"absolute",display:"block",width:o("dot-item-size"),height:o("dot-item-size"),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:NN,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-progress":{position:"absolute",left:"50%",top:0,transform:"translateX(-50%)"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(l=>`${l} ${n} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:r.colorFillSecondary}}}}},ON=r=>{const{componentCls:e}=r,[t]=va(r.antCls,"spin");return{[e]:{"&-sm":{[t("dot-holder-size")]:r.dotSizeSM},"&-lg":{[t("dot-holder-size")]:r.dotSizeLG}}}},FN=r=>{const{controlHeightLG:e,controlHeight:t}=r;return{contentHeight:400,dotSize:e/2,dotSizeSM:e*.35,dotSizeLG:t}},zN=ai("Spin",r=>{const e=Nr(r,{spinDotDefault:r.colorTextDescription});return[PN(e),MN(e),ON(e)]},FN),UN=200,Sb=[[30,.05],[70,.03],[96,.01]];function BN(r,e){const[t,n]=T.useState(0),i=T.useRef(null),o=e==="auto";return T.useEffect(()=>(o&&r&&(n(0),i.current=setInterval(()=>{n(l=>{const c=100-l;for(let u=0;u<Sb.length;u+=1){const[d,m]=Sb[u];if(l<=d)return l+c*m}return l})},UN)),()=>{i.current&&(clearInterval(i.current),i.current=null)}),[o,r]),o?t:e}let tT;function $N(r,e){return!!r&&!!e&&!Number.isNaN(Number(e))}const nT=r=>{const{prefixCls:e,spinning:t=!0,delay:n=0,className:i,rootClassName:o,size:l="default",tip:c,description:u,wrapperClassName:d,style:m,children:f,fullscreen:h=!1,indicator:g,percent:p,classNames:E,styles:S,...A}=r,{getPrefixCls:x,direction:k,indicator:U,className:Y,style:Q,classNames:L,styles:O}=Xr("spin"),G=x("spin",e),[te,ge]=zN(G),[Me,he]=T.useState(()=>t&&!$N(t,n)),De=BN(Me,p);T.useEffect(()=>{if(t){const ct=eN(n,()=>{he(!0)});return ct(),()=>{ct?.cancel?.()}}he(!1)},[n,t]);const _e=u??c,ke={...r,size:l,spinning:Me,tip:_e,description:_e,fullscreen:h,children:f,percent:De},[Oe,He]=Ei([L,E],[O,S],{props:ke}),Pe=g??U??tT,Ge=typeof f<"u",qe=Ge||h,Ze=T.createElement(T.Fragment,null,T.createElement(LN,{className:Ct(Oe.indicator),style:He.indicator,prefixCls:G,indicator:Pe,percent:De}),_e&&T.createElement("div",{className:Ct(`${G}-description`,Oe.tip,Oe.description),style:{...He.tip,...He.description}},_e));return T.createElement("div",{className:Ct(G,{[`${G}-sm`]:l==="small",[`${G}-lg`]:l==="large",[`${G}-spinning`]:Me,[`${G}-rtl`]:k==="rtl",[`${G}-fullscreen`]:h},o,Oe.root,h&&Oe.mask,qe?d:[`${G}-section`,Oe.section],Y,i,te,ge),style:{...He.root,...qe?{}:He.section,...h?He.mask:{},...Q,...m},"aria-live":"polite","aria-busy":Me,...A},Me&&(qe?T.createElement("div",{className:Ct(`${G}-section`,Oe.section),style:He.section},Ze):Ze),Ge&&T.createElement("div",{className:Ct(`${G}-container`,Oe.container),style:He.container},f))};nT.setDefaultIndicator=r=>{tT=r};const jN=(r,e=!1)=>e&&!Ba(r)?[]:Array.isArray(r)?r:[r];let es=null,rs=r=>r(),Go=[],Ho={};function wb(){const{getContainer:r,duration:e,rtl:t,maxCount:n,top:i}=Ho,o=r?.()||document.body;return{getContainer:()=>o,duration:e,rtl:t,maxCount:n,top:i}}const qN=Je.forwardRef((r,e)=>{const{messageConfig:t,sync:n}=r,{getPrefixCls:i}=T.useContext(Lr),o=Ho.prefixCls||i("message"),l=T.useContext(Ok),[c,u]=ZE({...t,prefixCls:o,...l.message});return Je.useImperativeHandle(e,()=>{const d={...c};return Object.keys(d).forEach(m=>{d[m]=(...f)=>(n(),c[m].apply(c,f))}),{instance:d,sync:n}}),u}),GN=Je.forwardRef((r,e)=>{const[t,n]=Je.useState(wb),i=()=>{n(wb)};Je.useEffect(i,[]);const o=_I(),l=o.getRootPrefixCls(),c=o.getIconPrefixCls(),u=o.getTheme(),d=Je.createElement(qN,{ref:e,sync:i,messageConfig:t});return Je.createElement(wI,{prefixCls:l,iconPrefixCls:c,theme:u},o.holderRender?o.holderRender(d):d)}),nu=()=>{if(!es){const r=document.createDocumentFragment(),e={fragment:r};es=e,rs(()=>{JE(Je.createElement(GN,{ref:t=>{const{instance:n,sync:i}=t||{};Promise.resolve().then(()=>{!e.instance&&n&&(e.instance=n,e.sync=i,nu())})}}),r)});return}es.instance&&(Go.forEach(r=>{const{type:e,skipped:t}=r;if(!t)switch(e){case"open":{rs(()=>{const n=es.instance.open({...Ho,...r.config});n?.then(r.resolve),r.setCloseFn(n)});break}case"destroy":rs(()=>{es?.instance.destroy(r.key)});break;default:rs(()=>{var n;const i=(n=es.instance)[e].apply(n,Fr(r.args));i?.then(r.resolve),r.setCloseFn(i)})}}),Go=[])};function HN(r){Ho={...Ho,...r},rs(()=>{es?.sync?.()})}function VN(r){const e=Bh(t=>{let n;const i={type:"open",config:r,resolve:t,setCloseFn:o=>{n=o}};return Go.push(i),()=>{n?rs(()=>{n()}):i.skipped=!0}});return nu(),e}function KN(r,e){const t=Bh(n=>{let i;const o={type:r,args:e,resolve:n,setCloseFn:l=>{i=l}};return Go.push(o),()=>{i?rs(()=>{i()}):o.skipped=!0}});return nu(),t}const YN=r=>{Go.push({type:"destroy",key:r}),nu()},WN=["success","info","warning","error","loading"],XN={open:VN,destroy:YN,config:HN,useMessage:iR,_InternalPanelDoNotUseOrYouWillBeFired:QA},ac=XN;WN.forEach(r=>{ac[r]=(...e)=>KN(r,e)});const QN={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,railColor:"#D9D9D9",railWidth:1,gapPosition:"bottom",loading:!1},ZN=()=>{const r=T.useRef([]),e=T.useRef(null);return T.useEffect(()=>{const t=Date.now();let n=!1;r.current.forEach(i=>{if(!i)return;n=!0;const o=i.style;o.transitionDuration=".3s, .3s, .3s, .06s",e.current&&t-e.current<100&&(o.transitionDuration="0s, 0s")}),n&&(e.current=Date.now())}),r.current},_b=({bg:r,children:e})=>T.createElement("div",{style:{width:"100%",height:"100%",background:r}},e);function xb(r,e){return Object.keys(r).map(t=>{const n=parseFloat(t),i=`${Math.floor(n*e)}%`;return`${r[t]} ${i}`})}const JN=T.forwardRef((r,e)=>{const{prefixCls:t,color:n,gradientId:i,radius:o,className:l,style:c,ptg:u,strokeLinecap:d,strokeWidth:m,size:f,gapDegree:h}=r,g=n&&typeof n=="object",p=g?"#FFF":void 0,E=f/2,S=T.createElement("circle",{className:Ct(`${t}-circle-path`,l),r:o,cx:E,cy:E,stroke:p,strokeLinecap:d,strokeWidth:m,opacity:u===0?0:1,style:c,ref:e});if(!g)return S;const A=`${i}-conic`,x=h?`${180+h/2}deg`:"0deg",k=xb(n,(360-h)/360),U=xb(n,1),Y=`conic-gradient(from ${x}, ${k.join(", ")})`,Q=`linear-gradient(to ${h?"bottom":"top"}, ${U.join(", ")})`;return T.createElement(T.Fragment,null,T.createElement("mask",{id:A},S),T.createElement("foreignObject",{x:0,y:0,width:f,height:f,mask:`url(#${A})`},T.createElement(_b,{bg:Q},T.createElement(_b,{bg:Y}))))}),Io=100,dd=(r,e,t,n,i,o,l,c,u,d,m=0)=>{const f=t/100*360*((360-o)/360),h=o===0?0:{bottom:0,top:180,left:90,right:-90}[l];let g=(100-n)/100*e;u==="round"&&n!==100&&(g+=d/2,g>=e&&(g=e-.01));const p=Io/2;return{stroke:typeof c=="string"?c:void 0,strokeDasharray:`${e}px ${r}`,strokeDashoffset:g+m,transform:`rotate(${i+f+h}deg)`,transformOrigin:`${p}px ${p}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},eD=(({id:r,loading:e})=>{if(!e)return{indeterminateStyleProps:{},indeterminateStyleAnimation:null};const t=`${r}-indeterminate-animate`;return{indeterminateStyleProps:{transform:"rotate(0deg)",animation:`${t} 1s linear infinite`},indeterminateStyleAnimation:Je.createElement("style",null,`@keyframes ${t} {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }`)}});function Yf(){return Yf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Yf.apply(this,arguments)}function Ib(r){const e=r??[];return Array.isArray(e)?e:[e]}const tD=r=>{const{id:e,prefixCls:t,classNames:n={},styles:i={},steps:o,strokeWidth:l,railWidth:c,gapDegree:u=0,gapPosition:d,railColor:m,strokeLinecap:f,style:h,className:g,strokeColor:p,percent:E,loading:S,...A}={...QN,...r},x=Io/2,k=Yc(e),U=`${k}-gradient`,Y=x-l/2,Q=Math.PI*2*Y,L=u>0?90+u/2:-90,O=Q*((360-u)/360),{count:G,gap:te}=typeof o=="object"?o:{count:o,gap:2},ge=Ib(E),Me=Ib(p),he=Me.find(Ze=>Ze&&typeof Ze=="object"),_e=he&&typeof he=="object"?"butt":f,{indeterminateStyleProps:ke,indeterminateStyleAnimation:Oe}=eD({id:k,loading:S}),He=dd(Q,O,0,100,L,u,d,m,_e,l),Pe=ZN(),Ge=()=>{let Ze=0;return ge.map((ct,mt)=>{const xe=Me[mt]||Me[Me.length-1],Ie=dd(Q,O,Ze,ct,L,u,d,xe,_e,l);return Ze+=ct,T.createElement(JN,{key:mt,color:xe,ptg:ct,radius:Y,prefixCls:t,gradientId:U,className:n.track,style:{...Ie,...ke,...i.track},strokeLinecap:_e,strokeWidth:l,gapDegree:u,ref:Ke=>{Pe[mt]=Ke},size:Io})}).reverse()},qe=()=>{const Ze=Math.round(G*(ge[0]/100)),ct=100/G;let mt=0;return new Array(G).fill(null).map((xe,Ie)=>{const Ke=Ie<=Ze-1?Me[0]:m,H=Ke&&typeof Ke=="object"?`url(#${U})`:void 0,V=dd(Q,O,mt,ct,L,u,d,Ke,"butt",l,te);return mt+=(O-V.strokeDashoffset+te)*100/O,T.createElement("circle",{key:Ie,className:Ct(`${t}-circle-path`,n.track),r:Y,cx:x,cy:x,stroke:H,strokeWidth:l,opacity:1,style:{...V,...i.track},ref:C=>{Pe[Ie]=C}})})};return T.createElement("svg",Yf({className:Ct(`${t}-circle`,n.root,g),viewBox:`0 0 ${Io} ${Io}`,style:{...i.root,...h},id:e,role:"presentation"},A),!G&&T.createElement("circle",{className:Ct(`${t}-circle-rail`,n.rail),r:Y,cx:x,cy:x,stroke:m,strokeLinecap:_e,strokeWidth:c||l,style:{...He,...i.rail}}),G?qe():Ge(),Oe)};function as(r){return!r||r<0?0:r>100?100:r}function Dc({success:r}){let e;return r&&"percent"in r&&(e=r.percent),e}const nD=({percent:r,success:e})=>{const t=as(Dc({success:e}));return[t,as(as(r)-t)]},rD=({success:r={},strokeColor:e})=>{const{strokeColor:t}=r;return[t||Qd.green,e||null]},ru=(r,e,t)=>{let n=-1,i=-1;if(e==="step"){const o=t.steps,l=t.strokeWidth;typeof r=="string"||typeof r>"u"?(n=r==="small"?2:14,i=l??8):typeof r=="number"?[n,i]=[r,r]:[n=14,i=8]=Array.isArray(r)?r:[r.width,r.height],n*=o}else if(e==="line"){const o=t?.strokeWidth;typeof r=="string"||typeof r>"u"?i=o||(r==="small"?6:8):typeof r=="number"?[n,i]=[r,r]:[n=-1,i=8]=Array.isArray(r)?r:[r.width,r.height]}else(e==="circle"||e==="dashboard")&&(typeof r=="string"||typeof r>"u"?[n,i]=r==="small"?[60,60]:[120,120]:typeof r=="number"?[n,i]=[r,r]:Array.isArray(r)&&(n=r[0]??r[1]??120,i=r[0]??r[1]??120));return[n,i]},iD=3,aD=r=>iD/r*100,Ab=["root","body","indicator"],sD=r=>{const{prefixCls:e,classNames:t,styles:n,railColor:i,trailColor:o,strokeLinecap:l="round",gapPosition:c,gapPlacement:u,gapDegree:d,width:m=120,type:f,children:h,success:g,size:p=m,steps:E}=r,{direction:S}=Xr("progress"),A=i??o,[x,k]=ru(p,"circle");let{strokeWidth:U}=r;U===void 0&&(U=Math.max(aD(x),6));const Y={width:x,height:k,fontSize:x*.15+6},Q=T.useMemo(()=>{if(d||d===0)return d;if(f==="dashboard")return 75},[d,f]),L=nD(r),O=T.useMemo(()=>{const _e=(u??c)||f==="dashboard"&&"bottom"||void 0,ke=S==="rtl";switch(_e){case"start":return ke?"right":"left";case"end":return ke?"left":"right";default:return _e}},[S,u,c,f]),G=Object.prototype.toString.call(r.strokeColor)==="[object Object]",te=rD({success:g,strokeColor:r.strokeColor}),ge=Ct(`${e}-body`,{[`${e}-circle-gradient`]:G},t.body),Me=T.createElement(tD,{steps:E,percent:E?L[1]:L,strokeWidth:U,railWidth:U,strokeColor:E?te[1]:te,strokeLinecap:l,railColor:A,prefixCls:e,gapDegree:Q,gapPosition:O,classNames:Ki(t,Ab),styles:Ki(n,Ab)}),he=x<=20,De=T.createElement("div",{className:ge,style:{...Y,...n.body}},Me,!he&&h);return he?T.createElement(ds,{title:h},De):De},Wf="--progress-line-stroke-color",oD=r=>{const e="-100%";return new or("antProgressLTRActive",{"0%":{transform:`translateX(${e}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${e}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},lD=r=>{const{componentCls:e,iconCls:t}=r;return{[e]:{...la(r),display:"inline-flex","&-rtl":{direction:"rtl"},[`${e}-indicator`]:{color:r.colorText,lineHeight:1,whiteSpace:"nowrap",verticalAlign:"middle",wordBreak:"normal",[t]:{fontSize:r.fontSize}},[`&${e}-status-exception`]:{[`${e}-indicator`]:{color:r.colorError}},[`&${e}-status-success`]:{[`${e}-indicator`]:{color:r.colorSuccess}}}}},cD=r=>{const{componentCls:e}=r;return{[`${e}-line`]:{position:"relative",width:"100%",fontSize:r.fontSize,[`${e}-body`]:{display:"inline-flex",alignItems:"center",width:"100%",gap:r.marginXS},[`${e}-rail`]:{flex:"auto",background:r.remainingColor,borderRadius:r.lineBorderRadius,position:"relative",width:"100%"},[`&${e}-status-active`]:{[`${e}-track:after`]:{content:'""',position:"absolute",inset:0,backgroundColor:r.colorBgContainer,borderRadius:"inherit",opacity:0,animationName:oD(),animationDuration:r.progressActiveMotionDuration,animationTimingFunction:r.motionEaseOutQuint,animationIterationCount:"infinite"}},[`${e}-track`]:{position:"absolute",insetInlineStart:0,insetBlock:0,borderRadius:"inherit",background:r.defaultColor,transition:`all ${r.motionDurationSlow} ${r.motionEaseInOutCirc}`,minWidth:"max-content",display:"flex",alignItems:"center","&-success":{background:r.colorSuccess}},[`&${e}-status-exception`]:{[`${e}-track`]:{background:r.colorError}},[`&${e}-status-success`]:{[`${e}-track`]:{background:r.colorSuccess}},[`${e}-indicator-outer`]:{[`&${e}-indicator-start`]:{order:-1}},[`${e}-body-layout-bottom`]:{flexDirection:"column",alignItems:"center",gap:r.marginXXS},[`${e}-indicator${e}-indicator-inner`]:{color:r.colorWhite,paddingInline:r.paddingXXS,width:"100%",display:"flex",justifyContent:"center",[`&${e}-indicator-end`]:{justifyContent:"end"},[`&${e}-indicator-start`]:{justifyContent:"start"},[`&${e}-indicator-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}}},uD=r=>{const{componentCls:e,iconCls:t}=r;return{[`${e}-circle`]:{[`${e}-circle-rail`]:{stroke:r.remainingColor},[`${e}-body:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:r.defaultColor}},[`${e}-body`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`${e}-indicator`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:r.circleTextColor,fontSize:r.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[t]:{fontSize:r.circleIconFontSize}},[`&${e}-status-exception`]:{[`${e}-body:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:r.colorError}}},[`&${e}-status-success`]:{[`${e}-body:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:r.colorSuccess}}}},[`${e}-inline-circle`]:{lineHeight:1,[`${e}-inner`]:{verticalAlign:"bottom"}}}},dD=r=>{const{componentCls:e}=r;return{[e]:{[`${e}-steps`]:{display:"inline-block","&-body":{display:"flex",flexDirection:"row",alignItems:"center",gap:r.progressStepMarginInlineEnd,[`${e}-indicator`]:{marginInlineStart:r.marginXS}},"&-item":{flexShrink:0,minWidth:r.progressStepMinWidth,backgroundColor:r.remainingColor,transition:`all ${r.motionDurationSlow}`,"&-active":{backgroundColor:r.defaultColor}}}}}},fD=r=>{const{componentCls:e,iconCls:t}=r;return{[e]:{[`${e}-small&-line, ${e}-small&-line ${e}-indicator ${t}`]:{fontSize:r.fontSizeSM}}}},hD=r=>({circleTextColor:r.colorText,defaultColor:r.colorInfo,remainingColor:r.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${r.fontSize/r.fontSizeSM}em`}),mD=ai("Progress",r=>{const e=r.calc(r.marginXXS).div(2).equal(),t=Nr(r,{progressStepMarginInlineEnd:e,progressStepMinWidth:e,progressActiveMotionDuration:"2.4s"});return[lD(t),cD(t),uD(t),dD(t),fD(t)]},hD),gD=r=>{let e=[];return Object.keys(r).forEach(t=>{const n=Number.parseFloat(t.replace(/%/g,""));Number.isNaN(n)||e.push({key:n,value:r[t]})}),e=e.sort((t,n)=>t.key-n.key),e.map(({key:t,value:n})=>`${n} ${t}%`).join(", ")},pD=(r,e)=>{const{from:t=Qd.blue,to:n=Qd.blue,direction:i=e==="rtl"?"to left":"to right",...o}=r;if(Object.keys(o).length!==0){const c=gD(o),u=`linear-gradient(${i}, ${c})`;return{background:u,[Wf]:u}}const l=`linear-gradient(${i}, ${t}, ${n})`;return{background:l,[Wf]:l}},yD=r=>{const{prefixCls:e,classNames:t,styles:n,direction:i,percent:o,size:l,strokeWidth:c,strokeColor:u,strokeLinecap:d="round",children:m,railColor:f,trailColor:h,percentPosition:g,success:p}=r,{align:E,type:S}=g,A=f??h,x=d==="square"||d==="butt"?0:void 0,k=l??[-1,c||(l==="small"?6:8)],[U,Y]=ru(k,"line",{strokeWidth:c}),Q={backgroundColor:A||void 0,borderRadius:x,height:Y},L=`${e}-track`,O=u&&typeof u!="string"?pD(u,i):{[Wf]:u,background:u},G={width:`${as(o)}%`,height:Y,borderRadius:x,...O},te=Dc(r),ge={width:`${as(te)}%`,height:Y,borderRadius:x,backgroundColor:p?.strokeColor};return T.createElement("div",{className:Ct(`${e}-body`,t.body,{[`${e}-body-layout-bottom`]:E==="center"&&S==="outer"}),style:{width:U>0?U:"100%",...n.body}},T.createElement("div",{className:Ct(`${e}-rail`,t.rail),style:{...Q,...n.rail}},T.createElement("div",{className:Ct(L,t.track),style:{...G,...n.track}},S==="inner"&&m),te!==void 0&&T.createElement("div",{className:Ct(L,`${L}-success`,t.track),style:{...ge,...n.track}})),S==="outer"&&m)},bD=r=>{const{classNames:e,styles:t,size:n,steps:i,rounding:o=Math.round,percent:l=0,strokeWidth:c=8,strokeColor:u,railColor:d,trailColor:m,prefixCls:f,children:h}=r,g=o(i*(l/100)),E=n??[n==="small"?2:14,c],[S,A]=ru(E,"step",{steps:i,strokeWidth:c}),x=S/i,k=Array.from({length:i}),U=d??m;for(let Y=0;Y<i;Y++){const Q=Array.isArray(u)?u[Y]:u;k[Y]=T.createElement("div",{key:Y,className:Ct(`${f}-steps-item`,{[`${f}-steps-item-active`]:Y<=g-1},e.track),style:{backgroundColor:Y<=g-1?Q:U,width:x,height:A,...t.track}})}return T.createElement("div",{className:Ct(`${f}-steps-body`,e.body),style:t.body},k,h)},ED=["normal","exception","active","success"],vD=T.forwardRef((r,e)=>{const{prefixCls:t,className:n,rootClassName:i,classNames:o,styles:l,steps:c,strokeColor:u,percent:d=0,size:m="default",showInfo:f=!0,type:h="line",status:g,format:p,style:E,percentPosition:S={},...A}=r,{align:x="end",type:k="outer"}=S,U=Array.isArray(u)?u[0]:u,Y=typeof u=="string"||Array.isArray(u)?u:void 0,Q=T.useMemo(()=>{if(U){const Ke=typeof U=="string"?U:Object.values(U)[0];return new Dh(Ke).isLight()}return!1},[u]),L=T.useMemo(()=>{const Ke=Dc(r);return Number.parseInt(Ke!==void 0?(Ke??0)?.toString():(d??0)?.toString(),10)},[d,r.success]),O=T.useMemo(()=>!ED.includes(g)&&L>=100?"success":g||"normal",[g,L]),{getPrefixCls:G,direction:te,className:ge,style:Me,classNames:he,styles:De}=Xr("progress"),_e=G("progress",t),[ke,Oe]=mD(_e),He={...r,percent:d,type:h,size:m,showInfo:f,percentPosition:S},[Pe,Ge]=Ei([he,o],[De,l],{props:He}),qe=h==="line",Ze=qe&&!c,ct=T.useMemo(()=>{if(!f)return null;const Ke=Dc(r);let H;const V=p||(F=>`${F}%`),C=qe&&Q&&k==="inner";return k==="inner"||p||O!=="exception"&&O!=="success"?H=V(as(d),as(Ke)):O==="exception"?H=qe?T.createElement(Fh,null):T.createElement($E,null):O==="success"&&(H=qe?T.createElement(BE,null):T.createElement(Ev,null)),T.createElement("span",{className:Ct(`${_e}-indicator`,{[`${_e}-indicator-bright`]:C,[`${_e}-indicator-${x}`]:Ze,[`${_e}-indicator-${k}`]:Ze},Pe.indicator),style:Ge.indicator,title:typeof H=="string"?H:void 0},H)},[f,d,L,O,h,_e,p,qe,Q,k,x,Ze,Pe.indicator,Ge.indicator]),mt={...r,classNames:Pe,styles:Ge};let xe;h==="line"?xe=c?T.createElement(bD,{...mt,strokeColor:Y,prefixCls:_e,steps:typeof c=="object"?c.count:c},ct):T.createElement(yD,{...mt,strokeColor:U,prefixCls:_e,direction:te,percentPosition:{align:x,type:k}},ct):(h==="circle"||h==="dashboard")&&(xe=T.createElement(sD,{...mt,strokeColor:U,prefixCls:_e,progressStatus:O},ct));const Ie=Ct(_e,`${_e}-status-${O}`,{[`${_e}-${h==="dashboard"&&"circle"||h}`]:h!=="line",[`${_e}-inline-circle`]:h==="circle"&&ru(m,"circle")[0]<=20,[`${_e}-line`]:Ze,[`${_e}-line-align-${x}`]:Ze,[`${_e}-line-position-${k}`]:Ze,[`${_e}-steps`]:c,[`${_e}-show-info`]:f,[`${_e}-${m}`]:typeof m=="string",[`${_e}-rtl`]:te==="rtl"},ge,n,i,Pe.root,ke,Oe);return T.createElement("div",{ref:e,style:{...Me,...Ge.root,...E},className:Ie,role:"progressbar","aria-valuenow":L,"aria-valuemin":0,"aria-valuemax":100,...Ki(A,["railColor","trailColor","strokeWidth","width","gapDegree","gapPosition","gapPlacement","strokeLinecap","success"])},xe)});var TD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};function Xf(){return Xf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Xf.apply(this,arguments)}const SD=(r,e)=>T.createElement(Dr,Xf({},r,{ref:e,icon:TD})),wD=T.forwardRef(SD);var _D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function Qf(){return Qf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Qf.apply(this,arguments)}const xD=(r,e)=>T.createElement(Dr,Qf({},r,{ref:e,icon:_D})),ID=T.forwardRef(xD);var AD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};function Zf(){return Zf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Zf.apply(this,arguments)}const RD=(r,e)=>T.createElement(Dr,Zf({},r,{ref:e,icon:AD})),CD=T.forwardRef(RD),kD=(r,e,t,n)=>{const{titleMarginBottom:i,fontWeightStrong:o}=n;return{marginBottom:i,color:t,fontWeight:o,fontSize:r,lineHeight:e}},LD=r=>{const e=[1,2,3,4,5],t={};return e.forEach(n=>{t[`
      h${n}&,
      div&-h${n},
      div&-h${n} > textarea,
      h${n}
    `]=kD(r[`fontSizeHeading${n}`],r[`lineHeightHeading${n}`],r.colorTextHeading,r)}),t},ND=r=>{const{componentCls:e}=r;return{[`&${`${e}-link`}`]:{...AE(r),userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:r.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:r.colorTextDisabled},"&:active":{pointerEvents:"none"}}}}},DD=r=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:r.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:r.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:xI[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:r.fontWeightStrong},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:r.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),PD=r=>{const{componentCls:e,paddingSM:t}=r,n=t;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:r.calc(r.paddingSM).mul(-1).equal(),insetBlockStart:r.calc(n).div(-2).add(1).equal(),marginBottom:r.calc(n).div(2).sub(2).equal()},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:r.calc(r.marginXS).add(2).equal(),insetBlockEnd:r.marginXS,color:r.colorIcon,fontWeight:"normal",fontSize:r.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},MD=r=>({[`${r.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:r.colorSuccess}},[`${r.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),OD=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),FD=r=>{const{componentCls:e,titleMarginTop:t}=r;return{[e]:{color:r.colorText,wordBreak:"break-word",lineHeight:r.lineHeight,[`&${e}-secondary, &${e}-link${e}-secondary`]:{color:r.colorTextDescription},[`&${e}-success, &${e}-link${e}-success`]:{color:r.colorSuccessText},[`&${e}-warning, &${e}-link${e}-warning`]:{color:r.colorWarningText},[`&${e}-danger, &${e}-link${e}-danger`]:{color:r.colorErrorText,[`&${e}-link:active, &${e}-link:focus`]:{color:r.colorErrorTextActive},[`&${e}-link:hover`]:{color:r.colorErrorTextHover}},[`&${e}-disabled`]:{color:r.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"},...LD(r),[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:t},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:t}},...DD(r),...ND(r),[`
        ${e}-expand,
        ${e}-collapse,
        ${e}-edit,
        ${e}-copy
      `]:{...AE(r),marginInlineStart:r.marginXXS},...PD(r),...MD(r),...OD(),"&-rtl":{direction:"rtl"}}}},zD=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),rT=ai("Typography",FD,zD),UD=r=>{const{prefixCls:e,"aria-label":t,className:n,style:i,direction:o,maxLength:l,autoSize:c=!0,value:u,onSave:d,onCancel:m,onEnd:f,component:h,enterIcon:g=T.createElement(CD,null)}=r,p=T.useRef(null),E=T.useRef(!1),S=T.useRef(null),[A,x]=T.useState(u);T.useEffect(()=>{x(u)},[u]),T.useEffect(()=>{if(p.current?.resizableTextArea){const{textArea:he}=p.current.resizableTextArea;he.focus();const{length:De}=he.value;he.setSelectionRange(De,De)}},[]);const k=({target:he})=>{x(he.value.replace(/[\n\r]/g,""))},U=()=>{E.current=!0},Y=()=>{E.current=!1},Q=({keyCode:he})=>{E.current||(S.current=he)},L=()=>{d(A.trim())},O=({keyCode:he,ctrlKey:De,altKey:_e,metaKey:ke,shiftKey:Oe})=>{S.current!==he||E.current||De||_e||ke||Oe||(he===ri.ENTER?(L(),f?.()):he===ri.ESC&&m())},G=()=>{L()},[te,ge]=rT(e),Me=Ct(e,`${e}-edit-content`,{[`${e}-rtl`]:o==="rtl",[`${e}-${h}`]:!!h},n,te,ge);return T.createElement("div",{className:Me,style:i},T.createElement(RN,{ref:p,maxLength:l,value:A,onChange:k,onKeyDown:Q,onKeyUp:O,onCompositionStart:U,onCompositionEnd:Y,onBlur:G,"aria-label":t,rows:1,autoSize:c}),g!==null?Ea(g,{className:`${e}-edit-content-confirm`}):null)},BD=(r,e)=>{let t=!1;const n=i=>{i.stopPropagation(),i.preventDefault(),i.clipboardData?.clearData(),i.clipboardData?.setData("text/plain",r),e&&i.clipboardData?.setData("text/html",r),t=!0};try{return document.addEventListener("copy",n,{capture:!0}),document.execCommand("copy"),t}catch{return!1}finally{document.removeEventListener("copy",n,{capture:!0})}},$D=async(r,e)=>{try{return e?await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([r],{type:"text/html"}),"text/plain":new Blob([r],{type:"text/plain"})})]):await navigator.clipboard.writeText(r),!0}catch{return!1}};async function jD(r,e){if(typeof r!="string")return!1;const t=e?.format==="text/html";return!!(await $D(r,t)||BD(r,t))}const qD=({copyConfig:r,children:e})=>{const[t,n]=T.useState(!1),[i,o]=T.useState(!1),l=T.useRef(null),c=()=>{l.current&&clearTimeout(l.current)},u={};r.format&&(u.format=r.format),T.useEffect(()=>c,[]);const d=hi(async m=>{m?.preventDefault(),m?.stopPropagation(),o(!0);try{const f=typeof r.text=="function"?await r.text():r.text;await jD(f||jN(e,!0).join("")||"",u),o(!1),n(!0),c(),l.current=setTimeout(()=>{n(!1)},3e3),r.onCopy?.(m)}catch(f){throw o(!1),f}});return{copied:t,copyLoading:i,onClick:d}};function fd(r,e){return T.useMemo(()=>{const t=!!r;return[t,{...e,...t&&typeof r=="object"?r:null}]},[r])}const GD=r=>{const e=T.useRef(void 0);return T.useEffect(()=>{e.current=r}),e.current},HD=(r,e,t)=>T.useMemo(()=>r===!0?{title:e??t}:T.isValidElement(r)?{title:r}:typeof r=="object"?{title:e??t,...r}:{title:r},[r,e,t]),VD=T.forwardRef((r,e)=>{const{prefixCls:t,component:n="article",className:i,rootClassName:o,children:l,direction:c,style:u,...d}=r,{getPrefixCls:m,direction:f,className:h,style:g}=Xr("typography"),p=c??f,E=m("typography",t),[S,A]=rT(E),x=Ct(E,h,{[`${E}-rtl`]:p==="rtl"},i,o,S,A),k={...g,...u};return T.createElement(n,{className:x,style:k,ref:e,...d},l)});var KD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function Jf(){return Jf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Jf.apply(this,arguments)}const YD=(r,e)=>T.createElement(Dr,Jf({},r,{ref:e,icon:KD})),WD=T.forwardRef(YD);function Rb(r){return r===!1?[!1,!1]:Array.isArray(r)?r:[r]}function hd(r,e,t){return r===!0||r===void 0?e:r||t&&e}function XD(r){const e=document.createElement("em");r.appendChild(e);const t=r.getBoundingClientRect(),n=e.getBoundingClientRect();return r.removeChild(e),t.left>n.left||n.right>t.right||t.top>n.top||n.bottom>t.bottom}const em=r=>["string","number"].includes(typeof r),QD=({prefixCls:r,copied:e,locale:t,iconOnly:n,tooltips:i,icon:o,tabIndex:l,onCopy:c,loading:u})=>{const d=Rb(i),m=Rb(o),{copied:f,copy:h}=t??{},g=e?f:h,p=hd(d[e?1:0],g),E=typeof p=="string"?p:g;return T.createElement(ds,{title:p},T.createElement("button",{type:"button",className:Ct(`${r}-copy`,{[`${r}-copy-success`]:e,[`${r}-copy-icon-only`]:n}),onClick:c,"aria-label":E,tabIndex:l},e?hd(m[1],T.createElement(Ev,null),!0):hd(m[0],u?T.createElement(Uo,null):T.createElement(WD,null),!0)))},Fl=T.forwardRef(({style:r,children:e},t)=>{const n=T.useRef(null);return T.useImperativeHandle(t,()=>({isExceed:()=>{const i=n.current;return i.scrollHeight>i.clientHeight},getHeight:()=>n.current.clientHeight})),T.createElement("span",{"aria-hidden":!0,ref:n,style:{position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)",...r}},e)}),ZD=r=>r.reduce((e,t)=>e+(em(t)?String(t).length:1),0);function Cb(r,e){let t=0;const n=[];for(let i=0;i<r.length;i+=1){if(t===e)return n;const o=r[i],c=em(o)?String(o).length:1,u=t+c;if(u>e){const d=e-t;return n.push(String(o).slice(0,d)),n}n.push(o),t=u}return r}const md=0,gd=1,pd=2,yd=3,kb=4,zl={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function JD(r){const{enableMeasure:e,width:t,text:n,children:i,rows:o,expanded:l,miscDeps:c,onEllipsis:u}=r,d=T.useMemo(()=>us(n),[n]),m=T.useMemo(()=>ZD(d),[n]),f=T.useMemo(()=>i(d,!1),[n]),[h,g]=T.useState(null),p=T.useRef(null),E=T.useRef(null),S=T.useRef(null),A=T.useRef(null),x=T.useRef(null),[k,U]=T.useState(!1),[Y,Q]=T.useState(md),[L,O]=T.useState(0),[G,te]=T.useState(null);$r(()=>{Q(e&&t&&m?gd:md)},[t,n,o,e,d]),$r(()=>{if(Y===gd){Q(pd);const De=E.current&&getComputedStyle(E.current).whiteSpace;te(De)}else if(Y===pd){const De=!!S.current?.isExceed();Q(De?yd:kb),g(De?[0,m]:null),U(De);const _e=S.current?.getHeight()||0,ke=o===1?0:A.current?.getHeight()||0,Oe=x.current?.getHeight()||0,He=Math.max(_e,ke+Oe);O(He+1),u(De)}},[Y]);const ge=h?Math.ceil((h[0]+h[1])/2):0;$r(()=>{const[De,_e]=h||[0,0];if(De!==_e){const Oe=(p.current?.getHeight()||0)>L;let He=ge;_e-De===1&&(He=Oe?De:_e),g(Oe?[De,He]:[He,_e])}},[h,ge]);const Me=T.useMemo(()=>{if(!e)return i(d,!1);if(Y!==yd||!h||h[0]!==h[1]){const De=i(d,!1);return[kb,md].includes(Y)?De:T.createElement("span",{style:{...zl,WebkitLineClamp:o}},De)}return i(l?d:Cb(d,h[0]),k)},[l,Y,h,d].concat(Fr(c))),he={width:t,margin:0,padding:0,whiteSpace:G==="nowrap"?"normal":"inherit"};return T.createElement(T.Fragment,null,Me,Y===pd&&T.createElement(T.Fragment,null,T.createElement(Fl,{style:{...he,...zl,WebkitLineClamp:o},ref:S},f),T.createElement(Fl,{style:{...he,...zl,WebkitLineClamp:o-1},ref:A},f),T.createElement(Fl,{style:{...he,...zl,WebkitLineClamp:1},ref:x},i([],!0))),Y===yd&&h&&h[0]!==h[1]&&T.createElement(Fl,{style:{...he,top:400},ref:p},i(Cb(d,ge),!0)),Y===gd&&T.createElement("span",{style:{whiteSpace:"inherit"},ref:E}))}const eP=({enableEllipsis:r,isEllipsis:e,children:t,tooltipProps:n})=>!n?.title||!r?t:T.createElement(ds,{open:e?void 0:!1,...n},t);function tP({mark:r,code:e,underline:t,delete:n,strong:i,keyboard:o,italic:l},c){let u=c;function d(m,f){f&&(u=T.createElement(m,{},u))}return d("strong",i),d("u",t),d("del",n),d("code",e),d("mark",r),d("kbd",o),d("i",l),u}const nP="...",Lb=["delete","mark","code","underline","strong","keyboard","italic"],rP=T.forwardRef((r,e)=>{const{prefixCls:t,className:n,style:i,type:o,disabled:l,children:c,ellipsis:u,editable:d,copyable:m,component:f,title:h,...g}=r,{getPrefixCls:p,direction:E}=T.useContext(Lr),[S]=GE("Text"),A=T.useRef(null),x=T.useRef(null),k=p("typography",t),U=Ki(g,Lb),[Y,Q]=fd(d),[L,O]=ki(!1,Q.editing),{triggerType:G=["icon"]}=Q,te=tt=>{tt&&Q.onStart?.(),O(tt)},ge=GD(L);$r(()=>{!L&&ge&&x.current?.focus()},[L]);const Me=tt=>{tt?.preventDefault(),te(!0)},he=tt=>{Q.onChange?.(tt),te(!1)},De=()=>{Q.onCancel?.(),te(!1)},[_e,ke]=fd(m),{copied:Oe,copyLoading:He,onClick:Pe}=qD({copyConfig:ke,children:c}),[Ge,qe]=T.useState(!1),[Ze,ct]=T.useState(!1),[mt,xe]=T.useState(!1),[Ie,Ke]=T.useState(!1),[H,V]=T.useState(!0),[C,F]=fd(u,{expandable:!1,symbol:tt=>tt?S?.collapse:S?.expand}),[oe,Z]=ki(F.defaultExpanded||!1,F.expanded),Be=C&&(!oe||F.expandable==="collapsible"),{rows:Xe=1}=F,$e=T.useMemo(()=>Be&&(F.suffix!==void 0||F.onEllipsis||F.expandable||Y||_e),[Be,F,Y,_e]);$r(()=>{C&&!$e&&(qe(Wy("webkitLineClamp")),ct(Wy("textOverflow")))},[$e,C]);const[Ve,je]=T.useState(Be),Qe=T.useMemo(()=>$e?!1:Xe===1?Ze:Ge,[$e,Ze,Ge]);$r(()=>{je(Qe&&Be)},[Qe,Be]);const dt=Be&&(Ve?Ie:mt),it=Be&&Xe===1&&Ve,rt=Be&&Xe>1&&Ve,Ot=(tt,ht)=>{Z(ht.expanded),F.onExpand?.(tt,ht)},[pt,kt]=T.useState(0),wt=({offsetWidth:tt})=>{kt(tt)},fn=tt=>{xe(tt),mt!==tt&&F.onEllipsis?.(tt)};T.useEffect(()=>{const tt=A.current;if(C&&Ve&&tt){const ht=XD(tt);Ie!==ht&&Ke(ht)}},[C,Ve,c,rt,H,pt]),T.useEffect(()=>{const tt=A.current;if(typeof IntersectionObserver>"u"||!tt||!Ve||!Be)return;const ht=new IntersectionObserver(()=>{V(!!tt.offsetParent)});return ht.observe(tt),()=>{ht.disconnect()}},[Ve,Be]);const Tn=HD(F.tooltip,Q.text,c),Fn=T.useMemo(()=>{if(!(!C||Ve))return[Q.text,c,h,Tn.title].find(em)},[C,Ve,h,Tn.title,dt]);if(L)return T.createElement(UD,{value:Q.text??(typeof c=="string"?c:""),onSave:he,onCancel:De,onEnd:Q.onEnd,prefixCls:k,className:n,style:i,direction:E,component:f,maxLength:Q.maxLength,autoSize:Q.autoSize,enterIcon:Q.enterIcon});const In=()=>{const{expandable:tt,symbol:ht}=F;return tt?T.createElement("button",{type:"button",key:"expand",className:`${k}-${oe?"collapse":"expand"}`,onClick:Ut=>Ot(Ut,{expanded:!oe}),"aria-label":oe?S.collapse:S?.expand},typeof ht=="function"?ht(oe):ht):null},dn=()=>{if(!Y)return;const{icon:tt,tooltip:ht,tabIndex:Ut}=Q,Lt=us(ht)[0]||S?.edit,qt=typeof Lt=="string"?Lt:"";return G.includes("icon")?T.createElement(ds,{key:"edit",title:ht===!1?"":Lt},T.createElement("button",{type:"button",ref:x,className:`${k}-edit`,onClick:Me,"aria-label":qt,tabIndex:Ut},tt||T.createElement(ID,{role:"button"}))):null},pn=()=>_e?T.createElement(QD,{key:"copy",...ke,prefixCls:k,copied:Oe,locale:S,onCopy:Pe,loading:He,iconOnly:!Ba(c)}):null,Pt=tt=>[tt&&In(),dn(),pn()],At=tt=>[tt&&!oe&&T.createElement("span",{"aria-hidden":!0,key:"ellipsis"},nP),F.suffix,Pt(tt)];return T.createElement(is,{onResize:wt,disabled:!Be},tt=>T.createElement(eP,{tooltipProps:Tn,enableEllipsis:Be,isEllipsis:dt},T.createElement(VD,{className:Ct({[`${k}-${o}`]:o,[`${k}-disabled`]:l,[`${k}-ellipsis`]:C,[`${k}-ellipsis-single-line`]:it,[`${k}-ellipsis-multiple-line`]:rt,[`${k}-link`]:f==="a"},n),prefixCls:t,style:{...i,WebkitLineClamp:rt?Xe:void 0},component:f,ref:nl(tt,A,e),direction:E,onClick:G.includes("text")?Me:void 0,"aria-label":Fn?.toString(),title:h,...U},T.createElement(JD,{enableMeasure:Be&&!Ve,text:c,rows:Xe,width:pt,onEllipsis:fn,expanded:oe,miscDeps:[Oe,oe,He,Y,_e,S].concat(Fr(Lb.map(ht=>r[ht])))},(ht,Ut)=>tP(r,T.createElement(T.Fragment,null,ht.length>0&&Ut&&!oe&&Fn?T.createElement("span",{key:"show-content","aria-hidden":!0},ht):ht,At(Ut)))))))}),iP=[1,2,3,4,5],bd=T.forwardRef((r,e)=>{const{level:t=1,children:n,...i}=r,o=iP.includes(t)?`h${t}`:"h1";return T.createElement(rP,{ref:e,...i,component:o},n)}),aP=((r,e)=>{if(r&&e){const t=Array.isArray(e)?e:e.split(","),n=r.name||"",i=r.type||"",o=i.replace(/\/.*$/,"");return t.some(l=>{const c=l.trim();if(/^\*(\/\*)?$/.test(l))return!0;if(c.charAt(0)==="."){const u=n.toLowerCase(),d=c.toLowerCase();let m=[d];return(d===".jpg"||d===".jpeg")&&(m=[".jpg",".jpeg"]),m.some(f=>u.endsWith(f))}return/\/\*$/.test(c)?o===c.replace(/\/.*$/,""):i===c?!0:/^\w+$/.test(c)?(Ci(!1,`Upload takes an invalidate 'accept' type '${c}'.Skip for check.`),!0):!1})}return!0});function sP(r,e){const t=`cannot ${r.method} ${r.action} ${e.status}'`,n=new Error(t);return n.status=e.status,n.method=r.method,n.url=r.action,n}function Nb(r){const e=r.responseText||r.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}function Db(r){const e=new XMLHttpRequest;r.onProgress&&e.upload&&(e.upload.onprogress=function(o){o.total>0&&(o.percent=o.loaded/o.total*100),r.onProgress(o)});const t=new FormData;r.data&&Object.keys(r.data).forEach(i=>{const o=r.data[i];if(Array.isArray(o)){o.forEach(l=>{t.append(`${i}[]`,l)});return}t.append(i,o)}),r.file instanceof Blob?t.append(r.filename,r.file,r.file.name):t.append(r.filename,r.file),e.onerror=function(o){r.onError(o)},e.onload=function(){return e.status<200||e.status>=300?r.onError(sP(r,e),Nb(e)):r.onSuccess(Nb(e),e)},e.open(r.method,r.action,!0),r.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const n=r.headers||{};return n["X-Requested-With"]!==null&&e.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(n).forEach(i=>{n[i]!==null&&e.setRequestHeader(i,n[i])}),e.send(t),{abort(){e.abort()}}}const oP=async(r,e)=>{const t=[],n=[];r.forEach(u=>n.push(u.webkitGetAsEntry()));async function i(u){const d=u.createReader(),m=[];for(;;){const f=await new Promise(g=>{d.readEntries(g,()=>g([]))}),h=f.length;if(!h)break;for(let g=0;g<h;g++)m.push(f[g])}return m}async function o(u){return new Promise(d=>{u.file(m=>{e(m)?(u.fullPath&&!m.webkitRelativePath&&(Object.defineProperties(m,{webkitRelativePath:{writable:!0}}),m.webkitRelativePath=u.fullPath.replace(/^\//,""),Object.defineProperties(m,{webkitRelativePath:{writable:!1}})),d(m)):d(null)})})}const l=async(u,d)=>{if(u){if(u.path="",u.isFile){const m=await o(u);m&&t.push(m)}else if(u.isDirectory){const m=await i(u);n.push(...m)}}};let c=0;for(;c<n.length;)await l(n[c]),c++;return t},lP=+new Date;let cP=0;function Ed(){return`rc-upload-${lP}-${++cP}`}function Pc(){return Pc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Pc.apply(this,arguments)}class uP extends T.Component{state={uid:Ed()};reqs={};fileInput;_isMounted;filterFile=(e,t=!1)=>{const{accept:n,directory:i}=this.props;let o,l;if(typeof n=="string")l=n;else{const{filter:u,format:d}=n||{};l=d,u==="native"?o=()=>!0:o=u}return(o||(i||t?u=>aP(u,l):()=>!0))(e)};onChange=e=>{const{files:t}=e.target,n=[...t].filter(i=>this.filterFile(i));this.uploadFiles(n),this.reset()};onClick=e=>{const t=this.fileInput;if(!t)return;const n=e.target,{onClick:i}=this.props;n&&n.tagName==="BUTTON"&&(t.parentNode.focus(),n.blur()),t.click(),i&&i(e)};onKeyDown=e=>{e.key==="Enter"&&this.onClick(e)};onDataTransferFiles=async(e,t)=>{const{multiple:n,directory:i}=this.props,o=[...e.items||[]];let l=[...e.files||[]];if((l.length>0||o.some(c=>c.kind==="file"))&&t?.(),i)l=await oP(Array.prototype.slice.call(o),this.filterFile),this.uploadFiles(l);else{let c=[...l].filter(u=>this.filterFile(u,!0));n===!1&&(c=l.slice(0,1)),this.uploadFiles(c)}};onFilePaste=async e=>{const{pastable:t}=this.props;if(t&&e.type==="paste"){const n=e.clipboardData;return this.onDataTransferFiles(n,()=>{e.preventDefault()})}};onFileDragOver=e=>{e.preventDefault()};onFileDrop=async e=>{if(e.preventDefault(),e.type==="drop"){const t=e.dataTransfer;return this.onDataTransferFiles(t)}};componentDidMount(){this._isMounted=!0;const{pastable:e}=this.props;e&&document.addEventListener("paste",this.onFilePaste)}componentWillUnmount(){this._isMounted=!1,this.abort(),document.removeEventListener("paste",this.onFilePaste)}componentDidUpdate(e){const{pastable:t}=this.props;t&&!e.pastable?document.addEventListener("paste",this.onFilePaste):!t&&e.pastable&&document.removeEventListener("paste",this.onFilePaste)}uploadFiles=e=>{const t=[...e],n=t.map(i=>(i.uid=Ed(),this.processFile(i,t)));Promise.all(n).then(i=>{const{onBatchStart:o}=this.props;o?.(i.map(({origin:l,parsedFile:c})=>({file:l,parsedFile:c}))),i.filter(l=>l.parsedFile!==null).forEach(l=>{this.post(l)})})};processFile=async(e,t)=>{const{beforeUpload:n}=this.props;let i=e;if(n){try{i=await n(e,t)}catch{i=!1}if(i===!1)return{origin:e,parsedFile:null,action:null,data:null}}const{action:o}=this.props;let l;typeof o=="function"?l=await o(e):l=o;const{data:c}=this.props;let u;typeof c=="function"?u=await c(e):u=c;const d=(typeof i=="object"||typeof i=="string")&&i?i:e;let m;d instanceof File?m=d:m=new File([d],e.name,{type:e.type});const f=m;return f.uid=e.uid,{origin:e,data:u,parsedFile:f,action:l}};post({data:e,origin:t,action:n,parsedFile:i}){if(!this._isMounted)return;const{onStart:o,customRequest:l,name:c,headers:u,withCredentials:d,method:m}=this.props,{uid:f}=t,h=l||Db,g={action:n,filename:c,data:e,file:i,headers:u,withCredentials:d,method:m||"post",onProgress:p=>{const{onProgress:E}=this.props;E?.(p,i)},onSuccess:(p,E)=>{const{onSuccess:S}=this.props;S?.(p,i,E),delete this.reqs[f]},onError:(p,E)=>{const{onError:S}=this.props;S?.(p,E,i),delete this.reqs[f]}};o(t),this.reqs[f]=h(g,{defaultRequest:Db})}reset(){this.setState({uid:Ed()})}abort(e){const{reqs:t}=this;if(e){const n=e.uid?e.uid:e;t[n]&&t[n].abort&&t[n].abort(),delete t[n]}else Object.keys(t).forEach(n=>{t[n]&&t[n].abort&&t[n].abort(),delete t[n]})}saveFileInput=e=>{this.fileInput=e};render(){const{component:e,prefixCls:t,className:n,classNames:i={},disabled:o,id:l,name:c,style:u,styles:d={},multiple:m,accept:f,capture:h,children:g,directory:p,openFileDialogOnClick:E,onMouseEnter:S,onMouseLeave:A,hasControlInside:x,...k}=this.props,U=typeof f=="string"?f:f?.format,Y=Ct(t,{[`${t}-disabled`]:o,[n]:n}),Q=p?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},L=o?{}:{onClick:E?this.onClick:()=>{},onKeyDown:E?this.onKeyDown:()=>{},onMouseEnter:S,onMouseLeave:A,onDrop:this.onFileDrop,onDragOver:this.onFileDragOver,tabIndex:x?void 0:"0"};return Je.createElement(e,Pc({},L,{className:Y,role:x?void 0:"button",style:u}),Je.createElement("input",Pc({},qE(k,{aria:!0,data:!0}),{id:l,name:c,disabled:o,type:"file",ref:this.saveFileInput,onClick:O=>O.stopPropagation(),key:this.state.uid,style:{display:"none",...d.input},className:i.input,accept:U},Q,{multiple:m,onChange:this.onChange},h!=null?{capture:h}:{})),g)}}function eh(){return eh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},eh.apply(this,arguments)}function vd(){}let Pb=class extends T.Component{static defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:vd,onError:vd,onSuccess:vd,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1};uploader;abort(e){this.uploader.abort(e)}saveUploader=e=>{this.uploader=e};render(){return Je.createElement(uP,eh({},this.props,{ref:this.saveUploader}))}};const dP=r=>{const{componentCls:e,iconCls:t}=r;return{[`${e}-wrapper`]:{[`${e}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:r.colorFillAlter,border:`${an(r.lineWidth)} dashed ${r.colorBorder}`,borderRadius:r.borderRadiusLG,cursor:"pointer",transition:`border-color ${r.motionDurationSlow}`,[e]:{padding:r.padding},[`${e}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:r.borderRadiusLG,"&:focus-visible":{outline:`${an(r.lineWidthFocus)} solid ${r.colorPrimaryBorder}`}},[`${e}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${e}-disabled):hover,
          &-hover:not(${e}-disabled)
        `]:{borderColor:r.colorPrimaryHover},[`p${e}-drag-icon`]:{marginBottom:r.margin,[t]:{color:r.colorPrimary,fontSize:r.uploadThumbnailSize}},[`p${e}-text`]:{margin:`0 0 ${an(r.marginXXS)}`,color:r.colorTextHeading,fontSize:r.fontSizeLG},[`p${e}-hint`]:{color:r.colorTextDescription,fontSize:r.fontSize},[`&${e}-disabled`]:{[`p${e}-drag-icon ${t},
            p${e}-text,
            p${e}-hint
          `]:{color:r.colorTextDisabled}}}}}},fP=r=>{const{componentCls:e,iconCls:t,fontSize:n,lineHeight:i,motionDurationSlow:o,calc:l}=r,c=`${e}-list-item`,u=`${c}-actions`,d=`${c}-action`;return{[`${e}-wrapper`]:{[`${e}-list`]:{...no(),lineHeight:r.lineHeight,[c]:{position:"relative",height:l(r.lineHeight).mul(n).equal(),marginTop:r.marginXS,fontSize:n,display:"flex",alignItems:"center",transition:`background-color ${o}`,borderRadius:r.borderRadiusSM,"&:hover":{backgroundColor:r.controlItemBgHover},[`${c}-name`]:{...rl,padding:`0 ${an(r.paddingXS)}`,lineHeight:i,flex:"auto",transition:`all ${o}`},[u]:{whiteSpace:"nowrap",[d]:{opacity:0},[t]:{color:r.actionsColor,transition:`all ${o}`},[`
              ${d}:focus-visible,
              &.picture ${d}
            `]:{opacity:1}},[`${e}-icon ${t}`]:{color:r.colorIcon,fontSize:n},[`${c}-progress`]:{position:"absolute",bottom:r.calc(r.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:l(n).add(r.paddingXS).equal(),fontSize:n,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${c}:hover ${d}`]:{opacity:1},[`${c}-error`]:{color:r.colorError,[`${c}-name, ${e}-icon ${t}`]:{color:r.colorError},[u]:{[`${t}, ${t}:hover`]:{color:r.colorError},[d]:{opacity:1}}},[`${e}-list-item-container`]:{transition:["opacity","height"].map(m=>`${m} ${o}`).join(", "),"&::before":{display:"table",width:0,height:0,content:'""'}}}}}},hP=r=>{const{componentCls:e}=r,t=new or("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:r.calc(r.marginXS).div(-2).equal()}}),n=new or("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:r.calc(r.marginXS).div(-2).equal()}}),i=`${e}-animate-inline`;return[{[`${e}-wrapper`]:{[`${i}-appear, ${i}-enter, ${i}-leave`]:{animationDuration:r.motionDurationSlow,animationTimingFunction:r.motionEaseInOutCirc,animationFillMode:"forwards"},[`${i}-appear, ${i}-enter`]:{animationName:t},[`${i}-leave`]:{animationName:n}}},{[`${e}-wrapper`]:sv(r)},t,n]},mP=r=>{const{componentCls:e,iconCls:t,uploadThumbnailSize:n,uploadProgressOffset:i,calc:o}=r,l=`${e}-list`,c=`${l}-item`;return{[`${e}-wrapper`]:{[`
        ${l}${l}-picture,
        ${l}${l}-picture-card,
        ${l}${l}-picture-circle
      `]:{[c]:{position:"relative",height:o(n).add(o(r.lineWidth).mul(2)).add(o(r.paddingXS).mul(2)).equal(),padding:r.paddingXS,border:`${an(r.lineWidth)} ${r.lineType} ${r.colorBorder}`,borderRadius:r.borderRadiusLG,"&:hover":{background:"transparent"},[`${c}-thumbnail`]:{...rl,width:n,height:n,lineHeight:an(o(n).add(r.paddingSM).equal()),textAlign:"center",flex:"none",[t]:{fontSize:r.fontSizeHeading2,color:r.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}},[`${c}-progress`]:{bottom:o(r.fontSize).mul(r.lineHeight).div(2).add(i).equal(),width:`calc(100% - ${an(o(r.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:o(n).add(r.paddingXS).equal()}},[`${c}-error`]:{borderColor:r.colorError,[`${c}-thumbnail ${t}`]:{[`svg path[fill='${Wd[0]}']`]:{fill:r.colorErrorBg},[`svg path[fill='${Wd.primary}']`]:{fill:r.colorError}}},[`${c}-uploading`]:{borderStyle:"dashed",[`${c}-name`]:{marginBottom:i}}},[`${l}${l}-picture-circle ${c}`]:{[`&, &::before, ${c}-thumbnail`]:{borderRadius:"50%"}}}}},gP=r=>{const{componentCls:e,iconCls:t,fontSizeLG:n,colorTextLightSolid:i,calc:o}=r,l=`${e}-list`,c=`${l}-item`,u=r.uploadPicCardSize;return{[`
      ${e}-wrapper${e}-picture-card-wrapper,
      ${e}-wrapper${e}-picture-circle-wrapper
    `]:{...no(),display:"block",[`${e}${e}-select`]:{width:u,height:u,textAlign:"center",verticalAlign:"top",backgroundColor:r.colorFillAlter,border:`${an(r.lineWidth)} dashed ${r.colorBorder}`,borderRadius:r.borderRadiusLG,cursor:"pointer",transition:`border-color ${r.motionDurationSlow}`,[`> ${e}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${e}-disabled):hover`]:{borderColor:r.colorPrimary}},[`${l}${l}-picture-card, ${l}${l}-picture-circle`]:{display:"flex",flexWrap:"wrap",height:u,"@supports not (gap: 1px)":{"& > *":{marginBlockEnd:r.marginXS,marginInlineEnd:r.marginXS}},"@supports (gap: 1px)":{gap:r.marginXS},[`${l}-item-container`]:{display:"inline-block",width:u,height:u,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[c]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${an(o(r.paddingXS).mul(2).equal())})`,height:`calc(100% - ${an(o(r.paddingXS).mul(2).equal())})`,backgroundColor:r.colorBgMask,opacity:0,transition:`all ${r.motionDurationSlow}`,content:'" "'}},[`${c}:hover`]:{[`&::before, ${c}-actions`]:{opacity:1}},[`${c}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${r.motionDurationSlow}`,[`
            ${t}-eye,
            ${t}-download,
            ${t}-delete
          `]:{zIndex:10,width:n,margin:`0 ${an(r.marginXXS)}`,fontSize:n,cursor:"pointer",transition:`all ${r.motionDurationSlow}`,color:i,"&:hover":{color:i},svg:{verticalAlign:"baseline"}}},[`${c}-thumbnail, ${c}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${c}-name`]:{display:"none",textAlign:"center"},[`${c}-file + ${c}-name`]:{position:"absolute",bottom:r.margin,display:"block",width:`calc(100% - ${an(o(r.paddingXS).mul(2).equal())})`},[`${c}-uploading`]:{[`&${c}`]:{backgroundColor:r.colorFillAlter},[`&::before, ${t}-eye, ${t}-download, ${t}-delete`]:{display:"none"}},[`${c}-progress`]:{bottom:r.marginXL,width:`calc(100% - ${an(o(r.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}},[`${e}-wrapper${e}-picture-circle-wrapper`]:{[`${e}${e}-select`]:{borderRadius:"50%"}}}},pP=r=>{const{componentCls:e}=r;return{[`${e}-rtl`]:{direction:"rtl"}}},yP=r=>{const{componentCls:e,colorTextDisabled:t}=r;return{[`${e}-wrapper`]:{...la(r),[e]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${e}-select`]:{display:"inline-block"},[`${e}-hidden`]:{display:"none"},[`${e}-disabled`]:{color:t,cursor:"not-allowed"}}}},bP=r=>({actionsColor:r.colorIcon,pictureCardSize:r.controlHeightLG*2.55}),EP=ai("Upload",r=>{const{fontSizeHeading3:e,marginXS:t,lineWidth:n,pictureCardSize:i,calc:o}=r,l=Nr(r,{uploadThumbnailSize:o(e).mul(2).equal(),uploadProgressOffset:o(o(t).div(2)).add(n).equal(),uploadPicCardSize:i});return[yP(l),dP(l),mP(l),gP(l),fP(l),hP(l),pP(l),xR(l)]},bP);var vP={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"};function th(){return th=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},th.apply(this,arguments)}const TP=(r,e)=>T.createElement(Dr,th({},r,{ref:e,icon:vP})),SP=T.forwardRef(TP);var wP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};function nh(){return nh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},nh.apply(this,arguments)}const _P=(r,e)=>T.createElement(Dr,nh({},r,{ref:e,icon:wP})),xP=T.forwardRef(_P);var IP={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"};function rh(){return rh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},rh.apply(this,arguments)}const AP=(r,e)=>T.createElement(Dr,rh({},r,{ref:e,icon:IP})),RP=T.forwardRef(AP);function Ul(r){return{...r,lastModified:r.lastModified,lastModifiedDate:r.lastModifiedDate,name:r.name,size:r.size,type:r.type,uid:r.uid,percent:0,originFileObj:r}}function Bl(r,e){const t=Fr(e),n=t.findIndex(({uid:i})=>i===r.uid);return n===-1?t.push(r):t[n]=r,t}function Td(r,e){const t=r.uid!==void 0?"uid":"name";return e.filter(n=>n[t]===r[t])[0]}function CP(r,e){const t=r.uid!==void 0?"uid":"name",n=e.filter(i=>i[t]!==r[t]);return n.length===e.length?null:n}const kP=(r="")=>{const e=r.split("/"),n=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0]},iT=r=>r.indexOf("image/")===0,LP=r=>{if(r.type&&!r.thumbUrl)return iT(r.type);const e=r.thumbUrl||r.url||"",t=kP(e);return/^data:image\//.test(e)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(t)?!0:!(/^data:/.test(e)||t)},ka=200;function NP(r){return new Promise(e=>{if(!r.type||!iT(r.type)){e("");return}const t=document.createElement("canvas");t.width=ka,t.height=ka,t.style.cssText=`position: fixed; left: 0; top: 0; width: ${ka}px; height: ${ka}px; z-index: 9999; display: none;`,document.body.appendChild(t);const n=t.getContext("2d"),i=new Image;if(i.onload=()=>{const{width:o,height:l}=i;let c=ka,u=ka,d=0,m=0;o>l?(u=l*(ka/o),m=-(u-c)/2):(c=o*(ka/l),d=-(c-u)/2),n.drawImage(i,d,m,c,u);const f=t.toDataURL();document.body.removeChild(t),window.URL.revokeObjectURL(i.src),e(f)},i.crossOrigin="anonymous",r.type.startsWith("image/svg+xml")){const o=new FileReader;o.onload=()=>{o.result&&typeof o.result=="string"&&(i.src=o.result)},o.readAsDataURL(r)}else if(r.type.startsWith("image/gif")){const o=new FileReader;o.onload=()=>{o.result&&e(o.result)},o.readAsDataURL(r)}else i.src=window.URL.createObjectURL(r)})}var DP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};function ih(){return ih=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ih.apply(this,arguments)}const PP=(r,e)=>T.createElement(Dr,ih({},r,{ref:e,icon:DP})),MP=T.forwardRef(PP),OP=T.forwardRef(({prefixCls:r,className:e,style:t,classNames:n,styles:i,locale:o,listType:l,file:c,items:u,progress:d,iconRender:m,actionIconRender:f,itemRender:h,isImgUrl:g,showPreviewIcon:p,showRemoveIcon:E,showDownloadIcon:S,previewIcon:A,removeIcon:x,downloadIcon:k,extra:U,onPreview:Y,onDownload:Q,onClose:L},O)=>{const{status:G}=c,[te,ge]=T.useState(G);T.useEffect(()=>{G!=="removed"&&ge(G)},[G]);const[Me,he]=T.useState(!1);T.useEffect(()=>{const oe=setTimeout(()=>{he(!0)},300);return()=>{clearTimeout(oe)}},[]);const De=m(c);let _e=T.createElement("div",{className:`${r}-icon`},De);if(l==="picture"||l==="picture-card"||l==="picture-circle")if(te==="uploading"||!c.thumbUrl&&!c.url){const oe=Ct(`${r}-list-item-thumbnail`,{[`${r}-list-item-file`]:te!=="uploading"});_e=T.createElement("div",{className:oe},De)}else{const oe=g?.(c)?T.createElement("img",{src:c.thumbUrl||c.url,alt:c.name,className:`${r}-list-item-image`,crossOrigin:c.crossOrigin}):De,Z=Ct(`${r}-list-item-thumbnail`,{[`${r}-list-item-file`]:g&&!g(c)});_e=T.createElement("a",{className:Z,onClick:Be=>Y(c,Be),href:c.url||c.thumbUrl,target:"_blank",rel:"noopener noreferrer"},oe)}const ke=Ct(`${r}-list-item`,`${r}-list-item-${te}`,n?.item),Oe=typeof c.linkProps=="string"?JSON.parse(c.linkProps):c.linkProps,He=(typeof E=="function"?E(c):E)?f((typeof x=="function"?x(c):x)||T.createElement(wD,null),()=>L(c),r,o.removeFile,!0):null,Pe=(typeof S=="function"?S(c):S)&&te==="done"?f((typeof k=="function"?k(c):k)||T.createElement(MP,null),()=>Q(c),r,o.downloadFile):null,Ge=l!=="picture-card"&&l!=="picture-circle"&&T.createElement("span",{key:"download-delete",className:Ct(`${r}-list-item-actions`,{picture:l==="picture"})},Pe,He),qe=typeof U=="function"?U(c):U,Ze=qe&&T.createElement("span",{className:`${r}-list-item-extra`},qe),ct=Ct(`${r}-list-item-name`),mt=c.url?T.createElement("a",{key:"view",target:"_blank",rel:"noopener noreferrer",className:ct,title:c.name,...Oe,href:c.url,onClick:oe=>Y(c,oe)},c.name,Ze):T.createElement("span",{key:"view",className:ct,onClick:oe=>Y(c,oe),title:c.name},c.name,Ze),xe=(typeof p=="function"?p(c):p)&&(c.url||c.thumbUrl)?T.createElement("a",{href:c.url||c.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:oe=>Y(c,oe),title:o.previewFile},typeof A=="function"?A(c):A||T.createElement(EN,null)):null,Ie=(l==="picture-card"||l==="picture-circle")&&te!=="uploading"&&T.createElement("span",{className:`${r}-list-item-actions`},xe,te==="done"&&Pe,He),{getPrefixCls:Ke}=T.useContext(Lr),H=Ke(),V=T.createElement("div",{className:ke,style:i?.item},_e,mt,Ge,Ie,Me&&T.createElement(cs,{motionName:`${H}-fade`,visible:te==="uploading",motionDeadline:2e3},({className:oe})=>{const Z="percent"in c?T.createElement(vD,{type:"line",percent:c.percent,"aria-label":c["aria-label"],"aria-labelledby":c["aria-labelledby"],...d}):null;return T.createElement("div",{className:Ct(`${r}-list-item-progress`,oe)},Z)})),C=c.response&&typeof c.response=="string"?c.response:c.error?.statusText||c.error?.message||o.uploadError,F=te==="error"?T.createElement(ds,{title:C,getPopupContainer:oe=>oe.parentNode},V):V;return T.createElement("div",{className:Ct(`${r}-list-item-container`,e),style:t,ref:O},h?h(F,c,u,{download:Q.bind(null,c),preview:Y.bind(null,c),remove:L.bind(null,c)}):F)}),FP=(r,e)=>{const{listType:t="text",previewFile:n=NP,onPreview:i,onDownload:o,onRemove:l,locale:c,iconRender:u,isImageUrl:d=LP,prefixCls:m,items:f=[],showPreviewIcon:h=!0,showRemoveIcon:g=!0,showDownloadIcon:p=!1,removeIcon:E,previewIcon:S,downloadIcon:A,extra:x,progress:k={size:[-1,2],showInfo:!1},appendAction:U,appendActionVisible:Y=!0,itemRender:Q,disabled:L,classNames:O,styles:G}=r,[,te]=IA(),[ge,Me]=T.useState(!1),he=["picture-card","picture-circle"].includes(t);T.useEffect(()=>{t.startsWith("picture")&&(f||[]).forEach(xe=>{!(xe.originFileObj instanceof File||xe.originFileObj instanceof Blob)||xe.thumbUrl!==void 0||(xe.thumbUrl="",n?.(xe.originFileObj).then(Ie=>{xe.thumbUrl=Ie||"",te()}))})},[t,f,n]),T.useEffect(()=>{Me(!0)},[]);const De=(xe,Ie)=>{if(i)return Ie?.preventDefault(),i(xe)},_e=xe=>{typeof o=="function"?o(xe):xe.url&&window.open(xe.url)},ke=xe=>{l?.(xe)},Oe=xe=>{if(u)return u(xe,t);const Ie=xe.status==="uploading";if(t.startsWith("picture")){const Ke=t==="picture"?T.createElement(Uo,null):c.uploading,H=d?.(xe)?T.createElement(RP,null):T.createElement(SP,null);return Ie?Ke:H}return Ie?T.createElement(Uo,null):T.createElement(xP,null)},He=(xe,Ie,Ke,H,V)=>{const C={type:"text",size:"small",title:H,onClick:F=>{Ie(),T.isValidElement(xe)&&xe.props.onClick?.(F)},className:`${Ke}-list-item-action`,disabled:V?L:!1};return T.isValidElement(xe)?T.createElement(wc,{...C,icon:Ea(xe,{...xe.props,onClick:()=>{}})}):T.createElement(wc,{...C},T.createElement("span",null,xe))};T.useImperativeHandle(e,()=>({handlePreview:De,handleDownload:_e}));const{getPrefixCls:Pe}=T.useContext(Lr),Ge=Pe("upload",m),qe=Pe(),Ze=Ct(`${Ge}-list`,`${Ge}-list-${t}`,O?.list),ct=T.useMemo(()=>Ki(oR(qe),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[qe]),mt={...he?{}:ct,motionDeadline:2e3,motionName:`${Ge}-${he?"animate-inline":"animate"}`,keys:Fr(f.map(xe=>({key:xe.uid,file:xe}))),motionAppear:ge};return T.createElement("div",{className:Ze,style:G?.list},T.createElement(jE,{...mt,component:!1},({key:xe,file:Ie,className:Ke,style:H})=>T.createElement(OP,{key:xe,locale:c,prefixCls:Ge,className:Ke,style:H,classNames:O,styles:G,file:Ie,items:f,progress:k,listType:t,isImgUrl:d,showPreviewIcon:h,showRemoveIcon:g,showDownloadIcon:p,removeIcon:E,previewIcon:S,downloadIcon:A,extra:x,iconRender:Oe,actionIconRender:He,itemRender:Q,onPreview:De,onDownload:_e,onClose:ke})),U&&T.createElement(cs,{...mt,visible:Y,forceRender:!0},({className:xe,style:Ie})=>Ea(U,Ke=>({className:Ct(Ke.className,xe),style:{...Ie,pointerEvents:xe?"none":void 0,...Ke.style}}))))},zP=T.forwardRef(FP),Ao=`__LIST_IGNORE_${Date.now()}__`,UP=(r,e)=>{const t=Xr("upload"),{fileList:n,defaultFileList:i,onRemove:o,showUploadList:l=!0,listType:c="text",onPreview:u,onDownload:d,onChange:m,onDrop:f,previewFile:h,disabled:g,locale:p,iconRender:E,isImageUrl:S,progress:A,prefixCls:x,className:k,type:U="select",children:Y,style:Q,itemRender:L,maxCount:O,data:G={},multiple:te=!1,hasControlInside:ge=!0,action:Me="",accept:he="",supportServerRender:De=!0,rootClassName:_e,styles:ke,classNames:Oe}=r,He=T.useContext(Ph),Pe=g??He,Ge=r.customRequest||t.customRequest,[qe,Ze]=ki(i,n),ct=qe||[],[mt,xe]=T.useState("drop"),Ie=T.useRef(null),Ke=T.useRef(null);T.useMemo(()=>{const yt=Date.now();(n||[]).forEach((Zt,un)=>{!Zt.uid&&!Object.isFrozen(Zt)&&(Zt.uid=`__AUTO__${yt}_${un}__`)})},[n]);const H=(yt,Zt,un)=>{let jt=Fr(Zt),on=!1;O===1?jt=jt.slice(-1):O&&(on=jt.length>O,jt=jt.slice(0,O)),Zs.flushSync(()=>{Ze(jt)});const cn={file:yt,fileList:jt};un&&(cn.event=un),(!on||yt.status==="removed"||jt.some(Tt=>Tt.uid===yt.uid))&&Zs.flushSync(()=>{m?.(cn)})},V=async(yt,Zt)=>{const{beforeUpload:un}=r;let jt=yt;if(un){const on=await un(yt,Zt);if(on===!1)return!1;if(delete yt[Ao],on===Ao)return Object.defineProperty(yt,Ao,{value:!0,configurable:!0}),!1;typeof on=="object"&&on&&(jt=on)}return jt},C=yt=>{const Zt=yt.filter(on=>!on.file[Ao]);if(!Zt.length)return;const un=Zt.map(on=>Ul(on.file));let jt=Fr(ct);un.forEach(on=>{jt=Bl(on,jt)}),un.forEach((on,cn)=>{let Tt=on;if(Zt[cn].parsedFile)on.status="uploading";else{const{originFileObj:ut}=on;let et;try{et=new File([ut],ut.name,{type:ut.type})}catch{et=new Blob([ut],{type:ut.type}),et.name=ut.name,et.lastModifiedDate=new Date,et.lastModified=new Date().getTime()}et.uid=on.uid,Tt=et}H(Tt,jt)})},F=(yt,Zt,un)=>{try{typeof yt=="string"&&(yt=JSON.parse(yt))}catch{}if(!Td(Zt,ct))return;const jt=Ul(Zt);jt.status="done",jt.percent=100,jt.response=yt,jt.xhr=un;const on=Bl(jt,ct);H(jt,on)},oe=(yt,Zt)=>{if(!Td(Zt,ct))return;const un=Ul(Zt);un.status="uploading",un.percent=yt.percent;const jt=Bl(un,ct);H(un,jt,yt)},Z=(yt,Zt,un)=>{if(!Td(un,ct))return;const jt=Ul(un);jt.error=yt,jt.response=Zt,jt.status="error";const on=Bl(jt,ct);H(jt,on)},Be=yt=>{let Zt;Promise.resolve(typeof o=="function"?o(yt):o).then(un=>{if(un===!1)return;const jt=CP(yt,ct);jt&&(Zt={...yt,status:"removed"},ct?.forEach(on=>{const cn=Zt.uid!==void 0?"uid":"name";on[cn]===Zt[cn]&&!Object.isFrozen(on)&&(on.status="removed")}),Ie.current?.abort(Zt),H(Zt,jt))})},Xe=yt=>{xe(yt.type),yt.type==="drop"&&f?.(yt)};T.useImperativeHandle(e,()=>({onBatchStart:C,onSuccess:F,onProgress:oe,onError:Z,fileList:ct,upload:Ie.current,nativeElement:Ke.current}));const{getPrefixCls:$e,direction:Ve,className:je,style:Qe,classNames:dt,styles:it}=Xr("upload"),rt=$e("upload",x),Ot={...r,listType:c,showUploadList:l,type:U,multiple:te,hasControlInside:ge,supportServerRender:De,disabled:Pe},[pt,kt]=Ei([dt,Oe],[it,ke],{props:Ot}),wt={onBatchStart:C,onError:Z,onProgress:oe,onSuccess:F,...r,customRequest:Ge,data:G,multiple:te,action:Me,accept:he,supportServerRender:De,prefixCls:rt,disabled:Pe,beforeUpload:V,onChange:void 0,hasControlInside:ge};delete wt.className,delete wt.style,(!Y||Pe)&&delete wt.id;const fn=`${rt}-wrapper`,[Tn,Fn]=EP(rt,fn),[In]=GE("Upload",Xd.Upload),{showRemoveIcon:dn,showPreviewIcon:pn,showDownloadIcon:Pt,removeIcon:At,previewIcon:tt,downloadIcon:ht,extra:Ut}=typeof l=="boolean"?{}:l,Lt=typeof dn>"u"?!Pe:dn,qt=(yt,Zt)=>l?T.createElement(zP,{classNames:pt,styles:kt,prefixCls:rt,listType:c,items:ct,previewFile:h,onPreview:u,onDownload:d,onRemove:Be,showRemoveIcon:Lt,showPreviewIcon:pn,showDownloadIcon:Pt,removeIcon:At,previewIcon:tt,downloadIcon:ht,iconRender:E,extra:Ut,locale:{...In,...p},isImageUrl:S,progress:A,appendAction:yt,appendActionVisible:Zt,itemRender:L,disabled:Pe}):yt,en=Ct(fn,k,_e,Tn,Fn,je,pt.root,{[`${rt}-rtl`]:Ve==="rtl",[`${rt}-picture-card-wrapper`]:c==="picture-card",[`${rt}-picture-circle-wrapper`]:c==="picture-circle"}),Rt={...kt.root},Ft={...Qe,...Q};if(U==="drag"){const yt=Ct(Tn,rt,`${rt}-drag`,{[`${rt}-drag-uploading`]:ct.some(Zt=>Zt.status==="uploading"),[`${rt}-drag-hover`]:mt==="dragover",[`${rt}-disabled`]:Pe,[`${rt}-rtl`]:Ve==="rtl"},pt.trigger);return T.createElement("span",{className:en,ref:Ke,style:Rt},T.createElement("div",{className:yt,style:{...Ft,...kt.trigger},onDrop:Xe,onDragOver:Xe,onDragLeave:Xe},T.createElement(Pb,{...wt,ref:Ie,className:`${rt}-btn`},T.createElement("div",{className:`${rt}-drag-container`},Y))),qt())}const Wt=Ct(rt,`${rt}-select`,{[`${rt}-disabled`]:Pe,[`${rt}-hidden`]:!Y},pt.trigger),Jt=T.createElement("div",{className:Wt,style:{...Ft,...kt.trigger}},T.createElement(Pb,{...wt,ref:Ie}));return c==="picture-card"||c==="picture-circle"?T.createElement("span",{className:en,ref:Ke,style:Rt},qt(Jt,!!Y)):T.createElement("span",{className:en,ref:Ke,style:Rt},Jt,qt())},aT=T.forwardRef(UP),BP=T.forwardRef((r,e)=>{const{style:t,height:n,hasControlInside:i=!1,children:o,...l}=r,c={...t,height:n};return T.createElement(aT,{ref:e,hasControlInside:i,...l,style:c,type:"drag"},o)}),tm=aT;tm.Dragger=BP;tm.LIST_IGNORE=Ao;var $P=class extends RE{constructor(r,e){super(),this.options=e,this.#n=r,this.#o=null,this.#s=fy(),this.bindMethods(),this.setOptions(e)}#n;#e=void 0;#r=void 0;#t=void 0;#i;#a;#s;#o;#g;#f;#h;#c;#u;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Mb(this.#e,this.options)?this.#d():this.updateResult(),this.#E())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ah(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ah(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#T(),this.#e.removeObserver(this)}setOptions(r){const e=this.options,t=this.#e;if(this.options=this.#n.defaultQueryOptions(r),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vi(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#e.setOptions(this.options),e._defaulted&&!yc(this.options,e)&&this.#n.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&Ob(this.#e,t,this.options,e)&&this.#d(),this.updateResult(),n&&(this.#e!==t||Vi(this.options.enabled,this.#e)!==Vi(e.enabled,this.#e)||ko(this.options.staleTime,this.#e)!==ko(e.staleTime,this.#e))&&this.#p();const i=this.#y();n&&(this.#e!==t||Vi(this.options.enabled,this.#e)!==Vi(e.enabled,this.#e)||i!==this.#l)&&this.#b(i)}getOptimisticResult(r){const e=this.#n.getQueryCache().build(this.#n,r),t=this.createResult(e,r);return qP(this,t)&&(this.#t=t,this.#a=this.options,this.#i=this.#e.state),t}getCurrentResult(){return this.#t}trackResult(r,e){return new Proxy(r,{get:(t,n)=>(this.trackProp(n),e?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,n))})}trackProp(r){this.#m.add(r)}getCurrentQuery(){return this.#e}refetch({...r}={}){return this.fetch({...r})}fetchOptimistic(r){const e=this.#n.defaultQueryOptions(r),t=this.#n.getQueryCache().build(this.#n,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(r){return this.#d({...r,cancelRefetch:r.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#d(r){this.#S();let e=this.#e.fetch(this.options,r);return r?.throwOnError||(e=e.catch(bc)),e}#p(){this.#v();const r=ko(this.options.staleTime,this.#e);if(Zd||this.#t.isStale||!hy(r))return;const t=II(this.#t.dataUpdatedAt,r)+1;this.#c=Ll.setTimeout(()=>{this.#t.isStale||this.updateResult()},t)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(r){this.#T(),this.#l=r,!(Zd||Vi(this.options.enabled,this.#e)===!1||!hy(this.#l)||this.#l===0)&&(this.#u=Ll.setInterval(()=>{(this.options.refetchIntervalInBackground||AI.isFocused())&&this.#d()},this.#l))}#E(){this.#p(),this.#b(this.#y())}#v(){this.#c&&(Ll.clearTimeout(this.#c),this.#c=void 0)}#T(){this.#u&&(Ll.clearInterval(this.#u),this.#u=void 0)}createResult(r,e){const t=this.#e,n=this.options,i=this.#t,o=this.#i,l=this.#a,u=r!==t?r.state:this.#r,{state:d}=r;let m={...d},f=!1,h;if(e._optimisticResults){const O=this.hasListeners(),G=!O&&Mb(r,e),te=O&&Ob(r,t,e,n);(G||te)&&(m={...m,...RI(d.data,r.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:E}=m;h=m.data;let S=!1;if(e.placeholderData!==void 0&&h===void 0&&E==="pending"){let O;i?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(O=i.data,S=!0):O=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,O!==void 0&&(E="success",h=my(i?.data,O,e),f=!0)}if(e.select&&h!==void 0&&!S)if(i&&h===o?.data&&e.select===this.#g)h=this.#f;else try{this.#g=e.select,h=e.select(h),h=my(i?.data,h,e),this.#f=h,this.#o=null}catch(O){this.#o=O}this.#o&&(g=this.#o,h=this.#f,p=Date.now(),E="error");const A=m.fetchStatus==="fetching",x=E==="pending",k=E==="error",U=x&&A,Y=h!==void 0,L={status:E,fetchStatus:m.fetchStatus,isPending:x,isSuccess:E==="success",isError:k,isInitialLoading:U,isLoading:U,data:h,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:A,isRefetching:A&&!x,isLoadingError:k&&!Y,isPaused:m.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&Y,isStale:nm(r,e),refetch:this.refetch,promise:this.#s,isEnabled:Vi(e.enabled,r)!==!1};if(this.options.experimental_prefetchInRender){const O=L.data!==void 0,G=L.status==="error"&&!O,te=he=>{G?he.reject(L.error):O&&he.resolve(L.data)},ge=()=>{const he=this.#s=L.promise=fy();te(he)},Me=this.#s;switch(Me.status){case"pending":r.queryHash===t.queryHash&&te(Me);break;case"fulfilled":(G||L.data!==Me.value)&&ge();break;case"rejected":(!G||L.error!==Me.reason)&&ge();break}}return L}updateResult(){const r=this.#t,e=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#a=this.options,this.#i.data!==void 0&&(this.#h=this.#e),yc(e,r))return;this.#t=e;const t=()=>{if(!r)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#m.size)return!0;const o=new Set(i??this.#m);return this.options.throwOnError&&o.add("error"),Object.keys(this.#t).some(l=>{const c=l;return this.#t[c]!==r[c]&&o.has(c)})};this.#w({listeners:t()})}#S(){const r=this.#n.getQueryCache().build(this.#n,this.options);if(r===this.#e)return;const e=this.#e;this.#e=r,this.#r=r.state,this.hasListeners()&&(e?.removeObserver(this),r.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#E()}#w(r){Qc.batch(()=>{r.listeners&&this.listeners.forEach(e=>{e(this.#t)}),this.#n.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function jP(r,e){return Vi(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Mb(r,e){return jP(r,e)||r.state.data!==void 0&&ah(r,e,e.refetchOnMount)}function ah(r,e,t){if(Vi(e.enabled,r)!==!1&&ko(e.staleTime,r)!=="static"){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&nm(r,e)}return!1}function Ob(r,e,t,n){return(r!==e||Vi(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&nm(r,t)}function nm(r,e){return Vi(e.enabled,r)!==!1&&r.isStaleByTime(ko(e.staleTime,r))}function qP(r,e){return!yc(r.getCurrentResult(),e)}var GP=class extends RE{#n;#e=void 0;#r;#t;constructor(r,e){super(),this.#n=r,this.setOptions(e),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){const e=this.options;this.options=this.#n.defaultMutationOptions(r),yc(this.options,e)||this.#n.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&gy(e.mutationKey)!==gy(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(r){this.#i(),this.#a(r)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#a()}mutate(r,e){return this.#t=e,this.#r?.removeObserver(this),this.#r=this.#n.getMutationCache().build(this.#n,this.options),this.#r.addObserver(this),this.#r.execute(r)}#i(){const r=this.#r?.state??CI();this.#e={...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}}#a(r){Qc.batch(()=>{if(this.#t&&this.hasListeners()){const e=this.#e.variables,t=this.#e.context,n={client:this.#n,meta:this.options.meta,mutationKey:this.options.mutationKey};if(r?.type==="success"){try{this.#t.onSuccess?.(r.data,e,t,n)}catch(i){Promise.reject(i)}try{this.#t.onSettled?.(r.data,null,e,t,n)}catch(i){Promise.reject(i)}}else if(r?.type==="error"){try{this.#t.onError?.(r.error,e,t,n)}catch(i){Promise.reject(i)}try{this.#t.onSettled?.(void 0,r.error,e,t,n)}catch(i){Promise.reject(i)}}}this.listeners.forEach(e=>{e(this.#e)})})}},sT=T.createContext(!1),HP=()=>T.useContext(sT);sT.Provider;function VP(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var KP=T.createContext(VP()),YP=()=>T.useContext(KP),WP=(r,e,t)=>{const n=t?.state.error&&typeof r.throwOnError=="function"?Mh(r.throwOnError,[t.state.error,t]):r.throwOnError;(r.suspense||r.experimental_prefetchInRender||n)&&(e.isReset()||(r.retryOnMount=!1))},XP=r=>{T.useEffect(()=>{r.clearReset()},[r])},QP=({result:r,errorResetBoundary:e,throwOnError:t,query:n,suspense:i})=>r.isError&&!e.isReset()&&!r.isFetching&&n&&(i&&r.data===void 0||Mh(t,[r.error,n])),ZP=r=>{if(r.suspense){const t=i=>i==="static"?i:Math.max(i??1e3,1e3),n=r.staleTime;r.staleTime=typeof n=="function"?(...i)=>t(n(...i)):t(n),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},JP=(r,e)=>r.isLoading&&r.isFetching&&!e,eM=(r,e)=>r?.suspense&&e.isPending,Fb=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function tM(r,e,t){const n=HP(),i=YP(),o=CE(),l=o.defaultQueryOptions(r);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const c=o.getQueryCache().get(l.queryHash);l._optimisticResults=n?"isRestoring":"optimistic",ZP(l),WP(l,i,c),XP(i);const u=!o.getQueryCache().get(l.queryHash),[d]=T.useState(()=>new e(o,l)),m=d.getOptimisticResult(l),f=!n&&r.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(h=>{const g=f?d.subscribe(Qc.batchCalls(h)):bc;return d.updateResult(),g},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),T.useEffect(()=>{d.setOptions(l)},[l,d]),eM(l,m))throw Fb(l,d,i);if(QP({result:m,errorResetBoundary:i,throwOnError:l.throwOnError,query:c,suspense:l.suspense}))throw m.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,m),l.experimental_prefetchInRender&&!Zd&&JP(m,n)&&(u?Fb(l,d,i):c?.promise)?.catch(bc).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?m:d.trackResult(m)}function nM(r,e){return tM(r,$P)}function rM(r,e){const t=CE(),[n]=T.useState(()=>new GP(t,r));T.useEffect(()=>{n.setOptions(r)},[n,r]);const i=T.useSyncExternalStore(T.useCallback(l=>n.subscribe(Qc.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=T.useCallback((l,c)=>{n.mutate(l,c).catch(bc)},[n]);if(i.error&&Mh(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}var iM={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};function sh(){return sh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},sh.apply(this,arguments)}const aM=(r,e)=>T.createElement(Dr,sh({},r,{ref:e,icon:iM})),sM=T.forwardRef(aM),zb=r=>Symbol.iterator in r,Ub=r=>"entries"in r,Bb=(r,e)=>{const t=r instanceof Map?r:new Map(r.entries()),n=e instanceof Map?e:new Map(e.entries());if(t.size!==n.size)return!1;for(const[i,o]of t)if(!n.has(i)||!Object.is(o,n.get(i)))return!1;return!0},oM=(r,e)=>{const t=r[Symbol.iterator](),n=e[Symbol.iterator]();let i=t.next(),o=n.next();for(;!i.done&&!o.done;){if(!Object.is(i.value,o.value))return!1;i=t.next(),o=n.next()}return!!i.done&&!!o.done};function lM(r,e){return Object.is(r,e)?!0:typeof r!="object"||r===null||typeof e!="object"||e===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(e)?!1:zb(r)&&zb(e)?Ub(r)&&Ub(e)?Bb(r,e):oM(r,e):Bb({entries:()=>Object.entries(r)},{entries:()=>Object.entries(e)})}function Li(r){const e=Je.useRef(void 0);return t=>{const n=r(t);return lM(e.current,n)?e.current:e.current=n}}const cM=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oT=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();var uM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dM=T.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:l,...c},u)=>T.createElement("svg",{ref:u,...uM,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:oT("lucide",i),...c},[...l.map(([d,m])=>T.createElement(d,m)),...Array.isArray(o)?o:[o]]));const so=(r,e)=>{const t=T.forwardRef(({className:n,...i},o)=>T.createElement(dM,{ref:o,iconNode:e,className:oT(`lucide-${cM(r)}`,n),...i}));return t.displayName=`${r}`,t};const fM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hM=so("ArrowRight",fM);const mM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ds=so("Check",mM);const gM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ps=so("ChevronRight",gM);const pM=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],oh=so("Loader",pM);const yM=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bM=so("Settings",yM);const EM=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],vM=so("SkipForward",EM),$b=r=>{let e;const t=new Set,n=(d,m)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const h=e;e=m??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(g=>g(e,h))}},i=()=>e,c={setState:n,getState:i,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d))},u=e=r(n,i,c);return c},TM=(r=>r?$b(r):$b),SM=r=>r;function wM(r,e=SM){const t=Je.useSyncExternalStore(r.subscribe,Je.useCallback(()=>e(r.getState()),[r,e]),Je.useCallback(()=>e(r.getInitialState()),[r,e]));return Je.useDebugValue(t),t}const jb=r=>{const e=TM(r),t=n=>wM(e,n);return Object.assign(t,e),t},_M=(r=>r?jb(r):jb);var lT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},qb=Je.createContext&&Je.createContext(lT),xM=["attr","size","title"];function IM(r,e){if(r==null)return{};var t=AM(r,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function AM(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Mc(){return Mc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Mc.apply(this,arguments)}function Gb(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Oc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gb(Object(t),!0).forEach(function(n){RM(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Gb(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function RM(r,e,t){return e=CM(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function CM(r){var e=kM(r,"string");return typeof e=="symbol"?e:e+""}function kM(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function cT(r){return r&&r.map((e,t)=>Je.createElement(e.tag,Oc({key:t},e.attr),cT(e.child)))}function rm(r){return e=>Je.createElement(LM,Mc({attr:Oc({},r.attr)},e),cT(r.child))}function LM(r){var e=t=>{var{attr:n,size:i,title:o}=r,l=IM(r,xM),c=i||t.size||"1em",u;return t.className&&(u=t.className),r.className&&(u=(u?u+" ":"")+r.className),Je.createElement("svg",Mc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,l,{className:u,style:Oc(Oc({color:r.color||t.color},t.style),r.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&Je.createElement("title",null,o),r.children)};return qb!==void 0?Je.createElement(qb.Consumer,null,t=>e(t)):e(lT)}function NM(r){return rm({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M126 192H56a8 8 0 0 0-8 8v112a8 8 0 0 0 8 8h69.65a15.93 15.93 0 0 1 10.14 3.54l91.47 74.89A8 8 0 0 0 240 392V120a8 8 0 0 0-12.74-6.43l-91.47 74.89A15 15 0 0 1 126 192zm194 128c9.74-19.38 16-40.84 16-64 0-23.48-6-44.42-16-64m48 176c19.48-33.92 32-64.06 32-112s-12-77.74-32-112m48 272c30-46 48-91.43 48-160s-18-113-48-160"},child:[]}]})(r)}function DM(r){return rm({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M416 432 64 80"},child:[]},{tag:"path",attr:{d:"M224 136.92v33.8a4 4 0 0 0 1.17 2.82l24 24a4 4 0 0 0 6.83-2.82v-74.15a24.53 24.53 0 0 0-12.67-21.72 23.91 23.91 0 0 0-25.55 1.83 8.27 8.27 0 0 0-.66.51l-31.94 26.15a4 4 0 0 0-.29 5.92l17.05 17.06a4 4 0 0 0 5.37.26zm0 238.16-78.07-63.92a32 32 0 0 0-20.28-7.16H64v-96h50.72a4 4 0 0 0 2.82-6.83l-24-24a4 4 0 0 0-2.82-1.17H56a24 24 0 0 0-24 24v112a24 24 0 0 0 24 24h69.76l91.36 74.8a8.27 8.27 0 0 0 .66.51 23.93 23.93 0 0 0 25.85 1.69A24.49 24.49 0 0 0 256 391.45v-50.17a4 4 0 0 0-1.17-2.82l-24-24a4 4 0 0 0-6.83 2.82zM125.82 336zM352 256c0-24.56-5.81-47.88-17.75-71.27a16 16 0 0 0-28.5 14.54C315.34 218.06 320 236.62 320 256q0 4-.31 8.13a8 8 0 0 0 2.32 6.25l19.66 19.67a4 4 0 0 0 6.75-2A146.89 146.89 0 0 0 352 256zm64 0c0-51.19-13.08-83.89-34.18-120.06a16 16 0 0 0-27.64 16.12C373.07 184.44 384 211.83 384 256c0 23.83-3.29 42.88-9.37 60.65a8 8 0 0 0 1.9 8.26l16.77 16.76a4 4 0 0 0 6.52-1.27C410.09 315.88 416 289.91 416 256z"},child:[]},{tag:"path",attr:{d:"M480 256c0-74.26-20.19-121.11-50.51-168.61a16 16 0 1 0-27 17.22C429.82 147.38 448 189.5 448 256c0 47.45-8.9 82.12-23.59 113a4 4 0 0 0 .77 4.55L443 391.39a4 4 0 0 0 6.4-1C470.88 348.22 480 307 480 256z"},child:[]}]})(r)}function PM(r){return rm({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(r)}const Hb=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ba=(()=>{if(typeof document>"u")return!1;const r=Hb[0],e={};for(const t of Hb)if(t?.[1]in document){for(const[i,o]of t.entries())e[r[i]]=o;return e}return!1})(),Vb={change:ba.fullscreenchange,error:ba.fullscreenerror};let Pr={request(r=document.documentElement,e){return new Promise((t,n)=>{const i=()=>{Pr.off("change",i),t()};Pr.on("change",i);const o=r[ba.requestFullscreen](e);o instanceof Promise&&o.then(i).catch(n)})},exit(){return new Promise((r,e)=>{if(!Pr.isFullscreen){r();return}const t=()=>{Pr.off("change",t),r()};Pr.on("change",t);const n=document[ba.exitFullscreen]();n instanceof Promise&&n.then(t).catch(e)})},toggle(r,e){return Pr.isFullscreen?Pr.exit():Pr.request(r,e)},onchange(r){Pr.on("change",r)},onerror(r){Pr.on("error",r)},on(r,e){const t=Vb[r];t&&document.addEventListener(t,e,!1)},off(r,e){const t=Vb[r];t&&document.removeEventListener(t,e,!1)},raw:ba};Object.defineProperties(Pr,{isFullscreen:{get:()=>!!document[ba.fullscreenElement]},element:{enumerable:!0,get:()=>document[ba.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[ba.fullscreenEnabled]}});ba||(Pr={isEnabled:!1});const yn=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},MM=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=OM},OM=Number.MAX_SAFE_INTEGER||9007199254740991;let Nn=(function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r})({}),vt=(function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",r.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",r.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.ASSET_LIST_LOAD_ERROR="assetListLoadError",r.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",r.ASSET_LIST_PARSING_ERROR="assetListParsingError",r.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.ATTACH_MEDIA_ERROR="attachMediaError",r.UNKNOWN="unknown",r})({}),ye=(function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.MEDIA_ENDED="hlsMediaEnded",r.STALL_RESOLVED="hlsStallResolved",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFERED_TO_END="hlsBufferedToEnd",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r.ASSET_LIST_LOADING="hlsAssetListLoading",r.ASSET_LIST_LOADED="hlsAssetListLoaded",r.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",r.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",r.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",r.INTERSTITIAL_STARTED="hlsInterstitialStarted",r.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",r.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",r.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",r.INTERSTITIAL_ENDED="hlsInterstitialEnded",r.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",r.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",r.EVENT_CUE_ENTER="hlsEventCueEnter",r})({});var Qn={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},xn={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Ms{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class FM{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ms(e),this.fast_=new Ms(t),this.defaultTTFB_=i,this.ttfb_=new Ms(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:o}=this;n.halfLife!==e&&(this.slow_=new Ms(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Ms(t,i.getEstimate(),i.getTotalWeight())),o.halfLife!==e&&(this.ttfb_=new Ms(e,o.getEstimate(),o.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,o=n/i;this.fast_.sample(i,o),this.slow_.sample(i,o)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function zM(r,e,t){return(e=BM(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pr(){return pr=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},pr.apply(null,arguments)}function Kb(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function fr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kb(Object(t),!0).forEach(function(n){zM(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kb(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function UM(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function BM(r){var e=UM(r,"string");return typeof e=="symbol"?e:e+""}class Pi{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=Pa,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const Pa=function(){},$M={trace:Pa,debug:Pa,log:Pa,warn:Pa,info:Pa,error:Pa};function lh(){return pr({},$M)}function jM(r,e){const t=self.console[r];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${r}] >`):Pa}function Yb(r,e,t){return e[r]?e[r].bind(e):jM(r,t)}const ch=lh();function qM(r,e,t){const n=lh();if(typeof console=="object"&&r===!0||typeof r=="object"){const i=["debug","log","info","warn","error"];i.forEach(o=>{n[o]=Yb(o,r,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return lh()}i.forEach(o=>{ch[o]=Yb(o,r)})}else pr(ch,n);return n}const hr=ch;function $a(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function GM(r){return typeof self<"u"&&r===self.ManagedMediaSource}function uT(r,e){const t=Object.keys(r),n=Object.keys(e),i=t.length,o=n.length;return!i||!o||i===o&&!t.some(l=>n.indexOf(l)===-1)}function bi(r,e=!1){if(typeof TextDecoder<"u"){const d=new TextDecoder("utf-8").decode(r);if(e){const m=d.indexOf("\0");return m!==-1?d.substring(0,m):d}return d.replace(/\0/g,"")}const t=r.length;let n,i,o,l="",c=0;for(;c<t;){if(n=r[c++],n===0&&e)return l;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(n);break;case 12:case 13:i=r[c++],l+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=r[c++],o=r[c++],l+=String.fromCharCode((n&15)<<12|(i&63)<<6|(o&63)<<0);break}}return l}function qr(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function dT(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function HM(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Sd={exports:{}},Wb;function VM(){return Wb||(Wb=1,(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(u,d,m){if(m=m||{},u=u.trim(),d=d.trim(),!d){if(!m.alwaysNormalize)return u;var f=c.parseURL(u);if(!f)throw new Error("Error trying to parse base URL.");return f.path=c.normalizePath(f.path),c.buildURLFromParts(f)}var h=c.parseURL(d);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return m.alwaysNormalize?(h.path=c.normalizePath(h.path),c.buildURLFromParts(h)):d;var g=c.parseURL(u);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var p=i.exec(g.path);g.netLoc=p[1],g.path=p[2]}g.netLoc&&!g.path&&(g.path="/");var E={scheme:g.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(E.netLoc=g.netLoc,h.path[0]!=="/"))if(!h.path)E.path=g.path,h.params||(E.params=g.params,h.query||(E.query=g.query));else{var S=g.path,A=S.substring(0,S.lastIndexOf("/")+1)+h.path;E.path=c.normalizePath(A)}return E.path===null&&(E.path=m.alwaysNormalize?c.normalizePath(h.path):h.path),c.buildURLFromParts(E)},parseURL:function(u){var d=n.exec(u);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(o,"");u.length!==(u=u.replace(l,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};r.exports=c})()})(Sd)),Sd.exports}var im=VM();class am{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var br={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class fT{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,YM(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=t?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[br.AUDIO]:null,[br.VIDEO]:null,[br.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new am),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=im.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[br.AUDIO]=null,e[br.VIDEO]=null,e[br.AUDIOVIDEO]=null}}function kr(r){return r.sn!=="initSegment"}class wd extends fT{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(yn(e)&&yn(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(t);if(n.length===1){const i=this._decryptdata=t[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=yn(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(t=this.levelkeys[n[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!yn(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return kr(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const i=t[e];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,o,l=!1){const{elementaryStreams:c}=this,u=c[e];if(!u){c[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:o,partial:l};return}u.startPTS=Math.min(u.startPTS,t),u.endPTS=Math.max(u.endPTS,n),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,o)}}class KM extends fT{constructor(e,t,n,i,o){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const l=e.enumeratedString("BYTERANGE");l&&this.setByteRange(l,o),o&&(this.fragOffset=o.fragOffset+o.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function hT(r,e){const t=Object.getPrototypeOf(r);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||hT(t,e)}}function YM(r,e){const t=hT(r,e);t&&(t.enumerable=!0,Object.defineProperty(r,e,t))}const Xb=Math.pow(2,32)-1,WM=[].push,mT={video:1,audio:2,id3:3,text:4};function Mr(r){return String.fromCharCode.apply(null,r)}function gT(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function Bn(r,e){const t=pT(r,e);return t<0?4294967296+t:t}function Qb(r,e){let t=Bn(r,e);return t*=Math.pow(2,32),t+=Bn(r,e+4),t}function pT(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function XM(r){const e=r.byteLength;for(let t=0;t<e;){const n=Bn(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function Wn(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const o=Bn(r,i),l=Mr(r.subarray(i+4,i+8)),c=o>1?i+o:n;if(l===e[0])if(e.length===1)t.push(r.subarray(i+8,c));else{const u=Wn(r.subarray(i+8,c),e.slice(1));u.length&&WM.apply(t,u)}i=c}return t}function QM(r){const e=[],t=r[0];let n=8;const i=Bn(r,n);n+=4;let o=0,l=0;t===0?(o=Bn(r,n),l=Bn(r,n+4),n+=8):(o=Qb(r,n),l=Qb(r,n+8),n+=16),n+=2;let c=r.length+l;const u=gT(r,n);n+=2;for(let d=0;d<u;d++){let m=n;const f=Bn(r,m);m+=4;const h=f&2147483647;if((f&2147483648)>>>31===1)return hr.warn("SIDX has hierarchical references (not supported)"),null;const p=Bn(r,m);m+=4,e.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/i,start:c,end:c+h-1}}),c+=h,m+=4,n=m}return{earliestPresentationTime:o,timescale:i,version:t,referencesCount:u,references:e}}function yT(r){const e=[],t=Wn(r,["moov","trak"]);for(let i=0;i<t.length;i++){const o=t[i],l=Wn(o,["tkhd"])[0];if(l){let c=l[0];const u=Bn(l,c===0?12:20),d=Wn(o,["mdia","mdhd"])[0];if(d){c=d[0];const m=Bn(d,c===0?12:20),f=Wn(o,["mdia","hdlr"])[0];if(f){const h=Mr(f.subarray(8,12)),g={soun:br.AUDIO,vide:br.VIDEO}[h],p=Wn(o,["mdia","minf","stbl","stsd"])[0],E=ZM(p);g?(e[u]={timescale:m,type:g,stsd:E},e[g]=fr({timescale:m,id:u},E)):e[u]={timescale:m,type:h,stsd:E}}}}}return Wn(r,["moov","mvex","trex"]).forEach(i=>{const o=Bn(i,4),l=e[o];l&&(l.default={duration:Bn(i,12),flags:Bn(i,20)})}),e}function ZM(r){const e=r.subarray(8),t=e.subarray(86),n=Mr(e.subarray(4,8));let i=n,o;const l=n==="enca"||n==="encv";if(l){const d=Wn(e,[n])[0].subarray(n==="enca"?28:78);Wn(d,["sinf"]).forEach(f=>{const h=Wn(f,["schm"])[0];if(h){const g=Mr(h.subarray(4,8));if(g==="cbcs"||g==="cenc"){const p=Wn(f,["frma"])[0];p&&(i=Mr(p))}}})}const c=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const u=Wn(t,["avcC"])[0];u&&u.length>3&&(i+="."+jl(u[1])+jl(u[2])+jl(u[3]),o=$l(c==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const u=Wn(e,[n])[0],d=Wn(u.subarray(28),["esds"])[0];if(d&&d.length>7){let m=4;if(d[m++]!==3)break;m=_d(d,m),m+=2;const f=d[m++];if(f&128&&(m+=2),f&64&&(m+=d[m++]),d[m++]!==4)break;m=_d(d,m);const h=d[m++];if(h===64)i+="."+jl(h);else break;if(m+=12,d[m++]!==5)break;m=_d(d,m);const g=d[m++];let p=(g&248)>>3;p===31&&(p+=1+((g&7)<<3)+((d[m]&224)>>5)),i+="."+p}break}case"hvc1":case"hev1":{const u=Wn(t,["hvcC"])[0];if(u&&u.length>12){const d=u[1],m=["","A","B","C"][d>>6],f=d&31,h=Bn(u,2),g=(d&32)>>5?"H":"L",p=u[12],E=u.subarray(6,12);i+="."+m+f,i+="."+JM(h).toString(16).toUpperCase(),i+="."+g+p;let S="";for(let A=E.length;A--;){const x=E[A];(x||S)&&(S="."+x.toString(16).toUpperCase()+S)}i+=S}o=$l(c=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=$l(i,t)||i;break}case"vp09":{const u=Wn(t,["vpcC"])[0];if(u&&u.length>6){const d=u[4],m=u[5],f=u[6]>>4&15;i+="."+ta(d)+"."+ta(m)+"."+ta(f)}break}case"av01":{const u=Wn(t,["av1C"])[0];if(u&&u.length>2){const d=u[1]>>>5,m=u[1]&31,f=u[2]>>>7?"H":"M",h=(u[2]&64)>>6,g=(u[2]&32)>>5,p=d===2&&h?g?12:10:h?10:8,E=(u[2]&16)>>4,S=(u[2]&8)>>3,A=(u[2]&4)>>2,x=u[2]&3;i+="."+d+"."+ta(m)+f+"."+ta(p)+"."+E+"."+S+A+x+"."+ta(1)+"."+ta(1)+"."+ta(1)+"."+0,o=$l("dav1",t)}break}}return{codec:i,encrypted:l,supplemental:o}}function $l(r,e){const t=Wn(e,["dvvC"]),n=t.length?t[0]:Wn(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,o=n[2]<<5&32|n[3]>>3&31;return r+"."+ta(i)+"."+ta(o)}}function JM(r){let e=0;for(let t=0;t<32;t++)e|=(r>>t&1)<<31-t;return e>>>0}function _d(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function jl(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function ta(r){return(r<10?"0":"")+r}function eO(r,e){if(!r||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&bT(r,(n,i)=>{const o=n.subarray(8,24);o.some(l=>l!==0)||(hr.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${qr(o)} -> ${qr(t)}`),n.set(t,8))})}function tO(r){const e=[];return bT(r,t=>e.push(t.subarray(8,24))),e}function bT(r,e){Wn(r,["moov","trak"]).forEach(n=>{const i=Wn(n,["mdia","minf","stbl","stsd"])[0];if(!i)return;const o=i.subarray(8);let l=Wn(o,["enca"]);const c=l.length>0;c||(l=Wn(o,["encv"])),l.forEach(u=>{const d=c?u.subarray(28):u.subarray(78);Wn(d,["sinf"]).forEach(f=>{const h=ET(f);h&&e(h,c)})})})}function ET(r){const e=Wn(r,["schm"])[0];if(e){const t=Mr(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const n=Wn(r,["schi","tenc"])[0];if(n)return n}}}function nO(r,e,t){const n={},i=Wn(r,["moof","traf"]);for(let o=0;o<i.length;o++){const l=i[o],c=Wn(l,["tfhd"])[0],u=Bn(c,4),d=e[u];if(!d)continue;n[u]||(n[u]={start:NaN,duration:0,sampleCount:0,timescale:d.timescale,type:d.type});const m=n[u],f=Wn(l,["tfdt"])[0];if(f){const k=f[0];let U=Bn(f,4);k===1&&(U===Xb?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(U*=Xb+1,U+=Bn(f,8))),yn(U)&&(!yn(m.start)||U<m.start)&&(m.start=U)}const h=d.default,g=Bn(c,0)|h?.flags;let p=h?.duration||0;g&8&&(g&2?p=Bn(c,12):p=Bn(c,8));const E=Wn(l,["trun"]);let S=m.start||0,A=0,x=p;for(let k=0;k<E.length;k++){const U=E[k],Y=Bn(U,4),Q=m.sampleCount;m.sampleCount+=Y;const L=U[3]&1,O=U[3]&4,G=U[2]&1,te=U[2]&2,ge=U[2]&4,Me=U[2]&8;let he=8,De=Y;for(L&&(he+=4),O&&Y&&(!(U[he+1]&1)&&m.keyFrameIndex===void 0&&(m.keyFrameIndex=Q),he+=4,G?(x=Bn(U,he),he+=4):x=p,te&&(he+=4),Me&&(he+=4),S+=x,A+=x,De--);De--;)G?(x=Bn(U,he),he+=4):x=p,te&&(he+=4),ge&&(U[he+1]&1||m.keyFrameIndex===void 0&&(m.keyFrameIndex=m.sampleCount-(De+1),m.keyFrameStart=S),he+=4),Me&&(he+=4),S+=x,A+=x;!A&&p&&(A+=p*Y)}m.duration+=A}if(!Object.keys(n).some(o=>n[o].duration)){let o=1/0,l=0;const c=Wn(r,["sidx"]);for(let u=0;u<c.length;u++){const d=QM(c[u]);if(d!=null&&d.references){o=Math.min(o,d.earliestPresentationTime/d.timescale);const m=d.references.reduce((f,h)=>f+h.info.duration||0,0);l=Math.max(l,m+d.earliestPresentationTime/d.timescale)}}l&&yn(l)&&Object.keys(n).forEach(u=>{n[u].duration||(n[u].duration=l*n[u].timescale-n[u].start)})}return n}function rO(r){const e={valid:null,remainder:null},t=Wn(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=r.slice(0,n.byteOffset-8),e.remainder=r.slice(n.byteOffset-8),e}function Ni(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Zb(r,e){const t=[],n=e.samples,i=e.timescale,o=e.id;let l=!1;return Wn(n,["moof"]).map(u=>{const d=u.byteOffset-8;Wn(u,["traf"]).map(f=>{const h=Wn(f,["tfdt"]).map(g=>{const p=g[0];let E=Bn(g,4);return p===1&&(E*=Math.pow(2,32),E+=Bn(g,8)),E/i})[0];return h!==void 0&&(r=h),Wn(f,["tfhd"]).map(g=>{const p=Bn(g,4),E=Bn(g,0)&16777215,S=(E&1)!==0,A=(E&2)!==0,x=(E&8)!==0;let k=0;const U=(E&16)!==0;let Y=0;const Q=(E&32)!==0;let L=8;p===o&&(S&&(L+=8),A&&(L+=4),x&&(k=Bn(g,L),L+=4),U&&(Y=Bn(g,L),L+=4),Q&&(L+=4),e.type==="video"&&(l=iu(e.codec)),Wn(f,["trun"]).map(O=>{const G=O[0],te=Bn(O,0)&16777215,ge=(te&1)!==0;let Me=0;const he=(te&4)!==0,De=(te&256)!==0;let _e=0;const ke=(te&512)!==0;let Oe=0;const He=(te&1024)!==0,Pe=(te&2048)!==0;let Ge=0;const qe=Bn(O,4);let Ze=8;ge&&(Me=Bn(O,Ze),Ze+=4),he&&(Ze+=4);let ct=Me+d;for(let mt=0;mt<qe;mt++){if(De?(_e=Bn(O,Ze),Ze+=4):_e=k,ke?(Oe=Bn(O,Ze),Ze+=4):Oe=Y,He&&(Ze+=4),Pe&&(G===0?Ge=Bn(O,Ze):Ge=pT(O,Ze),Ze+=4),e.type===br.VIDEO){let xe=0;for(;xe<Oe;){const Ie=Bn(n,ct);if(ct+=4,iO(l,n[ct])){const Ke=n.subarray(ct,ct+Ie);sm(Ke,l?2:1,r+Ge/i,t)}ct+=Ie,xe+=Ie+4}}r+=_e/i}}))})})}),t}function iu(r){if(!r)return!1;const e=r.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function iO(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function sm(r,e,t,n){const i=vT(r);let o=0;o+=e;let l=0,c=0,u=0;for(;o<i.length;){l=0;do{if(o>=i.length)break;u=i[o++],l+=u}while(u===255);c=0;do{if(o>=i.length)break;u=i[o++],c+=u}while(u===255);const d=i.length-o;let m=o;if(c<d)o+=c;else if(c>d){hr.error(`Malformed SEI payload. ${c} is too small, only ${d} bytes left to parse.`);break}if(l===4){if(i[m++]===181){const h=gT(i,m);if(m+=2,h===49){const g=Bn(i,m);if(m+=4,g===1195456820){const p=i[m++];if(p===3){const E=i[m++],S=31&E,A=64&E,x=A?2+S*3:0,k=new Uint8Array(x);if(A){k[0]=E;for(let U=1;U<x;U++)k[U]=i[m++]}n.push({type:p,payloadType:l,pts:t,bytes:k})}}}}}else if(l===5&&c>16){const f=[];for(let p=0;p<16;p++){const E=i[m++].toString(16);f.push(E.length==1?"0"+E:E),(p===3||p===5||p===7||p===9)&&f.push("-")}const h=c-16,g=new Uint8Array(h);for(let p=0;p<h;p++)g[p]=i[m++];n.push({payloadType:l,pts:t,uuid:f.join(""),userData:bi(g),userDataBytes:g})}}}function vT(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,o=new Uint8Array(i);let l=0;for(n=0;n<i;l++,n++)l===t[0]&&(l++,t.shift()),o[n]=r[l];return o}function aO(r){const e=r[0];let t="",n="",i=0,o=0,l=0,c=0,u=0,d=0;if(e===0){for(;Mr(r.subarray(d,d+1))!=="\0";)t+=Mr(r.subarray(d,d+1)),d+=1;for(t+=Mr(r.subarray(d,d+1)),d+=1;Mr(r.subarray(d,d+1))!=="\0";)n+=Mr(r.subarray(d,d+1)),d+=1;n+=Mr(r.subarray(d,d+1)),d+=1,i=Bn(r,12),o=Bn(r,16),c=Bn(r,20),u=Bn(r,24),d=28}else if(e===1){d+=4,i=Bn(r,d),d+=4;const f=Bn(r,d);d+=4;const h=Bn(r,d);for(d+=4,l=2**32*f+h,MM(l)||(l=Number.MAX_SAFE_INTEGER,hr.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),c=Bn(r,d),d+=4,u=Bn(r,d),d+=4;Mr(r.subarray(d,d+1))!=="\0";)t+=Mr(r.subarray(d,d+1)),d+=1;for(t+=Mr(r.subarray(d,d+1)),d+=1;Mr(r.subarray(d,d+1))!=="\0";)n+=Mr(r.subarray(d,d+1)),d+=1;n+=Mr(r.subarray(d,d+1)),d+=1}const m=r.subarray(d,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:l,presentationTimeDelta:o,eventDuration:c,id:u,payload:m}}function sO(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(r,4),i=0,n=8;i<t;i++)o.set(e[i],n),n+=e[i].byteLength;return o}function oO(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let o;n>0?(o=new Uint8Array(4),e.length>0&&new DataView(o.buffer).setUint32(0,e.length,!1)):o=new Uint8Array;const l=new Uint8Array(4);return t.byteLength>0&&new DataView(l.buffer).setUint32(0,t.byteLength,!1),sO([112,115,115,104],new Uint8Array([n,0,0,0]),r,o,i,l,t)}function lO(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const i=new DataView(r,n),o=cO(i);e.push(o),n+=o.size}}return e}function cO(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const o=r.getUint32(8)>>>24;if(o!==0&&o!==1)return{offset:t,size:e};const l=r.buffer,c=qr(new Uint8Array(l,t+12,16));let u=null,d=null,m=0;if(o===0)m=28;else{const h=r.getUint32(28);if(!h||n<32+h*16)return{offset:t,size:e};u=[];for(let g=0;g<h;g++)u.push(new Uint8Array(l,t+32+g*16,16));m=32+h*16}if(!m)return{offset:t,size:e};const f=r.getUint32(m);return e-32<f?{offset:t,size:e}:(d=new Uint8Array(l,t+m+4,f),{version:o,systemId:c,kids:u,data:d,offset:t,size:e})}const TT=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),eo={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function om(r,e){const t=eo[e];return!!t&&!!t[r.slice(0,4)]}function Vo(r,e,t=!0){return!r.split(",").some(n=>!lm(n,e,t))}function lm(r,e,t=!0){var n;const i=$a(t);return(n=i?.isTypeSupported(Ko(r,e)))!=null?n:!1}function Ko(r,e){return`${e}/mp4;codecs=${r}`}function Jb(r){if(r){const e=r.substring(0,4);return eo.video[e]}return 2}function Fc(r){const e=TT();return r.split(",").reduce((t,n)=>{const o=e&&iu(n)?9:eo.video[n];return o?(o*2+t)/(t?3:2):(eo.audio[n]+t)/(t?2:1)},0)}const xd={};function uO(r,e=!0){if(xd[r])return xd[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[r];for(let i=0;i<t.length;i++){var n;if(lm(t[i],"audio",e))return xd[r]=t[i],t[i];if(t[i]==="mp3"&&(n=$a(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return r}const dO=/flac|opus|mp4a\.40\.34/i;function zc(r,e=!0){return r.replace(dO,t=>uO(t.toLowerCase(),e))}function fO(r,e){const t=[];if(r){const n=r.split(",");for(let i=0;i<n.length;i++)om(n[i],"video")||t.push(n[i])}return e&&t.push(e),t.join(",")}function sc(r,e){if(r&&(r.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(r)!==-1)&&(e0(r,"audio")||e0(r,"video")))return r;if(e){const t=e.split(",");if(t.length>1){if(r){for(let n=t.length;n--;)if(t[n].substring(0,4)===r.substring(0,4))return t[n]}return t[0]}}return e||r}function e0(r,e){return om(r,e)&&lm(r,e)}function hO(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");n.length>2&&n[0]==="avc1"&&(e[t]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function mO(r){if(r.startsWith("av01.")){const e=r.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return r}function t0(r){const e=$a(r)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function uh(r){return r.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const gO={supported:!0,powerEfficient:!0,smooth:!0},pO={supported:!1,smooth:!1,powerEfficient:!1},ST={supported:!0,configurations:[],decodingInfoResults:[gO]};function wT(r,e){return{supported:!1,configurations:e,decodingInfoResults:[pO],error:r}}function yO(r,e,t,n,i,o){const l=r.videoCodec,c=r.audioCodec?r.audioGroups:null,u=o?.audioCodec,d=o?.channels,m=d?parseInt(d):u?1/0:2;let f=null;if(c!=null&&c.length)try{c.length===1&&c[0]?f=e.groups[c[0]].channels:f=c.reduce((h,g)=>{if(g){const p=e.groups[g];if(!p)throw new Error(`Audio track group ${g} not found`);Object.keys(p.channels).forEach(E=>{h[E]=(h[E]||0)+p.channels[E]})}return h},{2:0})}catch{return!0}return l!==void 0&&(l.split(",").some(h=>iu(h))||r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(i,8e6))||!!f&&yn(m)&&Object.keys(f).some(h=>parseInt(h)>m)}function _T(r,e,t,n={}){const i=r.videoCodec;if(!i&&!r.audioCodec||!t)return Promise.resolve(ST);const o=[],l=bO(r),c=l.length,u=EO(r,e,c>0),d=u.length;for(let m=c||1*d||1;m--;){const f={type:"media-source"};if(c&&(f.video=l[m%c]),d){f.audio=u[m%d];const h=f.audio.bitrate;f.video&&h&&(f.video.bitrate-=h)}o.push(f)}if(i){const m=navigator.userAgent;if(i.split(",").some(f=>iu(f))&&TT())return Promise.resolve(wT(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${m})`),o))}return Promise.all(o.map(m=>{const f=TO(m);return n[f]||(n[f]=t.decodingInfo(m))})).then(m=>({supported:!m.some(f=>!f.supported),configurations:o,decodingInfoResults:m})).catch(m=>({supported:!1,configurations:o,decodingInfoResults:[],error:m}))}function bO(r){var e;const t=(e=r.videoCodec)==null?void 0:e.split(","),n=xT(r),i=r.width||640,o=r.height||480,l=r.frameRate||30,c=r.videoRange.toLowerCase();return t?t.map(u=>{const d={contentType:Ko(mO(u),"video"),width:i,height:o,bitrate:n,framerate:l};return c!=="sdr"&&(d.transferFunction=c),d}):[]}function EO(r,e,t){var n;const i=(n=r.audioCodec)==null?void 0:n.split(","),o=xT(r);return i&&r.audioGroups?r.audioGroups.reduce((l,c)=>{var u;const d=c?(u=e.groups[c])==null?void 0:u.tracks:null;return d?d.reduce((m,f)=>{if(f.groupId===c){const h=parseFloat(f.channels||"");i.forEach(g=>{const p={contentType:Ko(g,"audio"),bitrate:t?vO(g,o):o};h&&(p.channels=""+h),m.push(p)})}return m},l):l},[]):[]}function vO(r,e){if(e<=1)return 1;let t=128e3;return r==="ec-3"?t=768e3:r==="ac-3"&&(t=64e4),Math.min(e/2,t)}function xT(r){return Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)/1e3)*1e3||1}function TO(r){let e="";const{audio:t,video:n}=r;if(n){const i=uh(n.contentType);e+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(t){const i=uh(t.contentType);e+=`${n?"_":""}${i}_c${t.channels}`}return e}const dh=["NONE","TYPE-0","TYPE-1",null];function SO(r){return dh.indexOf(r)>-1}const Uc=["SDR","PQ","HLG"];function wO(r){return!!r&&Uc.indexOf(r)>-1}var oc={No:"",Yes:"YES",v2:"v2"};function n0(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,i=n<e/2;return e&&i?t?oc.v2:oc.Yes:oc.No}class r0{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Yo{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return i0(this._audioGroups,e)}hasSubtitleGroup(e){return i0(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function i0(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function _O(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function xO(r,e){let t=!1,n=[];if(r&&(t=r!=="SDR",n=[r]),e){n=e.allowedVideoRanges||Uc.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&_O(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const IO=r=>{const e=new WeakSet;return(t,n)=>{if(r&&(n=r(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},Er=(r,e)=>JSON.stringify(r,IO(e));function AO(r,e,t,n,i){const o=Object.keys(r),l=n?.channels,c=n?.audioCodec,u=i?.videoCodec,d=l&&parseInt(l)===2;let m=!1,f=!1,h=1/0,g=1/0,p=1/0,E=1/0,S=0,A=[];const{preferHDR:x,allowedVideoRanges:k}=xO(e,i);for(let O=o.length;O--;){const G=r[o[O]];m||(m=G.channels[2]>0),h=Math.min(h,G.minHeight),g=Math.min(g,G.minFramerate),p=Math.min(p,G.minBitrate),k.filter(ge=>G.videoRanges[ge]>0).length>0&&(f=!0)}h=yn(h)?h:0,g=yn(g)?g:0;const U=Math.max(1080,h),Y=Math.max(30,g);p=yn(p)?p:t,t=Math.max(p,t),f||(e=void 0);const Q=o.length>1;return{codecSet:o.reduce((O,G)=>{const te=r[G];if(G===O)return O;if(A=f?k.filter(ge=>te.videoRanges[ge]>0):[],Q){if(te.minBitrate>t)return Ji(G,`min bitrate of ${te.minBitrate} > current estimate of ${t}`),O;if(!te.hasDefaultAudio)return Ji(G,"no renditions with default or auto-select sound found"),O;if(c&&G.indexOf(c.substring(0,4))%5!==0)return Ji(G,`audio codec preference "${c}" not found`),O;if(l&&!d){if(!te.channels[l])return Ji(G,`no renditions with ${l} channel sound found (channels options: ${Object.keys(te.channels)})`),O}else if((!c||d)&&m&&te.channels[2]===0)return Ji(G,"no renditions with stereo sound found"),O;if(te.minHeight>U)return Ji(G,`min resolution of ${te.minHeight} > maximum of ${U}`),O;if(te.minFramerate>Y)return Ji(G,`min framerate of ${te.minFramerate} > maximum of ${Y}`),O;if(!A.some(ge=>te.videoRanges[ge]>0))return Ji(G,`no variants with VIDEO-RANGE of ${Er(A)} found`),O;if(u&&G.indexOf(u.substring(0,4))%5!==0)return Ji(G,`video codec preference "${u}" not found`),O;if(te.maxScore<S)return Ji(G,`max score of ${te.maxScore} < selected max of ${S}`),O}return O&&(Fc(G)>=Fc(O)||te.fragmentError>r[O].fragmentError)?O:(E=te.minIndex,S=te.maxScore,G)},void 0),videoRanges:A,preferHDR:x,minFramerate:g,minBitrate:p,minIndex:E}}function Ji(r,e){hr.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function IT(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function RO(r,e,t,n){return r.slice(t,n+1).reduce((i,o,l)=>{if(!o.codecSet)return i;const c=o.audioGroups;let u=i[o.codecSet];u||(i[o.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:l,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!c,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,o.bitrate);const d=Math.min(o.height,o.width);return u.minHeight=Math.min(u.minHeight,d),u.minFramerate=Math.min(u.minFramerate,o.frameRate),u.minIndex=Math.min(u.minIndex,l),u.maxScore=Math.max(u.maxScore,o.score),u.fragmentError+=o.fragmentError,u.videoRanges[o.videoRange]=(u.videoRanges[o.videoRange]||0)+1,c&&c.forEach(m=>{if(!m)return;const f=e.groups[m];f&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?f.hasDefault:f.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(f.channels).forEach(h=>{u.channels[h]=(u.channels[h]||0)+f.channels[h]}))}),i},{})}function a0(r){if(!r)return r;const{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:o}=r;return{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:o}}function ia(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(ss(r,i,t))return n}return-1}function ss(r,e,t){const{groupId:n,name:i,lang:o,assocLang:l,default:c}=r,u=r.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(o===void 0||CO(o,e.lang))&&(o===void 0||e.assocLang===l)&&(c===void 0||e.default===c)&&(u===void 0||e.forced===u)&&(!("characteristics"in r)||kO(r.characteristics||"",e.characteristics))&&(t===void 0||t(r,e))}function CO(r,e="--"){return r.length===e.length?r===e:r.startsWith(e)||e.startsWith(r)}function kO(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function ts(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function LO(r,e,t,n,i){const o=e[n],c=e.reduce((h,g,p)=>{const E=g.uri;return(h[E]||(h[E]=[])).push(p),h},{})[o.uri];c.length>1&&(n=Math.max.apply(Math,c));const u=o.videoRange,d=o.frameRate,m=o.codecSet.substring(0,4),f=s0(e,n,h=>{if(h.videoRange!==u||h.frameRate!==d||h.codecSet.substring(0,4)!==m)return!1;const g=h.audioGroups,p=t.filter(E=>!g||g.indexOf(E.groupId)!==-1);return ia(r,p,i)>-1});return f>-1?f:s0(e,n,h=>{const g=h.audioGroups,p=t.filter(E=>!g||g.indexOf(E.groupId)!==-1);return ia(r,p,i)>-1})}function s0(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}function Bc(r,e){var t;return!!r&&r!==((t=e.loadLevelObj)==null?void 0:t.uri)}class NO extends Pi{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:i,partCurrent:o,hls:l}=this,{autoLevelEnabled:c,media:u}=l;if(!i||!u)return;const d=performance.now(),m=o?o.stats:i.stats,f=o?o.duration:i.duration,h=d-m.loading.start,g=l.minAutoLevel,p=i.level,E=this._nextAutoLevel;if(m.aborted||m.loaded&&m.loaded===m.total||p<=g){this.clearTimer(),this._nextAutoLevel=-1;return}if(!c)return;const S=E>-1&&E!==p,A=!!t||S;if(!A&&(u.paused||!u.playbackRate||!u.readyState))return;const x=l.mainForwardBufferInfo;if(!A&&x===null)return;const k=this.bwEstimator.getEstimateTTFB(),U=Math.abs(u.playbackRate);if(h<=Math.max(k,1e3*(f/(U*2))))return;const Y=x?x.len/U:0,Q=m.loading.first?m.loading.first-m.loading.start:-1,L=m.loaded&&Q>-1,O=this.getBwEstimate(),G=l.levels,te=G[p],ge=Math.max(m.loaded,Math.round(f*(i.bitrate||te.averageBitrate)/8));let Me=L?h-Q:h;Me<1&&L&&(Me=Math.min(h,m.loaded*8/O));const he=L?m.loaded*1e3/Me:0,De=k/1e3,_e=he?(ge-m.loaded)/he:ge*8/O+De;if(_e<=Y)return;const ke=he?he*8:O,Oe=((n=t?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,He=this.hls.config.abrBandWidthUpFactor;let Pe=Number.POSITIVE_INFINITY,Ge;for(Ge=p-1;Ge>g;Ge--){const mt=G[Ge].maxBitrate,xe=!G[Ge].details||Oe;if(Pe=this.getTimeToLoadFrag(De,ke,f*mt,xe),Pe<Math.min(Y,f+De))break}if(Pe>=_e||Pe>f*10)return;L?this.bwEstimator.sample(h-Math.min(k,Q),m.loaded):this.bwEstimator.sampleTTFB(h);const qe=G[Ge].maxBitrate;this.getBwEstimate()*He>qe&&this.resetEstimator(qe);const Ze=this.findBestLevel(qe,g,Ge,0,Y,1,1);Ze>-1&&(Ge=Ze),this.warn(`Fragment ${i.sn}${o?" part "+o.index:""} of level ${p} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${Y.toFixed(3)} s
      Estimated load time for current fragment: ${_e.toFixed(3)} s
      Estimated load time for down switch fragment: ${Pe.toFixed(3)} s
      TTFB estimate: ${Q|0} ms
      Current BW estimate: ${yn(O)?O|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Ge} @ ${qe|0} bps`),l.nextLoadLevel=l.nextAutoLevel=Ge,this.clearTimer();const ct=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===Ge&&Ge>0){const mt=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Ge>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${mt.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,Ge>g){let xe=this.findBestLevel(this.hls.levels[g].bitrate,g,Ge,0,mt,1,1);xe===-1&&(xe=g),this.hls.nextLoadLevel=this.hls.nextAutoLevel=xe,this.resetEstimator(this.hls.levels[xe].bitrate)}}};S||_e>Pe*2?ct():this.timer=self.setInterval(ct,Pe*1e3),l.trigger(ye.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:o,stats:m})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new FM(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.FRAG_LOADING,this.onFragLoading,this),e.on(ye.FRAG_LOADED,this.onFragLoaded,this),e.on(ye.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ye.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ye.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ye.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(ye.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.FRAG_LOADING,this.onFragLoading,this),e.off(ye.FRAG_LOADED,this.onFragLoaded,this),e.off(ye.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ye.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ye.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ye.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(ye.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case vt.BUFFER_ADD_CODEC_ERROR:case vt.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case vt.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:o}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const l=performance.now(),c=o?o.stats:n.stats,u=l-c.loading.start,d=c.loading.first?c.loading.first-c.loading.start:-1;if(c.loaded&&d>-1){const f=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(f,d),c.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,t,n,i){const o=e+n/t,l=i?e+this.lastLevelLoadSec:0;return o+l}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,o=i.end-i.first;yn(o)&&(this.lastLevelLoadSec=o/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===xn.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const o=n?n.duration:t.duration,l=this.hls.levels[t.level],c=(l.loaded?l.loaded.bytes:0)+i.loaded,u=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:c,duration:u},l.realBitrate=Math.round(8*c/u)}if(t.bitrateTest){const o={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(ye.FRAG_BUFFERED,o),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,o=i!=null&&i.stats.loaded?i.stats:n.stats;if(o.aborted||this.ignoreFragment(n))return;const l=o.parsing.end-o.loading.start-Math.min(o.loading.first-o.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(l,o.loaded),o.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==xn.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,o=this.findBestLevel(n,t,e,0,i,1,1);if(o>-1)return o;const l=this.hls.firstLevel,c=Math.min(Math.max(l,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${l} clamped to ${c}`),c}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const o=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const l=this.hls.levels;if(l.length>Math.max(e,o)&&l[e].loadError<=l[o].loadError)return e}return this._nextAutoLevel=o,this.nextAutoLevelKey=this.getAutoLevelKey(),o}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:o,minAutoLevel:l}=n,c=t?t.duration:e?e.duration:0,u=this.getBwEstimate(),d=this.getStarvationDelay();let m=o.abrBandWidthFactor,f=o.abrBandWidthUpFactor;if(d){const S=this.findBestLevel(u,l,i,d,0,m,f);if(S>=0)return this.rebufferNotice=-1,S}let h=c?Math.min(c,o.maxStarvationDelay):o.maxStarvationDelay;if(!d){const S=this.bitrateTestDelay;S&&(h=(c?Math.min(c,o.maxLoadingDelay):o.maxLoadingDelay)-S,this.info(`bitrate test took ${Math.round(1e3*S)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),m=f=1)}const g=this.findBestLevel(u,l,i,d,h,m,f);if(this.rebufferNotice!==g&&(this.rebufferNotice=g,this.info(`${d?"rebuffering expected":"buffer is empty"}, optimal quality level ${g}`)),g>-1)return g;const p=n.levels[l],E=n.loadLevelObj;return E&&p?.bitrate<E.bitrate?l:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,o,l,c){var u;const d=i+o,m=this.lastLoadedFragLevel,f=m===-1?this.hls.firstLevel:m,{fragCurrent:h,partCurrent:g}=this,{levels:p,allAudioTracks:E,loadLevel:S,config:A}=this.hls;if(p.length===1)return 0;const x=p[f],k=!!((u=this.hls.latestLevelDetails)!=null&&u.live),U=S===-1||m===-1;let Y,Q="SDR",L=x?.frameRate||0;const{audioPreference:O,videoPreference:G}=A,te=this.audioTracksByGroup||(this.audioTracksByGroup=IT(E));let ge=-1;if(U){if(this.firstSelection!==-1)return this.firstSelection;const ke=this.codecTiers||(this.codecTiers=RO(p,te,t,n)),Oe=AO(ke,Q,e,O,G),{codecSet:He,videoRanges:Pe,minFramerate:Ge,minBitrate:qe,minIndex:Ze,preferHDR:ct}=Oe;ge=Ze,Y=He,Q=ct?Pe[Pe.length-1]:Pe[0],L=Ge,e=Math.max(e,qe),this.log(`picked start tier ${Er(Oe)}`)}else Y=x?.codecSet,Q=x?.videoRange;const Me=g?g.duration:h?h.duration:0,he=this.bwEstimator.getEstimateTTFB()/1e3,De=[];for(let ke=n;ke>=t;ke--){var _e;const Oe=p[ke],He=ke>f;if(!Oe)continue;if(A.useMediaCapabilities&&!Oe.supportedResult&&!Oe.supportedPromise){const xe=navigator.mediaCapabilities;typeof xe?.decodingInfo=="function"&&yO(Oe,te,Q,L,e,O)?(Oe.supportedPromise=_T(Oe,te,xe,this.supportedCache),Oe.supportedPromise.then(Ie=>{if(!this.hls)return;Oe.supportedResult=Ie;const Ke=this.hls.levels,H=Ke.indexOf(Oe);Ie.error?this.warn(`MediaCapabilities decodingInfo error: "${Ie.error}" for level ${H} ${Er(Ie)}`):Ie.supported?Ie.decodingInfoResults.some(V=>V.smooth===!1||V.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${H} not smooth or powerEfficient: ${Er(Ie)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${H} ${Er(Ie)}`),H>-1&&Ke.length>1&&(this.log(`Removing unsupported level ${H}`),this.hls.removeLevel(H),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Ie=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Ie}`)})):Oe.supportedResult=ST}if((Y&&Oe.codecSet!==Y||Q&&Oe.videoRange!==Q||He&&L>Oe.frameRate||!He&&L>0&&L<Oe.frameRate||(_e=Oe.supportedResult)!=null&&(_e=_e.decodingInfoResults)!=null&&_e.some(xe=>xe.smooth===!1))&&(!U||ke!==ge)){De.push(ke);continue}const Pe=Oe.details,Ge=(g?Pe?.partTarget:Pe?.averagetargetduration)||Me;let qe;He?qe=c*e:qe=l*e;const Ze=Me&&i>=Me*2&&o===0?Oe.averageBitrate:Oe.maxBitrate,ct=this.getTimeToLoadFrag(he,qe,Ze*Ge,Pe===void 0);if(qe>=Ze&&(ke===m||Oe.loadError===0&&Oe.fragmentError===0)&&(ct<=he||!yn(ct)||k&&!this.bitrateTestDelay||ct<d)){const xe=this.forcedAutoLevel;return ke!==S&&(xe===-1||xe!==S)&&(De.length&&this.trace(`Skipped level(s) ${De.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${p[De[0]].codecs}" ${p[De[0]].videoRange}; not compatible with "${Y}" ${Q}`),this.info(`switch candidate:${f}->${ke} adjustedbw(${Math.round(qe)})-bitrate=${Math.round(qe-Ze)} ttfb:${he.toFixed(1)} avgDuration:${Ge.toFixed(1)} maxFetchDuration:${d.toFixed(1)} fetchDuration:${ct.toFixed(1)} firstSelection:${U} codecSet:${Oe.codecSet} videoRange:${Oe.videoRange} hls.loadLevel:${S}`)),U&&(this.firstSelection=ke),ke}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const AT={search:function(r,e){let t=0,n=r.length-1,i=null,o=null;for(;t<=n;){i=(t+n)/2|0,o=r[i];const l=e(o);if(l>0)t=i+1;else if(l<0)n=i-1;else return o}return null}};function DO(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!yn(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let o=0;o<r.length;++o){const l=r[o];if(MO(e,t,l))return l}return null}function ls(r,e,t=0,n=0,i=.005){let o=null;if(r){o=e[1+r.sn-e[0].sn]||null;const c=r.endDTS-t;c>0&&c<15e-7&&(t+=15e-7),o&&r.level!==o.level&&o.end<=r.end&&(o=e[2+r.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(o=e[0]);if(o&&((!r||r.level===o.level)&&o0(t,n,o)===0||PO(o,r,Math.min(i,n))))return o;const l=AT.search(e,o0.bind(null,t,n));return l&&(l!==r||!o)?l:o}function PO(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,o)=>(o[0]==="INF"&&(i+=parseFloat(o[1])),i),t);return r.start<=n}return!1}function o0(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function MO(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function RT(r,e,t){if(r&&r.startCC<=e&&r.endCC>=e){let n=r.fragments;const{fragmentHint:i}=r;i&&(n=n.concat(i));let o;return AT.search(n,l=>l.cc<e?1:l.cc>e?-1:(o=l,l.end<=t?1:l.start>t?-1:0)),o||null}return null}function $c(r){switch(r.details){case vt.FRAG_LOAD_TIMEOUT:case vt.KEY_LOAD_TIMEOUT:case vt.LEVEL_LOAD_TIMEOUT:case vt.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function CT(r){return r.details.startsWith("key")}function kT(r){return CT(r)&&!!r.frag&&!r.frag.decryptdata}function l0(r,e){const t=$c(e);return r.default[`${t?"timeout":"error"}Retry`]}function cm(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function c0(r){return fr(fr({},r),{errorRetry:null,timeoutRetry:null})}function jc(r,e,t,n){if(!r)return!1;const i=n?.code,o=e<r.maxNumRetry&&(OO(i)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,o):o}function OO(r){return fh(r)||!!r&&(r<400||r>499)}function fh(r){return r===0&&navigator.onLine===!1}var jr={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},di={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class FO extends Pi{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(ye.ERROR,this.onError,this),e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(ye.ERROR,this.onError,this),e.off(ye.ERROR,this.onErrorOut,this),e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===xn.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||n===-1?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if((n=e.details)!=null&&n.hasKey(t))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(l=>i.indexOf(l.groupId)>=0).some(l=>{var c;return(c=l.details)==null?void 0:c.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const i=this.hls,o=t.context;switch(t.details){case vt.FRAG_LOAD_ERROR:case vt.FRAG_LOAD_TIMEOUT:case vt.KEY_LOAD_ERROR:case vt.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case vt.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=Ys();return}case vt.FRAG_GAP:case vt.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=jr.SendAlternateToPenaltyBox;return}case vt.LEVEL_EMPTY_ERROR:case vt.LEVEL_PARSING_ERROR:{var l;const u=t.parent===xn.MAIN?t.level:i.loadLevel;t.details===vt.LEVEL_EMPTY_ERROR&&((l=t.context)!=null&&(l=l.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,u):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,u))}return;case vt.LEVEL_LOAD_ERROR:case vt.LEVEL_LOAD_TIMEOUT:typeof o?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case vt.AUDIO_TRACK_LOAD_ERROR:case vt.AUDIO_TRACK_LOAD_TIMEOUT:case vt.SUBTITLE_LOAD_ERROR:case vt.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const u=i.loadLevelObj;if(u&&(o.type===Qn.AUDIO_TRACK&&u.hasAudioGroup(o.groupId)||o.type===Qn.SUBTITLE_TRACK&&u.hasSubtitleGroup(o.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=jr.SendAlternateToPenaltyBox,t.errorAction.flags=di.MoveAllAlternatesMatchingHost;return}}return;case vt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:jr.SendAlternateToPenaltyBox,flags:di.MoveAllAlternatesMatchingHDCP};return;case vt.KEY_SYSTEM_SESSION_UPDATE_FAILED:case vt.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case vt.KEY_SYSTEM_NO_SESSION:t.errorAction={action:jr.SendAlternateToPenaltyBox,flags:di.MoveAllAlternatesMatchingKey};return;case vt.BUFFER_ADD_CODEC_ERROR:case vt.REMUX_ALLOC_ERROR:case vt.BUFFER_APPEND_ERROR:if(!t.errorAction){var c;t.errorAction=this.getLevelSwitchAction(t,(c=t.level)!=null?c:i.loadLevel)}return;case vt.INTERNAL_EXCEPTION:case vt.BUFFER_APPENDING_ERROR:case vt.BUFFER_FULL_ERROR:case vt.LEVEL_SWITCH_ERROR:case vt.BUFFER_STALLED_ERROR:case vt.BUFFER_SEEK_OVER_HOLE:case vt.BUFFER_NUDGE_ON_STALL:t.errorAction=Ys();return}t.type===Nn.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=Ys())}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=l0(n.config.playlistLoadPolicy,e),o=this.playlistError++;if(jc(i,o,$c(e),e.response))return{action:jr.RetryRequest,flags:di.None,retryConfig:i,retryCount:o};const c=this.getLevelSwitchAction(e,t);return i&&(c.retryConfig=i,c.retryCount=o),c}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:o,keyLoadPolicy:l}=t.config,c=l0(CT(e)?l:o,e),u=t.levels.reduce((m,f)=>m+f.fragmentError,0);if(i&&(e.details!==vt.FRAG_GAP&&i.fragmentError++,!kT(e)&&jc(c,u,$c(e),e.response)))return{action:jr.RetryRequest,flags:di.None,retryConfig:c,retryCount:u};const d=this.getLevelSwitchAction(e,n);return c&&(d.retryConfig=c,d.retryCount=u),d}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var o,l;const d=e.details;i.loadError++,d===vt.BUFFER_APPEND_ERROR&&i.fragmentError++;let m=-1;const{levels:f,loadLevel:h,minAutoLevel:g,maxAutoLevel:p}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const E=(o=e.frag)==null?void 0:o.type,A=(E===xn.AUDIO&&d===vt.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(d===vt.BUFFER_ADD_CODEC_ERROR||d===vt.BUFFER_APPEND_ERROR))&&f.some(({audioCodec:Q})=>i.audioCodec!==Q),k=e.sourceBufferName==="video"&&(d===vt.BUFFER_ADD_CODEC_ERROR||d===vt.BUFFER_APPEND_ERROR)&&f.some(({codecSet:Q,audioCodec:L})=>i.codecSet!==Q&&i.audioCodec===L),{type:U,groupId:Y}=(l=e.context)!=null?l:{};for(let Q=f.length;Q--;){const L=(Q+h)%f.length;if(L!==h&&L>=g&&L<=p&&f[L].loadError===0){var c,u;const O=f[L];if(d===vt.FRAG_GAP&&E===xn.MAIN&&e.frag){const G=f[L].details;if(G){const te=ls(e.frag,G.fragments,e.frag.start);if(te!=null&&te.gap)continue}}else{if(U===Qn.AUDIO_TRACK&&O.hasAudioGroup(Y)||U===Qn.SUBTITLE_TRACK&&O.hasSubtitleGroup(Y))continue;if(E===xn.AUDIO&&(c=i.audioGroups)!=null&&c.some(G=>O.hasAudioGroup(G))||E===xn.SUBTITLE&&(u=i.subtitleGroups)!=null&&u.some(G=>O.hasSubtitleGroup(G))||A&&i.audioCodec===O.audioCodec||k&&i.codecSet===O.codecSet||!A&&i.codecSet!==O.codecSet)continue}m=L;break}}if(m>-1&&n.loadLevel!==m)return e.levelRetry=!0,this.playlistError=0,{action:jr.SendAlternateToPenaltyBox,flags:di.None,nextAutoLevel:m}}return{action:jr.SendAlternateToPenaltyBox,flags:di.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case jr.DoNothing:break;case jr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==vt.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i}=n,o=n.nextAutoLevel;switch(i){case di.None:this.switchLevel(e,o);break;case di.MoveAllAlternatesMatchingHDCP:{const u=this.getVariantLevelIndex(e.frag),d=t.levels[u],m=d?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=m,m==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(m){t.maxHdcpLevel=dh[dh.indexOf(m)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case di.MoveAllAlternatesMatchingKey:{const u=e.decryptdata;if(u){const d=this.hls.levels,m=d.length;for(let h=m;h--;)if(this.variantHasKey(d[h],u)){var l,c;this.log(`Banned key found in level ${h} (${d[h].bitrate}bps) or audio group "${(l=d[h].audioGroups)==null?void 0:l.join(",")}" (${(c=e.frag)==null?void 0:c.type} fragment) ${qr(u.keyId||[])}`),d[h].fragmentError++,d[h].loadError++,this.log(`Removing level ${h} with key error (${e.error})`),this.hls.removeLevel(h)}const f=e.frag;if(this.hls.levels.length<m)n.resolved=!0;else if(f&&f.type!==xn.MAIN){const h=f.decryptdata;h&&!u.matches(h)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,o)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===vt.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=uh(e.mimeType),i=this.hls.levels;for(let o=i.length;o--;)i[o][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${o} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(o))}}}function Ys(r){const e={action:jr.DoNothing,flags:di.None};return r&&(e.resolved=!0),e}var Or={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class zO{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ye.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ye.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ye.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ye.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const o=n[i];if(!o)break;if(o.start<=e&&e<=o.end&&o.loaded)return o}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:i}=this,o=Object.keys(i);for(let l=o.length;l--;){const c=i[o[l]];if(c?.body.type===t&&(!n||c.buffered)){const u=c.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,t,n,i,o){this.timeRanges&&(this.timeRanges[e]=t);const l=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(c=>{const u=this.fragments[c];if(!u||l>=u.body.sn)return;if(!u.buffered&&(!u.loaded||o)){u.body.type===n&&this.removeFragment(u.body);return}const d=u.range[e];if(d){if(d.time.length===0){this.removeFragment(u.body);return}d.time.some(m=>{const f=!this.isTimeBuffered(m.startPTS,m.endPTS,t);return f&&this.removeFragment(u.body),f})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,i=Os(n),o=this.fragments[i];if(!o||o.buffered&&n.gap)return;const l=!n.relurl;Object.keys(t).forEach(c=>{const u=n.elementaryStreams[c];if(!u)return;const d=t[c],m=l||u.partial===!0;o.range[c]=this.getBufferedTimes(n,e.part,m,d)}),o.loaded=null,Object.keys(o.range).length?(this.bufferedEnd(o,n),ql(o)||this.removeParts(n.sn-1,n.type)):this.removeFragment(o.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=u0(n,i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=Os(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,t,n,i){const o={time:[],partial:n},l=e.start,c=e.end,u=e.minEndPTS||c,d=e.maxStartPTS||l;for(let m=0;m<i.length;m++){const f=i.start(m)-this.bufferPadding,h=i.end(m)+this.bufferPadding;if(d>=f&&u<=h){o.time.push({startPTS:Math.max(l,i.start(m)),endPTS:Math.min(c,i.end(m))});break}else if(l<h&&c>f){const g=Math.max(l,i.start(m)),p=Math.min(c,i.end(m));p>g&&(o.partial=!0,o.time.push({startPTS:g,endPTS:p}))}else if(c<=f)break}return o}getPartialFragment(e){let t=null,n,i,o,l=0;const{bufferPadding:c,fragments:u}=this;return Object.keys(u).forEach(d=>{const m=u[d];m&&ql(m)&&(i=m.body.start-c,o=m.body.end+c,e>=i&&e<=o&&(n=Math.min(e-i,o-e),l<=n&&(t=m.body,l=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||ql(t))}getState(e){const t=Os(e),n=this.fragments[t];return n?n.buffered?ql(n)?Or.PARTIAL:Or.OK:Or.APPENDING:Or.NOT_LOADED}isTimeBuffered(e,t,n){let i,o;for(let l=0;l<n.length;l++){if(i=n.start(l)-this.bufferPadding,o=n.end(l)+this.bufferPadding,e>=i&&t<=o)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,i=t.part?null:t,o=Os(n);this.fragments[o]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:o,type:l}=t;if(n.sn==="initSegment")return;const c=n.type;if(i){let d=this.activePartLists[c];d||(this.activePartLists[c]=d=[]),d.push(i)}this.timeRanges=o;const u=o[l];this.detectEvictedFragments(l,u,c,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Os(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let i=n.length;i--;){const o=t[n[i]];if(o?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,o){i&&!this.hasGaps||Object.keys(this.fragments).forEach(l=>{const c=this.fragments[l];if(!c)return;const u=c.body;u.type!==n||i&&!u.gap||u.start<t&&u.end>e&&(c.buffered||o)&&this.removeFragment(u)})}removeFragment(e){const t=Os(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=u0(n,o=>o.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(n=>n.clearElementaryStreamInfo())}}function ql(r){var e,t,n;return r.buffered&&!!(r.body.gap||(e=r.range.video)!=null&&e.partial||(t=r.range.audio)!=null&&t.partial||(n=r.range.audiovideo)!=null&&n.partial)}function Os(r){return`${r.type}_${r.level}_${r.sn}`}function u0(r,e){return r.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var ja={cbc:0,ctr:1};class UO{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case ja.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case ja.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function BO(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?r.slice(0,e-t):r}class $O{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],o=n[1],l=n[2],c=n[3],u=this.invSubMix,d=u[0],m=u[1],f=u[2],h=u[3],g=new Uint32Array(256);let p=0,E=0,S=0;for(S=0;S<256;S++)S<128?g[S]=S<<1:g[S]=S<<1^283;for(S=0;S<256;S++){let A=E^E<<1^E<<2^E<<3^E<<4;A=A>>>8^A&255^99,e[p]=A,t[A]=p;const x=g[p],k=g[x],U=g[k];let Y=g[A]*257^A*16843008;i[p]=Y<<24|Y>>>8,o[p]=Y<<16|Y>>>16,l[p]=Y<<8|Y>>>24,c[p]=Y,Y=U*16843009^k*65537^x*257^p*16843008,d[A]=Y<<24|Y>>>8,m[A]=Y<<16|Y>>>16,f[A]=Y<<8|Y>>>24,h[A]=Y,p?(p=x^g[g[g[U^x]]],E^=g[g[E]]):p=E=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const o=this.keySize=t.length;if(o!==4&&o!==6&&o!==8)throw new Error("Invalid aes key size="+o);const l=this.ksRows=(o+6+1)*4;let c,u;const d=this.keySchedule=new Uint32Array(l),m=this.invKeySchedule=new Uint32Array(l),f=this.sBox,h=this.rcon,g=this.invSubMix,p=g[0],E=g[1],S=g[2],A=g[3];let x,k;for(c=0;c<l;c++){if(c<o){x=d[c]=t[c];continue}k=x,c%o===0?(k=k<<8|k>>>24,k=f[k>>>24]<<24|f[k>>>16&255]<<16|f[k>>>8&255]<<8|f[k&255],k^=h[c/o|0]<<24):o>6&&c%o===4&&(k=f[k>>>24]<<24|f[k>>>16&255]<<16|f[k>>>8&255]<<8|f[k&255]),d[c]=x=(d[c-o]^k)>>>0}for(u=0;u<l;u++)c=l-u,u&3?k=d[c]:k=d[c-4],u<4||c<=4?m[u]=k:m[u]=p[f[k>>>24]]^E[f[k>>>16&255]]^S[f[k>>>8&255]]^A[f[k&255]],m[u]=m[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,o=this.invKeySchedule,l=this.invSBox,c=this.invSubMix,u=c[0],d=c[1],m=c[2],f=c[3],h=this.uint8ArrayToUint32Array_(n);let g=h[0],p=h[1],E=h[2],S=h[3];const A=new Int32Array(e),x=new Int32Array(A.length);let k,U,Y,Q,L,O,G,te,ge,Me,he,De,_e,ke;const Oe=this.networkToHostOrderSwap;for(;t<A.length;){for(ge=Oe(A[t]),Me=Oe(A[t+1]),he=Oe(A[t+2]),De=Oe(A[t+3]),L=ge^o[0],O=De^o[1],G=he^o[2],te=Me^o[3],_e=4,ke=1;ke<i;ke++)k=u[L>>>24]^d[O>>16&255]^m[G>>8&255]^f[te&255]^o[_e],U=u[O>>>24]^d[G>>16&255]^m[te>>8&255]^f[L&255]^o[_e+1],Y=u[G>>>24]^d[te>>16&255]^m[L>>8&255]^f[O&255]^o[_e+2],Q=u[te>>>24]^d[L>>16&255]^m[O>>8&255]^f[G&255]^o[_e+3],L=k,O=U,G=Y,te=Q,_e=_e+4;k=l[L>>>24]<<24^l[O>>16&255]<<16^l[G>>8&255]<<8^l[te&255]^o[_e],U=l[O>>>24]<<24^l[G>>16&255]<<16^l[te>>8&255]<<8^l[L&255]^o[_e+1],Y=l[G>>>24]<<24^l[te>>16&255]<<16^l[L>>8&255]<<8^l[O&255]^o[_e+2],Q=l[te>>>24]<<24^l[L>>16&255]<<16^l[O>>8&255]<<8^l[G&255]^o[_e+3],x[t]=Oe(k^g),x[t+1]=Oe(Q^p),x[t+2]=Oe(Y^E),x[t+3]=Oe(U^S),g=ge,p=Me,E=he,S=De,t=t+4}return x.buffer}}class jO{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=qO(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function qO(r){switch(r){case ja.cbc:return"AES-CBC";case ja.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${r}`)}}const GO=16;class um{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?BO(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,i){return this.useSoftware?new Promise((o,l)=>{const c=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(c,t,n,i);const u=this.flush();u?o(u.buffer):l(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,i)}softwareDecrypt(e,t,n,i){const{currentIV:o,currentResult:l,remainderData:c}=this;if(i!==ja.cbc||t.byteLength!==16)return hr.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),c&&(e=Ni(c,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;o&&(n=o);let d=this.softwareDecrypter;d||(d=this.softwareDecrypter=new $O),d.expandKey(t);const m=l;return this.currentResult=d.decrypt(u.buffer,0,n),this.currentIV=u.slice(-16).buffer,m||null}webCryptoDecrypt(e,t,n,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,i));this.key=t,this.fastAesKey=new jO(this.subtle,t,i)}return this.fastAesKey.expandKey().then(o=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new UO(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,o)):Promise.reject(new Error("web crypto not initialized"))).catch(o=>(hr.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${o.name}: ${o.message}`),this.onWebCryptoError(e,t,n,i)))}onWebCryptoError(e,t,n,i){const o=this.enableSoftwareAES;if(o){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,i);const l=this.flush();if(l)return l.buffer}throw new Error("WebCrypto"+(o?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%GO;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(hr.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const d0=Math.pow(2,17);class HO{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new pa({type:Nn.NETWORK_ERROR,details:vt.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,o=i.fLoader,l=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){u(h0(e));return}else e.gap=!1;const d=this.loader=o?new o(i):new l(i),m=f0(e);e.loader=d;const f=c0(i.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:d0};e.stats=d.stats;const g={onSuccess:(p,E,S,A)=>{this.resetLoader(e,d);let x=p.data;S.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(x.slice(0,16)),x=x.slice(16)),c({frag:e,part:null,payload:x,networkDetails:A})},onError:(p,E,S,A)=>{this.resetLoader(e,d),u(new pa({type:Nn.NETWORK_ERROR,details:vt.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:fr({url:n,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:S,stats:A}))},onAbort:(p,E,S)=>{this.resetLoader(e,d),u(new pa({type:Nn.NETWORK_ERROR,details:vt.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:S,stats:p}))},onTimeout:(p,E,S)=>{this.resetLoader(e,d),u(new pa({type:Nn.NETWORK_ERROR,details:vt.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:S,stats:p}))}};t&&(g.onProgress=(p,E,S,A)=>t({frag:e,part:null,payload:S,networkDetails:A})),d.load(m,h,g)})}loadPart(e,t,n){this.abort();const i=this.config,o=i.fLoader,l=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){u(h0(e,t));return}const d=this.loader=o?new o(i):new l(i),m=f0(e,t);e.loader=d;const f=c0(i.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:d0};t.stats=d.stats,d.load(m,h,{onSuccess:(g,p,E,S)=>{this.resetLoader(e,d),this.updateStatsFromPart(e,t);const A={frag:e,part:t,payload:g.data,networkDetails:S};n(A),c(A)},onError:(g,p,E,S)=>{this.resetLoader(e,d),u(new pa({type:Nn.NETWORK_ERROR,details:vt.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:fr({url:m.url,data:void 0},g),error:new Error(`HTTP Error ${g.code} ${g.text}`),networkDetails:E,stats:S}))},onAbort:(g,p,E)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,d),u(new pa({type:Nn.NETWORK_ERROR,details:vt.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:E,stats:g}))},onTimeout:(g,p,E)=>{this.resetLoader(e,d),u(new pa({type:Nn.NETWORK_ERROR,details:vt.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:E,stats:g}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,o=i.total;if(n.loaded+=i.loaded,o){const u=Math.round(e.duration/t.duration),d=Math.min(Math.round(n.loaded/o),u),f=(u-d)*Math.round(n.loaded/d);n.total=n.loaded+f}else n.total=Math.max(n.loaded,n.total);const l=n.loading,c=i.loading;l.start?l.first+=c.first-c.start:(l.start=c.start,l.first=c.first),l.end=c.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function f0(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,o=t.byteRangeEndOffset;if(yn(i)&&yn(o)){var l;let c=i,u=o;if(r.sn==="initSegment"&&VO((l=r.decryptdata)==null?void 0:l.method)){const d=o-i;d%16&&(u=o+(16-d%16)),i!==0&&(n.resetIV=!0,c=i-16)}n.rangeStart=c,n.rangeEnd=u}return n}function h0(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:Nn.MEDIA_ERROR,details:vt.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new pa(n)}function VO(r){return r==="AES-128"||r==="AES-256"}class pa extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class LT extends Pi{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class dm{constructor(e,t,n,i=0,o=-1,l=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Gl(),this.buffering={audio:Gl(),video:Gl(),audiovideo:Gl()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=o,this.partial=l}}function Gl(){return{start:0,executeStart:0,executeEnd:0,end:0}}const m0={length:0,start:()=>0,end:()=>0};class qn{static isBuffered(e,t){if(e){const n=qn.getBuffered(e);for(let i=n.length;i--;)if(t>=n.start(i)&&t<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=qn.getBuffered(e);return qn.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const i=qn.bufferedRanges(e);if(i.length)return qn.bufferedInfo(i,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((m,f)=>m.start-f.start||f.end-m.end);let i=-1,o=[];if(n)for(let m=0;m<e.length;m++){t>=e[m].start&&t<=e[m].end&&(i=m);const f=o.length;if(f){const h=o[f-1].end;e[m].start-h<n?e[m].end>h&&(o[f-1].end=e[m].end):o.push(e[m])}else o.push(e[m])}else o=e;let l=0,c,u=t,d=t;for(let m=0;m<o.length;m++){const f=o[m].start,h=o[m].end;if(i===-1&&t>=f&&t<=h&&(i=m),t+n>=f&&t<h)u=f,d=h,l=d-t;else if(t+n<f){c=f;break}}return{len:l,start:u||0,end:d||0,nextStart:c,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||m0}catch(t){return hr.log("failed to get media.buffered",t),m0}}}const NT=/\{\$([a-zA-Z0-9-_]+)\}/g;function g0(r){return NT.test(r)}function hh(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(NT,n=>{const i=n.substring(2,n.length-1),o=t?.[i];return o===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):o})}return e}function p0(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,o;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const l=new self.URL(t).searchParams;if(l.has(i))o=l.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(l){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${l.message}`))}}else i=e.NAME,o=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=o||""}function KO(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const YO=/^(\d+)x(\d+)$/,y0=/(.+?)=(".*?"|.*?)(?:,|$)/g;class wr{constructor(e,t){typeof e=="string"&&(e=wr.parseAttrList(e,t)),pr(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,o)=>(i[o.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=YO.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const i={};for(y0.lastIndex=0;(n=y0.exec(e))!==null;){const l=n[1].trim();let c=n[2];const u=c.indexOf('"')===0&&c.lastIndexOf('"')===c.length-1;let d=!1;if(u)c=c.slice(1,-1);else switch(l){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":d=!0}if(t&&(u||d))c=hh(t,c);else if(!d&&!u)switch(l){case"CLOSED-CAPTIONS":if(c==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":hr.warn(`${e}: attribute ${l} is missing quotes`)}i[l]=c}return i}}const WO="com.apple.hls.interstitial";function XO(r){return r!=="ID"&&r!=="CLASS"&&r!=="CUE"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function QO(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"||r==="SCTE35-CMD"}class DT{constructor(e,t,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(i=t?.tagOrder)!=null?i:n,t){const o=t.attr;for(const l in o)if(Object.prototype.hasOwnProperty.call(e,l)&&e[l]!==o[l]){hr.warn(`DATERANGE tag attribute: "${l}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=l;break}e=pr(new wr({}),o,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const o=t?.endDate||new Date(this.attr["END-DATE"]);yn(o.getTime())&&(this._endDate=o)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(hr.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(yn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===WO}get isValid(){return!!this.id&&!this._badValueForSameId&&yn(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const ZO=10;class JO{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?yn(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||ZO}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function qc(r,e){return r.length===e.length?!r.some((t,n)=>t!==e[n]):!1}function b0(r,e){return!r&&!e?!0:!r||!e?!1:qc(r,e)}function Ws(r){return r==="AES-128"||r==="AES-256"||r==="AES-256-CTR"}function fm(r){switch(r){case"AES-128":case"AES-256":return ja.cbc;case"AES-256-CTR":return ja.ctr;default:throw new Error(`invalid full segment method ${r}`)}}function hm(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function mh(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}function eF(r){const e=mh(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function PT(r){const e=function(n,i,o){const l=n[i];n[i]=n[o],n[o]=l};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function MT(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const o=i[0]==="base64",l=i[1];o?(n.splice(-1,1),t=hm(l)):t=eF(l)}}return t}const Gc=typeof self<"u"?self:void 0;var _r={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Gr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function lc(r){switch(r){case Gr.FAIRPLAY:return _r.FAIRPLAY;case Gr.PLAYREADY:return _r.PLAYREADY;case Gr.WIDEVINE:return _r.WIDEVINE;case Gr.CLEARKEY:return _r.CLEARKEY}}function Id(r){switch(r){case _r.FAIRPLAY:return Gr.FAIRPLAY;case _r.PLAYREADY:return Gr.PLAYREADY;case _r.WIDEVINE:return Gr.WIDEVINE;case _r.CLEARKEY:return Gr.CLEARKEY}}function Ro(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[_r.FAIRPLAY,_r.WIDEVINE,_r.PLAYREADY,_r.CLEARKEY].filter(i=>!!e[i]):[];return!n[_r.WIDEVINE]&&t&&n.push(_r.WIDEVINE),n}const OT=(function(r){return Gc!=null&&(r=Gc.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function tF(r,e,t,n){let i;switch(r){case _r.FAIRPLAY:i=["cenc","sinf"];break;case _r.WIDEVINE:case _r.PLAYREADY:i=["cenc"];break;case _r.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return nF(i,e,t,n)}function nF(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(o=>({contentType:`audio/mp4; codecs=${o}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(o=>({contentType:`video/mp4; codecs=${o}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function rF(r){var e;return!!r&&(r.sessionType==="persistent-license"||!!((e=r.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function FT(r){const e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),l=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(l){const c=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(c){const u=hm(c).subarray(0,16);return PT(u),u}}return null}let Fs={};class Ua{static clearKeyUriToKeyIdMap(){Fs={}}static setKeyIdForUri(e,t){Fs[e]=t}static addKeyIdForUri(e){const t=Object.keys(Fs).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,t),Fs[e]=n,n}constructor(e,t,n,i=[1],o=null,l){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=o,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Ws(e),l!=null&&l.startsWith("0x")&&(this.keyId=new Uint8Array(dT(l)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&qc(e.keyFormatVersions,this.keyFormatVersions)&&b0(e.iv,this.iv)&&b0(e.keyId,this.keyId)}isSupported(){if(this.method){if(Ws(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Gr.FAIRPLAY:case Gr.WIDEVINE:case Gr.PLAYREADY:case Gr.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(Ws(this.method)){let o=this.iv;return o||(typeof e!="number"&&(hr.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),o=aF(e)),new Ua(this.method,this.uri,"identity",this.keyFormatVersions,o)}if(this.keyId){const o=Fs[this.uri];if(o&&!qc(this.keyId,o)&&Ua.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=MT(this.uri);if(n)switch(this.keyFormat){case Gr.WIDEVINE:if(this.pssh=n,!this.keyId){const o=lO(n.buffer);if(o.length){var i;const l=o[0];this.keyId=(i=l.kids)!=null&&i.length?l.kids[0]:null}}this.keyId||(this.keyId=E0(t));break;case Gr.PLAYREADY:{const o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=oO(o,null,n),this.keyId=FT(n);break}default:{let o=n.subarray(0,16);if(o.length!==16){const l=new Uint8Array(16);l.set(o,16-o.length),o=l}this.keyId=o;break}}if(!this.keyId||this.keyId.byteLength!==16){let o;o=iF(t),o||(o=E0(t),o||(o=Fs[this.uri])),o&&(this.keyId=o,Ua.setKeyIdForUri(this.uri,o))}return this}}function iF(r){const e=r?.[Gr.WIDEVINE];return e?e.keyId:null}function E0(r){const e=r?.[Gr.PLAYREADY];if(e){const t=MT(e.uri);if(t)return FT(t)}return null}function aF(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const v0=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,T0=/#EXT-X-MEDIA:(.*)/g,sF=/^#EXT(?:INF|-X-TARGETDURATION):/m,Ad=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),oF=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class aa{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return im.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return sF.test(e)}static parseMasterPlaylist(e,t){const n=g0(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},o=[];if(v0.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let l;for(;(l=v0.exec(e))!=null;)if(l[1]){var c;const d=new wr(l[1],i),m=hh(i,l[2]),f={attrs:d,bitrate:d.decimalInteger("BANDWIDTH")||d.decimalInteger("AVERAGE-BANDWIDTH"),name:d.NAME,url:aa.resolve(m,t)},h=d.decimalResolution("RESOLUTION");h&&(f.width=h.width,f.height=h.height),_0(d.CODECS,f);const g=d["SUPPLEMENTAL-CODECS"];g&&(f.supplemental={},_0(g,f.supplemental)),(c=f.unknownCodecs)!=null&&c.length||o.push(f),i.levels.push(f)}else if(l[3]){const d=l[3],m=l[4];switch(d){case"SESSION-DATA":{const f=new wr(m,i),h=f["DATA-ID"];h&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[h]=f);break}case"SESSION-KEY":{const f=S0(m,t,i);f.encrypted&&f.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(f)):hr.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${m}"`);break}case"DEFINE":{{const f=new wr(m,i);p0(i,f,t)}break}case"CONTENT-STEERING":{const f=new wr(m,i);i.contentSteering={uri:aa.resolve(f["SERVER-URI"],t),pathwayId:f["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=w0(m);break}}}const u=o.length>0&&o.length<i.levels.length;return i.levels=u?o:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const o={},l=n.levels,c={AUDIO:l.map(d=>({id:d.attrs.AUDIO,audioCodec:d.audioCodec})),SUBTITLES:l.map(d=>({id:d.attrs.SUBTITLES,textCodec:d.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(T0.lastIndex=0;(i=T0.exec(e))!==null;){const d=new wr(i[1],n),m=d.TYPE;if(m){const f=c[m],h=o[m]||[];o[m]=h;const g=d.LANGUAGE,p=d["ASSOC-LANGUAGE"],E=d.CHANNELS,S=d.CHARACTERISTICS,A=d["INSTREAM-ID"],x={attrs:d,bitrate:0,id:u++,groupId:d["GROUP-ID"]||"",name:d.NAME||g||"",type:m,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:g,url:d.URI?aa.resolve(d.URI,t):""};if(p&&(x.assocLang=p),E&&(x.channels=E),S&&(x.characteristics=S),A&&(x.instreamId=A),f!=null&&f.length){const k=aa.findGroup(f,x.groupId)||f[0];x0(x,k,"audioCodec"),x0(x,k,"textCodec")}h.push(x)}}return o}static parseLevelPlaylist(e,t,n,i,o,l){var c;const u={url:t},d=new JO(t),m=d.fragments,f=[];let h=null,g=0,p=0,E=0,S=0,A=0,x=null,k=new wd(i,u),U,Y,Q,L=-1,O=!1,G=null,te;if(Ad.lastIndex=0,d.m3u8=e,d.hasVariableRefs=g0(e),((c=Ad.exec(e))==null?void 0:c[0])!=="#EXTM3U")return d.playlistParsingError=new Error("Missing format identifier #EXTM3U"),d;for(;(U=Ad.exec(e))!==null;){O&&(O=!1,k=new wd(i,u),k.playlistOffset=E,k.setStart(E),k.sn=g,k.cc=S,A&&(k.bitrate=A),k.level=n,h&&(k.initSegment=h,h.rawProgramDateTime&&(k.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null),G&&(k.setByteRange(G),G=null)));const De=U[1];if(De){k.duration=parseFloat(De);const _e=(" "+U[2]).slice(1);k.title=_e||null,k.tagList.push(_e?["INF",De,_e]:["INF",De])}else if(U[3]){if(yn(k.duration)){k.playlistOffset=E,k.setStart(E),Q&&A0(k,Q,d),k.sn=g,k.level=n,k.cc=S,m.push(k);const _e=(" "+U[3]).slice(1);k.relurl=hh(d,_e),gh(k,x,f),x=k,E+=k.duration,g++,p=0,O=!0}}else{if(U=U[0].match(oF),!U){hr.warn("No matches on slow regex match for level playlist!");continue}for(Y=1;Y<U.length&&U[Y]===void 0;Y++);const _e=(" "+U[Y]).slice(1),ke=(" "+U[Y+1]).slice(1),Oe=U[Y+2]?(" "+U[Y+2]).slice(1):null;switch(_e){case"BYTERANGE":x?k.setByteRange(ke,x):k.setByteRange(ke);break;case"PROGRAM-DATE-TIME":k.rawProgramDateTime=ke,k.tagList.push(["PROGRAM-DATE-TIME",ke]),L===-1&&(L=m.length);break;case"PLAYLIST-TYPE":d.type&&fa(d,_e,U),d.type=ke.toUpperCase();break;case"MEDIA-SEQUENCE":d.startSN!==0?fa(d,_e,U):m.length>0&&R0(d,_e,U),g=d.startSN=parseInt(ke);break;case"SKIP":{d.skippedSegments&&fa(d,_e,U);const He=new wr(ke,d),Pe=He.decimalInteger("SKIPPED-SEGMENTS");if(yn(Pe)){d.skippedSegments+=Pe;for(let qe=Pe;qe--;)m.push(null);g+=Pe}const Ge=He.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ge&&(d.recentlyRemovedDateranges=(d.recentlyRemovedDateranges||[]).concat(Ge.split("	")));break}case"TARGETDURATION":d.targetduration!==0&&fa(d,_e,U),d.targetduration=Math.max(parseInt(ke),1);break;case"VERSION":d.version!==null&&fa(d,_e,U),d.version=parseInt(ke);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":d.live||fa(d,_e,U),d.live=!1;break;case"#":(ke||Oe)&&k.tagList.push(Oe?[ke,Oe]:[ke]);break;case"DISCONTINUITY":S++,k.tagList.push(["DIS"]);break;case"GAP":k.gap=!0,k.tagList.push([_e]);break;case"BITRATE":k.tagList.push([_e,ke]),A=parseInt(ke)*1e3,yn(A)?k.bitrate=A:A=0;break;case"DATERANGE":{const He=new wr(ke,d),Pe=new DT(He,d.dateRanges[He.ID],d.dateRangeTagCount);d.dateRangeTagCount++,Pe.isValid||d.skippedSegments?d.dateRanges[Pe.id]=Pe:hr.warn(`Ignoring invalid DATERANGE tag: "${ke}"`),k.tagList.push(["EXT-X-DATERANGE",ke]);break}case"DEFINE":{{const He=new wr(ke,d);"IMPORT"in He?KO(d,He,l):p0(d,He,t)}break}case"DISCONTINUITY-SEQUENCE":d.startCC!==0?fa(d,_e,U):m.length>0&&R0(d,_e,U),d.startCC=S=parseInt(ke);break;case"KEY":{const He=S0(ke,t,d);if(He.isSupported()){if(He.method==="NONE"){Q=void 0;break}Q||(Q={});const Pe=Q[He.keyFormat];Pe!=null&&Pe.matches(He)||(Pe&&(Q=pr({},Q)),Q[He.keyFormat]=He)}else hr.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${ke}"`);break}case"START":d.startTimeOffset=w0(ke);break;case"MAP":{const He=new wr(ke,d);if(k.duration){const Pe=new wd(i,u);I0(Pe,He,n,Q),h=Pe,k.initSegment=h,h.rawProgramDateTime&&!k.rawProgramDateTime&&(k.rawProgramDateTime=h.rawProgramDateTime)}else{const Pe=k.byteRangeEndOffset;if(Pe){const Ge=k.byteRangeStartOffset;G=`${Pe-Ge}@${Ge}`}else G=null;I0(k,He,n,Q),h=k,O=!0}h.cc=S;break}case"SERVER-CONTROL":{te&&fa(d,_e,U),te=new wr(ke),d.canBlockReload=te.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=te.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=d.canSkipUntil>0&&te.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=te.optionalFloat("PART-HOLD-BACK",0),d.holdBack=te.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{d.partTarget&&fa(d,_e,U);const He=new wr(ke);d.partTarget=He.decimalFloatingPoint("PART-TARGET");break}case"PART":{let He=d.partList;He||(He=d.partList=[]);const Pe=p>0?He[He.length-1]:void 0,Ge=p++,qe=new wr(ke,d),Ze=new KM(qe,k,u,Ge,Pe);He.push(Ze),k.duration+=Ze.duration;break}case"PRELOAD-HINT":{const He=new wr(ke,d);d.preloadHint=He;break}case"RENDITION-REPORT":{const He=new wr(ke,d);d.renditionReports=d.renditionReports||[],d.renditionReports.push(He);break}default:hr.warn(`line parsed but not handled: ${U}`);break}}}x&&!x.relurl?(m.pop(),E-=x.duration,d.partList&&(d.fragmentHint=x)):d.partList&&(gh(k,x,f),k.cc=S,d.fragmentHint=k,Q&&A0(k,Q,d)),d.targetduration||(d.playlistParsingError=new Error("Missing Target Duration"));const ge=m.length,Me=m[0],he=m[ge-1];if(E+=d.skippedSegments*d.targetduration,E>0&&ge&&he){d.averagetargetduration=E/ge;const De=he.sn;d.endSN=De!=="initSegment"?De:0,d.live||(he.endList=!0),L>0&&(cF(m,L),Me&&f.unshift(Me))}return d.fragmentHint&&(E+=d.fragmentHint.duration),d.totalduration=E,f.length&&d.dateRangeTagCount&&Me&&zT(f,d),d.endCC=S,d}}function zT(r,e){let t=r.length;if(!t)if(e.hasProgramDateTime){const c=e.fragments[e.fragments.length-1];r.push(c),t++}else return;const n=r[t-1],i=e.live?1/0:e.totalduration,o=Object.keys(e.dateRanges);for(let c=o.length;c--;){const u=e.dateRanges[o[c]],d=u.startDate.getTime();u.tagAnchor=n.ref;for(let m=t;m--;){var l;if(((l=r[m])==null?void 0:l.sn)<e.startSN)break;const f=lF(e,d,r,m,i);if(f!==-1){u.tagAnchor=e.fragments[f].ref;break}}}}function lF(r,e,t,n,i){const o=t[n];if(o){const c=o.programDateTime;if(e>=c||n===0){var l;const u=(((l=t[n+1])==null?void 0:l.start)||i)-o.start;if(e<=c+u*1e3){const d=t[n].sn-r.startSN;if(d<0)return-1;const m=r.fragments;if(m.length>t.length){const h=(t[n+1]||m[m.length-1]).sn-r.startSN;for(let g=h;g>d;g--){const p=m[g].programDateTime;if(e>=p&&e<p+m[g].duration*1e3)return g}}return d}}}return-1}function S0(r,e,t){var n,i;const o=new wr(r,t),l=(n=o.METHOD)!=null?n:"",c=o.URI,u=o.hexadecimalInteger("IV"),d=o.KEYFORMATVERSIONS,m=(i=o.KEYFORMAT)!=null?i:"identity";c&&o.IV&&!u&&hr.error(`Invalid IV: ${o.IV}`);const f=c?aa.resolve(c,e):"",h=(d||"1").split("/").map(Number).filter(Number.isFinite);return new Ua(l,f,m,h,u,o.KEYID)}function w0(r){const t=new wr(r).decimalFloatingPoint("TIME-OFFSET");return yn(t)?t:null}function _0(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(o=>om(o,n));i.length&&(e[`${n}Codec`]=i.map(o=>o.split("/")[0]).join(","),t=t.filter(o=>i.indexOf(o)===-1))}),e.unknownCodecs=t}function x0(r,e,t){const n=e[t];n&&(r[t]=n)}function cF(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function gh(r,e,t){r.rawProgramDateTime?t.push(r):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime)}function I0(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function A0(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}function fa(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function R0(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function Rd(r,e){const t=e.startPTS;if(yn(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.setStart(r.start+(r.minEndPTS-r.start)):e.setStart(r.start+r.duration):e.setStart(Math.max(r.start-e.duration,0))}function UT(r,e,t,n,i,o,l){n-t<=0&&(l.warn("Fragment should have a positive duration",e),n=t+e.duration,o=i+e.duration);let u=t,d=n;const m=e.startPTS,f=e.endPTS;if(yn(m)){const A=Math.abs(m-t);r&&A>r.totalduration?l.warn(`media timestamps and playlist times differ by ${A}s for level ${e.level} ${r.url}`):yn(e.deltaPTS)?e.deltaPTS=Math.max(A,e.deltaPTS):e.deltaPTS=A,u=Math.max(t,m),t=Math.min(t,m),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,d=Math.min(n,f),n=Math.max(n,f),o=e.endDTS!==void 0?Math.max(o,e.endDTS):o}const h=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=u,e.startDTS=i,e.endPTS=n,e.minEndPTS=d,e.endDTS=o;const g=e.sn;if(!r||g<r.startSN||g>r.endSN)return 0;let p;const E=g-r.startSN,S=r.fragments;for(S[E]=e,p=E;p>0;p--)Rd(S[p],S[p-1]);for(p=E;p<S.length-1;p++)Rd(S[p],S[p+1]);return r.fragmentHint&&Rd(S[S.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,h}function uF(r,e,t){if(r===e)return;let n=null;const i=r.fragments;for(let m=i.length-1;m>=0;m--){const f=i[m].initSegment;if(f){n=f;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let o;hF(r,e,(m,f,h,g)=>{if((!e.startCC||e.skippedSegments)&&f.cc!==m.cc){const p=m.cc-f.cc;for(let E=h;E<g.length;E++)g[E].cc+=p;e.endCC=g[g.length-1].cc}yn(m.startPTS)&&yn(m.endPTS)&&(f.setStart(f.startPTS=m.startPTS),f.startDTS=m.startDTS,f.maxStartPTS=m.maxStartPTS,f.endPTS=m.endPTS,f.endDTS=m.endDTS,f.minEndPTS=m.minEndPTS,f.setDuration(m.endPTS-m.startPTS),f.duration&&(o=f),e.PTSKnown=e.alignedSliding=!0),m.hasStreams&&(f.elementaryStreams=m.elementaryStreams),f.loader=m.loader,m.hasStats&&(f.stats=m.stats),m.initSegment&&(f.initSegment=m.initSegment,n=m.initSegment)});const l=e.fragments,c=e.fragmentHint?l.concat(e.fragmentHint):l;if(n&&c.forEach(m=>{var f;m&&(!m.initSegment||m.initSegment.relurl===((f=n)==null?void 0:f.relurl))&&(m.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=l.some(m=>!m),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let m=e.skippedSegments;m--;)l.shift();e.startSN=l[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=dF(r.dateRanges,e,t));const m=r.fragments.filter(f=>f.rawProgramDateTime);if(r.hasProgramDateTime&&!e.hasProgramDateTime)for(let f=1;f<c.length;f++)c[f].programDateTime===null&&gh(c[f],c[f-1],m);zT(m,e)}e.endCC=l[l.length-1].cc}if(!e.startCC){var u;const m=jT(r,e.startSN-1);e.startCC=(u=m?.cc)!=null?u:l[0].cc}fF(r.partList,e.partList,(m,f)=>{f.elementaryStreams=m.elementaryStreams,f.stats=m.stats}),o?UT(e,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS,t):BT(r,e),l.length&&(e.totalduration=e.edge-l[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const d=e.advancedDateTime;if(e.advanced&&d){const m=e.edge;e.driftStart||(e.driftStartTime=d,e.driftStart=m),e.driftEndTime=d,e.driftEnd=m}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=r.requestScheduled)}function dF(r,e,t){const{dateRanges:n,recentlyRemovedDateranges:i}=e,o=pr({},r);i&&i.forEach(u=>{delete o[u]});const c=Object.keys(o).length;return c?(Object.keys(n).forEach(u=>{const d=o[u],m=new DT(n[u].attr,d);m.isValid?(o[u]=m,d||(m.tagOrder+=c)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Er(n[u].attr)}"`)}),o):n}function fF(r,e,t){if(r&&e){let n=0;for(let i=0,o=r.length;i<=o;i++){const l=r[i],c=e[i+n];l&&c&&l.index===c.index&&l.fragment.sn===c.fragment.sn?t(l,c):n--}}}function hF(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,o=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,l=e.startSN-r.startSN,c=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let d=i;d<=o;d++){const m=u[l+d];let f=c[d];if(n&&!f&&m&&(f=e.fragments[d]=m),m&&f){t(m,f,d,c);const h=m.relurl,g=f.relurl;if(h&&mF(h,g)){e.playlistParsingError=C0(`media sequence mismatch ${f.sn}:`,r,e,m,f);return}else if(m.cc!==f.cc){e.playlistParsingError=C0(`discontinuity sequence mismatch (${m.cc}!=${f.cc})`,r,e,m,f);return}}}}function C0(r,e,t,n,i){return new Error(`${r} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function BT(r,e,t=!0){const n=e.startSN+e.skippedSegments-r.startSN,i=r.fragments,o=n>=0;let l=0;if(o&&n<i.length)l=i[n].start;else if(o&&e.startSN===r.endSN+1)l=r.fragmentEnd;else if(o&&t)l=r.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)l=r.fragmentStart;else return;ph(e,l)}function ph(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].addStart(e);r.fragmentHint&&r.fragmentHint.addStart(e)}}function $T(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const o=n[n.length-1].duration*1e3;o<t&&(t=o)}}else t/=2;return Math.round(t)}function jT(r,e,t){if(!r)return null;let n=r.fragments[e-r.startSN];return n||(n=r.fragmentHint,n&&n.sn===e)?n:e<r.startSN&&t&&t.sn===e?t:null}function k0(r,e,t){return r?qT(r.partList,e,t):null}function qT(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function GT(r){r.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function mF(r,e){return r!==e&&e?L0(r)!==L0(e):!1}function L0(r){return r.replace(/\?[^?]*$/,"")}function Po(r,e){for(let n=0,i=r.length;n<i;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function gF(r,e){return!!(r&&e.startCC<r.endCC&&e.endCC>r.startCC)}function N0(r,e){const t=r.start+e;r.startPTS=t,r.setStart(t),r.endPTS=t+r.duration}function HT(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)N0(t[n],r);e.fragmentHint&&N0(e.fragmentHint,r),e.alignedSliding=!0}function pF(r,e){r&&(VT(e,r),e.alignedSliding||Hc(e,r),!e.alignedSliding&&!e.skippedSegments&&BT(r,e,!1))}function VT(r,e){if(!gF(e,r))return;const t=Math.min(e.endCC,r.endCC),n=Po(e.fragments,t),i=Po(r.fragments,t);if(!n||!i)return;hr.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const o=n.start-i.start;HT(o,r)}function Hc(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,o;const l=Math.min(e.endCC,r.endCC);e.startCC<l&&r.startCC<l&&(i=Po(n,l),o=Po(t,l)),(!i||!o)&&(i=n[Math.floor(n.length/2)],o=Po(t,i.cc)||t[Math.floor(t.length/2)]);const c=i.programDateTime,u=o.programDateTime;if(!c||!u)return;const d=(u-c)/1e3-(o.start-i.start);HT(d,r)}function Wr(r,e,t){ii(r,e,t),r.addEventListener(e,t)}function ii(r,e,t){r.removeEventListener(e,t)}const yF={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},Qt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class mm extends LT{constructor(e,t,n,i,o){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Qt.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:l,fragCurrent:c,media:u,mediaBuffer:d,state:m}=this,f=u?u.currentTime:0,h=qn.bufferInfo(d||u,f,l.maxBufferHole),g=!h.len;if(this.log(`Media seeking to ${yn(f)?f.toFixed(3):f}, state: ${m}, ${g?"out of":"in"} buffer`),this.state===Qt.ENDED)this.resetLoadingState();else if(c){const p=l.maxFragLookUpTolerance,E=c.start-p,S=c.start+c.duration+p;if(g||S<h.start||E>h.end){const A=f>S;(f<E||A)&&(A&&c.loader&&(this.log(`Cancelling fragment load for seek (sn: ${c.sn})`),c.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(u){this.fragmentTracker.removeFragmentsInRange(f,1/0,this.playlistType,!0);const p=this.lastCurrentTime;if(f>p&&(this.lastCurrentTime=f),!this.loadingParts){const E=Math.max(h.end,f),S=this.shouldLoadParts(this.getLevelDetails(),E);S&&(this.log(`LL-Part loading ON after seeking to ${f.toFixed(2)} with buffer @${E.toFixed(2)}`),this.loadingParts=S)}}this.hls.hasEnoughToStart||(this.log(`Setting ${g?"startPosition":"nextLoadPosition"} to ${f} for seek without enough to start`),this.nextLoadPosition=f,g&&(this.startPosition=f)),g&&this.state===Qt.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=o,this.hls=e,this.fragmentLoader=new HO(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new um(e.config)}registerListeners(){const{hls:e}=this;e.on(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ye.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ye.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Qt.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Qt.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const o=e.buffered;this.config.maxBufferHole&&o&&o.length>1&&(e=qn.bufferedInfo(o,e.start,0));const l=e.nextStart;if(l&&l>i&&l<t.edge||this.media.currentTime<e.start)return!1;const u=t.partList;if(u!=null&&u.length){const m=u[u.length-1];return qn.isBuffered(this.media,m.start+m.duration/2)}const d=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(d)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;Wr(n,"seeking",this.onMediaSeeking),Wr(n,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===Qt.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),ii(i,"seeking",this.onMediaSeeking),ii(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Qt.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=o=>{const l=o.frag;if(this.fragContextChanged(l)){this.warn(`${l.type} sn: ${l.sn}${o.part?" part: "+o.part.index:""} of ${this.fragInfo(l,!1,o.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(l);return}l.stats.chunkCount++,this._handleFragmentLoadProgress(o)};this._doFragLoad(e,t,n,i).then(o=>{if(!o)return;const l=this.state,c=o.frag;if(this.fragContextChanged(c)){(l===Qt.FRAG_LOADING||!this.fragCurrent&&l===Qt.PARSING)&&(this.fragmentTracker.removeFragment(c),this.state=Qt.IDLE);return}"payload"in o&&(this.log(`Loaded ${c.type} sn: ${c.sn} of ${this.playlistLabel()} ${c.level}`),this.hls.trigger(ye.FRAG_LOADED,o)),this._handleFragmentLoadComplete(o)}).catch(o=>{this.state===Qt.STOPPED||this.state===Qt.ERROR||(this.warn(`Frag error: ${o?.message||o}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===Or.APPENDING){const o=e.type,l=this.getFwdBufferInfo(this.mediaBuffer,o),c=Math.max(e.duration,l?l.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(c,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Or.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(ye.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const i=n?.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:o,payload:l}=n,c=o.decryptdata;if(l&&l.byteLength>0&&c!=null&&c.key&&c.iv&&Ws(c.method)){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(l),c.key.buffer,c.iv.buffer,fm(c.method)).catch(d=>{throw i.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.FRAG_DECRYPT_ERROR,fatal:!1,error:d,reason:d.message,frag:o}),d}).then(d=>{const m=self.performance.now();return i.trigger(ye.FRAG_DECRYPTED,{frag:o,payload:d,stats:{tstart:u,tdecrypt:m}}),n.payload=d,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===Qt.STOPPED||this.state===Qt.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Qt.STOPPED&&(this.state=Qt.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,i;const o=e.tracks;if(o&&!t.encrypted&&((n=o.audio)!=null&&n.encrypted||(i=o.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const l=this.media,c=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${l?"attached mediaKeys: "+l.mediaKeys:"detached"})`);return this.warn(c.message),!l||l.mediaKeys?!1:(this.hls.trigger(ye.ERROR,{type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_NO_KEYS,fatal:!1,error:c,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?yF.toString(qn.getBuffered(n)):"(detached)"})`),kr(e)){var i;if(e.type!==xn.SUBTITLE){const l=e.elementaryStreams;if(!Object.keys(l).some(c=>!!l[c])){this.state=Qt.IDLE;return}}const o=(i=this.levels)==null?void 0:i[e.level];o!=null&&o.fragmentError&&(this.log(`Resetting level fragment error count of ${o.fragmentError} on frag buffered`),o.fragmentError=0)}this.state=Qt.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:o}=e,l=!o||o.length===0||o.some(u=>!u),c=new dm(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!l);t.flush(c)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var o;this.fragCurrent=e;const l=t.details;if(!this.levels||!l)throw new Error(`frag load aborted, missing level${l?"":" detail"}s`);let c=null;if(e.encrypted&&!((o=e.decryptdata)!=null&&o.key)){if(this.log(`Loading key for ${e.sn} of [${l.startSN}-${l.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Qt.KEY_LOADING,this.fragCurrent=e,c=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(ye.KEY_LOADED,h),this.state===Qt.KEY_LOADING&&(this.state=Qt.IDLE),h}),this.hls.trigger(ye.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(c=this.keyLoader.loadClear(e,l.encryptedFragments,this.startFragRequested),c&&this.log("[eme] blocking frag load until media-keys acquired"));const u=this.fragPrevious;if(kr(e)&&(!u||e.sn!==u.sn)){const h=this.shouldLoadParts(t.details,e.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} loading sn ${u?.sn}->${e.sn}`),this.loadingParts=h)}if(n=Math.max(e.start,n||0),this.loadingParts&&kr(e)){const h=l.partList;if(h&&i){n>l.fragmentEnd&&l.fragmentHint&&(e=l.fragmentHint);const g=this.getNextPart(h,e,n);if(g>-1){const p=h[g];e=this.fragCurrent=p.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${p.index} (${g}/${h.length-1}) of ${this.fragInfo(e,!1,p)}) cc: ${e.cc} [${l.startSN}-${l.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=p.start+p.duration,this.state=Qt.FRAG_LOADING;let E;return c?E=c.then(S=>!S||this.fragContextChanged(S.frag)?null:this.doFragPartsLoad(e,p,t,i)).catch(S=>this.handleFragLoadError(S)):E=this.doFragPartsLoad(e,p,t,i).catch(S=>this.handleFragLoadError(S)),this.hls.trigger(ye.FRAG_LOADING,{frag:e,part:p,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):E}else if(!e.url||this.loadedEndOfParts(h,n))return Promise.resolve(null)}}if(kr(e)&&this.loadingParts){var d;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(d=l.partList)==null?void 0:d.filter(h=>h.loaded).map(h=>`[${h.start}-${h.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+l.startSN+"-"+l.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),yn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Qt.FRAG_LOADING;const m=this.config.progressive&&e.type!==xn.SUBTITLE;let f;return m&&c?f=c.then(h=>!h||this.fragContextChanged(h.frag)?null:this.fragmentLoader.load(e,i)).catch(h=>this.handleFragLoadError(h)):f=Promise.all([this.fragmentLoader.load(e,m?i:void 0),c]).then(([h])=>(!m&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(ye.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):f}doFragPartsLoad(e,t,n,i){return new Promise((o,l)=>{var c;const u=[],d=(c=n.details)==null?void 0:c.partList,m=f=>{this.fragmentLoader.loadPart(e,f,i).then(h=>{u[f.index]=h;const g=h.part;this.hls.trigger(ye.FRAG_LOADED,h);const p=k0(n.details,e.sn,f.index+1)||qT(d,e.sn,f.index+1);if(p)m(p);else return o({frag:e,part:g,partsLoaded:u})}).catch(l)};m(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===vt.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===Nn.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(ye.ERROR,t)}else this.hls.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Qt.PARSING){!this.fragCurrent&&this.state!==Qt.STOPPED&&this.state!==Qt.ERROR&&(this.state=Qt.IDLE);return}const{frag:n,part:i,level:o}=t,l=self.performance.now();n.stats.parsing.end=l,i&&(i.stats.parsing.end=l);const c=this.getLevelDetails(),d=c&&n.sn>c.endSN||this.shouldLoadParts(c,n.end);d!==this.loadingParts&&(this.log(`LL-Part loading ${d?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=d),this.updateLevelTiming(n,i,o,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const o=e.partList[0];if(o.fragment.type===xn.SUBTITLE)return!1;const l=o.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=l){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>o.start-o.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:o,part:l}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${o} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const c=t[i],u=c.details,d=l>-1?k0(u,o,l):null,m=d?d.fragment:jT(u,o,n);return m?(n&&n!==m&&(m.stats=n.stats),{frag:m,part:d,level:c}):null}bufferFragmentData(e,t,n,i,o){if(this.state!==Qt.PARSING)return;const{data1:l,data2:c}=e;let u=l;if(c&&(u=Ni(l,c)),!u.length)return;const d=this.initPTS[t.cc],m=d?-d.baseTime/d.timescale:void 0,f={type:e.type,frag:t,part:n,chunkMeta:i,offset:m,parent:t.type,data:u};if(this.hls.trigger(ye.BUFFER_APPENDING,f),e.dropped&&e.independent&&!n){if(o)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!qn.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=qn.bufferInfo(t,n,0),o=e.duration,l=Math.min(this.config.maxFragLookUpTolerance*2,o*.25),c=Math.max(Math.min(e.start-l,i.end-l),n+l);e.start-c>l&&this.flushMainBuffer(c,e.start)}getFwdBufferInfo(e,t){var n;const i=this.getLoadPosition();if(!yn(i))return null;const l=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,l)}getFwdBufferInfoAtPos(e,t,n,i){const o=qn.bufferInfo(e,t,i);if(o.len===0&&o.nextStart!==void 0){const l=this.fragmentTracker.getBufferedFrag(t,n);if(l&&(o.nextStart<=l.end||l.gap)){const c=Math.max(Math.min(o.nextStart,l.end)-t,i);return qn.bufferInfo(e,t,c)}}return o}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),o=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return o>=i?(n.maxMaxBufferLength=o,this.warn(`Reduce max buffer length to ${o}s`),!0):!1}getAppendedFrag(e,t=xn.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:o}=this,l=n[0].start,c=o.lowLatencyMode&&!!t.partList;let u=null;if(t.live){const f=o.initialLiveManifestSize;if(i<f)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${f})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<l){var d;c&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),u=this.getInitialLiveFragment(t);const h=this.hls.startPosition,g=this.hls.liveSyncPosition,p=u?(h!==-1&&h>=l?h:g)||u.start:e;this.log(`Setting startPosition to ${p} to match start frag at live edge. mainStart: ${h} liveSyncPosition: ${g} frag.start: ${(d=u)==null?void 0:d.start}`),this.startPosition=this.nextLoadPosition=p}}else e<=l&&(u=n[0]);if(!u){const f=this.loadingParts?t.partEnd:t.fragmentEnd;u=this.getFragmentAtPosition(e,f,t)}let m=this.filterReplacedPrimary(u,t);if(!m&&u){const f=u.sn-t.startSN;m=this.filterReplacedPrimary(n[f+1]||null,t)}return this.mapToInitFragWhenRequired(m)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===Or.OK||n===Or.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,o){let l=null;if(e.gap&&(l=this.getNextFragment(this.nextLoadPosition,t),l&&!l.gap&&n.nextStart)){const c=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(c!==null&&n.len+c.len>=o){const u=l.sn;return this.loopSn!==u&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${u}`),this.loopSn=u),null}}return this.loopSn=void 0,l}get primaryPrefetch(){if(D0(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(D0(this.config)&&e.type!==xn.SUBTITLE){const n=this.hls.interstitialsManager,i=n?.bufferingItem;if(i){const l=i.event;if(l){if(l.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&t?.live===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const o=n?.playerQueue;if(o)for(let l=o.length;l--;){const c=o[l].interstitial;if(c.appendInPlace&&e.start>=c.startTime&&e.end<=c.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,o=!1,l=!0;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(l=l&&!d.independent,i>-1&&n<d.start)break;const m=d.loaded;m?i=-1:(o||(d.independent||l)&&d.fragment===t)&&(d.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${d.start}`),i=c),o=m}return i}loadedEndOfParts(e,t){let n;for(let i=e.length;i--;){if(n=e[i],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=DO(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const o=n.sn+1;if(o>=e.startSN&&o<=e.endSN){const l=t[o-e.startSN];n.cc===l.cc&&(i=l,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=RT(e,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const o=this.hls.liveSyncPosition;o!==null&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:o}=this,{fragments:l,endSN:c}=n;const{fragmentHint:u}=n,{maxFragLookUpTolerance:d}=i,m=n.partList,f=!!(this.loadingParts&&m!=null&&m.length&&u);f&&!this.bitrateTest&&m[m.length-1].fragment.sn===u.sn&&(l=l.concat(u),c=u.sn);let h;if(e<t){var g;const E=e<this.lastCurrentTime||e>t-d||(g=this.media)!=null&&g.paused||!this.startFragRequested?0:d;h=ls(o,l,e,E)}else h=l[l.length-1];if(h){const p=h.sn-n.startSN,E=this.fragmentTracker.getState(h);if((E===Or.OK||E===Or.PARTIAL&&h.gap)&&(o=h),o&&h.sn===o.sn&&(!f||m[0].fragment.sn>h.sn||!n.live)&&h.level===o.level){const A=l[p+1];h.sn<c&&this.fragmentTracker.getState(A)!==Or.OK?h=A:h=null}}return h}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const o=e.fragmentStart,l=!t,c=e.alignedSliding&&yn(o);if(l||!c&&!o){pF(n,e);const u=e.fragmentStart;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),u}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const i=this.timelineOffset;if(n===-1){const o=this.startTimeOffset!==null,l=o?this.startTimeOffset:e.startTimeOffset;l!==null&&yn(l)?(n=t+l,l<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${l} found in ${o?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&kr(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Qt.FRAG_LOADING_WAITING_RETRY)&&(this.state=Qt.IDLE)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const A=this.getCurrentContext(t.chunkMeta);A&&(t.frag=A.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var o;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(o=this.fragCurrent)==null?void 0:o.url}`);return}const l=t.details===vt.FRAG_GAP;l&&this.fragmentTracker.fragBuffered(i,!0);const c=t.errorAction;if(!c){this.state=Qt.ERROR;return}const{action:u,flags:d,retryCount:m=0,retryConfig:f}=c,h=!!f,g=h&&u===jr.RetryRequest,p=h&&!c.resolved&&d===di.MoveAllAlternatesMatchingHost,E=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!g&&p&&kr(i)&&!i.endList&&E&&!kT(t))this.resetFragmentErrors(e),this.treatAsGap(i),c.resolved=!0;else if((g||p)&&m<f.maxNumRetry){var S;const A=fh((S=t.response)==null?void 0:S.code),x=cm(f,m);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+x,this.state=Qt.FRAG_LOADING_WAITING_RETRY,c.resolved=!0,A){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${m+1}/${f.maxNumRetry} in ${x}ms`)}else if(f)if(this.resetFragmentErrors(e),m<f.maxNumRetry)!l&&u!==jr.RemoveAlternatePermanently&&(c.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${m})`);return}else u===jr.SendAlternateToPenaltyBox?this.state=Qt.WAITING_LEVEL:this.state=Qt.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!fh(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Qt.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===Qt.PARSING||this.state===Qt.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),o=i&&i.len>.5;o&&this.reduceMaxBufferLength(i.len,t?.duration||10);const l=!o;return l&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),l}return!1}resetFragmentErrors(e){e===xn.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Qt.STOPPED&&(this.state=Qt.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=qn.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===Qt.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Qt.STOPPED&&(this.state=Qt.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){const o=n.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,d)=>{const m=e.elementaryStreams[d];if(m){const f=m.endPTS-m.startPTS;if(f<=0)return this.warn(`Could not parse fragment ${e.sn} ${d} duration reliably (${f})`),u||!1;const h=i?0:UT(o,e,m.startPTS,m.endPTS,m.startDTS,m.endDTS,this);return this.hls.trigger(ye.LEVEL_PTS_UPDATED,{details:o,level:n,drift:h,type:d,frag:e,start:m.startPTS,end:m.endPTS}),!0}return u},!1)){var c;const u=((c=this.transmuxer)==null?void 0:c.error)===null;if((n.fragmentError===0||u&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),u){const d=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(d.message),this.hls.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.FRAG_PARSING_ERROR,fatal:!1,error:d,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Qt.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(ye.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===xn.MAIN?"level":"track"}fragInfo(e,t=!0,n){var i,o;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=t&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((o=t&&!n?e.endPTS:(n||e).end)!=null?o:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function D0(r){return!!r.interstitialsController&&r.enableInterstitialPlayback!==!1}class KT{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=bF(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function bF(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const o=r[i];t.set(o,n),n+=o.length}return t}var Cd={exports:{}},P0;function EF(){return P0||(P0=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,d,m){this.fn=u,this.context=d,this.once=m||!1}function o(u,d,m,f,h){if(typeof m!="function")throw new TypeError("The listener must be a function");var g=new i(m,f||u,h),p=t?t+d:d;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],g]:u._events[p].push(g):(u._events[p]=g,u._eventsCount++),u}function l(u,d){--u._eventsCount===0?u._events=new n:delete u._events[d]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],m,f;if(this._eventsCount===0)return d;for(f in m=this._events)e.call(m,f)&&d.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},c.prototype.listeners=function(d){var m=t?t+d:d,f=this._events[m];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,p=new Array(g);h<g;h++)p[h]=f[h].fn;return p},c.prototype.listenerCount=function(d){var m=t?t+d:d,f=this._events[m];return f?f.fn?1:f.length:0},c.prototype.emit=function(d,m,f,h,g,p){var E=t?t+d:d;if(!this._events[E])return!1;var S=this._events[E],A=arguments.length,x,k;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,f),!0;case 4:return S.fn.call(S.context,m,f,h),!0;case 5:return S.fn.call(S.context,m,f,h,g),!0;case 6:return S.fn.call(S.context,m,f,h,g,p),!0}for(k=1,x=new Array(A-1);k<A;k++)x[k-1]=arguments[k];S.fn.apply(S.context,x)}else{var U=S.length,Y;for(k=0;k<U;k++)switch(S[k].once&&this.removeListener(d,S[k].fn,void 0,!0),A){case 1:S[k].fn.call(S[k].context);break;case 2:S[k].fn.call(S[k].context,m);break;case 3:S[k].fn.call(S[k].context,m,f);break;case 4:S[k].fn.call(S[k].context,m,f,h);break;default:if(!x)for(Y=1,x=new Array(A-1);Y<A;Y++)x[Y-1]=arguments[Y];S[k].fn.apply(S[k].context,x)}}return!0},c.prototype.on=function(d,m,f){return o(this,d,m,f,!1)},c.prototype.once=function(d,m,f){return o(this,d,m,f,!0)},c.prototype.removeListener=function(d,m,f,h){var g=t?t+d:d;if(!this._events[g])return this;if(!m)return l(this,g),this;var p=this._events[g];if(p.fn)p.fn===m&&(!h||p.once)&&(!f||p.context===f)&&l(this,g);else{for(var E=0,S=[],A=p.length;E<A;E++)(p[E].fn!==m||h&&!p[E].once||f&&p[E].context!==f)&&S.push(p[E]);S.length?this._events[g]=S.length===1?S[0]:S:l(this,g)}return this},c.prototype.removeAllListeners=function(d){var m;return d?(m=t?t+d:d,this._events[m]&&l(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(Cd)),Cd.exports}var vF=EF(),gm=HM(vF);const Wo="1.6.15",to={};function TF(){return typeof __HLS_WORKER_BUNDLE__=="function"}function SF(){const r=to[Wo];if(r)return r.clientCount++,r;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return to[Wo]=i,i}function wF(r){const e=to[r];if(e)return e.clientCount++,e;const t=new self.URL(r,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return to[r]=i,i}function _F(r){const e=to[r||Wo];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete to[r||Wo],i&&self.URL.revokeObjectURL(i),n.terminate()}}function YT(r,e){return e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function pm(r,e){return e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function au(r,e){let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t}function Xo(r,e){const t=e;let n=0;for(;pm(r,e);){n+=10;const i=au(r,e+6);n+=i,YT(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)}function xF(r,e,t,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=e[t+2],l=o>>2&15;if(l>12){const g=new Error(`invalid ADTS sampling index:${l}`);r.emit(ye.ERROR,ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.FRAG_PARSING_ERROR,fatal:!0,error:g,reason:g.message});return}const c=(o>>6&3)+1,u=e[t+3]>>6&3|(o&1)<<2,d="mp4a.40."+c,m=i[l];let f=l;(c===5||c===29)&&(f-=3);const h=[c<<3|(f&14)>>1,(f&1)<<7|u<<3];return hr.log(`manifest codec:${n}, parsed codec:${d}, channels:${u}, rate:${m} (ADTS object type:${c} sampling index:${l})`),{config:h,samplerate:m,channelCount:u,codec:d,parsedCodec:d,manifestCodec:n}}function WT(r,e){return r[e]===255&&(r[e+1]&246)===240}function XT(r,e){return r[e+1]&1?7:9}function ym(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function IF(r,e){return e+5<r.length}function Vc(r,e){return e+1<r.length&&WT(r,e)}function AF(r,e){return IF(r,e)&&WT(r,e)&&ym(r,e)<=r.length-e}function RF(r,e){if(Vc(r,e)){const t=XT(r,e);if(e+t>=r.length)return!1;const n=ym(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||Vc(r,i)}return!1}function QT(r,e,t,n,i){if(!r.samplerate){const o=xF(e,t,n,i);if(!o)return;pr(r,o)}}function ZT(r){return 1024*9e4/r}function CF(r,e){const t=XT(r,e);if(e+t<=r.length){const n=ym(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function JT(r,e,t,n,i){const o=ZT(r.samplerate),l=n+i*o,c=CF(e,t);let u;if(c){const{frameLength:f,headerLength:h}=c,g=h+f,p=Math.max(0,t+g-e.length);p?(u=new Uint8Array(g-h),u.set(e.subarray(t+h,e.length),0)):u=e.subarray(t+h,t+g);const E={unit:u,pts:l};return p||r.samples.push(E),{sample:E,length:g,missing:p}}const d=e.length-t;return u=new Uint8Array(d),u.set(e.subarray(t,e.length),0),{sample:{unit:u,pts:l},length:d,missing:-1}}function kF(r,e){return pm(r,e)&&au(r,e+6)+10<=r.length-e}function LF(r){return r instanceof ArrayBuffer?r:r.byteOffset==0&&r.byteLength==r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}function kd(r,e=0,t=1/0){return NF(r,e,t,Uint8Array)}function NF(r,e,t,n){const i=DF(r);let o=1;"BYTES_PER_ELEMENT"in n&&(o=n.BYTES_PER_ELEMENT);const l=PF(r)?r.byteOffset:0,c=(l+r.byteLength)/o,u=(l+e)/o,d=Math.floor(Math.max(0,Math.min(u,c))),m=Math.floor(Math.min(d+Math.max(t,0),c));return new n(i,d,m-d)}function DF(r){return r instanceof ArrayBuffer?r:r.buffer}function PF(r){return r&&r.buffer instanceof ArrayBuffer&&r.byteLength!==void 0&&r.byteOffset!==void 0}function MF(r){const e={key:r.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(r.size<2)return;if(r.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=r.data.subarray(1).indexOf(0);if(n===-1)return;const i=bi(kd(r.data,1,n)),o=r.data[2+n],l=r.data.subarray(3+n).indexOf(0);if(l===-1)return;const c=bi(kd(r.data,3+n,l));let u;return i==="-->"?u=bi(kd(r.data,4+n+l)):u=LF(r.data.subarray(4+n+l)),e.mimeType=i,e.pictureType=o,e.description=c,e.data=u,e}function OF(r){if(r.size<2)return;const e=bi(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}}function FF(r){if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=bi(r.data.subarray(t),!0);t+=n.length+1;const i=bi(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=bi(r.data.subarray(1));return{key:r.type,info:"",data:e}}function zF(r){if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=bi(r.data.subarray(t),!0);t+=n.length+1;const i=bi(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=bi(r.data);return{key:r.type,info:"",data:e}}function UF(r){return r.type==="PRIV"?OF(r):r.type[0]==="W"?zF(r):r.type==="APIC"?MF(r):FF(r)}function BF(r){const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=au(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}}const Hl=10,$F=10;function eS(r){let e=0;const t=[];for(;pm(r,e);){const n=au(r,e+6);r[e+5]>>6&1&&(e+=Hl),e+=Hl;const i=e+n;for(;e+$F<i;){const o=BF(r.subarray(e)),l=UF(o);l&&t.push(l),e+=o.size+Hl}YT(r,e)&&(e+=Hl)}return t}function tS(r){return r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp"}function jF(r){if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function bm(r){const e=eS(r);for(let t=0;t<e.length;t++){const n=e[t];if(tS(n))return jF(n)}}let mi=(function(r){return r.audioId3="org.id3",r.dateRange="com.apple.quicktime.HLS",r.emsg="https://aomedia.org/emsg/ID3",r.misbklv="urn:misb:KLV:bin:1910.1",r})({});function na(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Em{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Ni(this.cachedData,e),this.cachedData=null);let n=Xo(e,0),i=n?n.length:0,o;const l=this._audioTrack,c=this._id3Track,u=n?bm(n):void 0,d=e.length;for((this.basePTS===null||this.frameIndex===0&&yn(u))&&(this.basePTS=qF(u,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:mi.audioId3,duration:Number.POSITIVE_INFINITY});i<d;){if(this.canParse(e,i)){const m=this.appendFrame(l,e,i);m?(this.frameIndex++,this.lastPTS=m.sample.pts,i+=m.length,o=i):i=d}else kF(e,i)?(n=Xo(e,i),c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:mi.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,o=i):i++;if(i===d&&o!==d){const m=e.slice(o);this.cachedData?this.cachedData=Ni(this.cachedData,m):this.cachedData=m}}return{audioTrack:l,videoTrack:na(),id3Track:c,textTrack:na()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:na(),id3Track:this._id3Track,textTrack:na()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const qF=(r,e,t)=>{if(yn(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let Vl=null;const GF=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],HF=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],VF=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],KF=[0,1,1,4];function nS(r,e,t,n,i){if(t+24>e.length)return;const o=rS(e,t);if(o&&t+o.frameLength<=e.length){const l=o.samplesPerFrame*9e4/o.sampleRate,c=n+i*l,u={unit:e.subarray(t,t+o.frameLength),pts:c,dts:c};return r.config=[],r.channelCount=o.channelCount,r.samplerate=o.sampleRate,r.samples.push(u),{sample:u,length:o.frameLength,missing:0}}}function rS(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,o=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&o!==3){const l=r[e+2]>>1&1,c=r[e+3]>>6,u=t===3?3-n:n===3?3:4,d=GF[u*14+i-1]*1e3,f=HF[(t===3?0:t===2?1:2)*3+o],h=c===3?1:2,g=VF[t][n],p=KF[n],E=g*8*p,S=Math.floor(g*d/f+l)*p;if(Vl===null){const k=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Vl=k?parseInt(k[1]):0}return Vl&&Vl<=87&&n===2&&d>=224e3&&c===0&&(r[e+3]=r[e+3]|128),{sampleRate:f,channelCount:h,frameLength:S,samplesPerFrame:E}}}function vm(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function iS(r,e){return e+1<r.length&&vm(r,e)}function YF(r,e){return vm(r,e)&&4<=r.length-e}function aS(r,e){if(e+1<r.length&&vm(r,e)){const n=rS(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const o=e+i;return o===r.length||iS(r,o)}return!1}class WF extends Em{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=Xo(e,0);let i=n?.length||0;if(aS(e,i))return!1;for(let o=e.length;i<o;i++)if(RF(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return AF(e,t)}appendFrame(e,t,n){QT(e,this.observer,t,n,e.manifestCodec);const i=JT(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const sS=(r,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),o=new Uint32Array(1),l=new Uint8Array(1);for(;n>0;){l[0]=r[e];const c=Math.min(n,8),u=8-c;o[0]=4278190080>>>24+u<<u,i[0]=(l[0]&o[0])>>u,t=t?t<<c|i[0]:i[0],e+=1,n-=c}return t};class XF extends Em{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=oS(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=Xo(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&bm(t)!==void 0&&sS(e,n)<16}}function oS(r,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const o=e[t+4]>>6;if(o>=3)return-1;const c=[48e3,44100,32e3][o],u=e[t+4]&63,m=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+o]*2;if(t+m>e.length)return-1;const f=e[t+6]>>5;let h=0;f===2?h+=2:(f&1&&f!==1&&(h+=2),f&4&&(h+=2));const g=(e[t+6]<<8|e[t+7])>>12-h&1,E=[2,1,2,3,3,4,4,5][f]+g,S=e[t+5]>>3,A=e[t+5]&7,x=new Uint8Array([o<<6|S<<1|A>>2,(A&3)<<6|f<<3|g<<2|u>>4,u<<4&224]),k=1536/c*9e4,U=n+i*k,Y=e.subarray(t,t+m);return r.config=x,r.channelCount=E,r.samplerate=c,r.samples.push({unit:Y,pts:U}),m}class QF extends Em{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Xo(e,0);let n=t?.length||0;if(t&&e[n]===11&&e[n+1]===119&&bm(t)!==void 0&&sS(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(aS(e,n))return hr.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return YF(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return nS(e,t,n,this.basePTS,this.frameIndex)}}const ZF=/\/emsg[-/]ID3/i;class JF{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const o=this.videoTrack=na("video",1),l=this.audioTrack=na("audio",1),c=this.txtTrack=na("text",1);if(this.id3Track=na("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=yT(e);if(u.video){const{id:d,timescale:m,codec:f,supplemental:h}=u.video;o.id=d,o.timescale=c.timescale=m,o.codec=f,o.supplemental=h}if(u.audio){const{id:d,timescale:m,codec:f}=u.audio;l.id=d,l.timescale=m,l.codec=f}c.id=mT.text,o.sampleDuration=0,o.duration=l.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return XM(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,o=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Ni(this.remainderData,e));const c=rO(n);this.remainderData=c.remainder,i.samples=c.valid||new Uint8Array}else i.samples=n;const l=this.extractID3Track(i,t);return o.samples=Zb(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:l,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=Zb(e,t),{videoTrack:t,audioTrack:na(),id3Track:i,textTrack:na()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=Wn(e.samples,["emsg"]);i&&i.forEach(o=>{const l=aO(o);if(ZF.test(l.schemeIdUri)){const c=M0(l,t);let u=l.eventDuration===4294967295?Number.POSITIVE_INFINITY:l.eventDuration/l.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const d=l.payload;n.samples.push({data:d,len:d.byteLength,dts:c,pts:c,type:mi.emsg,duration:u})}else if(this.config.enableEmsgKLVMetadata&&l.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const c=M0(l,t);n.samples.push({data:l.payload,len:l.payload.byteLength,dts:c,pts:c,type:mi.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function M0(r,e){return yn(r.presentationTime)?r.presentationTime/r.timeScale:e+r.presentationTimeDelta/r.timeScale}class e2{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new um(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,ja.cbc)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const o=i.subarray(16,i.length-i.length%16),l=o.buffer.slice(o.byteOffset,o.byteOffset+o.length);this.decryptBuffer(l).then(c=>{const u=new Uint8Array(c);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)n.set(e.subarray(o,o+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)e.set(n.subarray(i,i+16),o);return e}decryptAvcSample(e,t,n,i,o){const l=vT(o.data),c=this.getAvcEncryptedData(l);this.decryptBuffer(c.buffer).then(u=>{o.data=this.getAvcDecryptedUnit(l,u),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)}).catch(i)}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const o=e[t].units;for(;!(n>=o.length);n++){const l=o[n];if(!(l.data.length<=48||l.type!==1&&l.type!==5)&&(this.decryptAvcSample(e,t,n,i,l),!this.decrypter.isSync()))return}}}}class lS{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const o=n.units;i=o[o.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const o=n[i-1];e.pts=o.pts,e.dts=o.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const i=t.byteLength;let o=e.naluState||0;const l=o,c=[];let u=0,d,m,f,h=-1,g=0;for(o===-1&&(h=0,g=this.getNALuType(t,0),o=0,u=1);u<i;){if(d=t[u++],!o){o=d?0:1;continue}if(o===1){o=d?0:2;continue}if(!d)o=3;else if(d===1){if(m=u-o-1,h>=0){const p={data:t.subarray(h,m),type:g};c.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(l&&u<=4-l&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-l)),m>0&&(p.data=Ni(p.data,t.subarray(0,m)),p.state=0))}u<i?(f=this.getNALuType(t,u),h=u,g=f,o=0):o=-1}else o=0}if(h>=0&&o>=0){const p={data:t.subarray(h,i),type:g,state:o};c.push(p)}if(c.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=Ni(p.data,t))}return e.naluState=o,c}}class Mo{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),o=Math.min(4,t);if(o===0)throw new Error("no bytes available");i.set(e.subarray(n,n+o)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=o*8,this.bytesAvailable-=o}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&hr.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class t2 extends lS{parsePES(e,t,n,i){const o=this.parseNALu(e,n.data,i);let l=this.VideoSample,c,u=!1;n.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),o.forEach(d=>{var m,f;switch(d.type){case 1:{let E=!1;c=!0;const S=d.data;if(u&&S.length>4){const A=this.readSliceType(S);(A===2||A===4||A===7||A===9)&&(E=!0)}if(E){var h;(h=l)!=null&&h.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.frame=!0,l.key=E;break}case 5:c=!0,(m=l)!=null&&m.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 6:{c=!0,sm(d.data,1,n.pts,t.samples);break}case 7:{var g,p;c=!0,u=!0;const E=d.data,S=this.readSPS(E);if(!e.sps||e.width!==S.width||e.height!==S.height||((g=e.pixelRatio)==null?void 0:g[0])!==S.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==S.pixelRatio[1]){e.width=S.width,e.height=S.height,e.pixelRatio=S.pixelRatio,e.sps=[E];const A=E.subarray(1,4);let x="avc1.";for(let k=0;k<3;k++){let U=A[k].toString(16);U.length<2&&(U="0"+U),x+=U}e.codec=x}break}case 8:c=!0,e.pps=[d.data];break;case 9:c=!0,e.audFound=!0,(f=l)!=null&&f.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:c=!0;break;default:c=!1;break}l&&c&&l.units.push(d)}),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new Mo(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,i=8,o;for(let l=0;l<e;l++)i!==0&&(o=t.readEG(),i=(n+o+256)%256),n=i===0?n:i}readSPS(e){const t=new Mo(e);let n=0,i=0,o=0,l=0,c,u,d;const m=t.readUByte.bind(t),f=t.readBits.bind(t),h=t.readUEG.bind(t),g=t.readBoolean.bind(t),p=t.skipBits.bind(t),E=t.skipEG.bind(t),S=t.skipUEG.bind(t),A=this.skipScalingList.bind(this);m();const x=m();if(f(5),p(3),m(),S(),x===100||x===110||x===122||x===244||x===44||x===83||x===86||x===118||x===128){const O=h();if(O===3&&p(1),S(),S(),p(1),g())for(u=O!==3?8:12,d=0;d<u;d++)g()&&(d<6?A(16,t):A(64,t))}S();const k=h();if(k===0)h();else if(k===1)for(p(1),E(),E(),c=h(),d=0;d<c;d++)E();S(),p(1);const U=h(),Y=h(),Q=f(1);Q===0&&p(1),p(1),g()&&(n=h(),i=h(),o=h(),l=h());let L=[1,1];if(g()&&g())switch(m()){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[m()<<8|m(),m()<<8|m()];break}}return{width:Math.ceil((U+1)*16-n*2-i*2),height:(2-Q)*(Y+1)*16-(Q?2:4)*(o+l),pixelRatio:L}}}class n2 extends lS{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,i){const o=this.parseNALu(e,n.data,i);let l=this.VideoSample,c,u=!1;n.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),o.forEach(d=>{var m,f;switch(d.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),l.frame=!0,c=!0;break;case 16:case 17:case 18:case 21:if(c=!0,u){var h;(h=l)!=null&&h.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 19:case 20:c=!0,(m=l)!=null&&m.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 39:c=!0,sm(d.data,2,n.pts,t.samples);break;case 32:c=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=pr(e.params,this.readVPS(d.data)),this.initVPS=d.data),e.vps=[d.data];break;case 33:if(c=!0,u=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],d.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const g=this.readSPS(d.data);e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.codec=g.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const p in g.params)e.params[p]=g.params[p]}this.pushParameterSet(e.sps,d.data,e.vps),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0;break;case 34:if(c=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const g=this.readPPS(d.data);for(const p in g)e.params[p]=g[p]}this.pushParameterSet(e.pps,d.data,e.vps)}break;case 35:c=!0,e.audFound=!0,(f=l)!=null&&f.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:c=!1;break}l&&c&&l.units.push(d)}),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[n]=e[i],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Mo(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const t=new Mo(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const i=t.readBits(2),o=t.readBoolean(),l=t.readBits(5),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),m=t.readUByte(),f=t.readUByte(),h=t.readUByte(),g=t.readUByte(),p=t.readUByte(),E=t.readUByte(),S=t.readUByte(),A=t.readUByte(),x=[],k=[];for(let $e=0;$e<n;$e++)x.push(t.readBoolean()),k.push(t.readBoolean());if(n>0)for(let $e=n;$e<8;$e++)t.readBits(2);for(let $e=0;$e<n;$e++)x[$e]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),k[$e]&&t.readUByte();t.readUEG();const U=t.readUEG();U==3&&t.skipBits(1);const Y=t.readUEG(),Q=t.readUEG(),L=t.readBoolean();let O=0,G=0,te=0,ge=0;L&&(O+=t.readUEG(),G+=t.readUEG(),te+=t.readUEG(),ge+=t.readUEG());const Me=t.readUEG(),he=t.readUEG(),De=t.readUEG(),_e=t.readBoolean();for(let $e=_e?0:n;$e<=n;$e++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let Ve=0;Ve<4;Ve++)for(let je=0;je<(Ve===3?2:6);je++)if(!t.readBoolean())t.readUEG();else{const dt=Math.min(64,1<<4+(Ve<<1));Ve>1&&t.readEG();for(let it=0;it<dt;it++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const He=t.readUEG();let Pe=0;for(let $e=0;$e<He;$e++){let Ve=!1;if($e!==0&&(Ve=t.readBoolean()),Ve){$e===He&&t.readUEG(),t.readBoolean(),t.readUEG();let je=0;for(let Qe=0;Qe<=Pe;Qe++){const dt=t.readBoolean();let it=!1;dt||(it=t.readBoolean()),(dt||it)&&je++}Pe=je}else{const je=t.readUEG(),Qe=t.readUEG();Pe=je+Qe;for(let dt=0;dt<je;dt++)t.readUEG(),t.readBoolean();for(let dt=0;dt<Qe;dt++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const $e=t.readUEG();for(let Ve=0;Ve<$e;Ve++){for(let je=0;je<De+4;je++)t.readBits(1);t.readBits(1)}}let qe=0,Ze=1,ct=1,mt=!0,xe=1,Ie=0;t.readBoolean(),t.readBoolean();let Ke=!1;if(t.readBoolean()){if(t.readBoolean()){const rt=t.readUByte(),Ot=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],pt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];rt>0&&rt<16?(Ze=Ot[rt-1],ct=pt[rt-1]):rt===255&&(Ze=t.readBits(16),ct=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),Ke=t.readBoolean(),Ke&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(xe=t.readBits(32),Ie=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const pt=t.readBoolean(),kt=t.readBoolean();let wt=!1;(pt||kt)&&(wt=t.readBoolean(),wt&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),wt&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let fn=0;fn<=n;fn++){mt=t.readBoolean();const Tn=mt||t.readBoolean();let Fn=!1;Tn?t.readEG():Fn=t.readBoolean();const In=Fn?1:t.readUEG()+1;if(pt)for(let dn=0;dn<In;dn++)t.readUEG(),t.readUEG(),wt&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(kt)for(let dn=0;dn<In;dn++)t.readUEG(),t.readUEG(),wt&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),qe=t.readUEG())}let V=Y,C=Q;if(L){let $e=1,Ve=1;U===1?$e=Ve=2:U==2&&($e=2),V=Y-$e*G-$e*O,C=Q-Ve*ge-Ve*te}const F=i?["A","B","C"][i]:"",oe=c<<24|u<<16|d<<8|m;let Z=0;for(let $e=0;$e<32;$e++)Z=(Z|(oe>>$e&1)<<31-$e)>>>0;let Be=Z.toString(16);return l===1&&Be==="2"&&(Be="6"),{codecString:`hvc1.${F}${l}.${Be}.${o?"H":"L"}${A}.B0`,params:{general_tier_flag:o,general_profile_idc:l,general_profile_space:i,general_profile_compatibility_flags:[c,u,d,m],general_constraint_indicator_flags:[f,h,g,p,E,S],general_level_idc:A,bit_depth:Me+8,bit_depth_luma_minus8:Me,bit_depth_chroma_minus8:he,min_spatial_segmentation_idc:qe,chroma_format_idc:U,frame_rate:{fixed:mt,fps:Ie/xe}},width:V,height:C,pixelRatio:[Ze,ct]}}readPPS(e){const t=new Mo(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),o=t.readBoolean();let l=1;return o&&i?l=0:o?l=3:i&&(l=2),{parallelismType:l}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const Ur=188;class Ma{constructor(e,t,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,t){const n=Ma.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(Ur*5,t-Ur)+1,i=0;for(;i<n;){let o=!1,l=-1,c=0;for(let u=i;u<t;u+=Ur)if(e[u]===71&&(t-u===Ur||e[u+Ur]===71)){if(c++,l===-1&&(l=u,l!==0&&(n=Math.min(l+Ur*99,e.length-Ur)+1)),o||(o=yh(e,u)===0),o&&c>1&&(l===0&&c>2||u+Ur>n))return l}else{if(c)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:mT[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Ma.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=Ma.createTrack("audio",i),this._id3Track=Ma.createTrack("id3"),this._txtTrack=Ma.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let o;const l=this._videoTrack,c=this._audioTrack,u=this._id3Track,d=this._txtTrack;let m=l.pid,f=l.pesData,h=c.pid,g=u.pid,p=c.pesData,E=u.pesData,S=null,A=this.pmtParsed,x=this._pmtId,k=e.length;if(this.remainderData&&(e=Ni(this.remainderData,e),k=e.length,this.remainderData=null),k<Ur&&!i)return this.remainderData=e,{audioTrack:c,videoTrack:l,id3Track:u,textTrack:d};const U=Math.max(0,Ma.syncOffset(e));k-=(k-U)%Ur,k<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,k,e.buffer.byteLength-k));let Y=0;for(let L=U;L<k;L+=Ur)if(e[L]===71){const O=!!(e[L+1]&64),G=yh(e,L),te=(e[L+3]&48)>>4;let ge;if(te>1){if(ge=L+5+e[L+4],ge===L+Ur)continue}else ge=L+4;switch(G){case m:O&&(f&&(o=zs(f,this.logger))&&(this.readyVideoParser(l.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(l,d,o,!1)),f={data:[],size:0}),f&&(f.data.push(e.subarray(ge,L+Ur)),f.size+=L+Ur-ge);break;case h:if(O){if(p&&(o=zs(p,this.logger)))switch(c.segmentCodec){case"aac":this.parseAACPES(c,o);break;case"mp3":this.parseMPEGPES(c,o);break;case"ac3":this.parseAC3PES(c,o);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(ge,L+Ur)),p.size+=L+Ur-ge);break;case g:O&&(E&&(o=zs(E,this.logger))&&this.parseID3PES(u,o),E={data:[],size:0}),E&&(E.data.push(e.subarray(ge,L+Ur)),E.size+=L+Ur-ge);break;case 0:O&&(ge+=e[ge]+1),x=this._pmtId=r2(e,ge);break;case x:{O&&(ge+=e[ge]+1);const Me=i2(e,ge,this.typeSupported,n,this.observer,this.logger);m=Me.videoPid,m>0&&(l.pid=m,l.segmentCodec=Me.segmentVideoCodec),h=Me.audioPid,h>0&&(c.pid=h,c.segmentCodec=Me.segmentAudioCodec),g=Me.id3Pid,g>0&&(u.pid=g),S!==null&&!A&&(this.logger.warn(`MPEG-TS PMT found at ${L} after unknown PID '${S}'. Backtracking to sync byte @${U} to parse all TS packets.`),S=null,L=U-188),A=this.pmtParsed=!0;break}case 17:case 8191:break;default:S=G;break}}else Y++;Y>0&&bh(this.observer,new Error(`Found ${Y} TS packet/s that do not start with 0x47`),void 0,this.logger),l.pesData=f,c.pesData=p,u.pesData=E;const Q={audioTrack:c,videoTrack:l,id3Track:u,textTrack:d};return i&&this.extractRemainingSamples(Q),Q}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:o}=e,l=n.pesData,c=t.pesData,u=i.pesData;let d;if(l&&(d=zs(l,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,o,d,!0),n.pesData=null)):n.pesData=l,c&&(d=zs(c,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,d);break;case"mp3":this.parseMPEGPES(t,d);break;case"ac3":this.parseAC3PES(t,d);break}t.pesData=null}else c!=null&&c.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=c;u&&(d=zs(u,this.logger))?(this.parseID3PES(i,d),i.pesData=null):i.pesData=u}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),o=this.sampleAes=new e2(this.observer,this.config,t);return this.decrypt(i,o)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new t2:e==="hevc"&&(this.videoParser=new n2))}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:o}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{o.samples?t.decryptAvcSamples(o.samples,0,0,()=>{n(e)}):n(e)}):o.samples&&t.decryptAvcSamples(o.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let o=t.data;if(i){this.aacOverFlow=null;const f=i.missing,h=i.sample.unit.byteLength;if(f===-1)o=Ni(i.sample.unit,o);else{const g=h-f;i.sample.unit.set(o.subarray(0,f),g),e.samples.push(i.sample),n=i.missing}}let l,c;for(l=n,c=o.length;l<c-1&&!Vc(o,l);l++);if(l!==n){let f;const h=l<c-1;if(h?f=`AAC PES did not start with ADTS header,offset:${l}`:f="No ADTS header found in AAC PES",bh(this.observer,new Error(f),h,this.logger),!h)return}QT(e,this.observer,o,l,this.audioCodec);let u;if(t.pts!==void 0)u=t.pts;else if(i){const f=ZT(e.samplerate);u=i.sample.pts+f}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let d=0,m;for(;l<c;)if(m=JT(e,o,l,u,d),l+=m.length,m.missing){this.aacOverFlow=m;break}else for(d++;l<c-1&&!Vc(o,l);l++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let o=0,l=0;const c=t.pts;if(c===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;l<i;)if(iS(n,l)){const u=nS(e,n,l,c,o);if(u)l+=u.length,o++;else break}else l++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const o=n.length;let l=0,c=0,u;for(;c<o&&(u=oS(e,n,c,i,l++))>0;)c+=u}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=pr({},t,{type:this._videoTrack?mi.emsg:mi.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function yh(r,e){return((r[e+1]&31)<<8)+r[e+2]}function r2(r,e){return(r[e+10]&31)<<8|r[e+11]}function i2(r,e,t,n,i,o){const l={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},c=(r[e+1]&15)<<8|r[e+2],u=e+3+c-4,d=(r[e+10]&15)<<8|r[e+11];for(e+=12+d;e<u;){const m=yh(r,e),f=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){Ld("ADTS AAC",o);break}case 15:l.audioPid===-1&&(l.audioPid=m);break;case 21:l.id3Pid===-1&&(l.id3Pid=m);break;case 219:if(!n){Ld("H.264",o);break}case 27:l.videoPid===-1&&(l.videoPid=m);break;case 3:case 4:!t.mpeg&&!t.mp3?o.log("MPEG audio found, not supported in this browser"):l.audioPid===-1&&(l.audioPid=m,l.segmentAudioCodec="mp3");break;case 193:if(!n){Ld("AC-3",o);break}case 129:t.ac3?l.audioPid===-1&&(l.audioPid=m,l.segmentAudioCodec="ac3"):o.log("AC-3 audio found, not supported in this browser");break;case 6:if(l.audioPid===-1&&f>0){let h=e+5,g=f;for(;g>2;){r[h]===106&&(t.ac3!==!0?o.log("AC-3 audio found, not supported in this browser for now"):(l.audioPid=m,l.segmentAudioCodec="ac3"));const E=r[h+1]+2;h+=E,g-=E}}break;case 194:case 135:return bh(i,new Error("Unsupported EC-3 in M2TS found"),void 0,o),l;case 36:l.videoPid===-1&&(l.videoPid=m,l.segmentVideoCodec="hevc",o.log("HEVC in M2TS found"));break}e+=f+5}return l}function bh(r,e,t,n){n.warn(`parsing error: ${e.message}`),r.emit(ye.ERROR,ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function Ld(r,e){e.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function zs(r,e){let t=0,n,i,o,l,c;const u=r.data;if(!r||r.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=Ni(u[0],u[1]),u.splice(1,1);if(n=u[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>r.size-6)return null;const m=n[7];m&192&&(l=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,m&64?(c=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,l-c>60*9e4&&(e.warn(`${Math.round((l-c)/9e4)}s delta between PTS and DTS, align them`),l=c)):c=l),o=n[8];let f=o+9;if(r.size<=f)return null;r.size-=f;const h=new Uint8Array(r.size);for(let g=0,p=u.length;g<p;g++){n=u[g];let E=n.byteLength;if(f)if(f>E){f-=E;continue}else n=n.subarray(f),E-=f,f=0;h.set(n,t),t+=E}return i&&(i-=o+3),{data:h,pts:l,dts:c,len:i}}return null}class a2{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const La=Math.pow(2,32)-1;class bt{static init(){bt.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in bt.types)bt.types.hasOwnProperty(e)&&(bt.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);bt.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);bt.STTS=bt.STSC=bt.STCO=o,bt.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),bt.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),bt.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),bt.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const l=new Uint8Array([105,115,111,109]),c=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);bt.FTYP=bt.box(bt.types.ftyp,l,u,l,c),bt.DINF=bt.box(bt.types.dinf,bt.box(bt.types.dref,i))}static box(e,...t){let n=8,i=t.length;const o=i;for(;i--;)n+=t[i].byteLength;const l=new Uint8Array(n);for(l[0]=n>>24&255,l[1]=n>>16&255,l[2]=n>>8&255,l[3]=n&255,l.set(e,4),i=0,n=8;i<o;i++)l.set(t[i],n),n+=t[i].byteLength;return l}static hdlr(e){return bt.box(bt.types.hdlr,bt.HDLR_TYPES[e])}static mdat(e){return bt.box(bt.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(La+1)),i=Math.floor(t%(La+1));return bt.box(bt.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return bt.box(bt.types.mdia,bt.mdhd(e.timescale||0,e.duration||0),bt.hdlr(e.type),bt.minf(e))}static mfhd(e){return bt.box(bt.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?bt.box(bt.types.minf,bt.box(bt.types.smhd,bt.SMHD),bt.DINF,bt.stbl(e)):bt.box(bt.types.minf,bt.box(bt.types.vmhd,bt.VMHD),bt.DINF,bt.stbl(e))}static moof(e,t,n){return bt.box(bt.types.moof,bt.mfhd(e),bt.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=bt.trak(e[t]);return bt.box.apply(null,[bt.types.moov,bt.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(bt.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=bt.trex(e[t]);return bt.box.apply(null,[bt.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(La+1)),i=Math.floor(t%(La+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return bt.box(bt.types.mvhd,o)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,o;for(i=0;i<t.length;i++)o=t[i].flags,n[i+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return bt.box(bt.types.sdtp,n)}static stbl(e){return bt.box(bt.types.stbl,bt.stsd(e),bt.box(bt.types.stts,bt.STTS),bt.box(bt.types.stsc,bt.STSC),bt.box(bt.types.stsz,bt.STSZ),bt.box(bt.types.stco,bt.STCO))}static avc1(e){let t=[],n=[],i,o,l;for(i=0;i<e.sps.length;i++)o=e.sps[i],l=o.byteLength,t.push(l>>>8&255),t.push(l&255),t=t.concat(Array.prototype.slice.call(o));for(i=0;i<e.pps.length;i++)o=e.pps[i],l=o.byteLength,n.push(l>>>8&255),n.push(l&255),n=n.concat(Array.prototype.slice.call(o));const c=bt.box(bt.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),u=e.width,d=e.height,m=e.pixelRatio[0],f=e.pixelRatio[1];return bt.box(bt.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,bt.box(bt.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),bt.box(bt.types.pasp,new Uint8Array([m>>24,m>>16&255,m>>8&255,m&255,f>>24,f>>16&255,f>>8&255,f&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return bt.box(bt.types.mp4a,bt.audioStsd(e),bt.box(bt.types.esds,bt.esds(e)))}static mp3(e){return bt.box(bt.types[".mp3"],bt.audioStsd(e))}static ac3(e){return bt.box(bt.types["ac-3"],bt.audioStsd(e),bt.box(bt.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return bt.box(bt.types.stsd,bt.STSD,bt.mp4a(e));if(t==="ac3"&&e.config)return bt.box(bt.types.stsd,bt.STSD,bt.ac3(e));if(t==="mp3"&&e.codec==="mp3")return bt.box(bt.types.stsd,bt.STSD,bt.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return bt.box(bt.types.stsd,bt.STSD,bt.avc1(e));if(t==="hevc"&&e.vps)return bt.box(bt.types.stsd,bt.STSD,bt.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,o=e.height||0,l=Math.floor(n/(La+1)),c=Math.floor(n%(La+1));return bt.box(bt.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255,c>>24,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,o>>8&255,o&255,0,0]))}static traf(e,t){const n=bt.sdtp(e),i=e.id,o=Math.floor(t/(La+1)),l=Math.floor(t%(La+1));return bt.box(bt.types.traf,bt.box(bt.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),bt.box(bt.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255])),bt.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,bt.box(bt.types.trak,bt.tkhd(e),bt.mdia(e))}static trex(e){const t=e.id;return bt.box(bt.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,o=12+16*i,l=new Uint8Array(o);let c,u,d,m,f,h;for(t+=8+o,l.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),c=0;c<i;c++)u=n[c],d=u.duration,m=u.size,f=u.flags,h=u.cts,l.set([d>>>24&255,d>>>16&255,d>>>8&255,d&255,m>>>24&255,m>>>16&255,m>>>8&255,m&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,f.degradPrio&61440,f.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*c);return bt.box(bt.types.trun,l)}static initSegment(e){bt.types||bt.init();const t=bt.moov(e);return Ni(bt.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],i=4,o=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let l=o.length;for(let p=0;p<n.length;p+=1){l+=3;for(let E=0;E<n[p].length;E+=1)l+=2+n[p][E].length}const c=new Uint8Array(l);c.set(o,0),l=o.length;const u=n.length-1;for(let p=0;p<n.length;p+=1){c.set(new Uint8Array([32+p|(p===u?128:0),0,n[p].length]),l),l+=3;for(let E=0;E<n[p].length;E+=1)c.set(new Uint8Array([n[p][E].length>>8,n[p][E].length&255]),l),l+=2,c.set(n[p][E],l),l+=n[p][E].length}const d=bt.box(bt.types.hvcC,c),m=e.width,f=e.height,h=e.pixelRatio[0],g=e.pixelRatio[1];return bt.box(bt.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>8&255,m&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d,bt.box(bt.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),bt.box(bt.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,g>>24,g>>16&255,g>>8&255,g&255])))}}bt.types=void 0;bt.HDLR_TYPES=void 0;bt.STTS=void 0;bt.STSC=void 0;bt.STCO=void 0;bt.STSZ=void 0;bt.VMHD=void 0;bt.SMHD=void 0;bt.STSD=void 0;bt.FTYP=void 0;bt.DINF=void 0;const cS=9e4;function Tm(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function s2(r,e,t=1,n=!1){return Tm(r,e,1/t,n)}function To(r,e=!1){return Tm(r,1e3,1/cS,e)}function o2(r,e=1){return Tm(r,cS,1/e)}function O0(r){const{baseTime:e,timescale:t,trackId:n}=r;return`${e/t} (${e}/${t}) trackId: ${n}`}const l2=10*1e3,c2=1024,u2=1152,d2=1536;let Us=null,Nd=null;function F0(r,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:r?2:1,isNonSync:r?0:1}}}class cc extends Pi{constructor(e,t,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,Us===null){const l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Us=l?parseInt(l[1]):0}if(Nd===null){const o=navigator.userAgent.match(/Safari\/(\d+)/i);Nd=o?parseInt(o[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&O0(t)} > ${e&&O0(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((o,l)=>{let c=l.pts,u=c-o;return u<-4294967296&&(t=!0,c=fi(c,n),u=c-o),u>0?o:c},n);return t&&this.debug("PTS rollover detected"),i}remux(e,t,n,i,o,l,c,u){let d,m,f,h,g,p,E=o,S=o;const A=e.pid>-1,x=t.pid>-1,k=t.samples.length,U=e.samples.length>0,Y=c&&k>0||k>1;if((!A||U)&&(!x||Y)||this.ISGenerated||c){if(this.ISGenerated){var L,O,G,te;const De=this.videoTrackConfig;(De&&(t.width!==De.width||t.height!==De.height||((L=t.pixelRatio)==null?void 0:L[0])!==((O=De.pixelRatio)==null?void 0:O[0])||((G=t.pixelRatio)==null?void 0:G[1])!==((te=De.pixelRatio)==null?void 0:te[1]))||!De&&Y||this.nextAudioTs===null&&U)&&this.resetInitSegment()}this.ISGenerated||(f=this.generateIS(e,t,o,l));const ge=this.isVideoContiguous;let Me=-1,he;if(Y&&(Me=f2(t.samples),!ge&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,Me>0){this.warn(`Dropped ${Me} out of ${k} video samples due to a missing keyframe`);const De=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Me),t.dropped+=Me,S+=(t.samples[0].pts-De)/t.inputTimeScale,he=S}else Me===-1&&(this.warn(`No keyframe found out of ${k} video samples`),p=!1);if(this.ISGenerated){if(U&&Y){const De=this.getVideoStartPts(t.samples),ke=(fi(e.samples[0].pts,De)-De)/t.inputTimeScale;E+=Math.max(0,ke),S+=Math.max(0,-ke)}if(U){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),f=this.generateIS(e,t,o,l)),m=this.remuxAudio(e,E,this.isAudioContiguous,l,x||Y||u===xn.AUDIO?S:void 0),Y){const De=m?m.endPTS-m.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),f=this.generateIS(e,t,o,l)),d=this.remuxVideo(t,S,ge,De)}}else Y&&(d=this.remuxVideo(t,S,ge,0));d&&(d.firstKeyFrame=Me,d.independent=Me!==-1,d.firstKeyFramePTS=he)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(g=uS(n,o,this._initPTS,this._initDTS)),i.samples.length&&(h=dS(i,o,this._initPTS))),{audio:m,video:d,initSegment:f,independent:p,text:h,id3:g}}computeInitPts(e,t,n,i){const o=Math.round(n*t);let l=fi(e,o);if(l<o+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(o-l)/t} ${i}`);l<o+t;)l+=8589934592;return l-o}generateIS(e,t,n,i){const o=e.samples,l=t.samples,c=this.typeSupported,u={},d=this._initPTS;let m=!d||i,f="audio/mp4",h,g,p,E=-1;if(m&&(h=g=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":c.mpeg?(f="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:f,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&c.mpeg?new Uint8Array(0):bt.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(E=e.id,p=e.inputTimeScale,!d||p!==d.timescale?h=g=this.computeInitPts(o[0].pts,p,n,"audio"):m=!1)}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:bt.initSegment([t]),metadata:{width:t.width,height:t.height}},m)if(E=t.id,p=t.inputTimeScale,!d||p!==d.timescale){const S=this.getVideoStartPts(l),A=fi(l[0].dts,S),x=this.computeInitPts(A,p,n,"video"),k=this.computeInitPts(S,p,n,"video");g=Math.min(g,x),h=Math.min(h,k)}else m=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,m?(d&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${h/p} != initPTS: ${d.baseTime/d.timescale} (${d.baseTime}/${d.timescale}) trackId: ${d.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${h/p} (${h}/${p}) trackId: ${E}`),this._initPTS={baseTime:h,timescale:p,trackId:E},this._initDTS={baseTime:g,timescale:p,trackId:E}):h=p=void 0,{tracks:u,initPTS:h,timescale:p,trackId:E}}remuxVideo(e,t,n,i){const o=e.inputTimeScale,l=e.samples,c=[],u=l.length,d=this._initPTS,m=d.baseTime*o/d.timescale;let f=this.nextVideoTs,h=8,g=this.videoSampleDuration,p,E,S=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,x=!1;if(!n||f===null){const qe=m+t*o,Ze=l[0].pts-fi(l[0].dts,l[0].pts);Us&&f!==null&&Math.abs(qe-Ze-(f+m))<15e3?n=!0:f=qe-Ze-m}const k=f+m;for(let qe=0;qe<u;qe++){const Ze=l[qe];Ze.pts=fi(Ze.pts,k),Ze.dts=fi(Ze.dts,k),Ze.dts<l[qe>0?qe-1:qe].dts&&(x=!0)}x&&l.sort(function(qe,Ze){const ct=qe.dts-Ze.dts,mt=qe.pts-Ze.pts;return ct||mt}),p=l[0].dts,E=l[l.length-1].dts;const U=E-p,Y=U?Math.round(U/(u-1)):g||e.inputTimeScale/30;if(n){const qe=p-k,Ze=qe>Y,ct=qe<-1;if((Ze||ct)&&(Ze?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${To(qe,!0)} ms (${qe}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${To(-qe,!0)} ms (${qe}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!ct||k>=l[0].pts||Us)){p=k;const mt=l[0].pts-qe;if(Ze)l[0].dts=p,l[0].pts=mt;else{let xe=!0;for(let Ie=0;Ie<l.length&&!(l[Ie].dts>mt&&xe);Ie++){const Ke=l[Ie].pts;if(l[Ie].dts-=qe,l[Ie].pts-=qe,Ie<l.length-1){const H=l[Ie+1].pts,V=l[Ie].pts,C=H<=V,F=H<=Ke;xe=C==F}}}this.log(`Video: Initial PTS/DTS adjusted: ${To(mt,!0)}/${To(p,!0)}, delta: ${To(qe,!0)} ms`)}}p=Math.max(0,p);let Q=0,L=0,O=p;for(let qe=0;qe<u;qe++){const Ze=l[qe],ct=Ze.units,mt=ct.length;let xe=0;for(let Ie=0;Ie<mt;Ie++)xe+=ct[Ie].data.length;L+=xe,Q+=mt,Ze.length=xe,Ze.dts<O?(Ze.dts=O,O+=Y/4|0||1):O=Ze.dts,S=Math.min(Ze.pts,S),A=Math.max(Ze.pts,A)}E=l[u-1].dts;const G=L+4*Q+8;let te;try{te=new Uint8Array(G)}catch(qe){this.observer.emit(ye.ERROR,ye.ERROR,{type:Nn.MUX_ERROR,details:vt.REMUX_ALLOC_ERROR,fatal:!1,error:qe,bytes:G,reason:`fail allocating video mdat ${G}`});return}const ge=new DataView(te.buffer);ge.setUint32(0,G),te.set(bt.types.mdat,4);let Me=!1,he=Number.POSITIVE_INFINITY,De=Number.POSITIVE_INFINITY,_e=Number.NEGATIVE_INFINITY,ke=Number.NEGATIVE_INFINITY;for(let qe=0;qe<u;qe++){const Ze=l[qe],ct=Ze.units;let mt=0;for(let Ke=0,H=ct.length;Ke<H;Ke++){const V=ct[Ke],C=V.data,F=V.data.byteLength;ge.setUint32(h,F),h+=4,te.set(C,h),h+=F,mt+=4+F}let xe;if(qe<u-1)g=l[qe+1].dts-Ze.dts,xe=l[qe+1].pts-Ze.pts;else{const Ke=this.config,H=qe>0?Ze.dts-l[qe-1].dts:Y;if(xe=qe>0?Ze.pts-l[qe-1].pts:Y,Ke.stretchShortVideoTrack&&this.nextAudioTs!==null){const V=Math.floor(Ke.maxBufferHole*o),C=(i?S+i*o:this.nextAudioTs+m)-Ze.pts;C>V?(g=C-H,g<0?g=H:Me=!0,this.log(`It is approximately ${C/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=H}else g=H}const Ie=Math.round(Ze.pts-Ze.dts);he=Math.min(he,g),_e=Math.max(_e,g),De=Math.min(De,xe),ke=Math.max(ke,xe),c.push(F0(Ze.key,g,mt,Ie))}if(c.length){if(Us){if(Us<70){const qe=c[0].flags;qe.dependsOn=2,qe.isNonSync=0}}else if(Nd&&ke-De<_e-he&&Y/_e<.025&&c[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let qe=p;for(let Ze=0,ct=c.length;Ze<ct;Ze++){const mt=qe+c[Ze].duration,xe=qe+c[Ze].cts;if(Ze<ct-1){const Ie=mt+c[Ze+1].cts;c[Ze].duration=Ie-xe}else c[Ze].duration=Ze?c[Ze-1].duration:Y;c[Ze].cts=0,qe=mt}}}g=Me||!g?Y:g;const Oe=E+g;this.nextVideoTs=f=Oe-m,this.videoSampleDuration=g,this.isVideoContiguous=!0;const Ge={data1:bt.moof(e.sequenceNumber++,p,pr(e,{samples:c})),data2:te,startPTS:(S-m)/o,endPTS:(A+g-m)/o,startDTS:(p-m)/o,endDTS:f/o,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Ge}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return u2;case"ac3":return d2;default:return c2}}remuxAudio(e,t,n,i,o){const l=e.inputTimeScale,c=e.samplerate?e.samplerate:l,u=l/c,d=this.getSamplesPerFrame(e),m=d*u,f=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,g=[],p=o!==void 0;let E=e.samples,S=h?0:8,A=this.nextAudioTs||-1;const x=f.baseTime*l/f.timescale,k=x+t*l;if(this.isAudioContiguous=n=n||E.length&&A>0&&(i&&Math.abs(k-(A+x))<9e3||Math.abs(fi(E[0].pts,k)-(A+x))<20*m),E.forEach(function(ke){ke.pts=fi(ke.pts,k)}),!n||A<0){const ke=E.length;if(E=E.filter(Oe=>Oe.pts>=0),ke!==E.length&&this.warn(`Removed ${E.length-ke} of ${ke} samples (initPTS ${x} / ${l})`),!E.length)return;o===0?A=0:i&&!p?A=Math.max(0,k-x):A=E[0].pts-x}if(e.segmentCodec==="aac"){const ke=this.config.maxAudioFramesDrift;for(let Oe=0,He=A+x;Oe<E.length;Oe++){const Pe=E[Oe],Ge=Pe.pts,qe=Ge-He,Ze=Math.abs(1e3*qe/l);if(qe<=-ke*m&&p)Oe===0&&(this.warn(`Audio frame @ ${(Ge/l).toFixed(3)}s overlaps marker by ${Math.round(1e3*qe/l)} ms.`),this.nextAudioTs=A=Ge-x,He=Ge);else if(qe>=ke*m&&Ze<l2&&p){let ct=Math.round(qe/m);for(He=Ge-ct*m;He<0&&ct&&m;)ct--,He+=m;Oe===0&&(this.nextAudioTs=A=He-x),this.warn(`Injecting ${ct} audio frames @ ${((He-x)/l).toFixed(3)}s due to ${Math.round(1e3*qe/l)} ms gap.`);for(let mt=0;mt<ct;mt++){let xe=a2.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);xe||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),xe=Pe.unit.subarray()),E.splice(Oe,0,{unit:xe,pts:He}),He+=m,Oe++}}Pe.pts=He,He+=m}}let U=null,Y=null,Q,L=0,O=E.length;for(;O--;)L+=E[O].unit.byteLength;for(let ke=0,Oe=E.length;ke<Oe;ke++){const He=E[ke],Pe=He.unit;let Ge=He.pts;if(Y!==null){const Ze=g[ke-1];Ze.duration=Math.round((Ge-Y)/u)}else if(n&&e.segmentCodec==="aac"&&(Ge=A+x),U=Ge,L>0){L+=S;try{Q=new Uint8Array(L)}catch(Ze){this.observer.emit(ye.ERROR,ye.ERROR,{type:Nn.MUX_ERROR,details:vt.REMUX_ALLOC_ERROR,fatal:!1,error:Ze,bytes:L,reason:`fail allocating audio mdat ${L}`});return}h||(new DataView(Q.buffer).setUint32(0,L),Q.set(bt.types.mdat,4))}else return;Q.set(Pe,S);const qe=Pe.byteLength;S+=qe,g.push(F0(!0,d,qe,0)),Y=Ge}const G=g.length;if(!G)return;const te=g[g.length-1];A=Y-x,this.nextAudioTs=A+u*te.duration;const ge=h?new Uint8Array(0):bt.moof(e.sequenceNumber++,U/u,pr({},e,{samples:g}));e.samples=[];const Me=(U-x)/l,he=this.nextAudioTs/l,_e={data1:ge,data2:Q,startPTS:Me,endPTS:he,startDTS:Me,endDTS:he,type:"audio",hasAudio:!0,hasVideo:!1,nb:G};return this.isAudioContiguous=!0,_e}}function fi(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function f2(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function uS(r,e,t,n){const i=r.samples.length;if(!i)return;const o=r.inputTimeScale;for(let c=0;c<i;c++){const u=r.samples[c];u.pts=fi(u.pts-t.baseTime*o/t.timescale,e*o)/o,u.dts=fi(u.dts-n.baseTime*o/n.timescale,e*o)/o}const l=r.samples;return r.samples=[],{samples:l}}function dS(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let l=0;l<n;l++){const c=r.samples[l];c.pts=fi(c.pts-t.baseTime*i/t.timescale,e*i)/i}r.samples.sort((l,c)=>l.pts-c.pts);const o=r.samples;return r.samples=[],{samples:o}}class h2 extends Pi{constructor(e,t,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:o,video:l}=this.initData=yT(e);if(t)eO(e,t);else{const u=o||l;u!=null&&u.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${u.codec}")!`)}o&&(n=z0(o,br.AUDIO,this)),l&&(i=z0(l,br.VIDEO,this));const c={};o&&l?c.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:o?c.audio={container:"audio/mp4",codec:n,encrypted:o.encrypted,initSegment:e,id:"audio"}:l?c.video={container:"video/mp4",codec:i,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=c}remux(e,t,n,i,o,l){var c,u;let{initPTS:d,lastEndTime:m}=this;const f={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};yn(m)||(m=this.lastEndTime=o||0);const h=t.samples;if(!h.length)return f;const g={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if((c=p)!=null&&c.length||(this.generateInitSegment(h),p=this.initData),!((u=p)!=null&&u.length))return this.warn("Failed to generate initSegment."),f;this.emitInitSegment&&(g.tracks=this.initTracks,this.emitInitSegment=!1);const E=nO(h,p,this),S=p.audio?E[p.audio.id]:null,A=p.video?E[p.video.id]:null,x=Kl(A,1/0),k=Kl(S,1/0),U=Kl(A,0,!0),Y=Kl(S,0,!0);let Q=o,L=0;const O=S&&(!A||!d&&k<x||d&&d.trackId===p.audio.id),G=O?S:A;if(G){const He=G.timescale,Pe=G.start-o*He,Ge=O?p.audio.id:p.video.id;Q=G.start/He,L=O?Y-k:U-x,(l||!d)&&(m2(d,Q,o,L)||He!==d.timescale)&&(d&&this.warn(`Timestamps at playlist time: ${l?"":"~"}${o} ${Pe/He} != initPTS: ${d.baseTime/d.timescale} (${d.baseTime}/${d.timescale}) trackId: ${d.trackId}`),this.log(`Found initPTS at playlist time: ${o} offset: ${Q-o} (${Pe}/${He}) trackId: ${Ge}`),d=null,g.initPTS=Pe,g.timescale=He,g.trackId=Ge)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${o}`);d?(g.initPTS=d.baseTime,g.timescale=d.timescale,g.trackId=d.trackId):((!g.timescale||g.trackId===void 0||g.initPTS===void 0)&&(this.warn("Could not set initPTS"),g.initPTS=Q,g.timescale=1,g.trackId=-1),this.initPTS=d={baseTime:g.initPTS,timescale:g.timescale,trackId:g.trackId});const te=Q-d.baseTime/d.timescale,ge=te+L;L>0?this.lastEndTime=ge:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Me=!!p.audio,he=!!p.video;let De="";Me&&(De+="audio"),he&&(De+="video");const _e=(p.audio?p.audio.encrypted:!1)||(p.video?p.video.encrypted:!1),ke={data1:h,startPTS:te,startDTS:te,endPTS:ge,endDTS:ge,type:De,hasAudio:Me,hasVideo:he,nb:1,dropped:0,encrypted:_e};f.audio=Me&&!he?ke:void 0,f.video=he?ke:void 0;const Oe=A?.sampleCount;if(Oe){const He=A.keyFrameIndex,Pe=He!==-1;ke.nb=Oe,ke.dropped=He===0||this.isVideoContiguous?0:Pe?He:Oe,ke.independent=Pe,ke.firstKeyFrame=He,Pe&&A.keyFrameStart&&(ke.firstKeyFramePTS=(A.keyFrameStart-d.baseTime)/d.timescale),this.isVideoContiguous||(f.independent=Pe),this.isVideoContiguous||(this.isVideoContiguous=Pe),ke.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${He}/${Oe} dropped: ${ke.dropped} start: ${ke.firstKeyFramePTS||"NA"}`)}return f.initSegment=g,f.id3=uS(n,o,d,d),i.samples.length&&(f.text=dS(i,o,d)),f}}function Kl(r,e,t=!1){return r?.start!==void 0?(r.start+(t?r.duration:0))/r.timescale:e}function m2(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),o=e-r.baseTime/r.timescale;return Math.abs(o-t)>i}function z0(r,e,t){const n=r.codec;return n&&n.length>4?n:e===br.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?zc(n,!1):(t.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(t.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let ya;try{ya=self.performance.now.bind(self.performance)}catch{ya=Date.now}const uc=[{demux:JF,remux:h2},{demux:Ma,remux:cc},{demux:WF,remux:cc},{demux:QF,remux:cc}];uc.splice(2,0,{demux:XF,remux:cc});class U0{constructor(e,t,n,i,o,l){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=o,this.logger=l}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const o=n.transmuxing;o.executeStart=ya();let l=new Uint8Array(e);const{currentTransmuxState:c,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:d,discontinuity:m,trackSwitch:f,accurateTimeOffset:h,timeOffset:g,initSegmentChange:p}=i||c,{audioCodec:E,videoCodec:S,defaultInitPts:A,duration:x,initSegmentData:k}=u,U=g2(l,t);if(U&&Ws(U.method)){const O=this.getDecrypter(),G=fm(U.method);if(O.isSync()){let te=O.softwareDecrypt(l,U.key.buffer,U.iv.buffer,G);if(n.part>-1){const Me=O.flush();te=Me&&Me.buffer}if(!te)return o.executeEnd=ya(),Dd(n);l=new Uint8Array(te)}else return this.asyncResult=!0,this.decryptionPromise=O.webCryptoDecrypt(l,U.key.buffer,U.iv.buffer,G).then(te=>{const ge=this.push(te,null,n);return this.decryptionPromise=null,ge}),this.decryptionPromise}const Y=this.needsProbing(m,f);if(Y){const O=this.configureTransmuxer(l);if(O)return this.logger.warn(`[transmuxer] ${O.message}`),this.observer.emit(ye.ERROR,ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.FRAG_PARSING_ERROR,fatal:!1,error:O,reason:O.message}),o.executeEnd=ya(),Dd(n)}(m||f||p||Y)&&this.resetInitSegment(k,E,S,x,t),(m||p||Y)&&this.resetInitialTimestamp(A),d||this.resetContiguity();const Q=this.transmux(l,U,g,h,n);this.asyncResult=Qo(Q);const L=this.currentTransmuxState;return L.contiguous=!0,L.discontinuity=!1,L.trackSwitch=!1,o.executeEnd=ya(),Q}flush(e){const t=e.transmuxing;t.executeStart=ya();const{decrypter:n,currentTransmuxState:i,decryptionPromise:o}=this;if(o)return this.asyncResult=!0,o.then(()=>this.flush(e));const l=[],{timeOffset:c}=i;if(n){const f=n.flush();f&&l.push(this.push(f.buffer,null,e))}const{demuxer:u,remuxer:d}=this;if(!u||!d){t.executeEnd=ya();const f=[Dd(e)];return this.asyncResult?Promise.resolve(f):f}const m=u.flush(c);return Qo(m)?(this.asyncResult=!0,m.then(f=>(this.flushRemux(l,f,e),l))):(this.flushRemux(l,m,e),this.asyncResult?Promise.resolve(l):l)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:o,id3Track:l,textTrack:c}=t,{accurateTimeOffset:u,timeOffset:d}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===xn.MAIN?"level":"track"} ${n.level}`);const m=this.remuxer.remux(i,o,l,c,d,u,!0,this.id);e.push({remuxResult:m,chunkMeta:n}),n.transmuxing.executeEnd=ya()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,o){const{demuxer:l,remuxer:c}=this;!l||!c||(l.resetInitSegment(e,t,n,i),c.resetInitSegment(e,t,n,o))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,o){let l;return t&&t.method==="SAMPLE-AES"?l=this.transmuxSampleAes(e,t,n,i,o):l=this.transmuxUnencrypted(e,n,i,o),l}transmuxUnencrypted(e,t,n,i){const{audioTrack:o,videoTrack:l,id3Track:c,textTrack:u}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(o,l,c,u,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,o){return this.demuxer.demuxSampleAes(e,t,n).then(l=>({remuxResult:this.remuxer.remux(l.audioTrack,l.videoTrack,l.id3Track,l.textTrack,n,i,!1,this.id),chunkMeta:o}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i}=this;let o;for(let f=0,h=uc.length;f<h;f++){var l;if((l=uc[f].demux)!=null&&l.probe(e,this.logger)){o=uc[f];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const c=this.demuxer,u=this.remuxer,d=o.remux,m=o.demux;(!u||!(u instanceof d))&&(this.remuxer=new d(n,t,i,this.logger)),(!c||!(c instanceof m))&&(this.demuxer=new m(n,t,i,this.logger),this.probe=m.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new um(this.config)),e}}function g2(r,e){let t=null;return r.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const Dd=r=>({remuxResult:{},chunkMeta:r});function Qo(r){return"then"in r&&r.then instanceof Function}class p2{constructor(e,t,n,i,o){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=o||null}}class y2{constructor(e,t,n,i,o,l){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=o,this.initSegmentChange=l}}let B0=0;class fS{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=B0++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=u=>{const d=u.data,m=this.hls;if(!(!m||!(d!=null&&d.event)||d.instanceNo!==this.instanceNo))switch(d.event){case"init":{var f;const h=(f=this.workerContext)==null?void 0:f.objectURL;h&&self.URL.revokeObjectURL(h);break}case"transmuxComplete":{this.handleTransmuxComplete(d.data);break}case"flush":{this.onFlush(d.data);break}case"workerLog":{m.logger[d.data.logType]&&m.logger[d.data.logType](d.data.message);break}default:{d.data=d.data||{},d.data.frag=this.frag,d.data.part=this.part,d.data.id=this.id,m.trigger(d.event,d.data);break}}},this.onWorkerError=u=>{if(!this.hls)return;const d=new Error(`${u.message}  (${u.filename}:${u.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:d})};const o=e.config;this.hls=e,this.id=t,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const l=(u,d)=>{d=d||{},d.frag=this.frag||void 0,u===ye.ERROR&&(d=d,d.parent=this.id,d.part=this.part,this.error=d.error),this.hls.trigger(u,d)};this.observer=new gm,this.observer.on(ye.FRAG_DECRYPTED,l),this.observer.on(ye.ERROR,l);const c=t0(o.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const u=this.hls.logger;if(o.workerPath||TF()){try{o.workerPath?(u.log(`loading Web Worker ${o.workerPath} for "${t}"`),this.workerContext=wF(o.workerPath)):(u.log(`injecting Web Worker for "${t}"`),this.workerContext=SF());const{worker:m}=this.workerContext;m.addEventListener("message",this.onWorkerMessage),m.addEventListener("error",this.onWorkerError),m.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:c,id:t,config:Er(o)})}catch(m){u.warn(`Error setting up "${t}" Web Worker, fallback to inline`,m),this.terminateWorker(),this.error=null,this.transmuxer=new U0(this.observer,c,o,"",t,e.logger)}return}}this.transmuxer=new U0(this.observer,c,o,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=B0++;const t=this.hls.config,n=t0(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Er(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),_F(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,i,o,l,c,u,d,m){var f,h;d.transmuxing.start=self.performance.now();const{instanceNo:g,transmuxer:p}=this,E=l?l.start:o.start,S=o.decryptdata,A=this.frag,x=!(A&&o.cc===A.cc),k=!(A&&d.level===A.level),U=A?d.sn-A.sn:-1,Y=this.part?d.part-this.part.index:-1,Q=U===0&&d.id>1&&d.id===A?.stats.chunkCount,L=!k&&(U===1||U===0&&(Y===1||Q&&Y<=0)),O=self.performance.now();(k||U||o.stats.parsing.start===0)&&(o.stats.parsing.start=O),l&&(Y||!L)&&(l.stats.parsing.start=O);const G=!(A&&((f=o.initSegment)==null?void 0:f.url)===((h=A.initSegment)==null?void 0:h.url)),te=new y2(x,L,u,k,E,G);if(!L||x||G){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${o.type} sn: ${d.sn}${d.part>-1?" part: "+d.part:""} ${this.id===xn.MAIN?"level":"track"}: ${d.level} id: ${d.id}
        discontinuity: ${x}
        trackSwitch: ${k}
        contiguous: ${L}
        accurateTimeOffset: ${u}
        timeOffset: ${E}
        initSegmentChange: ${G}`);const ge=new p2(n,i,t,c,m);this.configureTransmuxer(ge)}if(this.frag=o,this.part=l,this.workerContext)this.workerContext.worker.postMessage({instanceNo:g,cmd:"demux",data:e,decryptdata:S,chunkMeta:d,state:te},e instanceof ArrayBuffer?[e]:[]);else if(p){const ge=p.push(e,S,d,te);Qo(ge)?ge.then(Me=>{this.handleTransmuxComplete(Me)}).catch(Me=>{this.transmuxerError(Me,d,"transmuxer-interface push error")}):this.handleTransmuxComplete(ge)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);Qo(i)?i.then(o=>{this.handleFlushResult(o,e)}).catch(o=>{this.transmuxerError(o,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const $0=100;class b2 extends mm{constructor(e,t,n){super(e,t,n,"audio-stream-controller",xn.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ye.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(ye.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ye.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ye.BUFFER_RESET,this.onBufferReset,this),e.on(ye.BUFFER_CREATED,this.onBufferCreated,this),e.on(ye.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ye.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ye.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ye.FRAG_LOADING,this.onFragLoading,this),e.on(ye.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ye.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(ye.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ye.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ye.BUFFER_RESET,this.onBufferReset,this),e.off(ye.BUFFER_CREATED,this.onBufferCreated,this),e.off(ye.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ye.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ye.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ye.FRAG_LOADING,this.onFragLoading,this),e.off(ye.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:o,trackId:l}){if(n===xn.MAIN){const c=t.cc,u=this.fragCurrent;if(this.initPTS[c]={baseTime:i,timescale:o,trackId:l},this.log(`InitPTS for cc: ${c} found from main: ${i/o} (${i}/${o}) trackId: ${l}`),this.mainAnchor=t,this.state===Qt.WAITING_INIT_PTS){const d=this.waitingData;(!d&&!this.loadingParts||d&&d.frag.cc!==c)&&this.syncWithAnchor(t,d?.frag)}else!this.hls.hasEnoughToStart&&u&&u.cc!==c?(u.abortRequests(),this.syncWithAnchor(t,u)):this.state===Qt.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(t&&i?.cc===t.cc)return;const o=(i||e).cc,l=this.getLevelDetails(),c=this.getLoadPosition(),u=RT(l,o,c);u&&(this.log(`Syncing with main frag at ${u.start} cc ${u.cc}`),this.startFragRequested=!1,this.nextLoadPosition=u.start,this.resetLoadingState(),this.state===Qt.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=Qt.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval($0),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Qt.IDLE):this.state=Qt.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Qt.IDLE:this.doTickIdle();break;case Qt.WAITING_TRACK:{const{levels:e,trackId:t}=this,n=e?.[t],i=n?.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=Qt.WAITING_INIT_PTS}break}case Qt.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Qt.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:i,complete:o}=e,l=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=Qt.FRAG_LOADING;const c=i.flush().buffer,u={frag:t,part:n,payload:c,networkDetails:null};this._handleFragmentLoadProgress(u),o&&super._handleFragmentLoadComplete(u)}else l&&l.cc!==e.frag.cc&&this.syncWithAnchor(l,e.frag)}else this.state=Qt.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:i,trackId:o}=this,l=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!l.startFragPrefetch)||!(n!=null&&n[o]))return;const c=n[o],u=c.details;if(!u||this.waitForLive(c)||this.waitForCdnTuneIn(u)){this.state=Qt.WAITING_TRACK,this.startFragRequested=!1;return}const d=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&d&&(this.bufferFlushed=!1,this.afterBufferFlushed(d,br.AUDIO,xn.AUDIO));const m=this.getFwdBufferInfo(d,xn.AUDIO);if(m===null)return;if(!this.switchingTrack&&this._streamEnded(m,u)){t.trigger(ye.BUFFER_EOS,{type:"audio"}),this.state=Qt.ENDED;return}const f=m.len,h=t.maxBufferLength,g=u.fragments,p=g[0].start,E=this.getLoadPosition(),S=this.flushing?E:m.end;if(this.switchingTrack&&i){const k=E;u.PTSKnown&&k<p&&(m.end>p||m.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=p+.05)}if(f>=h&&!this.switchingTrack&&S<g[g.length-1].start)return;let A=this.getNextFragment(S,u);if(A&&this.isLoopLoading(A,S)&&(A=this.getNextFragmentLoopLoading(A,u,m,xn.MAIN,h)),!A){this.bufferFlushed=!0;return}let x=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&x&&kr(A)&&!A.endList&&(!u.live||!this.loadingParts&&S<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(x)===Or.OK&&(this.mainFragLoading=x=null),x&&kr(x))){if(A.start>x.end){const U=this.fragmentTracker.getFragAtPos(S,xn.MAIN);U&&U.end>x.end&&(x=U,this.mainFragLoading={frag:U,targetBufferTime:null})}if(A.start>x.end)return}this.loadFragment(A,c,S)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new Yo(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Qt.STOPPED&&(this.setInterval($0),this.state=Qt.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(ye.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:i}=this,{details:o,id:l,groupId:c,track:u}=t;if(!i){this.warn(`Audio tracks reset while loading track ${l} "${u.name}" of "${c}"`);return}const d=this.mainDetails;if(!d||o.endCC>d.endCC||d.expired){this.cachedTrackLoadedData=t,this.state!==Qt.STOPPED&&(this.state=Qt.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${l} "${u.name}" of "${c}" loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`);const m=i[l];let f=0;if(o.live||(n=m.details)!=null&&n.live){if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;if(m.details){var h;f=this.alignPlaylists(o,m.details,(h=this.levelLastLoaded)==null?void 0:h.details)}o.alignedSliding||(VT(o,d),o.alignedSliding||Hc(o,d),f=o.fragmentStart)}m.details=o,this.levelLastLoaded=m,this.startFragRequested||this.setStartPosition(d,f),this.hls.trigger(ye.AUDIO_TRACK_UPDATED,{details:o,id:l,groupId:t.groupId}),this.state===Qt.WAITING_TRACK&&!this.waitForCdnTuneIn(o)&&(this.state=Qt.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:o}=e,{config:l,trackId:c,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const d=u[c];if(!d){this.warn("Audio track is undefined on fragment load progress");return}const m=d.details;if(!m){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const f=l.defaultAudioCodec||d.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new fS(this.hls,xn.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const g=this.initPTS[n.cc],p=(t=n.initSegment)==null?void 0:t.data;if(g!==void 0){const S=i?i.index:-1,A=S!==-1,x=new dm(n.level,n.sn,n.stats.chunkCount,o.byteLength,S,A);h.push(o,p,f,"",n,i,m.totalduration,!1,x,g)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${m.startSN} ,${m.endSN}],track ${c}`);const{cache:E}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new KT,complete:!1};E.push(new Uint8Array(o)),this.state!==Qt.STOPPED&&(this.state=Qt.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===xn.MAIN&&kr(t.frag)&&(this.mainFragLoading=t,this.state===Qt.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==xn.AUDIO){!this.audioOnly&&n.type===xn.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(kr(n)){this.fragPrevious=n;const o=this.switchingTrack;o&&(this.bufferedTrack=o,this.switchingTrack=null,this.hls.trigger(ye.AUDIO_TRACK_SWITCHED,fr({},o)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=Qt.ERROR;return}switch(t.details){case vt.FRAG_GAP:case vt.FRAG_PARSING_ERROR:case vt.FRAG_DECRYPT_ERROR:case vt.FRAG_LOAD_ERROR:case vt.FRAG_LOAD_TIMEOUT:case vt.KEY_LOAD_ERROR:case vt.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(xn.AUDIO,t);break;case vt.AUDIO_TRACK_LOAD_ERROR:case vt.AUDIO_TRACK_LOAD_TIMEOUT:case vt.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Qt.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===Qn.AUDIO_TRACK&&(this.state=Qt.IDLE);break;case vt.BUFFER_ADD_CODEC_ERROR:case vt.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case vt.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case vt.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==br.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==br.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Qt.ENDED&&(this.state=Qt.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,xn.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:o,chunkMeta:l}=e,c=this.getCurrentContext(l);if(!c){this.resetWhenMissingContext(l);return}const{frag:u,part:d,level:m}=c,{details:f}=m,{audio:h,text:g,id3:p,initSegment:E}=o;if(this.fragContextChanged(u)||!f){this.fragmentTracker.removeFragment(u);return}if(this.state=Qt.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),E!=null&&E.tracks){const S=u.initSegment||u;if(this.unhandledEncryptionError(E,u))return;this._bufferInitSegment(m,E.tracks,S,l),i.trigger(ye.FRAG_PARSING_INIT_SEGMENT,{frag:S,id:n,tracks:E.tracks})}if(h){const{startPTS:S,endPTS:A,startDTS:x,endDTS:k}=h;d&&(d.elementaryStreams[br.AUDIO]={startPTS:S,endPTS:A,startDTS:x,endDTS:k}),u.setElementaryStreamInfo(br.AUDIO,S,A,x,k),this.bufferFragmentData(h,u,d,l)}if(p!=null&&(t=p.samples)!=null&&t.length){const S=pr({id:n,frag:u,details:f},p);i.trigger(ye.FRAG_PARSING_METADATA,S)}if(g){const S=pr({id:n,frag:u,details:f},g);i.trigger(ye.FRAG_PARSING_USERDATA,S)}}_bufferInitSegment(e,t,n,i){if(this.state!==Qt.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const o=t.audio;o.id=xn.AUDIO;const l=e.audioCodec;this.log(`Init audio buffer, container:${o.container}, codecs[level/parsed]=[${l}/${o.codec}]`),l&&l.split(",").length===1&&(o.levelCodec=l),this.hls.trigger(ye.BUFFER_CODECS,t);const c=o.initSegment;if(c!=null&&c.byteLength){const u={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:c};this.hls.trigger(ye.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===Or.NOT_LOADED||i===Or.PARTIAL){var o;if(!kr(e))this._loadInitSegment(e,t);else if((o=t.details)!=null&&o.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Qt.WAITING_INIT_PTS;const l=this.mainDetails;l&&l.fragmentStart!==t.details.fragmentStart&&Hc(t.details,l)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:i,characteristics:o,audioCodec:l,channels:c}=this.bufferedTrack;ss({name:t,lang:n,assocLang:i,characteristics:o,audioCodec:l,channels:c},e,ts)||(Bc(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(ye.AUDIO_TRACK_SWITCHED,fr({},e))}}class Sm extends Pi{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t?.renditionReports;if(i){let o=-1;for(let l=0;l<i.length;l++){const c=i[l];let u;try{u=new self.URL(c.URI,t.url).href}catch(d){this.warn(`Could not construct new URL for Rendition Report: ${d}`),u=c.URI||""}if(u===e){o=l;break}else u===e.substring(0,u.length)&&(o=l)}if(o!==-1){const l=i[o],c=parseInt(l["LAST-MSN"])||t.lastPartSn;let u=parseInt(l["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const m=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&m>t.partTarget&&(u+=1)}const d=n&&n0(n);return new r0(c,u>=0?u:void 0,d)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:i,stats:o}=t,l=self.performance.now(),c=o.loading.first?Math.max(0,l-o.loading.first):0;i.advancedDateTime=Date.now()-c;const u=this.hls.config.timelineOffset;if(u!==i.appliedTimelineOffset){const m=Math.max(u||0,0);i.appliedTimelineOffset=m,i.fragments.forEach(f=>{f.setStart(f.playlistOffset+m)})}if(i.live||n!=null&&n.live){const m="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(n),n&&i.fragments.length>0){uF(n,i,this);const x=i.playlistParsingError;if(x){this.warn(x);const k=this.hls;if(!k.config.ignorePlaylistParsingErrors){var d;const{networkDetails:U}=t;k.trigger(ye.ERROR,{type:Nn.NETWORK_ERROR,details:vt.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:x,reason:x.message,level:t.level||void 0,parent:(d=i.fragments[0])==null?void 0:d.type,networkDetails:U,stats:o});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=o.loading.start);const f=this.hls.mainForwardBufferInfo,h=f?f.end-f.len:0,g=(i.edge-h)*1e3,p=$T(i,g);if(i.requestScheduled+p<l?i.requestScheduled=l:i.requestScheduled+=p,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let E,S,A;if(i.canBlockReload&&i.endSN&&i.advanced){const x=this.hls.config.lowLatencyMode,k=i.lastPartSn,U=i.endSN,Y=i.lastPartIndex,Q=Y!==-1,L=k===U;Q?L?(S=U+1,A=x?0:Y):(S=k,A=x?Y+1:i.maxPartIndex):S=U+1;const O=i.age,G=O+i.ageHeader;let te=Math.min(G-i.partTarget,i.targetduration*1.5);if(te>0){if(G>i.targetduration*3)this.log(`Playlist last advanced ${O.toFixed(2)}s ago. Omitting segment and part directives.`),S=void 0,A=void 0;else if(n!=null&&n.tuneInGoal&&G-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${te} with playlist age: ${i.age}`),te=0;else{const ge=Math.floor(te/i.targetduration);if(S+=ge,A!==void 0){const Me=Math.round(te%i.targetduration/i.partTarget);A+=Me}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${O.toFixed(2)}s goal: ${te} skip sn ${ge} to part ${A}`)}i.tuneInGoal=te}if(E=this.getDeliveryDirectives(i,t.deliveryDirectives,S,A),x||!L){i.requestScheduled=l,this.loadingPlaylist(m,E);return}}else(i.canBlockReload||i.canSkipUntil)&&(E=this.getDeliveryDirectives(i,t.deliveryDirectives,S,A));E&&S!==void 0&&i.canBlockReload&&(i.requestScheduled=o.loading.first+Math.max(p-c*2,p/2)),this.scheduleLoading(m,E,i)}else this.clearTimer()}scheduleLoading(e,t,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,t);return}const o=self.performance.now(),l=i.requestScheduled;if(o>=l){this.loadingPlaylist(e,t);return}const c=l-o;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(c)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),c)}getDeliveryDirectives(e,t,n,i){let o=n0(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,o=oc.No),new r0(n,i,o)}checkRetry(e){const t=e.details,n=$c(e),i=e.errorAction,{action:o,retryCount:l=0,retryConfig:c}=i||{},u=!!i&&!!c&&(o===jr.RetryRequest||!i.resolved&&o===jr.SendAlternateToPenaltyBox);if(u){var d;if(l>=c.maxNumRetry)return!1;if(n&&(d=e.context)!=null&&d.deliveryDirectives)this.warn(`Retrying playlist loading ${l+1}/${c.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const m=cm(c,l);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),m),this.warn(`Retrying playlist loading ${l+1}/${c.maxNumRetry} after "${t}" in ${m}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}function hS(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Zo(r[t].attrs,e[t].attrs))return!1;return!0}function Zo(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>r[i]!==e[i])}function Eh(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}class E2 extends Sm{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ye.LEVEL_LOADING,this.onLevelLoading,this),e.on(ye.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ye.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ye.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ye.LEVEL_LOADING,this.onLevelLoading,this),e.off(ye.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ye.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ye.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:o}=t,l=this.tracksInGroup[n];if(!l||l.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${l?.groupId}`);return}const c=l.details;l.details=t.details,this.log(`Audio track ${n} "${l.name}" lang:${l.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let o=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(c=>i?.indexOf(c)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const c=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(c.length)this.selectDefaultTrack&&!c.some(h=>h.default)&&(this.selectDefaultTrack=!1),c.forEach((h,g)=>{h.id=g});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=c;const u=this.hls.config.audioPreference;if(!o&&u){const h=ia(u,c,ts);if(h>-1)o=c[h];else{const g=ia(u,this.tracks);o=this.tracks[g]}}let d=this.findTrackId(o);d===-1&&o&&(d=this.findTrackId(null));const m={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(ye.AUDIO_TRACKS_UPDATED,m);const f=this.trackId;if(d!==-1&&f===-1)this.setAudioTrack(d);else if(c.length&&f===-1){var l;const h=new Error(`No audio track selected for current audio group-ID(s): ${(l=this.groupIds)==null?void 0:l.join(",")} track count: ${c.length}`);this.warn(h.message),this.hls.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}onError(e,t){t.fatal||!t.context||t.context.type===Qn.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&ss(e,i,ts))return i;const o=ia(e,this.tracksInGroup,ts);if(o>-1){const l=this.tracksInGroup[o];return this.setAudioTrack(o),l}else if(i){let l=t.loadLevel;l===-1&&(l=t.firstAutoLevel);const c=LO(e,t.levels,n,l,ts);if(c===-1)return null;t.nextLoadLevel=c}if(e.channels||e.audioCodec){const l=ia(e,n);if(l>-1)return n[l]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],o=i.details&&!i.details.live;if(e===this.trackId&&i===n&&o||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(ye.AUDIO_TRACK_SWITCHING,fr({},i)),o))return;const l=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(l)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||ss(e,i,ts)))return n}if(e){const{name:n,lang:i,assocLang:o,characteristics:l,audioCodec:c,channels:u}=e;for(let d=0;d<t.length;d++){const m=t[d];if(ss({name:n,lang:i,assocLang:o,characteristics:l,audioCodec:c,channels:u},m,ts))return d}for(let d=0;d<t.length;d++){const m=t[d];if(Zo(e.attrs,m.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(let d=0;d<t.length;d++){const m=t[d];if(Zo(e.attrs,m.attrs,["LANGUAGE"]))return d}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Bc(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,o=this.getUrlWithDirectives(e.url,t),l=e.details,c=l?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${o}`),this.hls.trigger(ye.AUDIO_TRACK_LOADING,{url:o,id:n,groupId:i,deliveryDirectives:t||null,track:e})}}class v2{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(o){var n;if(i.onError(o),this.queues===null||this.tracks===null)return;const l=(n=this.tracks[e])==null?void 0:n.buffer;l!=null&&l.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],i=n?.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const j0=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,mS="HlsJsTrackRemovedError";class T2 extends Error{constructor(e){super(e),this.name=mS}}class S2 extends Pi{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:o}=this;n&&this.log("Media source opened"),!(!i||!o)&&(o.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(ye.MEDIA_ATTACHED,{media:i,mediaSource:o}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=GM($a(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ye.BUFFER_RESET,this.onBufferReset,this),e.on(ye.BUFFER_APPENDING,this.onBufferAppending,this),e.on(ye.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ye.BUFFER_EOS,this.onBufferEos,this),e.on(ye.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ye.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ye.FRAG_PARSED,this.onFragParsed,this),e.on(ye.FRAG_CHANGED,this.onFragChanged,this),e.on(ye.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ye.BUFFER_RESET,this.onBufferReset,this),e.off(ye.BUFFER_APPENDING,this.onBufferAppending,this),e.off(ye.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ye.BUFFER_EOS,this.onBufferEos,this),e.off(ye.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ye.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ye.FRAG_PARSED,this.onFragParsed,this),e.off(ye.FRAG_CHANGED,this.onFragChanged,this),e.off(ye.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const o=this.isUpdating();o||this.operationQueue.removeBlockers();const l=this.isQueued();(o||l)&&this.warn(`Transfering MediaSource with${l?" operations in queue":""}${o?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?pr(n,i.tracks):this.sourceBuffers.forEach(o=>{const[l]=o;l&&(n[l]=pr({},this.tracks[l]),this.removeBuffer(l)),o[0]=o[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const i=$a(this.appendSource);if(i){const o=!!t.mediaSource;(o||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const l=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(l),o)this._objectUrl=n.src,this.attachTransferred();else{const c=this._objectUrl=self.URL.createObjectURL(l);if(this.appendSource)try{n.removeAttribute("src");const u=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||u&&l instanceof u,q0(n),w2(n,c),n.load()}catch{n.src=c}else n.src=c}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,i=t.tracks,o=i?Object.keys(i):null,l=o?o.length:0,c=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&o&&l){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Er(n,(u,d)=>u==="initSegment"?void 0:d)};
transfer tracks: ${Er(i,(u,d)=>u==="initSegment"?void 0:d)}}`),!uT(i,n)){t.mediaSource=null,t.tracks=void 0;const u=e.currentTime,d=this.details,m=Math.max(u,d?.fragments[0].start||0);if(m-u>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${u} -> ${m}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${m} currentTime: ${u}`),this.onMediaDetaching(ye.MEDIA_DETACHING,{}),this.onMediaAttaching(ye.MEDIA_ATTACHING,t),e.currentTime=m;return}this.transferData=void 0,o.forEach(u=>{const d=u,m=i[d];if(m){const f=m.buffer;if(f){const h=this.fragmentTracker,g=m.id;if(h.hasFragments(g)||h.hasParts(g)){const S=qn.getBuffered(f);h.detectEvictedFragments(d,S,g,null,!0)}const p=Pd(d),E=[d,f];this.sourceBuffers[p]=E,f.updating&&this.operationQueue&&this.operationQueue.prependBlocker(d),this.trackSourceBuffer(d,m)}}}),c(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),c()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:o,_objectUrl:l}=this;if(o){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([c])=>{c&&this.removeBuffer(c)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const c=o.readyState==="open";try{const u=o.sourceBuffers;for(let d=u.length;d--;)c&&u[d].abort(),o.removeSourceBuffer(u[d]);c&&o.endOfStream()}catch(u){this.warn(`onMediaDetaching: ${u.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.removeEventListener("startstreaming",this._onStartStreaming),o.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(l&&self.URL.revokeObjectURL(l),this.mediaSrc===l?(i.removeAttribute("src"),this.appendSource&&q0(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(ye.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(o){this.warn(`onBufferReset ${e}`,o)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Pd(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new v2(this.tracks)}onBufferCodecs(e,t){var n;const i=this.tracks,o=Object.keys(t);this.log(`BUFFER_CODECS: "${o}" (current SB count ${this.sourceBufferCount})`);const l="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),c=!l&&this.sourceBufferCount&&this.media&&o.some(u=>!i[u]);if(l||c){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${o}" SourceBuffers`);return}o.forEach(u=>{var d,m;const f=t[u],{id:h,codec:g,levelCodec:p,container:E,metadata:S,supplemental:A}=f;let x=i[u];const k=(d=this.transferData)==null||(d=d.tracks)==null?void 0:d[u],U=k!=null&&k.buffer?k:x,Y=U?.pendingCodec||U?.codec,Q=U?.levelCodec;x||(x=i[u]={buffer:void 0,listeners:[],codec:g,supplemental:A,container:E,levelCodec:p,metadata:S,id:h});const L=sc(Y,Q),O=L?.replace(j0,"$1");let G=sc(g,p);const te=(m=G)==null?void 0:m.replace(j0,"$1");G&&L&&O!==te&&(u.slice(0,5)==="audio"&&(G=zc(G,this.appendSource)),this.log(`switching codec ${Y} to ${G}`),G!==(x.pendingCodec||x.codec)&&(x.pendingCodec=G),x.container=E,this.appendChangeType(u,E,G))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((n=t.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const i=`${t};codecs=${n}`,o={label:`change-type=${i}`,execute:()=>{const l=this.tracks[e];if(l){const c=l.buffer;c!=null&&c.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),c.changeType(i),l.codec=n,l.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn(`Failed to change ${e} SourceBuffer type`,l)}};this.append(o,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,i=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,xn.MAIN))==null?void 0:t.gap)===!0)return;const l={label:"block-audio",execute:()=>{var c;const u=this.tracks.video;(this.lastVideoAppendEnd>i||u!=null&&u.buffer&&qn.isBuffered(u.buffer,i)||((c=this.fragmentTracker.getAppendedFrag(i,xn.MAIN))==null?void 0:c.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:c=>{this.warn("Error executing block-audio operation",c)}};this.blockedAudioAppend={op:l,frag:e},this.append(l,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:i,type:o,parent:l,frag:c,part:u,chunkMeta:d,offset:m}=t,f=d.buffering[o],{sn:h,cc:g}=c,p=self.performance.now();f.start=p;const E=c.stats.buffering,S=u?u.stats.buffering:null;E.start===0&&(E.start=p),S&&S.start===0&&(S.start=p);const A=n.audio;let x=!1;o==="audio"&&A?.container==="audio/mpeg"&&(x=!this.lastMpegAudioChunk||d.id===1||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const k=n.video,U=k?.buffer;if(U&&h!=="initSegment"){const L=u||c,O=this.blockedAudioAppend;if(o==="audio"&&l!=="main"&&!this.blockedAudioAppend&&!(k.ending||k.ended)){const te=L.start+L.duration*.05,ge=U.buffered,Me=this.currentOp("video");!ge.length&&!Me?this.blockAudio(L):!Me&&!qn.isBuffered(U,te)&&this.lastVideoAppendEnd<te&&this.blockAudio(L)}else if(o==="video"){const G=L.end;if(O){const te=O.frag.start;(G>te||G<this.lastVideoAppendEnd||qn.isBuffered(U,te))&&this.unblockAudio()}this.lastVideoAppendEnd=G}}const Y=(u||c).start,Q={label:`append-${o}`,execute:()=>{var L;f.executeStart=self.performance.now();const O=(L=this.tracks[o])==null?void 0:L.buffer;O&&(x?this.updateTimestampOffset(O,Y,.1,o,h,g):m!==void 0&&yn(m)&&this.updateTimestampOffset(O,m,1e-6,o,h,g)),this.appendExecutor(i,o)},onStart:()=>{},onComplete:()=>{const L=self.performance.now();f.executeEnd=f.end=L,E.first===0&&(E.first=L),S&&S.first===0&&(S.first=L);const O={};this.sourceBuffers.forEach(([G,te])=>{G&&(O[G]=qn.getBuffered(te))}),this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(ye.BUFFER_APPENDED,{type:o,frag:c,part:u,chunkMeta:d,parent:c.type,timeRanges:O})},onError:L=>{var O;const G={type:Nn.MEDIA_ERROR,parent:c.type,details:vt.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:c,part:u,chunkMeta:d,error:L,err:L,fatal:!1},te=(O=this.media)==null?void 0:O.error;if(L.code===DOMException.QUOTA_EXCEEDED_ERR||L.name=="QuotaExceededError"||"quota"in L)G.details=vt.BUFFER_FULL_ERROR;else if(L.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!te)G.errorAction=Ys(!0);else if(L.name===mS&&this.sourceBufferCount===0)G.errorAction=Ys(!0);else{const ge=++this.appendErrors[o];this.warn(`Failed ${ge}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer (${te||"no media error"})`),(ge>=this.hls.config.appendErrorMaxRetry||te)&&(G.fatal=!0)}this.hls.trigger(ye.ERROR,G)}};this.log(`queuing "${o}" append sn: ${h}${u?" p: "+u.index:""} of ${c.type===xn.MAIN?"level":"track"} ${c.level} cc: ${g}`),this.append(Q,o,this.isPending(this.tracks[o]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(ye.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:n,startOffset:i,endOffset:o}=t;n?this.append(this.getFlushOp(n,i,o),n):this.sourceBuffers.forEach(([l])=>{l&&this.append(this.getFlushOp(l,i,o),l)})}onFragParsed(e,t){const{frag:n,part:i}=t,o=[],l=i?i.elementaryStreams:n.elementaryStreams;l[br.AUDIOVIDEO]?o.push("audiovideo"):(l[br.AUDIO]&&o.push("audio"),l[br.VIDEO]&&o.push("video"));const c=()=>{const u=self.performance.now();n.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const d=i?i.stats:n.stats;this.hls.trigger(ye.FRAG_BUFFERED,{frag:n,part:i,stats:d,id:n.type})};o.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(c,o).catch(u=>{this.warn(`Fragment buffered callback ${u}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([l])=>{if(l){const c=this.tracks[l];(!t.type||t.type===l)&&(c.ending=!0,c.ended||(c.ended=!0,this.log(`${l} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([l])=>{var c;return l&&!((c=this.tracks[l])!=null&&c.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:l}=this;if(!l||l.readyState!=="open"){l&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${l.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),l.endOfStream(),this.hls.trigger(ye.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(ye.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===vt.BUFFER_APPEND_ERROR&&t.frag){var n;const i=(n=t.errorAction)==null?void 0:n.nextAutoLevel;yn(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const i=e.config,o=n.currentTime,l=t.levelTargetDuration,c=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(yn(c)&&c>=0){const d=Math.max(c,l),m=Math.floor(o/l)*l-d;this.flushBackBuffer(o,l,m)}const u=i.frontBufferFlushThreshold;if(yn(u)&&u>0){const d=Math.max(i.maxBufferLength,u),m=Math.max(d,l),f=Math.floor(o/l)*l+m;this.flushFrontBuffer(o,l,f)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([i,o])=>{if(o){const c=qn.getBuffered(o);if(c.length>0&&n>c.start(0)){var l;this.hls.trigger(ye.BACK_BUFFER_REACHED,{bufferEnd:n});const u=this.tracks[i];if((l=this.details)!=null&&l.live)this.hls.trigger(ye.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(u!=null&&u.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(ye.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([i,o])=>{if(o){const l=qn.getBuffered(o),c=l.length;if(c<2)return;const u=l.start(c-1),d=l.end(c-1);if(n>u||e>=u&&e<=d)return;this.hls.trigger(ye.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||n?.readyState!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const d=Math.max(0,t.fragmentStart),m=Math.max(d,i);return{duration:1/0,start:d,end:m}}return{duration:1/0}}const o=(e=this.overrides)==null?void 0:e.duration;if(o)return yn(o)?{duration:o}:null;const l=this.media.duration,c=yn(n.duration)?n.duration:0;return i>c&&i>l||!yn(l)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(yn(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${n}.`),i.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Er(n)}`),this.tracksReady){var i;const o=(i=this.transferData)==null?void 0:i.tracks;o&&Object.keys(o).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const i=this.tracks[t];e[t]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(ye.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const o in e){const l=o,c=e[l];if(this.isPending(c)){const u=this.getTrackCodec(c,l),d=`${c.container};codecs=${u}`;c.codec=u,this.log(`creating sourceBuffer(${d})${this.currentOp(l)?" Queued":""} ${Er(c)}`);try{const m=n.addSourceBuffer(d),f=Pd(l),h=[l,m];t[f]=h,c.buffer=m}catch(m){var i;this.error(`error while trying to add sourceBuffer: ${m.message}`),this.shiftAndExecuteNext(l),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[l],this.hls.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:m,sourceBufferName:l,mimeType:d,parent:c.id});return}this.trackSourceBuffer(l,c)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let i=e.codec;n&&(t==="video"||t==="audiovideo")&&Vo(n,"video")&&(i=fO(i,n));const o=sc(i,e.levelCodec);return o?t.slice(0,5)==="audio"?zc(o,this.appendSource):o:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(o,l)=>{const c=l.removedRanges;c!=null&&c.length&&this.hls.trigger(ye.BUFFER_FLUSHED,{type:o})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const o=this.currentOp(e);o&&o.onError(i)}updateTimestampOffset(e,t,n,i,o,l){const c=t-e.timestampOffset;Math.abs(c)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${t} (sn: ${o} cc: ${l})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:i,mediaSource:o}=this,l=this.tracks[e],c=l?.buffer;if(!i||!o||!c){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const u=yn(i.duration)?i.duration:1/0,d=yn(o.duration)?o.duration:1/0,m=Math.max(0,t),f=Math.min(n,u,d);f>m&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${m},${f}] from the ${e} SourceBuffer`),c.remove(m,f)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],i=n?.buffer;if(!i)throw new T2(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=t.map(l=>this.appendBlocker(l));return t.length>1&&this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(l=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const i=(n=this.tracks[t])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const i=this.tracks[e];if(!i)return;const o=i.buffer;if(!o)return;const l=n.bind(this,e);i.listeners.push({event:t,listener:l}),o.addEventListener(t,l)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function q0(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function w2(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}function Pd(r){return r==="audio"?1:0}class wm{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(ye.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ye.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ye.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(ye.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ye.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ye.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&yn(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,o)=>this.isLevelAllowed(i)&&o<=e);return this.clientRect=null,wm.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(c,u)=>u?c.width!==u.width||c.height!==u.height:!0;let o=e.length-1;const l=Math.max(t,n);for(let c=0;c<e.length;c+=1){const u=e[c];if((u.width>=l||u.height>=l)&&i(u,e[c+1])){o=c;break}}return o}}const _2={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},ni=_2,x2={HLS:"h"},I2=x2;class sa{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof sa?n:new sa(n))),this.value=e,this.params=t}}const A2="Dict";function R2(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function C2(r,e,t,n){return new Error(`failed to ${r} "${R2(e)}" as ${t}`,{cause:n})}function oa(r,e,t){return C2("serialize",r,e,t)}class gS{constructor(e){this.description=e}}const G0="Bare Item",k2="Boolean";function L2(r){if(typeof r!="boolean")throw oa(r,k2);return r?"?1":"?0"}function N2(r){return btoa(String.fromCharCode(...r))}const D2="Byte Sequence";function P2(r){if(ArrayBuffer.isView(r)===!1)throw oa(r,D2);return`:${N2(r)}:`}const M2="Integer";function O2(r){return r<-999999999999999||999999999999999<r}function pS(r){if(O2(r))throw oa(r,M2);return r.toString()}function F2(r){return`@${pS(r.getTime()/1e3)}`}function yS(r,e){if(r<0)return-yS(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const i=Math.floor(r*t);return(i%2===0?i:i+1)/t}else return Math.round(r*t)/t}const z2="Decimal";function U2(r){const e=yS(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw oa(r,z2);const t=e.toString();return t.includes(".")?t:`${t}.0`}const B2="String",$2=/[\x00-\x1f\x7f]+/;function j2(r){if($2.test(r))throw oa(r,B2);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function q2(r){return r.description||r.toString().slice(7,-1)}const G2="Token";function H0(r){const e=q2(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw oa(e,G2);return e}function vh(r){switch(typeof r){case"number":if(!yn(r))throw oa(r,G0);return Number.isInteger(r)?pS(r):U2(r);case"string":return j2(r);case"symbol":return H0(r);case"boolean":return L2(r);case"object":if(r instanceof Date)return F2(r);if(r instanceof Uint8Array)return P2(r);if(r instanceof gS)return H0(r);default:throw oa(r,G0)}}const H2="Key";function Th(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw oa(r,H2);return r}function _m(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${Th(e)}`:`;${Th(e)}=${vh(t)}`).join("")}function bS(r){return r instanceof sa?`${vh(r.value)}${_m(r.params)}`:vh(r)}function V2(r){return`(${r.value.map(bS).join(" ")})${_m(r.params)}`}function K2(r,e={whitespace:!0}){if(typeof r!="object"||r==null)throw oa(r,A2);const t=r instanceof Map?r.entries():Object.entries(r),n=e?.whitespace?" ":"";return Array.from(t).map(([i,o])=>{o instanceof sa||(o=new sa(o));let l=Th(i);return o.value===!0?l+=_m(o.params):(l+="=",Array.isArray(o.value)?l+=V2(o):l+=bS(o)),l}).join(`,${n}`)}function ES(r,e){return K2(r,e)}const ea="CMCD-Object",Ir="CMCD-Request",Za="CMCD-Session",Na="CMCD-Status",Y2={br:ea,ab:ea,d:ea,ot:ea,tb:ea,tpb:ea,lb:ea,tab:ea,lab:ea,url:ea,pb:Ir,bl:Ir,tbl:Ir,dl:Ir,ltc:Ir,mtp:Ir,nor:Ir,nrr:Ir,rc:Ir,sn:Ir,sta:Ir,su:Ir,ttfb:Ir,ttfbb:Ir,ttlb:Ir,cmsdd:Ir,cmsds:Ir,smrt:Ir,df:Ir,cs:Ir,ts:Ir,cid:Za,pr:Za,sf:Za,sid:Za,st:Za,v:Za,msd:Za,bs:Na,bsd:Na,cdn:Na,rtp:Na,bg:Na,pt:Na,ec:Na,e:Na},W2={REQUEST:Ir};function X2(r){return Object.keys(r).reduce((e,t)=>{var n;return(n=r[t])===null||n===void 0||n.forEach(i=>e[i]=t),e},{})}function Q2(r,e){const t={};if(!r)return t;const n=Object.keys(r),i=e?X2(e):{};return n.reduce((o,l)=>{var c;const u=Y2[l]||i[l]||W2.REQUEST,d=(c=o[u])!==null&&c!==void 0?c:o[u]={};return d[l]=r[l],o},t)}function Z2(r){return["ot","sf","st","e","sta"].includes(r)}function J2(r){return typeof r=="number"?yn(r):r!=null&&r!==""&&r!==!1}const vS="event";function ez(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const i=t.pathname.split("/").slice(1),o=n.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")+t.search+t.hash}const dc=r=>Math.round(r),Sh=(r,e)=>Array.isArray(r)?r.map(t=>Sh(t,e)):r instanceof sa&&typeof r.value=="string"?new sa(Sh(r.value,e),r.params):(e.baseUrl&&(r=ez(r,e.baseUrl)),e.version===1?encodeURIComponent(r):r),Yl=r=>dc(r/100)*100,tz=(r,e)=>{let t=r;return e.version>=2&&(r instanceof sa&&typeof r.value=="string"?t=new sa([r]):typeof r=="string"&&(t=[r])),Sh(t,e)},nz={br:dc,d:dc,bl:Yl,dl:Yl,mtp:Yl,nor:tz,rtp:Yl,tb:dc},TS="request",SS="response",xm=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],rz=["e"],iz=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function su(r){return iz.test(r)}function az(r){return xm.includes(r)||rz.includes(r)||su(r)}const wS=["d","dl","nor","ot","rtp","su"];function sz(r){return xm.includes(r)||wS.includes(r)||su(r)}const oz=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function lz(r){return xm.includes(r)||wS.includes(r)||oz.includes(r)||su(r)}const cz=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function uz(r){return cz.includes(r)||su(r)}const dz={[SS]:lz,[vS]:az,[TS]:sz};function _S(r,e={}){const t={};if(r==null||typeof r!="object")return t;const n=e.version||r.v||1,i=e.reportingMode||TS,o=n===1?uz:dz[i];let l=Object.keys(r).filter(o);const c=e.filter;typeof c=="function"&&(l=l.filter(c));const u=i===SS||i===vS;u&&!l.includes("ts")&&l.push("ts"),n>1&&!l.includes("v")&&l.push("v");const d=pr({},nz,e.formatters),m={version:n,reportingMode:i,baseUrl:e.baseUrl};return l.sort().forEach(f=>{let h=r[f];const g=d[f];if(typeof g=="function"&&(h=g(h,m)),f==="v"){if(n===1)return;h=n}f=="pr"&&h===1||(u&&f==="ts"&&!yn(h)&&(h=Date.now()),J2(h)&&(Z2(f)&&typeof h=="string"&&(h=new gS(h)),t[f]=h))}),t}function fz(r,e={}){const t={};if(!r)return t;const n=_S(r,e),i=Q2(n,e?.customHeaderMap);return Object.entries(i).reduce((o,[l,c])=>{const u=ES(c,{whitespace:!1});return u&&(o[l]=u),o},t)}function hz(r,e,t){return pr(r,fz(e,t))}const mz="CMCD";function gz(r,e={}){return r?ES(_S(r,e),{whitespace:!1}):""}function pz(r,e={}){if(!r)return"";const t=gz(r,e);return encodeURIComponent(t)}function yz(r,e={}){if(!r)return"";const t=pz(r,e);return`${mz}=${t}`}const V0=/CMCD=[^&#]+/;function bz(r,e,t){const n=yz(e,t);if(!n)return r;if(V0.test(r))return r.replace(V0,n);const i=r.includes("?")?"&":"?";return`${r}${i}${n}`}class Ez{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:ni.MANIFEST,su:!this.initialized})}catch(o){this.hls.logger.warn("Could not generate manifest CMCD data.",o)}},this.applyFragmentData=i=>{try{const{frag:o,part:l}=i,c=this.hls.levels[o.level],u=this.getObjectType(o),d={d:(l||o).duration*1e3,ot:u};(u===ni.VIDEO||u===ni.AUDIO||u==ni.MUXED)&&(d.br=c.bitrate/1e3,d.tb=this.getTopBandwidth(u)/1e3,d.bl=this.getBufferLength(u));const m=l?this.getNextPart(l):this.getNextFrag(o);m!=null&&m.url&&m.url!==o.url&&(d.nor=m.url),this.apply(i,d)}catch(o){this.hls.logger.warn("Could not generate segment CMCD data.",o)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ye.MEDIA_DETACHED,this.onMediaDetached,this),e.on(ye.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ye.MEDIA_DETACHED,this.onMediaDetached,this),e.off(ye.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:I2.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){pr(t,this.createData());const n=t.ot===ni.INIT||t.ot===ni.VIDEO||t.ot===ni.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((l,c)=>(i.includes(c)&&(l[c]=t[c]),l),{}));const o={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),hz(e.headers,t,o)):e.url=bz(e.url,t,o)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var t;const{index:n,fragment:i}=e,o=(t=this.hls.levels[i.level])==null||(t=t.details)==null?void 0:t.partList;if(o){const{sn:l}=i;for(let c=o.length-1;c>=0;c--){const u=o[c];if(u.index===n&&u.fragment.sn===l)return o[c+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return ni.TIMED_TEXT;if(e.sn==="initSegment")return ni.INIT;if(t==="audio")return ni.AUDIO;if(t==="main")return this.hls.audioTracks.length?ni.VIDEO:ni.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===ni.AUDIO)n=i.audioTracks;else{const o=i.maxAutoLevel,l=o>-1?o+1:i.levels.length;n=i.levels.slice(0,l)}return n.forEach(o=>{o.bitrate>t&&(t=o.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===ni.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:qn.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new n(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,l,c){t(o),this.loader.load(o,l,c)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new n(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,l,c){t(o),this.loader.load(o,l,c)}}}}const vz=3e5;class Tz extends Pi{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ye.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ye.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(n?.action===jr.SendAlternateToPenaltyBox&&n.flags===di.MoveAllAlternatesMatchingHost){const i=this.levels;let o=this._pathwayPriority,l=this.pathwayId;if(t.context){const{groupId:c,pathwayId:u,type:d}=t.context;c&&i?l=this.getPathwayForGroupId(c,d,l):u&&(l=u)}l in this.penalizedPathways||(this.penalizedPathways[l]=performance.now()),!o&&i&&(o=this.pathways()),o&&o.length>1&&(this.updatePathwayPriority(o),n.resolved=this.pathwayId!==l),t.details===vt.BUFFER_APPEND_ERROR&&!t.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${l} levels: ${i&&i.length} priorities: ${Er(o)} penalized: ${Er(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(o=>{i-n[o]>vz&&delete n[o]});for(let o=0;o<e.length;o++){const l=e[o];if(l in n)continue;if(l===this.pathwayId)return;const c=this.hls.nextLoadLevel,u=this.hls.levels[c];if(t=this.getLevelsForPathway(l),t.length>0){this.log(`Setting Pathway to "${l}"`),this.pathwayId=l,GT(t),this.hls.trigger(ye.LEVELS_UPDATED,{levels:t});const d=this.hls.levels[c];u&&d&&this.levels&&(d.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&d.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${d.bitrate}`),this.hls.nextLoadLevel=c);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let o=0;o<i.length;o++)if(t===Qn.AUDIO_TRACK&&i[o].hasAudioGroup(e)||t===Qn.SUBTITLE_TRACK&&i[o].hasSubtitleGroup(e))return i[o].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(o=>{const{ID:l,"BASE-ID":c,"URI-REPLACEMENT":u}=o;if(t.some(m=>m.pathwayId===l))return;const d=this.getLevelsForPathway(c).map(m=>{const f=new wr(m.attrs);f["PATHWAY-ID"]=l;const h=f.AUDIO&&`${f.AUDIO}_clone_${l}`,g=f.SUBTITLES&&`${f.SUBTITLES}_clone_${l}`;h&&(n[f.AUDIO]=h,f.AUDIO=h),g&&(i[f.SUBTITLES]=g,f.SUBTITLES=g);const p=xS(m.uri,f["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),E=new Yo({attrs:f,audioCodec:m.audioCodec,bitrate:m.bitrate,height:m.height,name:m.name,url:p,videoCodec:m.videoCodec,width:m.width});if(m.audioGroups)for(let S=1;S<m.audioGroups.length;S++)E.addGroupId("audio",`${m.audioGroups[S]}_clone_${l}`);if(m.subtitleGroups)for(let S=1;S<m.subtitleGroups.length;S++)E.addGroupId("text",`${m.subtitleGroups[S]}_clone_${l}`);return E});t.push(...d),K0(this.audioTracks,n,u,l),K0(this.subtitleTracks,i,u,l)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const m=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+m)}const o={responseType:"json",url:i.href},l=t.steeringManifestLoadPolicy.default,c=l.errorRetry||l.timeoutRetry||{},u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},d={onSuccess:(m,f,h,g)=>{this.log(`Loaded steering manifest: "${i}"`);const p=m.data;if(p?.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":E,"PATHWAY-CLONES":S,"PATHWAY-PRIORITY":A}=p;if(E)try{this.uri=new self.URL(E,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${E}`);return}this.scheduleRefresh(this.uri||h.url),S&&this.clonePathways(S);const x={steeringManifest:p,url:i.toString()};this.hls.trigger(ye.STEERING_MANIFEST_LOADED,x),A&&this.updatePathwayPriority(A)},onError:(m,f,h,g)=>{if(this.log(`Error loading steering manifest: ${m.code} ${m.text} (${f.url})`),this.stopLoad(),m.code===410){this.enabled=!1,this.log(`Steering manifest ${f.url} no longer available`);return}let p=this.timeToLoad*1e3;if(m.code===429){const E=this.loader;if(typeof E?.getResponseHeader=="function"){const S=E.getResponseHeader("Retry-After");S&&(p=parseFloat(S)*1e3)}this.log(`Steering manifest ${f.url} rate limited`);return}this.scheduleRefresh(this.uri||f.url,p)},onTimeout:(m,f,h)=>{this.log(`Timeout loading steering manifest (${f.url})`),this.scheduleRefresh(this.uri||f.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(o,u,d)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function K0(r,e,t,n){r&&Object.keys(e).forEach(i=>{const o=r.filter(l=>l.groupId===i).map(l=>{const c=pr({},l);return c.details=void 0,c.attrs=new wr(c.attrs),c.url=c.attrs.URI=xS(l.url,l.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),c.groupId=c.attrs["GROUP-ID"]=e[i],c.attrs["PATHWAY-ID"]=n,c});r.push(...o)})}function xS(r,e,t,n){const{HOST:i,PARAMS:o,[t]:l}=n;let c;e&&(c=l?.[e],c&&(r=c));const u=new self.URL(r);return i&&!c&&(u.host=i),o&&Object.keys(o).sort().forEach(d=>{d&&u.searchParams.set(d,o[d])}),u.href}class Xs extends Pi{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Xs.CDMCleanupPromise?[Xs.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:n,initData:i}=t,o=`"${t.type}" event: init data type: "${n}"`;if(this.debug(o),i!==null){if(!this.keyFormatPromise){let l=Object.keys(this.keySystemAccessPromises);l.length||(l=Ro(this.config));const c=l.map(Id).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(c)}this.keyFormatPromise.then(l=>{const c=lc(l);if(n!=="sinf"||c!==_r.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${n}" for selected key-system ${c}`);return}let u;try{const g=Mr(new Uint8Array(i)),p=hm(JSON.parse(g).sinf),E=ET(p);if(!E)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=new Uint8Array(E.subarray(8,24))}catch(g){this.warn(`${o} Failed to parse sinf: ${g}`);return}const d=qr(u),{keyIdToKeySessionPromise:m,mediaKeySessions:f}=this;let h=m[d];for(let g=0;g<f.length;g++){const p=f[g],E=p.decryptdata;if(!E.keyId)continue;const S=qr(E.keyId);if(qc(u,E.keyId)||E.uri.replace(/-/g,"").indexOf(d)!==-1){if(h=m[S],!h)continue;if(E.pssh)break;delete m[S],E.pssh=new Uint8Array(i),E.keyId=u,h=m[d]=h.then(()=>this.generateRequestWithPreferredKeySession(p,n,i,"encrypted-event-key-match")),h.catch(A=>this.handleError(A));break}}h||this.handleError(new Error(`Key ID ${d} not encountered in playlist. Key-system sessions ${f.length}.`))}).catch(l=>this.handleError(l))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(ye.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ye.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ye.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(ye.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(ye.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ye.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(ye.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(ye.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t?.[e];if(i)return i.licenseUrl;if(e===_r.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(l,c,u)=>!!l&&u.indexOf(l)===c,i=t.map(l=>l.audioCodec).filter(n),o=t.map(l=>l.videoCodec).filter(n);return i.length+o.length===0&&o.push("avc1.42e01e"),new Promise((l,c)=>{const u=d=>{const m=d.shift();this.getMediaKeysPromise(m,i,o).then(f=>l({keySystem:m,mediaKeys:f})).catch(f=>{d.length?u(d):f instanceof ui?c(f):c(new ui({type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_NO_ACCESS,error:f,fatal:!0},f.message))})};u(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return OT===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){var i;const o=tF(e,t,n,this.config.drmSystemOptions||{});let l=this.keySystemAccessPromises[e],c=(i=l)==null?void 0:i.keySystemAccess;if(!c){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Er(o)}`),c=this.requestMediaKeySystemAccess(e,o);const u=l=this.keySystemAccessPromises[e]={keySystemAccess:c};return c.catch(d=>{this.log(`Failed to obtain access to key-system "${e}": ${d}`)}),c.then(d=>{this.log(`Access for key-system "${d.keySystem}" obtained`);const m=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const f=u.mediaKeys=d.createMediaKeys().then(h=>(this.log(`Media-keys created for "${e}"`),u.hasMediaKeys=!0,m.then(g=>g?this.setMediaKeysServerCertificate(h,e,g):h)));return f.catch(h=>{this.error(`Failed to create media-keys for "${e}"}: ${h}`)}),f})}return c.then(()=>l.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${qr(e.keyId||[])} keyUri: ${e.uri}`);const i=n.createSession(),o={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=Wl(t),o="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,o,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${qr(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Id(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:n})=>this.attemptSetMediaKeys(t,n))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const o=Id(i);o?t(o):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=Ro(this.config),n=e.map(lc).filter(i=>!!i&&t.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const i=Sz(e,t[n]);if(i)return i}}loadKey(e){const t=e.keyInfo.decryptdata,n=Wl(t),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(t)==="internal-error"){const c=Y0(i||"internal-error",t);return this.handleError(c,e.frag),Promise.reject(c)}const o=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${o}`);const l=this.keyIdToKeySessionPromise[n];if(!l){const c=this.getKeySystemForKeyPromise(t).then(({keySystem:u,mediaKeys:d})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${o}`),this.attemptSetMediaKeys(u,d).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:u,mediaKeys:d,decryptdata:t}))))).then(u=>{const d="cenc",m=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(u,d,m,"playlist-key")});return c.catch(u=>this.handleError(u,e.frag)),this.keyIdToKeySessionPromise[n]=c,c}return l.catch(c=>{if(c instanceof ui){const u=fr({},c.data);this.getKeyStatus(t)==="internal-error"&&(u.decryptdata=t);const d=new ui(u,c.message);this.handleError(d,e.frag)}}),l}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof ui){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${qr(n.keyId||[])})`:""}`),this.hls.trigger(ye.ERROR,e.data)}else this.error(e.message),this.hls.trigger(ye.ERROR,{type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Wl(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=lc(e.keyFormat),o=i?[i]:Ro(this.config);return this.attemptKeySystemAccess(o)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Ro(this.config)),e.length===0)throw new ui({type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Er({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(t):new Promise((o,l)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return l(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(o).catch(l)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(o=>n.indexOf(o)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var o;const l=(o=this.config.drmSystems)==null||(o=o[e.keySystem])==null?void 0:o.generateRequest;if(l)try{const p=l.call(this.hls,t,n,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");t=p.initDataType,n=p.initData?p.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(p){if(this.warn(p.message),this.hls&&this.hls.config.debug)throw p}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const c=Wl(e.decryptdata),u=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${c} URI: ${u} (init data type: ${t} length: ${n.byteLength})`);const d=new gm,m=e._onmessage=p=>{const E=e.mediaKeysSession;if(!E){d.emit("error",new Error("invalid state"));return}const{messageType:S,message:A}=p;this.log(`"${S}" message event for session "${E.sessionId}" message size: ${A.byteLength}`),S==="license-request"||S==="license-renewal"?this.renewLicense(e,A).catch(x=>{d.eventNames().length?d.emit("error",x):this.handleError(x)}):S==="license-release"?e.keySystem===_r.FAIRPLAY&&this.updateKeySession(e,mh("acknowledged")).then(()=>this.removeSession(e)).catch(x=>this.handleError(x)):this.warn(`unhandled media key message type "${S}"`)},f=(p,E)=>{E.keyStatus=p;let S;p.startsWith("usable")?d.emit("resolved"):p==="internal-error"||p==="output-restricted"||p==="output-downscaled"?S=Y0(p,E.decryptdata):p==="expired"?S=new Error(`key expired (keyId: ${c})`):p==="released"?S=new Error("key released"):p==="status-pending"||this.warn(`unhandled key status change "${p}" (keyId: ${c})`),S&&(d.eventNames().length?d.emit("error",S):this.handleError(S))},h=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}const S=this.getKeyStatuses(e);if(!Object.keys(S).some(U=>S[U]!=="status-pending"))return;if(S[c]==="expired"){this.log(`Expired key ${Er(S)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let x=S[c];if(x)f(x,e);else{var k;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(k=e.keyStatusTimeouts)[c]||(k[c]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const Y=this.getKeyStatus(e.decryptdata);if(Y&&Y!=="status-pending")return this.log(`No status for keyId ${c} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${Y} from other session.`),f(Y,e);this.log(`key status for ${c} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),x="internal-error",f(x,e)},1e3)),this.log(`No status for keyId ${c} (${Er(S)}).`)}};Wr(e.mediaKeysSession,"message",m),Wr(e.mediaKeysSession,"keystatuseschange",h);const g=new Promise((p,E)=>{d.on("error",E),d.on("resolved",p)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${c} URI: ${u}`)}).catch(p=>{throw new ui({type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_NO_SESSION,error:p,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>g).catch(p=>(d.removeAllListeners(),this.removeSession(e).then(()=>{throw p}))).then(()=>(d.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const c=i;i=n,n=c}const o="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===_r.PLAYREADY&&o.length===16){const c=qr(o);t[c]=n,PT(o)}const l=qr(o);n==="internal-error"&&(this.bannedKeyIds[l]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${l} key-session "${e.mediaKeysSession.sessionId}"`),t[l]=n}),t}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),o=this.getServerCertificateUrl(e);return o?(this.log(`Fetching server certificate for "${e}"`),new Promise((l,c)=>{const u={responseType:"arraybuffer",url:o},d=t.certLoadPolicy.default,m={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,g,p,E)=>{l(h.data)},onError:(h,g,p,E)=>{c(new ui({type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:fr({url:u.url,data:void 0},h)},`"${e}" certificate request failed (${o}). Status: ${h.code} (${h.text})`))},onTimeout:(h,g,p)=>{c(new ui({type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${o})`))},onAbort:(h,g,p)=>{c(new Error("aborted"))}};i.load(u,m,f)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,o)=>{e.setServerCertificate(n).then(l=>{this.log(`setServerCertificate ${l?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),i(e)}).catch(l=>{o(new ui({type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new ui({type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),o=i.querySelectorAll("HttpHeader");if(o.length>0){let m;for(let f=0,h=o.length;f<h;f++){var l,c;m=o[f];const g=(l=m.querySelector("name"))==null?void 0:l.textContent,p=(c=m.querySelector("value"))==null?void 0:c.textContent;g&&p&&e.setRequestHeader(g,p)}}const u=i.querySelector("Challenge"),d=u?.textContent;if(!d)throw new Error("Cannot find <Challenge> in key message");return mh(atob(d))}setupLicenseXHR(e,t,n,i){const o=this.config.licenseXhrSetup;return o?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return o.call(this.hls,e,t,n,i)}).catch(l=>{if(!n.decryptdata)throw l;return e.open("POST",t,!0),o.call(this.hls,e,t,n,i)}).then(l=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:l||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,o)=>{const l=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${l}`);const c=new XMLHttpRequest;c.responseType="arraybuffer",c.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return o(new Error("invalid state"));if(c.readyState===4)if(c.status===200){this._requestLicenseFailureCount=0;let u=c.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const d=this.config.licenseResponseCallback;if(d)try{u=d.call(this.hls,c,l,e)}catch(m){this.error(m)}i(u)}else{const u=n.errorRetry,d=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>d||c.status>=400&&c.status<500)o(new ui({type:Nn.KEY_SYSTEM_ERROR,details:vt.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:c,response:{url:l,data:void 0,code:c.status,text:c.statusText}},`License Request XHR failed (${l}). Status: ${c.status} (${c.statusText})`));else{const m=d-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${m} attempts left`),this.requestLicense(e,t).then(i,o)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=c,this.setupLicenseXHR(c,l,e,t).then(({xhr:u,licenseChallenge:d})=>{e.keySystem==_r.PLAYREADY&&(d=this.unpackPlayReadyKeyMessage(u,d)),u.send(d)}).catch(o)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,Wr(n,"encrypted",this.onMediaEncrypted),Wr(n,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(ii(e,"encrypted",this.onMediaEncrypted),ii(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Ua.clearKeyUriToKeyIdMap();const o=i.length;Xs.CDMCleanupPromise=Promise.all(i.map(l=>this.removeSession(l)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(l=>{this.log(`Could not clear media keys: ${l}`),this.hls&&this.hls.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${l}`)})}))||Promise.resolve())).catch(l=>{this.log(`Could not close sessions and clear media keys: ${l}`),this.hls&&this.hls.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${l}`)})}).then(()=>{o&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,o)=>(i.indexOf(o.keyFormat)===-1&&i.push(o.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:i}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${qr(i?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const o=this.mediaKeySessions.indexOf(e);o>-1&&this.mediaKeySessions.splice(o,1);const{keyStatusTimeouts:l}=e;l&&Object.keys(l).forEach(d=>self.clearTimeout(l[d]));const{drmSystemOptions:c}=this.config;return(rF(c)?new Promise((d,m)=>{self.setTimeout(()=>m(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(d).catch(m)}):Promise.resolve()).catch(d=>{this.log(`Could not remove session: ${d}`),this.hls&&this.hls.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${d}`)})}).then(()=>t.close()).catch(d=>{this.log(`Could not close session: ${d}`),this.hls&&this.hls.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${d}`)})})}return Promise.resolve()}}Xs.CDMCleanupPromise=void 0;function Wl(r){if(!r)throw new Error("Could not read keyId of undefined decryptdata");if(r.keyId===null)throw new Error("keyId is null");return qr(r.keyId)}function Sz(r,e){if(r.keyId&&e.mediaKeysSession.keyStatuses.has(r.keyId))return e.mediaKeysSession.keyStatuses.get(r.keyId);if(r.matches(e.decryptdata))return e.keyStatus}class ui extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function Y0(r,e){const t=r==="output-restricted",n=t?vt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:vt.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new ui({type:Nn.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${r}"`)}class wz{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const o=i-this.lastTime,l=n-this.lastDroppedFrames,c=t-this.lastDecodedFrames,u=1e3*l/o,d=this.hls;if(d.trigger(ye.FPS_DROP,{currentDropped:l,currentDecoded:c,totalDroppedFrames:n}),u>0&&l>d.config.fpsDroppedMonitoringThreshold*c){let m=d.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+m),m>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=m)&&(m=m-1,d.trigger(ye.FPS_DROP_LEVEL_CAPPING,{level:m,droppedLevel:d.currentLevel}),d.autoLevelCapping=m,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function IS(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function AS(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){hr.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}catch(i){hr.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(r.mode=t)}function Gs(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues)for(let n=r.cues.length;n--;)e&&r.cues[n].removeEventListener("enter",e),r.removeCue(r.cues[n]);t==="disabled"&&(r.mode=t)}function wh(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const o=xz(r.cues,e,t);for(let l=0;l<o.length;l++)(!n||n(o[l]))&&r.removeCue(o[l])}i==="disabled"&&(r.mode=i)}function _z(r,e){if(e<=r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t,o;for(;n<=i;)if(o=Math.floor((i+n)/2),e<r[o].startTime)i=o-1;else if(e>r[o].startTime&&n<t)n=o+1;else return o;return r[n].startTime-e<e-r[i].startTime?n:i}function xz(r,e,t){const n=[],i=_z(r,e);if(i>-1)for(let o=i,l=r.length;o<l;o++){const c=r[o];if(c.startTime>=e&&c.endTime<=t)n.push(c);else if(c.startTime>t)return n}return n}function fc(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}class Iz extends Sm{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=fc(this.media.textTracks);for(let o=0;o<n.length;o++)if(n[o].mode==="hidden")t=n[o];else if(n[o].mode==="showing"){t=n[o];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ye.LEVEL_LOADING,this.onLevelLoading,this),e.on(ye.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ye.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ye.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ye.LEVEL_LOADING,this.onLevelLoading,this),e.off(ye.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ye.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ye.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;fc(n.textTracks).forEach(l=>{Gs(l)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:o}=t,l=this.tracksInGroup[n];if(!l||l.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${l?.groupId}`);return}const c=l.details;l.details=t.details,this.log(`Subtitle track ${n} "${l.name}" lang:${l.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let o=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(l=>i?.indexOf(l)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(m=>!n||n.indexOf(m.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(m=>m.default)&&(this.selectDefaultTrack=!1),l.forEach((m,f)=>{m.id=f});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const c=this.hls.config.subtitlePreference;if(!o&&c){this.selectDefaultTrack=!1;const m=ia(c,l);if(m>-1)o=l[m];else{const f=ia(c,this.tracks);o=this.tracks[f]}}let u=this.findTrackId(o);u===-1&&o&&(u=this.findTrackId(null));const d={subtitleTracks:l};this.log(`Updating subtitle tracks, ${l.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(ye.SUBTITLE_TRACKS_UPDATED,d),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const o=t[i];if(!(n&&!o.default||!n&&!e)&&(!e||ss(o,e)))return i}if(e){for(let i=0;i<t.length;i++){const o=t[i];if(Zo(e.attrs,o.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const o=t[i];if(Zo(e.attrs,o.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(Eh(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Qn.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&ss(e,n))return n;const i=ia(e,this.tracksInGroup);if(i>-1){const o=this.tracksInGroup[i];return this.setSubtitleTrack(i),o}else{if(n)return null;{const o=ia(e,t);if(o>-1)return t[o]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,o=this.getUrlWithDirectives(e.url,t),l=e.details,c=l?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${o}`),this.hls.trigger(ye.SUBTITLE_TRACK_LOADING,{url:o,id:n,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=fc(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(o=>Eh(n,o))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(o=>{o.mode!=="disabled"&&o!==i&&(o.mode="disabled")}),i){const o=this.subtitleDisplay?"showing":"hidden";i.mode!==o&&(i.mode=o)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!yn(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(ye.SUBTITLE_TRACK_SWITCH,{id:e});return}const o=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&o)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:l,groupId:c="",name:u,type:d,url:m}=i;this.hls.trigger(ye.SUBTITLE_TRACK_SWITCH,{id:l,groupId:c,name:u,type:d,url:m});const f=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(f)}}function Az(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?o:o&3|8).toString(16)})}}}function Oo(r){let e=5381,t=r.length;for(;t;)e=e*33^r.charCodeAt(--t);return(e>>>0).toString()}const Qs=.025;let Kc=(function(r){return r[r.Point=0]="Point",r[r.Range=1]="Range",r})({});function Rz(r,e,t){return`${r.identifier}-${t+1}-${Oo(e)}`}class Cz{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Md(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=Md(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=yn(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Md(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Qs))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Kc.Range:Kc.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return kz(this)}}function Md(r,e){return r-e.start<e.duration/2&&!(Math.abs(r-(e.start+e.duration))<Qs)?e.start:e.start+e.duration}function RS(r,e,t){const n=new self.URL(r,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function Od(r,e){for(;(t=r.assetList[++e])!=null&&t.error;)var t;return e}function kz(r){return`["${r.identifier}" ${r.cue.pre?"<pre>":r.cue.post?"<post>":""}${r.timelineStart.toFixed(2)}-${r.resumeTime.toFixed(2)}]`}function Bs(r){const e=r.timelineStart,t=r.duration||0;return`["${r.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class Lz{constructor(e,t,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(ye.PLAYOUT_LIMIT_REACHED,{})};const o=this.hls=new e(t);this.interstitial=n,this.assetItem=i;const l=()=>{this.hasDetails=!0};o.once(ye.LEVEL_LOADED,l),o.once(ye.AUDIO_TRACK_LOADED,l),o.once(ye.SUBTITLE_TRACK_LOADED,l),o.on(ye.MEDIA_ATTACHING,(c,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&o.on(ye.BUFFER_APPENDED,()=>{const m=this.bufferedEnd;this.reachedPlayout(m)&&(this._bufferedEosTime=m,o.trigger(ye.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=RS(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,o=qn.bufferInfo(e,i,0);return this.getAssetTime(o.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=qn.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=n=>delete n.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var i;(i=this.hls)==null||i.on(e,t)}once(e,t,n){var i;(i=this.hls)==null||i.once(e,t)}off(e,t,n){var i;(i=this.hls)==null||i.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${Bs(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const W0=.033;class Nz extends Pi{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(o=i[n])!=null&&o.event;){var o;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let i=0;i<n.length;i++){let o=n[i];if(t&&t!=="primary"&&(o=o[t]),e===o.start||e>o.start&&e<o.end)return i}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let i=e;i<=t&&n[i];i++){const o=n[i].event;if(o!=null&&o.restrictions.jump&&!o.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var n;if(((n=t[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,t){const n=e.assetList,i=n.length;if(i>1)for(let o=0;o<i;o++){const l=n[o];if(!l.error){const c=l.timelineStart;if(t===c||t>c&&(t<c+(l.duration||0)||o===i-1))return o}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const n=t.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:i}=n,o=this.events,l=this.parseDateRanges(i,{url:n.url},t),c=Object.keys(i),u=o?o.filter(d=>!c.includes(d.identifier)):[];l.length&&l.sort((d,m)=>{const f=d.cue.pre,h=d.cue.post,g=m.cue.pre,p=m.cue.post;if(f&&!g)return-1;if(g&&!f||h&&!p)return 1;if(p&&!h)return-1;if(!f&&!g&&!h&&!p){const E=d.startTime,S=m.startTime;if(E!==S)return E-S}return d.dateRange.tagOrder-m.dateRange.tagOrder}),this.events=l,u.forEach(d=>{this.removeEvent(d)}),this.updateSchedule(e,u)}updateSchedule(e,t=[],n=!1){const i=this.events||[];if(i.length||t.length||this.length<2){const o=this.items,l=this.parseSchedule(i,e);(n||t.length||o?.length!==l.length||l.some((u,d)=>Math.abs(u.playout.start-o[d].playout.start)>.005||Math.abs(u.playout.end-o[d].playout.end)>.005))&&(this.items=l,this.onScheduleUpdate(t,o))}}parseDateRanges(e,t,n){const i=[],o=Object.keys(e);for(let l=0;l<o.length;l++){const c=o[l],u=e[c];if(u.isInterstitial){let d=this.eventMap[c];d?d.setDateRange(u):(d=new Cz(u,t),this.eventMap[c]=d,n===!1&&(d.appendInPlace=n)),i.push(d)}}return i}parseSchedule(e,t){const n=[],i=t.main.details,o=i.live?1/0:i.edge;let l=0;if(e=e.filter(u=>!u.error&&!(u.cue.once&&u.hasPlayed)),e.length){this.resolveOffsets(e,t);let u=0,d=0;if(e.forEach((m,f)=>{const h=m.cue.pre,g=m.cue.post,p=e[f-1]||null,E=m.appendInPlace,S=g?o:m.startOffset,A=m.duration,x=m.timelineOccupancy===Kc.Range?A:0,k=m.resumptionOffset,U=p?.startTime===S,Y=S+m.cumulativeDuration;let Q=E?Y+A:S+k;if(h||!g&&S<=0){const O=d;d+=x,m.timelineStart=Y;const G=l;l+=A,n.push({event:m,start:Y,end:Q,playout:{start:G,end:l},integrated:{start:O,end:d}})}else if(S<=o){if(!U){const te=S-u;if(te>W0){const ge=u,Me=d;d+=te;const he=l;l+=te;const De={previousEvent:e[f-1]||null,nextEvent:m,start:ge,end:ge+te,playout:{start:he,end:l},integrated:{start:Me,end:d}};n.push(De)}else te>0&&p&&(p.cumulativeDuration+=te,n[n.length-1].end=S)}g&&(Q=Y),m.timelineStart=Y;const O=d;d+=x;const G=l;l+=A,n.push({event:m,start:Y,end:Q,playout:{start:G,end:l},integrated:{start:O,end:d}})}else return;const L=m.resumeTime;g||L>o?u=o:u=L}),u<o){var c;const m=u,f=d,h=o-u;d+=h;const g=l;l+=h,n.push({previousEvent:((c=n[n.length-1])==null?void 0:c.event)||null,nextEvent:null,start:u,end:m+h,playout:{start:g,end:l},integrated:{start:f,end:d}})}this.setDurations(o,l,d)}else n.push({previousEvent:null,nextEvent:null,start:0,end:o,playout:{start:0,end:o},integrated:{start:0,end:o}}),this.setDurations(o,o,o);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,i=n.live?1/0:n.edge;let o=0,l=-1;e.forEach((c,u)=>{const d=c.cue.pre,m=c.cue.post,f=d?0:m?i:c.startTime;this.updateAssetDurations(c),l===f?c.cumulativeDuration=o:(o=0,l=f),!m&&c.snapOptions.in&&(c.resumeAnchor=ls(null,n.fragments,c.startOffset+c.resumptionOffset,0,0)||void 0),c.appendInPlace&&!c.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(c,t)||(c.appendInPlace=!1)),!c.appendInPlace&&u+1<e.length&&e[u+1].startTime-e[u].resumeTime<W0&&(e[u+1].appendInPlace=!1,e[u+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${c}`));const g=yn(c.resumeOffset)?c.resumeOffset:c.duration;o+=g})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>Qs?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(t).some(l=>{const c=t[l].details,u=c.edge;if(n>=u)return this.log(`"${e.identifier}" resumption ${n} past ${l} playlist end ${u}`),!1;const d=ls(null,c.fragments,n);if(!d)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${l} playlist (${c.fragStart}-${c.fragmentEnd})`),!0;const m=l==="audio"?.175:0;return Math.abs(d.start-n)<Qs+m||Math.abs(d.end-n)<Qs+m?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${l} fragment bounds (${d.start}-${d.end} sn: ${d.sn} cc: ${d.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,i=!1,o=!1;for(let l=0;l<e.assetList.length;l++){const c=e.assetList[l],u=t+n;c.startOffset=n,c.timelineStart=u,i||(i=c.duration===null),o||(o=!!c.error);const d=c.error?0:c.duration||0;n+=d}i&&!o?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Gi(r){return`[${r.event?'"'+r.event.identifier+'"':"primary"}: ${r.start.toFixed(2)}-${r.end.toFixed(2)}]`}class Dz{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let i;try{i=RS(n,this.hls.sessionId,e.baseUrl)}catch(h){const g=this.assignAssetListError(e,vt.ASSET_LIST_LOAD_ERROR,h,n);this.hls.trigger(ye.ERROR,g);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const o=this.hls.config,l=o.loader,c=new l(o),u={responseType:"json",url:i.href},d=o.interstitialAssetListLoadPolicy.default,m={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,g,p,E)=>{const S=h.data,A=S?.ASSETS;if(!Array.isArray(A)){const x=this.assignAssetListError(e,vt.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),p.url,g,E);this.hls.trigger(ye.ERROR,x);return}e.assetListResponse=S,this.hls.trigger(ye.ASSET_LIST_LOADED,{event:e,assetListResponse:S,networkDetails:E})},onError:(h,g,p,E)=>{const S=this.assignAssetListError(e,vt.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${h.code} ${h.text} (${g.url})`),g.url,E,p);this.hls.trigger(ye.ERROR,S)},onTimeout:(h,g,p)=>{const E=this.assignAssetListError(e,vt.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${g.url})`),g.url,h,p);this.hls.trigger(ye.ERROR,E)}};return c.load(u,m,f),this.hls.trigger(ye.ASSET_LIST_LOADING,{event:e}),c}assignAssetListError(e,t,n,i,o,l){return e.error=n,{type:Nn.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:n,networkDetails:l,stats:o}}}function X0(r){var e;r==null||(e=r.play())==null||e.catch(()=>{})}function Xl(r,e){return`[${r}] Advancing timeline position to ${e}`}class Pz extends Pi{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const l=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const c=this.playingItem;if(!c){this.checkBuffer();return}if(l&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),l&&n<c.start||n>=c.end){var u;const g=this.findItemIndex(c);let p=this.schedule.findItemIndexAtTime(n);if(p===-1&&(p=g+(l?-1:1),this.log(`seeked ${l?"back ":""}to position not covered by schedule ${n} (resolving from ${g} to ${p})`)),!this.isInterstitial(c)&&(u=this.media)!=null&&u.paused&&(this.shouldPlay=!1),!l&&p>g){const E=this.schedule.findJumpRestrictedIndex(g+1,p);if(E>g){this.setSchedulePosition(E);return}}this.setSchedulePosition(p);return}const d=this.playingAsset;if(!d){if(this.playingLastItem&&this.isInterstitial(c)){const g=c.event.assetList[0];g&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,g))}return}const m=d.timelineStart,f=d.duration||0;if(l&&n<m||n>=m+f){var h;(h=c.event)!=null&&h.appendInPlace&&(this.clearAssetPlayers(c.event,c),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,d)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const c=this.findItemIndex(i);this.setSchedulePosition(c+1)}const o=this.playingAsset;if(!o)return;const l=o.timelineStart+(o.duration||0);n>=l&&this.setScheduleToAssetAtTime(n,o)},this.onScheduleUpdate=(n,i)=>{const o=this.schedule;if(!o)return;const l=this.playingItem,c=o.events||[],u=o.items||[],d=o.durations,m=n.map(E=>E.identifier),f=!!(c.length||m.length);(f||i)&&this.log(`INTERSTITIALS_UPDATED (${c.length}): ${c}
Schedule: ${u.map(E=>Gi(E))} pos: ${this.timelinePos}`),m.length&&this.log(`Removed events ${m}`);let h=null,g=null;l&&(h=this.updateItem(l,this.timelinePos),this.itemsMatch(l,h)?this.playingItem=h:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const p=this.bufferingItem;if(p&&(g=this.updateItem(p,this.bufferedPos),this.itemsMatch(p,g)?this.bufferingItem=g:p.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(p.event,null))),n.forEach(E=>{E.assetList.forEach(S=>{this.clearAssetPlayer(S.identifier,null)})}),this.playerQueue.forEach(E=>{if(E.interstitial.appendInPlace){const S=E.assetItem.timelineStart,A=E.timelineOffset-S;if(A)try{E.timelineOffset=S}catch(x){Math.abs(A)>Qs&&this.warn(`${x} ("${E.assetId}" ${E.timelineOffset}->${S})`)}}}),f||i){if(this.hls.trigger(ye.INTERSTITIALS_UPDATED,{events:c.slice(0),schedule:u.slice(0),durations:d,removedIds:m}),this.isInterstitial(l)&&m.includes(l.event.identifier)){this.warn(`Interstitial "${l.event.identifier}" removed while playing`),this.primaryFallback(l.event);return}l&&this.trimInPlace(h,l),p&&g!==h&&this.trimInPlace(g,p),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new Dz(e),this.schedule=new Nz(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ye.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ye.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(ye.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(ye.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(ye.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(ye.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(ye.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ye.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ye.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(ye.MEDIA_ENDED,this.onMediaEnded,this),e.on(ye.ERROR,this.onError,this),e.on(ye.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ye.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ye.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(ye.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(ye.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(ye.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(ye.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(ye.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ye.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ye.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ye.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(ye.MEDIA_ENDED,this.onMediaEnded,this),e.off(ye.ERROR,this.onError,this),e.off(ye.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){ii(e,"play",this.onPlay),ii(e,"pause",this.onPause),ii(e,"seeking",this.onSeeking),ii(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;Wr(n,"seeking",this.onSeeking),Wr(n,"timeupdate",this.onTimeupdate),Wr(n,"play",this.onPlay),Wr(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const o=this.findItemIndex(n);this.setSchedulePosition(o)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const o=this.getBufferingPlayer();o&&(this.log(`Removing schedule state for detachedData and ${o}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,o.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=f=>f&&e.getAssetPlayer(f.identifier),i=(f,h,g,p,E)=>{if(f){let S=f[h].start;const A=f.event;if(A){if(h==="playout"||A.timelineOccupancy!==Kc.Point){const x=n(g);x?.interstitial===A&&(S+=x.assetItem.startOffset+x[E])}}else{const x=p==="bufferedPos"?l():e[p];S+=x-f.start}return S}return 0},o=(f,h)=>{var g;if(f!==0&&h!=="primary"&&(g=e.schedule)!=null&&g.length){var p;const E=e.schedule.findItemIndexAtTime(f),S=(p=e.schedule.items)==null?void 0:p[E];if(S){const A=S[h].start-S.start;return f+A}}return f},l=()=>{const f=e.bufferedPos;return f===Number.MAX_VALUE?c("primary"):Math.max(f,0)},c=f=>{var h,g;return(h=e.primaryDetails)!=null&&h.live?e.primaryDetails.edge:((g=e.schedule)==null?void 0:g.durations[f])||0},u=(f,h)=>{var g,p;const E=e.effectivePlayingItem;if(E!=null&&(g=E.event)!=null&&g.restrictions.skip||!e.schedule)return;e.log(`seek to ${f} "${h}"`);const S=e.effectivePlayingItem,A=e.schedule.findItemIndexAtTime(f,h),x=(p=e.schedule.items)==null?void 0:p[A],k=e.getBufferingPlayer(),U=k?.interstitial,Y=U?.appendInPlace,Q=S&&e.itemsMatch(S,x);if(S&&(Y||Q)){const L=n(e.playingAsset),O=L?.media||e.primaryMedia;if(O){const G=h==="primary"?O.currentTime:i(S,h,e.playingAsset,"timelinePos","currentTime"),te=f-G,ge=(Y?G:O.currentTime)+te;if(ge>=0&&(!L||Y||ge<=L.duration)){O.currentTime=ge;return}}}if(x){let L=f;if(h!=="primary"){const G=x[h].start,te=f-G;L=x.start+te}const O=!e.isInterstitial(x);if((!e.isInterstitial(S)||S.event.appendInPlace)&&(O||x.event.appendInPlace)){const G=e.media||(Y?k?.media:null);G&&(G.currentTime=L)}else if(S){const G=e.findItemIndex(S);if(A>G){const ge=e.schedule.findJumpRestrictedIndex(G+1,A);if(ge>G){e.setSchedulePosition(ge);return}}let te=0;if(O)e.timelinePos=L,e.checkBuffer();else{const ge=x.event.assetList,Me=f-(x[h]||x).start;for(let he=ge.length;he--;){const De=ge[he];if(De.duration&&Me>=De.startOffset&&Me<De.startOffset+De.duration){te=he;break}}}e.setSchedulePosition(A,te)}}},d=()=>{const f=e.effectivePlayingItem;if(e.isInterstitial(f))return f;const h=t();return e.isInterstitial(h)?h:null},m={get bufferedEnd(){const f=t(),h=e.bufferingItem;if(h&&h===f){var g;return i(h,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-h.playout.start||((g=e.bufferingAsset)==null?void 0:g.startOffset)||0}return 0},get currentTime(){const f=d(),h=e.effectivePlayingItem;return h&&h===f?i(h,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-h.playout.start:0},set currentTime(f){const h=d(),g=e.effectivePlayingItem;g&&g===h&&u(f+g.playout.start,"playout")},get duration(){const f=d();return f?f.playout.end-f.playout.start:0},get assetPlayers(){var f;const h=(f=d())==null?void 0:f.event.assetList;return h?h.map(g=>e.getAssetPlayer(g.identifier)):[]},get playingIndex(){var f;const h=(f=d())==null?void 0:f.event;return h&&e.effectivePlayingAsset?h.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return d()}};return this.manager={get events(){var f;return((f=e.schedule)==null||(f=f.events)==null?void 0:f.slice(0))||[]},get schedule(){var f;return((f=e.schedule)==null||(f=f.items)==null?void 0:f.slice(0))||[]},get interstitialPlayer(){return d()?m:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const f=t();return e.findItemIndex(f)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const f=e.effectivePlayingItem;return e.findItemIndex(f)},primary:{get bufferedEnd(){return l()},get currentTime(){const f=e.timelinePos;return f>0?f:0},set currentTime(f){u(f,"primary")},get duration(){return c("primary")},get seekableStart(){var f;return((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(f){u(f,"integrated")},get duration(){return c("integrated")},get seekableStart(){var f;return o(((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0,"integrated")}},skip:()=>{const f=e.effectivePlayingItem,h=f?.event;if(h&&!h.restrictions.skip){const g=e.findItemIndex(f);if(h.appendInPlace){const p=f.playout.start+f.event.duration;u(p+.001,"playout")}else e.advanceAfterAssetEnded(h,g,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const o=(t=i)==null?void 0:t.currentTime;if(!(o===void 0||!yn(o)))return o}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const o=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Er(o)}`),this.detachedData=o}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var n,i;if(e.media===t)return;let o=null;const l=this.hls,c=e!==l,u=c&&e.interstitial.appendInPlace,d=(n=this.detachedData)==null?void 0:n.mediaSource;let m;if(l.media)u&&(o=l.transferMedia(),this.detachedData=o),m="Primary";else if(d){const p=this.getBufferingPlayer();p?(o=p.transferMedia(),m=`${p}`):m="detached MediaSource"}else m="detached media";if(!o){if(d)o=this.detachedData,this.log(`using detachedData: MediaSource ${Er(o)}`);else if(!this.detachedData||l.media===t){const p=this.playerQueue;p.length>1&&p.forEach(E=>{if(c&&E.interstitial.appendInPlace!==u){const S=E.interstitial;this.clearInterstitial(E.interstitial,null),S.appendInPlace=!1,S.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${S}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const f=o&&"mediaSource"in o&&((i=o.mediaSource)==null?void 0:i.readyState)!=="closed",h=f&&o?o:t;this.log(`${f?"transfering MediaSource":"attaching media"} to ${c?e:"Primary"} from ${m} (media.currentTime: ${t.currentTime})`);const g=this.schedule;if(h===o&&g){const p=c&&e.assetId===g.assetIdAtEnd;h.overrides={duration:g.duration,endOfStream:!c||p,cueRemoval:!c}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const o=this.hls.startPosition;if(this.log(Xl("checkStart",o)),this.timelinePos=o,t.length&&t[0].cue.pre){const l=e.findEventIndex(t[0].identifier);this.setSchedulePosition(l)}else if(o>=0||!this.primaryLive){const l=this.timelinePos=o>0?o:0,c=e.findItemIndexAtTime(l);this.setSchedulePosition(c)}}else if(i&&!this.playingItem){const o=e.findItemIndex(i);this.setSchedulePosition(o)}}advanceAssetBuffering(e,t){const n=e.event,i=n.findAssetIndex(t),o=Od(n,i);if(!n.isAssetPastPlayoutLimit(o))this.bufferedToEvent(e,o);else if(this.schedule){var l;const c=(l=this.schedule.items)==null?void 0:l[this.findItemIndex(e)+1];c&&this.bufferedToItem(c)}}advanceAfterAssetEnded(e,t,n){const i=Od(e,n);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const o=this.schedule.items;if(o){const l=t+1,c=o.length;if(l>=c){this.setSchedulePosition(-1);return}const u=e.resumeTime;this.timelinePos<u&&(this.log(Xl("advanceAfterAssetEnded",u)),this.timelinePos=u,e.appendInPlace&&this.advanceInPlace(u),this.checkBuffer(this.bufferedPos<u)),this.setSchedulePosition(l)}}}else{if(e.appendInPlace){const o=e.assetList[i];o&&this.advanceInPlace(o.timelineStart)}this.setSchedulePosition(t,i)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const i=t.parentIdentifier,o=n.getEvent(i);if(o){const l=n.findEventIndex(i),c=n.findAssetIndex(o,e);this.advanceAfterAssetEnded(o,l,c-1)}}setSchedulePosition(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;const o=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${o&&Gi(o)}) pos: ${this.timelinePos}`);const l=this.waitingItem||this.playingItem,c=this.playingLastItem;if(this.isInterstitial(l)){const m=l.event,f=this.playingAsset,h=f?.identifier,g=h?this.getAssetPlayer(h):null;if(g&&h&&(!this.eventItemsMatch(l,o)||t!==void 0&&h!==m.assetList[t].identifier)){var u;const p=m.findAssetIndex(f);if(this.log(`INTERSTITIAL_ASSET_ENDED ${p+1}/${m.assetList.length} ${Bs(f)}`),this.endedAsset=f,this.playingAsset=null,this.hls.trigger(ye.INTERSTITIAL_ASSET_ENDED,{asset:f,assetListIndex:p,event:m,schedule:i.slice(0),scheduleIndex:e,player:g}),l!==this.playingItem){this.itemsMatch(l,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(m,this.findItemIndex(this.playingItem),p);return}this.retreiveMediaSource(h,o),g.media&&!((u=this.detachedData)!=null&&u.mediaSource)&&g.detachMedia()}if(!this.eventItemsMatch(l,o)&&(this.endedItem=l,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${m} ${Gi(l)}`),m.hasPlayed=!0,this.hls.trigger(ye.INTERSTITIAL_ENDED,{event:m,schedule:i.slice(0),scheduleIndex:e}),m.cue.once)){var d;this.updateSchedule();const p=(d=this.schedule)==null?void 0:d.items;if(o&&p){const E=this.findItemIndex(o);this.advanceSchedule(E,p,t,l,c)}return}}this.advanceSchedule(e,i,t,l,c)}advanceSchedule(e,t,n,i,o){const l=this.schedule;if(!l)return;const c=t[e]||null,u=this.primaryMedia,d=this.playerQueue;if(d.length&&d.forEach(m=>{const f=m.interstitial,h=l.findEventIndex(f.identifier);(h<e||h>e+1)&&this.clearInterstitial(f,c)}),this.isInterstitial(c)){this.timelinePos=Math.min(Math.max(this.timelinePos,c.start),c.end);const m=c.event;if(n===void 0){n=l.findAssetIndex(m,this.timelinePos);const p=Od(m,n-1);if(m.isAssetPastPlayoutLimit(p)||m.appendInPlace&&this.timelinePos===c.end){this.advanceAfterAssetEnded(m,e,n);return}n=p}const f=this.waitingItem;this.assetsBuffered(c,u)||this.setBufferingItem(c);let h=this.preloadAssets(m,n);if(this.eventItemsMatch(c,f||i)||(this.waitingItem=c,this.log(`INTERSTITIAL_STARTED ${Gi(c)} ${m.appendInPlace?"append in place":""}`),this.hls.trigger(ye.INTERSTITIAL_STARTED,{event:m,schedule:t.slice(0),scheduleIndex:e})),!m.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${m}`);return}if(m.assetListLoader&&(m.assetListLoader.destroy(),m.assetListLoader=void 0),!u){this.log(`Waiting for attachMedia to start Interstitial ${m}`);return}this.waitingItem=this.endedItem=null,this.playingItem=c;const g=m.assetList[n];if(!g){this.advanceAfterAssetEnded(m,e,n||0);return}if(h||(h=this.getAssetPlayer(g.identifier)),h===null||h.destroyed){const p=m.assetList.length;this.warn(`asset ${n+1}/${p} player destroyed ${m}`),h=this.createAssetPlayer(m,g,n),h.loadSource()}if(!this.eventItemsMatch(c,this.bufferingItem)&&m.appendInPlace&&this.isAssetBuffered(g))return;this.startAssetPlayer(h,n,t,e,u),this.shouldPlay&&X0(h.media)}else c?(this.resumePrimary(c,e,i),this.shouldPlay&&X0(this.hls.media)):o&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(l.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var i,o;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Gi(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let c=this.timelinePos;(c<e.start||c>=e.end)&&(c=this.getPrimaryResumption(e,t),this.log(Xl("resumePrimary",c)),this.timelinePos=c),this.attachPrimary(c,e)}if(!n)return;const l=(o=this.schedule)==null?void 0:o.items;l&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Gi(e)}`),this.hls.trigger(ye.INTERSTITIALS_PRIMARY_RESUMED,{schedule:l.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:qn.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const o=this.hls;o.media?this.checkBuffer():(this.transferMediaTo(o,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(Xl("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(ye.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(ye.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const i=fr(fr({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=fr(fr({},this.altSelection),{},{audio:n});return}const o=fr(fr({},i),{},{audio:n});this.mediaSelection=o}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=fr(fr({},this.altSelection),{},{subtitles:n});return}const o=fr(fr({},i),{},{subtitles:n});this.mediaSelection=o}onAudioTrackSwitching(e,t){const n=a0(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(t)||i.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=a0(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(t)||t.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const o=t[i];if(o.cue.post){var n;const l=this.schedule.findEventIndex(o.identifier),c=(n=this.schedule.items)==null?void 0:n[l];this.isInterstitial(c)&&this.eventItemsMatch(c,this.bufferingItem)&&this.bufferedToItem(c,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(e&&i){const o=this.findItemIndex(e,t);return i[o]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((o,l)=>{e.event.isAssetPastPlayoutLimit(l)&&this.clearAssetPlayer(o.identifier,null)});const n=e.end+.25,i=qn.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${Gi(e)} (was ${Gi(t)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&((t=this.schedule)==null||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=(t=this.schedule)==null?void 0:t.items;if(!n)return;const i=qn.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,t,n){const i=this.schedule,o=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(t.length===1&&this.itemsMatch(t[0],o)){this.bufferedPos=e;return}const l=this.playingItem,c=this.findItemIndex(l);let u=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var d;const m=this.findItemIndex(o),f=Math.min(m+1,t.length-1),h=t[f];if((u===-1&&o&&e>=o.end||(d=h.event)!=null&&d.appendInPlace&&e+.01>=h.start)&&(u=f),this.isInterstitial(o)){const g=o.event;if(f-c>1&&g.appendInPlace===!1||g.assetList.length===0&&g.assetListLoader)return}if(this.bufferedPos=e,u>m&&u>c)this.bufferedToItem(h);else{const g=this.primaryDetails;this.primaryLive&&g&&e>g.edge-g.targetduration&&h.start<g.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(h)&&this.preloadAssets(h.event,0)}}else n&&l&&!this.itemsMatch(l,o)&&(u===c?this.bufferedToItem(l):u===c+1&&this.bufferedToItem(t[u]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const o=this.getAssetPlayer(i.identifier);return!(o!=null&&o.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:i,events:o}=n;if(!i||!o)return t;const l=this.isInterstitial(e),c=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const u=c?c.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Gi(e)}`+(t?` (${u.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(l){const d=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((m,f)=>{const h=this.getAssetPlayer(m.identifier);h&&(f===d&&h.loadSource(),h.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(d=>d.pauseBuffering());this.hls.trigger(ye.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:o.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,o=n.cue.once;if(i||!o){const l=this.preloadAssets(n,t);if(l!=null&&l.interstitial.appendInPlace){const c=this.primaryMedia;c&&this.bufferAssetPlayer(l,c)}}}preloadAssets(e,t){const n=e.assetUrl,i=e.assetList.length,o=i===0&&!e.assetListLoader,l=e.cue.once;if(o){const u=e.timelineStart;if(e.appendInPlace){var c;const h=this.playingItem;!this.isInterstitial(h)&&(h==null||(c=h.nextEvent)==null?void 0:c.identifier)===e.identifier&&this.flushFrontBuffer(u+.25)}let d,m=0;if(!this.playingItem&&this.primaryLive&&(m=this.hls.startPosition,m===-1&&(m=this.hls.liveSyncPosition||0)),m&&!(e.cue.pre||e.cue.post)){const h=m-u;h>0&&(d=Math.round(h*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:i} ${e}${d?` live-start: ${m} start-offset: ${d}`:""}`),n)return this.createAsset(e,0,0,u,e.duration,n);const f=this.assetListLoader.loadAssetList(e,d);f&&(e.assetListLoader=f)}else if(!l&&i){for(let d=t;d<i;d++){const m=e.assetList[d],f=this.getAssetPlayerQueueIndex(m.identifier);(f===-1||this.playerQueue[f].destroyed)&&!m.error&&this.createAssetPlayer(e,m,d)}const u=e.assetList[t];if(u){const d=this.getAssetPlayer(u.identifier);return d&&d.loadSource(),d}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger(ye.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,i,o,l){const c={parentIdentifier:e.identifier,identifier:Rz(e,l,t),duration:o,startOffset:n,timelineStart:i,uri:l};return this.createAssetPlayer(e,c,t)}createAssetPlayer(e,t,n){const i=this.hls,o=i.userConfig;let l=o.videoPreference;const c=i.loadLevelObj||i.levels[i.currentLevel];(l||c)&&(l=pr({},l),c.videoCodec&&(l.videoCodec=c.videoCodec),c.videoRange&&(l.allowedVideoRanges=[c.videoRange]));const u=i.audioTracks[i.audioTrack],d=i.subtitleTracks[i.subtitleTrack];let m=0;if(this.primaryLive||e.appendInPlace){const U=this.timelinePos-t.timelineStart;if(U>1){const Y=t.duration;Y&&U<Y&&(m=U)}}const f=t.identifier,h=fr(fr({},o),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:f,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:m,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:l,audioPreference:u||o.audioPreference,subtitlePreference:d||o.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(h.timelineOffset=t.timelineStart));const g=h.cmcd;g!=null&&g.sessionId&&g.contentId&&(h.cmcd=pr({},g,{contentId:Oo(t.uri)})),this.getAssetPlayer(f)&&this.warn(`Duplicate date range identifier ${e} and asset ${f}`);const p=new Lz(this.HlsPlayerClass,h,e,t);this.playerQueue.push(p),e.assetList[n]=t;let E=!0;const S=U=>{if(U.live){var Y;const O=new Error(`Interstitials MUST be VOD assets ${e}`),G={fatal:!0,type:Nn.OTHER_ERROR,details:vt.INTERSTITIAL_ASSET_ITEM_ERROR,error:O},te=((Y=this.schedule)==null?void 0:Y.findEventIndex(e.identifier))||-1;this.handleAssetItemError(G,e,te,n,O.message);return}const Q=U.edge-U.fragmentStart,L=t.duration;(E||L===null||Q>L)&&(E=!1,this.log(`Interstitial asset "${f}" duration change ${L} > ${Q}`),t.duration=Q,this.updateSchedule())};p.on(ye.LEVEL_UPDATED,(U,{details:Y})=>S(Y)),p.on(ye.LEVEL_PTS_UPDATED,(U,{details:Y})=>S(Y)),p.on(ye.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const A=(U,Y)=>{const Q=this.getAssetPlayer(f);if(Q&&Y.tracks){Q.off(ye.BUFFER_CODECS,A),Q.tracks=Y.tracks;const L=this.primaryMedia;this.bufferingAsset===Q.assetItem&&L&&!Q.media&&this.bufferAssetPlayer(Q,L)}};p.on(ye.BUFFER_CODECS,A);const x=()=>{var U;const Y=this.getAssetPlayer(f);if(this.log(`buffered to end of asset ${Y}`),!Y||!this.schedule)return;const Q=this.schedule.findEventIndex(e.identifier),L=(U=this.schedule.items)==null?void 0:U[Q];this.isInterstitial(L)&&this.advanceAssetBuffering(L,t)};p.on(ye.BUFFERED_TO_END,x);const k=U=>()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;this.shouldPlay=!0;const Q=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,Q,U)};return p.once(ye.MEDIA_ENDED,k(n)),p.once(ye.PLAYOUT_LIMIT_REACHED,k(1/0)),p.on(ye.ERROR,(U,Y)=>{if(!this.schedule)return;const Q=this.getAssetPlayer(f);if(Y.details===vt.BUFFER_STALLED_ERROR){if(Q!=null&&Q.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(Y,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${Y.error} ${e}`)}),p.on(ye.DESTROYING,()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;const Y=new Error(`Asset player destroyed unexpectedly ${f}`),Q={fatal:!0,type:Nn.OTHER_ERROR,details:vt.INTERSTITIAL_ASSET_ITEM_ERROR,error:Y};this.handleAssetItemError(Q,e,this.schedule.findEventIndex(e.identifier),n,Y.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Bs(t)}`),this.hls.trigger(ye.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:p}),p}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${t&&Gi(t)}`),this.transferMediaFromPlayer(i,t),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,i,o){const{interstitial:l,assetItem:c,assetId:u}=e,d=l.assetList.length,m=this.playingAsset;this.endedAsset=null,this.playingAsset=c,(!m||m.identifier!==u)&&(m&&(this.clearAssetPlayer(m.identifier,n[i]),delete m.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${d} ${Bs(c)}`),this.hls.trigger(ye.INTERSTITIAL_ASSET_STARTED,{asset:c,assetListIndex:t,event:l,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,o)}bufferAssetPlayer(e,t){var n,i;if(!this.schedule)return;const{interstitial:o,assetItem:l}=e,c=this.schedule.findEventIndex(o.identifier),u=(n=this.schedule.items)==null?void 0:n[c];if(!u)return;e.loadSource(),this.setBufferingItem(u),this.bufferingAsset=l;const d=this.getBufferingPlayer();if(d===e)return;const m=o.appendInPlace;if(m&&d?.interstitial.appendInPlace===!1)return;const f=d?.tracks||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(m&&l!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(f&&!uT(f,e.tracks)){const h=new Error(`Asset ${Bs(l)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(f)}')`),g={fatal:!0,type:Nn.OTHER_ERROR,details:vt.INTERSTITIAL_ASSET_ITEM_ERROR,error:h},p=o.findAssetIndex(l);this.handleAssetItemError(g,o,c,p,h.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const i=n.currentTime,o=t.findAssetIndex(e,i),l=e.assetList[o];if(l){const c=this.getAssetPlayer(l.identifier);if(c){const u=c.currentTime||i-l.timelineStart,d=c.duration-u;if(this.warn(`Stalled at ${u} of ${u+d} in ${c} ${e} (media.currentTime: ${i})`),u&&(d/n.playbackRate<.5||c.bufferedInPlaceToEnd(n))&&c.hls){const m=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,m,o)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,i,o){if(e.details===vt.BUFFER_STALLED_ERROR)return;const l=t.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${l&&Bs(l)} ${e.error}`),!this.schedule)return;const c=l?.identifier||"",u=this.getAssetPlayerQueueIndex(c),d=this.playerQueue[u]||null,m=this.schedule.items,f=pr({},e,{fatal:!1,errorAction:Ys(!0),asset:l,assetListIndex:i,event:t,schedule:m,scheduleIndex:n,player:d});if(this.hls.trigger(ye.INTERSTITIAL_ASSET_ERROR,f),!e.fatal)return;const h=this.playingAsset,g=this.bufferingAsset,p=new Error(o);if(l&&(this.clearAssetPlayer(c,null),l.error=p),!t.assetList.some(E=>!E.error))t.error=p;else for(let E=i;E<t.assetList.length;E++)this.resetAssetPlayer(t.assetList[E].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):h&&h.identifier===c?this.advanceAfterAssetEnded(t,n,i):g&&g.identifier===c&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,g)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;let i=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${i} playing: ${Gi(n)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const l=this.updateItem(n,i);this.itemsMatch(n,l)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const o=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(o)}onAssetListLoaded(e,t){var n,i;const o=t.event,l=o.identifier,c=t.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(l)))return;const u=o.timelineStart,d=o.duration;let m=0;c.forEach((E,S)=>{const A=parseFloat(E.DURATION);this.createAsset(o,S,m,u+m,A,E.URI),m+=A}),o.duration=m,this.log(`Loaded asset-list with duration: ${m} (was: ${d}) ${o}`);const f=this.waitingItem,h=f?.event.identifier===l;this.updateSchedule();const g=(i=this.bufferingItem)==null?void 0:i.event;if(h){var p;const E=this.schedule.findEventIndex(l),S=(p=this.schedule.items)==null?void 0:p[E];if(S){if(!this.playingItem&&this.timelinePos>S.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==E){o.error=new Error(`Interstitial ${c.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${o}`),this.log(o.error.message),this.updateSchedule(!0),this.primaryFallback(o);return}this.setBufferingItem(S)}this.setSchedulePosition(E)}else if(g?.identifier===l){const E=o.assetList[0];if(E){const S=this.getAssetPlayer(E.identifier);if(g.appendInPlace){const A=this.primaryMedia;S&&A&&this.bufferAssetPlayer(S,A)}else S&&S.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case vt.ASSET_LIST_PARSING_ERROR:case vt.ASSET_LIST_LOAD_ERROR:case vt.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case vt.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const Q0=500;class Mz extends mm{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",xn.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ye.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ye.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(ye.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ye.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(ye.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ye.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ye.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(ye.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ye.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(ye.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Qt.IDLE,this.setInterval(Q0),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragContextChanged(n)||(kr(n)&&(this.fragPrevious=n),this.state=Qt.IDLE),!i)return;const o=this.tracksBuffered[this.currentTrackId];if(!o)return;let l;const c=n.start;for(let d=0;d<o.length;d++)if(c>=o[d].start&&c<=o[d].end){l=o[d];break}const u=n.start+n.duration;l?l.end=u:(l={start:c,end:u},o.push(l)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const o=i-1;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach(l=>{for(let c=0;c<l.length;){if(l[c].end<=o){l.shift();continue}else if(l[c].start<o)l[c].start=o;else break;c++}}),this.fragmentTracker.removeFragmentsInRange(n,o,xn.SUBTITLE)}}onError(e,t){const n=t.frag;n?.type===xn.SUBTITLE&&(t.details===vt.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Qt.STOPPED&&(this.state=Qt.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&hS(this.levels,t)){this.levels=t.map(n=>new Yo(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new Yo(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,xn.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==Qt.STOPPED&&this.setInterval(Q0)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:o}=this,{details:l,id:c}=t;if(!o){this.warn(`Subtitle tracks were reset while loading level ${c}`);return}const u=o[c];if(c>=o.length||!u)return;this.log(`Subtitle track ${c} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""},duration:${l.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let d=0;if(l.live||(n=u.details)!=null&&n.live){if(l.deltaUpdateFailed)return;const f=this.mainDetails;if(!f){this.startFragRequested=!1;return}const h=f.fragments[0];if(!u.details)l.hasProgramDateTime&&f.hasProgramDateTime?(Hc(l,f),d=l.fragmentStart):h&&(d=h.start,ph(l,d));else{var m;d=this.alignPlaylists(l,u.details,(m=this.levelLastLoaded)==null?void 0:m.details),d===0&&h&&(d=h.start,ph(l,d))}f&&!this.startFragRequested&&this.setStartPosition(f,d)}u.details=l,this.levelLastLoaded=u,c===i&&(this.hls.trigger(ye.SUBTITLE_TRACK_UPDATED,{details:l,id:c,groupId:t.groupId}),this.tick(),l.live&&!this.fragCurrent&&this.media&&this.state===Qt.IDLE&&(ls(null,l.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,o=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&Ws(i.method)){const l=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,fm(i.method)).catch(c=>{throw o.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:t}),c}).then(c=>{const u=performance.now();o.trigger(ye.FRAG_DECRYPTED,{frag:t,payload:c,stats:{tstart:l,tdecrypt:u}})}).catch(c=>{this.warn(`${c.name}: ${c.message}`),this.state=Qt.IDLE})}}doTick(){if(!this.media){this.state=Qt.IDLE;return}if(this.state===Qt.IDLE){const{currentTrackId:e,levels:t}=this,n=t?.[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:i}=this,o=this.getLoadPosition(),l=qn.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o,i.maxBufferHole),{end:c,len:u}=l,d=n.details,m=this.hls.maxBufferLength+d.levelTargetDuration;if(u>m)return;const f=d.fragments,h=f.length,g=d.edge;let p=null;const E=this.fragPrevious;if(c<g){const x=i.maxFragLookUpTolerance,k=c>g-x?0:x;p=ls(E,f,Math.max(f[0].start,c),k),!p&&E&&E.start<f[0].start&&(p=f[0])}else p=f[h-1];if(p=this.filterReplacedPrimary(p,n.details),!p)return;const S=p.sn-d.startSN,A=f[S-1];if(A&&A.cc===p.cc&&this.fragmentTracker.getState(A)===Or.NOT_LOADED&&(p=A),this.fragmentTracker.getState(p)===Or.NOT_LOADED){const x=this.mapToInitFragWhenRequired(p);x&&this.loadFragment(x,n,c)}}}loadFragment(e,t,n){kr(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new Oz(this.tracksBuffered[this.currentTrackId]||[])}}class Oz{constructor(e){this.buffered=void 0;const t=(n,i,o)=>{if(i=i>>>0,i>o-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${o})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const Fz={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},CS=r=>String.fromCharCode(Fz[r]||r),Hi=15,ha=100,zz={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Uz={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Bz={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},$z={25:2,26:4,29:6,30:8,31:10,27:13,28:15},jz=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class qz{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;hr.log(`${this.time} [${e}] ${n}`)}}}const Ja=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class kS{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Gz{constructor(){this.uchar=" ",this.penState=new kS}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Hz{constructor(e){this.chars=[],this.pos=0,this.currPenState=new kS,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<ha;t++)this.chars.push(new Gz);this.logger=e}equals(e){for(let t=0;t<ha;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<ha;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<ha;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ha&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ha)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=CS(e);if(this.pos>=ha){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<ha;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<ha;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Fd{constructor(e){this.rows=[],this.currRow=Hi-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Hi;t++)this.rows.push(new Hz(e));this.logger=e}reset(){for(let e=0;e<Hi;e++)this.rows[e].clear();this.currRow=Hi-1}equals(e){let t=!0;for(let n=0;n<Hi;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<Hi;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Hi;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Er(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let c=0;c<Hi;c++)this.rows[c].clear();const o=this.currRow+1-this.nrRollUpRows,l=this.lastOutputScreen;if(l){const c=l.rows[o].cueStartTime,u=this.logger.time;if(c!==null&&u!==null&&c<u)for(let d=0;d<this.nrRollUpRows;d++)this.rows[t-this.nrRollUpRows+d+1].copy(l.rows[o+d])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const o=e.indent,l=Math.max(o-1,0);n.setCursor(e.indent),e.color=n.chars[l].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Er(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let o=0;o<Hi;o++){const l=this.rows[o].getTextString();l&&(i=o+1,e?t.push("Row "+i+": '"+l+"'"):t.push(l.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class Z0{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Fd(n),this.nonDisplayedMemory=new Fd(n),this.lastOutputScreen=new Fd(n),this.currRollUpRow=this.displayedMemory.rows[Hi-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Hi-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+Er(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class J0{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Kz(),this.logger=void 0;const i=this.logger=new qz;this.channels=[null,new Z0(e,t,i),new Z0(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,o=t[n+1]&127;let l=!1,c=null;if(i===0&&o===0)continue;this.logger.log(3,()=>"["+Ja([t[n],t[n+1]])+"] -> ("+Ja([i,o])+")");const u=this.cmdHistory;if(i>=16&&i<=31){if(Vz(i,o,u)){Ql(null,null,u),this.logger.log(3,()=>"Repeated command ("+Ja([i,o])+") is dropped");continue}Ql(i,o,this.cmdHistory),l=this.parseCmd(i,o),l||(l=this.parseMidrow(i,o)),l||(l=this.parsePAC(i,o)),l||(l=this.parseBackgroundAttributes(i,o))}else Ql(null,null,u);if(!l&&(c=this.parseChars(i,o),c)){const m=this.currentChannel;m&&m>0?this.channels[m].insertChars(c):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!l&&!c&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Ja([i,o])+" orig: "+Ja([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const o=e===20||e===21||e===23?1:2,l=this.channels[o];return e===20||e===21||e===28||e===29?t===32?l.ccRCL():t===33?l.ccBS():t===34?l.ccAOF():t===35?l.ccAON():t===36?l.ccDER():t===37?l.ccRU(2):t===38?l.ccRU(3):t===39?l.ccRU(4):t===40?l.ccFON():t===41?l.ccRDC():t===42?l.ccTR():t===43?l.ccRTD():t===44?l.ccEDM():t===45?l.ccCR():t===46?l.ccENM():t===47&&l.ccEOC():l.ccTO(t-32),this.currentChannel=o,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Ja([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,o=(e===16||e===24)&&t>=64&&t<=95;if(!(i||o))return!1;const l=e<=23?1:2;t>=64&&t<=95?n=l===1?zz[e]:Bz[e]:n=l===1?Uz[e]:$z[e];const c=this.channels[l];return c?(c.setPAC(this.interpretPAC(n,t)),this.currentChannel=l,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,o=null;if(e>=25?(n=2,o=e-8):(n=1,o=e),o>=17&&o<=19){let l;o===17?l=t+80:o===18?l=t+112:l=t+144,this.logger.log(2,()=>"Special char '"+CS(l)+"' in channel "+n),i=[l]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+Ja(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let o;const l={};e===16||e===24?(o=Math.floor((t-32)/2),l.background=jz[o],t%2===1&&(l.background=l.background+"_semi")):t===45?l.background="transparent":(l.foreground="black",t===47&&(l.underline=!0));const c=e<=23?1:2;return this.channels[c].setBkgData(l),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Ql(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Ql(r,e,t){t.a=r,t.b=e}function Vz(r,e,t){return t.a===r&&t.b===e}function Kz(){return{a:null,b:null}}var Im=(function(){if(Gc!=null&&Gc.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(c,u){if(typeof u!="string"||!Array.isArray(c))return!1;const d=u.toLowerCase();return~c.indexOf(d)?d:!1}function n(c){return t(r,c)}function i(c){return t(e,c)}function o(c,...u){let d=1;for(;d<arguments.length;d++){const m=arguments[d];for(const f in m)c[f]=m[f]}return c}function l(c,u,d){const m=this,f={enumerable:!0};m.hasBeenReset=!1;let h="",g=!1,p=c,E=u,S=d,A=null,x="",k=!0,U="auto",Y="start",Q=50,L="middle",O=50,G="middle";Object.defineProperty(m,"id",o({},f,{get:function(){return h},set:function(te){h=""+te}})),Object.defineProperty(m,"pauseOnExit",o({},f,{get:function(){return g},set:function(te){g=!!te}})),Object.defineProperty(m,"startTime",o({},f,{get:function(){return p},set:function(te){if(typeof te!="number")throw new TypeError("Start time must be set to a number.");p=te,this.hasBeenReset=!0}})),Object.defineProperty(m,"endTime",o({},f,{get:function(){return E},set:function(te){if(typeof te!="number")throw new TypeError("End time must be set to a number.");E=te,this.hasBeenReset=!0}})),Object.defineProperty(m,"text",o({},f,{get:function(){return S},set:function(te){S=""+te,this.hasBeenReset=!0}})),Object.defineProperty(m,"region",o({},f,{get:function(){return A},set:function(te){A=te,this.hasBeenReset=!0}})),Object.defineProperty(m,"vertical",o({},f,{get:function(){return x},set:function(te){const ge=n(te);if(ge===!1)throw new SyntaxError("An invalid or illegal string was specified.");x=ge,this.hasBeenReset=!0}})),Object.defineProperty(m,"snapToLines",o({},f,{get:function(){return k},set:function(te){k=!!te,this.hasBeenReset=!0}})),Object.defineProperty(m,"line",o({},f,{get:function(){return U},set:function(te){if(typeof te!="number"&&te!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");U=te,this.hasBeenReset=!0}})),Object.defineProperty(m,"lineAlign",o({},f,{get:function(){return Y},set:function(te){const ge=i(te);if(!ge)throw new SyntaxError("An invalid or illegal string was specified.");Y=ge,this.hasBeenReset=!0}})),Object.defineProperty(m,"position",o({},f,{get:function(){return Q},set:function(te){if(te<0||te>100)throw new Error("Position must be between 0 and 100.");Q=te,this.hasBeenReset=!0}})),Object.defineProperty(m,"positionAlign",o({},f,{get:function(){return L},set:function(te){const ge=i(te);if(!ge)throw new SyntaxError("An invalid or illegal string was specified.");L=ge,this.hasBeenReset=!0}})),Object.defineProperty(m,"size",o({},f,{get:function(){return O},set:function(te){if(te<0||te>100)throw new Error("Size must be between 0 and 100.");O=te,this.hasBeenReset=!0}})),Object.defineProperty(m,"align",o({},f,{get:function(){return G},set:function(te){const ge=i(te);if(!ge)throw new SyntaxError("An invalid or illegal string was specified.");G=ge,this.hasBeenReset=!0}})),m.displayState=void 0}return l.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},l})();class Yz{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function LS(r){function e(n,i,o,l){return(n|0)*3600+(i|0)*60+(o|0)+parseFloat(l||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}let Wz=class{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}};function NS(r,e,t,n){const i=n?r.split(n):[r];for(const o in i){if(typeof i[o]!="string")continue;const l=i[o].split(t);if(l.length!==2)continue;const c=l[0],u=l[1];e(c,u)}}const _h=new Im(0,0,""),Zl=_h.align==="middle"?"middle":"center";function Xz(r,e,t){const n=r;function i(){const c=LS(r);if(c===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),c}function o(c,u){const d=new Wz;NS(c,function(h,g){let p;switch(h){case"region":for(let E=t.length-1;E>=0;E--)if(t[E].id===g){d.set(h,t[E].region);break}break;case"vertical":d.alt(h,g,["rl","lr"]);break;case"line":p=g.split(","),d.integer(h,p[0]),d.percent(h,p[0])&&d.set("snapToLines",!1),d.alt(h,p[0],["auto"]),p.length===2&&d.alt("lineAlign",p[1],["start",Zl,"end"]);break;case"position":p=g.split(","),d.percent(h,p[0]),p.length===2&&d.alt("positionAlign",p[1],["start",Zl,"end","line-left","line-right","auto"]);break;case"size":d.percent(h,g);break;case"align":d.alt(h,g,["start",Zl,"end","left","right"]);break}},/:/,/\s/),u.region=d.get("region",null),u.vertical=d.get("vertical","");let m=d.get("line","auto");m==="auto"&&_h.line===-1&&(m=-1),u.line=m,u.lineAlign=d.get("lineAlign","start"),u.snapToLines=d.get("snapToLines",!0),u.size=d.get("size",100),u.align=d.get("align",Zl);let f=d.get("position","auto");f==="auto"&&_h.position===50&&(f=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=f}function l(){r=r.replace(/^\s+/,"")}if(l(),e.startTime=i(),l(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),l(),e.endTime=i(),l(),o(r,e)}function DS(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class Qz{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Yz,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let o=t.buffer,l=0;for(o=DS(o);l<o.length&&o[l]!=="\r"&&o[l]!==`
`;)++l;const c=o.slice(0,l);return o[l]==="\r"&&++l,o[l]===`
`&&++l,t.buffer=o.slice(l),c}function i(o){NS(o,function(l,c){},/:/)}try{let o="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;o=n();const c=o.match(/^()?WEBVTT([ \t].*)?$/);if(!(c!=null&&c[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let l=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:o=n(),t.state){case"HEADER":/:/.test(o)?i(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new Im(0,0,""),t.state="CUE",o.indexOf("-->")===-1){t.cue.id=o;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Xz(o,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const c=o.indexOf("-->")!==-1;if(!o||c&&(l=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=o}continue;case"BADCUE":o||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Zz=/\r\n|\n\r|\n|\r/g,zd=function(e,t,n=0){return e.slice(n,n+t.length)===t},Jz=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),o=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!yn(t)||!yn(n)||!yn(i)||!yn(o))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=3600*1e3*o,t};function Am(r,e,t){return Oo(r.toString())+Oo(e.toString())+Oo(t)}const eU=function(e,t,n){let i=e[t],o=e[i.prevCC];if(!o||!o.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(l=o)!=null&&l.new;){var l;e.ccOffset+=i.start-o.start,i.new=!1,i=o,o=e[i.prevCC]}e.presentationOffset=n};function tU(r,e,t,n,i,o,l){const c=new Qz,u=bi(new Uint8Array(r)).trim().replace(Zz,`
`).split(`
`),d=[],m=e?o2(e.baseTime,e.timescale):0;let f="00:00.000",h=0,g=0,p,E=!0;c.oncue=function(S){const A=t[n];let x=t.ccOffset;const k=(h-m)/9e4;if(A!=null&&A.new&&(g!==void 0?x=t.ccOffset=A.start:eU(t,n,k)),k){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}x=k-t.presentationOffset}const U=S.endTime-S.startTime,Y=fi((S.startTime+x-g)*9e4,i*9e4)/9e4;S.startTime=Math.max(Y,0),S.endTime=Math.max(Y+U,0);const Q=S.text.trim();S.text=decodeURIComponent(encodeURIComponent(Q)),S.id||(S.id=Am(S.startTime,S.endTime,Q)),S.endTime>0&&d.push(S)},c.onparsingerror=function(S){p=S},c.onflush=function(){if(p){l(p);return}o(d)},u.forEach(S=>{if(E)if(zd(S,"X-TIMESTAMP-MAP=")){E=!1,S.slice(16).split(",").forEach(A=>{zd(A,"LOCAL:")?f=A.slice(6):zd(A,"MPEGTS:")&&(h=parseInt(A.slice(7)))});try{g=Jz(f)/1e3}catch(A){p=A}return}else S===""&&(E=!1);c.parse(S+`
`)}),c.flush()}const Ud="stpp.ttml.im1t",PS=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,MS=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,nU={left:"start",center:"center",right:"end",start:"start",end:"end"};function eE(r,e,t,n){const i=Wn(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const o=i.map(c=>bi(c)),l=s2(e.baseTime,1,e.timescale);try{o.forEach(c=>t(rU(c,l)))}catch(c){n(c)}}function rU(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},l=Object.keys(o).reduce((f,h)=>(f[h]=i.getAttribute(`ttp:${h}`)||o[h],f),{}),c=i.getAttribute("xml:space")!=="preserve",u=tE(Bd(i,"styling","style")),d=tE(Bd(i,"layout","region")),m=Bd(i,"body","[begin]");return[].map.call(m,f=>{const h=OS(f,c);if(!h||!f.hasAttribute("begin"))return null;const g=jd(f.getAttribute("begin"),l),p=jd(f.getAttribute("dur"),l);let E=jd(f.getAttribute("end"),l);if(g===null)throw nE(f);if(E===null){if(p===null)throw nE(f);E=g+p}const S=new Im(g-e,E-e,h);S.id=Am(S.startTime,S.endTime,S.text);const A=d[f.getAttribute("region")],x=u[f.getAttribute("style")],k=iU(A,x,u),{textAlign:U}=k;if(U){const Y=nU[U];Y&&(S.lineAlign=Y),S.align=U}return pr(S,k),S}).filter(f=>f!==null)}function Bd(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function tE(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function OS(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var o;return n.nodeName==="br"&&i?t+`
`:(o=n.childNodes)!=null&&o.length?OS(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function iU(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],l=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return l&&t.hasOwnProperty(l)&&(i=t[l]),o.reduce((c,u)=>{const d=$d(e,n,u)||$d(r,n,u)||$d(i,n,u);return d&&(c[u]=d),c},{})}function $d(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function nE(r){return new Error(`Could not parse ttml timestamp ${r}`)}function jd(r,e){if(!r)return null;let t=LS(r);return t===null&&(PS.test(r)?t=aU(r,e):MS.test(r)&&(t=sU(r,e))),t}function aU(r,e){const t=PS.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function sU(r,e){const t=MS.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Jl{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class oU{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=iE(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ye.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ye.FRAG_LOADING,this.onFragLoading,this),e.on(ye.FRAG_LOADED,this.onFragLoaded,this),e.on(ye.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(ye.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(ye.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ye.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(ye.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ye.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ye.FRAG_LOADING,this.onFragLoading,this),e.off(ye.FRAG_LOADED,this.onFragLoaded,this),e.off(ye.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(ye.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(ye.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ye.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(ye.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Jl(this,"textTrack1"),t=new Jl(this,"textTrack2"),n=new Jl(this,"textTrack3"),i=new Jl(this,"textTrack4");this.cea608Parser1=new J0(1,e,t),this.cea608Parser2=new J0(3,n,i)}addCues(e,t,n,i,o){let l=!1;for(let c=o.length;c--;){const u=o[c],d=lU(u[0],u[1],t,n);if(d>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],n),l=!0,d/(n-t)>.5))return}if(l||o.push([t,n]),this.config.renderTextTracksNatively){const c=this.captionsTracks[e];this.Cues.newCue(c,t,n,i)}else{const c=this.Cues.newCue(null,t,n,i);this.hls.trigger(ye.CUES_PARSED,{type:"captions",cues:c,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:o,trackId:l}){const{unparsedVttFrags:c}=this;n===xn.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:o,trackId:l}),c.length&&(this.unparsedVttFrags=[],c.forEach(u=>{this.initPTS[u.frag.cc]?this.onFragLoaded(ye.FRAG_LOADED,u):this.hls.trigger(ye.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const o=n.textTracks[i];if(rE(o,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return o}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:o,languageCode:l}=t[e],c=this.getExistingTrack(o,l);if(c)n[e]=c,Gs(n[e]),IS(n[e],i);else{const u=this.createTextTrack("captions",o,l);u&&(u[e]=!0,n[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(ye.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(o=>{Gs(i[o]),delete i[o]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=iE(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)Gs(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(o=>o.textCodec===Ud);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(hS(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const l=this.media,c=l?fc(l.textTracks):null;if(this.tracks.forEach((u,d)=>{let m;if(c){let f=null;for(let h=0;h<c.length;h++)if(c[h]&&rE(c[h],u)){f=c[h],c[h]=null;break}f&&(m=f)}if(m)Gs(m);else{const f=FS(u);m=this.createTextTrack(f,u.name,u.lang),m&&(m.mode="disabled")}m&&this.textTracks.push(m)}),c!=null&&c.length){const u=c.filter(d=>d!==null).map(d=>d.label);u.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const l=this.tracks.map(c=>({label:c.name,kind:c.type.toLowerCase(),default:c.default,subtitleTrack:c}));this.hls.trigger(ye.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const o=`textTrack${i[1]}`,l=this.captionsProperties[o];l&&(l.label=n.name,n.lang&&(l.languageCode=n.lang),l.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===xn.MAIN){var n,i;const{cea608Parser1:o,cea608Parser2:l,lastSn:c}=this,{cc:u,sn:d}=t.frag,m=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;o&&l&&(d!==c+1||d===c&&m!==this.lastPartIndex+1||u!==this.lastCc)&&(o.reset(),l.reset()),this.lastCc=u,this.lastSn=d,this.lastPartIndex=m}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===xn.SUBTITLE)if(i.byteLength){const o=n.decryptdata,l="stats"in t;if(o==null||!o.encrypted||l){const c=this.tracks[n.level],u=this.vttCCs;u[n.cc]||(u[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),c&&c.textCodec===Ud?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(ye.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;eE(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(ye.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(ye.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:o,unparsedVttFrags:l}=this,c=o.length-1;if(!o[n.cc]&&c===-1){l.push(e);return}const u=this.hls,d=(t=n.initSegment)!=null&&t.data?Ni(n.initSegment.data,new Uint8Array(i)).buffer:i;tU(d,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,m=>{this._appendCues(m,n.level),u.trigger(ye.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},m=>{const f=m.message==="Missing initPTS for VTT MPEGTS";f?l.push(e):this._fallbackToIMSC1(n,i),u.logger.log(`Failed to parse VTT cue: ${m}`),!(f&&c>n.cc)&&u.trigger(ye.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:m})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||eE(t,this.initPTS[e.cc],()=>{n.textCodec=Ud,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(o=>AS(i,o))}else{const i=this.tracks[t];if(!i)return;const o=i.default?"default":"subtitles"+t;n.trigger(ye.CUES_PARSED,{type:"subtitles",cues:e,track:o})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===xn.SUBTITLE&&this.onFragLoaded(ye.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=t;if(!(n.type===xn.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let o=0;o<i.length;o++){const l=i[o].bytes;if(l){this.cea608Parser1||this.initCea608Parsers();const c=this.extractCea608Data(l);this.cea608Parser1.addData(i[o].pts,c[0]),this.cea608Parser2.addData(i[o].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:o}){const{media:l}=this;if(!(!l||l.currentTime<n)){if(!o||o==="video"){const{captionsTracks:c}=this;Object.keys(c).forEach(u=>wh(c[u],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:c}=this;Object.keys(c).forEach(u=>wh(c[u],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let o=0;o<n;o++){const l=e[i++],c=127&e[i++],u=127&e[i++];if(c===0&&u===0)continue;if((4&l)!==0){const m=3&l;(m===0||m===1)&&(t[m].push(c),t[m].push(u))}}return t}}function FS(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function rE(r,e){return!!r&&r.kind===FS(e)&&Eh(e,r)}function lU(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function iE(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const cU=/\s/,uU={newCue(r,e,t,n){const i=[];let o,l,c,u,d;const m=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(o=n.rows[h],c=!0,u=0,d="",!o.isEmpty()){var f;for(let E=0;E<o.chars.length;E++)cU.test(o.chars[E].uchar)&&c?u++:(d+=o.chars[E].uchar,c=!1);o.cueStartTime=e,e===t&&(t+=1e-4),u>=16?u--:u++;const g=DS(d.trim()),p=Am(e,t,g);r!=null&&(f=r.cues)!=null&&f.getCueById(p)||(l=new m(e,t,g),l.id=p,l.line=h+1,l.align="left",l.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(l))}return r&&i.length&&(i.sort((h,g)=>h.line==="auto"||g.line==="auto"?0:h.line>8&&g.line>8?g.line-h.line:h.line-g.line),i.forEach(h=>AS(r,h))),i}};function dU(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const fU=/(\d+)-(\d+)\/(\d+)/;class aE{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||pU,this.controller=new self.AbortController,this.stats=new am}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const o=hU(e,this.controller.signal),l=e.responseType==="arraybuffer",c=l?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),t.timeout=u&&yn(u)?u:d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(Qo(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(f=>{var h;this.response=this.loader=f;const g=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},d-(g-i.loading.start)),!f.ok){const{status:E,statusText:S}=f;throw new yU(S||"fetch, bad network response",E,f)}i.loading.first=g,i.total=gU(f.headers)||i.total;const p=(h=this.callbacks)==null?void 0:h.onProgress;return p&&yn(t.highWaterMark)?this.loadProgressively(f,i,e,t.highWaterMark,p):l?f.arrayBuffer():e.responseType==="json"?f.json():f.text()}).then(f=>{var h,g;const p=this.response;if(!p)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const E=f[c];E&&(i.loaded=i.total=E);const S={url:p.url,data:f,code:p.status},A=(h=this.callbacks)==null?void 0:h.onProgress;A&&!yn(t.highWaterMark)&&A(i,e,f,p),(g=this.callbacks)==null||g.onSuccess(S,i,e,p)}).catch(f=>{var h;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const g=f&&f.code||0,p=f?f.message:null;(h=this.callbacks)==null||h.onError({code:g,text:p},e,f?f.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,o){const l=new KT,c=e.body.getReader(),u=()=>c.read().then(d=>{if(d.done)return l.dataLength&&o(t,n,l.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const m=d.value,f=m.length;return t.loaded+=f,f<i||l.dataLength?(l.push(m),l.dataLength>=i&&o(t,n,l.flush().buffer,e)):o(t,n,m.buffer,e),u()}).catch(()=>Promise.reject());return u()}}function hU(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(pr({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function mU(r){const e=fU.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function gU(r){const e=r.get("Content-Range");if(e){const n=mU(e);if(yn(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function pU(r,e){return new self.Request(r.url,e)}class yU extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const bU=/^age:\s*[\d.]+\s*$/im;class zS{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new am,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const o=this.xhrSetup;o?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return o(n,t.url)}).catch(l=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),o(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(l=>{var c;(c=this.callbacks)==null||c.onError({code:n.status,text:l.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:o,maxLoadTimeMs:l}=n.loadPolicy;if(i)for(const c in i)e.setRequestHeader(c,i[c]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=o&&yn(o)?o:l,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,o=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),o.timeout!==o.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),o.timeout=o.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const d=t.status,m=t.responseType==="text"?t.responseText:null;if(d>=200&&d<300){const p=m??t.response;if(p!=null){var l,c;n.loading.end=Math.max(self.performance.now(),n.loading.first);const E=t.responseType==="arraybuffer"?p.byteLength:p.length;n.loaded=n.total=E,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const S=(l=this.callbacks)==null?void 0:l.onProgress;S&&S(n,e,p,t);const A={url:t.responseURL,data:p,code:d};(c=this.callbacks)==null||c.onSuccess(A,n,e,t);return}}const f=o.loadPolicy.errorRetry,h=n.retry,g={url:e.url,data:void 0,code:d};if(jc(f,h,!1,g))this.retry(f);else{var u;hr.error(`${d} while loading ${e.url}`),(u=this.callbacks)==null||u.onError({code:d,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(jc(e,t,!0))this.retry(e);else{var n;hr.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=cm(e,n.retry),n.retry++,hr.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&bU.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const EU={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},vU=fr(fr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:zS,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:NO,bufferController:S2,capLevelController:wm,errorController:FO,fpsController:wz,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:OT,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:EU},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},TU()),{},{subtitleStreamController:Mz,subtitleTrackController:Iz,timelineController:oU,audioStreamController:b2,audioTrackController:E2,emeController:Xs,cmcdController:Ez,contentSteeringController:Tz,interstitialsController:Pz});function TU(){return{cueHandler:uU,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function SU(r,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=xh(r),i=["manifest","level","frag"],o=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(l=>{const c=`${l==="level"?"playlist":l}LoadPolicy`,u=e[c]===void 0,d=[];o.forEach(m=>{const f=`${l}Loading${m}`,h=e[f];if(h!==void 0&&u){d.push(f);const g=n[c].default;switch(e[c]={default:g},m){case"TimeOut":g.maxLoadTimeMs=h,g.maxTimeToFirstByteMs=h;break;case"MaxRetry":g.errorRetry.maxNumRetry=h,g.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":g.errorRetry.retryDelayMs=h,g.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":g.errorRetry.maxRetryDelayMs=h,g.timeoutRetry.maxRetryDelayMs=h;break}}}),d.length&&t.warn(`hls.js config: "${d.join('", "')}" setting(s) are deprecated, use "${c}": ${Er(e[c])}`)}),fr(fr({},n),e)}function xh(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(xh):Object.keys(r).reduce((e,t)=>(e[t]=xh(r[t]),e),{}):r}function wU(r,e){const t=r.loader;t!==aE&&t!==zS?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):dU()&&(r.loader=aE,r.progressive=!0,r.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const hc=2,_U=.1,xU=.05,IU=100;class AU extends LT{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(ye.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ye.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ye.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(IU),this.mediaSource=t.mediaSource;const n=this.media=t.media;Wr(n,"playing",this.onMediaPlaying),Wr(n,"waiting",this.onMediaWaiting),Wr(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(ii(n,"playing",this.onMediaPlaying),ii(n,"waiting",this.onMediaWaiting),ii(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,i;const o=(n=this.hls)==null?void 0:n.config;if(!o)return;const l=this.media;if(!l)return;const{seeking:c}=l,u=this.seeking&&!c,d=!this.seeking&&c,m=l.paused&&!c||l.ended||l.playbackRate===0;if(this.seeking=c,e!==t){t&&(this.ended=0),this.moved=!0,c||(this.nudgeRetry=0,o.nudgeOnVideoHole&&!m&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(d||u){u&&this.stallResolved(e);return}if(m){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&l.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(ye.MEDIA_ENDED,{stalled:!1}));return}if(!qn.getBuffered(l).length){this.nudgeRetry=0;return}const f=qn.bufferInfo(l,e,0),h=f.nextStart||0,g=this.fragmentTracker;if(c&&g&&this.hls){const Q=sE(this.hls.inFlightFragments,e),L=f.len>hc,O=!h||Q||h-e>hc&&!g.getPartialFragment(e);if(L||O)return;this.moved=!1}const p=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&g){if(!(f.len>0)&&!h)return;const L=Math.max(h,f.start||0)-e,G=!!(p!=null&&p.live)?p.targetduration*2:hc,te=ec(e,g);if(L>0&&(L<=G||te)){l.paused||this._trySkipBufferHole(te);return}}const E=o.detectStallWithCurrentTimeMs,S=self.performance.now(),A=this.waiting;let x=this.stalled;if(x===null)if(A>0&&S-A<E)x=this.stalled=A;else{this.stalled=S;return}const k=S-x;if(!c&&(k>=E||A)&&this.hls){var U;if(((U=this.mediaSource)==null?void 0:U.readyState)==="ended"&&!(p!=null&&p.live)&&Math.abs(e-(p?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(ye.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(f),!this.media||!this.hls)return}const Y=qn.bufferInfo(l,e,o.maxBufferHole);this._tryFixBufferStall(Y,k,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(ye.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const o=qn.bufferedInfo(qn.timeRangesToArray(this.buffered.audio),e,0);if(o.len>1&&t>=o.start){const l=qn.timeRangesToArray(i),c=qn.bufferedInfo(l,t,0).bufferedIndex;if(c>-1&&c<l.length-1){const u=qn.bufferedInfo(l,e,0).bufferedIndex,d=l[c].end,m=l[c+1].start;if((u===-1||u>c)&&m-d<1&&e-d<2){const f=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${d} -> ${m} buffered index: ${u}`);this.warn(f.message),this.media.currentTime+=1e-6;let h=ec(e,this.fragmentTracker);h&&"fragment"in h?h=h.fragment:h||(h=void 0);const g=qn.bufferInfo(this.media,e,0);this.hls.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:h,buffer:g.len,bufferInfo:g})}}}}}_tryFixBufferStall(e,t,n){var i,o;const{fragmentTracker:l,media:c}=this,u=(i=this.hls)==null?void 0:i.config;if(!c||!l||!u)return;const d=(o=this.hls)==null?void 0:o.latestLevelDetails,m=ec(n,l);if((m||d!=null&&d.live&&n<d.fragmentStart)&&(this._trySkipBufferHole(m)||!this.media))return;const f=e.buffered,h=this.adjacentTraversal(e,n);(f&&f.length>1&&e.len>u.maxBufferHole||e.nextStart&&(e.nextStart-n<u.maxBufferHole||h))&&(t>u.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,i=e.nextStart;if(n&&i){const o=n.getFragAtPos(t,xn.MAIN),l=n.getFragAtPos(i,xn.MAIN);if(o&&l)return l.sn-o.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:i,stalled:o}=this;if(!i&&o!==null&&n&&t){this.stallReported=!0;const l=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${Er(e)})`);this.warn(l.message),t.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.BUFFER_STALLED_ERROR,fatal:!1,error:l,buffer:e.len,bufferInfo:e,stalled:{start:o}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:i}=this,o=(t=this.hls)==null?void 0:t.config;if(!i||!n||!o)return 0;const l=i.currentTime,c=qn.bufferInfo(i,l,0),u=l<c.start?c.start:c.nextStart;if(u&&this.hls){const m=c.len<=o.maxBufferHole,f=c.len>0&&c.len<1&&i.readyState<3,h=u-l;if(h>0&&(m||f)){if(h>o.maxBufferHole){let p=!1;if(l===0){const E=n.getAppendedFrag(0,xn.MAIN);E&&u<E.end&&(p=!0)}if(!p&&e){var d;if(!((d=this.hls.loadLevelObj)!=null&&d.details)||sE(this.hls.inFlightFragments,u))return 0;let S=!1,A=e.end;for(;A<u;){const x=ec(A,n);if(x)A+=x.duration;else{S=!0;break}}if(S)return 0}}const g=Math.max(u+xU,l+_U);if(this.warn(`skipping hole, adjusting currentTime from ${l} to ${g}`),this.moved=!0,i.currentTime=g,!(e!=null&&e.gap)){const p=new Error(`fragment loaded with buffer holes, seeking from ${l} to ${g}`),E={type:Nn.MEDIA_ERROR,details:vt.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,buffer:c.len,bufferInfo:c};e&&("fragment"in e?E.part=e:E.frag=e),this.hls.trigger(ye.ERROR,E)}return g}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:i}=this,o=t?.config;if(!n||!o)return 0;const l=n.currentTime;if(this.nudgeRetry++,i<o.nudgeMaxRetry){const c=l+(i+1)*o.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${l} to ${c}`);this.warn(u.message),n.currentTime=c,t.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1,buffer:e.len,bufferInfo:e})}else{const c=new Error(`Playhead still not moving while enough data buffered @${l} after ${o.nudgeMaxRetry} nudges`);this.error(c.message),t.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.BUFFER_STALLED_ERROR,error:c,fatal:!0,buffer:e.len,bufferInfo:e})}}}function sE(r,e){const t=oE(r.main);if(t&&t.start<=e)return t;const n=oE(r.audio);return n&&n.start<=e?n:null}function oE(r){if(!r)return null;switch(r.state){case Qt.IDLE:case Qt.STOPPED:case Qt.ENDED:case Qt.ERROR:return null}return r.frag}function ec(r,e){return e.getAppendedFrag(r,xn.MAIN)||e.getPartialFragment(r)}const RU=.25;function Ih(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function qd(r,e,t,n,i){let o=new r(e,t,"");try{o.value=n,i&&(o.type=i)}catch{o=new r(e,t,Er(i?fr({type:i},n):n))}return o}const tc=(()=>{const r=Ih();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class CU{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(ye.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(ye.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ye.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ye.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(ye.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(ye.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ye.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ye.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&Gs(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return IS(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;const{samples:o}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=Ih();if(l)for(let c=0;c<o.length;c++){const u=o[c].type;if(u===mi.emsg&&!n||!i)continue;const d=eS(o[c].data),m=o[c].pts;let f=m+o[c].duration;f>tc&&(f=tc),f-m<=0&&(f=m+RU);for(let g=0;g<d.length;g++){const p=d[g];if(!tS(p)){this.updateId3CueEnds(m,u);const E=qd(l,m,f,p,u);E&&this.id3Track.addCue(E)}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let o=i.length;o--;){const l=i[o];l.type===t&&l.startTime<e&&l.endTime===tc&&(l.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:o,hls:l}=this;if(!l)return;const{config:{enableEmsgMetadataCues:c,enableID3MetadataCues:u}}=l;if(o&&(c||u)){let d;i==="audio"?d=m=>m.type===mi.audioId3&&u:i==="video"?d=m=>m.type===mi.emsg&&c:d=m=>m.type===mi.audioId3&&u||m.type===mi.emsg&&c,wh(o,t,n,d)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:o,interstitialsController:l}=this.hls.config;if(!o)return;const c=Ih();if(n&&i&&!l){const{fragmentStart:E,fragmentEnd:S}=e;let A=this.assetCue;A?(A.startTime=E,A.endTime=S):c&&(A=this.assetCue=qd(c,E,S,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),A&&(A.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(A),A.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:u}=this,{dateRanges:d}=e,m=Object.keys(d);let f=this.dateRangeCuesAppended;if(u&&t){var h;if((h=u.cues)!=null&&h.length){const E=Object.keys(f).filter(S=>!m.includes(S));for(let S=E.length;S--;){var g;const A=E[S],x=(g=f[A])==null?void 0:g.cues;delete f[A],x&&Object.keys(x).forEach(k=>{const U=x[k];if(U){U.removeEventListener("enter",this.onEventCueEnter);try{u.removeCue(U)}catch{}}})}}else f=this.dateRangeCuesAppended={}}const p=e.fragments[e.fragments.length-1];if(!(m.length===0||!yn(p?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let E=0;E<m.length;E++){const S=m[E],A=d[S],x=A.startTime,k=f[S],U=k?.cues||{};let Y=k?.durationKnown||!1,Q=tc;const{duration:L,endDate:O}=A;if(O&&L!==null)Q=x+L,Y=!0;else if(A.endOnNext&&!Y){const te=m.reduce((ge,Me)=>{if(Me!==A.id){const he=d[Me];if(he.class===A.class&&he.startDate>A.startDate&&(!ge||A.startDate<ge.startDate))return he}return ge},null);te&&(Q=te.startTime,Y=!0)}const G=Object.keys(A.attr);for(let te=0;te<G.length;te++){const ge=G[te];if(!XO(ge))continue;const Me=U[ge];if(Me)Y&&!(k!=null&&k.durationKnown)?Me.endTime=Q:Math.abs(Me.startTime-x)>.01&&(Me.startTime=x,Me.endTime=Q);else if(c){let he=A.attr[ge];QO(ge)&&(he=dT(he));const _e=qd(c,x,Q,{key:ge,data:he},mi.dateRange);_e&&(_e.id=S,this.id3Track.addCue(_e),U[ge]=_e,l&&(ge==="X-ASSET-LIST"||ge==="X-ASSET-URL")&&_e.addEventListener("enter",this.onEventCueEnter))}}f[S]={cues:U,dateRange:A,durationKnown:Y}}}}}class kU{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:o,maxLiveSyncPlaybackRate:l}=this.config;if(!o||l===1||!n.live)return;const c=this.targetLatency;if(c===null)return;const u=i-c,d=Math.min(this.maxLatency,c+n.targetduration);if(u<d&&u>.05&&this.forwardBufferLength>1){const f=Math.min(2,Math.max(1,l)),h=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20,g=Math.min(f,Math.max(1,h));this.changeMediaPlaybackRate(t,g)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:o,liveSyncDurationCount:l,lowLatencyMode:c}=this.config,u=this.hls.userConfig;let d=c&&n||t;(this._targetLatencyUpdated||u.liveSyncDuration||u.liveSyncDurationCount||d===0)&&(d=o!==void 0?o:l*i);const m=i;return d+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,m)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,o=e-t-this.edgeStalled,l=i-n.totalduration,c=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(l,o),c)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ye.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(ye.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ye.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ye.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===vt.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,i;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class LU extends Sm{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ye.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ye.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ye.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ye.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ye.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ye.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],o={},l={};let c=!1,u=!1,d=!1;t.levels.forEach(m=>{const f=m.attrs;let{audioCodec:h,videoCodec:g}=m;h&&(m.audioCodec=h=zc(h,n)||void 0),g&&(g=m.videoCodec=hO(g));const{width:p,height:E,unknownCodecs:S}=m,A=S?.length||0;if(c||(c=!!(p&&E)),u||(u=!!g),d||(d=!!h),A||h&&!this.isAudioSupported(h)||g&&!this.isVideoSupported(g)){this.log(`Some or all CODECS not supported "${f.CODECS}"`);return}const{CODECS:x,"FRAME-RATE":k,"HDCP-LEVEL":U,"PATHWAY-ID":Y,RESOLUTION:Q,"VIDEO-RANGE":L}=f,G=`${`${Y||"."}-`}${m.bitrate}-${Q}-${k}-${x}-${L}-${U}`;if(o[G])if(o[G].uri!==m.url&&!m.attrs["PATHWAY-ID"]){const te=l[G]+=1;m.attrs["PATHWAY-ID"]=new Array(te+1).join(".");const ge=this.createLevel(m);o[G]=ge,i.push(ge)}else o[G].addGroupId("audio",f.AUDIO),o[G].addGroupId("text",f.SUBTITLES);else{const te=this.createLevel(m);o[G]=te,l[G]=1,i.push(te)}}),this.filterAndSortMediaOptions(i,t,c,u,d)}createLevel(e){const t=new Yo(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),t.supportedResult=wT(i,[])}return t}isAudioSupported(e){return Vo(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Vo(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,i,o){var l;let c=[],u=[],d=e;const m=((l=t.stats)==null?void 0:l.parsing)||{};if((n||i)&&o&&(d=d.filter(({videoCodec:x,videoRange:k,width:U,height:Y})=>(!!x||!!(U&&Y))&&wO(k))),d.length===0){Promise.resolve().then(()=>{if(this.hls){let x="no level with compatible codecs found in manifest",k=x;t.levels.length&&(k=`one or more CODECS in variant not supported: ${Er(t.levels.map(Y=>Y.attrs.CODECS).filter((Y,Q,L)=>L.indexOf(Y)===Q))}`,this.warn(k),x+=` (${k})`);const U=new Error(x);this.hls.trigger(ye.ERROR,{type:Nn.MEDIA_ERROR,details:vt.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:U,reason:k})}}),m.end=performance.now();return}t.audioTracks&&(c=t.audioTracks.filter(x=>!x.audioCodec||this.isAudioSupported(x.audioCodec)),lE(c)),t.subtitles&&(u=t.subtitles,lE(u));const f=d.slice(0);d.sort((x,k)=>{if(x.attrs["HDCP-LEVEL"]!==k.attrs["HDCP-LEVEL"])return(x.attrs["HDCP-LEVEL"]||"")>(k.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&x.height!==k.height)return x.height-k.height;if(x.frameRate!==k.frameRate)return x.frameRate-k.frameRate;if(x.videoRange!==k.videoRange)return Uc.indexOf(x.videoRange)-Uc.indexOf(k.videoRange);if(x.videoCodec!==k.videoCodec){const U=Jb(x.videoCodec),Y=Jb(k.videoCodec);if(U!==Y)return Y-U}if(x.uri===k.uri&&x.codecSet!==k.codecSet){const U=Fc(x.codecSet),Y=Fc(k.codecSet);if(U!==Y)return Y-U}return x.averageBitrate!==k.averageBitrate?x.averageBitrate-k.averageBitrate:0});let h=f[0];if(this.steering&&(d=this.steering.filterParsedLevels(d),d.length!==f.length)){for(let x=0;x<f.length;x++)if(f[x].pathwayId===d[0].pathwayId){h=f[x];break}}this._levels=d;for(let x=0;x<d.length;x++)if(d[x]===h){var g;this._firstLevel=x;const k=h.bitrate,U=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${d.length} level(s) found, first bitrate: ${k}`),((g=this.hls.userConfig)==null?void 0:g.abrEwmaDefaultEstimate)===void 0){const Y=Math.min(k,this.hls.config.abrEwmaDefaultEstimateMax);Y>U&&U===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=Y)}break}const p=o&&!i,E=this.hls.config,S=!!(E.audioStreamController&&E.audioTrackController),A={levels:d,audioTracks:c,subtitleTracks:u,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:i,altAudio:S&&!p&&c.some(x=>!!x.url)};m.end=performance.now(),this.hls.trigger(ye.MANIFEST_PARSED,A)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const m=new Error("invalid level idx"),f=e<0;if(this.hls.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.LEVEL_SWITCH_ERROR,level:e,fatal:f,error:m,reason:m.message}),f)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,o=i?i.attrs["PATHWAY-ID"]:void 0,l=t[e],c=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=l,n===e&&i&&o===c)return;this.log(`Switching to level ${e} (${l.height?l.height+"p ":""}${l.videoRange?l.videoRange+" ":""}${l.codecSet?l.codecSet+" ":""}@${l.bitrate})${c?" with Pathway "+c:""} from level ${n}${o?" with Pathway "+o:""}`);const u={level:e,attrs:l.attrs,details:l.details,bitrate:l.bitrate,averageBitrate:l.averageBitrate,maxBitrate:l.maxBitrate,realBitrate:l.realBitrate,width:l.width,height:l.height,codecSet:l.codecSet,audioCodec:l.audioCodec,videoCodec:l.videoCodec,audioGroups:l.audioGroups,subtitleGroups:l.subtitleGroups,loaded:l.loaded,loadError:l.loadError,fragmentError:l.fragmentError,name:l.name,id:l.id,uri:l.uri,url:l.url,urlId:0,audioGroupIds:l.audioGroupIds,textGroupIds:l.textGroupIds};this.hls.trigger(ye.LEVEL_SWITCHING,u);const d=l.details;if(!d||d.live){const m=this.switchParams(l.uri,i?.details,d);this.loadPlaylist(m)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===Qn.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===xn.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(o=>!!n[o]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:o}=t,l=t.levelInfo;if(!l){var c;this.warn(`Invalid level index ${i}`),(c=t.deliveryDirectives)!=null&&c.skip&&(o.deltaUpdateFailed=!0);return}if(l===this.currentLevel||t.withoutMultiVariant){l.fragmentError===0&&(l.loadError=0);let u=l.details;u===t.details&&u.advanced&&(u=void 0),this.playlistLoaded(i,t,u)}else(n=t.deliveryDirectives)!=null&&n.skip&&(o.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,o=e.attrs["PATHWAY-ID"],l=e.details,c=l?.age;this.log(`Loading level index ${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o?" Pathway "+o:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${n}`),this.hls.trigger(ye.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((o,l)=>l!==e?!0:(this.steering&&this.steering.removeLevel(o),o===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,o.details&&o.details.fragments.forEach(c=>c.level=-1)),!1));GT(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(ye.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(ye.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function lE(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function US(){return self.SourceBuffer||self.WebKitSourceBuffer}function BS(){if(!$a())return!1;const e=US();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function NU(){if(!BS())return!1;const r=$a();return typeof r?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(Ko(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(Ko(e,"audio"))))}function DU(){var r;const e=US();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const PU=100;class MU extends mm{constructor(e,t,n){super(e,t,n,"stream-controller",xn.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,o=i?i.currentTime:null;if(o===null||!yn(o)||(this.log(`Media seeked to ${o.toFixed(3)}`),!this.getBufferedFrag(o)))return;const l=this.getFwdBufferInfoAtPos(i,o,xn.MAIN,0);if(l===null||l.len===0){this.warn(`Main forward buffer length at ${o} on "seeked" event ${l?l.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ye.LEVEL_LOADING,this.onLevelLoading,this),e.on(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ye.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(ye.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ye.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(ye.BUFFER_CREATED,this.onBufferCreated,this),e.on(ye.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ye.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ye.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(ye.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ye.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ye.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(ye.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ye.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(ye.BUFFER_CREATED,this.onBufferCreated,this),e.off(ye.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ye.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ye.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(PU),this.level=-1,!this.startFragRequested){let o=i.startLevel;o===-1&&(i.config.testBandwidth&&this.levels.length>1?(o=0,this.bitrateTest=!0):o=i.firstAutoLevel),i.nextLoadLevel=o,this.level=i.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Qt.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Qt.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Qt.WAITING_LEVEL:{const{levels:e,level:t}=this,n=e?.[t],i=n?.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=Qt.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Qt.IDLE;break}break}case Qt.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Qt.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const o=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[o]))return;const l=n[o],c=this.getMainFwdBufferInfo();if(c===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(c,u)){const E={};this.altAudio===2&&(E.type="video"),this.hls.trigger(ye.BUFFER_EOS,E),this.state=Qt.ENDED;return}if(!this.buffering)return;e.loadLevel!==o&&e.manualLevel===-1&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const d=l.details;if(!d||this.state===Qt.WAITING_LEVEL||this.waitForLive(l)){this.level=o,this.state=Qt.WAITING_LEVEL,this.startFragRequested=!1;return}const m=c.len,f=this.getMaxBufferLength(l.maxBitrate);if(m>=f)return;this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:c.end;let g=this.getNextFragment(h,d);if(this.couldBacktrack&&!this.fragPrevious&&g&&kr(g)&&this.fragmentTracker.getState(g)!==Or.OK){var p;const S=((p=this.backtrackFragment)!=null?p:g).sn-d.startSN,A=d.fragments[S-1];A&&g.cc===A.cc&&(g=A,this.fragmentTracker.removeFragment(A))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(g&&this.isLoopLoading(g,h)){if(!g.gap){const S=this.audioOnly&&!this.altAudio?br.AUDIO:br.VIDEO,A=(S===br.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;A&&this.afterBufferFlushed(A,S,xn.MAIN)}g=this.getNextFragmentLoopLoading(g,d,c,xn.MAIN,f)}g&&(g.initSegment&&!g.initSegment.data&&!this.bitrateTest&&(g=g.initSegment),this.loadFragment(g,l,h))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);i===Or.NOT_LOADED||i===Or.PARTIAL?kr(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,xn.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const o=this.getLevelDetails();if(o!=null&&o.live){const c=this.getMainFwdBufferInfo();if(!c||c.len<o.targetduration*2)return}if(!t.paused&&e){const c=this.hls.nextLoadLevel,u=e[c],d=this.fragLastKbps;d&&this.fragCurrent?n=this.fragCurrent.duration*u.maxBitrate/(1e3*d)+1:n=0}else n=0;const l=this.getBufferedFrag(t.currentTime+n);if(l){const c=this.followingBufferedFrag(l);if(c){this.abortCurrentFrag();const u=c.maxStartPTS?c.maxStartPTS:c.start,d=c.duration,m=Math.max(l.end,u+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(m,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Qt.KEY_LOADING:case Qt.FRAG_LOADING:case Qt.FRAG_LOADING_WAITING_RETRY:case Qt.PARSING:case Qt.PARSED:this.state=Qt.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;Wr(n,"playing",this.onMediaPlaying),Wr(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(ii(n,"playing",this.onMediaPlaying),ii(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(ye.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,i=!1;for(let o=0;o<t.levels.length;o++){const l=t.levels[o].audioCodec;l&&(n=n||l.indexOf("mp4a.40.2")!==-1,i=i||l.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!DU(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Qt.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=Qt.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i,startFragRequested:o}=this,l=t.level,c=t.details,u=c.totalduration;if(!i){this.warn(`Levels were reset while loading level ${l}`);return}this.log(`Level ${l} loaded [${c.startSN},${c.endSN}]${c.lastPartSn?`[part-${c.lastPartSn}-${c.lastPartIndex}]`:""}, cc [${c.startCC}, ${c.endCC}] duration:${u}`);const d=t.levelInfo,m=this.fragCurrent;m&&(this.state===Qt.FRAG_LOADING||this.state===Qt.FRAG_LOADING_WAITING_RETRY)&&m.level!==t.level&&m.loader&&this.abortCurrentFrag();let f=0;if(c.live||(n=d.details)!=null&&n.live){var h;if(this.checkLiveUpdate(c),c.deltaUpdateFailed)return;f=this.alignPlaylists(c,d.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(d.details=c,this.levelLastLoaded=d,o||this.setStartPosition(c,f),this.hls.trigger(ye.LEVEL_UPDATED,{details:c,level:l}),this.state===Qt.WAITING_LEVEL){if(this.waitForCdnTuneIn(c))return;this.state=Qt.IDLE}o&&c.live&&this.synchronizeToLiveEdge(c),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,o=this.getLoadPosition(),l=e.fragmentStart,c=e.edge,u=o>=l-t.maxFragLookUpTolerance&&o<=c;if(i!==null&&n.duration>i&&(o<i||!u)){const m=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!u&&n.readyState<4||o<c-m)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${o.toFixed(3)} is located too far from the end of live sliding playlist: ${c}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var d;const f=qn.bufferInfo(n,i,0);if(!((d=f.buffered)!=null&&d.length)){n.currentTime=i;return}if(f.start<=o){n.currentTime=i;return}const{nextStart:g}=qn.bufferedInfo(f.buffered,o,0);g&&(n.currentTime=g)}else n.currentTime=i}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:o}=e,{levels:l}=this;if(!l){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=l[n.level];if(!c){this.warn(`Level ${n.level} not found on progress`);return}const u=c.details;if(!u){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const d=c.videoCodec,m=u.PTSKnown||!u.live,f=(t=n.initSegment)==null?void 0:t.data,h=this._getAudioCodec(c),g=this.transmuxer=this.transmuxer||new fS(this.hls,xn.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=i?i.index:-1,E=p!==-1,S=new dm(n.level,n.sn,n.stats.chunkCount,o.byteLength,p,E),A=this.initPTS[n.cc];g.push(o,f,h,d,n,i,u.totalduration,m,S,A)}onAudioTrackSwitching(e,t){const n=this.hls,i=this.altAudio!==0;if(Bc(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const l=this.fragCurrent;l&&(this.log("Switching to main audio track, cancel main fragment load"),l.abortRequests(),this.fragmentTracker.removeFragment(l)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once(ye.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(ye.AUDIO_TRACK_SWITCHED,t)}),n.trigger(ye.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(ye.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=Bc(t.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,o,l=!1;for(const c in n){const u=n[c];if(u.id==="main"){if(o=c,i=u,c==="video"){const d=n[c];d&&(this.videoBuffer=d.buffer)}}else l=!0}l&&i?(this.log(`Alternate track found, use ${o}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t,o=n.type===xn.MAIN;if(o){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Qt.PARSED&&(this.state=Qt.IDLE);return}const c=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*c.total/(c.buffering.end-c.loading.first)),kr(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const l=this.media;l&&(!this._hasEnoughToStart&&qn.getBuffered(l).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),o&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=Qt.ERROR;return}switch(t.details){case vt.FRAG_GAP:case vt.FRAG_PARSING_ERROR:case vt.FRAG_DECRYPT_ERROR:case vt.FRAG_LOAD_ERROR:case vt.FRAG_LOAD_TIMEOUT:case vt.KEY_LOAD_ERROR:case vt.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(xn.MAIN,t);break;case vt.LEVEL_LOAD_ERROR:case vt.LEVEL_LOAD_TIMEOUT:case vt.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Qt.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===Qn.LEVEL&&(this.state=Qt.IDLE);break;case vt.BUFFER_ADD_CODEC_ERROR:case vt.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case vt.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case vt.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=Qt.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==br.AUDIO||!this.altAudio){const n=(t===br.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,xn.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const o=this.getLevelDetails(),l=qn.getBuffered(e),c=l.length?l.start(0):0,u=c-n,d=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||u>0&&(u<d||this.loadingParts&&u<2*(o?.partTarget||0)))&&(this.log(`adjusting start position by ${u} to match buffer start`),n+=u,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${c}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this,o=n?.frag;if(!o||this.fragContextChanged(o))return;t.fragmentError=0,this.state=Qt.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const l=o.stats;l.parsing.start=l.parsing.end=l.buffering.start=l.buffering.end=self.performance.now(),i.trigger(ye.FRAG_LOADED,n),o.bitrateTest=!1}).catch(n=>{this.state===Qt.STOPPED||this.state===Qt.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:o}=e,l=this.getCurrentContext(o);if(!l){this.resetWhenMissingContext(o);return}const{frag:c,part:u,level:d}=l,{video:m,text:f,id3:h,initSegment:g}=i,{details:p}=d,E=this.altAudio?void 0:i.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=Qt.PARSING,g){const S=g.tracks;if(S){const U=c.initSegment||c;if(this.unhandledEncryptionError(g,c))return;this._bufferInitSegment(d,S,U,o),n.trigger(ye.FRAG_PARSING_INIT_SEGMENT,{frag:U,id:t,tracks:S})}const A=g.initPTS,x=g.timescale,k=this.initPTS[c.cc];if(yn(A)&&(!k||k.baseTime!==A||k.timescale!==x)){const U=g.trackId;this.initPTS[c.cc]={baseTime:A,timescale:x,trackId:U},n.trigger(ye.INIT_PTS_FOUND,{frag:c,id:t,initPTS:A,timescale:x,trackId:U})}}if(m&&p){E&&m.type==="audiovideo"&&this.logMuxedErr(c);const S=p.fragments[c.sn-1-p.startSN],A=c.sn===p.startSN,x=!S||c.cc>S.cc;if(i.independent!==!1){const{startPTS:k,endPTS:U,startDTS:Y,endDTS:Q}=m;if(u)u.elementaryStreams[m.type]={startPTS:k,endPTS:U,startDTS:Y,endDTS:Q};else if(m.firstKeyFrame&&m.independent&&o.id===1&&!x&&(this.couldBacktrack=!0),m.dropped&&m.independent){const L=this.getMainFwdBufferInfo(),O=(L?L.end:this.getLoadPosition())+this.config.maxBufferHole,G=m.firstKeyFramePTS?m.firstKeyFramePTS:k;if(!A&&O<G-this.config.maxBufferHole&&!x){this.backtrack(c);return}else x&&(c.gap=!0);c.setElementaryStreamInfo(m.type,c.start,U,c.start,Q,!0)}else A&&k-(p.appliedTimelineOffset||0)>hc&&(c.gap=!0);c.setElementaryStreamInfo(m.type,k,U,Y,Q),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(m,c,u,o,A||x)}else if(A||x)c.gap=!0;else{this.backtrack(c);return}}if(E){const{startPTS:S,endPTS:A,startDTS:x,endDTS:k}=E;u&&(u.elementaryStreams[br.AUDIO]={startPTS:S,endPTS:A,startDTS:x,endDTS:k}),c.setElementaryStreamInfo(br.AUDIO,S,A,x,k),this.bufferFragmentData(E,c,u,o)}if(p&&h!=null&&h.samples.length){const S={id:t,frag:c,details:p,samples:h.samples};n.trigger(ye.FRAG_PARSING_METADATA,S)}if(p&&f){const S={id:t,frag:c,details:p,samples:f.samples};n.trigger(ye.FRAG_PARSING_USERDATA,S)}}logMuxedErr(e){this.warn(`${kr(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,i){if(this.state!==Qt.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:o,video:l,audiovideo:c}=t;if(o){const d=e.audioCodec;let m=sc(o.codec,d);m==="mp4a"&&(m="mp4a.40.5");const f=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){m&&(m.indexOf("mp4a.40.5")!==-1?m="mp4a.40.2":m="mp4a.40.5");const h=o.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&f.indexOf("firefox")===-1&&(m="mp4a.40.5")}m&&m.indexOf("mp4a.40.5")!==-1&&f.indexOf("android")!==-1&&o.container!=="audio/mpeg"&&(m="mp4a.40.2",this.log(`Android: force audio codec to ${m}`)),d&&d!==m&&this.log(`Swapping manifest audio codec "${d}" for "${m}"`),o.levelCodec=m,o.id=xn.MAIN,this.log(`Init audio buffer, container:${o.container}, codecs[selected/level/parsed]=[${m||""}/${d||""}/${o.codec}]`),delete t.audiovideo}if(l){l.levelCodec=e.videoCodec,l.id=xn.MAIN;const d=l.codec;if(d?.length===4)switch(d){case"hvc1":case"hev1":l.codec="hvc1.1.6.L120.90";break;case"av01":l.codec="av01.0.04M.08";break;case"avc1":l.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${l.container}, codecs[level/parsed]=[${e.videoCodec||""}/${d}]${l.codec!==d?" parsed-corrected="+l.codec:""}${l.supplemental?" supplemental="+l.supplemental:""}`),delete t.audiovideo}c&&(this.log(`Init audiovideo buffer, container:${c.container}, codecs[level/parsed]=[${e.codecs}/${c.codec}]`),delete t.video,delete t.audio);const u=Object.keys(t);if(u.length){if(this.hls.trigger(ye.BUFFER_CODECS,t),!this.hls)return;u.forEach(d=>{const f=t[d].initSegment;f!=null&&f.byteLength&&this.hls.trigger(ye.BUFFER_APPENDING,{type:d,data:f,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,xn.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e?.[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Qt.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(qn.isBuffered(e,n)?t=this.getAppendedFrag(n):qn.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,o=t.level;(!i||t.sn!==i.sn||i.level!==o)&&(this.fragPlaying=t,this.hls.trigger(ye.FRAG_CHANGED,{frag:t}),(!i||i.level!==o)&&this.hls.trigger(ye.LEVEL_SWITCHED,{level:o}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return yn(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(yn(t)){const n=this.getLevelDetails(),i=this.currentFrag||(n?ls(null,n.fragments,t):null);if(i){const o=i.programDateTime;if(o!==null){const l=o+(t-i.start)*1e3;return new Date(l)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class OU extends Pi{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=vt.KEY_LOAD_ERROR,n,i,o){return new pa({type:Nn.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:o,error:n,networkDetails:i})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let i=0,o=t.length;i<o;i++){const l=t[i];if(e.cc<=l.cc&&(!kr(e)||!kr(l)||e.sn<l.sn)||!n&&i==o-1)return this.emeController.selectKeySystemFormat(l).then(c=>{if(!this.emeController)return;l.setKeyFormat(c);const u=lc(c);if(u)return this.emeController.getKeySystemAccess([u])})}if(this.config.requireKeySystemAccessOnStart){const i=Ro(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const o=e.decryptdata;if(!o){const d=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,vt.KEY_LOAD_ERROR,d))}const l=o.uri;if(!l)return Promise.reject(this.createKeyLoadError(e,vt.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${l}"`)));const c=Gd(o);let u=this.keyIdToKeyInfo[c];if((n=u)!=null&&n.decryptdata.key)return o.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if(this.emeController&&(i=u)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(u.decryptdata)){case"usable":case"usable-in-future":return u.keyLoadPromise.then(m=>{const{keyInfo:f}=m;return o.key=f.decryptdata.key,{frag:e,keyInfo:f}})}switch(this.log(`${this.keyIdToKeyInfo[c]?"Rel":"L"}oading${o.keyId?" keyId: "+qr(o.keyId):""} URI: ${o.uri} from ${e.type} ${e.level}`),u=this.keyIdToKeyInfo[c]={decryptdata:o,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},o.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return o.keyFormat==="identity"?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,vt.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${o.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=t.initSegment)!=null&&i.data){const l=tO(t.initSegment.data);if(l.length){let c=l[0];c.some(u=>u!==0)?(this.log(`Using keyId found in init segment ${qr(c)}`),Ua.setKeyIdForUri(e.decryptdata.uri,c)):(c=Ua.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${qr(c)}`)),e.decryptdata.keyId=c}}if(!e.decryptdata.keyId&&!kr(t))return Promise.resolve(n);const o=this.emeController.loadKey(n);return(e.keyLoadPromise=o.then(l=>(e.mediaKeySessionContext=l,n))).catch(l=>{throw e.keyLoadPromise=null,"data"in l&&(l.data.frag=t),l})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,o=new i(n);return t.keyLoader=e.loader=o,e.keyLoadPromise=new Promise((l,c)=>{const u={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},d=n.keyLoadPolicy.default,m={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,g,p,E)=>{const{frag:S,keyInfo:A}=p,x=Gd(A.decryptdata);if(!S.decryptdata||A!==this.keyIdToKeyInfo[x])return c(this.createKeyLoadError(S,vt.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),E));A.decryptdata.key=S.decryptdata.key=new Uint8Array(h.data),S.keyLoader=null,A.loader=null,l({frag:S,keyInfo:A})},onError:(h,g,p,E)=>{this.resetLoader(g),c(this.createKeyLoadError(t,vt.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),p,fr({url:u.url,data:void 0},h)))},onTimeout:(h,g,p)=>{this.resetLoader(g),c(this.createKeyLoadError(t,vt.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(h,g,p)=>{this.resetLoader(g),c(this.createKeyLoadError(t,vt.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};o.load(u,m,f)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,o=n.loader;t.keyLoader===o&&(t.keyLoader=null,n.loader=null);const l=Gd(n.decryptdata)||i;delete this.keyIdToKeyInfo[l],o&&o.destroy()}}function Gd(r){if(r.keyFormat!==Gr.FAIRPLAY){const e=r.keyId;if(e)return qr(e)}return r.uri}function cE(r){const{type:e}=r;switch(e){case Qn.AUDIO_TRACK:return xn.AUDIO;case Qn.SUBTITLE_TRACK:return xn.SUBTITLE;default:return xn.MAIN}}function Hd(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class FU{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ye.LEVEL_LOADING,this.onLevelLoading,this),e.on(ye.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(ye.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(ye.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(ye.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ye.LEVEL_LOADING,this.onLevelLoading,this),e.off(ye.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(ye.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(ye.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,o=n||i,l=new o(t);return this.loaders[e.type]=l,l}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Qn.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:o,url:l,deliveryDirectives:c,levelInfo:u}=t;this.load({id:n,level:i,pathwayId:o,responseType:"text",type:Qn.LEVEL,url:l,deliveryDirectives:c,levelOrTrack:u})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:o,deliveryDirectives:l,track:c}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Qn.AUDIO_TRACK,url:o,deliveryDirectives:l,levelOrTrack:c})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:o,deliveryDirectives:l,track:c}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Qn.SUBTITLE_TRACK,url:o,deliveryDirectives:l,levelOrTrack:c})}onLevelsUpdated(e,t){const n=this.loaders[Qn.LEVEL];if(n){const i=n.context;i&&!t.levels.some(o=>o===i.levelOrTrack)&&(n.abort(),delete this.loaders[Qn.LEVEL])}}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const d=this.hls.logger,m=i.context;if(m&&m.levelOrTrack===e.levelOrTrack&&(m.url===e.url||m.deliveryDirectives&&!e.deliveryDirectives)){m.url===e.url?d.log(`[playlist-loader]: ignore ${e.url} ongoing request`):d.log(`[playlist-loader]: ignore ${e.url} in favor of ${m.url}`);return}d.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let o;if(e.type===Qn.MANIFEST?o=n.manifestLoadPolicy.default:o=pr({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),yn((t=e.deliveryDirectives)==null?void 0:t.part)){let d;if(e.type===Qn.LEVEL&&e.level!==null?d=this.hls.levels[e.level].details:e.type===Qn.AUDIO_TRACK&&e.id!==null?d=this.hls.audioTracks[e.id].details:e.type===Qn.SUBTITLE_TRACK&&e.id!==null&&(d=this.hls.subtitleTracks[e.id].details),d){const m=d.partTarget,f=d.targetduration;if(m&&f){const h=Math.max(m*3,f*.8)*1e3;o=pr({},o,{maxTimeToFirstByteMs:Math.min(h,o.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,o.maxTimeToFirstByteMs)})}}}const l=o.errorRetry||o.timeoutRetry||{},c={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},u={onSuccess:(d,m,f,h)=>{const g=this.getInternalLoader(f);this.resetInternalLoader(f.type);const p=d.data;m.parsing.start=performance.now(),aa.isMediaPlaylist(p)||f.type!==Qn.MANIFEST?this.handleTrackOrLevelPlaylist(d,m,f,h||null,g):this.handleMasterPlaylist(d,m,f,h)},onError:(d,m,f,h)=>{this.handleNetworkError(m,f,!1,d,h)},onTimeout:(d,m,f)=>{this.handleNetworkError(m,f,!0,void 0,d)}};i.load(e,c,u)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,i){const o=this.hls,l=e.data,c=Hd(e,n),u=aa.parseMasterPlaylist(l,c);if(u.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,n,u.playlistParsingError,i,t);return}const{contentSteering:d,levels:m,sessionData:f,sessionKeys:h,startTimeOffset:g,variableList:p}=u;this.variableList=p,m.forEach(x=>{const{unknownCodecs:k}=x;if(k){const{preferManagedMediaSource:U}=this.hls.config;let{audioCodec:Y,videoCodec:Q}=x;for(let L=k.length;L--;){const O=k[L];Vo(O,"audio",U)?(x.audioCodec=Y=Y?`${Y},${O}`:O,eo.audio[Y.substring(0,4)]=2,k.splice(L,1)):Vo(O,"video",U)&&(x.videoCodec=Q=Q?`${Q},${O}`:O,eo.video[Q.substring(0,4)]=2,k.splice(L,1))}}});const{AUDIO:E=[],SUBTITLES:S,"CLOSED-CAPTIONS":A}=aa.parseMasterPlaylistMedia(l,c,u);E.length&&!E.some(k=>!k.url)&&m[0].audioCodec&&!m[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),E.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new wr({}),bitrate:0,url:""})),o.trigger(ye.MANIFEST_LOADED,{levels:m,audioTracks:E,subtitles:S,captions:A,contentSteering:d,url:c,stats:t,networkDetails:i,sessionData:f,sessionKeys:h,startTimeOffset:g,variableList:p})}handleTrackOrLevelPlaylist(e,t,n,i,o){const l=this.hls,{id:c,level:u,type:d}=n,m=Hd(e,n),f=yn(u)?u:yn(c)?c:0,h=cE(n),g=aa.parseLevelPlaylist(e.data,m,f,h,0,this.variableList);if(d===Qn.MANIFEST){const p={attrs:new wr({}),bitrate:0,details:g,name:"",url:m};g.requestScheduled=t.loading.start+$T(g,0),l.trigger(ye.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:m,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=g,this.handlePlaylistLoaded(g,e,t,n,i,o)}handleManifestParsingError(e,t,n,i,o){this.hls.trigger(ye.ERROR,{type:Nn.NETWORK_ERROR,details:vt.MANIFEST_PARSING_ERROR,fatal:t.type===Qn.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:o})}handleNetworkError(e,t,n=!1,i,o){let l=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Qn.LEVEL?l+=`: ${e.level} id: ${e.id}`:(e.type===Qn.AUDIO_TRACK||e.type===Qn.SUBTITLE_TRACK)&&(l+=` id: ${e.id} group-id: "${e.groupId}"`);const c=new Error(l);this.hls.logger.warn(`[playlist-loader]: ${l}`);let u=vt.UNKNOWN,d=!1;const m=this.getInternalLoader(e);switch(e.type){case Qn.MANIFEST:u=n?vt.MANIFEST_LOAD_TIMEOUT:vt.MANIFEST_LOAD_ERROR,d=!0;break;case Qn.LEVEL:u=n?vt.LEVEL_LOAD_TIMEOUT:vt.LEVEL_LOAD_ERROR,d=!1;break;case Qn.AUDIO_TRACK:u=n?vt.AUDIO_TRACK_LOAD_TIMEOUT:vt.AUDIO_TRACK_LOAD_ERROR,d=!1;break;case Qn.SUBTITLE_TRACK:u=n?vt.SUBTITLE_TRACK_LOAD_TIMEOUT:vt.SUBTITLE_LOAD_ERROR,d=!1;break}m&&this.resetInternalLoader(e.type);const f={type:Nn.NETWORK_ERROR,details:u,fatal:d,url:e.url,loader:m,context:e,error:c,networkDetails:t,stats:o};if(i){const h=t?.url||e.url;f.response=fr({url:h,data:void 0},i)}this.hls.trigger(ye.ERROR,f)}handlePlaylistLoaded(e,t,n,i,o,l){const c=this.hls,{type:u,level:d,levelOrTrack:m,id:f,groupId:h,deliveryDirectives:g}=i,p=Hd(t,i),E=cE(i);let S=typeof i.level=="number"&&E===xn.MAIN?d:void 0;const A=e.playlistParsingError;if(A){if(this.hls.logger.warn(`${A} ${e.url}`),!c.config.ignorePlaylistParsingErrors){c.trigger(ye.ERROR,{type:Nn.NETWORK_ERROR,details:vt.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:A,reason:A.message,response:t,context:i,level:S,parent:E,networkDetails:o,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const x=e.playlistParsingError=new Error("No Segments found in Playlist");c.trigger(ye.ERROR,{type:Nn.NETWORK_ERROR,details:vt.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:x,reason:x.message,response:t,context:i,level:S,parent:E,networkDetails:o,stats:n});return}switch(e.live&&l&&(l.getCacheAge&&(e.ageHeader=l.getCacheAge()||0),(!l.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case Qn.MANIFEST:case Qn.LEVEL:if(S){if(!m)S=0;else if(m!==c.levels[S]){const x=c.levels.indexOf(m);x>-1&&(S=x)}}c.trigger(ye.LEVEL_LOADED,{details:e,levelInfo:m||c.levels[0],level:S||0,id:f||0,stats:n,networkDetails:o,deliveryDirectives:g,withoutMultiVariant:u===Qn.MANIFEST});break;case Qn.AUDIO_TRACK:c.trigger(ye.AUDIO_TRACK_LOADED,{details:e,track:m,id:f||0,groupId:h||"",stats:n,networkDetails:o,deliveryDirectives:g});break;case Qn.SUBTITLE_TRACK:c.trigger(ye.SUBTITLE_TRACK_LOADED,{details:e,track:m,id:f||0,groupId:h||"",stats:n,networkDetails:o,deliveryDirectives:g});break}}}class Ri{static get version(){return Wo}static isMSESupported(){return BS()}static isSupported(){return NU()}static getMediaSource(){return $a()}static get Events(){return ye}static get MetadataSchema(){return mi}static get ErrorTypes(){return Nn}static get ErrorDetails(){return vt}static get DefaultConfig(){return Ri.defaultConfig?Ri.defaultConfig:vU}static set DefaultConfig(e){Ri.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new gm,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=qM(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=SU(Ri.DefaultConfig,e,t);this.userConfig=e,n.progressive&&wU(n,t);const{abrController:i,bufferController:o,capLevelController:l,errorController:c,fpsController:u}=n,d=new c(this),m=this.abrController=new i(this),f=new zO(this),h=n.interstitialsController,g=h?this.interstitialsController=new h(this,Ri):null,p=this.bufferController=new o(this,f),E=this.capLevelController=new l(this),S=new u(this),A=new FU(this),x=n.contentSteeringController,k=x?new x(this):null,U=this.levelController=new LU(this,k),Y=new CU(this),Q=new OU(this.config,this.logger),L=this.streamController=new MU(this,f,Q),O=this.gapController=new AU(this,f);E.setStreamController(L),S.setStreamController(L);const G=[A,U,L];g&&G.splice(1,0,g),k&&G.splice(1,0,k),this.networkControllers=G;const te=[m,p,O,E,S,Y,f];this.audioTrackController=this.createController(n.audioTrackController,G);const ge=n.audioStreamController;ge&&G.push(this.audioStreamController=new ge(this,f,Q)),this.subtitleTrackController=this.createController(n.subtitleTrackController,G);const Me=n.subtitleStreamController;Me&&G.push(this.subtititleStreamController=new Me(this,f,Q)),this.createController(n.timelineController,te),Q.emeController=this.emeController=this.createController(n.emeController,te),this.cmcdController=this.createController(n.cmcdController,te),this.latencyController=this.createController(kU,te),this.coreComponents=te,G.push(d);const he=d.onErrorOut;typeof he=="function"&&this.on(ye.ERROR,he,d),this.on(ye.MANIFEST_LOADED,A.onManifestLoaded,A)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===ye.ERROR;this.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(ye.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const o=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(ye.ERROR,{type:Nn.OTHER_ERROR,details:vt.ATTACH_MEDIA_ERROR,fatal:!0,error:o});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,i=t?e:{media:n};this._media=n,this.trigger(ye.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(ye.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(ye.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,i=this._url=im.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(ye.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[xn.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[xn.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[xn.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=Az()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){SO(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let o=i;o--;){const l=e[o].attrs["HDCP-LEVEL"];if(l&&l<=n)return o}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=IT(t);return _T(e,n,navigator.mediaCapabilities)}}Ri.defaultConfig=void 0;var zU={7267:function(r,e){e.byteLength=function(d){var m=c(d),f=m[0],h=m[1];return 3*(f+h)/4-h},e.toByteArray=function(d){var m,f,h=c(d),g=h[0],p=h[1],E=new i((function(x,k,U){return 3*(k+U)/4-U})(0,g,p)),S=0,A=p>0?g-4:g;for(f=0;f<A;f+=4)m=n[d.charCodeAt(f)]<<18|n[d.charCodeAt(f+1)]<<12|n[d.charCodeAt(f+2)]<<6|n[d.charCodeAt(f+3)],E[S++]=m>>16&255,E[S++]=m>>8&255,E[S++]=255&m;return p===2&&(m=n[d.charCodeAt(f)]<<2|n[d.charCodeAt(f+1)]>>4,E[S++]=255&m),p===1&&(m=n[d.charCodeAt(f)]<<10|n[d.charCodeAt(f+1)]<<4|n[d.charCodeAt(f+2)]>>2,E[S++]=m>>8&255,E[S++]=255&m),E},e.fromByteArray=function(d){for(var m,f=d.length,h=f%3,g=[],p=16383,E=0,S=f-h;E<S;E+=p)g.push(u(d,E,E+p>S?S:E+p));return h===1?(m=d[f-1],g.push(t[m>>2]+t[m<<4&63]+"==")):h===2&&(m=(d[f-2]<<8)+d[f-1],g.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),g.join("")};for(var t=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)t[l]=o[l],n[o.charCodeAt(l)]=l;function c(d){var m=d.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=d.indexOf("=");return f===-1&&(f=m),[f,f===m?0:4-f%4]}function u(d,m,f){for(var h,g,p=[],E=m;E<f;E+=3)h=(d[E]<<16&16711680)+(d[E+1]<<8&65280)+(255&d[E+2]),p.push(t[(g=h)>>18&63]+t[g>>12&63]+t[g>>6&63]+t[63&g]);return p.join("")}n[45]=62,n[95]=63},44:function(r,e,t){var n=t(7267),i=t(7986),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(H){return+H!=H&&(H=0),u.alloc(+H)},e.INSPECT_MAX_BYTES=50;var l=2147483647;function c(H){if(H>l)throw new RangeError('The value "'+H+'" is invalid for option "size"');var V=new Uint8Array(H);return Object.setPrototypeOf(V,u.prototype),V}function u(H,V,C){if(typeof H=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(H)}return d(H,V,C)}function d(H,V,C){if(typeof H=="string")return(function(Z,Be){if(typeof Be=="string"&&Be!==""||(Be="utf8"),!u.isEncoding(Be))throw new TypeError("Unknown encoding: "+Be);var Xe=0|E(Z,Be),$e=c(Xe),Ve=$e.write(Z,Be);return Ve!==Xe&&($e=$e.slice(0,Ve)),$e})(H,V);if(ArrayBuffer.isView(H))return(function(Z){if(xe(Z,Uint8Array)){var Be=new Uint8Array(Z);return g(Be.buffer,Be.byteOffset,Be.byteLength)}return h(Z)})(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(xe(H,ArrayBuffer)||H&&xe(H.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(H,SharedArrayBuffer)||H&&xe(H.buffer,SharedArrayBuffer)))return g(H,V,C);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var F=H.valueOf&&H.valueOf();if(F!=null&&F!==H)return u.from(F,V,C);var oe=(function(Z){if(u.isBuffer(Z)){var Be=0|p(Z.length),Xe=c(Be);return Xe.length===0||Z.copy(Xe,0,0,Be),Xe}return Z.length!==void 0?typeof Z.length!="number"||Ie(Z.length)?c(0):h(Z):Z.type==="Buffer"&&Array.isArray(Z.data)?h(Z.data):void 0})(H);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return u.from(H[Symbol.toPrimitive]("string"),V,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}function m(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function f(H){return m(H),c(H<0?0:0|p(H))}function h(H){for(var V=H.length<0?0:0|p(H.length),C=c(V),F=0;F<V;F+=1)C[F]=255&H[F];return C}function g(H,V,C){if(V<0||H.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<V+(C||0))throw new RangeError('"length" is outside of buffer bounds');var F;return F=V===void 0&&C===void 0?new Uint8Array(H):C===void 0?new Uint8Array(H,V):new Uint8Array(H,V,C),Object.setPrototypeOf(F,u.prototype),F}function p(H){if(H>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|H}function E(H,V){if(u.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||xe(H,ArrayBuffer))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);var C=H.length,F=arguments.length>2&&arguments[2]===!0;if(!F&&C===0)return 0;for(var oe=!1;;)switch(V){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return Ze(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*C;case"hex":return C>>>1;case"base64":return ct(H).length;default:if(oe)return F?-1:Ze(H).length;V=(""+V).toLowerCase(),oe=!0}}function S(H,V,C){var F=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((C===void 0||C>this.length)&&(C=this.length),C<=0)||(C>>>=0)<=(V>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return De(this,V,C);case"utf8":case"utf-8":return te(this,V,C);case"ascii":return Me(this,V,C);case"latin1":case"binary":return he(this,V,C);case"base64":return G(this,V,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,V,C);default:if(F)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),F=!0}}function A(H,V,C){var F=H[V];H[V]=H[C],H[C]=F}function x(H,V,C,F,oe){if(H.length===0)return-1;if(typeof C=="string"?(F=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),Ie(C=+C)&&(C=oe?0:H.length-1),C<0&&(C=H.length+C),C>=H.length){if(oe)return-1;C=H.length-1}else if(C<0){if(!oe)return-1;C=0}if(typeof V=="string"&&(V=u.from(V,F)),u.isBuffer(V))return V.length===0?-1:k(H,V,C,F,oe);if(typeof V=="number")return V&=255,typeof Uint8Array.prototype.indexOf=="function"?oe?Uint8Array.prototype.indexOf.call(H,V,C):Uint8Array.prototype.lastIndexOf.call(H,V,C):k(H,[V],C,F,oe);throw new TypeError("val must be string, number or Buffer")}function k(H,V,C,F,oe){var Z,Be=1,Xe=H.length,$e=V.length;if(F!==void 0&&((F=String(F).toLowerCase())==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(H.length<2||V.length<2)return-1;Be=2,Xe/=2,$e/=2,C/=2}function Ve(it,rt){return Be===1?it[rt]:it.readUInt16BE(rt*Be)}if(oe){var je=-1;for(Z=C;Z<Xe;Z++)if(Ve(H,Z)===Ve(V,je===-1?0:Z-je)){if(je===-1&&(je=Z),Z-je+1===$e)return je*Be}else je!==-1&&(Z-=Z-je),je=-1}else for(C+$e>Xe&&(C=Xe-$e),Z=C;Z>=0;Z--){for(var Qe=!0,dt=0;dt<$e;dt++)if(Ve(H,Z+dt)!==Ve(V,dt)){Qe=!1;break}if(Qe)return Z}return-1}function U(H,V,C,F){C=Number(C)||0;var oe=H.length-C;F?(F=Number(F))>oe&&(F=oe):F=oe;var Z=V.length;F>Z/2&&(F=Z/2);for(var Be=0;Be<F;++Be){var Xe=parseInt(V.substr(2*Be,2),16);if(Ie(Xe))return Be;H[C+Be]=Xe}return Be}function Y(H,V,C,F){return mt(Ze(V,H.length-C),H,C,F)}function Q(H,V,C,F){return mt((function(oe){for(var Z=[],Be=0;Be<oe.length;++Be)Z.push(255&oe.charCodeAt(Be));return Z})(V),H,C,F)}function L(H,V,C,F){return mt(ct(V),H,C,F)}function O(H,V,C,F){return mt((function(oe,Z){for(var Be,Xe,$e,Ve=[],je=0;je<oe.length&&!((Z-=2)<0);++je)Xe=(Be=oe.charCodeAt(je))>>8,$e=Be%256,Ve.push($e),Ve.push(Xe);return Ve})(V,H.length-C),H,C,F)}function G(H,V,C){return V===0&&C===H.length?n.fromByteArray(H):n.fromByteArray(H.slice(V,C))}function te(H,V,C){C=Math.min(H.length,C);for(var F=[],oe=V;oe<C;){var Z,Be,Xe,$e,Ve=H[oe],je=null,Qe=Ve>239?4:Ve>223?3:Ve>191?2:1;if(oe+Qe<=C)switch(Qe){case 1:Ve<128&&(je=Ve);break;case 2:(192&(Z=H[oe+1]))==128&&($e=(31&Ve)<<6|63&Z)>127&&(je=$e);break;case 3:Z=H[oe+1],Be=H[oe+2],(192&Z)==128&&(192&Be)==128&&($e=(15&Ve)<<12|(63&Z)<<6|63&Be)>2047&&($e<55296||$e>57343)&&(je=$e);break;case 4:Z=H[oe+1],Be=H[oe+2],Xe=H[oe+3],(192&Z)==128&&(192&Be)==128&&(192&Xe)==128&&($e=(15&Ve)<<18|(63&Z)<<12|(63&Be)<<6|63&Xe)>65535&&$e<1114112&&(je=$e)}je===null?(je=65533,Qe=1):je>65535&&(je-=65536,F.push(je>>>10&1023|55296),je=56320|1023&je),F.push(je),oe+=Qe}return(function(dt){var it=dt.length;if(it<=ge)return String.fromCharCode.apply(String,dt);for(var rt="",Ot=0;Ot<it;)rt+=String.fromCharCode.apply(String,dt.slice(Ot,Ot+=ge));return rt})(F)}e.kMaxLength=l,u.TYPED_ARRAY_SUPPORT=(function(){try{var H=new Uint8Array(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,Uint8Array.prototype),Object.setPrototypeOf(H,V),H.foo()===42}catch{return!1}})(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(H,V,C){return d(H,V,C)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(H,V,C){return(function(F,oe,Z){return m(F),F<=0?c(F):oe!==void 0?typeof Z=="string"?c(F).fill(oe,Z):c(F).fill(oe):c(F)})(H,V,C)},u.allocUnsafe=function(H){return f(H)},u.allocUnsafeSlow=function(H){return f(H)},u.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==u.prototype},u.compare=function(H,V){if(xe(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),xe(V,Uint8Array)&&(V=u.from(V,V.offset,V.byteLength)),!u.isBuffer(H)||!u.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===V)return 0;for(var C=H.length,F=V.length,oe=0,Z=Math.min(C,F);oe<Z;++oe)if(H[oe]!==V[oe]){C=H[oe],F=V[oe];break}return C<F?-1:F<C?1:0},u.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(H,V){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return u.alloc(0);var C;if(V===void 0)for(V=0,C=0;C<H.length;++C)V+=H[C].length;var F=u.allocUnsafe(V),oe=0;for(C=0;C<H.length;++C){var Z=H[C];if(xe(Z,Uint8Array))oe+Z.length>F.length?u.from(Z).copy(F,oe):Uint8Array.prototype.set.call(F,Z,oe);else{if(!u.isBuffer(Z))throw new TypeError('"list" argument must be an Array of Buffers');Z.copy(F,oe)}oe+=Z.length}return F},u.byteLength=E,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var V=0;V<H;V+=2)A(this,V,V+1);return this},u.prototype.swap32=function(){var H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var V=0;V<H;V+=4)A(this,V,V+3),A(this,V+1,V+2);return this},u.prototype.swap64=function(){var H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var V=0;V<H;V+=8)A(this,V,V+7),A(this,V+1,V+6),A(this,V+2,V+5),A(this,V+3,V+4);return this},u.prototype.toString=function(){var H=this.length;return H===0?"":arguments.length===0?te(this,0,H):S.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(H){if(!u.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||u.compare(this,H)===0},u.prototype.inspect=function(){var H="",V=e.INSPECT_MAX_BYTES;return H=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(H+=" ... "),"<Buffer "+H+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(H,V,C,F,oe){if(xe(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),!u.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(V===void 0&&(V=0),C===void 0&&(C=H?H.length:0),F===void 0&&(F=0),oe===void 0&&(oe=this.length),V<0||C>H.length||F<0||oe>this.length)throw new RangeError("out of range index");if(F>=oe&&V>=C)return 0;if(F>=oe)return-1;if(V>=C)return 1;if(this===H)return 0;for(var Z=(oe>>>=0)-(F>>>=0),Be=(C>>>=0)-(V>>>=0),Xe=Math.min(Z,Be),$e=this.slice(F,oe),Ve=H.slice(V,C),je=0;je<Xe;++je)if($e[je]!==Ve[je]){Z=$e[je],Be=Ve[je];break}return Z<Be?-1:Be<Z?1:0},u.prototype.includes=function(H,V,C){return this.indexOf(H,V,C)!==-1},u.prototype.indexOf=function(H,V,C){return x(this,H,V,C,!0)},u.prototype.lastIndexOf=function(H,V,C){return x(this,H,V,C,!1)},u.prototype.write=function(H,V,C,F){if(V===void 0)F="utf8",C=this.length,V=0;else if(C===void 0&&typeof V=="string")F=V,C=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(C)?(C>>>=0,F===void 0&&(F="utf8")):(F=C,C=void 0)}var oe=this.length-V;if((C===void 0||C>oe)&&(C=oe),H.length>0&&(C<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");for(var Z=!1;;)switch(F){case"hex":return U(this,H,V,C);case"utf8":case"utf-8":return Y(this,H,V,C);case"ascii":case"latin1":case"binary":return Q(this,H,V,C);case"base64":return L(this,H,V,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,H,V,C);default:if(Z)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ge=4096;function Me(H,V,C){var F="";C=Math.min(H.length,C);for(var oe=V;oe<C;++oe)F+=String.fromCharCode(127&H[oe]);return F}function he(H,V,C){var F="";C=Math.min(H.length,C);for(var oe=V;oe<C;++oe)F+=String.fromCharCode(H[oe]);return F}function De(H,V,C){var F=H.length;(!V||V<0)&&(V=0),(!C||C<0||C>F)&&(C=F);for(var oe="",Z=V;Z<C;++Z)oe+=Ke[H[Z]];return oe}function _e(H,V,C){for(var F=H.slice(V,C),oe="",Z=0;Z<F.length-1;Z+=2)oe+=String.fromCharCode(F[Z]+256*F[Z+1]);return oe}function ke(H,V,C){if(H%1!=0||H<0)throw new RangeError("offset is not uint");if(H+V>C)throw new RangeError("Trying to access beyond buffer length")}function Oe(H,V,C,F,oe,Z){if(!u.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>oe||V<Z)throw new RangeError('"value" argument is out of bounds');if(C+F>H.length)throw new RangeError("Index out of range")}function He(H,V,C,F,oe,Z){if(C+F>H.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function Pe(H,V,C,F,oe){return V=+V,C>>>=0,oe||He(H,0,C,4),i.write(H,V,C,F,23,4),C+4}function Ge(H,V,C,F,oe){return V=+V,C>>>=0,oe||He(H,0,C,8),i.write(H,V,C,F,52,8),C+8}u.prototype.slice=function(H,V){var C=this.length;(H=~~H)<0?(H+=C)<0&&(H=0):H>C&&(H=C),(V=V===void 0?C:~~V)<0?(V+=C)<0&&(V=0):V>C&&(V=C),V<H&&(V=H);var F=this.subarray(H,V);return Object.setPrototypeOf(F,u.prototype),F},u.prototype.readUintLE=u.prototype.readUIntLE=function(H,V,C){H>>>=0,V>>>=0,C||ke(H,V,this.length);for(var F=this[H],oe=1,Z=0;++Z<V&&(oe*=256);)F+=this[H+Z]*oe;return F},u.prototype.readUintBE=u.prototype.readUIntBE=function(H,V,C){H>>>=0,V>>>=0,C||ke(H,V,this.length);for(var F=this[H+--V],oe=1;V>0&&(oe*=256);)F+=this[H+--V]*oe;return F},u.prototype.readUint8=u.prototype.readUInt8=function(H,V){return H>>>=0,V||ke(H,1,this.length),this[H]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(H,V){return H>>>=0,V||ke(H,2,this.length),this[H]|this[H+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(H,V){return H>>>=0,V||ke(H,2,this.length),this[H]<<8|this[H+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(H,V){return H>>>=0,V||ke(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(H,V){return H>>>=0,V||ke(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},u.prototype.readIntLE=function(H,V,C){H>>>=0,V>>>=0,C||ke(H,V,this.length);for(var F=this[H],oe=1,Z=0;++Z<V&&(oe*=256);)F+=this[H+Z]*oe;return F>=(oe*=128)&&(F-=Math.pow(2,8*V)),F},u.prototype.readIntBE=function(H,V,C){H>>>=0,V>>>=0,C||ke(H,V,this.length);for(var F=V,oe=1,Z=this[H+--F];F>0&&(oe*=256);)Z+=this[H+--F]*oe;return Z>=(oe*=128)&&(Z-=Math.pow(2,8*V)),Z},u.prototype.readInt8=function(H,V){return H>>>=0,V||ke(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},u.prototype.readInt16LE=function(H,V){H>>>=0,V||ke(H,2,this.length);var C=this[H]|this[H+1]<<8;return 32768&C?4294901760|C:C},u.prototype.readInt16BE=function(H,V){H>>>=0,V||ke(H,2,this.length);var C=this[H+1]|this[H]<<8;return 32768&C?4294901760|C:C},u.prototype.readInt32LE=function(H,V){return H>>>=0,V||ke(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},u.prototype.readInt32BE=function(H,V){return H>>>=0,V||ke(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},u.prototype.readFloatLE=function(H,V){return H>>>=0,V||ke(H,4,this.length),i.read(this,H,!0,23,4)},u.prototype.readFloatBE=function(H,V){return H>>>=0,V||ke(H,4,this.length),i.read(this,H,!1,23,4)},u.prototype.readDoubleLE=function(H,V){return H>>>=0,V||ke(H,8,this.length),i.read(this,H,!0,52,8)},u.prototype.readDoubleBE=function(H,V){return H>>>=0,V||ke(H,8,this.length),i.read(this,H,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(H,V,C,F){H=+H,V>>>=0,C>>>=0,F||Oe(this,H,V,C,Math.pow(2,8*C)-1,0);var oe=1,Z=0;for(this[V]=255&H;++Z<C&&(oe*=256);)this[V+Z]=H/oe&255;return V+C},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(H,V,C,F){H=+H,V>>>=0,C>>>=0,F||Oe(this,H,V,C,Math.pow(2,8*C)-1,0);var oe=C-1,Z=1;for(this[V+oe]=255&H;--oe>=0&&(Z*=256);)this[V+oe]=H/Z&255;return V+C},u.prototype.writeUint8=u.prototype.writeUInt8=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,1,255,0),this[V]=255&H,V+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,2,65535,0),this[V]=255&H,this[V+1]=H>>>8,V+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,2,65535,0),this[V]=H>>>8,this[V+1]=255&H,V+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,4,4294967295,0),this[V+3]=H>>>24,this[V+2]=H>>>16,this[V+1]=H>>>8,this[V]=255&H,V+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,4,4294967295,0),this[V]=H>>>24,this[V+1]=H>>>16,this[V+2]=H>>>8,this[V+3]=255&H,V+4},u.prototype.writeIntLE=function(H,V,C,F){if(H=+H,V>>>=0,!F){var oe=Math.pow(2,8*C-1);Oe(this,H,V,C,oe-1,-oe)}var Z=0,Be=1,Xe=0;for(this[V]=255&H;++Z<C&&(Be*=256);)H<0&&Xe===0&&this[V+Z-1]!==0&&(Xe=1),this[V+Z]=(H/Be|0)-Xe&255;return V+C},u.prototype.writeIntBE=function(H,V,C,F){if(H=+H,V>>>=0,!F){var oe=Math.pow(2,8*C-1);Oe(this,H,V,C,oe-1,-oe)}var Z=C-1,Be=1,Xe=0;for(this[V+Z]=255&H;--Z>=0&&(Be*=256);)H<0&&Xe===0&&this[V+Z+1]!==0&&(Xe=1),this[V+Z]=(H/Be|0)-Xe&255;return V+C},u.prototype.writeInt8=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,1,127,-128),H<0&&(H=255+H+1),this[V]=255&H,V+1},u.prototype.writeInt16LE=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,2,32767,-32768),this[V]=255&H,this[V+1]=H>>>8,V+2},u.prototype.writeInt16BE=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,2,32767,-32768),this[V]=H>>>8,this[V+1]=255&H,V+2},u.prototype.writeInt32LE=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,4,2147483647,-2147483648),this[V]=255&H,this[V+1]=H>>>8,this[V+2]=H>>>16,this[V+3]=H>>>24,V+4},u.prototype.writeInt32BE=function(H,V,C){return H=+H,V>>>=0,C||Oe(this,H,V,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[V]=H>>>24,this[V+1]=H>>>16,this[V+2]=H>>>8,this[V+3]=255&H,V+4},u.prototype.writeFloatLE=function(H,V,C){return Pe(this,H,V,!0,C)},u.prototype.writeFloatBE=function(H,V,C){return Pe(this,H,V,!1,C)},u.prototype.writeDoubleLE=function(H,V,C){return Ge(this,H,V,!0,C)},u.prototype.writeDoubleBE=function(H,V,C){return Ge(this,H,V,!1,C)},u.prototype.copy=function(H,V,C,F){if(!u.isBuffer(H))throw new TypeError("argument should be a Buffer");if(C||(C=0),F||F===0||(F=this.length),V>=H.length&&(V=H.length),V||(V=0),F>0&&F<C&&(F=C),F===C||H.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),H.length-V<F-C&&(F=H.length-V+C);var oe=F-C;return this===H&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(V,C,F):Uint8Array.prototype.set.call(H,this.subarray(C,F),V),oe},u.prototype.fill=function(H,V,C,F){if(typeof H=="string"){if(typeof V=="string"?(F=V,V=0,C=this.length):typeof C=="string"&&(F=C,C=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!u.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(H.length===1){var oe=H.charCodeAt(0);(F==="utf8"&&oe<128||F==="latin1")&&(H=oe)}}else typeof H=="number"?H&=255:typeof H=="boolean"&&(H=Number(H));if(V<0||this.length<V||this.length<C)throw new RangeError("Out of range index");if(C<=V)return this;var Z;if(V>>>=0,C=C===void 0?this.length:C>>>0,H||(H=0),typeof H=="number")for(Z=V;Z<C;++Z)this[Z]=H;else{var Be=u.isBuffer(H)?H:u.from(H,F),Xe=Be.length;if(Xe===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Z=0;Z<C-V;++Z)this[Z+V]=Be[Z%Xe]}return this};var qe=/[^+/0-9A-Za-z-_]/g;function Ze(H,V){var C;V=V||1/0;for(var F=H.length,oe=null,Z=[],Be=0;Be<F;++Be){if((C=H.charCodeAt(Be))>55295&&C<57344){if(!oe){if(C>56319){(V-=3)>-1&&Z.push(239,191,189);continue}if(Be+1===F){(V-=3)>-1&&Z.push(239,191,189);continue}oe=C;continue}if(C<56320){(V-=3)>-1&&Z.push(239,191,189),oe=C;continue}C=65536+(oe-55296<<10|C-56320)}else oe&&(V-=3)>-1&&Z.push(239,191,189);if(oe=null,C<128){if((V-=1)<0)break;Z.push(C)}else if(C<2048){if((V-=2)<0)break;Z.push(C>>6|192,63&C|128)}else if(C<65536){if((V-=3)<0)break;Z.push(C>>12|224,C>>6&63|128,63&C|128)}else{if(!(C<1114112))throw new Error("Invalid code point");if((V-=4)<0)break;Z.push(C>>18|240,C>>12&63|128,C>>6&63|128,63&C|128)}}return Z}function ct(H){return n.toByteArray((function(V){if((V=(V=V.split("=")[0]).trim().replace(qe,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V})(H))}function mt(H,V,C,F){for(var oe=0;oe<F&&!(oe+C>=V.length||oe>=H.length);++oe)V[oe+C]=H[oe];return oe}function xe(H,V){return H instanceof V||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===V.name}function Ie(H){return H!=H}var Ke=(function(){for(var H="0123456789abcdef",V=new Array(256),C=0;C<16;++C)for(var F=16*C,oe=0;oe<16;++oe)V[F+oe]=H[C]+H[oe];return V})()},6877:function(r,e){var t={parseBuffer:function(o){return new n(o).parse()},addBoxProcessor:function(o,l){typeof o=="string"&&typeof l=="function"&&(i.prototype._boxProcessors[o]=l)},createFile:function(){return new n},createBox:function(o,l,c){var u=i.create(o);return l&&l.append(u,c),u},createFullBox:function(o,l,c){var u=t.createBox(o,l,c);return u.version=0,u.flags=0,u},Utils:{}};t.Utils.dataViewToString=function(o,l){var c=l||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(c).decode(o);var u=[],d=0;if(c==="utf-8")for(;d<o.byteLength;){var m=o.getUint8(d++);m<128||(m<224?(m=(31&m)<<6,m|=63&o.getUint8(d++)):m<240?(m=(15&m)<<12,m|=(63&o.getUint8(d++))<<6,m|=63&o.getUint8(d++)):(m=(7&m)<<18,m|=(63&o.getUint8(d++))<<12,m|=(63&o.getUint8(d++))<<6,m|=63&o.getUint8(d++))),u.push(String.fromCharCode(m))}else for(;d<o.byteLength;)u.push(String.fromCharCode(o.getUint8(d++)));return u.join("")},t.Utils.utf8ToByteArray=function(o){var l,c;if(typeof TextEncoder<"u")l=new TextEncoder().encode(o);else for(l=[],c=0;c<o.length;++c){var u=o.charCodeAt(c);u<128?l.push(u):u<2048?(l.push(192|u>>6),l.push(128|63&u)):u<65536?(l.push(224|u>>12),l.push(128|63&u>>6),l.push(128|63&u)):(l.push(240|u>>18),l.push(128|63&u>>12),l.push(128|63&u>>6),l.push(128|63&u))}return l},t.Utils.appendBox=function(o,l,c){if(l._offset=o._cursor.offset,l._root=o._root?o._root:o,l._raw=o._raw,l._parent=o,c!==-1)if(c!=null){var u,d=-1;if(typeof c=="number")d=c;else{if(typeof c=="string")u=c;else{if(typeof c!="object"||!c.type)return void o.boxes.push(l);u=c.type}for(var m=0;m<o.boxes.length;m++)if(u===o.boxes[m].type){d=m+1;break}}o.boxes.splice(d,0,l)}else o.boxes.push(l)},e.parseBuffer=t.parseBuffer,e.addBoxProcessor=t.addBoxProcessor,e.createFile=t.createFile,e.createBox=t.createBox,e.createFullBox=t.createFullBox,e.Utils=t.Utils,t.Cursor=function(o){this.offset=o===void 0?0:o};var n=function(o){this._cursor=new t.Cursor,this.boxes=[],o&&(this._raw=new DataView(o))};n.prototype.fetch=function(o){var l=this.fetchAll(o,!0);return l.length?l[0]:null},n.prototype.fetchAll=function(o,l){var c=[];return n._sweep.call(this,o,c,l),c},n.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var o=i.parse(this);if(o.type===void 0)break;this.boxes.push(o)}return this},n._sweep=function(o,l,c){for(var u in this.type&&this.type==o&&l.push(this),this.boxes){if(l.length&&c)return;n._sweep.call(this.boxes[u],o,l,c)}},n.prototype.write=function(){var o,l=0;for(o=0;o<this.boxes.length;o++)l+=this.boxes[o].getLength(!1);var c=new Uint8Array(l);for(this._rawo=new DataView(c.buffer),this.bytes=c,this._cursor.offset=0,o=0;o<this.boxes.length;o++)this.boxes[o].write();return c.buffer},n.prototype.append=function(o,l){t.Utils.appendBox(this,o,l)};var i=function(){this._cursor=new t.Cursor};i.parse=function(o){var l=new i;return l._offset=o._cursor.offset,l._root=o._root?o._root:o,l._raw=o._raw,l._parent=o,l._parseBox(),o._cursor.offset=l._raw.byteOffset+l._raw.byteLength,l},i.create=function(o){var l=new i;return l.type=o,l.boxes=[],l},i.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],i.prototype._boxProcessors={},i.prototype._procField=function(o,l,c){this._parsing?this[o]=this._readField(l,c):this._writeField(l,c,this[o])},i.prototype._procFieldArray=function(o,l,c,u){var d;if(this._parsing)for(this[o]=[],d=0;d<l;d++)this[o][d]=this._readField(c,u);else for(d=0;d<this[o].length;d++)this._writeField(c,u,this[o][d])},i.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},i.prototype._procEntries=function(o,l,c){var u;if(this._parsing)for(this[o]=[],u=0;u<l;u++)this[o].push({}),c.call(this,this[o][u]);else for(u=0;u<l;u++)c.call(this,this[o][u])},i.prototype._procSubEntries=function(o,l,c,u){var d;if(this._parsing)for(o[l]=[],d=0;d<c;d++)o[l].push({}),u.call(this,o[l][d]);else for(d=0;d<c;d++)u.call(this,o[l][d])},i.prototype._procEntryField=function(o,l,c,u){this._parsing?o[l]=this._readField(c,u):this._writeField(c,u,o[l])},i.prototype._procSubBoxes=function(o,l){var c;if(this._parsing)for(this[o]=[],c=0;c<l;c++)this[o].push(i.parse(this));else for(c=0;c<l;c++)this._rawo?this[o][c].write():this.size+=this[o][c].getLength()},i.prototype._readField=function(o,l){switch(o){case"uint":return this._readUint(l);case"int":return this._readInt(l);case"template":return this._readTemplate(l);case"string":return l===-1?this._readTerminatedString():this._readString(l);case"data":return this._readData(l);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},i.prototype._readInt=function(o){var l=null,c=this._cursor.offset-this._raw.byteOffset;switch(o){case 8:l=this._raw.getInt8(c);break;case 16:l=this._raw.getInt16(c);break;case 32:l=this._raw.getInt32(c);break;case 64:var u=this._raw.getInt32(c),d=this._raw.getInt32(c+4);l=u*Math.pow(2,32)+d}return this._cursor.offset+=o>>3,l},i.prototype._readUint=function(o){var l,c,u=null,d=this._cursor.offset-this._raw.byteOffset;switch(o){case 8:u=this._raw.getUint8(d);break;case 16:u=this._raw.getUint16(d);break;case 24:u=((l=this._raw.getUint16(d))<<8)+(c=this._raw.getUint8(d+2));break;case 32:u=this._raw.getUint32(d);break;case 64:l=this._raw.getUint32(d),c=this._raw.getUint32(d+4),u=l*Math.pow(2,32)+c}return this._cursor.offset+=o>>3,u},i.prototype._readString=function(o){for(var l="",c=0;c<o;c++){var u=this._readUint(8);l+=String.fromCharCode(u)}return l},i.prototype._readTemplate=function(o){return this._readUint(o/2)+this._readUint(o/2)/Math.pow(2,o/2)},i.prototype._readTerminatedString=function(){for(var o="";this._cursor.offset-this._offset<this._raw.byteLength;){var l=this._readUint(8);if(l===0)break;o+=String.fromCharCode(l)}return o},i.prototype._readData=function(o){var l=o>0?o:this._raw.byteLength-(this._cursor.offset-this._offset);if(l>0){var c=new Uint8Array(this._raw.buffer,this._cursor.offset,l);return this._cursor.offset+=l,c}return null},i.prototype._readUTF8String=function(){var o=this._raw.byteLength-(this._cursor.offset-this._offset),l=null;return o>0&&(l=new DataView(this._raw.buffer,this._cursor.offset,o),this._cursor.offset+=o),l&&t.Utils.dataViewToString(l)},i.prototype._readUTF8TerminatedString=function(){var o=this._raw.byteLength-(this._cursor.offset-this._offset),l=null;if(o>0){var c;for(l=new DataView(this._raw.buffer,this._cursor.offset,o),c=0;c<o&&l.getUint8(c)!==0;c++);l=new DataView(this._raw.buffer,this._cursor.offset,c),this._cursor.offset+=Math.min(c+1,o)}return l&&t.Utils.dataViewToString(l)},i.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},i.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},i.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(i.parse(this))},i.prototype.append=function(o,l){t.Utils.appendBox(this,o,l)},i.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var o=0;o<this.boxes.length;o++)this.size+=this.boxes[o].getLength();return this._data&&this._writeData(this._data),this.size},i.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var o=0;o<this.boxes.length;o++)this.boxes[o].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},i.prototype._writeInt=function(o,l){if(this._rawo){var c=this._cursor.offset-this._rawo.byteOffset;switch(o){case 8:this._rawo.setInt8(c,l);break;case 16:this._rawo.setInt16(c,l);break;case 32:this._rawo.setInt32(c,l);break;case 64:var u=Math.floor(l/Math.pow(2,32)),d=l-u*Math.pow(2,32);this._rawo.setUint32(c,u),this._rawo.setUint32(c+4,d)}this._cursor.offset+=o>>3}else this.size+=o>>3},i.prototype._writeUint=function(o,l){if(this._rawo){var c,u,d=this._cursor.offset-this._rawo.byteOffset;switch(o){case 8:this._rawo.setUint8(d,l);break;case 16:this._rawo.setUint16(d,l);break;case 24:c=(16776960&l)>>8,u=255&l,this._rawo.setUint16(d,c),this._rawo.setUint8(d+2,u);break;case 32:this._rawo.setUint32(d,l);break;case 64:u=l-(c=Math.floor(l/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(d,c),this._rawo.setUint32(d+4,u)}this._cursor.offset+=o>>3}else this.size+=o>>3},i.prototype._writeString=function(o,l){for(var c=0;c<o;c++)this._writeUint(8,l.charCodeAt(c))},i.prototype._writeTerminatedString=function(o){if(o.length!==0){for(var l=0;l<o.length;l++)this._writeUint(8,o.charCodeAt(l));this._writeUint(8,0)}},i.prototype._writeTemplate=function(o,l){var c=Math.floor(l),u=(l-c)*Math.pow(2,o/2);this._writeUint(o/2,c),this._writeUint(o/2,u)},i.prototype._writeData=function(o){if(o)if(this._rawo){if(o instanceof Array){for(var l=this._cursor.offset-this._rawo.byteOffset,c=0;c<o.length;c++)this._rawo.setInt8(l+c,o[c]);this._cursor.offset+=o.length}o instanceof Uint8Array&&(this._root.bytes.set(o,this._cursor.offset),this._cursor.offset+=o.length)}else this.size+=o.length},i.prototype._writeUTF8String=function(o){var l=t.Utils.utf8ToByteArray(o);if(this._rawo)for(var c=new DataView(this._rawo.buffer,this._cursor.offset,l.length),u=0;u<l.length;u++)c.setUint8(u,l[u]);else this.size+=l.length},i.prototype._writeField=function(o,l,c){switch(o){case"uint":this._writeUint(l,c);break;case"int":this._writeInt(l,c);break;case"template":this._writeTemplate(l,c);break;case"string":l==-1?this._writeTerminatedString(c):this._writeString(l,c);break;case"data":this._writeData(c);break;case"utf8":this._writeUTF8String(c)}},i.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},i.prototype._boxProcessors.avc1=i.prototype._boxProcessors.avc2=i.prototype._boxProcessors.avc3=i.prototype._boxProcessors.avc4=i.prototype._boxProcessors.hvc1=i.prototype._boxProcessors.hev1=i.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},i.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(o){this._procEntryField(o,"sample_count","uint",32),this._procEntryField(o,"sample_offset",this.version===1?"int":"uint",32)}))},i.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},i.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(o){this._procEntryField(o,"segment_duration","uint",this.version===1?64:32),this._procEntryField(o,"media_time","int",this.version===1?64:32),this._procEntryField(o,"media_rate_integer","int",16),this._procEntryField(o,"media_rate_fraction","int",16)}))},i.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},i.prototype._boxProcessors.free=i.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},i.prototype._boxProcessors.ftyp=i.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var o=-1;this._parsing&&(o=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",o,"string",4)},i.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},i.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},i.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},i.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},i.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},i.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},i.prototype._boxProcessors.meta=function(){this._procFullBox()},i.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},i.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},i.prototype._boxProcessors.mp4a=i.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},i.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},i.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},i.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},i.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,(function(o){this._procEntryField(o,"entity_id","uint",32)})),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},i.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},i.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},i.prototype._boxProcessors.sdtp=function(){this._procFullBox();var o=-1;this._parsing&&(o=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",o,"uint",8)},i.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(o){this._parsing||(o.reference=(1&o.reference_type)<<31,o.reference|=2147483647&o.referenced_size,o.sap=(1&o.starts_with_SAP)<<31,o.sap|=(3&o.SAP_type)<<28,o.sap|=268435455&o.SAP_delta_time),this._procEntryField(o,"reference","uint",32),this._procEntryField(o,"subsegment_duration","uint",32),this._procEntryField(o,"sap","uint",32),this._parsing&&(o.reference_type=o.reference>>31&1,o.referenced_size=2147483647&o.reference,o.starts_with_SAP=o.sap>>31&1,o.SAP_type=o.sap>>28&7,o.SAP_delta_time=268435455&o.sap)}))},i.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},i.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(o){this._procEntryField(o,"ranges_count","uint",32),this._procSubEntries(o,"ranges",o.ranges_count,(function(l){this._procEntryField(l,"level","uint",8),this._procEntryField(l,"range_size","uint",24)}))}))},i.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},i.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(o){this._procEntryField(o,"sample_count","uint",32),this._procEntryField(o,"sample_delta","uint",32)}))},i.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(o){this._procEntryField(o,"sample_delta","uint",32),this._procEntryField(o,"subsample_count","uint",16),this._procSubEntries(o,"subsamples",o.subsample_count,(function(l){this._procEntryField(l,"subsample_size","uint",this.version===1?32:16),this._procEntryField(l,"subsample_priority","uint",8),this._procEntryField(l,"discardable","uint",8),this._procEntryField(l,"codec_specific_parameters","uint",32)}))}))},i.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},i.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},i.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(o){this._procEntryField(o,"time","uint",this.version===1?64:32),this._procEntryField(o,"moof_offset","uint",this.version===1?64:32),this._procEntryField(o,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(o,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(o,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},i.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},i.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(o){256&this.flags&&this._procEntryField(o,"sample_duration","uint",32),512&this.flags&&this._procEntryField(o,"sample_size","uint",32),1024&this.flags&&this._procEntryField(o,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(o,"sample_composition_time_offset",this.version===1?"int":"uint",32)}))},i.prototype._boxProcessors["url "]=i.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},i.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},i.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},i.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},i.prototype._boxProcessors.vtte=function(){}},9826:function(r){var e,t=typeof Reflect=="object"?Reflect:null,n=t&&typeof t.apply=="function"?t.apply:function(S,A,x){return Function.prototype.apply.call(S,A,x)};e=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:function(S){return Object.getOwnPropertyNames(S)};var i=Number.isNaN||function(S){return S!=S};function o(){o.init.call(this)}r.exports=o,r.exports.once=function(S,A){return new Promise((function(x,k){function U(Q){S.removeListener(A,Y),k(Q)}function Y(){typeof S.removeListener=="function"&&S.removeListener("error",U),x([].slice.call(arguments))}E(S,A,Y,{once:!0}),A!=="error"&&(function(Q,L){typeof Q.on=="function"&&E(Q,"error",L,{once:!0})})(S,U)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function u(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}function d(S,A,x,k){var U,Y,Q,L;if(c(x),(Y=S._events)===void 0?(Y=S._events=Object.create(null),S._eventsCount=0):(Y.newListener!==void 0&&(S.emit("newListener",A,x.listener?x.listener:x),Y=S._events),Q=Y[A]),Q===void 0)Q=Y[A]=x,++S._eventsCount;else if(typeof Q=="function"?Q=Y[A]=k?[x,Q]:[Q,x]:k?Q.unshift(x):Q.push(x),(U=u(S))>0&&Q.length>U&&!Q.warned){Q.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=S,O.type=A,O.count=Q.length,L=O,console&&console.warn&&console.warn(L)}return S}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(S,A,x){var k={fired:!1,wrapFn:void 0,target:S,type:A,listener:x},U=m.bind(k);return U.listener=x,k.wrapFn=U,U}function h(S,A,x){var k=S._events;if(k===void 0)return[];var U=k[A];return U===void 0?[]:typeof U=="function"?x?[U.listener||U]:[U]:x?(function(Y){for(var Q=new Array(Y.length),L=0;L<Q.length;++L)Q[L]=Y[L].listener||Y[L];return Q})(U):p(U,U.length)}function g(S){var A=this._events;if(A!==void 0){var x=A[S];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}function p(S,A){for(var x=new Array(A),k=0;k<A;++k)x[k]=S[k];return x}function E(S,A,x,k){if(typeof S.on=="function")k.once?S.once(A,x):S.on(A,x);else{if(typeof S.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(A,(function U(Y){k.once&&S.removeEventListener(A,U),x(Y)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");l=S}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(S){for(var A=[],x=1;x<arguments.length;x++)A.push(arguments[x]);var k=S==="error",U=this._events;if(U!==void 0)k=k&&U.error===void 0;else if(!k)return!1;if(k){var Y;if(A.length>0&&(Y=A[0]),Y instanceof Error)throw Y;var Q=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw Q.context=Y,Q}var L=U[S];if(L===void 0)return!1;if(typeof L=="function")n(L,this,A);else{var O=L.length,G=p(L,O);for(x=0;x<O;++x)n(G[x],this,A)}return!0},o.prototype.addListener=function(S,A){return d(this,S,A,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(S,A){return d(this,S,A,!0)},o.prototype.once=function(S,A){return c(A),this.on(S,f(this,S,A)),this},o.prototype.prependOnceListener=function(S,A){return c(A),this.prependListener(S,f(this,S,A)),this},o.prototype.removeListener=function(S,A){var x,k,U,Y,Q;if(c(A),(k=this._events)===void 0)return this;if((x=k[S])===void 0)return this;if(x===A||x.listener===A)--this._eventsCount==0?this._events=Object.create(null):(delete k[S],k.removeListener&&this.emit("removeListener",S,x.listener||A));else if(typeof x!="function"){for(U=-1,Y=x.length-1;Y>=0;Y--)if(x[Y]===A||x[Y].listener===A){Q=x[Y].listener,U=Y;break}if(U<0)return this;U===0?x.shift():(function(L,O){for(;O+1<L.length;O++)L[O]=L[O+1];L.pop()})(x,U),x.length===1&&(k[S]=x[0]),k.removeListener!==void 0&&this.emit("removeListener",S,Q||A)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(S){var A,x,k;if((x=this._events)===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[S]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete x[S]),this;if(arguments.length===0){var U,Y=Object.keys(x);for(k=0;k<Y.length;++k)(U=Y[k])!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(A=x[S])=="function")this.removeListener(S,A);else if(A!==void 0)for(k=A.length-1;k>=0;k--)this.removeListener(S,A[k]);return this},o.prototype.listeners=function(S){return h(this,S,!0)},o.prototype.rawListeners=function(S){return h(this,S,!1)},o.listenerCount=function(S,A){return typeof S.listenerCount=="function"?S.listenerCount(A):g.call(S,A)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7316:function(r){r.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,o,l;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(o=i;o--!=0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(l=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=i;o--!=0;)if(!Object.prototype.hasOwnProperty.call(n,l[o]))return!1;for(o=i;o--!=0;){var c=l[o];if(!e(t[c],n[c]))return!1}return!0}return t!=t&&n!=n}},7986:function(r,e){e.read=function(t,n,i,o,l){var c,u,d=8*l-o-1,m=(1<<d)-1,f=m>>1,h=-7,g=i?l-1:0,p=i?-1:1,E=t[n+g];for(g+=p,c=E&(1<<-h)-1,E>>=-h,h+=d;h>0;c=256*c+t[n+g],g+=p,h-=8);for(u=c&(1<<-h)-1,c>>=-h,h+=o;h>0;u=256*u+t[n+g],g+=p,h-=8);if(c===0)c=1-f;else{if(c===m)return u?NaN:1/0*(E?-1:1);u+=Math.pow(2,o),c-=f}return(E?-1:1)*u*Math.pow(2,c-o)},e.write=function(t,n,i,o,l,c){var u,d,m,f=8*c-l-1,h=(1<<f)-1,g=h>>1,p=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=o?0:c-1,S=o?1:-1,A=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(d=isNaN(n)?1:0,u=h):(u=Math.floor(Math.log(n)/Math.LN2),n*(m=Math.pow(2,-u))<1&&(u--,m*=2),(n+=u+g>=1?p/m:p*Math.pow(2,1-g))*m>=2&&(u++,m/=2),u+g>=h?(d=0,u=h):u+g>=1?(d=(n*m-1)*Math.pow(2,l),u+=g):(d=n*Math.pow(2,g-1)*Math.pow(2,l),u=0));l>=8;t[i+E]=255&d,E+=S,d/=256,l-=8);for(u=u<<l|d,f+=l;f>0;t[i+E]=255&u,E+=S,u/=256,f-=8);t[i+E-S]|=128*A}},5474:function(r,e,t){(function(n){n.parser=function(C,F){return new l(C,F)},n.SAXParser=l,n.SAXStream=u,n.createStream=function(C,F){return new u(C,F)},n.MAX_BUFFER_LENGTH=65536;var i,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function l(C,F){if(!(this instanceof l))return new l(C,F);var oe=this;(function(Z){for(var Be=0,Xe=o.length;Be<Xe;Be++)Z[o[Be]]=""})(oe),oe.q=oe.c="",oe.bufferCheckPosition=n.MAX_BUFFER_LENGTH,oe.opt=F||{},oe.opt.lowercase=oe.opt.lowercase||oe.opt.lowercasetags,oe.looseCase=oe.opt.lowercase?"toLowerCase":"toUpperCase",oe.tags=[],oe.closed=oe.closedRoot=oe.sawRoot=!1,oe.tag=oe.error=null,oe.strict=!!C,oe.noscript=!(!C&&!oe.opt.noscript),oe.state=he.BEGIN,oe.strictEntities=oe.opt.strictEntities,oe.ENTITIES=oe.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),oe.attribList=[],oe.opt.xmlns&&(oe.ns=Object.create(x)),oe.trackPosition=oe.opt.position!==!1,oe.trackPosition&&(oe.position=oe.line=oe.column=0),_e(oe,"onready")}n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(C){function F(){}return F.prototype=C,new F}),Object.keys||(Object.keys=function(C){var F=[];for(var oe in C)C.hasOwnProperty(oe)&&F.push(oe);return F}),l.prototype={end:function(){Ge(this)},write:function(C){var F=this;if(this.error)throw this.error;if(F.closed)return Pe(F,"Cannot write after close. Assign an onready handler.");if(C===null)return Ge(F);typeof C=="object"&&(C=C.toString());for(var oe=0,Z="";Z=V(C,oe++),F.c=Z,Z;)switch(F.trackPosition&&(F.position++,Z===`
`?(F.line++,F.column=0):F.column++),F.state){case he.BEGIN:if(F.state=he.BEGIN_WHITESPACE,Z==="\uFEFF")continue;H(F,Z);continue;case he.BEGIN_WHITESPACE:H(F,Z);continue;case he.TEXT:if(F.sawRoot&&!F.closedRoot){for(var Be=oe-1;Z&&Z!=="<"&&Z!=="&";)(Z=V(C,oe++))&&F.trackPosition&&(F.position++,Z===`
`?(F.line++,F.column=0):F.column++);F.textNode+=C.substring(Be,oe-1)}Z!=="<"||F.sawRoot&&F.closedRoot&&!F.strict?(!G(d,Z)||F.sawRoot&&!F.closedRoot||qe(F,"Text data outside of root node."),Z==="&"?F.state=he.TEXT_ENTITY:F.textNode+=Z):(F.state=he.OPEN_WAKA,F.startTagPosition=F.position);continue;case he.SCRIPT:Z==="<"?F.state=he.SCRIPT_ENDING:F.script+=Z;continue;case he.SCRIPT_ENDING:Z==="/"?F.state=he.CLOSE_TAG:(F.script+="<"+Z,F.state=he.SCRIPT);continue;case he.OPEN_WAKA:if(Z==="!")F.state=he.SGML_DECL,F.sgmlDecl="";else if(!O(d,Z))if(O(k,Z))F.state=he.OPEN_TAG,F.tagName=Z;else if(Z==="/")F.state=he.CLOSE_TAG,F.tagName="";else if(Z==="?")F.state=he.PROC_INST,F.procInstName=F.procInstBody="";else{if(qe(F,"Unencoded <"),F.startTagPosition+1<F.position){var Xe=F.position-F.startTagPosition;Z=new Array(Xe).join(" ")+Z}F.textNode+="<"+Z,F.state=he.TEXT}continue;case he.SGML_DECL:(F.sgmlDecl+Z).toUpperCase()===p?(ke(F,"onopencdata"),F.state=he.CDATA,F.sgmlDecl="",F.cdata=""):F.sgmlDecl+Z==="--"?(F.state=he.COMMENT,F.comment="",F.sgmlDecl=""):(F.sgmlDecl+Z).toUpperCase()===E?(F.state=he.DOCTYPE,(F.doctype||F.sawRoot)&&qe(F,"Inappropriately located doctype declaration"),F.doctype="",F.sgmlDecl=""):Z===">"?(ke(F,"onsgmldeclaration",F.sgmlDecl),F.sgmlDecl="",F.state=he.TEXT):(O(h,Z)&&(F.state=he.SGML_DECL_QUOTED),F.sgmlDecl+=Z);continue;case he.SGML_DECL_QUOTED:Z===F.q&&(F.state=he.SGML_DECL,F.q=""),F.sgmlDecl+=Z;continue;case he.DOCTYPE:Z===">"?(F.state=he.TEXT,ke(F,"ondoctype",F.doctype),F.doctype=!0):(F.doctype+=Z,Z==="["?F.state=he.DOCTYPE_DTD:O(h,Z)&&(F.state=he.DOCTYPE_QUOTED,F.q=Z));continue;case he.DOCTYPE_QUOTED:F.doctype+=Z,Z===F.q&&(F.q="",F.state=he.DOCTYPE);continue;case he.DOCTYPE_DTD:F.doctype+=Z,Z==="]"?F.state=he.DOCTYPE:O(h,Z)&&(F.state=he.DOCTYPE_DTD_QUOTED,F.q=Z);continue;case he.DOCTYPE_DTD_QUOTED:F.doctype+=Z,Z===F.q&&(F.state=he.DOCTYPE_DTD,F.q="");continue;case he.COMMENT:Z==="-"?F.state=he.COMMENT_ENDING:F.comment+=Z;continue;case he.COMMENT_ENDING:Z==="-"?(F.state=he.COMMENT_ENDED,F.comment=He(F.opt,F.comment),F.comment&&ke(F,"oncomment",F.comment),F.comment=""):(F.comment+="-"+Z,F.state=he.COMMENT);continue;case he.COMMENT_ENDED:Z!==">"?(qe(F,"Malformed comment"),F.comment+="--"+Z,F.state=he.COMMENT):F.state=he.TEXT;continue;case he.CDATA:Z==="]"?F.state=he.CDATA_ENDING:F.cdata+=Z;continue;case he.CDATA_ENDING:Z==="]"?F.state=he.CDATA_ENDING_2:(F.cdata+="]"+Z,F.state=he.CDATA);continue;case he.CDATA_ENDING_2:Z===">"?(F.cdata&&ke(F,"oncdata",F.cdata),ke(F,"onclosecdata"),F.cdata="",F.state=he.TEXT):Z==="]"?F.cdata+="]":(F.cdata+="]]"+Z,F.state=he.CDATA);continue;case he.PROC_INST:Z==="?"?F.state=he.PROC_INST_ENDING:O(d,Z)?F.state=he.PROC_INST_BODY:F.procInstName+=Z;continue;case he.PROC_INST_BODY:if(!F.procInstBody&&O(d,Z))continue;Z==="?"?F.state=he.PROC_INST_ENDING:F.procInstBody+=Z;continue;case he.PROC_INST_ENDING:Z===">"?(ke(F,"onprocessinginstruction",{name:F.procInstName,body:F.procInstBody}),F.procInstName=F.procInstBody="",F.state=he.TEXT):(F.procInstBody+="?"+Z,F.state=he.PROC_INST_BODY);continue;case he.OPEN_TAG:O(U,Z)?F.tagName+=Z:(Ze(F),Z===">"?xe(F):Z==="/"?F.state=he.OPEN_TAG_SLASH:(G(d,Z)&&qe(F,"Invalid character in tag name"),F.state=he.ATTRIB));continue;case he.OPEN_TAG_SLASH:Z===">"?(xe(F,!0),Ie(F)):(qe(F,"Forward-slash in opening tag not followed by >"),F.state=he.ATTRIB);continue;case he.ATTRIB:if(O(d,Z))continue;Z===">"?xe(F):Z==="/"?F.state=he.OPEN_TAG_SLASH:O(k,Z)?(F.attribName=Z,F.attribValue="",F.state=he.ATTRIB_NAME):qe(F,"Invalid attribute name");continue;case he.ATTRIB_NAME:Z==="="?F.state=he.ATTRIB_VALUE:Z===">"?(qe(F,"Attribute without value"),F.attribValue=F.attribName,mt(F),xe(F)):O(d,Z)?F.state=he.ATTRIB_NAME_SAW_WHITE:O(U,Z)?F.attribName+=Z:qe(F,"Invalid attribute name");continue;case he.ATTRIB_NAME_SAW_WHITE:if(Z==="=")F.state=he.ATTRIB_VALUE;else{if(O(d,Z))continue;qe(F,"Attribute without value"),F.tag.attributes[F.attribName]="",F.attribValue="",ke(F,"onattribute",{name:F.attribName,value:""}),F.attribName="",Z===">"?xe(F):O(k,Z)?(F.attribName=Z,F.state=he.ATTRIB_NAME):(qe(F,"Invalid attribute name"),F.state=he.ATTRIB)}continue;case he.ATTRIB_VALUE:if(O(d,Z))continue;O(h,Z)?(F.q=Z,F.state=he.ATTRIB_VALUE_QUOTED):(qe(F,"Unquoted attribute value"),F.state=he.ATTRIB_VALUE_UNQUOTED,F.attribValue=Z);continue;case he.ATTRIB_VALUE_QUOTED:if(Z!==F.q){Z==="&"?F.state=he.ATTRIB_VALUE_ENTITY_Q:F.attribValue+=Z;continue}mt(F),F.q="",F.state=he.ATTRIB_VALUE_CLOSED;continue;case he.ATTRIB_VALUE_CLOSED:O(d,Z)?F.state=he.ATTRIB:Z===">"?xe(F):Z==="/"?F.state=he.OPEN_TAG_SLASH:O(k,Z)?(qe(F,"No whitespace between attributes"),F.attribName=Z,F.attribValue="",F.state=he.ATTRIB_NAME):qe(F,"Invalid attribute name");continue;case he.ATTRIB_VALUE_UNQUOTED:if(G(g,Z)){Z==="&"?F.state=he.ATTRIB_VALUE_ENTITY_U:F.attribValue+=Z;continue}mt(F),Z===">"?xe(F):F.state=he.ATTRIB;continue;case he.CLOSE_TAG:if(F.tagName)Z===">"?Ie(F):O(U,Z)?F.tagName+=Z:F.script?(F.script+="</"+F.tagName,F.tagName="",F.state=he.SCRIPT):(G(d,Z)&&qe(F,"Invalid tagname in closing tag"),F.state=he.CLOSE_TAG_SAW_WHITE);else{if(O(d,Z))continue;G(k,Z)?F.script?(F.script+="</"+Z,F.state=he.SCRIPT):qe(F,"Invalid tagname in closing tag."):F.tagName=Z}continue;case he.CLOSE_TAG_SAW_WHITE:if(O(d,Z))continue;Z===">"?Ie(F):qe(F,"Invalid characters in closing tag");continue;case he.TEXT_ENTITY:case he.ATTRIB_VALUE_ENTITY_Q:case he.ATTRIB_VALUE_ENTITY_U:var $e,Ve;switch(F.state){case he.TEXT_ENTITY:$e=he.TEXT,Ve="textNode";break;case he.ATTRIB_VALUE_ENTITY_Q:$e=he.ATTRIB_VALUE_QUOTED,Ve="attribValue";break;case he.ATTRIB_VALUE_ENTITY_U:$e=he.ATTRIB_VALUE_UNQUOTED,Ve="attribValue"}Z===";"?(F[Ve]+=Ke(F),F.entity="",F.state=$e):O(F.entity.length?Q:Y,Z)?F.entity+=Z:(qe(F,"Invalid character in entity name"),F[Ve]+="&"+F.entity+Z,F.entity="",F.state=$e);continue;default:throw new Error(F,"Unknown state: "+F.state)}return F.position>=F.bufferCheckPosition&&(function(je){for(var Qe=Math.max(n.MAX_BUFFER_LENGTH,10),dt=0,it=0,rt=o.length;it<rt;it++){var Ot=je[o[it]].length;if(Ot>Qe)switch(o[it]){case"textNode":Oe(je);break;case"cdata":ke(je,"oncdata",je.cdata),je.cdata="";break;case"script":ke(je,"onscript",je.script),je.script="";break;default:Pe(je,"Max buffer length exceeded: "+o[it])}dt=Math.max(dt,Ot)}var pt=n.MAX_BUFFER_LENGTH-dt;je.bufferCheckPosition=pt+je.position})(F),F},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var C;Oe(C=this),C.cdata!==""&&(ke(C,"oncdata",C.cdata),C.cdata=""),C.script!==""&&(ke(C,"onscript",C.script),C.script="")}};try{i=t(3515).Stream}catch{i=function(){}}var c=n.EVENTS.filter((function(C){return C!=="error"&&C!=="end"}));function u(C,F){if(!(this instanceof u))return new u(C,F);i.apply(this),this._parser=new l(C,F),this.writable=!0,this.readable=!0;var oe=this;this._parser.onend=function(){oe.emit("end")},this._parser.onerror=function(Z){oe.emit("error",Z),oe._parser.error=null},this._decoder=null,c.forEach((function(Z){Object.defineProperty(oe,"on"+Z,{get:function(){return oe._parser["on"+Z]},set:function(Be){if(!Be)return oe.removeAllListeners(Z),oe._parser["on"+Z]=Be,Be;oe.on(Z,Be)},enumerable:!0,configurable:!1})}))}u.prototype=Object.create(i.prototype,{constructor:{value:u}}),u.prototype.write=function(C){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(C)){if(!this._decoder){var F=t(748).StringDecoder;this._decoder=new F("utf8")}C=this._decoder.write(C)}return this._parser.write(C.toString()),this.emit("data",C),!0},u.prototype.end=function(C){return C&&C.length&&this.write(C),this._parser.end(),!0},u.prototype.on=function(C,F){var oe=this;return oe._parser["on"+C]||c.indexOf(C)===-1||(oe._parser["on"+C]=function(){var Z=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Z.splice(0,0,C),oe.emit.apply(oe,Z)}),i.prototype.on.call(oe,C,F)};var d=`\r
	 `,m="0124356789",f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",h=`'"`,g=d+">",p="[CDATA[",E="DOCTYPE",S="http://www.w3.org/XML/1998/namespace",A="http://www.w3.org/2000/xmlns/",x={xml:S,xmlns:A};d=L(d),m=L(m),f=L(f);var k=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function L(C){return C.split("").reduce((function(F,oe){return F[oe]=!0,F}),{})}function O(C,F){return(function(oe){return Object.prototype.toString.call(oe)==="[object RegExp]"})(C)?!!F.match(C):C[F]}function G(C,F){return!O(C,F)}h=L(h),g=L(g);var te,ge,Me,he=0;for(var De in n.STATE={BEGIN:he++,BEGIN_WHITESPACE:he++,TEXT:he++,TEXT_ENTITY:he++,OPEN_WAKA:he++,SGML_DECL:he++,SGML_DECL_QUOTED:he++,DOCTYPE:he++,DOCTYPE_QUOTED:he++,DOCTYPE_DTD:he++,DOCTYPE_DTD_QUOTED:he++,COMMENT_STARTING:he++,COMMENT:he++,COMMENT_ENDING:he++,COMMENT_ENDED:he++,CDATA:he++,CDATA_ENDING:he++,CDATA_ENDING_2:he++,PROC_INST:he++,PROC_INST_BODY:he++,PROC_INST_ENDING:he++,OPEN_TAG:he++,OPEN_TAG_SLASH:he++,ATTRIB:he++,ATTRIB_NAME:he++,ATTRIB_NAME_SAW_WHITE:he++,ATTRIB_VALUE:he++,ATTRIB_VALUE_QUOTED:he++,ATTRIB_VALUE_CLOSED:he++,ATTRIB_VALUE_UNQUOTED:he++,ATTRIB_VALUE_ENTITY_Q:he++,ATTRIB_VALUE_ENTITY_U:he++,CLOSE_TAG:he++,CLOSE_TAG_SAW_WHITE:he++,SCRIPT:he++,SCRIPT_ENDING:he++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach((function(C){var F=n.ENTITIES[C],oe=typeof F=="number"?String.fromCharCode(F):F;n.ENTITIES[C]=oe})),n.STATE)n.STATE[n.STATE[De]]=De;function _e(C,F,oe){C[F]&&C[F](oe)}function ke(C,F,oe){C.textNode&&Oe(C),_e(C,F,oe)}function Oe(C){C.textNode=He(C.opt,C.textNode),C.textNode&&_e(C,"ontext",C.textNode),C.textNode=""}function He(C,F){return C.trim&&(F=F.trim()),C.normalize&&(F=F.replace(/\s+/g," ")),F}function Pe(C,F){return Oe(C),C.trackPosition&&(F+=`
Line: `+C.line+`
Column: `+C.column+`
Char: `+C.c),F=new Error(F),C.error=F,_e(C,"onerror",F),C}function Ge(C){return C.sawRoot&&!C.closedRoot&&qe(C,"Unclosed root tag"),C.state!==he.BEGIN&&C.state!==he.BEGIN_WHITESPACE&&C.state!==he.TEXT&&Pe(C,"Unexpected end"),Oe(C),C.c="",C.closed=!0,_e(C,"onend"),l.call(C,C.strict,C.opt),C}function qe(C,F){if(typeof C!="object"||!(C instanceof l))throw new Error("bad call to strictFail");C.strict&&Pe(C,F)}function Ze(C){C.strict||(C.tagName=C.tagName[C.looseCase]());var F=C.tags[C.tags.length-1]||C,oe=C.tag={name:C.tagName,attributes:{}};C.opt.xmlns&&(oe.ns=F.ns),C.attribList.length=0,ke(C,"onopentagstart",oe)}function ct(C,F){var oe=C.indexOf(":")<0?["",C]:C.split(":"),Z=oe[0],Be=oe[1];return F&&C==="xmlns"&&(Z="xmlns",Be=""),{prefix:Z,local:Be}}function mt(C){if(C.strict||(C.attribName=C.attribName[C.looseCase]()),C.attribList.indexOf(C.attribName)!==-1||C.tag.attributes.hasOwnProperty(C.attribName))C.attribName=C.attribValue="";else{if(C.opt.xmlns){var F=ct(C.attribName,!0),oe=F.prefix,Z=F.local;if(oe==="xmlns")if(Z==="xml"&&C.attribValue!==S)qe(C,"xml: prefix must be bound to "+S+`
Actual: `+C.attribValue);else if(Z==="xmlns"&&C.attribValue!==A)qe(C,"xmlns: prefix must be bound to "+A+`
Actual: `+C.attribValue);else{var Be=C.tag,Xe=C.tags[C.tags.length-1]||C;Be.ns===Xe.ns&&(Be.ns=Object.create(Xe.ns)),Be.ns[Z]=C.attribValue}C.attribList.push([C.attribName,C.attribValue])}else C.tag.attributes[C.attribName]=C.attribValue,ke(C,"onattribute",{name:C.attribName,value:C.attribValue});C.attribName=C.attribValue=""}}function xe(C,F){if(C.opt.xmlns){var oe=C.tag,Z=ct(C.tagName);oe.prefix=Z.prefix,oe.local=Z.local,oe.uri=oe.ns[Z.prefix]||"",oe.prefix&&!oe.uri&&(qe(C,"Unbound namespace prefix: "+JSON.stringify(C.tagName)),oe.uri=Z.prefix);var Be=C.tags[C.tags.length-1]||C;oe.ns&&Be.ns!==oe.ns&&Object.keys(oe.ns).forEach((function(kt){ke(C,"onopennamespace",{prefix:kt,uri:oe.ns[kt]})}));for(var Xe=0,$e=C.attribList.length;Xe<$e;Xe++){var Ve=C.attribList[Xe],je=Ve[0],Qe=Ve[1],dt=ct(je,!0),it=dt.prefix,rt=dt.local,Ot=it===""?"":oe.ns[it]||"",pt={name:je,value:Qe,prefix:it,local:rt,uri:Ot};it&&it!=="xmlns"&&!Ot&&(qe(C,"Unbound namespace prefix: "+JSON.stringify(it)),pt.uri=it),C.tag.attributes[je]=pt,ke(C,"onattribute",pt)}C.attribList.length=0}C.tag.isSelfClosing=!!F,C.sawRoot=!0,C.tags.push(C.tag),ke(C,"onopentag",C.tag),F||(C.noscript||C.tagName.toLowerCase()!=="script"?C.state=he.TEXT:C.state=he.SCRIPT,C.tag=null,C.tagName=""),C.attribName=C.attribValue="",C.attribList.length=0}function Ie(C){if(!C.tagName)return qe(C,"Weird empty close tag."),C.textNode+="</>",void(C.state=he.TEXT);if(C.script){if(C.tagName!=="script")return C.script+="</"+C.tagName+">",C.tagName="",void(C.state=he.SCRIPT);ke(C,"onscript",C.script),C.script=""}var F=C.tags.length,oe=C.tagName;C.strict||(oe=oe[C.looseCase]());for(var Z=oe;F--&&C.tags[F].name!==Z;)qe(C,"Unexpected close tag");if(F<0)return qe(C,"Unmatched closing tag: "+C.tagName),C.textNode+="</"+C.tagName+">",void(C.state=he.TEXT);C.tagName=oe;for(var Be=C.tags.length;Be-- >F;){var Xe=C.tag=C.tags.pop();C.tagName=C.tag.name,ke(C,"onclosetag",C.tagName);var $e={};for(var Ve in Xe.ns)$e[Ve]=Xe.ns[Ve];var je=C.tags[C.tags.length-1]||C;C.opt.xmlns&&Xe.ns!==je.ns&&Object.keys(Xe.ns).forEach((function(Qe){var dt=Xe.ns[Qe];ke(C,"onclosenamespace",{prefix:Qe,uri:dt})}))}F===0&&(C.closedRoot=!0),C.tagName=C.attribValue=C.attribName="",C.attribList.length=0,C.state=he.TEXT}function Ke(C){var F,oe=C.entity,Z=oe.toLowerCase(),Be="";return C.ENTITIES[oe]?C.ENTITIES[oe]:C.ENTITIES[Z]?C.ENTITIES[Z]:((oe=Z).charAt(0)==="#"&&(oe.charAt(1)==="x"?(oe=oe.slice(2),Be=(F=parseInt(oe,16)).toString(16)):(oe=oe.slice(1),Be=(F=parseInt(oe,10)).toString(10))),oe=oe.replace(/^0+/,""),Be.toLowerCase()!==oe?(qe(C,"Invalid character entity"),"&"+C.entity+";"):String.fromCodePoint(F))}function H(C,F){F==="<"?(C.state=he.OPEN_WAKA,C.startTagPosition=C.position):G(d,F)&&(qe(C,"Non-whitespace before first tag."),C.textNode=F,C.state=he.TEXT)}function V(C,F){var oe="";return F<C.length&&(oe=C.charAt(F)),oe}he=n.STATE,String.fromCodePoint||(te=String.fromCharCode,ge=Math.floor,Me=function(){var C,F,oe=[],Z=-1,Be=arguments.length;if(!Be)return"";for(var Xe="";++Z<Be;){var $e=Number(arguments[Z]);if(!isFinite($e)||$e<0||$e>1114111||ge($e)!==$e)throw RangeError("Invalid code point: "+$e);$e<=65535?oe.push($e):(C=55296+(($e-=65536)>>10),F=$e%1024+56320,oe.push(C,F)),(Z+1===Be||oe.length>16384)&&(Xe+=te.apply(null,oe),oe.length=0)}return Xe},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Me,configurable:!0,writable:!0}):String.fromCodePoint=Me)})(e)},6739:function(r,e,t){(function(n,i,o,l,c){function u(V){if("contents"in V)for(var C=("styleAttrs"in V)?V.styleAttrs[l.byName.ruby.qname]:null,F=V.kind==="span"&&(C==="container"||C==="textContainer"||C==="baseContainer"),oe=V.contents.length-1;oe>=0;oe--)!F||"styleAttrs"in V.contents[oe]&&l.byName.ruby.qname in V.contents[oe].styleAttrs?u(V.contents[oe]):delete V.contents[oe]}function d(V,C,F,oe){var Z=oe&&oe.timeContainer==="seq",Be=0;oe&&(Be=Z&&F?F.end:oe.begin),C.begin=C.explicit_begin?C.explicit_begin+Be:Be;var Xe=C.begin,$e=null;if("sets"in C)for(var Ve=0;Ve<C.sets.length;Ve++)d(V,C.sets[Ve],$e,C),Xe=C.timeContainer==="seq"?C.sets[Ve].end:Math.max(Xe,C.sets[Ve].end),$e=C.sets[Ve];if("contents"in C){if("contents"in C)for(var je=0;je<C.contents.length;je++)d(V,C.contents[je],$e,C),Xe=C.timeContainer==="seq"?C.contents[je].end:Math.max(Xe,C.contents[je].end),$e=C.contents[je]}else Xe=Z?C.begin:Number.POSITIVE_INFINITY;C.explicit_end!==null&&C.explicit_dur!==null?C.end=Math.min(C.begin+C.explicit_dur,Be+C.explicit_end):C.explicit_end===null&&C.explicit_dur!==null?C.end=C.begin+C.explicit_dur:C.explicit_end!==null&&C.explicit_dur===null?C.end=Be+C.explicit_end:C.end=Xe,delete C.explicit_begin,delete C.explicit_dur,delete C.explicit_end,V._registerEvent(C)}function m(V){this.node=V}function f(){this.events=[],this.head=new h,this.body=null}function h(){this.styling=new g,this.layout=new S}function g(){this.styles={},this.initials={}}function p(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function E(){this.styleAttrs=null}function S(){this.regions={}}function A(V,C){x.call(this,"image"),this.src=V,this.type=C}function x(V){this.kind=V}function k(V){this.id=V}function U(V){this.regionID=V}function Y(V){this.styleAttrs=V}function Q(V){this.sets=V}function L(V){this.contents=V}function O(V,C,F){this.explicit_begin=V,this.explicit_end=C,this.explicit_dur=F}function G(){x.call(this,"body")}function te(){x.call(this,"div")}function ge(){x.call(this,"p")}function Me(){x.call(this,"span")}function he(){x.call(this,"span")}function De(){x.call(this,"br")}function _e(){}function ke(){}function Oe(V){return V&&"xml:id"in V.attributes&&V.attributes["xml:id"].value||null}function He(V){return V&&"style"in V.attributes?V.attributes.style.value.split(" "):[]}function Pe(V,C){var F={};if(V!==null)for(var oe in V.attributes){var Z=V.attributes[oe].uri+" "+V.attributes[oe].local,Be=l.byQName[Z];if(Be!==void 0){var Xe=Be.parse(V.attributes[oe].value);Xe!==null?(F[Z]=Xe,Be===l.byName.zIndex&&xe(C,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Ie(C,"Cannot parse styling attribute "+Z+" --> "+V.attributes[oe].value)}}return F}function Ge(V,C,F){for(var oe in V.attributes)if(V.attributes[oe].uri===C&&V.attributes[oe].local===F)return V.attributes[oe].value;return null}function qe(V,C,F){var oe,Z=null;return(oe=/^(\d+(?:\.\d+)?)f$/.exec(F))!==null?C!==null&&(Z=parseFloat(oe[1])/C):(oe=/^(\d+(?:\.\d+)?)t$/.exec(F))!==null?V!==null&&(Z=parseFloat(oe[1])/V):(oe=/^(\d+(?:\.\d+)?)ms$/.exec(F))!==null?Z=parseFloat(oe[1])/1e3:(oe=/^(\d+(?:\.\d+)?)s$/.exec(F))!==null?Z=parseFloat(oe[1]):(oe=/^(\d+(?:\.\d+)?)h$/.exec(F))!==null?Z=3600*parseFloat(oe[1]):(oe=/^(\d+(?:\.\d+)?)m$/.exec(F))!==null?Z=60*parseFloat(oe[1]):(oe=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(F))!==null?Z=3600*parseInt(oe[1])+60*parseInt(oe[2])+parseFloat(oe[3]):(oe=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(F))!==null&&C!==null&&(Z=3600*parseInt(oe[1])+60*parseInt(oe[2])+parseInt(oe[3])+(oe[4]===null?0:parseInt(oe[4])/C)),Z}function Ze(V,C,F){for(;C.styleRefs.length>0;){var oe=C.styleRefs.pop();oe in V.styles?(Ze(V,V.styles[oe],F),mt(V.styles[oe].styleAttrs,C.styleAttrs)):Ie(F,"Non-existant style id referenced")}}function ct(V,C,F,oe){for(var Z=C.length-1;Z>=0;Z--){var Be=C[Z];Be in V.styles?mt(V.styles[Be].styleAttrs,F):Ie(oe,"Non-existant style id referenced")}}function mt(V,C){for(var F in V)V.hasOwnProperty(F)&&(F in C||(C[F]=V[F]))}function xe(V,C){if(V&&V.warn&&V.warn(C))throw C}function Ie(V,C){if(V&&V.error&&V.error(C))throw C}function Ke(V,C){throw V&&V.fatal&&V.fatal(C),C}function H(V,C){for(var F,oe=0,Z=V.length-1;oe<=Z;){var Be=V[F=Math.floor((oe+Z)/2)];if(Be<C)oe=F+1;else{if(!(Be>C))return{found:!0,index:F};Z=F-1}}return{found:!1,index:oe}}n.fromXML=function(V,C,F){var oe=i.parser(!0,{xmlns:!0}),Z=[],Be=[],Xe=[],$e=0,Ve=null;oe.onclosetag=function(rt){if(Z[0]instanceof _e)Ve.head!==null&&Ve.head.styling!==null&&ct(Ve.head.styling,Z[0].styleRefs,Z[0].styleAttrs,C),delete Z[0].styleRefs;else if(Z[0]instanceof g)for(var Ot in Z[0].styles)Z[0].styles.hasOwnProperty(Ot)&&Ze(Z[0],Z[0].styles[Ot],C);else if(Z[0]instanceof ge||Z[0]instanceof Me){if(Z[0].contents.length>1){var pt,kt=[Z[0].contents[0]];for(pt=1;pt<Z[0].contents.length;pt++)Z[0].contents[pt]instanceof he&&kt[kt.length-1]instanceof he?kt[kt.length-1].text+=Z[0].contents[pt].text:kt.push(Z[0].contents[pt]);Z[0].contents=kt}Z[0]instanceof Me&&Z[0].contents.length===1&&Z[0].contents[0]instanceof he&&(Z[0].text=Z[0].contents[0].text,delete Z[0].contents)}else Z[0]instanceof m&&(Z[0].node.uri===o.ns_tt&&Z[0].node.local==="metadata"?$e--:$e>0&&F&&"onCloseTag"in F&&F.onCloseTag());Xe.shift(),Be.shift(),Z.shift()},oe.ontext=function(rt){if(Z[0]!==void 0)if(Z[0]instanceof Me||Z[0]instanceof ge){if(Z[0]instanceof Me){var Ot=Z[0].styleAttrs[l.byName.ruby.qname];if(Ot==="container"||Ot==="textContainer"||Ot==="baseContainer")return}var pt=new he;pt.initFromText(Ve,Z[0],rt,Be[0],Xe[0],C),Z[0].contents.push(pt)}else Z[0]instanceof m&&$e>0&&F&&"onText"in F&&F.onText(rt)},oe.onopentag=function(rt){var Ot=rt.attributes["xml:space"];Ot?Xe.unshift(Ot.value):Xe.length===0?Xe.unshift("default"):Xe.unshift(Xe[0]);var pt=rt.attributes["xml:lang"];if(pt?Be.unshift(pt.value):Be.length===0?Be.unshift(""):Be.unshift(Be[0]),rt.uri===o.ns_tt)if(rt.local==="tt")Ve!==null&&Ke(C,"Two <tt> elements at ("+this.line+","+this.column+")"),(Ve=new f).initFromNode(rt,Be[0],C),Z.unshift(Ve);else if(rt.local==="head")Z[0]instanceof f||Ke(C,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),Z.unshift(Ve.head);else if(rt.local==="styling")Z[0]instanceof h||Ke(C,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),Z.unshift(Ve.head.styling);else if(rt.local==="style"){var kt;Z[0]instanceof g?((kt=new p).initFromNode(rt,C),kt.id?Ve.head.styling.styles[kt.id]=kt:Ie(C,"<style> element missing @id attribute"),Z.unshift(kt)):Z[0]instanceof _e?((kt=new p).initFromNode(rt,C),mt(kt.styleAttrs,Z[0].styleAttrs),Z.unshift(kt)):Ke(C,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(rt.local==="initial"){var wt;if(Z[0]instanceof g){for(var fn in(wt=new E).initFromNode(rt,C),wt.styleAttrs)wt.styleAttrs.hasOwnProperty(fn)&&(Ve.head.styling.initials[fn]=wt.styleAttrs[fn]);Z.unshift(wt)}else Ke(C,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(rt.local==="layout")Z[0]instanceof h||Ke(C,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),Z.unshift(Ve.head.layout);else if(rt.local==="region"){Z[0]instanceof S||Ke(C,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Tn=new _e;Tn.initFromNode(Ve,rt,Be[0],C),!Tn.id||Tn.id in Ve.head.layout.regions?Ie(C,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):Ve.head.layout.regions[Tn.id]=Tn,Z.unshift(Tn)}else if(rt.local==="body"){Z[0]instanceof f||Ke(C,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),Ve.body!==null&&Ke(C,"Second <body> element at "+this.line+","+this.column+")");var Fn=new G;Fn.initFromNode(Ve,rt,Be[0],C),Ve.body=Fn,Z.unshift(Fn)}else if(rt.local==="div"){Z[0]instanceof te||Z[0]instanceof G||Ke(C,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var In=new te;In.initFromNode(Ve,Z[0],rt,Be[0],C);var dn=In.styleAttrs[l.byName.backgroundImage.qname];dn&&(In.contents.push(new A(dn)),delete In.styleAttrs[l.byName.backgroundImage.qname]),Z[0].contents.push(In),Z.unshift(In)}else if(rt.local==="image"){Z[0]instanceof te||Ke(C,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var pn=new A;pn.initFromNode(Ve,Z[0],rt,Be[0],C),Z[0].contents.push(pn),Z.unshift(pn)}else if(rt.local==="p"){Z[0]instanceof te||Ke(C,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Pt=new ge;Pt.initFromNode(Ve,Z[0],rt,Be[0],C),Z[0].contents.push(Pt),Z.unshift(Pt)}else if(rt.local==="span"){Z[0]instanceof Me||Z[0]instanceof ge||Ke(C,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var At=new Me;At.initFromNode(Ve,Z[0],rt,Be[0],Xe[0],C),Z[0].contents.push(At),Z.unshift(At)}else if(rt.local==="br"){Z[0]instanceof Me||Z[0]instanceof ge||Ke(C,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var tt=new De;tt.initFromNode(Ve,Z[0],rt,Be[0],C),Z[0].contents.push(tt),Z.unshift(tt)}else if(rt.local==="set"){Z[0]instanceof Me||Z[0]instanceof ge||Z[0]instanceof te||Z[0]instanceof G||Z[0]instanceof _e||Z[0]instanceof De||Ke(C,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var ht=new ke;ht.initFromNode(Ve,Z[0],rt,C),Z[0].sets.push(ht),Z.unshift(ht)}else Z.unshift(new m(rt));else Z.unshift(new m(rt));if(Z[0]instanceof m){if(rt.uri===o.ns_tt&&rt.local==="metadata")$e++;else if($e>0&&F&&"onOpenTag"in F){var Ut=[];for(var Lt in rt.attributes)Ut[rt.attributes[Lt].uri+" "+rt.attributes[Lt].local]={uri:rt.attributes[Lt].uri,local:rt.attributes[Lt].local,value:rt.attributes[Lt].value};F.onOpenTag(rt.uri,rt.local,Ut)}}},oe.write(V).close(),delete Ve.head.styling.styles;var je=!1;for(var Qe in Ve.head.layout.regions)if(Ve.head.layout.regions.hasOwnProperty(Qe)){je=!0;break}if(!je){var dt=_e.prototype.createDefaultRegion(Ve.lang);Ve.head.layout.regions[dt.id]=dt}for(var it in Ve.head.layout.regions)Ve.head.layout.regions.hasOwnProperty(it)&&d(Ve,Ve.head.layout.regions[it],null,null);return Ve.body&&d(Ve,Ve.body,null,null),Ve.body&&u(Ve.body),Ve},f.prototype.initFromNode=function(V,C,F){var oe=(function($e,Ve){var je=Ge($e,o.ns_ttp,"cellResolution"),Qe=15,dt=32;if(je!==null){var it=/(\d+) (\d+)/.exec(je);it!==null?(dt=parseInt(it[1]),Qe=parseInt(it[2])):xe(Ve,"Malformed cellResolution value (using initial value instead)")}return{w:dt,h:Qe}})(V,F);this.cellLength={h:new c.ComputedLength(0,1/oe.h),w:new c.ComputedLength(1/oe.w,0)};var Z=(function($e,Ve){var je,Qe=Ge($e,o.ns_ttp,"frameRate"),dt=30;Qe!==null&&((je=/(\d+)/.exec(Qe))!==null?dt=parseInt(je[1]):xe(Ve,"Malformed frame rate attribute (using initial value instead)"));var it=Ge($e,o.ns_ttp,"frameRateMultiplier"),rt=1;it!==null&&((je=/(\d+) (\d+)/.exec(it))!==null?rt=parseInt(je[1])/parseInt(je[2]):xe(Ve,"Malformed frame rate multiplier attribute (using initial value instead)"));var Ot=rt*dt,pt=1,kt=Ge($e,o.ns_ttp,"tickRate");return kt===null?Qe!==null&&(pt=Ot):(je=/(\d+)/.exec(kt))!==null?pt=parseInt(je[1]):xe(Ve,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Ot,tickRate:pt}})(V,F);this.effectiveFrameRate=Z.effectiveFrameRate,this.tickRate=Z.tickRate,this.aspectRatio=(function($e,Ve){var je=Ge($e,o.ns_ittp,"aspectRatio");je===null&&(je=Ge($e,o.ns_ttp,"displayAspectRatio"));var Qe=null;if(je!==null){var dt=/(\d+)\s+(\d+)/.exec(je);if(dt!==null){var it=parseInt(dt[1]),rt=parseInt(dt[2]);it!==0&&rt!==0?Qe=it/rt:Ie(Ve,"Illegal aspectRatio values (ignoring)")}else Ie(Ve,"Malformed aspectRatio attribute (ignoring)")}return Qe})(V,F);var Be=Ge(V,o.ns_ttp,"timeBase");Be!==null&&Be!=="media"&&Ke(F,"Unsupported time base");var Xe=(function($e,Ve){var je=Ge($e,o.ns_tts,"extent");if(je===null)return null;var Qe=je.split(" ");if(Qe.length!==2)return xe(Ve,"Malformed extent (ignoring)"),null;var dt=c.parseLength(Qe[0]),it=c.parseLength(Qe[1]);return it&&dt?{h:it,w:dt}:(xe(Ve,"Malformed extent values (ignoring)"),null)})(V,F);Xe===null?this.pxLength={h:null,w:null}:(Xe.h.unit==="px"&&Xe.w.unit==="px"||Ke(F,"Extent on TT must be in px or absent"),this.pxLength={h:new c.ComputedLength(0,1/Xe.h.value),w:new c.ComputedLength(1/Xe.w.value,0)}),this.dimensions={h:new c.ComputedLength(0,1),w:new c.ComputedLength(1,0)},this.lang=C},f.prototype._registerEvent=function(V){if(!(V.end<=V.begin)){var C=H(this.events,V.begin);if(C.found||this.events.splice(C.index,0,V.begin),V.end!==Number.POSITIVE_INFINITY){var F=H(this.events,V.end);F.found||this.events.splice(F.index,0,V.end)}}},f.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},f.prototype.getMediaTimeEvents=function(){return this.events},p.prototype.initFromNode=function(V,C){this.id=Oe(V),this.styleAttrs=Pe(V,C),this.styleRefs=He(V)},E.prototype.initFromNode=function(V,C){for(var F in this.styleAttrs={},V.attributes)if(V.attributes[F].uri===o.ns_itts||V.attributes[F].uri===o.ns_ebutts||V.attributes[F].uri===o.ns_tts){var oe=V.attributes[F].uri+" "+V.attributes[F].local;this.styleAttrs[oe]=V.attributes[F].value}},A.prototype.initFromNode=function(V,C,F,oe,Z){this.src="src"in F.attributes?F.attributes.src.value:null,this.src||Ie(Z,"Invalid image@src attribute"),this.type="type"in F.attributes?F.attributes.type.value:null,this.type||Ie(Z,"Invalid image@type attribute"),Y.prototype.initFromNode.call(this,V,C,F,Z),O.prototype.initFromNode.call(this,V,C,F,Z),Q.prototype.initFromNode.call(this,V,C,F,Z),U.prototype.initFromNode.call(this,V,C,F,Z),this.lang=oe},k.prototype.initFromNode=function(V,C,F,oe){this.id=Oe(F)},U.prototype.initFromNode=function(V,C,F,oe){this.regionID=(function(Z){return Z&&"region"in Z.attributes?Z.attributes.region.value:""})(F)},Y.prototype.initFromNode=function(V,C,F,oe){this.styleAttrs=Pe(F,oe),V.head!==null&&V.head.styling!==null&&ct(V.head.styling,He(F),this.styleAttrs,oe)},Q.prototype.initFromNode=function(V,C,F,oe){this.sets=[]},L.prototype.initFromNode=function(V,C,F,oe){this.contents=[]},O.prototype.initFromNode=function(V,C,F,oe){var Z=(function(Be,Xe,$e,Ve){var je=null;$e&&"begin"in $e.attributes&&(je=qe(Be.tickRate,Be.effectiveFrameRate,$e.attributes.begin.value))===null&&xe(Ve,"Malformed begin value "+$e.attributes.begin.value+" (using 0)");var Qe=null;$e&&"dur"in $e.attributes&&(Qe=qe(Be.tickRate,Be.effectiveFrameRate,$e.attributes.dur.value))===null&&xe(Ve,"Malformed dur value "+$e.attributes.dur.value+" (ignoring)");var dt=null;return $e&&"end"in $e.attributes&&(dt=qe(Be.tickRate,Be.effectiveFrameRate,$e.attributes.end.value))===null&&xe(Ve,"Malformed end value (ignoring)"),{explicit_begin:je,explicit_end:dt,explicit_dur:Qe}})(V,0,F,oe);this.explicit_begin=Z.explicit_begin,this.explicit_end=Z.explicit_end,this.explicit_dur=Z.explicit_dur,this.timeContainer=(function(Be,Xe){var $e=Be&&"timeContainer"in Be.attributes?Be.attributes.timeContainer.value:null;return $e&&$e!=="par"?$e==="seq"?"seq":(Ie(Xe,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"})(F,oe)},G.prototype.initFromNode=function(V,C,F,oe){Y.prototype.initFromNode.call(this,V,null,C,oe),O.prototype.initFromNode.call(this,V,null,C,oe),Q.prototype.initFromNode.call(this,V,null,C,oe),U.prototype.initFromNode.call(this,V,null,C,oe),L.prototype.initFromNode.call(this,V,null,C,oe),this.lang=F},te.prototype.initFromNode=function(V,C,F,oe,Z){Y.prototype.initFromNode.call(this,V,C,F,Z),O.prototype.initFromNode.call(this,V,C,F,Z),Q.prototype.initFromNode.call(this,V,C,F,Z),U.prototype.initFromNode.call(this,V,C,F,Z),L.prototype.initFromNode.call(this,V,C,F,Z),this.lang=oe},ge.prototype.initFromNode=function(V,C,F,oe,Z){Y.prototype.initFromNode.call(this,V,C,F,Z),O.prototype.initFromNode.call(this,V,C,F,Z),Q.prototype.initFromNode.call(this,V,C,F,Z),U.prototype.initFromNode.call(this,V,C,F,Z),L.prototype.initFromNode.call(this,V,C,F,Z),this.lang=oe},Me.prototype.initFromNode=function(V,C,F,oe,Z,Be){Y.prototype.initFromNode.call(this,V,C,F,Be),O.prototype.initFromNode.call(this,V,C,F,Be),Q.prototype.initFromNode.call(this,V,C,F,Be),U.prototype.initFromNode.call(this,V,C,F,Be),L.prototype.initFromNode.call(this,V,C,F,Be),this.space=Z,this.lang=oe},he.prototype.initFromText=function(V,C,F,oe,Z,Be){O.prototype.initFromNode.call(this,V,C,null,Be),this.text=F,this.space=Z,this.lang=oe},De.prototype.initFromNode=function(V,C,F,oe,Z){U.prototype.initFromNode.call(this,V,C,F,Z),O.prototype.initFromNode.call(this,V,C,F,Z),this.lang=oe},_e.prototype.createDefaultRegion=function(V){var C=new _e;return k.call(C,""),Y.call(C,{}),Q.call(C,[]),O.call(C,0,Number.POSITIVE_INFINITY,null),this.lang=V,C},_e.prototype.initFromNode=function(V,C,F,oe){k.prototype.initFromNode.call(this,V,null,C,oe),O.prototype.initFromNode.call(this,V,null,C,oe),Q.prototype.initFromNode.call(this,V,null,C,oe),this.styleAttrs=Pe(C,oe),this.styleRefs=He(C),this.lang=F},ke.prototype.initFromNode=function(V,C,F,oe){O.prototype.initFromNode.call(this,V,C,F,oe);var Z=Pe(F,oe);for(var Be in this.qname=null,this.value=null,Z)if(Z.hasOwnProperty(Be)){if(this.qname){Ie(oe,"More than one style specified on set");break}this.qname=Be,this.value=Z[Be]}}})(e,typeof sax>"u"?t(5474):sax,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},1612:function(r,e,t){var n=/firefox/i.test(navigator.userAgent);(function(i,o,l){function c(L,O,G,te){var ge;if(G.kind==="region")(ge=document.createElement("div")).style.position="absolute";else if(G.kind==="body")ge=document.createElement("div");else if(G.kind==="div")ge=document.createElement("div");else if(G.kind==="image"){if(ge=document.createElement("img"),L.imgResolver!==null&&G.src!==null){var Me=L.imgResolver(G.src,ge);Me&&(ge.src=Me),ge.height=L.regionH,ge.width=L.regionW}}else if(G.kind==="p")ge=document.createElement("p");else if(G.kind==="span")if(G.styleAttrs[l.byName.ruby.qname]==="container")ge=document.createElement("ruby"),L.ruby=!0;else if(G.styleAttrs[l.byName.ruby.qname]==="base")ge=document.createElement("span");else if(G.styleAttrs[l.byName.ruby.qname]==="text")ge=document.createElement("rt");else if(G.styleAttrs[l.byName.ruby.qname]==="baseContainer")ge=document.createElement("rbc");else if(G.styleAttrs[l.byName.ruby.qname]==="textContainer")ge=document.createElement("rtc");else{if(G.styleAttrs[l.byName.ruby.qname]==="delimiter")return;ge=document.createElement("span")}else G.kind==="br"&&(ge=document.createElement("br"));if(ge){if(G.lang&&(G.kind!=="region"&&G.lang===te.lang||(ge.lang=G.lang)),O.appendChild(ge),ge.style.margin="0",G.kind==="region"){var he=G.styleAttrs[l.byName.writingMode.qname];he==="lrtb"||he==="lr"?(L.ipd="lr",L.bpd="tb"):he==="rltb"||he==="rl"?(L.ipd="rl",L.bpd="tb"):he==="tblr"?(L.ipd="tb",L.bpd="lr"):he!=="tbrl"&&he!=="tb"||(L.ipd="tb",L.bpd="rl")}else if(G.kind==="p"&&L.bpd==="tb"){var De=G.styleAttrs[l.byName.direction.qname];L.ipd=De==="ltr"?"lr":"rl"}for(var _e=0;_e<E.length;_e++){var ke=E[_e],Oe=G.styleAttrs[ke.qname];Oe!==void 0&&ke.map!==null&&ke.map(L,ge,G,Oe)}var He=ge,Pe=G.styleAttrs[l.byName.linePadding.qname];if(Pe&&!Pe.isZero()){var Ge=Pe.toUsedLength(L.w,L.h);if(Ge>0){var qe=Math.ceil(Ge)+"px";L.bpd==="tb"?(He.style.paddingLeft=qe,He.style.paddingRight=qe):(He.style.paddingTop=qe,He.style.paddingBottom=qe),L.lp=Pe}}var Ze=G.styleAttrs[l.byName.multiRowAlign.qname];if(Ze&&Ze!=="auto"){var ct=document.createElement("span");ct.style.display="inline-block",ct.style.textAlign=Ze,ge.appendChild(ct),He=ct,L.mra=Ze}var mt=G.styleAttrs[l.byName.rubyReserve.qname];if(mt&&mt[0]!=="none"&&(L.rubyReserve=mt),G.styleAttrs[l.byName.fillLineGap.qname]&&(L.flg=!0),G.kind==="span"&&G.text){var xe=G.styleAttrs[l.byName.textEmphasis.qname];if(xe&&xe.style!=="none"&&(L.textEmphasis=!0),l.byName.textCombine.qname in G.styleAttrs&&G.styleAttrs[l.byName.textCombine.qname]==="all")ge.textContent=G.text,ge._isd_element=G,xe&&g(L,ge,0,xe);else for(var Ie="",Ke=0;Ke<G.text.length;Ke++){Ie+=G.text.charAt(Ke);var H=G.text.charCodeAt(Ke);if(H<55296||H>56319||Ke===G.text.length-1){var V=document.createElement("span");V.textContent=Ie,xe&&g(L,V,0,xe),ge.appendChild(V),Ie="",V._isd_element=G}}}if("contents"in G)for(var C=0;C<G.contents.length;C++)c(L,He,G.contents[C],G);var F=[];if(G.kind==="p"&&(h(L,He,F,null),L.rubyReserve&&((function($e,Ve){for(var je=0;je<$e.length;je++){var Qe,dt,it=document.createElement("ruby"),rt=document.createElement("span");rt.textContent="",it.appendChild(rt);var Ot,pt=Ve.rubyReserve[1].toUsedLength(Ve.w,Ve.h)+"px";Ve.rubyReserve[0]==="both"||Ve.rubyReserve[0]==="outside"&&$e.length==1?((Qe=document.createElement("rtc")).style[k]=x?"after":"under",Qe.textContent="",Qe.style.fontSize=pt,(dt=document.createElement("rtc")).style[k]=x?"before":"over",dt.textContent="",dt.style.fontSize=pt,it.appendChild(Qe),it.appendChild(dt)):((Qe=document.createElement("rtc")).textContent="",Qe.style.fontSize=pt,Ot=Ve.rubyReserve[0]==="after"||Ve.rubyReserve[0]==="outside"&&je>0?x?"after":Ve.bpd==="tb"||Ve.bpd==="rl"?"under":"over":x?"before":Ve.bpd==="tb"||Ve.bpd==="rl"?"over":"under",Qe.style[k]=Ot,it.appendChild(Qe));for(var kt=null,wt=0;wt<$e[je].rbc.length;wt++)if($e[je].rbc[wt].localName==="ruby"){kt=$e[je].rbc[wt];for(var fn=0;fn<kt.style.length;fn++)it.style.setProperty(kt.style.item(fn),kt.style.getPropertyValue(kt.style.item(fn)));break}(kt=kt||$e[je].elements[0].node).parentElement.insertBefore(it,kt)}})(F,L),L.rubyReserve=null),(L.ruby||L.rubyReserve)&&((function($e,Ve){for(var je=0;je<$e.length;je++)for(var Qe=0;Qe<$e[je].rbc.length;Qe++){var dt;$e[je].rbc[Qe].style[k]||(dt=x?je===0?"before":"after":Ve.bpd==="tb"||Ve.bpd==="rl"?je===0?"over":"under":je===0?"under":"over",$e[je].rbc[Qe].style[k]=dt)}})(F,L),L.ruby=null),L.textEmphasis&&((function($e,Ve){for(var je=0;je<$e.length;je++)for(var Qe=0;Qe<$e[je].te.length;Qe++){var dt;$e[je].te[Qe].style[Y]&&$e[je].te[Qe].style[Y]!=="none"||(dt=Ve.bpd==="tb"?je===0?"left over":"left under":Ve.bpd==="rl"?je===0?"right under":"left under":je===0?"left under":"right under",$e[je].te[Qe].style[Y]=dt)}})(F,L),L.textEmphasis=null),L.mra&&((function($e){for(var Ve=0;Ve<$e.length-1;Ve++){var je=$e[Ve].elements.length;if(je!==0&&$e[Ve].br===!1){var Qe=document.createElement("br"),dt=$e[Ve].elements[je-1].node;dt.parentElement.insertBefore(Qe,dt.nextSibling)}}})(F),L.mra=null),L.lp&&((function($e,Ve,je){if($e!==null)for(var Qe=0;Qe<$e.length;Qe++){var dt=$e[Qe].elements.length,it=Math.ceil(Ve)+"px",rt="-"+Math.ceil(Ve)+"px";if(dt!==0){var Ot=$e[Qe].elements[$e[Qe].start_elem],pt=$e[Qe].elements[$e[Qe].end_elem];if(Ot===pt){var kt=Ot.node.getBoundingClientRect();if(kt.width==0||kt.height==0)continue}je.ipd==="lr"?(Ot.node.style.marginLeft=rt,Ot.node.style.paddingLeft=it):je.ipd==="rl"?(Ot.node.style.paddingRight=it,Ot.node.style.marginRight=rt):je.ipd==="tb"&&(Ot.node.style.paddingTop=it,Ot.node.style.marginTop=rt),je.ipd==="lr"?(n||(pt.node.style.marginRight=rt),pt.node.style.paddingRight=it):je.ipd==="rl"?(pt.node.style.paddingLeft=it,n||(pt.node.style.marginLeft=rt)):je.ipd==="tb"&&(pt.node.style.paddingBottom=it,pt.node.style.marginBottom=rt)}}})(F,L.lp.toUsedLength(L.w,L.h),L),L.lp=null),(function($e,Ve){for(var je=0;je<$e.length;je++)for(var Qe=$e[je],dt=1;dt<Qe.elements.length;){var it=Qe.elements[dt-1],rt=Qe.elements[dt];d(it.node,rt.node,Ve)?Qe.elements.splice(dt,1):dt++}for(var Ot,pt,kt=[],wt=0;wt<$e.length;wt++)for(var fn=0;fn<$e[wt].elements.length;fn++)(pt=u(Ot=$e[wt].elements[fn].node,kt,!1))&&(Ot.style.backgroundColor=pt);for(var Tn=0;Tn<kt.length;Tn++)kt[Tn].style.backgroundColor=""})(F,L),L.flg)){var oe=f(He.getBoundingClientRect(),L);(function($e,Ve,je,Qe){for(var dt=Math.sign(je-Ve),it=0;it<=$e.length;it++){var rt,Ot,pt,kt;if(rt=it===0?Math.round(Ve):it===$e.length?Math.round(je):Math.round(($e[it-1].after+$e[it].before)/2),it>0&&$e[it-1])for(pt=0;pt<$e[it-1].elements.length;pt++)Ot=dt*(rt-(kt=$e[it-1].elements[pt]).after)+"px",Qe.bpd==="lr"?kt.node.style.paddingRight=Ot:Qe.bpd==="rl"?kt.node.style.paddingLeft=Ot:Qe.bpd==="tb"&&(kt.node.style.paddingBottom=Ot);if(it<$e.length)for(pt=0;pt<$e[it].elements.length;pt++)Ot=dt*((kt=$e[it].elements[pt]).before-rt)+"px",Qe.bpd==="lr"?kt.node.style.paddingLeft=Ot:Qe.bpd==="rl"?kt.node.style.paddingRight=Ot:Qe.bpd==="tb"&&(kt.node.style.paddingTop=Ot)}})(F,oe.before,oe.after,L),L.flg=null}if(G.kind==="region"&&L.bpd==="tb"&&L.enableRollUp&&G.contents.length>0&&G.styleAttrs[l.byName.displayAlign.qname]==="after"){h(L,He,F,null);var Z=new m(G.id===""?"_":G.id,F);if(L.currentISDState[Z.id]=Z,L.previousISDState&&Z.id in L.previousISDState&&L.previousISDState[Z.id].plist.length>0&&Z.plist.length>1&&Z.plist[Z.plist.length-2].text===L.previousISDState[Z.id].plist[L.previousISDState[Z.id].plist.length-1].text){var Be=ge.firstElementChild,Xe=Z.plist[Z.plist.length-1].after-Z.plist[Z.plist.length-1].before;Be.style.bottom="-"+Xe+"px",Be.style.transition="transform 0.4s",Be.style.position="relative",Be.style.transform="translateY(-"+Xe+"px)"}}}else Q(L.errorHandler,"Error processing ISD element kind: "+G.kind)}function u(L,O,G){return L.style.backgroundColor?(G&&!O.includes(L)&&O.push(L),L.style.backgroundColor):L.parentElement.nodeName==="SPAN"||L.parentElement.nodeName==="RUBY"||L.parentElement.nodeName==="RBC"||L.parentElement.nodeName==="RTC"||L.parentElement.nodeName==="RT"?u(L.parentElement,O,!0):void 0}function d(L,O,G){if(L.tagName==="SPAN"&&O.tagName==="SPAN"&&L._isd_element===O._isd_element){if(!L._isd_element)return Q(G.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;L.textContent+=O.textContent;for(var te=0;te<O.style.length;te++){var ge=O.style[te];(ge.indexOf("border")>=0||ge.indexOf("padding")>=0||ge.indexOf("margin")>=0)&&(L.style[ge]=O.style[ge])}return O.parentElement.removeChild(O),!0}return!1}function m(L,O){this.id=L,this.plist=O}function f(L,O){var G={before:null,after:null,start:null,end:null};return O.bpd==="tb"?(G.before=L.top,G.after=L.bottom,O.ipd==="lr"?(G.start=L.left,G.end=L.right):(G.start=L.right,G.end=L.left)):O.bpd==="lr"?(G.before=L.left,G.after=L.right,G.start=L.top,G.end=L.bottom):O.bpd==="rl"&&(G.before=L.right,G.after=L.left,G.start=L.top,G.end=L.bottom),G}function h(L,O,G,te){if(O.localName!=="rt"&&O.localName!=="rtc"){var ge,Me,he,De,_e=O.style.backgroundColor||te;if(O.childElementCount===0)if(O.localName==="span"||O.localName==="rb"){var ke=f(O.getBoundingClientRect(),L);if(G.length!==0&&(ge=ke.before,Me=ke.after,he=G[G.length-1].before,Me<(De=G[G.length-1].after)&&ge>he||De<=Me&&he>=ge)){var Oe=Math.sign(ke.after-ke.before),He=Math.sign(ke.end-ke.start);Oe*(ke.before-G[G.length-1].before)<0&&(G[G.length-1].before=ke.before),Oe*(ke.after-G[G.length-1].after)>0&&(G[G.length-1].after=ke.after),He*(ke.start-G[G.length-1].start)<0&&(G[G.length-1].start=ke.start,G[G.length-1].start_elem=G[G.length-1].elements.length),He*(ke.end-G[G.length-1].end)>0&&(G[G.length-1].end=ke.end,G[G.length-1].end_elem=G[G.length-1].elements.length)}else G.push({before:ke.before,after:ke.after,start:ke.start,end:ke.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});G[G.length-1].text+=O.textContent,G[G.length-1].elements.push({node:O,bgcolor:_e,before:ke.before,after:ke.after})}else O.localName==="br"&&G.length!==0&&(G[G.length-1].br=!0);else for(var Pe=O.firstChild;Pe;)Pe.nodeType===Node.ELEMENT_NODE&&(h(L,Pe,G,_e),Pe.localName==="ruby"||Pe.localName==="rtc"?G.length>0&&G[G.length-1].rbc.push(Pe):Pe.localName==="span"&&Pe.style[U]&&Pe.style[U]!=="none"&&G.length>0&&G[G.length-1].te.push(Pe)),Pe=Pe.nextSibling}}function g(L,O,G,te){var ge;te.style!=="none"&&(te.style==="auto"?O.style[U]="filled":O.style[U]=te.style+" "+te.symbol,(te.position==="before"||te.position==="after")&&(ge=L.bpd==="tb"?te.position==="before"?"left over":"left under":L.bpd==="rl"?te.position==="before"?"right under":"left under":te.position==="before"?"left under":"right under",O.style[Y]=ge))}function p(L,O){this.qname=L,this.map=O}i.render=function(L,O,G,te,ge,Me,he,De,_e){var ke=te||O.clientHeight,Oe=ge||O.clientWidth;if(L.aspectRatio!==null){var He=ke*L.aspectRatio;He>Oe?ke=Math.round(Oe/L.aspectRatio):Oe=He}var Pe=document.createElement("div");Pe.style.position="relative",Pe.style.width=Oe+"px",Pe.style.height=ke+"px",Pe.style.margin="auto",Pe.style.top=0,Pe.style.bottom=0,Pe.style.left=0,Pe.style.right=0,Pe.style.zIndex=0;var Ge={h:ke,w:Oe,regionH:null,regionW:null,imgResolver:G,displayForcedOnlyMode:Me||!1,isd:L,errorHandler:he,previousISDState:De,enableRollUp:_e||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(O.appendChild(Pe),"contents"in L)for(var qe=0;qe<L.contents.length;qe++)c(Ge,Pe,L.contents[qe],L);return Ge.currentISDState};for(var E=[new p("http://www.w3.org/ns/ttml#styling backgroundColor",(function(L,O,G,te){te[3]!==0&&(O.style.backgroundColor="rgba("+te[0].toString()+","+te[1].toString()+","+te[2].toString()+","+(te[3]/255).toString()+")")})),new p("http://www.w3.org/ns/ttml#styling color",(function(L,O,G,te){O.style.color="rgba("+te[0].toString()+","+te[1].toString()+","+te[2].toString()+","+(te[3]/255).toString()+")"})),new p("http://www.w3.org/ns/ttml#styling direction",(function(L,O,G,te){O.style.direction=te})),new p("http://www.w3.org/ns/ttml#styling display",(function(L,O,G,te){})),new p("http://www.w3.org/ns/ttml#styling displayAlign",(function(L,O,G,te){O.style.display="flex",O.style.flexDirection="column",te==="before"?O.style.justifyContent="flex-start":te==="center"?O.style.justifyContent="center":te==="after"&&(O.style.justifyContent="flex-end")})),new p("http://www.w3.org/ns/ttml#styling extent",(function(L,O,G,te){L.regionH=te.h.toUsedLength(L.w,L.h),L.regionW=te.w.toUsedLength(L.w,L.h);var ge=0,Me=0,he=G.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];he&&(ge=he[0].toUsedLength(L.w,L.h)+he[2].toUsedLength(L.w,L.h),Me=he[1].toUsedLength(L.w,L.h)+he[3].toUsedLength(L.w,L.h)),O.style.height=L.regionH-ge+"px",O.style.width=L.regionW-Me+"px"})),new p("http://www.w3.org/ns/ttml#styling fontFamily",(function(L,O,G,te){for(var ge=[],Me=0;Me<te.length;Me++)te[Me]=te[Me].trim(),te[Me]==="monospaceSerif"?(ge.push("Courier New"),ge.push('"Liberation Mono"'),ge.push("Courier"),ge.push("monospace")):te[Me]==="proportionalSansSerif"?(ge.push("Arial"),ge.push("Helvetica"),ge.push('"Liberation Sans"'),ge.push("sans-serif")):te[Me]==="monospace"?ge.push("monospace"):te[Me]==="sansSerif"?ge.push("sans-serif"):te[Me]==="serif"?ge.push("serif"):te[Me]==="monospaceSansSerif"?(ge.push("Consolas"),ge.push("monospace")):te[Me]==="proportionalSerif"?ge.push("serif"):ge.push(te[Me]);if(ge.length>0){for(var he=[ge[0]],De=1;De<ge.length;De++)he.indexOf(ge[De])==-1&&he.push(ge[De]);ge=he}O.style.fontFamily=ge.join(",")})),new p("http://www.w3.org/ns/ttml#styling shear",(function(L,O,G,te){if(te!==0){var ge=-.9*te;L.bpd==="tb"?O.style.transform="skewX("+ge+"deg)":O.style.transform="skewY("+ge+"deg)"}})),new p("http://www.w3.org/ns/ttml#styling fontSize",(function(L,O,G,te){O.style.fontSize=te.toUsedLength(L.w,L.h)+"px"})),new p("http://www.w3.org/ns/ttml#styling fontStyle",(function(L,O,G,te){O.style.fontStyle=te})),new p("http://www.w3.org/ns/ttml#styling fontWeight",(function(L,O,G,te){O.style.fontWeight=te})),new p("http://www.w3.org/ns/ttml#styling lineHeight",(function(L,O,G,te){O.style.lineHeight=te==="normal"?"normal":te.toUsedLength(L.w,L.h)+"px"})),new p("http://www.w3.org/ns/ttml#styling opacity",(function(L,O,G,te){O.style.opacity=te})),new p("http://www.w3.org/ns/ttml#styling origin",(function(L,O,G,te){O.style.top=te.h.toUsedLength(L.w,L.h)+"px",O.style.left=te.w.toUsedLength(L.w,L.h)+"px"})),new p("http://www.w3.org/ns/ttml#styling overflow",(function(L,O,G,te){O.style.overflow=te})),new p("http://www.w3.org/ns/ttml#styling padding",(function(L,O,G,te){var ge=[];ge[0]=te[0].toUsedLength(L.w,L.h)+"px",ge[1]=te[3].toUsedLength(L.w,L.h)+"px",ge[2]=te[2].toUsedLength(L.w,L.h)+"px",ge[3]=te[1].toUsedLength(L.w,L.h)+"px",O.style.padding=ge.join(" ")})),new p("http://www.w3.org/ns/ttml#styling position",(function(L,O,G,te){O.style.top=te.h.toUsedLength(L.w,L.h)+"px",O.style.left=te.w.toUsedLength(L.w,L.h)+"px"})),new p("http://www.w3.org/ns/ttml#styling rubyAlign",(function(L,O,G,te){O.style.rubyAlign=te==="spaceAround"?"space-around":"center"})),new p("http://www.w3.org/ns/ttml#styling rubyPosition",(function(L,O,G,te){var ge;te!=="before"&&te!=="after"||(ge=x?te:L.bpd==="tb"||L.bpd==="rl"?te==="before"?"over":"under":te==="before"?"under":"over",O.parentElement.style[k]=ge)})),new p("http://www.w3.org/ns/ttml#styling showBackground",null),new p("http://www.w3.org/ns/ttml#styling textAlign",(function(L,O,G,te){var ge;ge=te==="start"?L.ipd==="rl"?"right":"left":te==="end"?L.ipd==="rl"?"left":"right":te,O.style.textAlign=ge})),new p("http://www.w3.org/ns/ttml#styling textDecoration",(function(L,O,G,te){O.style.textDecoration=te.join(" ").replace("lineThrough","line-through")})),new p("http://www.w3.org/ns/ttml#styling textOutline",(function(L,O,G,te){})),new p("http://www.w3.org/ns/ttml#styling textShadow",(function(L,O,G,te){var ge=G.styleAttrs[l.byName.textOutline.qname];if(te==="none"&&ge==="none")O.style.textShadow="";else{var Me=[];if(ge!=="none"){var he="rgba("+ge.color[0].toString()+","+ge.color[1].toString()+","+ge.color[2].toString()+","+(ge.color[3]/255).toString()+")";Me.push("1px 1px 1px "+he),Me.push("-1px 1px 1px "+he),Me.push("1px -1px 1px "+he),Me.push("-1px -1px 1px "+he)}if(te!=="none")for(var De=0;De<te.length;De++)Me.push(te[De].x_off.toUsedLength(L.w,L.h)+"px "+te[De].y_off.toUsedLength(L.w,L.h)+"px "+te[De].b_radius.toUsedLength(L.w,L.h)+"px rgba("+te[De].color[0].toString()+","+te[De].color[1].toString()+","+te[De].color[2].toString()+","+(te[De].color[3]/255).toString()+")");O.style.textShadow=Me.join(",")}})),new p("http://www.w3.org/ns/ttml#styling textCombine",(function(L,O,G,te){O.style.textCombineUpright=te})),new p("http://www.w3.org/ns/ttml#styling textEmphasis",(function(L,O,G,te){})),new p("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(L,O,G,te){var ge;ge=te==="bidiOverride"?"bidi-override":te,O.style.unicodeBidi=ge})),new p("http://www.w3.org/ns/ttml#styling visibility",(function(L,O,G,te){O.style.visibility=te})),new p("http://www.w3.org/ns/ttml#styling wrapOption",(function(L,O,G,te){te==="wrap"?G.space==="preserve"?O.style.whiteSpace="pre-wrap":O.style.whiteSpace="normal":G.space==="preserve"?O.style.whiteSpace="pre":O.style.whiteSpace="noWrap"})),new p("http://www.w3.org/ns/ttml#styling writingMode",(function(L,O,G,te){te==="lrtb"||te==="lr"||te==="rltb"||te==="rl"?O.style.writingMode="horizontal-tb":te==="tblr"?O.style.writingMode="vertical-lr":te!=="tbrl"&&te!=="tb"||(O.style.writingMode="vertical-rl")})),new p("http://www.w3.org/ns/ttml#styling zIndex",(function(L,O,G,te){O.style.zIndex=te})),new p("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(L,O,G,te){L.displayForcedOnlyMode&&te===!1&&(O.style.visibility="hidden")}))],S={},A=0;A<E.length;A++)S[E[A].qname]=E[A];var x="webkitRubyPosition"in window.getComputedStyle(document.documentElement),k=x?"webkitRubyPosition":"rubyPosition",U="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",Y="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function Q(L,O){if(L&&L.error&&L.error(O))throw O}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},8905:function(r,e,t){(function(n,i,o,l){n.generateISD=function(p,E,S){var A,x=new f(p),k={},U={},Y=p.head.styling.initials[o.byName.showBackground.qname],Q=p.head.styling.initials[o.byName.backgroundColor.qname];for(var L in p.head.layout.regions)if(p.head.layout.regions.hasOwnProperty(L)){var O=p.head.layout.regions[L],G=O.styleAttrs[o.byName.showBackground.qname]||Y,te=O.styleAttrs[o.byName.backgroundColor.qname]||Q;U[O.id]=(G==="always"||G===void 0)&&te!==void 0&&!(E<O.begin||E>=O.end)}for(var ge in p.body&&p.body.regionID&&(U[p.body.regionID]=!0),A=p.body!==null?(function he(De,_e){if(_e.contents){var ke={};for(var Oe in _e)_e.hasOwnProperty(Oe)&&(ke[Oe]=_e[Oe]);return ke.contents=[],_e.contents.filter((function(He){return!(De<He.begin||De>=He.end)})).forEach((function(He){var Pe=he(De,He);Pe.regionID&&(U[Pe.regionID]=!0),Pe!==null&&ke.contents.push(Pe)})),ke}return _e})(E,p.body):null,U[""]!==void 0&&(U[""]=!0),U)if(U[ge]){var Me=u(p,E,p.head.layout.regions[ge],A,null,"",p.head.layout.regions[ge],S,k);Me!==null&&x.contents.push(Me.element)}return x};var c=[o.byName.color.qname,o.byName.textCombine.qname,o.byName.textDecoration.qname,o.byName.textEmphasis.qname,o.byName.textOutline.qname,o.byName.textShadow.qname];function u(p,E,S,A,x,k,U,Y,Q){if(E<U.begin||E>=U.end)return null;var L="regionID"in U&&U.regionID!==""?U.regionID:k;if(x!==null&&L!==S.id&&(!("contents"in U)||"contents"in U&&U.contents.length===0||L!==""))return null;var O=new h(U);if("sets"in U)for(var G=0;G<U.sets.length;G++)E<U.sets[G].begin||E>=U.sets[G].end||(O.styleAttrs[U.sets[G].qname]=U.sets[G].value);var te={};for(var ge in O.styleAttrs)if(O.styleAttrs.hasOwnProperty(ge)&&(te[ge]=!0,O.kind==="region"&&ge===o.byName.writingMode.qname&&!(o.byName.direction.qname in O.styleAttrs))){var Me=O.styleAttrs[ge];Me==="lrtb"||Me==="lr"?O.styleAttrs[o.byName.direction.qname]="ltr":Me!=="rltb"&&Me!=="rl"||(O.styleAttrs[o.byName.direction.qname]="rtl")}if(x!==null)for(var he=0;he<o.all.length;he++){var De=o.all[he];if(De.qname===o.byName.textDecoration.qname){var _e=x.styleAttrs[De.qname],ke=O.styleAttrs[De.qname],Oe=[];ke===void 0?Oe=_e:ke.indexOf("none")===-1?((ke.indexOf("noUnderline")===-1&&_e.indexOf("underline")!==-1||ke.indexOf("underline")!==-1)&&Oe.push("underline"),(ke.indexOf("noLineThrough")===-1&&_e.indexOf("lineThrough")!==-1||ke.indexOf("lineThrough")!==-1)&&Oe.push("lineThrough"),(ke.indexOf("noOverline")===-1&&_e.indexOf("overline")!==-1||ke.indexOf("overline")!==-1)&&Oe.push("overline")):Oe.push("none"),O.styleAttrs[De.qname]=Oe}else if(De.qname!==o.byName.fontSize.qname||De.qname in O.styleAttrs||O.kind!=="span"||O.styleAttrs[o.byName.ruby.qname]!=="textContainer")if(De.qname!==o.byName.fontSize.qname||De.qname in O.styleAttrs||O.kind!=="span"||O.styleAttrs[o.byName.ruby.qname]!=="text")De.inherit&&De.qname in x.styleAttrs&&!(De.qname in O.styleAttrs)&&(O.styleAttrs[De.qname]=x.styleAttrs[De.qname]);else{var He=x.styleAttrs[o.byName.fontSize.qname];x.styleAttrs[o.byName.ruby.qname]==="textContainer"?O.styleAttrs[De.qname]=He:O.styleAttrs[De.qname]=new l.ComputedLength(.5*He.rw,.5*He.rh)}else{var Pe=x.styleAttrs[o.byName.fontSize.qname];O.styleAttrs[De.qname]=new l.ComputedLength(.5*Pe.rw,.5*Pe.rh)}}for(var Ge=0;Ge<o.all.length;Ge++){var qe=o.all[Ge];if(!(qe.qname in O.styleAttrs)&&!(qe.qname===o.byName.position.qname&&o.byName.origin.qname in O.styleAttrs||qe.qname===o.byName.origin.qname&&o.byName.position.qname in O.styleAttrs)){var Ze=p.head.styling.initials[qe.qname]||qe.initial;if(Ze!==null&&(O.kind==="region"||qe.inherit===!1&&Ze!==null)){var ct=qe.parse(Ze);ct!==null?(O.styleAttrs[qe.qname]=ct,te[qe.qname]=!0):g(Y,"Invalid initial value for '"+qe.qname+"' on element '"+O.kind)}}}for(var mt=0;mt<o.all.length;mt++){var xe=o.all[mt];if(xe.qname in te&&xe.compute!==null){var Ie=xe.compute(p,x,O,O.styleAttrs[xe.qname],Q);Ie!==null?O.styleAttrs[xe.qname]=Ie:(O.styleAttrs[xe.qname]=xe.compute(p,x,O,xe.parse(xe.initial),Q),g(Y,"Style '"+xe.qname+"' on element '"+O.kind+"' cannot be computed"))}}if(O.styleAttrs[o.byName.display.qname]==="none")return null;var Ke=null;x===null?Ke=A===null?[]:[A]:"contents"in U&&(Ke=U.contents);for(var H=0;Ke!==null&&H<Ke.length;H++){var V=u(p,E,S,A,O,L,Ke[H],Y,Q);V!==null&&O.contents.push(V.element)}for(var C in O.styleAttrs)if(O.styleAttrs.hasOwnProperty(C)){var F=!1;if(O.kind==="span"){var oe=O.styleAttrs[o.byName.ruby.qname];(F=(oe==="container"||oe==="textContainer"||oe==="baseContainer")&&c.indexOf(C)!==-1)||(F=oe!=="container"&&C===o.byName.rubyAlign.qname),F||(F=!(oe==="textContainer"||oe==="text")&&C===o.byName.rubyPosition.qname)}if(!F){var Z=o.byQName[C];"applies"in Z&&(F=Z.applies.indexOf(O.kind)===-1)}F&&delete O.styleAttrs[C]}var Be=O.styleAttrs[o.byName.ruby.qname];if(O.kind==="p"||O.kind==="span"&&(Be==="textContainer"||Be==="text")){var Xe=[];d(O,Xe),(function($e){for(var Ve,je=0;je<$e.length;)if((Ve=$e[je]).kind!=="br"&&Ve.space!=="preserve"){var Qe=Ve.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(Qe)&&(je===0||(dt=$e[je-1]).kind==="br"||/[\r\n\t ]$/.test(dt.text))&&(Qe=Qe.substring(1)),Ve.text=Qe,Qe.length===0?$e.splice(je,1):je++}else je++;var dt,it;for(je=0;je<$e.length;je++)(Ve=$e[je]).kind!=="br"&&Ve.space!=="preserve"?/[ ]$/.test(Ve.text)&&(je===$e.length-1||(it=$e[je+1]).kind==="br"||it.space==="preserve"&&/^[\r\n]/.test(it.text))&&(Ve.text=Ve.text.slice(0,-1)):je++})(Xe),m(O)}return O.kind==="div"&&o.byName.backgroundImage.qname in O.styleAttrs||O.kind==="br"||O.kind==="image"||"contents"in O&&O.contents.length>0||O.kind==="span"&&O.text!==null||O.kind==="region"&&O.styleAttrs[o.byName.showBackground.qname]==="always"?{region_id:L,element:O}:null}function d(p,E){if("contents"in p)for(var S=0;S<p.contents.length;S++){var A=p.contents[S],x=A.styleAttrs[o.byName.ruby.qname];(A.kind!=="span"||x!=="textContainer"&&x!=="text")&&("contents"in A?d(A,E):(A.kind==="span"&&A.text.length!==0||A.kind==="br")&&E.push(A))}}function m(p){if(p.kind==="br")return!1;if("text"in p)return p.text.length===0;if("contents"in p){for(var E=p.contents.length;E--;)m(p.contents[E])&&p.contents.splice(E,1);return p.contents.length===0}}function f(p){this.contents=[],this.aspectRatio=p.aspectRatio,this.lang=p.lang}function h(p){for(var E in this.kind=p.kind||"region",this.lang=p.lang,p.id&&(this.id=p.id),this.styleAttrs={},p.styleAttrs)p.styleAttrs.hasOwnProperty(E)&&(this.styleAttrs[E]=p.styleAttrs[E]);"src"in p&&(this.src=p.src),"type"in p&&(this.type=p.type),"text"in p?this.text=p.text:(this.kind==="region"||"contents"in p)&&(this.contents=[]),"space"in p&&(this.space=p.space)}function g(p,E){if(p&&p.error&&p.error(E))throw E}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},7640:function(r,e,t){e.generateISD=t(8905).generateISD,e.fromXML=t(6739).fromXML,e.renderHTML=t(1612).render},977:function(r,e){(function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"})(e)},1219:function(r,e,t){(function(n,i,o){function l(d,m,f,h,g,p,E,S){this.name=m,this.ns=d,this.qname=d+" "+m,this.inherit=g,this.animatable=p,this.initial=f,this.applies=h,this.parse=E,this.compute=S}for(var c in n.all=[new l(i.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,o.parseColor,null),new l(i.ns_tts,"color","white",["span"],!0,!0,o.parseColor,null),new l(i.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(d){return d}),null),new l(i.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(d){return d}),null),new l(i.ns_tts,"displayAlign","before",["region"],!1,!0,(function(d){return d}),null),new l(i.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(d){if(d==="auto")return d;var m=d.split(" ");if(m.length!==2)return null;var f=o.parseLength(m[0]),h=o.parseLength(m[1]);return h&&f?{h,w:f}:null}),(function(d,m,f,h,g){var p,E;if(h==="auto")p=new o.ComputedLength(0,1);else if((p=o.toComputedLength(h.h.value,h.h.unit,null,d.dimensions.h,null,d.pxLength.h))===null)return null;if(h==="auto")E=new o.ComputedLength(1,0);else if((E=o.toComputedLength(h.w.value,h.w.unit,null,d.dimensions.w,null,d.pxLength.w))===null)return null;return{h:p,w:E}})),new l(i.ns_tts,"fontFamily","default",["span","p"],!0,!0,(function(d){for(var m=d.split(","),f=[],h=0;h<m.length;h++)m[h]=m[h].trim(),m[h].charAt(0)!=="'"&&m[h].charAt(0)!=='"'&&m[h]==="default"?f.push("monospaceSerif"):f.push(m[h]);return f}),null),new l(i.ns_tts,"shear","0%",["p"],!0,!0,o.parseLength,(function(d,m,f,h){return h.unit!=="%"?null:Math.abs(h.value)>100?100*Math.sign(h.value):h.value})),new l(i.ns_tts,"fontSize","1c",["span","p"],!0,!0,o.parseLength,(function(d,m,f,h,g){return o.toComputedLength(h.value,h.unit,m!==null?m.styleAttrs[n.byName.fontSize.qname]:d.cellLength.h,m!==null?m.styleAttrs[n.byName.fontSize.qname]:d.cellLength.h,d.cellLength.h,d.pxLength.h)})),new l(i.ns_tts,"fontStyle","normal",["span","p"],!0,!0,(function(d){return d}),null),new l(i.ns_tts,"fontWeight","normal",["span","p"],!0,!0,(function(d){return d}),null),new l(i.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(d){return d==="normal"?d:o.parseLength(d)}),(function(d,m,f,h,g){var p;if(h==="normal")p=h;else if((p=o.toComputedLength(h.value,h.unit,f.styleAttrs[n.byName.fontSize.qname],f.styleAttrs[n.byName.fontSize.qname],d.cellLength.h,d.pxLength.h))===null)return null;return p})),new l(i.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new l(i.ns_tts,"origin","auto",["region"],!1,!0,(function(d){if(d==="auto")return d;var m=d.split(" ");if(m.length!==2)return null;var f=o.parseLength(m[0]),h=o.parseLength(m[1]);return h&&f?{h,w:f}:null}),(function(d,m,f,h,g){var p,E;if(h==="auto")p=new o.ComputedLength(0,0);else if((p=o.toComputedLength(h.h.value,h.h.unit,null,d.dimensions.h,null,d.pxLength.h))===null)return null;if(h==="auto")E=new o.ComputedLength(0,0);else if((E=o.toComputedLength(h.w.value,h.w.unit,null,d.dimensions.w,null,d.pxLength.w))===null)return null;return{h:p,w:E}})),new l(i.ns_tts,"overflow","hidden",["region"],!1,!0,(function(d){return d}),null),new l(i.ns_tts,"padding","0px",["region"],!1,!0,(function(d){var m=d.split(" ");if(m.length>4)return null;for(var f=[],h=0;h<m.length;h++){var g=o.parseLength(m[h]);if(!g)return null;f.push(g)}return f}),(function(d,m,f,h,g){var p;if(h.length===1)p=[h[0],h[0],h[0],h[0]];else if(h.length===2)p=[h[0],h[1],h[0],h[1]];else if(h.length===3)p=[h[0],h[1],h[2],h[1]];else{if(h.length!==4)return null;p=[h[0],h[1],h[2],h[3]]}var E=f.styleAttrs[n.byName.writingMode.qname];if(E==="lrtb"||E==="lr")p=[p[0],p[3],p[2],p[1]];else if(E==="rltb"||E==="rl")p=[p[0],p[1],p[2],p[3]];else if(E==="tblr")p=[p[3],p[0],p[1],p[2]];else{if(E!=="tbrl"&&E!=="tb")return null;p=[p[3],p[2],p[1],p[0]]}for(var S=[],A=0;A<p.length;A++)if(p[A].value===0)S[A]=new o.ComputedLength(0,0);else if(S[A]=o.toComputedLength(p[A].value,p[A].unit,f.styleAttrs[n.byName.fontSize.qname],A===0||A===2?f.styleAttrs[n.byName.extent.qname].h:f.styleAttrs[n.byName.extent.qname].w,A===0||A===2?d.cellLength.h:d.cellLength.w,A===0||A===2?d.pxLength.h:d.pxLength.w),S[A]===null)return null;return S})),new l(i.ns_tts,"position","top left",["region"],!1,!0,(function(d){return o.parsePosition(d)}),(function(d,m,f,h){var g,p;return(g=o.toComputedLength(h.v.offset.value,h.v.offset.unit,null,new o.ComputedLength(-f.styleAttrs[n.byName.extent.qname].h.rw,d.dimensions.h.rh-f.styleAttrs[n.byName.extent.qname].h.rh),null,d.pxLength.h))===null?null:(h.v.edge==="bottom"&&(g=new o.ComputedLength(-g.rw-f.styleAttrs[n.byName.extent.qname].h.rw,d.dimensions.h.rh-g.rh-f.styleAttrs[n.byName.extent.qname].h.rh)),p=o.toComputedLength(h.h.offset.value,h.h.offset.unit,null,new o.ComputedLength(d.dimensions.w.rw-f.styleAttrs[n.byName.extent.qname].w.rw,-f.styleAttrs[n.byName.extent.qname].w.rh),null,d.pxLength.w),g===null?null:(h.h.edge==="right"&&(p=new o.ComputedLength(d.dimensions.w.rw-p.rw-f.styleAttrs[n.byName.extent.qname].w.rw,-p.rh-f.styleAttrs[n.byName.extent.qname].w.rh)),{h:g,w:p}))})),new l(i.ns_tts,"ruby","none",["span"],!1,!0,(function(d){return d}),null),new l(i.ns_tts,"rubyAlign","center",["span"],!0,!0,(function(d){return d!=="center"&&d!=="spaceAround"?null:d}),null),new l(i.ns_tts,"rubyPosition","outside",["span"],!0,!0,(function(d){return d}),null),new l(i.ns_tts,"rubyReserve","none",["p"],!0,!0,(function(d){var m=d.split(" "),f=[null,null];if(m.length===0||m.length>2||m[0]!=="none"&&m[0]!=="both"&&m[0]!=="after"&&m[0]!=="before"&&m[0]!=="outside")return null;if(f[0]=m[0],m.length===2&&m[0]!=="none"){var h=o.parseLength(m[1]);if(!h)return null;f[1]=h}return f}),(function(d,m,f,h,g){if(h[0]==="none")return h;var p;return(p=h[1]===null?new o.ComputedLength(.5*f.styleAttrs[n.byName.fontSize.qname].rw,.5*f.styleAttrs[n.byName.fontSize.qname].rh):o.toComputedLength(h[1].value,h[1].unit,f.styleAttrs[n.byName.fontSize.qname],f.styleAttrs[n.byName.fontSize.qname],d.cellLength.h,d.pxLength.h))===null?null:[h[0],p]})),new l(i.ns_tts,"showBackground","always",["region"],!1,!0,(function(d){return d}),null),new l(i.ns_tts,"textAlign","start",["p"],!0,!0,(function(d){return d}),(function(d,m,f,h,g){return h==="left"?"start":h==="right"?"end":h})),new l(i.ns_tts,"textCombine","none",["span"],!0,!0,(function(d){return d==="none"||d==="all"?d:null}),null),new l(i.ns_tts,"textDecoration","none",["span"],!0,!0,(function(d){return d.split(" ")}),null),new l(i.ns_tts,"textEmphasis","none",["span"],!0,!0,(function(d){for(var m=d.split(" "),f={style:null,symbol:null,color:null,position:null},h=0;h<m.length;h++)if(m[h]==="none"||m[h]==="auto")f.style=m[h];else if(m[h]==="filled"||m[h]==="open")f.style=m[h];else if(m[h]==="circle"||m[h]==="dot"||m[h]==="sesame")f.symbol=m[h];else if(m[h]==="current")f.color=m[h];else if(m[h]==="outside"||m[h]==="before"||m[h]==="after")f.position=m[h];else if(f.color=o.parseColor(m[h]),f.color===null)return null;return f.style==null&&f.symbol==null?f.style="auto":(f.symbol=f.symbol||"circle",f.style=f.style||"filled"),f.position=f.position||"outside",f.color=f.color||"current",f}),null),new l(i.ns_tts,"textOutline","none",["span"],!0,!0,(function(d){if(d==="none")return d;var m={},f=d.split(" ");if(f.length===0||f.length>2)return null;var h=o.parseColor(f[0]);if(m.color=h,h!==null&&f.shift(),f.length!==1)return null;var g=o.parseLength(f[0]);return g?(m.thickness=g,m):null}),(function(d,m,f,h,g){if(h==="none")return h;var p={};return h.color===null?p.color=f.styleAttrs[n.byName.color.qname]:p.color=h.color,p.thickness=o.toComputedLength(h.thickness.value,h.thickness.unit,f.styleAttrs[n.byName.fontSize.qname],f.styleAttrs[n.byName.fontSize.qname],d.cellLength.h,d.pxLength.h),p.thickness===null?null:p})),new l(i.ns_tts,"textShadow","none",["span"],!0,!0,o.parseTextShadow,(function(d,m,f,h){if(h==="none")return h;for(var g=[],p=0;p<h.length;p++){var E={};if(E.x_off=o.toComputedLength(h[p][0].value,h[p][0].unit,null,f.styleAttrs[n.byName.fontSize.qname],null,d.pxLength.w),E.x_off===null||(E.y_off=o.toComputedLength(h[p][1].value,h[p][1].unit,null,f.styleAttrs[n.byName.fontSize.qname],null,d.pxLength.h),E.y_off===null))return null;if(h[p][2]===null)E.b_radius=0;else if(E.b_radius=o.toComputedLength(h[p][2].value,h[p][2].unit,null,f.styleAttrs[n.byName.fontSize.qname],null,d.pxLength.h),E.b_radius===null)return null;h[p][3]===null?E.color=f.styleAttrs[n.byName.color.qname]:E.color=h[p][3],g.push(E)}return g})),new l(i.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(d){return d}),null),new l(i.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(d){return d}),null),new l(i.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(d){return d}),null),new l(i.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(d){return d}),null),new l(i.ns_tts,"zIndex","auto",["region"],!1,!0,(function(d){var m;return d==="auto"?m=d:(m=parseInt(d),isNaN(m)&&(m=null)),m}),null),new l(i.ns_ebutts,"linePadding","0c",["p"],!0,!1,o.parseLength,(function(d,m,f,h,g){return o.toComputedLength(h.value,h.unit,null,null,d.cellLength.w,null)})),new l(i.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(d){return d}),null),new l(i.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(d){return d}),null),new l(i.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(d){return d==="true"}),null),new l(i.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(d){return d==="true"}),null)],n.byQName={},n.all)n.byQName[n.all[c].qname]=n.all[c];for(var u in n.byName={},n.all)n.byName[n.all[u].name]=n.all[u]})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscUtils>"u"?t(6404):imscUtils)},6404:function(r,e){(function(t){var n=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(u){var d,m=null,f=l[u.toLowerCase()];return f!==void 0?m=f:(d=n.exec(u))!==null?m=[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),d[4]!==void 0?parseInt(d[4],16):255]:(d=i.exec(u))!==null?m=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),255]:(d=o.exec(u))!==null&&(m=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),parseInt(d[4])]),m};var c=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;t.parseLength=function(u){var d,m=null;return(d=c.exec(u))!==null&&(m={value:parseFloat(d[1]),unit:d[2]}),m},t.parseTextShadow=function(u){for(var d=u.match(/([^\(,\)]|\([^\)]+\))+/g),m=[],f=0;f<d.length;f++){var h=d[f].split(" ");if(h.length===1&&h[0]==="none")return"none";if(h.length>1&&h.length<5){var g=[null,null,null,null],p=t.parseLength(h.shift());if(p===null||(g[0]=p,(p=t.parseLength(h.shift()))===null))return null;if(g[1]=p,h.length===0){m.push(g);continue}if((p=t.parseLength(h[0]))!==null&&(g[2]=p,h.shift()),h.length===0){m.push(g);continue}var E=t.parseColor(h[0]);if(E===null)return null;g[3]=E,m.push(g)}}return m},t.parsePosition=function(u){var d=u.split(" "),m=function(A){return A==="center"||A==="left"||A==="top"||A==="bottom"||A==="right"};if(d.length>4)return null;for(var f=0;f<d.length;f++)if(!m(d[f])){var h=t.parseLength(d[f]);if(h===null)return null;d[f]=h}for(var g={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},p=0;p<d.length;){var E=d[p++];if(m(E)){var S={value:0,unit:"%"};d.length!==2&&p<d.length&&!m(d[p])&&(S=d[p++]),E==="right"?(g.h.edge=E,g.h.offset=S):E==="bottom"?(g.v.edge=E,g.v.offset=S):E==="left"?g.h.offset=S:E==="top"&&(g.v.offset=S)}else{if(d.length!==1&&d.length!==2)return null;p===1?g.h.offset=E:g.v.offset=E}}return g},t.ComputedLength=function(u,d){this.rw=u,this.rh=d},t.ComputedLength.prototype.toUsedLength=function(u,d){return u*this.rw+d*this.rh},t.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},t.toComputedLength=function(u,d,m,f,h,g){return d==="%"&&f?new t.ComputedLength(f.rw*u/100,f.rh*u/100):d==="em"&&m?new t.ComputedLength(m.rw*u,m.rh*u):d==="c"&&h?new t.ComputedLength(u*h.rw,u*h.rh):d==="px"&&g?new t.ComputedLength(u*g.rw,u*g.rh):d==="rh"?new t.ComputedLength(0,u/100):d==="rw"?new t.ComputedLength(u/100,0):null}})(e)},7523:function(r){typeof Object.create=="function"?r.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3282:function(r){function e(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function t(i,o){for(var l,c="",u=0,d=-1,m=0,f=0;f<=i.length;++f){if(f<i.length)l=i.charCodeAt(f);else{if(l===47)break;l=47}if(l===47){if(!(d===f-1||m===1))if(d!==f-1&&m===2){if(c.length<2||u!==2||c.charCodeAt(c.length-1)!==46||c.charCodeAt(c.length-2)!==46){if(c.length>2){var h=c.lastIndexOf("/");if(h!==c.length-1){h===-1?(c="",u=0):u=(c=c.slice(0,h)).length-1-c.lastIndexOf("/"),d=f,m=0;continue}}else if(c.length===2||c.length===1){c="",u=0,d=f,m=0;continue}}o&&(c.length>0?c+="/..":c="..",u=2)}else c.length>0?c+="/"+i.slice(d+1,f):c=i.slice(d+1,f),u=f-d-1;d=f,m=0}else l===46&&m!==-1?++m:m=-1}return c}var n={resolve:function(){for(var i,o="",l=!1,c=arguments.length-1;c>=-1&&!l;c--){var u;c>=0?u=arguments[c]:(i===void 0&&(i=process.cwd()),u=i),e(u),u.length!==0&&(o=u+"/"+o,l=u.charCodeAt(0)===47)}return o=t(o,!l),l?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,l=i.charCodeAt(i.length-1)===47;return(i=t(i,!o)).length!==0||o||(i="."),i.length>0&&l&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var l=arguments[o];e(l),l.length>0&&(i===void 0?i=l:i+="/"+l)}return i===void 0?".":n.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=n.resolve(i))===(o=n.resolve(o)))return"";for(var l=1;l<i.length&&i.charCodeAt(l)===47;++l);for(var c=i.length,u=c-l,d=1;d<o.length&&o.charCodeAt(d)===47;++d);for(var m=o.length-d,f=u<m?u:m,h=-1,g=0;g<=f;++g){if(g===f){if(m>f){if(o.charCodeAt(d+g)===47)return o.slice(d+g+1);if(g===0)return o.slice(d+g)}else u>f&&(i.charCodeAt(l+g)===47?h=g:g===0&&(h=0));break}var p=i.charCodeAt(l+g);if(p!==o.charCodeAt(d+g))break;p===47&&(h=g)}var E="";for(g=l+h+1;g<=c;++g)g!==c&&i.charCodeAt(g)!==47||(E.length===0?E+="..":E+="/..");return E.length>0?E+o.slice(d+h):(d+=h,o.charCodeAt(d)===47&&++d,o.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),l=o===47,c=-1,u=!0,d=i.length-1;d>=1;--d)if((o=i.charCodeAt(d))===47){if(!u){c=d;break}}else u=!1;return c===-1?l?"/":".":l&&c===1?"//":i.slice(0,c)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var l,c=0,u=-1,d=!0;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var m=o.length-1,f=-1;for(l=i.length-1;l>=0;--l){var h=i.charCodeAt(l);if(h===47){if(!d){c=l+1;break}}else f===-1&&(d=!1,f=l+1),m>=0&&(h===o.charCodeAt(m)?--m==-1&&(u=l):(m=-1,u=f))}return c===u?u=f:u===-1&&(u=i.length),i.slice(c,u)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!d){c=l+1;break}}else u===-1&&(d=!1,u=l+1);return u===-1?"":i.slice(c,u)},extname:function(i){e(i);for(var o=-1,l=0,c=-1,u=!0,d=0,m=i.length-1;m>=0;--m){var f=i.charCodeAt(m);if(f!==47)c===-1&&(u=!1,c=m+1),f===46?o===-1?o=m:d!==1&&(d=1):o!==-1&&(d=-1);else if(!u){l=m+1;break}}return o===-1||c===-1||d===0||d===1&&o===c-1&&o===l+1?"":i.slice(o,c)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return(function(o,l){var c=l.dir||l.root,u=l.base||(l.name||"")+(l.ext||"");return c?c===l.root?c+u:c+"/"+u:u})(0,i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var l,c=i.charCodeAt(0),u=c===47;u?(o.root="/",l=1):l=0;for(var d=-1,m=0,f=-1,h=!0,g=i.length-1,p=0;g>=l;--g)if((c=i.charCodeAt(g))!==47)f===-1&&(h=!1,f=g+1),c===46?d===-1?d=g:p!==1&&(p=1):d!==-1&&(p=-1);else if(!h){m=g+1;break}return d===-1||f===-1||p===0||p===1&&d===f-1&&d===m+1?f!==-1&&(o.base=o.name=m===0&&u?i.slice(1,f):i.slice(m,f)):(m===0&&u?(o.name=i.slice(1,d),o.base=i.slice(1,f)):(o.name=i.slice(m,d),o.base=i.slice(m,f)),o.ext=i.slice(d,f)),m>0?o.dir=i.slice(0,m-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,r.exports=n},3515:function(r,e,t){r.exports=i;var n=t(9826).EventEmitter;function i(){n.call(this)}t(7523)(i,n),i.Readable=t(2762),i.Writable=t(3726),i.Duplex=t(884),i.Transform=t(6756),i.PassThrough=t(1390),i.finished=t(2896),i.pipeline=t(8460),i.Stream=i,i.prototype.pipe=function(o,l){var c=this;function u(E){o.writable&&o.write(E)===!1&&c.pause&&c.pause()}function d(){c.readable&&c.resume&&c.resume()}c.on("data",u),o.on("drain",d),o._isStdio||l&&l.end===!1||(c.on("end",f),c.on("close",h));var m=!1;function f(){m||(m=!0,o.end())}function h(){m||(m=!0,typeof o.destroy=="function"&&o.destroy())}function g(E){if(p(),n.listenerCount(this,"error")===0)throw E}function p(){c.removeListener("data",u),o.removeListener("drain",d),c.removeListener("end",f),c.removeListener("close",h),c.removeListener("error",g),o.removeListener("error",g),c.removeListener("end",p),c.removeListener("close",p),o.removeListener("close",p)}return c.on("error",g),o.on("error",g),c.on("end",p),c.on("close",p),o.on("close",p),o.emit("pipe",c),o}},1602:function(r){var e={};function t(i,o,l){l||(l=Error);var c=(function(u){var d,m;function f(h,g,p){return u.call(this,(function(E,S,A){return typeof o=="string"?o:o(E,S,A)})(h,g,p))||this}return m=u,(d=f).prototype=Object.create(m.prototype),d.prototype.constructor=d,d.__proto__=m,f})(l);c.prototype.name=l.name,c.prototype.code=i,e[i]=c}function n(i,o){if(Array.isArray(i)){var l=i.length;return i=i.map((function(c){return String(c)})),l>2?"one of ".concat(o," ").concat(i.slice(0,l-1).join(", "),", or ")+i[l-1]:l===2?"one of ".concat(o," ").concat(i[0]," or ").concat(i[1]):"of ".concat(o," ").concat(i[0])}return"of ".concat(o," ").concat(String(i))}t("ERR_INVALID_OPT_VALUE",(function(i,o){return'The value "'+o+'" is invalid for option "'+i+'"'}),TypeError),t("ERR_INVALID_ARG_TYPE",(function(i,o,l){var c,u,d,m,f;if(typeof o=="string"&&(u="not ",o.substr(0,4)===u)?(c="must not be",o=o.replace(/^not /,"")):c="must be",(function(g,p,E){return(E===void 0||E>g.length)&&(E=g.length),g.substring(E-9,E)===p})(i," argument"))d="The ".concat(i," ").concat(c," ").concat(n(o,"type"));else{var h=(typeof f!="number"&&(f=0),f+1>(m=i).length||m.indexOf(".",f)===-1?"argument":"property");d='The "'.concat(i,'" ').concat(h," ").concat(c," ").concat(n(o,"type"))}return d+". Received type ".concat(typeof l)}),TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",(function(i){return"The "+i+" method is not implemented"})),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",(function(i){return"Cannot call "+i+" after a stream was destroyed"})),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",(function(i){return"Unknown encoding: "+i}),TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r.exports.codes=e},884:function(r,e,t){var n=Object.keys||function(h){var g=[];for(var p in h)g.push(p);return g};r.exports=d;var i=t(2762),o=t(3726);t(7523)(d,i);for(var l=n(o.prototype),c=0;c<l.length;c++){var u=l[c];d.prototype[u]||(d.prototype[u]=o.prototype[u])}function d(h){if(!(this instanceof d))return new d(h);i.call(this,h),o.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||process.nextTick(f,this)}function f(h){h.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}})},1390:function(r,e,t){r.exports=i;var n=t(6756);function i(o){if(!(this instanceof i))return new i(o);n.call(this,o)}t(7523)(i,n),i.prototype._transform=function(o,l,c){c(null,o)}},2762:function(r,e,t){var n;r.exports=O,O.ReadableState=L,t(9826).EventEmitter;var i,o=function(xe,Ie){return xe.listeners(Ie).length},l=t(2611),c=t(44).Buffer,u=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},d=t(7199);i=d&&d.debuglog?d.debuglog("stream"):function(){};var m,f,h,g=t(3791),p=t(2410),E=t(1749).getHighWaterMark,S=t(1602).codes,A=S.ERR_INVALID_ARG_TYPE,x=S.ERR_STREAM_PUSH_AFTER_EOF,k=S.ERR_METHOD_NOT_IMPLEMENTED,U=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(7523)(O,l);var Y=p.errorOrDestroy,Q=["error","close","destroy","pause","resume"];function L(xe,Ie,Ke){n=n||t(884),xe=xe||{},typeof Ke!="boolean"&&(Ke=Ie instanceof n),this.objectMode=!!xe.objectMode,Ke&&(this.objectMode=this.objectMode||!!xe.readableObjectMode),this.highWaterMark=E(this,xe,"readableHighWaterMark",Ke),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=xe.emitClose!==!1,this.autoDestroy=!!xe.autoDestroy,this.destroyed=!1,this.defaultEncoding=xe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,xe.encoding&&(m||(m=t(748).StringDecoder),this.decoder=new m(xe.encoding),this.encoding=xe.encoding)}function O(xe){if(n=n||t(884),!(this instanceof O))return new O(xe);var Ie=this instanceof n;this._readableState=new L(xe,this,Ie),this.readable=!0,xe&&(typeof xe.read=="function"&&(this._read=xe.read),typeof xe.destroy=="function"&&(this._destroy=xe.destroy)),l.call(this)}function G(xe,Ie,Ke,H,V){i("readableAddChunk",Ie);var C,F=xe._readableState;if(Ie===null)F.reading=!1,(function(oe,Z){if(i("onEofChunk"),!Z.ended){if(Z.decoder){var Be=Z.decoder.end();Be&&Be.length&&(Z.buffer.push(Be),Z.length+=Z.objectMode?1:Be.length)}Z.ended=!0,Z.sync?he(oe):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,De(oe)))}})(xe,F);else if(V||(C=(function(oe,Z){var Be,Xe;return Xe=Z,c.isBuffer(Xe)||Xe instanceof u||typeof Z=="string"||Z===void 0||oe.objectMode||(Be=new A("chunk",["string","Buffer","Uint8Array"],Z)),Be})(F,Ie)),C)Y(xe,C);else if(F.objectMode||Ie&&Ie.length>0)if(typeof Ie=="string"||F.objectMode||Object.getPrototypeOf(Ie)===c.prototype||(Ie=(function(oe){return c.from(oe)})(Ie)),H)F.endEmitted?Y(xe,new U):te(xe,F,Ie,!0);else if(F.ended)Y(xe,new x);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!Ke?(Ie=F.decoder.write(Ie),F.objectMode||Ie.length!==0?te(xe,F,Ie,!1):_e(xe,F)):te(xe,F,Ie,!1)}else H||(F.reading=!1,_e(xe,F));return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function te(xe,Ie,Ke,H){Ie.flowing&&Ie.length===0&&!Ie.sync?(Ie.awaitDrain=0,xe.emit("data",Ke)):(Ie.length+=Ie.objectMode?1:Ke.length,H?Ie.buffer.unshift(Ke):Ie.buffer.push(Ke),Ie.needReadable&&he(xe)),_e(xe,Ie)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(xe){this._readableState&&(this._readableState.destroyed=xe)}}),O.prototype.destroy=p.destroy,O.prototype._undestroy=p.undestroy,O.prototype._destroy=function(xe,Ie){Ie(xe)},O.prototype.push=function(xe,Ie){var Ke,H=this._readableState;return H.objectMode?Ke=!0:typeof xe=="string"&&((Ie=Ie||H.defaultEncoding)!==H.encoding&&(xe=c.from(xe,Ie),Ie=""),Ke=!0),G(this,xe,Ie,!1,Ke)},O.prototype.unshift=function(xe){return G(this,xe,null,!0,!1)},O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(xe){m||(m=t(748).StringDecoder);var Ie=new m(xe);this._readableState.decoder=Ie,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ke=this._readableState.buffer.head,H="";Ke!==null;)H+=Ie.write(Ke.data),Ke=Ke.next;return this._readableState.buffer.clear(),H!==""&&this._readableState.buffer.push(H),this._readableState.length=H.length,this};var ge=1073741824;function Me(xe,Ie){return xe<=0||Ie.length===0&&Ie.ended?0:Ie.objectMode?1:xe!=xe?Ie.flowing&&Ie.length?Ie.buffer.head.data.length:Ie.length:(xe>Ie.highWaterMark&&(Ie.highWaterMark=(function(Ke){return Ke>=ge?Ke=ge:(Ke--,Ke|=Ke>>>1,Ke|=Ke>>>2,Ke|=Ke>>>4,Ke|=Ke>>>8,Ke|=Ke>>>16,Ke++),Ke})(xe)),xe<=Ie.length?xe:Ie.ended?Ie.length:(Ie.needReadable=!0,0))}function he(xe){var Ie=xe._readableState;i("emitReadable",Ie.needReadable,Ie.emittedReadable),Ie.needReadable=!1,Ie.emittedReadable||(i("emitReadable",Ie.flowing),Ie.emittedReadable=!0,process.nextTick(De,xe))}function De(xe){var Ie=xe._readableState;i("emitReadable_",Ie.destroyed,Ie.length,Ie.ended),Ie.destroyed||!Ie.length&&!Ie.ended||(xe.emit("readable"),Ie.emittedReadable=!1),Ie.needReadable=!Ie.flowing&&!Ie.ended&&Ie.length<=Ie.highWaterMark,Ge(xe)}function _e(xe,Ie){Ie.readingMore||(Ie.readingMore=!0,process.nextTick(ke,xe,Ie))}function ke(xe,Ie){for(;!Ie.reading&&!Ie.ended&&(Ie.length<Ie.highWaterMark||Ie.flowing&&Ie.length===0);){var Ke=Ie.length;if(i("maybeReadMore read 0"),xe.read(0),Ke===Ie.length)break}Ie.readingMore=!1}function Oe(xe){var Ie=xe._readableState;Ie.readableListening=xe.listenerCount("readable")>0,Ie.resumeScheduled&&!Ie.paused?Ie.flowing=!0:xe.listenerCount("data")>0&&xe.resume()}function He(xe){i("readable nexttick read 0"),xe.read(0)}function Pe(xe,Ie){i("resume",Ie.reading),Ie.reading||xe.read(0),Ie.resumeScheduled=!1,xe.emit("resume"),Ge(xe),Ie.flowing&&!Ie.reading&&xe.read(0)}function Ge(xe){var Ie=xe._readableState;for(i("flow",Ie.flowing);Ie.flowing&&xe.read()!==null;);}function qe(xe,Ie){return Ie.length===0?null:(Ie.objectMode?Ke=Ie.buffer.shift():!xe||xe>=Ie.length?(Ke=Ie.decoder?Ie.buffer.join(""):Ie.buffer.length===1?Ie.buffer.first():Ie.buffer.concat(Ie.length),Ie.buffer.clear()):Ke=Ie.buffer.consume(xe,Ie.decoder),Ke);var Ke}function Ze(xe){var Ie=xe._readableState;i("endReadable",Ie.endEmitted),Ie.endEmitted||(Ie.ended=!0,process.nextTick(ct,Ie,xe))}function ct(xe,Ie){if(i("endReadableNT",xe.endEmitted,xe.length),!xe.endEmitted&&xe.length===0&&(xe.endEmitted=!0,Ie.readable=!1,Ie.emit("end"),xe.autoDestroy)){var Ke=Ie._writableState;(!Ke||Ke.autoDestroy&&Ke.finished)&&Ie.destroy()}}function mt(xe,Ie){for(var Ke=0,H=xe.length;Ke<H;Ke++)if(xe[Ke]===Ie)return Ke;return-1}O.prototype.read=function(xe){i("read",xe),xe=parseInt(xe,10);var Ie=this._readableState,Ke=xe;if(xe!==0&&(Ie.emittedReadable=!1),xe===0&&Ie.needReadable&&((Ie.highWaterMark!==0?Ie.length>=Ie.highWaterMark:Ie.length>0)||Ie.ended))return i("read: emitReadable",Ie.length,Ie.ended),Ie.length===0&&Ie.ended?Ze(this):he(this),null;if((xe=Me(xe,Ie))===0&&Ie.ended)return Ie.length===0&&Ze(this),null;var H,V=Ie.needReadable;return i("need readable",V),(Ie.length===0||Ie.length-xe<Ie.highWaterMark)&&i("length less than watermark",V=!0),Ie.ended||Ie.reading?i("reading or ended",V=!1):V&&(i("do read"),Ie.reading=!0,Ie.sync=!0,Ie.length===0&&(Ie.needReadable=!0),this._read(Ie.highWaterMark),Ie.sync=!1,Ie.reading||(xe=Me(Ke,Ie))),(H=xe>0?qe(xe,Ie):null)===null?(Ie.needReadable=Ie.length<=Ie.highWaterMark,xe=0):(Ie.length-=xe,Ie.awaitDrain=0),Ie.length===0&&(Ie.ended||(Ie.needReadable=!0),Ke!==xe&&Ie.ended&&Ze(this)),H!==null&&this.emit("data",H),H},O.prototype._read=function(xe){Y(this,new k("_read()"))},O.prototype.pipe=function(xe,Ie){var Ke=this,H=this._readableState;switch(H.pipesCount){case 0:H.pipes=xe;break;case 1:H.pipes=[H.pipes,xe];break;default:H.pipes.push(xe)}H.pipesCount+=1,i("pipe count=%d opts=%j",H.pipesCount,Ie);var V=Ie&&Ie.end===!1||xe===process.stdout||xe===process.stderr?Ve:C;function C(){i("onend"),xe.end()}H.endEmitted?process.nextTick(V):Ke.once("end",V),xe.on("unpipe",(function je(Qe,dt){i("onunpipe"),Qe===Ke&&dt&&dt.hasUnpiped===!1&&(dt.hasUnpiped=!0,i("cleanup"),xe.removeListener("close",Xe),xe.removeListener("finish",$e),xe.removeListener("drain",F),xe.removeListener("error",Be),xe.removeListener("unpipe",je),Ke.removeListener("end",C),Ke.removeListener("end",Ve),Ke.removeListener("data",Z),oe=!0,!H.awaitDrain||xe._writableState&&!xe._writableState.needDrain||F())}));var F=(function(je){return function(){var Qe=je._readableState;i("pipeOnDrain",Qe.awaitDrain),Qe.awaitDrain&&Qe.awaitDrain--,Qe.awaitDrain===0&&o(je,"data")&&(Qe.flowing=!0,Ge(je))}})(Ke);xe.on("drain",F);var oe=!1;function Z(je){i("ondata");var Qe=xe.write(je);i("dest.write",Qe),Qe===!1&&((H.pipesCount===1&&H.pipes===xe||H.pipesCount>1&&mt(H.pipes,xe)!==-1)&&!oe&&(i("false write response, pause",H.awaitDrain),H.awaitDrain++),Ke.pause())}function Be(je){i("onerror",je),Ve(),xe.removeListener("error",Be),o(xe,"error")===0&&Y(xe,je)}function Xe(){xe.removeListener("finish",$e),Ve()}function $e(){i("onfinish"),xe.removeListener("close",Xe),Ve()}function Ve(){i("unpipe"),Ke.unpipe(xe)}return Ke.on("data",Z),(function(je,Qe,dt){if(typeof je.prependListener=="function")return je.prependListener(Qe,dt);je._events&&je._events[Qe]?Array.isArray(je._events[Qe])?je._events[Qe].unshift(dt):je._events[Qe]=[dt,je._events[Qe]]:je.on(Qe,dt)})(xe,"error",Be),xe.once("close",Xe),xe.once("finish",$e),xe.emit("pipe",Ke),H.flowing||(i("pipe resume"),Ke.resume()),xe},O.prototype.unpipe=function(xe){var Ie=this._readableState,Ke={hasUnpiped:!1};if(Ie.pipesCount===0)return this;if(Ie.pipesCount===1)return xe&&xe!==Ie.pipes||(xe||(xe=Ie.pipes),Ie.pipes=null,Ie.pipesCount=0,Ie.flowing=!1,xe&&xe.emit("unpipe",this,Ke)),this;if(!xe){var H=Ie.pipes,V=Ie.pipesCount;Ie.pipes=null,Ie.pipesCount=0,Ie.flowing=!1;for(var C=0;C<V;C++)H[C].emit("unpipe",this,{hasUnpiped:!1});return this}var F=mt(Ie.pipes,xe);return F===-1||(Ie.pipes.splice(F,1),Ie.pipesCount-=1,Ie.pipesCount===1&&(Ie.pipes=Ie.pipes[0]),xe.emit("unpipe",this,Ke)),this},O.prototype.on=function(xe,Ie){var Ke=l.prototype.on.call(this,xe,Ie),H=this._readableState;return xe==="data"?(H.readableListening=this.listenerCount("readable")>0,H.flowing!==!1&&this.resume()):xe==="readable"&&(H.endEmitted||H.readableListening||(H.readableListening=H.needReadable=!0,H.flowing=!1,H.emittedReadable=!1,i("on readable",H.length,H.reading),H.length?he(this):H.reading||process.nextTick(He,this))),Ke},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(xe,Ie){var Ke=l.prototype.removeListener.call(this,xe,Ie);return xe==="readable"&&process.nextTick(Oe,this),Ke},O.prototype.removeAllListeners=function(xe){var Ie=l.prototype.removeAllListeners.apply(this,arguments);return xe!=="readable"&&xe!==void 0||process.nextTick(Oe,this),Ie},O.prototype.resume=function(){var xe=this._readableState;return xe.flowing||(i("resume"),xe.flowing=!xe.readableListening,(function(Ie,Ke){Ke.resumeScheduled||(Ke.resumeScheduled=!0,process.nextTick(Pe,Ie,Ke))})(this,xe)),xe.paused=!1,this},O.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},O.prototype.wrap=function(xe){var Ie=this,Ke=this._readableState,H=!1;for(var V in xe.on("end",(function(){if(i("wrapped end"),Ke.decoder&&!Ke.ended){var F=Ke.decoder.end();F&&F.length&&Ie.push(F)}Ie.push(null)})),xe.on("data",(function(F){i("wrapped data"),Ke.decoder&&(F=Ke.decoder.write(F)),Ke.objectMode&&F==null||(Ke.objectMode||F&&F.length)&&(Ie.push(F)||(H=!0,xe.pause()))})),xe)this[V]===void 0&&typeof xe[V]=="function"&&(this[V]=(function(F){return function(){return xe[F].apply(xe,arguments)}})(V));for(var C=0;C<Q.length;C++)xe.on(Q[C],this.emit.bind(this,Q[C]));return this._read=function(F){i("wrapped _read",F),H&&(H=!1,xe.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return f===void 0&&(f=t(5857)),f(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(xe){this._readableState&&(this._readableState.flowing=xe)}}),O._fromList=qe,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(O.from=function(xe,Ie){return h===void 0&&(h=t(3411)),h(O,xe,Ie)})},6756:function(r,e,t){r.exports=m;var n=t(1602).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,l=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=n.ERR_TRANSFORM_WITH_LENGTH_0,u=t(884);function d(g,p){var E=this._transformState;E.transforming=!1;var S=E.writecb;if(S===null)return this.emit("error",new o);E.writechunk=null,E.writecb=null,p!=null&&this.push(p),S(g);var A=this._readableState;A.reading=!1,(A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}function m(g){if(!(this instanceof m))return new m(g);u.call(this,g),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",f)}function f(){var g=this;typeof this._flush!="function"||this._readableState.destroyed?h(this,null,null):this._flush((function(p,E){h(g,p,E)}))}function h(g,p,E){if(p)return g.emit("error",p);if(E!=null&&g.push(E),g._writableState.length)throw new c;if(g._transformState.transforming)throw new l;return g.push(null)}t(7523)(m,u),m.prototype.push=function(g,p){return this._transformState.needTransform=!1,u.prototype.push.call(this,g,p)},m.prototype._transform=function(g,p,E){E(new i("_transform()"))},m.prototype._write=function(g,p,E){var S=this._transformState;if(S.writecb=E,S.writechunk=g,S.writeencoding=p,!S.transforming){var A=this._readableState;(S.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},m.prototype._read=function(g){var p=this._transformState;p.writechunk===null||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},m.prototype._destroy=function(g,p){u.prototype._destroy.call(this,g,(function(E){p(E)}))}},3726:function(r,e,t){function n(_e){var ke=this;this.next=null,this.entry=null,this.finish=function(){(function(Oe,He){var Pe=Oe.entry;for(Oe.entry=null;Pe;){var Ge=Pe.callback;He.pendingcb--,Ge(void 0),Pe=Pe.next}He.corkedRequestsFree.next=Oe})(ke,_e)}}var i;r.exports=O,O.WritableState=L;var o,l={deprecate:t(9e3)},c=t(2611),u=t(44).Buffer,d=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m=t(2410),f=t(1749).getHighWaterMark,h=t(1602).codes,g=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,E=h.ERR_MULTIPLE_CALLBACK,S=h.ERR_STREAM_CANNOT_PIPE,A=h.ERR_STREAM_DESTROYED,x=h.ERR_STREAM_NULL_VALUES,k=h.ERR_STREAM_WRITE_AFTER_END,U=h.ERR_UNKNOWN_ENCODING,Y=m.errorOrDestroy;function Q(){}function L(_e,ke,Oe){i=i||t(884),_e=_e||{},typeof Oe!="boolean"&&(Oe=ke instanceof i),this.objectMode=!!_e.objectMode,Oe&&(this.objectMode=this.objectMode||!!_e.writableObjectMode),this.highWaterMark=f(this,_e,"writableHighWaterMark",Oe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var He=_e.decodeStrings===!1;this.decodeStrings=!He,this.defaultEncoding=_e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Pe){(function(Ge,qe){var Ze=Ge._writableState,ct=Ze.sync,mt=Ze.writecb;if(typeof mt!="function")throw new E;if((function(Ie){Ie.writing=!1,Ie.writecb=null,Ie.length-=Ie.writelen,Ie.writelen=0})(Ze),qe)(function(Ie,Ke,H,V,C){--Ke.pendingcb,H?(process.nextTick(C,V),process.nextTick(De,Ie,Ke),Ie._writableState.errorEmitted=!0,Y(Ie,V)):(C(V),Ie._writableState.errorEmitted=!0,Y(Ie,V),De(Ie,Ke))})(Ge,Ze,ct,qe,mt);else{var xe=Me(Ze)||Ge.destroyed;xe||Ze.corked||Ze.bufferProcessing||!Ze.bufferedRequest||ge(Ge,Ze),ct?process.nextTick(te,Ge,Ze,xe,mt):te(Ge,Ze,xe,mt)}})(ke,Pe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=_e.emitClose!==!1,this.autoDestroy=!!_e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function O(_e){var ke=this instanceof(i=i||t(884));if(!ke&&!o.call(O,this))return new O(_e);this._writableState=new L(_e,this,ke),this.writable=!0,_e&&(typeof _e.write=="function"&&(this._write=_e.write),typeof _e.writev=="function"&&(this._writev=_e.writev),typeof _e.destroy=="function"&&(this._destroy=_e.destroy),typeof _e.final=="function"&&(this._final=_e.final)),c.call(this)}function G(_e,ke,Oe,He,Pe,Ge,qe){ke.writelen=He,ke.writecb=qe,ke.writing=!0,ke.sync=!0,ke.destroyed?ke.onwrite(new A("write")):Oe?_e._writev(Pe,ke.onwrite):_e._write(Pe,Ge,ke.onwrite),ke.sync=!1}function te(_e,ke,Oe,He){Oe||(function(Pe,Ge){Ge.length===0&&Ge.needDrain&&(Ge.needDrain=!1,Pe.emit("drain"))})(_e,ke),ke.pendingcb--,He(),De(_e,ke)}function ge(_e,ke){ke.bufferProcessing=!0;var Oe=ke.bufferedRequest;if(_e._writev&&Oe&&Oe.next){var He=ke.bufferedRequestCount,Pe=new Array(He),Ge=ke.corkedRequestsFree;Ge.entry=Oe;for(var qe=0,Ze=!0;Oe;)Pe[qe]=Oe,Oe.isBuf||(Ze=!1),Oe=Oe.next,qe+=1;Pe.allBuffers=Ze,G(_e,ke,!0,ke.length,Pe,"",Ge.finish),ke.pendingcb++,ke.lastBufferedRequest=null,Ge.next?(ke.corkedRequestsFree=Ge.next,Ge.next=null):ke.corkedRequestsFree=new n(ke),ke.bufferedRequestCount=0}else{for(;Oe;){var ct=Oe.chunk,mt=Oe.encoding,xe=Oe.callback;if(G(_e,ke,!1,ke.objectMode?1:ct.length,ct,mt,xe),Oe=Oe.next,ke.bufferedRequestCount--,ke.writing)break}Oe===null&&(ke.lastBufferedRequest=null)}ke.bufferedRequest=Oe,ke.bufferProcessing=!1}function Me(_e){return _e.ending&&_e.length===0&&_e.bufferedRequest===null&&!_e.finished&&!_e.writing}function he(_e,ke){_e._final((function(Oe){ke.pendingcb--,Oe&&Y(_e,Oe),ke.prefinished=!0,_e.emit("prefinish"),De(_e,ke)}))}function De(_e,ke){var Oe=Me(ke);if(Oe&&((function(Pe,Ge){Ge.prefinished||Ge.finalCalled||(typeof Pe._final!="function"||Ge.destroyed?(Ge.prefinished=!0,Pe.emit("prefinish")):(Ge.pendingcb++,Ge.finalCalled=!0,process.nextTick(he,Pe,Ge)))})(_e,ke),ke.pendingcb===0&&(ke.finished=!0,_e.emit("finish"),ke.autoDestroy))){var He=_e._readableState;(!He||He.autoDestroy&&He.endEmitted)&&_e.destroy()}return Oe}t(7523)(O,c),L.prototype.getBuffer=function(){for(var _e=this.bufferedRequest,ke=[];_e;)ke.push(_e),_e=_e.next;return ke},(function(){try{Object.defineProperty(L.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(_e){return!!o.call(this,_e)||this===O&&_e&&_e._writableState instanceof L}})):o=function(_e){return _e instanceof this},O.prototype.pipe=function(){Y(this,new S)},O.prototype.write=function(_e,ke,Oe){var He,Pe=this._writableState,Ge=!1,qe=!Pe.objectMode&&(He=_e,u.isBuffer(He)||He instanceof d);return qe&&!u.isBuffer(_e)&&(_e=(function(Ze){return u.from(Ze)})(_e)),typeof ke=="function"&&(Oe=ke,ke=null),qe?ke="buffer":ke||(ke=Pe.defaultEncoding),typeof Oe!="function"&&(Oe=Q),Pe.ending?(function(Ze,ct){var mt=new k;Y(Ze,mt),process.nextTick(ct,mt)})(this,Oe):(qe||(function(Ze,ct,mt,xe){var Ie;return mt===null?Ie=new x:typeof mt=="string"||ct.objectMode||(Ie=new g("chunk",["string","Buffer"],mt)),!Ie||(Y(Ze,Ie),process.nextTick(xe,Ie),!1)})(this,Pe,_e,Oe))&&(Pe.pendingcb++,Ge=(function(Ze,ct,mt,xe,Ie,Ke){if(!mt){var H=(function(oe,Z,Be){return oe.objectMode||oe.decodeStrings===!1||typeof Z!="string"||(Z=u.from(Z,Be)),Z})(ct,xe,Ie);xe!==H&&(mt=!0,Ie="buffer",xe=H)}var V=ct.objectMode?1:xe.length;ct.length+=V;var C=ct.length<ct.highWaterMark;if(C||(ct.needDrain=!0),ct.writing||ct.corked){var F=ct.lastBufferedRequest;ct.lastBufferedRequest={chunk:xe,encoding:Ie,isBuf:mt,callback:Ke,next:null},F?F.next=ct.lastBufferedRequest:ct.bufferedRequest=ct.lastBufferedRequest,ct.bufferedRequestCount+=1}else G(Ze,ct,!1,V,xe,Ie,Ke);return C})(this,Pe,qe,_e,ke,Oe)),Ge},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var _e=this._writableState;_e.corked&&(_e.corked--,_e.writing||_e.corked||_e.bufferProcessing||!_e.bufferedRequest||ge(this,_e))},O.prototype.setDefaultEncoding=function(_e){if(typeof _e=="string"&&(_e=_e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((_e+"").toLowerCase())>-1))throw new U(_e);return this._writableState.defaultEncoding=_e,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(_e,ke,Oe){Oe(new p("_write()"))},O.prototype._writev=null,O.prototype.end=function(_e,ke,Oe){var He=this._writableState;return typeof _e=="function"?(Oe=_e,_e=null,ke=null):typeof ke=="function"&&(Oe=ke,ke=null),_e!=null&&this.write(_e,ke),He.corked&&(He.corked=1,this.uncork()),He.ending||(function(Pe,Ge,qe){Ge.ending=!0,De(Pe,Ge),qe&&(Ge.finished?process.nextTick(qe):Pe.once("finish",qe)),Ge.ended=!0,Pe.writable=!1})(this,He,Oe),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(_e){this._writableState&&(this._writableState.destroyed=_e)}}),O.prototype.destroy=m.destroy,O.prototype._undestroy=m.undestroy,O.prototype._destroy=function(_e,ke){ke(_e)}},5857:function(r,e,t){var n;function i(x,k,U){return(k=(function(Y){var Q=(function(L){if(typeof L!="object"||L===null)return L;var O=L[Symbol.toPrimitive];if(O!==void 0){var G=O.call(L,"string");if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(L)})(Y);return typeof Q=="symbol"?Q:String(Q)})(k))in x?Object.defineProperty(x,k,{value:U,enumerable:!0,configurable:!0,writable:!0}):x[k]=U,x}var o=t(2896),l=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),d=Symbol("ended"),m=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function g(x,k){return{value:x,done:k}}function p(x){var k=x[l];if(k!==null){var U=x[h].read();U!==null&&(x[m]=null,x[l]=null,x[c]=null,k(g(U,!1)))}}function E(x){process.nextTick(p,x)}var S=Object.getPrototypeOf((function(){})),A=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var x=this,k=this[u];if(k!==null)return Promise.reject(k);if(this[d])return Promise.resolve(g(void 0,!0));if(this[h].destroyed)return new Promise((function(L,O){process.nextTick((function(){x[u]?O(x[u]):L(g(void 0,!0))}))}));var U,Y=this[m];if(Y)U=new Promise((function(L,O){return function(G,te){L.then((function(){O[d]?G(g(void 0,!0)):O[f](G,te)}),te)}})(Y,this));else{var Q=this[h].read();if(Q!==null)return Promise.resolve(g(Q,!1));U=new Promise(this[f])}return this[m]=U,U}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var x=this;return new Promise((function(k,U){x[h].destroy(null,(function(Y){Y?U(Y):k(g(void 0,!0))}))}))})),n),S);r.exports=function(x){var k,U=Object.create(A,(i(k={},h,{value:x,writable:!0}),i(k,l,{value:null,writable:!0}),i(k,c,{value:null,writable:!0}),i(k,u,{value:null,writable:!0}),i(k,d,{value:x._readableState.endEmitted,writable:!0}),i(k,f,{value:function(Y,Q){var L=U[h].read();L?(U[m]=null,U[l]=null,U[c]=null,Y(g(L,!1))):(U[l]=Y,U[c]=Q)},writable:!0}),k));return U[m]=null,o(x,(function(Y){if(Y&&Y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Q=U[c];return Q!==null&&(U[m]=null,U[l]=null,U[c]=null,Q(Y)),void(U[u]=Y)}var L=U[l];L!==null&&(U[m]=null,U[l]=null,U[c]=null,L(g(void 0,!0))),U[d]=!0})),x.on("readable",E.bind(null,U)),U}},3791:function(r,e,t){function n(f,h){var g=Object.keys(f);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(f);h&&(p=p.filter((function(E){return Object.getOwnPropertyDescriptor(f,E).enumerable}))),g.push.apply(g,p)}return g}function i(f){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?n(Object(g),!0).forEach((function(p){o(f,p,g[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(g)):n(Object(g)).forEach((function(p){Object.defineProperty(f,p,Object.getOwnPropertyDescriptor(g,p))}))}return f}function o(f,h,g){return(h=c(h))in f?Object.defineProperty(f,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):f[h]=g,f}function l(f,h){for(var g=0;g<h.length;g++){var p=h[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,c(p.key),p)}}function c(f){var h=(function(g){if(typeof g!="object"||g===null)return g;var p=g[Symbol.toPrimitive];if(p!==void 0){var E=p.call(g,"string");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)})(f);return typeof h=="symbol"?h:String(h)}var u=t(44).Buffer,d=t(3779).inspect,m=d&&d.custom||"inspect";r.exports=(function(){function f(){(function(p,E){if(!(p instanceof E))throw new TypeError("Cannot call a class as a function")})(this,f),this.head=null,this.tail=null,this.length=0}var h,g;return h=f,(g=[{key:"push",value:function(p){var E={data:p,next:null};this.length>0?this.tail.next=E:this.head=E,this.tail=E,++this.length}},{key:"unshift",value:function(p){var E={data:p,next:this.head};this.length===0&&(this.tail=E),this.head=E,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var E=this.head,S=""+E.data;E=E.next;)S+=p+E.data;return S}},{key:"concat",value:function(p){if(this.length===0)return u.alloc(0);for(var E,S,A,x=u.allocUnsafe(p>>>0),k=this.head,U=0;k;)E=k.data,S=x,A=U,u.prototype.copy.call(E,S,A),U+=k.data.length,k=k.next;return x}},{key:"consume",value:function(p,E){var S;return p<this.head.data.length?(S=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):S=p===this.head.data.length?this.shift():E?this._getString(p):this._getBuffer(p),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var E=this.head,S=1,A=E.data;for(p-=A.length;E=E.next;){var x=E.data,k=p>x.length?x.length:p;if(k===x.length?A+=x:A+=x.slice(0,p),(p-=k)==0){k===x.length?(++S,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=x.slice(k));break}++S}return this.length-=S,A}},{key:"_getBuffer",value:function(p){var E=u.allocUnsafe(p),S=this.head,A=1;for(S.data.copy(E),p-=S.data.length;S=S.next;){var x=S.data,k=p>x.length?x.length:p;if(x.copy(E,E.length-p,0,k),(p-=k)==0){k===x.length?(++A,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=x.slice(k));break}++A}return this.length-=A,E}},{key:m,value:function(p,E){return d(this,i(i({},E),{},{depth:0,customInspect:!1}))}}])&&l(h.prototype,g),Object.defineProperty(h,"prototype",{writable:!1}),f})()},2410:function(r){function e(i,o){n(i,o),t(i)}function t(i){i._writableState&&!i._writableState.emitClose||i._readableState&&!i._readableState.emitClose||i.emit("close")}function n(i,o){i.emit("error",o)}r.exports={destroy:function(i,o){var l=this,c=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return c||u?(o?o(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,i)):process.nextTick(n,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,(function(d){!o&&d?l._writableState?l._writableState.errorEmitted?process.nextTick(t,l):(l._writableState.errorEmitted=!0,process.nextTick(e,l,d)):process.nextTick(e,l,d):o?(process.nextTick(t,l),o(d)):process.nextTick(t,l)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(i,o){var l=i._readableState,c=i._writableState;l&&l.autoDestroy||c&&c.autoDestroy?i.destroy(o):i.emit("error",o)}}},2896:function(r,e,t){var n=t(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}r.exports=function o(l,c,u){if(typeof c=="function")return o(l,null,c);c||(c={}),u=(function(k){var U=!1;return function(){if(!U){U=!0;for(var Y=arguments.length,Q=new Array(Y),L=0;L<Y;L++)Q[L]=arguments[L];k.apply(this,Q)}}})(u||i);var d=c.readable||c.readable!==!1&&l.readable,m=c.writable||c.writable!==!1&&l.writable,f=function(){l.writable||g()},h=l._writableState&&l._writableState.finished,g=function(){m=!1,h=!0,d||u.call(l)},p=l._readableState&&l._readableState.endEmitted,E=function(){d=!1,p=!0,m||u.call(l)},S=function(k){u.call(l,k)},A=function(){var k;return d&&!p?(l._readableState&&l._readableState.ended||(k=new n),u.call(l,k)):m&&!h?(l._writableState&&l._writableState.ended||(k=new n),u.call(l,k)):void 0},x=function(){l.req.on("finish",g)};return(function(k){return k.setHeader&&typeof k.abort=="function"})(l)?(l.on("complete",g),l.on("abort",A),l.req?x():l.on("request",x)):m&&!l._writableState&&(l.on("end",f),l.on("close",f)),l.on("end",E),l.on("finish",g),c.error!==!1&&l.on("error",S),l.on("close",A),function(){l.removeListener("complete",g),l.removeListener("abort",A),l.removeListener("request",x),l.req&&l.req.removeListener("finish",g),l.removeListener("end",f),l.removeListener("close",f),l.removeListener("finish",g),l.removeListener("end",E),l.removeListener("error",S),l.removeListener("close",A)}}},3411:function(r){r.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(r,e,t){var n,i=t(1602).codes,o=i.ERR_MISSING_ARGS,l=i.ERR_STREAM_DESTROYED;function c(m){if(m)throw m}function u(m){m()}function d(m,f){return m.pipe(f)}r.exports=function(){for(var m=arguments.length,f=new Array(m),h=0;h<m;h++)f[h]=arguments[h];var g,p=(function(S){return S.length?typeof S[S.length-1]!="function"?c:S.pop():c})(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new o("streams");var E=f.map((function(S,A){var x=A<f.length-1;return(function(k,U,Y,Q){Q=(function(G){var te=!1;return function(){te||(te=!0,G.apply(void 0,arguments))}})(Q);var L=!1;k.on("close",(function(){L=!0})),n===void 0&&(n=t(2896)),n(k,{readable:U,writable:Y},(function(G){if(G)return Q(G);L=!0,Q()}));var O=!1;return function(G){if(!L&&!O)return O=!0,(function(te){return te.setHeader&&typeof te.abort=="function"})(k)?k.abort():typeof k.destroy=="function"?k.destroy():void Q(G||new l("pipe"))}})(S,x,A>0,(function(k){g||(g=k),k&&E.forEach(u),x||(E.forEach(u),p(g))}))}));return f.reduce(d)}},1749:function(r,e,t){var n=t(1602).codes.ERR_INVALID_OPT_VALUE;r.exports={getHighWaterMark:function(i,o,l,c){var u=(function(d,m,f){return d.highWaterMark!=null?d.highWaterMark:m?d[f]:null})(o,c,l);if(u!=null){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new n(c?l:"highWaterMark",u);return Math.floor(u)}return i.objectMode?16:16384}}},2611:function(r,e,t){r.exports=t(9826).EventEmitter},748:function(r,e,t){var n=t(4598).Buffer,i=n.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(p){var E;switch(this.encoding=(function(S){var A=(function(x){if(!x)return"utf8";for(var k;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(k)return;x=(""+x).toLowerCase(),k=!0}})(S);if(typeof A!="string"&&(n.isEncoding===i||!i(S)))throw new Error("Unknown encoding: "+S);return A||S})(p),this.encoding){case"utf16le":this.text=u,this.end=d,E=4;break;case"utf8":this.fillLast=c,E=4;break;case"base64":this.text=m,this.end=f,E=3;break;default:return this.write=h,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(E)}function l(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function c(p){var E=this.lastTotal-this.lastNeed,S=(function(A,x){if((192&x[0])!=128)return A.lastNeed=0,"";if(A.lastNeed>1&&x.length>1){if((192&x[1])!=128)return A.lastNeed=1,"";if(A.lastNeed>2&&x.length>2&&(192&x[2])!=128)return A.lastNeed=2,""}})(this,p);return S!==void 0?S:this.lastNeed<=p.length?(p.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,E,0,p.length),void(this.lastNeed-=p.length))}function u(p,E){if((p.length-E)%2==0){var S=p.toString("utf16le",E);if(S){var A=S.charCodeAt(S.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",E,p.length-1)}function d(p){var E=p&&p.length?this.write(p):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,S)}return E}function m(p,E){var S=(p.length-E)%3;return S===0?p.toString("base64",E):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",E,p.length-S))}function f(p){var E=p&&p.length?this.write(p):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function h(p){return p.toString(this.encoding)}function g(p){return p&&p.length?this.write(p):""}e.StringDecoder=o,o.prototype.write=function(p){if(p.length===0)return"";var E,S;if(this.lastNeed){if((E=this.fillLast(p))===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<p.length?E?E+this.text(p,S):this.text(p,S):E||""},o.prototype.end=function(p){var E=p&&p.length?this.write(p):"";return this.lastNeed?E+"":E},o.prototype.text=function(p,E){var S=(function(x,k,U){var Y=k.length-1;if(Y<U)return 0;var Q=l(k[Y]);return Q>=0?(Q>0&&(x.lastNeed=Q-1),Q):--Y<U||Q===-2?0:(Q=l(k[Y]))>=0?(Q>0&&(x.lastNeed=Q-2),Q):--Y<U||Q===-2?0:(Q=l(k[Y]))>=0?(Q>0&&(Q===2?Q=0:x.lastNeed=Q-3),Q):0})(this,p,E);if(!this.lastNeed)return p.toString("utf8",E);this.lastTotal=S;var A=p.length-(S-this.lastNeed);return p.copy(this.lastChar,0,A),p.toString("utf8",E,A)},o.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},4598:function(r,e,t){var n=t(44),i=n.Buffer;function o(c,u){for(var d in c)u[d]=c[d]}function l(c,u,d){return i(c,u,d)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=n:(o(n,e),e.Buffer=l),o(i,l),l.from=function(c,u,d){if(typeof c=="number")throw new TypeError("Argument must not be a number");return i(c,u,d)},l.alloc=function(c,u,d){if(typeof c!="number")throw new TypeError("Argument must be a number");var m=i(c);return u!==void 0?typeof d=="string"?m.fill(u,d):m.fill(u):m.fill(0),m},l.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return i(c)},l.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(c)}},8571:function(r,e,t){var n;(function(i,o){var l="function",c="undefined",u="object",d="string",m="major",f="model",h="name",g="type",p="vendor",E="version",S="architecture",A="console",x="mobile",k="tablet",U="smarttv",Y="wearable",Q="embedded",L="Amazon",O="Apple",G="ASUS",te="BlackBerry",ge="Browser",Me="Chrome",he="Firefox",De="Google",_e="Huawei",ke="LG",Oe="Microsoft",He="Motorola",Pe="Opera",Ge="Samsung",qe="Sharp",Ze="Sony",ct="Xiaomi",mt="Zebra",xe="Facebook",Ie="Chromium OS",Ke="Mac OS",H=function(Qe){for(var dt={},it=0;it<Qe.length;it++)dt[Qe[it].toUpperCase()]=Qe[it];return dt},V=function(Qe,dt){return typeof Qe===d&&C(dt).indexOf(C(Qe))!==-1},C=function(Qe){return Qe.toLowerCase()},F=function(Qe,dt){if(typeof Qe===d)return Qe=Qe.replace(/^\s\s*/,""),typeof dt===c?Qe:Qe.substring(0,500)},oe=function(Qe,dt){for(var it,rt,Ot,pt,kt,wt,fn=0;fn<dt.length&&!kt;){var Tn=dt[fn],Fn=dt[fn+1];for(it=rt=0;it<Tn.length&&!kt&&Tn[it];)if(kt=Tn[it++].exec(Qe))for(Ot=0;Ot<Fn.length;Ot++)wt=kt[++rt],typeof(pt=Fn[Ot])===u&&pt.length>0?pt.length===2?typeof pt[1]==l?this[pt[0]]=pt[1].call(this,wt):this[pt[0]]=pt[1]:pt.length===3?typeof pt[1]!==l||pt[1].exec&&pt[1].test?this[pt[0]]=wt?wt.replace(pt[1],pt[2]):o:this[pt[0]]=wt?pt[1].call(this,wt,pt[2]):o:pt.length===4&&(this[pt[0]]=wt?pt[3].call(this,wt.replace(pt[1],pt[2])):o):this[pt]=wt||o;fn+=2}},Z=function(Qe,dt){for(var it in dt)if(typeof dt[it]===u&&dt[it].length>0){for(var rt=0;rt<dt[it].length;rt++)if(V(dt[it][rt],Qe))return it==="?"?o:it}else if(V(dt[it],Qe))return it==="?"?o:it;return Qe},Be={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Xe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[E,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[E,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,E],[/opios[\/ ]+([\w\.]+)/i],[E,[h,Pe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[E,[h,Pe+" GX"]],[/\bopr\/([\w\.]+)/i],[E,[h,Pe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[E,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,E],[/\bddg\/([\w\.]+)/i],[E,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[E,[h,"UC"+ge]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[E,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[E,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[E,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[E,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[E,[h,"Smart Lenovo "+ge]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+ge],E],[/\bfocus\/([\w\.]+)/i],[E,[h,he+" Focus"]],[/\bopt\/([\w\.]+)/i],[E,[h,Pe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[E,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[E,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[E,[h,Pe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[E,[h,"MIUI "+ge]],[/fxios\/([-\w\.]+)/i],[E,[h,he]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+ge]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+ge],E],[/samsungbrowser\/([\w\.]+)/i],[E,[h,Ge+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],E],[/metasr[\/ ]?([\d\.]+)/i],[E,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],E],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,E],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,xe],E],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,E],[/\bgsa\/([\w\.]+) .*safari\//i],[E,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[E,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[E,[h,Me+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,Me+" WebView"],E],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[E,[h,"Android "+ge]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,E],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[E,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[E,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[E,Z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,E],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],E],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[E,[h,he+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,E],[/(cobalt)\/([\w\.]+)/i],[h,[E,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,C]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,"",C]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,C]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[p,Ge],[g,k]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[p,Ge],[g,x]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[p,O],[g,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[p,O],[g,k]],[/(macintosh);/i],[f,[p,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[p,qe],[g,x]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[p,_e],[g,k]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[p,_e],[g,x]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[p,ct],[g,x]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[p,ct],[g,k]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[p,"OPPO"],[g,x]],[/\b(opd2\d{3}a?) bui/i],[f,[p,"OPPO"],[g,k]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[p,"Vivo"],[g,x]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[p,"Realme"],[g,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[p,He],[g,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[p,He],[g,k]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[p,ke],[g,k]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[p,ke],[g,x]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[p,"Lenovo"],[g,k]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[p,"Nokia"],[g,x]],[/(pixel c)\b/i],[f,[p,De],[g,k]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[p,De],[g,x]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[p,Ze],[g,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[p,Ze],[g,k]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[p,"OnePlus"],[g,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[p,L],[g,k]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[p,L],[g,x]],[/(playbook);[-\w\),; ]+(rim)/i],[f,p,[g,k]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[p,te],[g,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[p,G],[g,k]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[p,G],[g,x]],[/(nexus 9)/i],[f,[p,"HTC"],[g,k]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[f,/_/g," "],[g,x]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[p,"Acer"],[g,k]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[p,"Meizu"],[g,x]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[p,"Ulefone"],[g,x]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,f,[g,x]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,f,[g,k]],[/(surface duo)/i],[f,[p,Oe],[g,k]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[p,"Fairphone"],[g,x]],[/(u304aa)/i],[f,[p,"AT&T"],[g,x]],[/\bsie-(\w*)/i],[f,[p,"Siemens"],[g,x]],[/\b(rct\w+) b/i],[f,[p,"RCA"],[g,k]],[/\b(venue[\d ]{2,7}) b/i],[f,[p,"Dell"],[g,k]],[/\b(q(?:mv|ta)\w+) b/i],[f,[p,"Verizon"],[g,k]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[p,"Barnes & Noble"],[g,k]],[/\b(tm\d{3}\w+) b/i],[f,[p,"NuVision"],[g,k]],[/\b(k88) b/i],[f,[p,"ZTE"],[g,k]],[/\b(nx\d{3}j) b/i],[f,[p,"ZTE"],[g,x]],[/\b(gen\d{3}) b.+49h/i],[f,[p,"Swiss"],[g,x]],[/\b(zur\d{3}) b/i],[f,[p,"Swiss"],[g,k]],[/\b((zeki)?tb.*\b) b/i],[f,[p,"Zeki"],[g,k]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],f,[g,k]],[/\b(ns-?\w{0,9}) b/i],[f,[p,"Insignia"],[g,k]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[p,"NextBook"],[g,k]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],f,[g,x]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],f,[g,x]],[/\b(ph-1) /i],[f,[p,"Essential"],[g,x]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[p,"Envizen"],[g,k]],[/\b(trio[-\w\. ]+) b/i],[f,[p,"MachSpeed"],[g,k]],[/\btu_(1491) b/i],[f,[p,"Rotor"],[g,k]],[/(shield[\w ]+) b/i],[f,[p,"Nvidia"],[g,k]],[/(sprint) (\w+)/i],[p,f,[g,x]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[p,Oe],[g,x]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[p,mt],[g,k]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[p,mt],[g,x]],[/smart-tv.+(samsung)/i],[p,[g,U]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[p,Ge],[g,U]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,ke],[g,U]],[/(apple) ?tv/i],[p,[f,O+" TV"],[g,U]],[/crkey/i],[[f,Me+"cast"],[p,De],[g,U]],[/droid.+aft(\w+)( bui|\))/i],[f,[p,L],[g,U]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[p,qe],[g,U]],[/(bravia[\w ]+)( bui|\))/i],[f,[p,Ze],[g,U]],[/(mitv-\w{5}) bui/i],[f,[p,ct],[g,U]],[/Hbbtv.*(technisat) (.*);/i],[p,f,[g,U]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,F],[f,F],[g,U]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,U]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,f,[g,A]],[/droid.+; (shield) bui/i],[f,[p,"Nvidia"],[g,A]],[/(playstation [345portablevi]+)/i],[f,[p,Ze],[g,A]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[p,Oe],[g,A]],[/((pebble))app/i],[p,f,[g,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[p,O],[g,Y]],[/droid.+; (glass) \d/i],[f,[p,De],[g,Y]],[/droid.+; (wt63?0{2,3})\)/i],[f,[p,mt],[g,Y]],[/(quest( \d| pro)?)/i],[f,[p,xe],[g,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[g,Q]],[/(aeobc)\b/i],[f,[p,L],[g,Q]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[g,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[g,k]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,k]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,x]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[E,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,E],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[E,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,E],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[E,Z,Be]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[E,Z,Be],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[E,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,Ke],[E,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[E,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,E],[/\(bb(10);/i],[E,[h,te]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[E,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[E,[h,he+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[E,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[E,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[E,[h,Me+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,Ie],E],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,E],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],E],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,E]]},$e=function(Qe,dt){if(typeof Qe===u&&(dt=Qe,Qe=o),!(this instanceof $e))return new $e(Qe,dt).getResult();var it=typeof i!==c&&i.navigator?i.navigator:o,rt=Qe||(it&&it.userAgent?it.userAgent:""),Ot=it&&it.userAgentData?it.userAgentData:o,pt=dt?(function(wt,fn){var Tn={};for(var Fn in wt)fn[Fn]&&fn[Fn].length%2==0?Tn[Fn]=fn[Fn].concat(wt[Fn]):Tn[Fn]=wt[Fn];return Tn})(Xe,dt):Xe,kt=it&&it.userAgent==rt;return this.getBrowser=function(){var wt,fn={};return fn[h]=o,fn[E]=o,oe.call(fn,rt,pt.browser),fn[m]=typeof(wt=fn[E])===d?wt.replace(/[^\d\.]/g,"").split(".")[0]:o,kt&&it&&it.brave&&typeof it.brave.isBrave==l&&(fn[h]="Brave"),fn},this.getCPU=function(){var wt={};return wt[S]=o,oe.call(wt,rt,pt.cpu),wt},this.getDevice=function(){var wt={};return wt[p]=o,wt[f]=o,wt[g]=o,oe.call(wt,rt,pt.device),kt&&!wt[g]&&Ot&&Ot.mobile&&(wt[g]=x),kt&&wt[f]=="Macintosh"&&it&&typeof it.standalone!==c&&it.maxTouchPoints&&it.maxTouchPoints>2&&(wt[f]="iPad",wt[g]=k),wt},this.getEngine=function(){var wt={};return wt[h]=o,wt[E]=o,oe.call(wt,rt,pt.engine),wt},this.getOS=function(){var wt={};return wt[h]=o,wt[E]=o,oe.call(wt,rt,pt.os),kt&&!wt[h]&&Ot&&Ot.platform&&Ot.platform!="Unknown"&&(wt[h]=Ot.platform.replace(/chrome os/i,Ie).replace(/macos/i,Ke)),wt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return rt},this.setUA=function(wt){return rt=typeof wt===d&&wt.length>500?F(wt,500):wt,this},this.setUA(rt),this};$e.VERSION="1.0.38",$e.BROWSER=H([h,E,m]),$e.CPU=H([S]),$e.DEVICE=H([f,p,g,A,x,U,k,Y,Q]),$e.ENGINE=$e.OS=H([h,E]),typeof e!==c?(r.exports&&(e=r.exports=$e),e.UAParser=$e):t.amdO?(n=(function(){return $e}).call(e,t,e,r))===o||(r.exports=n):typeof i!==c&&(i.UAParser=$e);var Ve=typeof i!==c&&(i.jQuery||i.Zepto);if(Ve&&!Ve.ua){var je=new $e;Ve.ua=je.getResult(),Ve.ua.get=function(){return je.getUA()},Ve.ua.set=function(Qe){je.setUA(Qe);var dt=je.getResult();for(var it in dt)Ve.ua[it]=dt[it]}}})(typeof window=="object"?window:this)},9e3:function(r,e,t){function n(i){try{if(!t.g.localStorage)return!1}catch{return!1}var o=t.g.localStorage[i];return o!=null&&String(o).toLowerCase()==="true"}r.exports=function(i,o){if(n("noDeprecation"))return i;var l=!1;return function(){if(!l){if(n("throwDeprecation"))throw new Error(o);n("traceDeprecation")?console.trace(o):console.warn(o),l=!0}return i.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(r,e,t){t.r(e),t.d(e,{Debug:function(){return o.default},FactoryMaker:function(){return i.default},MediaPlayer:function(){return n.default}});var n=t(8200),i=t(138),o=t(649),l=t(8986),c=typeof window<"u"&&window||global,u=c.dashjs;u||(u=c.dashjs={}),u.MediaPlayer=n.default,u.FactoryMaker=i.default,u.Debug=o.default,u.Version=(0,l.getVersionString)(),e.default=u},649:function(r,e,t){t.r(e);var n=t(8850),i=t(3621),o=t(138);function l(u){u=u||{};const d=this.context,m=(0,n.default)(d).getInstance(),f=u.settings,h=[];let g,p,E,S;function A(O){return O&&O.bind?O.bind(window.console):window.console.log.bind(window.console)}function x(...O){L(1,this,...O)}function k(...O){L(2,this,...O)}function U(...O){L(3,this,...O)}function Y(...O){L(4,this,...O)}function Q(...O){L(5,this,...O)}function L(O,G,...te){let ge="",Me=null;p&&(Me=new Date().getTime(),ge+="["+(Me-S)+"]"),E&&G&&G.getClassName&&(ge+="["+G.getClassName()+"]",G.getType&&(ge+="["+G.getType()+"]")),ge.length>0&&(ge+=" "),Array.apply(null,te).forEach((function(he){ge+=he+" "})),h[O]&&f&&f.get().debug.logLevel>=O&&h[O](ge),f&&f.get().debug.dispatchEvent&&m.trigger(i.default.LOG,{message:ge,level:O})}return g={getLogger:function(O){return{fatal:x.bind(O),error:k.bind(O),warn:U.bind(O),info:Y.bind(O),debug:Q.bind(O)}},setLogTimestampVisible:function(O){p=O},setCalleeNameVisible:function(O){E=O}},p=!0,E=!0,S=new Date().getTime(),typeof window<"u"&&window.console&&(h[1]=A(window.console.error),h[2]=A(window.console.error),h[3]=A(window.console.warn),h[4]=A(window.console.info),h[5]=A(window.console.debug)),g}l.__dashjs_factory_name="Debug";const c=o.default.getSingletonFactory(l);c.LOG_LEVEL_NONE=0,c.LOG_LEVEL_FATAL=1,c.LOG_LEVEL_ERROR=2,c.LOG_LEVEL_WARNING=3,c.LOG_LEVEL_INFO=4,c.LOG_LEVEL_DEBUG=5,o.default.updateSingletonFactory(l.__dashjs_factory_name,c),e.default=c},8850:function(r,e,t){t.r(e);var n=t(138),i=t(1191);function o(){let c={};function u(f,h,g,p={},E=!1){if(!f)throw new Error("event type cannot be null or undefined");if(!h||typeof h!="function")throw new Error("listener must be a function: "+h);let S=p.priority||0;if(m(f,h,g)>=0)return;c[f]=c[f]||[];const A={callback:h,scope:g,priority:S,executeOnlyOnce:E};g&&g.getStreamId&&(A.streamId=g.getStreamId()),g&&g.getType&&(A.mediaType=g.getType()),p&&p.mode&&(A.mode=p.mode),c[f].some(((x,k)=>{if(x&&S>x.priority)return c[f].splice(k,0,A),!0}))||c[f].push(A)}function d(f,h,g){if(!f||!h||!c[f])return;const p=m(f,h,g);p<0||(c[f][p]=null)}function m(f,h,g){let p=-1;return c[f]&&c[f].some(((E,S)=>{if(E&&E.callback===h&&(!g||g===E.scope))return p=S,!0})),p}return{on:function(f,h,g,p={}){u(f,h,g,p)},once:function(f,h,g,p={}){u(f,h,g,p,!0)},off:d,trigger:function(f,h={},g={}){if(!f||!c[f])return;if((h=h||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");h.type=f,g.streamId&&(h.streamId=g.streamId),g.mediaType&&(h.mediaType=g.mediaType);const p=[];c[f].filter((E=>!(!E||g.streamId&&E.streamId&&E.streamId!==g.streamId||g.mediaType&&E.mediaType&&E.mediaType!==g.mediaType||g.mode&&E.mode&&E.mode!==g.mode||!E.mode&&g.mode&&g.mode===i.default.EVENT_MODE_ON_RECEIVE))).forEach((E=>{E&&E.callback.call(E.scope,h),E.executeOnlyOnce&&p.push(E)})),p.forEach((E=>{d(f,E.callback,E.scope)}))},reset:function(){c={}}}}o.__dashjs_factory_name="EventBus";const l=n.default.getSingletonFactory(o);l.EVENT_PRIORITY_LOW=0,l.EVENT_PRIORITY_HIGH=5e3,n.default.updateSingletonFactory(o.__dashjs_factory_name,l),e.default=l},138:function(r,e,t){t.r(e);const n=(function(){let i,o=[];const l={},c={};function u(h,g){for(const p in o){const E=o[p];if(E.context===h&&E.name===g)return E.instance}return null}function d(h,g){return g[h]}function m(h,g,p){h in p&&(p[h]=g)}function f(h,g,p){let E;const S=h.__dashjs_factory_name,A=g[S];if(A){let x=A.instance;if(!A.override)return x.apply({context:g,factory:i},p);E=h.apply({context:g},p),x=x.apply({context:g,factory:i,parent:E},p);for(const k in x)E.hasOwnProperty(k)&&(E[k]=x[k])}else E=h.apply({context:g},p);return E.getClassName=function(){return S},E}return i={deleteSingletonInstances:function(h){o=o.filter((g=>g.context!==h))},extend:function(h,g,p,E){!E[h]&&g&&(E[h]={instance:g,override:p})},getClassFactory:function(h){let g=d(h.__dashjs_factory_name,c);return g||(g=function(p){return p===void 0&&(p={}),{create:function(){return f(h,p,arguments)}}},c[h.__dashjs_factory_name]=g),g},getClassFactoryByName:function(h){return d(h,c)},getSingletonFactory:function(h){let g=d(h.__dashjs_factory_name,l);return g||(g=function(p){let E;return p===void 0&&(p={}),{getInstance:function(){return E||(E=u(p,h.__dashjs_factory_name)),E||(E=f(h,p,arguments),o.push({name:h.__dashjs_factory_name,context:p,instance:E})),E}}},l[h.__dashjs_factory_name]=g),g},getSingletonFactoryByName:function(h){return d(h,l)},getSingletonInstance:u,setSingletonInstance:function(h,g,p){for(const E in o){const S=o[E];if(S.context===h&&S.name===g)return void(o[E].instance=p)}o.push({name:g,context:h,instance:p})},updateClassFactory:function(h,g){m(h,g,c)},updateSingletonFactory:function(h,g){m(h,g,l)}},i})();e.default=n},8261:function(r,e,t){t.r(e);var n=t(138),i=t(7263),o=t(649),l=t(5212),c=t(7568),u=t(8850),d=t(3621),m=t(4246);function f(){let g;const p=this.context,E=(0,u.default)(p).getInstance(),S={"streaming.delay.liveDelay":d.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":d.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":d.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":d.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":d.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":d.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":d.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":d.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":d.default.SETTING_UPDATED_MIN_BITRATE},A={debug:{logLevel:o.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:l.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:l.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:l.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:l.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:l.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:l.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},{schemeIdUri:l.default.SEGMENT_SEQUENCE_REPRESENTATION_SCHEME_ID_URI},...l.default.THUMBNAILS_SCHEME_ID_URIS.map((U=>({schemeIdUri:U})))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1,filterAudioChannelConfiguration:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataTimeout:1e4},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,keepProtectionMediaKeysMaximumOpenSessions:-1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,lowLatencyStallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1,seekOffset:0},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"},artificialTimeOffsetToApply:0},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:l.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:l.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:l.default.TRACK_SWITCH_MODE_NEVER_REPLACE},includePreselectionsInMediainfoArray:!0,includePreselectionsForInitialTrackSelection:!1,ignoreSelectionPriority:!1,prioritizeRoleMain:!0,assumeDefaultRoleAsMain:!0,selectionModeForInitialTrack:l.default.TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[c.HTTPRequest.MPD_TYPE]:500,[c.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[c.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[c.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[c.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[c.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[c.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[c.HTTPRequest.LICENSE]:1e3,[c.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[c.HTTPRequest.MPD_TYPE]:3,[c.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[c.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[c.HTTPRequest.INIT_SEGMENT_TYPE]:3,[c.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[c.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[c.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[c.HTTPRequest.LICENSE]:3,[c.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0,priority:m.default.PRIORITY.DEFAULT},bolaRule:{active:!0,priority:m.default.PRIORITY.DEFAULT},insufficientBufferRule:{active:!0,priority:m.default.PRIORITY.DEFAULT,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,priority:m.default.PRIORITY.DEFAULT,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,priority:m.default.PRIORITY.DEFAULT,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,priority:m.default.PRIORITY.DEFAULT,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1,priority:m.default.PRIORITY.DEFAULT},loLPRule:{active:!1,priority:m.default.PRIORITY.DEFAULT}},throughput:{averageCalculationMode:l.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:l.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:l.default.CMCD_MODE_QUERY,enabledKeys:l.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},enhancement:{enabled:!1,codecs:["lvc1"]},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let x=i.default.clone(A);function k(U,Y,Q){for(let L in U)U.hasOwnProperty(L)&&(Y.hasOwnProperty(L)?typeof U[L]!="object"||U[L]instanceof RegExp||U[L]instanceof Array||U[L]===null?(Y[L]=i.default.clone(U[L]),S[Q+L]&&E.trigger(S[Q+L])):k(U[L],Y[L],Q.slice()+L+"."):console.error("Settings parameter "+Q+L+" is not supported"))}return g={get:function(){return x},update:function(U){typeof U=="object"&&k(U,x,"")},reset:function(){x=i.default.clone(A)}},g}f.__dashjs_factory_name="Settings";let h=n.default.getSingletonFactory(f);e.default=h},7263:function(r,e,t){t.r(e);var n=t(3282),i=t(8571),o=t(5212);class l{static mixin(u,d,m){let f,h={};if(u)for(let g in d)d.hasOwnProperty(g)&&(f=d[g],g in u&&(u[g]===f||g in h&&h[g]===f)||(typeof u[g]=="object"&&u[g]!==null?u[g]=l.mixin(u[g],f,m):u[g]=m(f)));return u}static clone(u){if(!u||typeof u!="object")return u;if(u instanceof RegExp)return new RegExp(u);let d;if(u instanceof Array){d=[];for(let m=0,f=u.length;m<f;++m)m in u&&d.push(l.clone(u[m]))}else d={};return l.mixin(d,u,l.clone)}static addAdditionalQueryParameterToUrl(u,d){try{if(!d||d.length===0)return u;let m=u;return d.forEach((({key:f,value:h})=>{const g=m.includes("?")?"&":"?";m+=`${g}${encodeURIComponent(f)}=${encodeURIComponent(h)}`})),m}catch{return u}}static removeQueryParameterFromUrl(u,d){if(!u||!d)return u;const m=new URL(u),f=new URLSearchParams(m.search);if(!f||f.size===0||!f.has(d))return u;f.delete(d);const h=Array.from(f.entries()).map((([p,E])=>`${p}=${E}`)).join("&"),g=`${m.origin}${m.pathname}`;return h?`${g}?${h}`:g}static parseHttpHeaders(u){let d={};if(!u)return d;let m=u.trim().split(`\r
`);for(let f=0,h=m.length;f<h;f++){let g=m[f],p=g.indexOf(": ");p>0&&(d[g.substring(0,p)]=g.substring(p+2))}return d}static parseQueryParams(u){const d=[],m=new URLSearchParams(u);for(const[f,h]of m.entries())d.push({key:decodeURIComponent(f),value:decodeURIComponent(h)});return d}static generateUuid(){let u=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(d){const m=(u+16*Math.random())%16|0;return u=Math.floor(u/16),(d=="x"?m:3&m|8).toString(16)}))}static generateHashCode(u){let d=0;if(u.length===0)return d;for(let m=0;m<u.length;m++)d=(d<<5)-d+u.charCodeAt(m),d|=0;return d}static getRelativeUrl(u,d){try{const m=new URL(u),f=new URL(d);if(m.protocol=f.protocol,m.origin!==f.origin)return d;let h=n.relative(m.pathname.substr(0,m.pathname.lastIndexOf("/")),f.pathname.substr(0,f.pathname.lastIndexOf("/")));const g=h.length===0?1:0;return h+=f.pathname.substr(f.pathname.lastIndexOf("/")+g,f.pathname.length-1),f.pathname.length<h.length?f.pathname:h}catch{return d}}static getHostFromUrl(u){try{return new URL(u).host}catch{return null}}static parseUserAgent(u=null){try{const d=u===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,i.UAParser)(d)}catch{return{}}}static stringHasProtocol(u){return/(http(s?)):\/\//i.test(u)}static bufferSourceToDataView(u){return l.toDataView(u,DataView)}static bufferSourceToInt8(u){return l.toDataView(u,Uint8Array)}static uint8ArrayToString(u){return new TextDecoder("utf-8").decode(u)}static bufferSourceToHex(u){const d=l.bufferSourceToInt8(u);let m="";for(let f of d)f=f.toString(16),f.length===1&&(f="0"+f),m+=f;return m}static toDataView(u,d){const m=l.getArrayBuffer(u);let f=1;"BYTES_PER_ELEMENT"in DataView&&(f=DataView.BYTES_PER_ELEMENT);const h=((u.byteOffset||0)+u.byteLength)/f,g=(u.byteOffset||0)/f,p=Math.floor(Math.max(0,Math.min(g,h)));return new d(m,p,Math.floor(Math.min(p+Math.max(1/0,0),h))-p)}static getArrayBuffer(u){return u instanceof ArrayBuffer?u:u.buffer}static getCodecFamily(u){const{base:d,profile:m}=l._getCodecParts(u);switch(d){case"mp4a":switch(m){case"69":case"6b":case"40.34":return o.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return o.default.CODEC_FAMILIES.AAC;case"a5":return o.default.CODEC_FAMILIES.AC3;case"e6":return o.default.CODEC_FAMILIES.EC3;case"b2":return o.default.CODEC_FAMILIES.DTSX;case"a9":return o.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return o.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return o.default.CODEC_FAMILIES.HEVC;default:return d}return d}static _getCodecParts(u){const[d,...m]=u.split(".");return{base:d,profile:m.join(".")}}}e.default=l},8986:function(r,e,t){t.r(e),t.d(e,{getVersionString:function(){return i}});const n="5.1.1";function i(){return n}},8748:function(r,e,t){t.r(e),e.default=class{extend(n,i){if(!n)return;let o=!!i&&i.override,l=!!i&&i.publicOnly;for(const c in n)!n.hasOwnProperty(c)||this[c]&&!o||l&&n[c].indexOf("public_")===-1||(this[c]=n[c])}}},5734:function(r,e,t){t.r(e);var n=t(7252);class i extends n.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LOADING_ABANDONED="loadingAborted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.SEEK_TARGET="seekTarget",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.VIDEO_ELEMENT_RESIZED="videoElementResized",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}}e.default=i},3621:function(r,e,t){t.r(e);var n=t(5734);class i extends n.default{}let o=new i;e.default=o},7252:function(r,e,t){t.r(e),e.default=class{extend(n,i){if(!n)return;let o=!!i&&i.override,l=!!i&&i.publicOnly;for(const c in n)!n.hasOwnProperty(c)||this[c]&&!o||l&&n[c].indexOf("public_")===-1||(this[c]=n[c])}}},8854:function(r,e,t){t.r(e),e.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",END_NUMBER:"endNumber",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORDER:"order",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESELECTION:"Preselection",PRESELECTION_COMPONENTS:"preselectionComponents",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_SEQUENCE_PROPERTIES:"SegmentSequenceProperties",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TAG:"tag",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(r,e,t){t.r(e),e.default=class{constructor(){this.schemeIdUri="",this.value=""}}},8200:function(r,e,t){t.r(e),t.d(e,{default:function(){return qx}});var n=t(138),i=t(4246),o={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},l=t(649),c=t(8261);function u(b){b=b||{};const y=this.context,v=b.dashMetrics;let w,_,I;return w={getSwitchRequest:function(M){try{const D=(0,i.default)(y).create();D.rule=this.getClassName();const N=M.getMediaInfo(),$=M.getMediaType(),q=v.getCurrentBufferState($),R=M.getScheduleController(),P=M.getAbrController(),z=M.getStreamInfo(),X=z?z.id:null,re=z&&z.manifestInfo?z.manifestInfo.isDynamic:null,ie=M.getThroughputController(),J=ie.getSafeAverageThroughput($),ce=ie.getAverageLatency($);return isNaN(J)||!q||P.getAbandonmentStateFor(X,$)===o.ALLOW_LOAD&&(q.state===o.BUFFER_LOADED||re)&&(D.representation=P.getOptimalRepresentationForBitrate(N,J,!0),D.priority=_.get().streaming.abr.rules.throughputRule.priority,D.reason={throughput:J,latency:ce,message:`[ThroughputRule]: Switching to Representation with bitrate ${D.representation?D.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${J}`},R.setTimeToLoadDelay(0)),D}catch(D){return I.error(D),(0,i.default)(y).create()}},reset:function(){}},I=(0,l.default)(y).getInstance().getLogger(w),_=(0,c.default)(y).getInstance(),w}u.__dashjs_factory_name="ThroughputRule";var d=n.default.getClassFactory(u),m=t(8850),f=t(3621),h=t(5212),g=t(1191);function p(b){b=b||{};const y=this.context,v=(0,m.default)(y).getInstance(),w=b.dashMetrics,_=(0,c.default)(y).getInstance();let I,M,D;function N(){const R=_.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;D={},D[h.default.VIDEO]={ignoreCount:R},D[h.default.AUDIO]={ignoreCount:R},D[h.default.ENHANCEMENT]={ignoreCount:R}}function $(){N()}function q(R){isNaN(R.startTime)||R.mediaType!==h.default.AUDIO&&R.mediaType!==h.default.VIDEO||D[R.mediaType].ignoreCount>0&&D[R.mediaType].ignoreCount--}return I={getSwitchRequest:function(R){const P=(0,i.default)(y).create();if(P.rule=this.getClassName(),!R||!R.hasOwnProperty("getMediaType"))return P;const z=R.getMediaType(),X=w.getCurrentBufferState(z),re=R.getRepresentation().fragmentDuration;if(!(function(ce,fe,me){return!ce.getLowLatencyModeEnabled()&&D[fe].ignoreCount<=0&&me})(R.getScheduleController().getPlaybackController(),z,re))return P;const ie=R.getMediaInfo(),J=R.getAbrController();if(X&&X.state===o.BUFFER_EMPTY)M.debug("["+z+"] Switch to index 0; buffer is empty."),P.representation=J.getOptimalRepresentationForBitrate(ie,0,!0),P.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const ce=R.getThroughputController(),fe=w.getCurrentBufferLevel(z),me=ce.getAverageThroughput(z,null,NaN)*_.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*fe/re;if(isNaN(me)||me<=0)return P;P.representation=J.getOptimalRepresentationForBitrate(ie,me,!0),P.priority=_.get().streaming.abr.rules.insufficientBufferRule.priority,P.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:me}}return P},reset:function(){N(),v.off(g.default.PLAYBACK_SEEKING,$,I),v.off(f.default.BYTES_APPENDED_END_FRAGMENT,q,I)}},M=(0,l.default)(y).getInstance().getLogger(I),N(),v.on(g.default.PLAYBACK_SEEKING,$,I),v.on(f.default.BYTES_APPENDED_END_FRAGMENT,q,I),I}p.__dashjs_factory_name="InsufficientBufferRule";var E=n.default.getClassFactory(p);function S(b){const y=(b=b||{}).mediaPlayerModel,v=b.dashMetrics,w=this.context,_=(0,c.default)(w).getInstance();let I,M,D;function N(){D={}}return I={shouldAbandon:function($){const q=(0,i.default)(w).create();q.rule=this.getClassName();try{if(!$)return q;const R=$.getCurrentRequest();if(!isNaN(R.index)){if(R.firstByteDate===null||D.hasOwnProperty(R.index))return q;const P=y.getBufferTimeDefault(),z=$.getMediaType();if(v.getCurrentBufferLevel(z)>P)return q;const X=Date.now()-R.firstByteDate.getTime();if(R.traces.length>=_.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&X>_.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&R.bytesLoaded<R.bytesTotal)return(function(re,ie,J){const ce=re.getMediaInfo(),fe=re.getMediaType(),me=ie.traces.reduce(((Se,se)=>Se+se.b[0]),0)-ie.traces[0].b[0],Ee=Math.max(ie.traces.reduce(((Se,se)=>Se+se.d),0)-ie.traces[0].d,1),ne=Math.round(8*me/Ee),K=Number(8*ie.bytesTotal/ne/1e3).toFixed(2),B=re.getRepresentation(),j=re.getAbrController();if(K<ie.duration*_.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||j.isPlayingAtLowestQuality(B))return J;if(!D.hasOwnProperty(ie.index)){const Se=re.getAbrController(),se=ie.bytesTotal-ie.bytesLoaded,Ae=Se.getOptimalRepresentationForBitrate(ce,ne,!0),Te=ie.representation;se>ie.bytesTotal*Ae.bitrateInKbit/Te.bitrateInKbit&&(J.representation=Ae,J.priority=_.get().streaming.abr.rules.abandonRequestsRule.priority,J.reason={throughputInKbit:ne,message:`[AbandonRequestRule][${fe} is asking to abandon and switch to quality to ${Ae.absoluteIndex}. The measured bandwidth was ${ne} kbit/s`},D[ie.index]=!0)}return J})($,R,q)}return q}catch(R){return M.error(R),q}},reset:N},M=(0,l.default)(w).getInstance().getLogger(I),N(),I}S.__dashjs_factory_name="AbandonRequestsRule";var A=n.default.getClassFactory(S);function x(){const b=this.context,y=(0,c.default)(b).getInstance();let v;return v={getSwitchRequest:function(w){const _=(0,i.default)(b).create();if(_.rule=this.getClassName(),!w||!w.hasOwnProperty("getDroppedFramesHistory"))return _;const I=w.getDroppedFramesHistory();if(!I)return _;const M=w.getStreamInfo().id,D=w.getMediaInfo(),N=w.getAbrController(),$=I.getFrameHistory(M);if(!$||Object.keys($).length===0)return _;let q=0,R=0;const P=N.getPossibleVoRepresentationsFilteredBySettings(D,!0);let z=null;for(let X=1;X<P.length;X++){const re=P[X];if(re&&$[re.id]&&(q=$[re.id].droppedVideoFrames,R=$[re.id].totalVideoFrames,R>y.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&q/R>y.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){z=P[X-1];break}}return z&&(_.representation=z,_.priority=y.get().streaming.abr.rules.droppedFramesRule.priority,_.reason={droppedFrames:q,message:`[DroppedFramesRule]: Switching to index ${z.absoluteIndex}. Dropped Frames: ${q}, Total Frames: ${R}`}),_}},v}x.__dashjs_factory_name="DroppedFramesRule";var k=n.default.getClassFactory(x);function U(){const b=this.context,y=(0,c.default)(b).getInstance();let v;return v={getSwitchRequest:function(w){const _=(0,i.default)(b).create();if(_.rule=this.getClassName(),!w)return _;const I=w.getStreamInfo().id,M=w.getMediaType(),D=w?w.getSwitchRequestHistory():null,N=D?D.getSwitchRequests(I,M):{},$=w.getAbrController(),q=w.getMediaInfo(),R=$.getPossibleVoRepresentationsFilteredBySettings(q,!0);let P=0,z=0;for(let X=0;X<R.length;X++){const re=R[X];if(re&&N[re.id]&&(P+=N[re.id].drops,z+=N[re.id].noDrops,P+z>=y.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&P/z>y.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){_.representation=X>0&&N[re.id].drops>0?R[X-1]:re,_.priority=y.get().streaming.abr.rules.switchHistoryRule.priority,_.reason={drops:P,noDrops:z,message:`[SwitchHistoryRule]: Switch to index: ${_.representation.absoluteIndex} samples: ${P+z} drops:  ${P}`};break}}return _}},v}U.__dashjs_factory_name="SwitchHistoryRule";var Y=n.default.getClassFactory(U),Q=t(7568);const L="BOLA_STATE_ONE_BITRATE",O="BOLA_STATE_STARTUP",G="BOLA_STATE_STEADY",te=10;function ge(b){b=b||{};const y=this.context,v=b.dashMetrics,w=b.mediaPlayerModel,_=(0,m.default)(y).getInstance(),I=pn(y).getInstance();let M,D,N,$;function q(j){const Se=j.mediaType,se=j.streamId,Ae=Se===h.default.AUDIO?[h.default.AUDIO]:$[se];for(const Te in Ae)$[se]&&$[se].hasOwnProperty(Te)&&$[se][Te].state===G&&($[se][Te].placeholderBuffer=0)}function R(j){const Se=j.streamId;for(const se in $[Se])if($[Se].hasOwnProperty(se)){const Ae=$[Se][se];Ae.state!==L&&(Ae.state=O,P(Ae))}}function P(j){j.placeholderBuffer=0,j.mostAdvancedSegmentStart=NaN,j.lastSegmentWasReplacement=!1,j.lastSegmentStart=NaN,j.lastSegmentDurationS=NaN,j.lastSegmentRequestTimeMs=NaN,j.lastSegmentFinishTimeMs=NaN}function z(j){try{if(j&&j.metric===o.HTTP_REQUEST&&j.value&&j.value.type===Q.HTTPRequest.MEDIA_SEGMENT_TYPE&&j.value.trace&&j.value.trace.length){const Se=$[j.value._streamId]&&$[j.value._streamId][j.mediaType]?$[j.value._streamId][j.mediaType]:null;Se&&Se.state!==L&&(Se.lastSegmentRequestTimeMs=j.value.trequest.getTime(),Se.lastSegmentFinishTimeMs=j.value._tfinish.getTime(),X(Se,j.mediaType))}}catch(Se){D.error(Se)}}function X(j,Se){if(!isNaN(j.lastSegmentStart)&&!isNaN(j.lastSegmentRequestTimeMs)&&!isNaN(j.placeholderBuffer)){if(j.placeholderBuffer*=.99,!isNaN(j.lastSegmentFinishTimeMs)){const se=v.getCurrentBufferLevel(Se)+.001*(j.lastSegmentFinishTimeMs-j.lastSegmentRequestTimeMs),Ae=ce(j,j.currentRepresentation),Te=Math.max(0,Ae-se);j.placeholderBuffer=Math.min(Te,j.placeholderBuffer)}j.lastSegmentWasReplacement&&!isNaN(j.lastSegmentDurationS)&&(j.placeholderBuffer+=j.lastSegmentDurationS),j.lastSegmentStart=NaN,j.lastSegmentRequestTimeMs=NaN}}function re(j){if(j&&$[j.streamId]&&$[j.streamId][j.mediaType]){const Se=$[j.streamId][j.mediaType];Se&&Se.state!==L&&(Se.currentRepresentation=j.newRepresentation)}}function ie(j,Se,se){const Ae=se.reduce(((Ue,Ne,ee)=>Ne>se[Ue]?ee:Ue),0);if(Ae===0)return null;const Te=Math.max(j,te+2*Se.length),Re=(se[Ae]-1)/(Te/te-1);return{gp:Re,Vp:te/Re}}function J(j,Se){const se=w.getBufferTimeDefault();if(j.bufferTimeDefault!==se){const Ae=ie(se,j.representations,j.utilities);if(Ae.Vp!==j.Vp||Ae.gp!==j.gp){const Te=v.getCurrentBufferLevel(Se);let Re=Te+j.placeholderBuffer;Re-=te,Re*=Ae.Vp/j.Vp,Re+=te,j.bufferTimeDefault=se,j.Vp=Ae.Vp,j.gp=Ae.gp,j.placeholderBuffer=Math.max(0,Re-Te)}}}function ce(j,Se){return j.Vp*(j.utilities[Se.absoluteIndex]+j.gp)}function fe(j){if(j&&j.chunk&&j.chunk.representation.mediaInfo&&$[j.streamId]){const Se=$[j.streamId][j.chunk.representation.mediaInfo.type];if(Se&&Se.state!==L){const se=j.chunk.start;isNaN(Se.mostAdvancedSegmentStart)||se>Se.mostAdvancedSegmentStart?(Se.mostAdvancedSegmentStart=se,Se.lastSegmentWasReplacement=!1):Se.lastSegmentWasReplacement=!0,Se.lastSegmentStart=se,Se.lastSegmentDurationS=j.chunk.duration,Se.currentRepresentation=j.chunk.representation,X(Se,j.chunk.representation.mediaInfo.type)}}}function me(){B()}function Ee(){N.get().streaming.abr.limitBitrateByPortal&&B()}function ne(j,Se){const se=Se.absoluteIndex,Ae=Se.bandwidth,Te=j.utilities[se];let Re=0;for(let Ue=se-1;Ue>=0;--Ue)if(j.utilities[Ue]<j.utilities[se]){const Ne=j.representations[Ue].bandwidth,ee=j.utilities[Ue],ae=j.Vp*(j.gp+(Ae*ee-Ne*Te)/(Ae-Ne));Re=Math.max(Re,ae)}return Re}function K(j){if(j&&$[j.streamId]){const Se=$[j.streamId][j.mediaType];if(Se&&Se.state!==L){const se=v.getCurrentBufferLevel(j.mediaType);let Ae;Ae=Se.currentRepresentation.absoluteIndex>0?ne(Se,Se.currentRepresentation):te;const Te=Math.max(0,Ae-se);Se.placeholderBuffer=Math.min(Se.placeholderBuffer,Te)}}}function B(){$={}}return M={getSwitchRequest:function(j){try{const Se=(0,i.default)(y).create();j.getScheduleController().setTimeToLoadDelay(0),Se.rule=this.getClassName(),Se.reason=Se.reason||{};const se=(function(Ae){const Te=Ae.getMediaType(),Re=Ae.getStreamInfo().id;$[Re]||($={},$[Re]={});let Ue=$[Re][Te];return Ue?Ue.state!==L&&J(Ue,Te):(Ue=(function(Ne){const ee={},ae=Ne.getMediaInfo(),de=I.getPossibleVoRepresentationsFilteredBySettings(ae,!0);let le=de.map((W=>W.bandwidth)).map((W=>Math.log(W)));le=le.map((W=>W-le[0]+1));const ue=w.getBufferTimeDefault(),pe=ie(ue,de,le);return pe?(ee.state=O,ee.representations=de,ee.utilities=le,ee.bufferTimeDefault=ue,ee.Vp=pe.Vp,ee.gp=pe.gp,ee.currentRepresentation=null,P(ee)):ee.state=L,ee})(Ae),$[Re][Te]=Ue),Ue})(j);switch(Se.reason.state=se.state,se.state){case L:break;case O:(function(Ae,Te,Re){const Ue=Te.getMediaType(),Ne=Te.getThroughputController().getSafeAverageThroughput(Ue);if(isNaN(Ne))return;const ee=Te.getMediaInfo(),ae=I.getOptimalRepresentationForBitrate(ee,Ne,!0),de=v.getCurrentBufferLevel(Ue);Ae.representation=ae,Ae.reason.throughput=Ne,Re.placeholderBuffer=Math.max(0,ne(Re,ae)-de),Re.currentRepresentation=ae,!isNaN(Re.lastSegmentDurationS)&&de>=Re.lastSegmentDurationS&&(Re.state=G)})(Se,j,se);break;case G:(function(Ae,Te,Re){const Ue=Te.getMediaType(),Ne=Te.getThroughputController(),ee=Te.getMediaInfo(),ae=Ne.getSafeAverageThroughput(Ue),de=Te.getScheduleController();(function(be,we){const Ce=Date.now();if(isNaN(be.lastSegmentFinishTimeMs)){if(!isNaN(be.lastCallTimeMs)){const ze=.001*(Ce-be.lastCallTimeMs);be.placeholderBuffer+=Math.max(0,ze)}}else{const ze=.001*(Ce-be.lastSegmentFinishTimeMs);be.placeholderBuffer+=Math.max(0,ze)}be.lastCallTimeMs=Ce,be.lastSegmentStart=NaN,be.lastSegmentRequestTimeMs=NaN,be.lastSegmentFinishTimeMs=NaN,J(be,we)})(Re,Ue);const le=v.getCurrentBufferLevel(Ue);let ue=(function(be,we){const Ce=be.representations.length;let ze=NaN,Fe=NaN;for(let We=0;We<Ce;++We){let lt=(be.Vp*(be.utilities[We]-1+be.gp)-we)/be.representations[We].bandwidth;(isNaN(Fe)||lt>=Fe)&&(Fe=lt,ze=We)}return be.representations[ze]})(Re,le+Re.placeholderBuffer);const pe=I.getOptimalRepresentationForBitrate(ee,ae,!0);ue.absoluteIndex>Re.currentRepresentation.absoluteIndex&&ue.absoluteIndex>pe.absoluteIndex&&(ue=pe.absoluteIndex>Re.currentRepresentation.absoluteIndex?pe:Re.currentRepresentation);let W=Math.max(0,le+Re.placeholderBuffer-ce(Re,ue));W<=Re.placeholderBuffer?(Re.placeholderBuffer-=W,W=0):(W-=Re.placeholderBuffer,Re.placeholderBuffer=0,I.isPlayingAtTopQuality(ue)?W=0:de.setTimeToLoadDelay(1e3*W)),Ae.representation=ue,Ae.reason.throughput=ae,Ae.reason.bufferLevel=le,Ae.reason.placeholderBuffer=Re.placeholderBuffer,Ae.reason.delay=W,Re.currentRepresentation=ue})(Se,j,se);break;default:(function(Ae,Te,Re){D.debug("BOLA ABR rule invoked in bad state.");const Ue=Te.getMediaInfo(),Ne=Te.getMediaType(),ee=Te.getThroughputController().getSafeAverageThroughput(Ne);Ae.representation=I.getOptimalRepresentationForBitrate(Ue,ee,!0),Ae.reason.state=Re.state,Ae.reason.throughput=ee,Re.state=O,P(Re)})(Se,j,se)}return Se.priority=N.get().streaming.abr.rules.bolaRule.priority,Se}catch(Se){return D.error(Se),(0,i.default)(y).create()}},handleNewMediaInfo:function(j){j&&j.streamInfo&&j.type&&$[j.streamInfo.id]&&$[j.streamInfo.id][j.type]&&delete $[j.streamInfo.id][j.type]},reset:function(){B(),_.off(g.default.BUFFER_EMPTY,q,M),_.off(g.default.PLAYBACK_SEEKING,R,M),_.off(g.default.METRIC_ADDED,z,M),_.off(g.default.QUALITY_CHANGE_REQUESTED,re,M),_.off(g.default.FRAGMENT_LOADING_ABANDONED,K,M),_.off(f.default.MEDIA_FRAGMENT_LOADED,fe,M),_.off(f.default.SETTING_UPDATED_MAX_BITRATE,me,M),_.off(f.default.SETTING_UPDATED_MIN_BITRATE,me,M),_.off(f.default.VIDEO_ELEMENT_RESIZED,Ee,M)}},D=(0,l.default)(y).getInstance().getLogger(M),N=(0,c.default)(y).getInstance(),B(),_.on(g.default.BUFFER_EMPTY,q,M),_.on(g.default.PLAYBACK_SEEKING,R,M),_.on(g.default.METRIC_ADDED,z,M),_.on(g.default.QUALITY_CHANGE_REQUESTED,re,M),_.on(g.default.FRAGMENT_LOADING_ABANDONED,K,M),_.on(f.default.MEDIA_FRAGMENT_LOADED,fe,M),_.on(f.default.SETTING_UPDATED_MAX_BITRATE,me,M),_.on(f.default.SETTING_UPDATED_MIN_BITRATE,me,M),_.on(f.default.VIDEO_ELEMENT_RESIZED,Ee,M),M}ge.__dashjs_factory_name="BolaRule";var Me=n.default.getClassFactory(ge);const he="L2A_STATE_ONE_BITRATE",De="L2A_STATE_STARTUP",_e="L2A_STATE_STEADY",ke=Math.pow(4,.99);function Oe(b){b=b||{};const y=this.context,v=b.dashMetrics,w=(0,m.default)(y).getInstance(),_=(0,c.default)(y).getInstance();let I,M,D,N;function $(ie){ie.placeholderBuffer=0,ie.mostAdvancedSegmentStart=NaN,ie.lastSegmentWasReplacement=!1,ie.lastSegmentStart=NaN,ie.lastSegmentDurationS=NaN,ie.lastSegmentRequestTimeMs=NaN,ie.lastSegmentFinishTimeMs=NaN,ie.lastSegmentUrl=""}function q(){for(const ie in M)if(M.hasOwnProperty(ie)){const J=M[ie];J.state!==he&&(J.state=De,$(J))}}function R(ie){if(ie&&ie.chunk&&ie.chunk.representation&&ie.chunk.representation.mediaInfo){const J=M[ie.chunk.representation.mediaInfo.type],ce=D[ie.chunk.representation.mediaInfo.type];if(J&&J.state!==he){const fe=ie.chunk.start;isNaN(J.mostAdvancedSegmentStart)||fe>J.mostAdvancedSegmentStart?(J.mostAdvancedSegmentStart=fe,J.lastSegmentWasReplacement=!1):J.lastSegmentWasReplacement=!0,J.lastSegmentStart=fe,J.lastSegmentDurationS=ie.chunk.duration,J.currentRepresentation=ie.chunk.representation,z(J,ce)}}}function P(ie){if(ie&&ie.metric===o.HTTP_REQUEST&&ie.value&&ie.value.type===Q.HTTPRequest.MEDIA_SEGMENT_TYPE&&ie.value.trace&&ie.value.trace.length){const J=M[ie.mediaType],ce=D[ie.mediaType];J&&J.state!==he&&(J.lastSegmentRequestTimeMs=ie.value.trequest.getTime(),J.lastSegmentFinishTimeMs=ie.value._tfinish.getTime(),z(J,ce))}}function z(ie,J){isNaN(ie.lastSegmentStart)||isNaN(ie.lastSegmentRequestTimeMs)||(J.segment_request_start_s=.001*ie.lastSegmentRequestTimeMs,J.segment_download_finish_s=.001*ie.lastSegmentFinishTimeMs,ie.lastSegmentStart=NaN,ie.lastSegmentRequestTimeMs=NaN)}function X(ie,J){if(ie.length!==J.length)return-1;let ce=0;for(let fe=0;fe<ie.length;fe++)ce+=ie[fe]*J[fe];return ce}function re(){M={},D={}}return I={getSwitchRequest:function(ie){try{const J=(0,i.default)(y).create();J.rule=this.getClassName();const ce=ie.getMediaType(),fe=ie.getScheduleController();if(J.reason=J.reason||{},ce===h.default.AUDIO)return J;fe.setTimeToLoadDelay(0);const me=(function(Ee){const ne=Ee.getMediaType();let K=M[ne];return K||(K=(function(B){const j={},Se=B.getMediaInfo();return j.state=De,j.currentRepresentation=null,(function(se){se&&se.type&&(D[se.type]={},D[se.type].w=[],D[se.type].prev_w=[],D[se.type].Q=0,D[se.type].segment_request_start_s=0,D[se.type].segment_download_finish_s=0,D[se.type].B_target=1.5)})(Se),$(j),j})(Ee),M[ne]=K),K})(ie);if(!D[ce])return J;switch(J.reason.state=me.state,me.state){case he:break;case De:(function(Ee,ne,K){const B=Ee.getMediaInfo(),j=Ee.getMediaType(),Se=Ee.getThroughputController().getSafeAverageThroughput(j);if(isNaN(Se))return ne;const se=Ee.getAbrController(),Ae=se.getOptimalRepresentationForBitrate(B,Se,!0),Te=v.getCurrentBufferLevel(j,!0),Re=D[j],Ue=se.getPossibleVoRepresentationsFilteredBySettings(B,!0);if(ne.representation=Ae,ne.reason.throughput=Se,K.currentRepresentation=Ae,!isNaN(K.lastSegmentDurationS)&&Te>=Re.B_target){K.state=_e,Re.Q=ke;for(let Ne=0;Ne<Ue.length;++Ne)Ue[Ne].id===K.currentRepresentation.id?Re.prev_w[Ne]=1:Re.prev_w[Ne]=0}})(ie,J,me);break;case _e:(function(Ee,ne,K){let B=[];const j=Ee.getThroughputController(),Se=Ee.getMediaType();let se=j.getAverageThroughput(Se,h.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),Ae=v.getCurrentHttpRequest(Se),Te=null;const Re=D[Se];if(se<1&&(se=1),Ae.url===K.lastSegmentUrl||Ae.type===Q.HTTPRequest.INIT_SEGMENT_TYPE)Te=K.currentRepresentation;else{let Ue=K.lastSegmentDurationS,Ne=1;const ee=Ee.getAbrController(),ae=Ee.getMediaInfo(),de=ee.getPossibleVoRepresentationsFilteredBySettings(ae,!0);let le=Ee.getVideoModel().getPlaybackRate();const ue=Math.max(Math.pow(4,1),ke*Math.sqrt(4));for(let we=0;we<de.length;++we){const Ce=de[we];le*Ce.bitrateInKbit>se&&(Ne=-1),Re.w[we]=Re.prev_w[we]+Ne*(Ue/(2*ue))*((Re.Q+ke)*(le*Ce.bitrateInKbit/se))}Re.w=(function(we){const Ce=we.length;let ze=!1,Fe=[];for(let ln=0;ln<Ce;++ln)Fe[ln]=we[ln];let We=we.sort((function(ln,Mt){return Mt-ln})),lt=0,St=0,Nt=[];for(let ln=0;ln<Ce-1;++ln)if(lt+=We[ln],St=(lt-1)/(ln+1),St>=We[ln+1]){ze=!0;break}ze||(St=(lt+We[Ce-1]-1)/Ce);for(let ln=0;ln<Ce;++ln)Nt[ln]=Math.max(Fe[ln]-St,0);return Nt})(Re.w);for(let we=0;we<de.length;++we)B[we]=Re.w[we]-Re.prev_w[we],Re.prev_w[we]=Re.w[we];const pe=de.map((we=>we.bandwidth));Re.Q=Math.max(0,Re.Q-Ue+Ue*le*((X(pe,Re.prev_w)+X(pe,B))/se));let W=[];for(let we=0;we<pe.length;++we)W[we]=Math.abs(pe[we]-X(Re.w,pe));const be=W.indexOf(Math.min(...W));Te=ee.getRepresentationByAbsoluteIndex(be,ae,!0),Te.absoluteIndex>K.currentRepresentation.absoluteIndex&&pe[K.currentRepresentation.absoluteIndex+1]<=se&&(Te=ee.getRepresentationByAbsoluteIndex(K.currentRepresentation.absoluteIndex+1,ae,!0)),Te.bitrateInKbit>=se&&(Re.Q=2*Math.max(ke,Re.Q)),K.lastSegmentUrl=Ae.url}ne.representation=Te,K.currentRepresentation=ne.representation})(ie,J,me);break;default:(function(Ee,ne,K){const B=Ee.getAbrController(),j=Ee.getMediaInfo(),Se=Ee.getMediaType(),se=Ee.getThroughputController().getSafeAverageThroughput(Se);ne.representation=B.getOptimalRepresentationForBitrate(j,se,!0),ne.reason.throughput=se,K.state=De,$(K)})(ie,J,me)}return J.priority=_.get().streaming.abr.rules.l2ARule.priority,J}catch(J){return N.error(J),(0,i.default)(y).create()}},reset:function(){re(),w.off(f.default.PLAYBACK_SEEKING,q,I),w.off(f.default.MEDIA_FRAGMENT_LOADED,R,I),w.off(f.default.METRIC_ADDED,P,I)}},N=(0,l.default)(y).getInstance().getLogger(I),re(),w.on(f.default.PLAYBACK_SEEKING,q,I),w.on(f.default.MEDIA_FRAGMENT_LOADED,R,I),w.on(f.default.METRIC_ADDED,P,I),I}Oe.__dashjs_factory_name="L2ARule";var He=n.default.getClassFactory(Oe);function Pe(){const b=this.context;let y,v,w,_,I,M,D,N,$;function q(){w=null,_=1,I=100,M=0,D=null,N=null,$="dynamic_weight_selection"}function R(){let ie=0;if(w)for(let J=0;J<w.length;J++){let ce=w[J];ce.state.throughput>ie&&(ie=ce.state.throughput)}return ie}function P(ie,J,ce){let fe=ie.map(((me,Ee)=>ce[Ee]*Math.pow(me-J[Ee],2))).reduce(((me,Ee)=>me+Ee));return(fe<0?-1:1)*Math.sqrt(Math.abs(fe))}function z(ie,J){return P([ie.state.throughput,ie.state.latency,ie.state.rebuffer,ie.state.switch],[J.state.throughput,J.state.latency,J.state.rebuffer,J.state.switch],[1,1,1,1])}function X(ie,J){for(let ce=0;ce<w.length;ce++){let fe=w[ce],me=.1;const Ee=z(fe,ie);re(fe,J,Math.exp(-1*Math.pow(Ee,2)/(2*Math.pow(me,2))))}}function re(ie,J,ce){let fe=ie.state,me=[.01,.01,.01,.01];fe.throughput=fe.throughput+(J[0]-fe.throughput)*me[0]*ce,fe.latency=fe.latency+(J[1]-fe.latency)*me[1]*ce,fe.rebuffer=fe.rebuffer+(J[2]-fe.rebuffer)*me[2]*ce,fe.switch=fe.switch+(J[3]-fe.switch)*me[3]*ce}return y={getNextQuality:function(ie,J,ce,fe,me,Ee,ne,K){let B=fe,j=ce;(function(ae,de){if(!w){w=[];const le=de.getPossibleVoRepresentationsFilteredBySettings(ae,!0),ue=le.map((pe=>pe.bandwidth));M=Math.min(...ue),_=(function(pe){const W=pe.map((be=>Math.pow(be,2))).reduce(((be,we)=>be+we));return Math.sqrt(W)})(ue),le.forEach((pe=>{let W={representation:pe,state:{throughput:pe.bandwidth/_,latency:0,rebuffer:0,switch:0}};w.push(W)})),N=(function(pe){let W=[],be=(function(We){let lt=[];for(let St=0;St<We;St++){let Nt=[Math.random()*R(),Math.random(),Math.random(),Math.random()];lt.push(Nt)}return lt})(Math.pow(pe.length,2));W.push(be[0]);let we=[1,1,1,1];for(let We=1;We<pe.length;We++){let lt=null,St=null;for(let Nt=0;Nt<be.length;Nt++){let ln=be[Nt],Mt=null;for(let sn=0;sn<W.length;sn++){let vn=P(ln,W[sn],we);(Mt===null||vn<Mt)&&(Mt=vn)}(St===null||Mt>St)&&(lt=ln,St=Mt)}W.push(lt)}let Ce=null,ze=null;for(let We=0;We<W.length;We++){let lt=0;for(let St=0;St<W.length;St++)We!==St&&(lt+=P(W[We],W[St],we));(Ce===null||lt>Ce)&&(Ce=lt,ze=We)}let Fe=[];for(Fe.push(W[ze]),W.splice(ze,1);W.length>0;){let We=null,lt=null;for(let St=0;St<W.length;St++){let Nt=P(Fe[0],W[St],we);(We===null||Nt<We)&&(We=Nt,lt=St)}Fe.push(W[lt]),W.splice(lt,1)}return Fe})(w)}})(J,ie);let Se=ce/_;Se>1&&(Se=R()),fe/=I;let se=w.find((ae=>ae.representation.id===ne.id)),Ae=se.representation.bandwidth*K.getSegmentDuration()/j,Te=Math.max(0,Ae-me);if(me-Ae<K.getMinBuffer())return v.debug(`Buffer is low for bitrate= ${se.representation.bandwidth} downloadTime=${Ae} currentBuffer=${me} rebuffer=${Te}`),(function(ae,de){let le=0,ue=ae;if(w)for(let pe=0;pe<w.length;pe++){let W=w[pe];W.representation.bandwidth<ae.representation.bandwidth&&W.representation.bandwidth>le&&de>W.representation.bandwidth&&(le=W.representation.bandwidth,ue=W)}return ue})(se,j).representation;switch($){case"manual_weight_selection":D=[.4,.4,.4,.4];break;case"random_weight_selection":D=(function(ae){let de=[],le=Math.sqrt(2/ae);for(let ue=0;ue<4;ue++)de.push(Math.random()*le);return D=de,D})(w.length);break;default:(function(ae,de,le,ue,pe,W){D||(D=N[N.length-1]);let be=ae.findWeightVector(w,de,le,ue,pe,W);be!==null&&be!==-1&&(D=be)})(K,B,me,Te,j,Ee)}let Re=null,Ue=null,Ne=null;for(let ae=0;ae<w.length;ae++){let de=w[ae],le=de.state,ue=[le.throughput,le.latency,le.rebuffer,le.switch],pe=D.slice(),W=K.getNextBufferWithBitrate(de.representation.bandwidth,me,j),be=W<K.getMinBuffer();be&&v.debug(`Buffer is low for bitrate=${de.representation.bandwidth} downloadTime=${Ae} currentBuffer=${me} nextBuffer=${W}`),(de.representation.bandwidth>ce-1e4||be)&&de.representation.bandwidth!==M&&(pe[0]=100);let we=P(ue,[Se,0,0,0],pe);(Re===null||we<Re)&&(Re=we,Ue=de.representation,Ne=de)}let ee=Math.abs(se.representation.bandwidth-Ne.representation.bandwidth)/_;return X(se,[Se,fe,Te,ee]),X(Ne,[Se,0,0,ee]),Ue},reset:function(){q()}},v=(0,l.default)(b).getInstance().getLogger(y),q(),y}Pe.__dashjs_factory_name="LearningAbrController";var Ge=n.default.getClassFactory(Pe),qe=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function Ze(){let b,y,v,w,_;function I(){y=null,v=null,w=null,_=null}function M(N,$,q,R){let P=new qe;return P.type=N,P.weights.bitrateReward=$||1,P.weights.bitrateSwitchPenalty=1,P.weights.rebufferPenalty=q||1e3,P.weights.latencyPenalty=[],P.weights.latencyPenalty.push({threshold:1.1,penalty:.05*R}),P.weights.latencyPenalty.push({threshold:1e8,penalty:.1*q}),P.weights.playbackSpeedPenalty=R||200,P}function D(N,$,q,R,P){P.bitrateWSum+=P.weights.bitrateReward*N,P.lastBitrate&&(P.bitrateSwitchWSum+=P.weights.bitrateSwitchPenalty*Math.abs(N-P.lastBitrate)),P.lastBitrate=N,P.rebufferWSum+=P.weights.rebufferPenalty*$;for(let z=0;z<P.weights.latencyPenalty.length;z++){let X=P.weights.latencyPenalty[z];if(q<=X.threshold){P.latencyWSum+=X.penalty*q;break}}P.playbackSpeedWSum+=P.weights.playbackSpeedPenalty*Math.abs(1-R),P.totalQoe=P.bitrateWSum-P.bitrateSwitchWSum-P.rebufferWSum-P.latencyWSum-P.playbackSpeedWSum}return b={setupPerSegmentQoe:function(N,$,q){y=M("segment",N,$,q),v=N,w=$,_=q},logSegmentMetrics:function(N,$,q,R){y&&D(N,$,q,R,y)},getPerSegmentQoe:function(){return y},calculateSingleUseQoe:function(N,$,q,R){let P=null;return v&&w&&_&&(P=M("segment",v,w,_)),P?(D(N,$,q,R,P),P.totalQoe):0},reset:function(){I()}},I(),b}Ze.__dashjs_factory_name="LoLpQoeEvaluator";var ct=n.default.getClassFactory(Ze);function mt(b){let y,v,w,_,I=b.targetLatency,M=b.bufferMin,D=b.segmentDuration,N=b.qoeEvaluator;function $(){return D}function q(R,P){const z=$();let X;return X=P>z?R-z:R+z-P,X}return y={getMinBuffer:function(){return M},getSegmentDuration:$,getNextBufferWithBitrate:function(R,P,z){return q(P,R*D/z)},getNextBuffer:q,findWeightVector:function(R,P,z,X,re,ie){let J=null,ce=null,fe=null,me=Math.abs(P-_);return R.forEach((Ee=>{w.forEach((ne=>{ne[0];let K,B=ne[1],j=ne[2],Se=(ne[3],Ee.representation.bandwidth*D/re),se=q(z,Se);K=j===0?10:1/j;let Ae=K*Math.max(1e-5,Se-se);K=B===0?10:1/B;let Te=K*Ee.state.latency,Re=N.calculateSingleUseQoe(Ee.representation.bandwidth,Ae,Te,ie);(J===null||Re>J)&&(function(Ue,Ne,ee){return!(Ue>I+ee)&&Ne>=M})(P,se,me)&&(J=Re,ce=ne,fe=Ee.representation.bandwidth)}))})),ce===null&&fe===null&&(ce=-1),_=P,ce}},v=[.2,.4,.6,.8,1],w=(function(R){let P=R.map((function(X){return[X]})),z=function(X,re,ie){if(ie===re)return X;let J=X.length;for(let ce=0;ce<J;ce++){let fe=X.shift();for(let me=0;me<R.length;me++)X.push(fe.concat(R[me]))}return z(X,re,ie+1)};return z(P,4,1)})(v),_=0,y}mt.__dashjs_factory_name="LoLpWeightSelector";var xe=n.default.getClassFactory(mt);function Ie(b){let y,v,w,_,I,M=(b=b||{}).dashMetrics,D=this.context;return w={getSwitchRequest:function(N){try{let $=(0,i.default)(D).create();$.rule=this.getClassName();let q=N.getMediaInfo().type,R=N.getAbrController();const P=N.getStreamInfo();let z=N.getRepresentation();const X=N.getMediaInfo(),re=M.getCurrentBufferState(q),ie=N.getScheduleController(),J=M.getCurrentBufferLevel(q,!0),ce=ie.getPlaybackController();let fe=ce.getCurrentLiveLatency();if(q===h.default.AUDIO)return $;fe||(fe=0);const me=ce.getPlaybackRate(),Ee=N.getThroughputController().getSafeAverageThroughput(q);if(y.debug(`Throughput ${Math.round(Ee)} kbps`),isNaN(Ee)||!re||R.getAbandonmentStateFor(P.id,q)===o.ABANDON_LOAD)return $;let ne=R.getPossibleVoRepresentationsFilteredBySettings(X,!0).map((Ue=>Ue.bandwidth)),K=N.getRepresentation().fragmentDuration,B=Math.min(...ne)/1e3,j=Math.max(...ne)/1e3,Se=z.bandwidth/1e3,se=M.getCurrentHttpRequest(q,!0),Ae=(se.tresponse.getTime()-se.trequest.getTime())/1e3,Te=Ae>K?Ae-K:0;I.setupPerSegmentQoe(K,j,B),I.logSegmentMetrics(Se,Te,fe,me);let Re=xe(D).create({targetLatency:1.5,bufferMin:.3,segmentDuration:K,qoeEvaluator:I});return $.representation=_.getNextQuality(R,X,1e3*Ee,fe,J,me,z,Re),$.reason={throughput:Ee,latency:fe},$.priority=v.get().streaming.abr.rules.loLPRule.priority,ie.setTimeToLoadDelay(0),$}catch($){throw $}},reset:function(){_.reset(),I.reset()}},y=(0,l.default)(D).getInstance().getLogger(w),_=Ge(D).create(),I=ct(D).create(),v=(0,c.default)(D).getInstance(),w}Ie.__dashjs_factory_name="LoLPRule";var Ke=n.default.getClassFactory(Ie);function H(b){b=b||{};const y=this.context,v=b.mediaPlayerModel,w=b.customParametersModel,_=b.dashMetrics,I=b.settings,M=(0,m.default)(y).getInstance();let D,N,$,q;function R(){Object.values(h.default.QUALITY_SWITCH_RULES).forEach((ie=>{N=P(ie,N)})),Object.values(h.default.ABANDON_FRAGMENT_RULES).forEach((ie=>{$=P(ie,$)})),w.getAbrCustomRules().forEach((function(ie){ie.type===h.default.RULES_TYPES.QUALITY_SWITCH_RULES&&N.push(ie.rule(y).create()),ie.type===h.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&$.push(ie.rule(y).create())})),N.length===0&&(N.push(Me(y).create({dashMetrics:_,mediaPlayerModel:v,settings:I})),N.push(d(y).create({dashMetrics:_})))}function P(ie,J){const ce=ie.charAt(0).toLowerCase()+ie.slice(1);return I.get().streaming.abr.rules[ce].active&&!(function(fe,me){return fe.filter((Ee=>Ee.getClassName()===me)).length>0})(J,ie)?(J.push((function(fe){switch(fe){case h.default.QUALITY_SWITCH_RULES.BOLA_RULE:return Me(y).create({dashMetrics:_,mediaPlayerModel:v,settings:I});case h.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return d(y).create({dashMetrics:_});case h.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return E(y).create({dashMetrics:_,settings:I});case h.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return Y(y).create();case h.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return k(y).create();case h.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return He(y).create({dashMetrics:_,settings:I});case h.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return Ke(y).create({dashMetrics:_});case h.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return A(y).create({dashMetrics:_,mediaPlayerModel:v,settings:I})}})(ie)),J):I.get().streaming.abr.rules[ce].active?J:(function(fe,me){return fe.filter((Ee=>Ee.getClassName()!==me))})(J,ie)}function z(ie){return ie.filter((J=>J.representation!==i.default.NO_CHANGE))}function X(ie){const J={};let ce,fe,me,Ee=null;if(ie.length!==0){for(J[i.default.PRIORITY.STRONG]=null,J[i.default.PRIORITY.WEAK]=null,J[i.default.PRIORITY.DEFAULT]=null,ce=0,fe=ie.length;ce<fe;ce+=1)me=ie[ce],me.representation!==i.default.NO_CHANGE&&(J[me.priority]===null||J[me.priority].representation!==i.default.NO_CHANGE&&me.representation.bitrateInKbit<J[me.priority].representation.bitrateInKbit)&&(J[me.priority]=me);return J[i.default.PRIORITY.WEAK]&&J[i.default.PRIORITY.WEAK].representation!==i.default.NO_CHANGE&&(Ee=J[i.default.PRIORITY.WEAK]),J[i.default.PRIORITY.DEFAULT]&&J[i.default.PRIORITY.DEFAULT].representation!==i.default.NO_CHANGE&&(Ee=J[i.default.PRIORITY.DEFAULT]),J[i.default.PRIORITY.STRONG]&&J[i.default.PRIORITY.STRONG].representation!==i.default.NO_CHANGE&&(Ee=J[i.default.PRIORITY.STRONG]),Ee}}function re(){R()}return D={clearDataForStream:function(ie){[N,$].forEach((J=>{J&&J.length&&J.forEach((ce=>ce.clearDataForStream&&typeof ce.clearDataForStream=="function"&&ce.clearDataForStream(ie)))}))},getAbandonFragmentRules:function(){return $},getBestPossibleSwitchRequest:function(ie){return ie&&X(z(N.filter((J=>{const ce=J.getClassName();if(ce!==h.default.QUALITY_SWITCH_RULES.BOLA_RULE&&ce!==h.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const fe=ie.getMediaType();return q[fe]&&ce===h.default.QUALITY_SWITCH_RULES.BOLA_RULE||!q[fe]&&ce===h.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE})).map((J=>J.getSwitchRequest(ie)))))||(0,i.default)(y).create()},getBolaState:function(ie){return q[ie]},getMinSwitchRequest:X,getQualitySwitchRules:function(){return N},handleNewMediaInfo:function(ie){N.forEach((J=>J.handleNewMediaInfo&&J.handleNewMediaInfo(ie))),$.forEach((J=>J.handleNewMediaInfo&&J.handleNewMediaInfo(ie)))},initialize:function(){N=[],$=[],q={},R(),M.on(f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,re,D)},reset:function(){[N,$].forEach((ie=>{ie&&ie.length&&ie.forEach((J=>J.reset&&J.reset()))})),N=[],$=[],q={},M.off(f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,re,D)},setBolaState:function(ie,J){q[ie]=J},shouldAbandonFragment:function(ie){if(!ie)return(0,i.default)(y).create();const J=X(z($.map((ce=>ce.shouldAbandon(ie)))));return J&&J.reason&&(J.reason.forceAbandon=!0),J||(0,i.default)(y).create()}},D}H.__dashjs_factory_name="ABRRulesCollection";const V=n.default.getClassFactory(H);n.default.updateSingletonFactory(H.__dashjs_factory_name,V);var C=V;class F{constructor(y){this.action=F.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.isPartialSegmentRequest=!1,this.mediaStartTime=NaN,this.mediaType=null,this.presentationStartTime=NaN,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=y||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===Q.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(y){this.type=y&&y.init?Q.HTTPRequest.INIT_SEGMENT_TYPE:Q.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=y&&y.url?y.url:null,this.range=y&&y.range?y.range.start+"-"+y.range.end:null,this.mediaType=y&&y.mediaType?y.mediaType:null,this.representation=y&&y.representation?y.representation:null}}F.ACTION_DOWNLOAD="download",F.ACTION_COMPLETE="complete";var oe=F;const Z="loading",Be="executed",Xe="failed";function $e(b){const y=(b=b||{}).eventBus,v=b.events,w=b.dashMetrics,_=b.fragmentLoader,I=b.debug,M=b.streamInfo,D=b.type;let N,$,q,R;function P(ne){return!!ne&&(function(K){let B=!1;return K.some((j=>{if(Se=ne,se=j,!isNaN(Se.index)&&Se.startTime===se.startTime&&Se.adaptationIndex===se.adaptationIndex&&Se.type===se.type||(function(Ae,Te){return Ae.representation.id===Te.representation.id})(ne,j)||(function(Ae,Te){return Ae.action===oe.ACTION_COMPLETE&&Ae.action===Te.action})(ne,j))return B=!0,B;var Se,se})),B})(q)}function z(ne){return isNaN(ne.duration)?.25:Math.min(ne.duration/8,.5)}function X(ne){q=q.filter((K=>{const B=z(K);return isNaN(K.startTime)||ne!==void 0&&K.startTime>=ne-B}))}function re(ne,K){K<=ne+.5||(q=q.filter((B=>{const j=z(B);return isNaN(B.startTime)||B.startTime>=K-j||isNaN(B.duration)||B.startTime+B.duration<=ne+j})))}function ie(ne,K,B){for(let j=ne.length-1;j>=0;j--){const Se=ne[j],se=Se.startTime,Ae=se+Se.duration;if(B=isNaN(B)?z(Se):B,!isNaN(se)&&!isNaN(Ae)&&K+B>=se&&K-B<Ae||isNaN(se)&&isNaN(K))return Se}return null}function J(ne,K){w.addSchedulingInfo(ne,K),w.addRequestsQueue(ne.mediaType,R,q)}function ce(ne){ne.sender===_&&(R.splice(R.indexOf(ne.request),1),ne.response&&!ne.error&&q.push(ne.request),J(ne.request,ne.error?Xe:Be),y.trigger(v.FRAGMENT_LOADING_COMPLETED,{request:ne.request,response:ne.response,error:ne.error,sender:this},{streamId:M.id,mediaType:D}))}function fe(ne){ne.sender===_&&y.trigger(v.FRAGMENT_LOADING_PROGRESS,{request:ne.request,response:ne.response,error:ne.error,sender:this},{streamId:M.id,mediaType:D})}function me(ne){ne.sender===_&&y.trigger(v.FRAGMENT_LOADING_ABANDONED,{request:ne.request},{streamId:M.id,mediaType:D})}function Ee(){q=[],R=[],_&&_.resetInitialSettings()}return N={abortRequests:function(){$.debug("abort requests"),_.abort(),R=[]},executeRequest:function(ne){ne.action===oe.ACTION_DOWNLOAD?(J(ne,Z),R.push(ne),(function(K){y.trigger(v.FRAGMENT_LOADING_STARTED,{request:K},{streamId:M.id,mediaType:D}),_.load(K)})(ne)):$.warn("Unknown request action.")},getRequests:function(ne){const K=ne?ne.state instanceof Array?ne.state:[ne.state]:[];let B=[];return K.forEach((j=>{const Se=(function(se){let Ae;switch(se){case Z:Ae=R;break;case Be:Ae=q;break;default:Ae=[]}return Ae})(j);B=B.concat((function(se,Ae){return Ae.hasOwnProperty("time")?[ie(se,Ae.time,Ae.threshold)]:se.filter((Te=>{for(const Re in Ae)if(Re!=="state"&&Ae.hasOwnProperty(Re)&&Te[Re]!=Ae[Re])return!1;return!0}))})(Se,ne))})),B},getStreamId:function(){return M.id},getType:function(){return D},isFragmentLoaded:P,isFragmentLoadedOrPending:function(ne){let K,B=!1,j=0;if(B=P(ne),!B)for(j=0;j<R.length;j++)K=R[j],ne.url===K.url&&ne.startTime===K.startTime&&(B=!0);return B},removeExecutedRequestsAfterTime:function(ne){q=q.filter((K=>isNaN(K.startTime)||ne!==void 0&&K.startTime<ne))},removeExecutedRequestsBeforeTime:X,reset:function(){y.off(v.LOADING_COMPLETED,ce,this),y.off(v.LOADING_DATA_PROGRESS,fe,this),y.off(v.LOADING_ABANDONED,me,this),_&&_.reset(),Ee()},resetInitialSettings:Ee,syncExecutedRequestsWithBufferedRange:function(ne,K){if(!ne||ne.length===0)return void X();let B=0;for(let j=0,Se=ne.length;j<Se;j++)re(B,ne.start(j)),B=ne.end(j);K>0&&re(B,K)}},$=I.getLogger(N),Ee(),y.on(v.LOADING_COMPLETED,ce,N),y.on(v.LOADING_DATA_PROGRESS,fe,N),y.on(v.LOADING_ABANDONED,me,N),N}$e.__dashjs_factory_name="FragmentModel";const Ve=n.default.getClassFactory($e);Ve.FRAGMENT_MODEL_LOADING=Z,Ve.FRAGMENT_MODEL_EXECUTED=Be,Ve.FRAGMENT_MODEL_CANCELED="canceled",Ve.FRAGMENT_MODEL_FAILED=Xe,n.default.updateClassFactory($e.__dashjs_factory_name,Ve);var je=Ve;function Qe(b){let y;const v=(b=b||{}).abrController,w=b.throughputController,_=b.switchRequestHistory,I=b.droppedFramesHistory,M=b.currentRequest,D=b.streamProcessor?b.streamProcessor.getScheduleController():null,N=b.streamProcessor?b.streamProcessor.getRepresentation():null,$=b.videoModel?b.videoModel:null;function q(){return N?N.mediaInfo:null}return y={getAbrController:function(){return v},getCurrentRequest:function(){return M},getDroppedFramesHistory:function(){return I},getMediaInfo:q,getMediaType:function(){const R=q();return R?R.type:null},getRepresentation:function(){return N},getScheduleController:function(){return D},getStreamInfo:function(){const R=q();return R?R.streamInfo:null},getSwitchRequestHistory:function(){return _},getThroughputController:function(){return w},getVideoModel:function(){return $}},y}Qe.__dashjs_factory_name="RulesContext";var dt=n.default.getClassFactory(Qe);function it(){let b={},y={};const v=this.context,w=(0,c.default)(v).getInstance();return{clearForStream:function(_){delete b[_],delete y[_]},getSwitchRequests:function(_,I){return _!=null&&I!=null&&b[_]&&b[_][I]?b[_][I]:{}},push:function(_){const I=_.currentRepresentation,M=_.newRepresentation;if(I.mediaInfo.streamInfo.id!==M.mediaInfo.streamInfo.id||M.mediaInfo.id!==I.mediaInfo.id)return;const D=I.mediaInfo.streamInfo.id;b[D]||(function(re){b[re]={},y[re]={}})(D);const N=I.mediaInfo.type;b[D][N]||(function(re,ie){b[re][ie]={},y[re][ie]=[]})(D,N);const $=_.currentRepresentation.id;b[D][N][$]||(function(re,ie,J){b[re][ie][J]={noDrops:0,drops:0,dropSize:0}})(D,N,$);let q=_.newRepresentation.absoluteIndex-_.currentRepresentation.absoluteIndex,R=q<0?1:0,P=R?-q:0,z=R?0:1;b[D][N][_.currentRepresentation.id].drops+=R,b[D][N][_.currentRepresentation.id].dropSize+=P,b[D][N][_.currentRepresentation.id].noDrops+=z,y[D][N].push({id:_.currentRepresentation.id,noDrop:z,drop:R,dropSize:P});const X=(function(re,ie){return y[re][ie].length>w.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?y[re][ie].shift():null})(D,N);X&&(function(re,ie,J){b[re][ie][J.id].drops-=J.drop,b[re][ie][J.id].dropSize-=J.dropSize,b[re][ie][J.id].noDrops-=J.noDrop})(D,N,X)},reset:function(){b={},y={}}}}it.__dashjs_factory_name="SwitchRequestHistory";var rt=n.default.getClassFactory(it);function Ot(){let b={},y={},v={};return{clearForStream:function(w){delete b[w],delete y[w],delete v[w]},getFrameHistory:function(w){return b[w]},push:function(w,_,I){if(!_)return;b[w]||(function(R){b[R]=[],y[R]=0,v[R]=0})(w);let M=I&&I.droppedVideoFrames?I.droppedVideoFrames:0,D=I&&I.totalVideoFrames?I.totalVideoFrames:0,N=M-y[w];y[w]=M;let $=D-v[w];v[w]=D;const q=b[w];q[_]?(q[_].droppedVideoFrames+=N,q[_].totalVideoFrames+=$):q[_]={droppedVideoFrames:N,totalVideoFrames:$}},reset:function(){b={},y={},v={}}}}Ot.__dashjs_factory_name="DroppedFramesHistory";var pt=n.default.getClassFactory(Ot);function kt(){const b=this.context,y=(0,l.default)(b).getInstance(),v=(0,m.default)(b).getInstance();let w,_,I,M,D,N,$,q,R,P,z,X,re,ie,J,ce,fe,me,Ee,ne,K;function B(){w={},me={},J=new Map,z&&z.reset(),Ee&&Ee.reset(),$=void 0,z=void 0,Ee=void 0,clearTimeout(_),_=null}function j(W,be=!0){let we=Se(W,be);return we=(function(Ce){try{return(function(ze){try{if(!ce.get().streaming.cmsd.enabled||!ce.get().streaming.cmsd.abr.applyMb)return ze;const Fe=ze.filter((We=>{const lt=We.mediaInfo.type;let St=N.getMaxBitrate(lt);if(lt!==h.default.VIDEO||St<0)return!0;const Nt=We.mediaInfo.streamInfo.id;return St-=me[Nt][h.default.AUDIO].getRepresentation().bitrateInKbit||0,We.bitrateInKbit<=St}));return Fe.length>0?Fe:ze}catch(Fe){return re.error(Fe),ze}})(Ce=(function(ze){try{if(!ce.get().streaming.abr.limitBitrateByPortal)return ze;const{elementWidth:Fe}=K.getVideoElementSize(),We=ze.filter((lt=>lt.mediaInfo.type!==h.default.VIDEO||lt.width<=Fe));return We.length>0?We:ze}catch(Fe){return re.error(Fe),ze}})(Ce=(function(ze){try{const Fe=ze.filter((We=>{const lt=We.mediaInfo.type,St=We.bitrateInKbit,Nt=ie.getAbrBitrateParameter("maxBitrate",lt),ln=ie.getAbrBitrateParameter("minBitrate",lt);return!(Nt>-1&&St>Nt||ln>-1&&St<ln)}));return Fe.length>0?Fe:ze}catch(Fe){return re.error(Fe),ze}})(Ce)))}catch(ze){return re.error(ze),Ce}})(we),we}function Se(W,be){let we=[];return W&&((function(ze){try{const Fe=[];if(ze&&Fe.push(ze),!ce.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!ze.adaptationSetSwitchingCompatibleIds||ze.adaptationSetSwitchingCompatibleIds.length===0)return Fe;const We=me[ze.streamInfo.id][ze.type].getAllMediaInfos().filter((lt=>ze.adaptationSetSwitchingCompatibleIds.includes(lt.id)));return Fe.concat(We)}catch{return[ze]}})(W).forEach((ze=>{let Fe=M.getVoRepresentations(ze);Fe&&Fe.length>0&&(we=we.concat(Fe))})),we=(function(ze){return ze.forEach((Fe=>{if(Fe.dependentRepresentation&&Fe.dependentRepresentation.mediaInfo===null){let We=Fe.dependentRepresentation.id,lt=ze.find((St=>St.id===We));lt&&(Fe.dependentRepresentation=lt)}})),ze})(we),we=(function(ze){return ze=(function(Fe){let We=null;return Fe.filter((lt=>(We||(We=lt.mediaInfo),!isNaN(lt.qualityRanking)&&M.areMediaInfosEqual(We,lt.mediaInfo)))).length===Fe.length})(ze)?(function(Fe){return Fe.sort(((We,lt)=>lt.qualityRanking-We.qualityRanking)),Fe})(ze):(function(Fe){return Fe.sort(((We,lt)=>M.areMediaInfosEqual(We.mediaInfo,lt.mediaInfo)?isNaN(We.pixelsPerSecond)||isNaN(lt.pixelsPerSecond)||We.pixelsPerSecond===lt.pixelsPerSecond?We.bandwidth-lt.bandwidth:We.pixelsPerSecond-lt.pixelsPerSecond:isNaN(We.pixelsPerSecond)||isNaN(lt.pixelsPerSecond)||We.pixelsPerSecond===lt.pixelsPerSecond?isNaN(We.bitsPerPixel)||isNaN(lt.bitsPerPixel)?We.bandwidth-lt.bandwidth:lt.bitsPerPixel-We.bitsPerPixel:We.pixelsPerSecond-lt.pixelsPerSecond)),Fe})(ze)})(we),we.forEach(((ze,Fe)=>{ze.absoluteIndex=Fe})),we=we.filter((ze=>{const Fe=!!be||M.areMediaInfosEqual(ze.mediaInfo,W),We=!ze||!ze.mediaInfo||D.areKeyIdsUsable(ze.mediaInfo);return Fe&&We}))),we}function se(W){const be=W.request.mediaType,we=W.streamId;if(!(be&&we&&me[we]&&ce.get().streaming.abr.autoSwitchBitrate[be]))return;const Ce=me[we][be];if(!Ce)return;var ze;if(!(!((ze=Ce.getLastSegment())&&ze.isPartialSegment&&!isNaN(ze.totalNumberOfPartialSegments)&&!isNaN(ze.replacementSubNumber))||ze.replacementSubNumber===0))return;const Fe=Te(Ce,W.request),We=I.shouldAbandonFragment(Fe);We&&We.representation!==i.default.NO_CHANGE&&(function(lt,St,Nt,ln,Mt){if(ln.getFragmentModel().getRequests({state:je.FRAGMENT_MODEL_LOADING,index:lt.request.index})[0]){const sn=(function(vn,On){return w[vn]&&w[vn][On]?w[vn][On]:null})(St,Nt);sn&&(sn.state=o.ABANDON_LOAD),Ee.reset(),de(Nt,fe.getActiveStreamInfo(),Mt.representation,Mt.reason),clearTimeout(_),_=setTimeout((()=>{sn&&(w[St][Nt].state=o.ALLOW_LOAD),_=null}),ce.get().streaming.abandonLoadTimeout)}})(W,we,be,Ce,We)}function Ae(){ce.get().streaming.abr.limitBitrateByPortal&&Object.keys(me).forEach((W=>{Object.keys(me[W]).forEach((be=>{Ne(be,W)}))}))}function Te(W,be){return dt(b).create({abrController:X,adapter:M,currentRequest:be,droppedFramesHistory:z,streamProcessor:W,switchRequestHistory:Ee,throughputController:ne,videoModel:K})}function Re(W){W.mediaType===h.default.VIDEO&&(ae(W.streamId),$=W.newRepresentation.id)}function Ue(W){!pe()||W.metric!==o.BUFFER_LEVEL||W.mediaType!==h.default.AUDIO&&W.mediaType!==h.default.VIDEO||(function(be,we){try{const Ce=ie.getBufferTimeDefault(),ze=Ce,Fe=.5*Ce,We=I.getBolaState(be),lt=we>=(We?Fe:ze);I.setBolaState(be,lt),lt!==We&&(lt?re.info("["+be+"] switching from throughput to buffer occupancy ABR rule (buffer: "+we.toFixed(3)+")."):re.info("["+be+"] switching from buffer occupancy to throughput ABR rule (buffer: "+we.toFixed(3)+")."))}catch(Ce){re.error(Ce)}})(W.mediaType,.001*W.value.level)}function Ne(W,be){try{if(!(W&&me&&me[be]&&me[be][W]))return!1;ae(be);const we=me[be][W],Ce=we.getLastSegment(),ze=we.getRepresentationController()?.getCurrentCompositeRepresentation(),Fe=ee(Ce,ze);if(!ce.get().streaming.abr.autoSwitchBitrate[W]||!Fe)return!1;const We=Te(we),lt=I.getBestPossibleSwitchRequest(We);if(!lt||!lt.representation)return!1;let St=lt.representation;return(function(Nt,ln){Ee.push({currentRepresentation:Nt,newRepresentation:ln})})(ze,St),St.id!==ze.id&&(w[be][W].state===o.ALLOW_LOAD||St.absoluteIndex<ze.absoluteIndex)&&(ue(W,ze,St,lt.reason),!0)}catch(we){return re.error(we),!1}}function ee(W,be){return!(W&&W.isPartialSegment&&!isNaN(W.totalNumberOfPartialSegments)&&!isNaN(W.replacementSubNumber))||W.replacementSubNumber===W.totalNumberOfPartialSegments-1||(function(we,Ce){if(!Ce||!Ce.segmentSequenceProperties||Ce.segmentSequenceProperties.length<=0||Ce&&Ce.mediaInfo&&Ce.mediaInfo.adaptationSetSwitchingCompatibleIds&&Ce.mediaInfo.adaptationSetSwitchingCompatibleIds.length>0)return!1;const ze=Ce.segmentSequenceProperties.filter((We=>!isNaN(We.sapType)&&We.sapType<=1));if(ze.length===0)return!1;let Fe=(we.replacementSubNumber+1)%we.totalNumberOfPartialSegments;return ze.some((We=>Fe%We.cadence==0))})(W,be)}function ae(W){if(z){const be=K.getPlaybackQuality();be&&z.push(W,$,be)}}function de(W,be,we,Ce={}){if(!(be&&be.id&&W&&me&&me[be.id]&&me[be.id][W]&&we))return!1;const ze=me[be.id][W],Fe=ze.getRepresentationController()?.getCurrentCompositeRepresentation();return(!Fe||we.id!==Fe.id)&&ue(W,Fe,we,Ce)}function le(W,be){return`${W}-${be}`}function ue(W,be,we,Ce){const ze=we.mediaInfo.streamInfo.id;if(!W||!me[ze]||!me[ze][W])return!1;const Fe=me[ze][W].getStreamInfo(),We=R.getCurrentBufferLevel(W),lt=be!==null&&!M.areMediaInfosEqual(be.mediaInfo,we.mediaInfo),St=be?be.bitrateInKbit:0;return re.info(`[AbrController]: Switching quality in period ${ze} for media type ${W}. Switch from bitrate ${St} to bitrate ${we.bitrateInKbit}. Current buffer level: ${We}. Reason:`+(Ce?JSON.stringify(Ce):"/")),v.trigger(g.default.QUALITY_CHANGE_REQUESTED,{isAdaptationSetSwitch:lt,mediaType:W,newRepresentation:we,oldRepresentation:be,reason:Ce,streamInfo:Fe},{streamId:Fe.id,mediaType:W}),(function(Nt){const ln=ne.getAverageThroughput(Nt);isNaN(ln)||P.setSavedBitrateSettings(Nt,ln)})(W),!0}function pe(){return ce.get().streaming.abr.rules.bolaRule.active&&ce.get().streaming.abr.rules.throughputRule.active}return X={canPerformQualitySwitch:ee,checkPlaybackQuality:Ne,clearDataForStream:function(W){z&&z.clearForStream(W),me[W]&&delete me[W],Ee&&Ee.clearForStream(W),w[W]&&delete w[W],I.clearDataForStream(W)},getAbandonmentStateFor:function(W,be){return w[W]&&w[W][be]?w[W][be].state:null},getInitialBitrateFor:function(W){if(W===h.default.TEXT)return NaN;let be=ie.getAbrBitrateParameter("initialBitrate",W);if(be>0)return be;let we=NaN;if(P&&P.hasOwnProperty("getSavedBitrateSettings")&&(we=P.getSavedBitrateSettings(W)),!isNaN(we))return we;const Ce=ne.getAverageThroughput(W);return!isNaN(Ce)&&Ce>0?Ce:W===h.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(W,be,we=!0){const Ce=j(W,we);if(!Ce||Ce.length===0)return null;const ze=Ce.reduce(((We,lt)=>We.bandwidth<lt.bandwidth?We:lt));if(be<=0)return ze;const Fe=Ce.filter((We=>We.bitrateInKbit<=be));return Fe&&Fe.length!==0?Fe.reduce(((We,lt)=>lt.absoluteIndex>We.absoluteIndex?lt:We)):ze},getPossibleVoRepresentations:function(W,be=!0){return Se(W,be)},getPossibleVoRepresentationsFilteredBySettings:j,getRepresentationByAbsoluteIndex:function(W,be,we=!0){return isNaN(W)||W<0?null:j(be,we).find((Ce=>Ce.absoluteIndex===W))},handleNewMediaInfo:function(W){I.handleNewMediaInfo(W)},handlePendingManualQualitySwitch:function(W,be){try{const we=le(W,be);let Ce=null;if(J.has(we)&&(Ce=J.get(we)),!Ce)return!1;const ze=me[W][be],Fe=ze.getLastSegment();if(!ee(Fe,ze.getRepresentation()))return!1;const{type:We,streamInfo:lt,representation:St,reason:Nt}=Ce;return J.delete(we),de(We,lt,St,Nt),!0}catch(we){re.error(`Can not handle pending manual quality switch: ${we}`)}},initialize:function(){z=pt(b).create(),Ee=rt(b).create(),I=C(b).create({dashMetrics:R,customParametersModel:q,mediaPlayerModel:ie,settings:ce}),I.initialize(),v.on(g.default.QUALITY_CHANGE_RENDERED,Re,X),v.on(g.default.METRIC_ADDED,Ue,X),v.on(f.default.LOADING_PROGRESS,se,X),v.on(f.default.VIDEO_ELEMENT_RESIZED,Ae,X)},isPlayingAtLowestQuality:function(W){return j(W.mediaInfo,!0)[0].id===W.id},isPlayingAtTopQuality:function(W){if(!W)return!0;const be=j(W.mediaInfo,!0);return be[be.length-1].id===W.id},manuallySetPlaybackQuality:function(W,be,we,Ce={}){const ze=me[be.id][W];if(ee(ze.getLastSegment(),ze.getRepresentation()))return de(W,be,we,Ce);(function(Fe,We,lt,St){try{re.debug(`[AbrController] Queuing manual quality switch for stream ${We.id} and type ${Fe} to representation ${lt.id}`);const Nt=le(We.id,Fe);J.set(Nt,{type:Fe,streamInfo:We,representation:lt,reason:St})}catch(Nt){re.error(`Can not queue manual quality switch: ${Nt}`)}})(W,be,we,Ce)},registerStreamType:function(W,be){const we=be.getStreamInfo().id;me[we]||(me[we]={}),me[we][W]=be,w[we]||(w[we]={}),w[we][W]={},w[we][W].state=o.ALLOW_LOAD,I.getBolaState(W)===void 0&&I.setBolaState(W,ce.get().streaming.abr.rules.bolaRule.active&&!pe())},reset:function(){B(),v.off(g.default.QUALITY_CHANGE_RENDERED,Re,X),v.off(g.default.METRIC_ADDED,Ue,X),v.off(f.default.LOADING_PROGRESS,se,X),v.off(f.default.VIDEO_ELEMENT_RESIZED,Ae,X),I&&I.reset()},setConfig:function(W){W&&(W.streamController&&(fe=W.streamController),W.throughputController&&(ne=W.throughputController),W.domStorage&&(P=W.domStorage),W.mediaPlayerModel&&(ie=W.mediaPlayerModel),W.customParametersModel&&(q=W.customParametersModel),W.cmsdModel&&(N=W.cmsdModel),W.dashMetrics&&(R=W.dashMetrics),W.adapter&&(M=W.adapter),W.videoModel&&(K=W.videoModel),W.settings&&(ce=W.settings),W.capabilities&&(D=W.capabilities))},setPlaybackQuality:de,unRegisterStreamType:function(W,be){try{me[W]&&me[W][be]&&delete me[W][be],w[W]&&w[W][be]&&delete w[W][be]}catch{}}},re=y.getLogger(X),B(),X}kt.__dashjs_factory_name="AbrController";const wt=n.default.getSingletonFactory(kt);n.default.updateSingletonFactory(kt.__dashjs_factory_name,wt);var fn,Tn,Fn,In,dn,pn=wt,Pt=function(b){for(var y=[],v=0;v<b.length;++v){var w=b.charCodeAt(v);w<128?y.push(w):w<2048?(y.push(192|w>>6),y.push(128|63&w)):w<65536?(y.push(224|w>>12),y.push(128|63&w>>6),y.push(128|63&w)):(y.push(240|w>>18),y.push(128|63&w>>12),y.push(128|63&w>>6),y.push(128|63&w))}return y},At=function(b){for(var y=[],v=0;v<b.length;){var w=b[v++];w<128||(w<224?(w=(31&w)<<6,w|=63&b[v++]):w<240?(w=(15&w)<<12,w|=(63&b[v++])<<6,w|=63&b[v++]):(w=(7&w)<<18,w|=(63&b[v++])<<12,w|=(63&b[v++])<<6,w|=63&b[v++])),y.push(String.fromCharCode(w))}return y.join("")},tt={};fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tn=function(b){for(var y=0,v=[],w=0|b.length/3;0<w--;){var _=(b[y]<<16)+(b[y+1]<<8)+b[y+2];y+=3,v.push(fn.charAt(63&_>>18)),v.push(fn.charAt(63&_>>12)),v.push(fn.charAt(63&_>>6)),v.push(fn.charAt(63&_))}return b.length-y==2?(_=(b[y]<<16)+(b[y+1]<<8),v.push(fn.charAt(63&_>>18)),v.push(fn.charAt(63&_>>12)),v.push(fn.charAt(63&_>>6)),v.push("=")):b.length-y==1&&(_=b[y]<<16,v.push(fn.charAt(63&_>>18)),v.push(fn.charAt(63&_>>12)),v.push("==")),v.join("")},Fn=(function(){for(var b=[],y=0;y<64;++y)b[fn.charCodeAt(y)]=y;return b[61]=0,b})(),In=function(b){for(var y=0,v=[],w=0|b.length/4;0<w--;){var _=(Fn[b.charCodeAt(y)]<<18)+(Fn[b.charCodeAt(y+1)]<<12)+(Fn[b.charCodeAt(y+2)]<<6)+Fn[b.charCodeAt(y+3)];v.push(255&_>>16),v.push(255&_>>8),v.push(255&_),y+=4}return v&&(b.charAt(y-2)=="="?(v.pop(),v.pop()):b.charAt(y-1)=="="&&v.pop()),v},dn={encode:function(b){for(var y=[],v=0;v<b.length;++v)y.push(b.charCodeAt(v));return y},decode:function(b){for(var y=0;y<s.length;++y)a[y]=String.fromCharCode(a[y]);return a.join("")}},tt.decodeArray=function(b){var y=In(b);return new Uint8Array(y)},tt.encodeASCII=function(b){var y=dn.encode(b);return Tn(y)},tt.decodeASCII=function(b){var y=In(b);return dn.decode(y)},tt.encode=function(b){var y=Pt(b);return Tn(y)},tt.decode=function(b){var y=In(b);return At(y)},typeof exports<"u"&&(exports.decode=tt.decode,exports.decodeArray=tt.decodeArray,exports.encode=tt.encode,exports.encodeASCII=tt.encodeASCII);var ht=tt,Ut=t(7393);const Lt=NaN;class qt{constructor(y,v){this.data={baseUrls:y||null,selectedIdx:v||Lt},this.children=[]}}function en(){let b,y,v,w;const _=this.context,I=(0,Ut.default)(_).getInstance();function M(q,R,P){const z=D(P);q[R]?I.areEqual(z,q[R].data.baseUrls)||(q[R].data.baseUrls=z,q[R].data.selectedIdx=Lt):q[R]=new qt(z)}function D(q){let R=v.getBaseURLsFromElement(q);const P=w.getSynthesizedBaseUrlElements(R);return P&&P.length>0&&P.forEach((z=>{const X=R.findIndex((re=>re.serviceLocation===z.serviceLocation));X!==-1?R[X]=z:R.push(z)})),R}function N(q,R){const P=R||y;q(P.data),P.children&&P.children.forEach((z=>N(q,z)))}function $(){y=new qt}return b={reset:$,update:function(q){(function(R){(function(){if(!v||!v.hasOwnProperty("getBaseURLsFromElement")||!v.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();const P=D(R);I.areEqual(P,y.data.baseUrls)||(y.data.baseUrls=P,y.data.selectedIdx=Lt),R&&R.Period&&R.Period.forEach(((z,X)=>{M(y.children,X,z),z.AdaptationSet&&z.AdaptationSet.forEach(((re,ie)=>{M(y.children[X].children,ie,re),re.Representation&&re.Representation.sort(v.getRepresentationSortFunction()).forEach(((J,ce)=>{M(y.children[X].children[ie].children,ce,J)}))}))}))})(q)},getForPath:function(q){let R=y;const P=[R.data];return q&&q.forEach((z=>{R=R.children[z],R&&P.push(R.data)})),P.filter((z=>z.baseUrls.length))},invalidateSelectedIndexes:function(q){N((R=>{isNaN(R.selectedIdx)||q===R.baseUrls[R.selectedIdx].serviceLocation&&(R.selectedIdx=Lt)}))},setConfig:function(q){q.adapter&&(v=q.adapter),q.contentSteeringController&&(w=q.contentSteeringController)},getBaseUrls:function(q){return D(q)}},$(),b}en.__dashjs_factory_name="BaseURLTreeModel";var Rt=n.default.getClassFactory(en),Ft=t(8748);class Wt extends Ft.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var Jt=new Wt;function yt(b){let y;b=b||{};let v=[];const w=(0,m.default)(this.context).getInstance(),_=b.updateEventName,I=b.addBlacklistEventName;function M(N){v.indexOf(N)===-1&&(v.push(N),w.trigger(_,{entry:N}))}function D(N){M(N.entry)}return y={add:M,remove:function(N){const $=v.indexOf(N);$!==-1&&v.splice($,1)},contains:function(N){return!!(v.length&&N&&N.length)&&v.indexOf(N)!==-1},reset:function(){I&&w.off(I,D,y),v=[]}},I&&w.on(I,D,y),y}yt.__dashjs_factory_name="BlackListController";var Zt=n.default.getClassFactory(yt);function un(b){let y;const v=(b=b||{}).blacklistController;return y={select:function(w){return w&&(function(_){let I,M,D=0,N=[],$=0;if(M=_.sort((function(q,R){let P=q.dvbPriority-R.dvbPriority;return isNaN(P)?0:P})).filter((function(q,R,P){return!R||P[0].dvbPriority&&q.dvbPriority&&P[0].dvbPriority===q.dvbPriority})),M.length)return M.length>1&&(M.forEach((q=>{D+=q.dvbWeight,N.push(D)})),I=Math.floor(Math.random()*(D-1)),N.every(((q,R)=>($=R,!(I<q))))),M[$]})((function(_){let I=[];return _.filter((function(M){return!v.contains(M.serviceLocation)||(M.dvbPriority&&I.push(M.dvbPriority),!1)})).filter((function(M){return!I.length||!M.dvbPriority||I.indexOf(M.dvbPriority)===-1}))})(w))}},y}un.__dashjs_factory_name="DVBSelector";var jt=n.default.getClassFactory(un);function on(b){let y;const v=(b=b||{}).blacklistController;return y={select:function(w){let _,I=0;return w&&w.some(((M,D)=>(I=D,!v.contains(M.serviceLocation))))&&(_=w[I]),_}},y}on.__dashjs_factory_name="BasicSelector";var cn=n.default.getClassFactory(on),Tt=t(1944),ut=t(656),et=t(7263);function Gt(){let b,y;function v(){y&&(y.onloadend=y.onerror=y.onprogress=y.onload=null,y.abort(),y=null)}return b={load:function(w,_){if(y=null,y=new XMLHttpRequest,y.open(w.method,w.url,!0),w.responseType&&(y.responseType=w.responseType),w.headers)for(let I in w.headers){let M=w.headers[I];M&&y.setRequestHeader(I,M)}return y.withCredentials=w.credentials==="include",y.timeout=w.timeout,y.onload=function(){_.url=this.responseURL,_.status=this.status,_.statusText=this.statusText,_.headers=et.default.parseHttpHeaders(this.getAllResponseHeaders()),_.data=this.response},w.customData&&(y.onloadend=w.customData.onloadend,y.onprogress=w.customData.onprogress,y.onabort=w.customData.onabort,y.ontimeout=w.customData.ontimeout),y.send(),w.customData.abort=v.bind(this),!0},abort:v,getXhr:function(){return y},reset:function(){v(),b=null},resetInitialSettings:function(){v()}},b}Gt.__dashjs_factory_name="XHRLoader";var nn=n.default.getClassFactory(Gt);function bn(){const b=this.context,y=(0,c.default)(b).getInstance();let v,w,_;function I(R,P,z){R.customData.reader.read().then(z).catch((function(){M(R)}))}function M(R){R.customData.onloadend&&R.customData.onloadend()}function D(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function N(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch{}}function $(R,P){try{if((R=R.filter((z=>z.bytes>P/4/R.length))).length>1){let z=0;const X=(R[R.length-1].timestamp-R[0].timestamp)/R.length;return R.forEach(((re,ie)=>{const J=R[ie+1];if(J){const ce=J.timestamp-re.timestamp;z+=ce<X?ce:0}})),z}return null}catch{return null}}function q(R,P){return 8*R/P}return _=(0,l.default)(b).getInstance().getLogger(v),v={abort:N,calculateDownloadedTime:$,load:function(R,P){const z=(function(ie){const J=new Headers;if(ie.headers)for(let ce in ie.headers){let fe=ie.headers[ce];fe&&J.append(ce,fe)}return J})(R),X=(function(ie){let J;return typeof window.AbortController=="function"&&(J=new AbortController,ie.customData.abortController=J,J.signal.onabort=ie.customData.onabort),ie.customData.abort=N.bind(ie),J})(R),re=(function(ie,J,ce){return new Request(ie.url,{method:ie.method,headers:J,credentials:ie.credentials,signal:ce?ce.signal:void 0})})(R,z,X);fetch(re).then((ie=>{(function(J,ce,fe){(function(Re,Ue){Re.status=Ue.status,Re.statusText=Ue.statusText,Re.url=Ue.url;const Ne={};for(const ee of Ue.headers.keys())Ne[ee]=Ue.headers.get(ee);Re.headers=Ne})(fe,J),J.ok||ce.customData.onloadend();let me=0,Ee=!1,ne=new Uint8Array,K=0;ce.customData.reader=J.body.getReader();let B=[],j=[],Se=[],se=!0;const Ae=y.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,Te=({value:Re,done:Ue})=>{Ue?(function(){if(ne){const Ne=(function(){let ee=null;return Ae===h.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?ee=(function(){const ae=(function(de,le){try{let ue,pe;if(ue=de.slice(0,-1),pe=le.slice(0,-1),ue.length!==pe.length&&_.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${ue.length}, Mdat: ${pe.length}`),ue.length<=1)return null;let W=[],be=0,we=0;for(let Ce=0;Ce<ue.length;Ce++)if(ue[Ce]&&pe[Ce]){let ze=pe[Ce].timestamp-ue[Ce].timestamp;if(ze>1){const Fe=q(pe[Ce].bytes,ze);W.push(Fe),we=0}else{we===0&&(we=ue[Ce].timestamp,be=0);let Fe=pe[Ce].timestamp-we;if(Fe>1){be+=pe[Ce].bytes;const We=q(be,Fe);W.push(We),we=0}else be+=pe[Ce].bytes}}return W.length>0?W.reduce(((Ce,ze)=>Ce+ze),0)/W.length:null}catch{return null}})(j,Se);return ae?8*me/ae:null})():Ae===h.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(ee=$(B,me)),ee})();ce.customData.onprogress({loaded:me,total:me,lengthComputable:!0,time:Ne}),fe.data=ne.buffer}ce.customData.onloadend()})():(Re&&Re.length>0&&(function(Ne){ne=(function(ae,de){if(ae.length===0)return de;const le=new Uint8Array(ae.length+de.length);return le.set(ae),le.set(de,ae.length),le})(ne,Ne),me+=Ne.length,B.push({timestamp:D(),bytes:Ne.length}),Ae===h.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&se&&w.findLastTopIsoBoxCompleted(["moof"],ne,K).found&&(se=!1,j.push({timestamp:D()}));const ee=w.findLastTopIsoBoxCompleted(["moov","mdat"],ne,K);ee.found?(function(ae){const de=(function(le){let ue;return le===ne.length?(ue=ne,ne=new Uint8Array):(ue=new Uint8Array(ne.subarray(0,le)),ne=ne.subarray(le)),ue})(ae.startOffsetOfLastFoundTargetBox+ae.sizeOfLastFoundTargetBox);Ae!==h.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||se||(se=!0,Se.push({timestamp:D(),bytes:de.length})),ce.customData.onprogress({data:de.buffer,lengthComputable:!1,noTrace:!0}),K=0})(ee):(function(ae){K=ae.startOffsetOfLastCompletedBox+ae.sizeOfLastCompletedBox,Ee||(ce.customData.onprogress({lengthComputable:!1,noTrace:!0}),Ee=!0)})(ee)})(Re),I(ce,0,Te))};I(ce,0,Te)})(ie,R,P)})).catch((()=>{M(R)}))},reset:function(){},setConfig:function(R){w=R.boxParser}},v}bn.__dashjs_factory_name="FetchLoader";var $n=n.default.getClassFactory(bn),Hn=t(913),lr=class{constructor(){this.period=null,this.index=-1,this.id=null,this.type=null}};class tr{constructor(y,v,w,_){this.url=y||"",this.serviceLocation=v||y||"",this.dvbPriority=w||1,this.dvbWeight=_||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}tr.DEFAULT_DVB_PRIORITY=1,tr.DEFAULT_DVB_WEIGHT=1;var sr=tr,ve=t(8854),Gn=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(b){b&&(this.schemeIdUri=b.schemeIdUri?b.schemeIdUri:null,this.value=b.value!==null&&b.value!==void 0?b.value.toString():null,this.id=b.id?b.id:null,b[ve.default.DVB_URL]&&(this.dvbUrl=b[ve.default.DVB_URL]),b[ve.default.DVB_MIMETYPE]&&(this.dvbMimeType=b[ve.default.DVB_MIMETYPE]),b[ve.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=b[ve.default.DVB_FONTFAMILY]))}inArray(b){return!!b&&b.some((y=>this.schemeIdUri===y.schemeIdUri&&(this.value?this.value.toString().match(y.value):"".match(y.value))))}},rr=class extends Gn{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(b){super.init(b),b&&(this.version=b.version,this.sessionID=b.sessionID,this.contentID=b.contentID,this.mode=b.mode??"query",this.keys=b.keys?b.keys.split(" "):null,this.includeInRequests=b.includeInRequests?b.includeInRequests.split(" "):["segment"],this.schemeIdUri=b.schemeIdUri)}},Tr=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},vr=class extends Gn{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(b){super.init(b),b&&(this.ref=b.hasOwnProperty(ve.default.REF)?b[ve.default.REF]:null,this.refId=b.hasOwnProperty(ve.default.REF_ID)?b[ve.default.REF_ID]:null,this.robustness=b.hasOwnProperty(ve.default.ROBUSTNESS)?b[ve.default.ROBUSTNESS]:null,this.cencDefaultKid=b.hasOwnProperty(ve.default.CENC_DEFAULT_KID)?b[ve.default.CENC_DEFAULT_KID]:null,this.pssh=b.hasOwnProperty(ve.default.PSSH)?b[ve.default.PSSH]:null,this.pro=b.hasOwnProperty(ve.default.PRO)?b[ve.default.PRO]:null,this.laUrl=b.hasOwnProperty(ve.default.LA_URL)?b[ve.default.LA_URL]:b.hasOwnProperty(ve.default.LA_URL_LOWER_CASE)?b[ve.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(b){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach((y=>{this[y]===null&&(this[y]=b[y])}))}},Qr=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},Sr=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},Mi=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},Ta=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},qa=class{constructor(b,y){this.url=b||"",this.serviceLocation=y||null,this.queryParams={}}},fs=class{constructor(b,y,v){this.url=b||"",this.serviceLocation=y||null,this.ttl=v||NaN,this.queryParams={}}};class vi{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}vi.DEFAULT_ID="defaultId";var Oi=vi,Sa=class{constructor(){this.period=null,this.index=-1,this.id=1,this.type=null,this.tag=null,this.order="undefined",this.preselectionComponents=[]}},Ht=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},hn=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.dependencyId=null,this.dependentRepresentation=null,this.endNumber=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.segmentSequenceProperties=[],this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN}hasInitialization(){return this.initialization!==null||this.range!==null}hasSegments(){return this.segmentInfoType!==ve.default.BASE_URL&&this.segmentInfoType!==ve.default.SEGMENT_BASE&&!this.indexRange}};function An(){let b;const y=/^[a-z][a-z0-9+\-_.]*:/i,v=/^https?:\/\//i,w=/^https:\/\//i,_=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,I=(z,X)=>{try{return new window.URL(z,X).toString()}catch{return z}},M=(z,X)=>{let re=D;if(!X||!q(z))return z;R(z)&&(re=N),P(z)&&(re=$);const ie=re(X),J=ie.charAt(ie.length-1)!=="/"&&z.charAt(0)!=="/"?"/":"";return[ie,z].join(J)};function D(z){const X=z.indexOf("/"),re=z.lastIndexOf("/");return X!==-1?re===X+1?z:(z.indexOf("?")!==-1&&(z=z.substring(0,z.indexOf("?"))),z.substring(0,re+1)):""}function N(z){const X=z.match(_);return X?X[1]:""}function $(z){const X=z.match(y);return X?X[0]:""}function q(z){return!y.test(z)}function R(z){return q(z)&&z.charAt(0)==="/"}function P(z){return z.indexOf("//")===0}return(function(){try{new window.URL("x","http://y"),b=I}catch{}finally{b=b||M}})(),{parseBaseUrl:D,parseOrigin:N,parseScheme:$,isRelative:q,isPathAbsolute:R,isSchemeRelative:P,isHTTPURL:function(z){return v.test(z)},isHTTPS:function(z){return w.test(z)},removeHostname:function(z){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(z)[2].substring(1)},resolve:function(z,X){return b(z,X)}}}An.__dashjs_factory_name="DefaultURLUtils";var jn=n.default.getSingletonFactory(An);function zn(){let b,y,v=[];const w=this.context;function _(I,M,D){let N=(function($){let q;for(q=0;q<v.length;q++)if(v[q].regex.test($))return v[q].utils;return y})(D||M);return N&&typeof N[I]=="function"?N[I](M,D):y[I](M,D)}return y=jn(w).getInstance(),b={registerUrlRegex:function(I,M){v.push({regex:I,utils:M})},parseBaseUrl:function(I){return _("parseBaseUrl",I)},parseOrigin:function(I){return _("parseOrigin",I)},parseScheme:function(I){return _("parseScheme",I)},isRelative:function(I){return _("isRelative",I)},isPathAbsolute:function(I){return _("isPathAbsolute",I)},isSchemeRelative:function(I){return _("isSchemeRelative",I)},isHTTPURL:function(I){return _("isHTTPURL",I)},isHTTPS:function(I){return _("isHTTPS",I)},removeHostname:function(I){return _("removeHostname",I)},resolve:function(I,M){return _("resolve",I,M)}},b}zn.__dashjs_factory_name="URLUtils";var Zn=n.default.getSingletonFactory(zn),ir=t(5717),Xn=class{constructor(){this.cadence=1,this.sapType=0,this.event=!0,this.alignment=null}init(b){b&&(this.cadence=b.cadence===void 0||isNaN(b.cadence)?1:b.cadence,this.sapType=b.sapType===void 0||isNaN(b.sapType)?0:b.sapType,this.event=b.event===void 0||b.event,this.alignment=b.alignment!==void 0?b.alignment:null)}};function Yn(){let b,y,v,w;const _=this.context,I=Zn(_).getInstance(),M=Number.isInteger||function(ee){return typeof ee=="number"&&isFinite(ee)&&Math.floor(ee)===ee};function D(ee,ae){if(!ee)throw new Error("adaptation is not defined");if(!ae)throw new Error("type is not defined");if(ee.Representation&&ee.Representation.length){const le=Ee(ee.Representation[0]);if(le&&le.some((ue=>h.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(ue.schemeIdUri)>=0)))return ae===h.default.IMAGE}if(ee.ContentComponent&&ee.ContentComponent.length>0){if(ee.ContentComponent.length>1)return ae===h.default.MUXED;if(ee.ContentComponent[0].contentType===ae)return!0}const de=ae===h.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(ae);if(ee.Representation&&ee.Representation.length){const le=ee.Representation[0].codecs;if(de.test(le))return!0}if(ee.hasOwnProperty(ve.default.MIME_TYPE))return de.test(ee.mimeType);if(ee.Representation){let le;for(let ue=0;ue<ee.Representation.length;ue++)if(le=ee.Representation[ue],le.hasOwnProperty(ve.default.MIME_TYPE))return de.test(le.mimeType)}return!1}function N(ee){if(!ee)throw new Error("adaptation is not defined");if(ee.hasOwnProperty(ve.default.SEGMENT_TEMPLATE)||ee.hasOwnProperty(ve.default.SEGMENT_TIMELINE)||ee.hasOwnProperty(ve.default.SEGMENT_LIST)||ee.hasOwnProperty(ve.default.SEGMENT_BASE))return!0;if(ee.Representation&&ee.Representation.length>0){const ae=ee.Representation[0];if(ae.hasOwnProperty(ve.default.SEGMENT_TEMPLATE)||ae.hasOwnProperty(ve.default.SEGMENT_TIMELINE)||ae.hasOwnProperty(ve.default.SEGMENT_LIST)||ae.hasOwnProperty(ve.default.SEGMENT_BASE))return!0}return!1}function $(ee){return D(ee,h.default.TEXT)}function q(ee){return ee&&ee.Representation&&ee.Representation.sort(((ae,de)=>ae.bandwidth-de.bandwidth)),ee}function R(ee,ae){return ee&&ee.Period&&M(ae)&&ee.Period[ae]?ee.Period[ae].AdaptationSet:[]}function P(ee){return ee&&ee.Period?ee.Period:[]}function z(ee,ae,de){let le=null;if(ee&&ee.Representation&&ee.Representation.length>0){const ue=M(ae)&&ae>=0&&ae<ee.Representation.length?ee.Representation[ae]:ee.Representation[0];ue&&(le=ue.mimeType+';codecs="'+ue.codecs+'"',de&&ue.width!==void 0&&(le+=';width="'+ue.width+'";height="'+ue.height+'"'))}return le&&(le=le.replace(/\sprofiles=[^;]*/g,"")),le}function X(ee){const ae=re(ee);return ae&&ae.length>0}function re(ee){let ae=[];if(!ee)return ae;const de=ie(ee);return ae=ae.concat(de),ee.hasOwnProperty(ve.default.ADAPTATION_SET)&&ee[ve.default.ADAPTATION_SET].length>0&&ee[ve.default.ADAPTATION_SET].forEach((le=>{const ue=ie(le);ae=ae.concat(ue)})),ae}function ie(ee){return ee&&ee.hasOwnProperty(ve.default.CONTENT_PROTECTION)&&ee.ContentProtection.length!==0?ee[ve.default.CONTENT_PROTECTION].map((ae=>{const de=new vr;return de.init(ae),de})):[]}function J(ee){let ae=!1;return ee&&ee.hasOwnProperty("type")&&(ae=ee.type===ve.default.DYNAMIC),ae}function ce(ee){if(!ee)return null;const ae=ee[ve.default.FRAMERATE];if(!ae)return null;if(typeof ae=="string"&&ae.includes("/")){const[de,le]=ae.split("/").map((ue=>parseInt(ue,10)));if(!isNaN(de)&&!isNaN(le)&&le!==0)return de/le}return parseInt(ae)}function fe(ee,ae){return ae&&ae.hasOwnProperty(ee)&&ae[ee].length?ae[ee].map((de=>{const le=new Gn;return le.init(de),le})):[]}function me(ee,ae){if(!ae)return[];let de=(function(le,ue){if(!ue||!ue.length)return[];let pe=ue[0][le]||[];return pe.length===0?[]:ue.length===1?pe:pe.filter((W=>ue.slice(1).every((be=>be.hasOwnProperty(le)&&be[le].some((we=>we.schemeIdUri===W.schemeIdUri&&we.value===W.value))))))})(ee,ae[ve.default.REPRESENTATION]);return ae.hasOwnProperty(ee)&&ae[ee].length&&de.push(...ae[ee]),de.map((le=>{const ue=new Gn;return ue.init(le),ue}))}function Ee(ee){return fe(ve.default.ESSENTIAL_PROPERTY,ee)}function ne(ee){return fe(ve.default.SUPPLEMENTAL_PROPERTY,ee)}function K(ee){return ee&&ee.hasOwnProperty(ve.default.SEGMENT_SEQUENCE_PROPERTIES)&&ee[ve.default.SEGMENT_SEQUENCE_PROPERTIES].length?ee[ve.default.SEGMENT_SEQUENCE_PROPERTIES].map((ae=>{const de=new Xn(ae);return de.init(ae),de})):[]}function B(ee,ae,de,le,ue,pe){const W=new hn;(function(Ce,ze,Fe,We,lt){if(Ce.index=lt,Ce.adaptation=Fe,Ce.mediaInfo=We,ze.hasOwnProperty(ve.default.ID)&&(Ce.id=ze.id),ze.hasOwnProperty(ve.default.CODECS)&&(Ce.codecs=ze.codecs,Ce.codecFamily=et.default.getCodecFamily(Ce.codecs)),ze.hasOwnProperty(ve.default.DEPENDENCY_ID)){const St=ze[ve.default.DEPENDENCY_ID].toString().split(" ")[0];Ce.dependencyId=St,Ce.dependentRepresentation=new hn,Ce.dependentRepresentation.id=St}ze.hasOwnProperty(ve.default.MIME_TYPE)&&(Ce.mimeType=ze[ve.default.MIME_TYPE]),ze.hasOwnProperty(ve.default.CODEC_PRIVATE_DATA)&&(Ce.codecPrivateData=ze.codecPrivateData),ze.hasOwnProperty(ve.default.BANDWITH)&&(Ce.bandwidth=ze.bandwidth,Ce.bitrateInKbit=ze.bandwidth/1e3),ze.hasOwnProperty(ve.default.WIDTH)&&(Ce.width=ze.width),ze.hasOwnProperty(ve.default.HEIGHT)&&(Ce.height=ze.height),ze.hasOwnProperty(ve.default.SCAN_TYPE)&&(Ce.scanType=ze.scanType),ze.hasOwnProperty(ve.default.FRAMERATE)&&(Ce.frameRate=ce(ze)),ze.hasOwnProperty(ve.default.QUALITY_RANKING)&&(Ce.qualityRanking=ze[ve.default.QUALITY_RANKING]),ze.hasOwnProperty(ve.default.MAX_PLAYOUT_RATE)&&(Ce.maxPlayoutRate=ze.maxPlayoutRate),Ce.essentialProperties=Ee(ze),Ce.supplementalProperties=ne(ze),Ce.segmentSequenceProperties=K(ze),Ce.path=[Fe.period.index,Fe.index,lt]})(W,ae,de,ee,pe);const{segmentInfo:be,segmentInfoType:we}=(function(Ce){let ze,Fe;return Ce.hasOwnProperty(ve.default.SEGMENT_BASE)?(ze=Ce.SegmentBase,Fe=ve.default.SEGMENT_BASE):Ce.hasOwnProperty(ve.default.SEGMENT_LIST)?(ze=Ce.SegmentList,Fe=ze.hasOwnProperty(ve.default.SEGMENT_TIMELINE)?ve.default.SEGMENT_TIMELINE:ve.default.SEGMENT_LIST):Ce.hasOwnProperty(ve.default.SEGMENT_TEMPLATE)?(ze=Ce.SegmentTemplate,Fe=ze.hasOwnProperty(ve.default.SEGMENT_TIMELINE)?ve.default.SEGMENT_TIMELINE:ve.default.SEGMENT_TEMPLATE):Fe=ve.default.BASE_URL,{segmentInfo:ze,segmentInfoType:Fe}})(ae);return W.segmentInfoType=we,(function(Ce,ze,Fe,We,lt,St){if(Ce){if(Ce.hasOwnProperty(ve.default.INITIALIZATION_MINUS)&&(Fe.initialization=Ce.initialization.split("$Bandwidth$").join(lt.bandwidth).split("$RepresentationID$").join(lt.id)),Ce.hasOwnProperty(ve.default.INITIALIZATION)){const Nt=Ce.Initialization;Nt.hasOwnProperty(ve.default.SOURCE_URL)&&(Fe.initialization=Nt.sourceURL),Nt.hasOwnProperty(ve.default.RANGE)&&(Fe.range=Nt.range)}else $(We)&&N(We)&&We.mimeType&&We.mimeType.indexOf("application/mp4")===-1&&(Fe.range=0);Ce.hasOwnProperty(ve.default.TIMESCALE)&&(Fe.timescale=Ce.timescale),Ce.hasOwnProperty(ve.default.DURATION)?Fe.segmentDuration=Ce.duration/Fe.timescale:ze===ve.default.SEGMENT_TIMELINE&&(Fe.segmentDuration=(function(Nt){if(!Nt||!Nt.S)return NaN;let ln=Nt.S[0],Mt=Nt.S[1];return ln.hasOwnProperty("d")?ln.d:Mt.t-ln.t})(Ce.SegmentTimeline)/Fe.timescale),Ce.hasOwnProperty(ve.default.MEDIA)&&(Fe.media=Ce.media),Ce.hasOwnProperty(ve.default.START_NUMBER)&&(Fe.startNumber=parseInt(Ce.startNumber)),Ce.hasOwnProperty(ve.default.INDEX_RANGE)&&(Fe.indexRange=Ce.indexRange),Ce.hasOwnProperty(ve.default.PRESENTATION_TIME_OFFSET)&&(Fe.presentationTimeOffset=Ce.presentationTimeOffset/Fe.timescale),Ce.hasOwnProperty(ve.default.AVAILABILITY_TIME_OFFSET)?Fe.availabilityTimeOffset=Ce.availabilityTimeOffset:St&&St.availabilityTimeOffset!==void 0&&(Fe.availabilityTimeOffset=St.availabilityTimeOffset),Ce.hasOwnProperty(ve.default.AVAILABILITY_TIME_COMPLETE)?Fe.availabilityTimeComplete=Ce.availabilityTimeComplete!=="false":St&&St.availabilityTimeComplete!==void 0&&(Fe.availabilityTimeComplete=St.availabilityTimeComplete),Ce.hasOwnProperty(ve.default.END_NUMBER)&&(Fe.endNumber=Ce[ve.default.END_NUMBER]),Fe.mseTimeOffset=(function(Nt){const ln=Nt.presentationTimeOffset;return Nt.adaptation.period.start-ln})(Fe)}})(be,we,W,le,ae,ue),(function(Ce){isNaN(Ce.width)||isNaN(Ce.height)||isNaN(Ce.frameRate)||(Ce.pixelsPerSecond=Math.max(1,Ce.width*Ce.height*Ce.frameRate),isNaN(Ce.bandwidth)||(Ce.bitsPerPixel=Ce.bandwidth/Ce.pixelsPerSecond))})(W),W}function j(ee){return D(ee,h.default.MUXED)?h.default.MUXED:D(ee,h.default.AUDIO)?h.default.AUDIO:(function(ae){return D(ae,h.default.VIDEO)})(ee)?h.default.VIDEO:$(ee)?h.default.TEXT:(function(ae){return D(ae,h.default.IMAGE)})(ee)?h.default.IMAGE:(y.warn("Unknown Preselection stream type"),null)}function Se(ee,ae){if(ee&&ee.hasOwnProperty(ve.default.PRESELECTION_COMPONENTS)&&Array.isArray(ae))return String(ee.preselectionComponents).split(" ").map((de=>ae.find((le=>le.id===de))))}function se(ee,ae){if(!ee||!ee.hasOwnProperty(ve.default.PRESELECTION_COMPONENTS)||!Array.isArray(ae))return;const de=String(ee.preselectionComponents).split(" ");return ae.find((le=>le.id===de[0]))}function Ae(ee,ae){if(!ee)throw new Error("Period cannot be null or undefined");let de=Oi.DEFAULT_ID+"_"+ae;return ee.hasOwnProperty(ve.default.ID)&&ee.id.toString().length>0&&ee.id!=="__proto__"&&(de=ee.id.toString()),de}function Te(ee,ae,de){const le=[];let ue;if(!ee)return le;for(ue=0;ue<ee.length;ue++){const pe=new Mi;if(pe.timescale=1,pe.representation=ae,!ee[ue].hasOwnProperty(h.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");pe.schemeIdUri=ee[ue].schemeIdUri,ee[ue].hasOwnProperty(ve.default.TIMESCALE)&&(pe.timescale=ee[ue].timescale),ee[ue].hasOwnProperty(ve.default.VALUE)&&(pe.value=ee[ue].value),le.push(pe),pe.period=de}return le}function Re(ee){const ae=[],de=ee.BaseURL||[ee.baseUri];let le=!1;return de.some((ue=>{if(ue){const pe=new sr;let W=ue.__text||ue;return I.isRelative(W)&&(le=!0,ee.baseUri&&(W=I.resolve(W,ee.baseUri))),pe.url=W,ue.hasOwnProperty(ve.default.SERVICE_LOCATION)&&ue.serviceLocation.length?pe.serviceLocation=ue.serviceLocation:pe.serviceLocation=W,ue.hasOwnProperty(ve.default.DVB_PRIORITY)&&(pe.dvbPriority=ue[ve.default.DVB_PRIORITY]),ue.hasOwnProperty(ve.default.DVB_WEIGHT)&&(pe.dvbWeight=ue[ve.default.DVB_WEIGHT]),ue.hasOwnProperty(ve.default.AVAILABILITY_TIME_OFFSET)&&(pe.availabilityTimeOffset=ue[ve.default.AVAILABILITY_TIME_OFFSET]),ue.hasOwnProperty(ve.default.AVAILABILITY_TIME_COMPLETE)&&(pe.availabilityTimeComplete=ue[ve.default.AVAILABILITY_TIME_COMPLETE]!=="false"),ae.push(pe),le}})),ae}function Ue(ee){const ae=new Qr;return ae.serverUrl=ee.__text,ee.hasOwnProperty(ve.default.DEFAULT_SERVICE_LOCATION)&&(ae.defaultServiceLocation=ee[ve.default.DEFAULT_SERVICE_LOCATION],ae.defaultServiceLocationArray=ae.defaultServiceLocation.split(" ")),ee.hasOwnProperty(ve.default.QUERY_BEFORE_START)&&(ae.queryBeforeStart=ee[ve.default.QUERY_BEFORE_START].toLowerCase()==="true"),ee.hasOwnProperty(ve.default.CLIENT_REQUIREMENT)&&(ae.clientRequirement=ee[ve.default.CLIENT_REQUIREMENT].toLowerCase()!=="false"),ae}function Ne(ee){const ae=new Tr;return ee.hasOwnProperty(ve.default.CMCD_PARAMETERS)&&ee[ve.default.CMCD_PARAMETERS].schemeIdUri===h.default.CTA_5004_2023_SCHEME&&(ae.cmcdParameters=new rr,ae.cmcdParameters.init(ee[ve.default.CMCD_PARAMETERS])),ee.hasOwnProperty(ve.default.SERVICE_LOCATIONS)&&ee[ve.default.SERVICE_LOCATIONS]!==""&&(ae.serviceLocations=ee[ve.default.SERVICE_LOCATIONS],ae.serviceLocationsArray=ae.serviceLocations.toString().split(" ")),ee.hasOwnProperty(ve.default.ADAPTATION_SETS)&&ee[ve.default.ADAPTATION_SETS]!==""&&(ae.adaptationSets=ee[ve.default.ADAPTATION_SETS],ae.adaptationSetsArray=ae.adaptationSets.toString().split(" ")),ae}return b={getAccessibilityForAdaptation:function(ee){return ee&&ee.hasOwnProperty(ve.default.ACCESSIBILITY)&&ee[ve.default.ACCESSIBILITY].length?ee[ve.default.ACCESSIBILITY].map((ae=>{const de=new Gn;return de.init(ae),de})):[]},getAdaptationForId:function(ee,ae,de){const le=R(ae,de);let ue,pe;for(ue=0,pe=le.length;ue<pe;ue++)if(le[ue].hasOwnProperty(ve.default.ID)&&le[ue].id===ee)return le[ue];return null},getAdaptationForIndex:function(ee,ae,de){const le=R(ae,de);return le.length>0&&M(ee)?le[ee]:null},getAdaptationsForPeriod:function(ee){const ae=ee&&M(ee.index)?ee.mpd.manifest.Period[ee.index]:null,de=[];let le,ue,pe;if(ae&&ae.AdaptationSet)for(pe=0;pe<ae.AdaptationSet.length;pe++)ue=ae.AdaptationSet[pe],le=new lr,ue.hasOwnProperty(ve.default.ID)&&(le.id=ue.id),le.index=pe,le.period=ee,le.type=j(ue),de.push(le);return de},getAdaptationsForType:function(ee,ae,de){const le=R(ee,ae);let ue,pe;const W=[];for(ue=0,pe=le.length;ue<pe;ue++)D(le[ue],de)&&W.push(q(le[ue]));return W},getAudioChannelConfigurationForAdaptation:function(ee){return ee&&ee.hasOwnProperty(ve.default.AUDIO_CHANNEL_CONFIGURATION)&&ee[ve.default.AUDIO_CHANNEL_CONFIGURATION].length?ee[ve.default.AUDIO_CHANNEL_CONFIGURATION].map((ae=>{const de=new Gn;return de.init(ae),de})):[]},getAudioChannelConfigurationForRepresentation:function(ee){return ee&&ee.hasOwnProperty(ve.default.AUDIO_CHANNEL_CONFIGURATION)&&ee[ve.default.AUDIO_CHANNEL_CONFIGURATION].length?ee[ve.default.AUDIO_CHANNEL_CONFIGURATION].map((ae=>{const de=new Gn;return de.init(ae),de})):[]},getAvailabilityStartTime:function(ee){return ee&&ee.hasOwnProperty(ve.default.AVAILABILITY_START_TIME)&&ee.availabilityStartTime!==null?ee.availabilityStartTime.getTime():null},getBandwidth:function(ee){return ee&&ee.bandwidth?ee.bandwidth:NaN},getBaseURLsFromElement:Re,getBitrateListForAdaptation:function(ee){const ae=q(ee);return(ae&&ae.Representation?ae.Representation:[]).map((de=>({bandwidth:de.bandwidth,width:de.width||0,height:de.height||0,scanType:de.scanType||null,id:de.id||null})))},getCodec:z,getCodecForPreselection:function(ee,ae,de){let le=null;if(ee&&ae){let ue=z(se(ee,ae),0,de);if(ee.hasOwnProperty(ve.default.CODECS)){let pe=ee.codecs;le=ue.replace(/(codecs=")[^"]*(")/,`$1${pe}$2`),y.info("Preselection has own codecs-attribute: replacing in MainAdaptationSet (was: "+ue+"), new Preselection codec is: "+le)}else le=ue}return le},getCombinedEssentialPropertiesForAdaptationSet:function(ee){return me(ve.default.ESSENTIAL_PROPERTY,ee)},getCombinedSupplementalPropertiesForAdaptationSet:function(ee){return me(ve.default.SUPPLEMENTAL_PROPERTY,ee)},getContentProtectionByAdaptation:function(ee){return ie(ee)},getContentProtectionByManifest:function(ee){let ae=[];if(!ee)return ae;const de=ie(ee);return ae=ae.concat(de),ee.hasOwnProperty(ve.default.PERIOD)&&ee[ve.default.PERIOD].length>0&&ee[ve.default.PERIOD].forEach((le=>{const ue=re(le);ae=ae.concat(ue)})),ae},getContentProtectionByPeriod:re,getContentSteering:function(ee){if(ee&&ee.hasOwnProperty(ve.default.CONTENT_STEERING))return Ue(ee[ve.default.CONTENT_STEERING][0])},getDuration:function(ee){let ae;return ae=ee&&ee.hasOwnProperty(ve.default.MEDIA_PRESENTATION_DURATION)?ee.mediaPresentationDuration:ee&&ee.type==="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,ae},getEssentialProperties:Ee,getEventStreamForAdaptationSet:function(ee,ae,de){let le,ue,pe;return ee&&ee.Period&&ae&&ae.period&&M(ae.period.index)&&(ue=ee.Period[ae.period.index],ue&&ue.AdaptationSet&&M(ae.index)&&(pe=ue.AdaptationSet[ae.index],pe&&(le=pe.InbandEventStream))),Te(le,null,de)},getEventStreamForRepresentation:function(ee,ae,de){let le,ue,pe,W;return ee&&ee.Period&&ae&&ae.adaptation&&ae.adaptation.period&&M(ae.adaptation.period.index)&&(ue=ee.Period[ae.adaptation.period.index],ue&&ue.AdaptationSet&&M(ae.adaptation.index)&&(pe=ue.AdaptationSet[ae.adaptation.index],pe&&pe.Representation&&M(ae.index)&&(W=pe.Representation[ae.index],W&&(le=W.InbandEventStream)))),Te(le,ae,de)},getEventsForPeriod:function(ee){const ae=ee&&ee.mpd&&ee.mpd.manifest?ee.mpd.manifest:null,de=ae?ae.Period:null,le=de&&ee&&M(ee.index)?de[ee.index].EventStream:null,ue=[];let pe,W;if(le)for(pe=0;pe<le.length;pe++){const be=new Mi;if(be.period=ee,be.timescale=1,!le[pe].hasOwnProperty(h.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(be.schemeIdUri=le[pe][h.default.SCHEME_ID_URI],le[pe].hasOwnProperty(ve.default.TIMESCALE)&&(be.timescale=le[pe][ve.default.TIMESCALE]),le[pe].hasOwnProperty(ve.default.VALUE)&&(be.value=le[pe][ve.default.VALUE]),le[pe].hasOwnProperty(ve.default.PRESENTATION_TIME_OFFSET)&&(be.presentationTimeOffset=le[pe][ve.default.PRESENTATION_TIME_OFFSET]),W=0;le[pe].Event&&W<le[pe].Event.length;W++){const we=le[pe].Event[W],Ce=new Sr;Ce.presentationTime=0,Ce.eventStream=be,we.hasOwnProperty(ve.default.PRESENTATION_TIME)&&(Ce.presentationTime=we.presentationTime);const ze=be.presentationTimeOffset?be.presentationTimeOffset/be.timescale:0;Ce.calculatedPresentationTime=Ce.presentationTime/be.timescale+ee.start-ze,we.hasOwnProperty(ve.default.DURATION)&&(Ce.duration=we.duration/be.timescale),we.hasOwnProperty(ve.default.ID)?Ce.id=parseInt(we.id):Ce.id=null,we.Signal&&we.Signal.Binary&&we.Signal.Binary.__text?Ce.messageData=w.decodeArray(we.Signal.Binary.__text.toString()):Ce.messageData=we.messageData||we.__cdata||we.__text,ue.push(Ce)}}return ue},getFramerate:ce,getId:function(ee){return ee&&ee[ve.default.ID]||null},getIndexForAdaptation:function(ee,ae,de){if(!ee)return-1;const le=R(ae,de);for(let ue=0;ue<le.length;ue++)if((0,Ut.default)(_).getInstance().areEqual(le[ue],ee))return ue;return-1},getIsDynamic:J,getIsFragmented:N,getIsText:$,getIsTypeOf:D,getLabelsForAdaptation:function(ee){if(!ee||!ee.Label)return[];const ae=[];for(let de=0;de<ee.Label.length;de++)ae.push({lang:ee.Label[de].lang,text:ee.Label[de].__text||ee.Label[de]});return ae},getLanguageForAdaptation:function(ee){let ae="";return ee&&ee.hasOwnProperty(ve.default.LANG)&&(ae=ee.lang),ae},getLocation:function(ee){return ee&&ee.hasOwnProperty(ve.default.LOCATION)?ee[ve.default.LOCATION].map((ae=>{const de=ae.__text||ae,le=ae.hasOwnProperty(ve.default.SERVICE_LOCATION)?ae[ve.default.SERVICE_LOCATION]:null;return new qa(de,le)})):[]},getMainAdaptationSetForPreselection:se,getCommonRepresentationForPreselection:function(ee,ae){if(!ee||!Array.isArray(ae))return;const de=se(ee,ae);return de?de.Representation[0]:void 0},getManifestUpdatePeriod:function(ee,ae=0){let de=NaN;return ee&&ee.hasOwnProperty(ve.default.MINIMUM_UPDATE_PERIOD)&&(de=ee.minimumUpdatePeriod),isNaN(de)?de:Math.max(de-ae,1)},getMimeType:function(ee){return ee&&ee.Representation&&ee.Representation.length>0?ee.Representation[0].mimeType:null},getMpd:function(ee){const ae=new Ta;return ee&&(ae.manifest=ee,ee.hasOwnProperty(ve.default.AVAILABILITY_START_TIME)?ae.availabilityStartTime=new Date(ee.availabilityStartTime.getTime()):ee.loadedTime&&(ae.availabilityStartTime=new Date(ee.loadedTime.getTime())),ee.hasOwnProperty(ve.default.AVAILABILITY_END_TIME)&&(ae.availabilityEndTime=new Date(ee.availabilityEndTime.getTime())),ee.hasOwnProperty(ve.default.MINIMUM_UPDATE_PERIOD)&&(ae.minimumUpdatePeriod=ee.minimumUpdatePeriod),ee.hasOwnProperty(ve.default.MEDIA_PRESENTATION_DURATION)&&(ae.mediaPresentationDuration=ee.mediaPresentationDuration),ee.hasOwnProperty(ve.default.SUGGESTED_PRESENTATION_DELAY)&&(ae.suggestedPresentationDelay=ee.suggestedPresentationDelay),ee.hasOwnProperty(ve.default.TIMESHIFT_BUFFER_DEPTH)&&(ae.timeShiftBufferDepth=ee.timeShiftBufferDepth),ee.hasOwnProperty(ve.default.MAX_SEGMENT_DURATION)&&(ae.maxSegmentDuration=ee.maxSegmentDuration),ee.hasOwnProperty(ve.default.PUBLISH_TIME)&&(ae.publishTime=new Date(ee.publishTime))),ae},getPatchLocation:function(ee){return ee&&ee.hasOwnProperty(ve.default.PATCH_LOCATION)?ee[ve.default.PATCH_LOCATION].map((ae=>{const de=ae.__text||ae,le=ae.hasOwnProperty(ve.default.SERVICE_LOCATION)?ae[ve.default.SERVICE_LOCATION]:null;let ue=ae.hasOwnProperty(ve.default.TTL)?1e3*parseFloat(ae[ve.default.TTL]):NaN;return new fs(de,le,ue)})):[]},getPreselectionIsTypeOf:function(ee,ae,de){if(!ee)throw new Error("preselection is not defined");if(!ae)throw new Error("adaptations is not defined");if(!de)throw new Error("type is not defined");const le=se(ee,ae);return!!le&&D(le,de)},getPreselectionsForPeriod:function(ee){const ae=ee&&M(ee.index)?ee.mpd.manifest.Period[ee.index]:null,de=[];let le,ue,pe;if(ae&&ae.Preselection)for(pe=0;pe<ae.Preselection.length;pe++){ue=ae.Preselection[pe],le=new Sa;const W=Se(ue,ae.AdaptationSet);W.every((be=>!!be))&&W.length===1?(ue.hasOwnProperty(ve.default.ID)&&(le.id=ue.id),le.index=pe,le.period=ee,ue.hasOwnProperty(ve.default.TAG)&&(le.tag=ue.tag),ue.hasOwnProperty(ve.default.PRESELECTION_COMPONENTS)?le.preselectionComponents=W:y.warn("Preselection (index: "+le.index+") missing component(s)"),ue.hasOwnProperty(ve.default.ORDER)&&(le.order=ue.order),le.type=j(W[0]),de.push(le)):y.warn("Preselection removed because we don't support multi-representation preselections or not all components available.")}return de},getProducerReferenceTimesForAdaptation:function(ee){const ae=ee&&ee.hasOwnProperty(ve.default.PRODUCER_REFERENCE_TIME)?ee[ve.default.PRODUCER_REFERENCE_TIME]:[];(ee&&ee.hasOwnProperty(ve.default.REPRESENTATION)?ee[ve.default.REPRESENTATION]:[]).forEach((le=>{le.hasOwnProperty(ve.default.PRODUCER_REFERENCE_TIME)&&ae.push(...le[ve.default.PRODUCER_REFERENCE_TIME])}));const de=[];return ae.forEach((le=>{const ue=new Ht;le.hasOwnProperty(ve.default.ID)&&(ue[ve.default.ID]=parseInt(le[ve.default.ID]),le.hasOwnProperty(ve.default.WALL_CLOCK_TIME)&&(ue[ve.default.WALL_CLOCK_TIME]=le[ve.default.WALL_CLOCK_TIME],le.hasOwnProperty(ve.default.PRESENTATION_TIME)&&(ue[ve.default.PRESENTATION_TIME]=le[ve.default.PRESENTATION_TIME],le.hasOwnProperty(ve.default.INBAND)&&(ue[ve.default.INBAND]=le[ve.default.INBAND]!=="false"),le.hasOwnProperty(ve.default.TYPE)&&(ue[ve.default.TYPE]=le[ve.default.TYPE]),de.push(ue))))})),de},getPublishTime:function(ee){return ee&&ee.hasOwnProperty(ve.default.PUBLISH_TIME)?new Date(ee[ve.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(ee,ae){const de=P(ae);return de.length>0&&M(ee)?de[ee]:null},getRealPeriods:P,getRegularPeriods:function(ee){const ae=!!ee&&J(ee.manifest),de=[];let le,ue,pe=null,W=null,be=null,we=null;for(ue=0,le=ee&&ee.manifest&&ee.manifest.Period?ee.manifest.Period.length:0;ue<le;ue++)W=ee.manifest.Period[ue],W.hasOwnProperty(ve.default.START)?(we=new Oi,we.start=W.start):pe!==null&&pe.hasOwnProperty(ve.default.DURATION)&&be!==null?(we=new Oi,we.start=parseFloat((be.start+be.duration).toFixed(5))):ue!==0||ae||(we=new Oi,we.start=0),be!==null&&isNaN(be.duration)&&(we!==null?be.duration=parseFloat((we.start-be.start).toFixed(5)):y.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),we!==null&&(we.id=Ae(W,ue),we.index=ue,we.mpd=ee,we.isEncrypted=X(W),W.hasOwnProperty(ve.default.DURATION)&&(we.duration=W.duration),be&&(be.nextPeriodId=we.id),de.push(we),pe=W,be=we),W=null,we=null;return de.length===0||be!==null&&isNaN(be.duration)&&(be.duration=parseFloat(((function(Ce){(function(){if(!v||!v.hasOwnProperty("error"))throw new Error(h.default.MISSING_CONFIG_ERROR)})();const ze=J(Ce.mpd.manifest);let Fe;return Ce.mpd.manifest.mediaPresentationDuration?Fe=Ce.mpd.manifest.mediaPresentationDuration:Ce.duration?Fe=Ce.duration:ze?Fe=Number.POSITIVE_INFINITY:v.error(new Tt.default(Jt.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",Ce)),Fe})(be)-be.start).toFixed(5))),de},getRepresentationCount:function(ee){return ee&&ee.Representation?ee.Representation.length:0},getRepresentationFor:function(ee,ae){return ae&&ae.Representation&&ae.Representation.length>0&&M(ee)?ae.Representation[ee]:null},getRepresentationSortFunction:function(){return(ee,ae)=>ee.bandwidth-ae.bandwidth},getRepresentationsForAdaptation:function(ee,ae){const de=[],le=(function(pe){if(pe&&pe.period&&M(pe.period.index)){const W=pe.period.mpd.manifest.Period[pe.period.index];if(W&&W.AdaptationSet&&M(pe.index))return q(W.AdaptationSet[pe.index])}})(ee);let ue;if(le&&le.Representation){if(ee&&ee.period&&M(ee.period.index)){const pe=Re(ee.period.mpd.manifest);pe&&(ue=pe[0])}for(let pe=0,W=le.Representation.length;pe<W;++pe){const be=B(ae,le.Representation[pe],ee,le,ue,pe);de.push(be)}}return de},getRolesForAdaptation:function(ee){return ee&&ee.hasOwnProperty(ve.default.ROLE)&&ee[ve.default.ROLE].length?ee[ve.default.ROLE].map((ae=>{ae.schemeIdUri===h.default.DASH_ROLE_SCHEME_ID&&ae.value==="Main"&&(ae.value=ve.default.MAIN);const de=new Gn;return de.init(ae),de})):[]},getSegmentAlignment:function(ee){return!(!ee||!ee.hasOwnProperty(ve.default.SEGMENT_ALIGNMENT))&&ee[ve.default.SEGMENT_ALIGNMENT]==="true"},getSegmentSequencePropertiesForAdaptationSet:function(ee){const ae=[];return ee&&(ae.push(...K(ee)),ee.Representation&&ee.Representation.length&&ee.Representation.forEach((de=>{ae.push(...K(de))}))),ae},getSelectionPriority:function(ee){try{const ae=ee&&ee.selectionPriority!==void 0?parseInt(ee.selectionPriority):1;return isNaN(ae)?1:ae}catch{return 1}},getServiceDescriptions:function(ee){const ae=[];if(ee&&ee.hasOwnProperty(ve.default.SERVICE_DESCRIPTION))for(const de of ee.ServiceDescription){let le=null,ue=null,pe=null,W=null,be=null,we=null,Ce=null,ze=null;for(const Fe in de)if(de.hasOwnProperty(Fe))if(Fe===ve.default.ID)le=de[Fe];else if(Fe===ve.default.SERVICE_DESCRIPTION_SCOPE)ue=de[Fe].schemeIdUri;else if(Fe===ve.default.SERVICE_DESCRIPTION_LATENCY)pe={target:parseInt(de[Fe].target),max:parseInt(de[Fe].max),min:parseInt(de[Fe].min),referenceId:parseInt(de[Fe].referenceId)};else if(Fe===ve.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)W={max:parseFloat(de[Fe].max),min:parseFloat(de[Fe].min)};else if(Fe===ve.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)be={mediaType:de[Fe].mediaType,max:parseInt(de[Fe].max),min:parseInt(de[Fe].min),target:parseInt(de[Fe].target),type:de[Fe].type,maxQualityDifference:parseInt(de[Fe].maxQualityDifference)};else if(Fe===ve.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)we={mediaType:de[Fe].mediaType,max:parseInt(de[Fe].max),min:parseInt(de[Fe].min),target:parseInt(de[Fe].target)};else if(Fe===ve.default.CONTENT_STEERING){let We=de[Fe];We=Array.isArray(We)?We.at(We.length-1):We,Ce=Ue(We)}else Fe===ve.default.CLIENT_DATA_REPORTING&&(ze=Ne(de[Fe]));ae.push({id:le,schemeIdUri:ue,latency:pe,playbackRate:W,operatingQuality:be,operatingBandwidth:we,contentSteering:Ce,clientDataReporting:ze})}return ae},getSubSegmentAlignment:function(ee){return!(!ee||!ee.hasOwnProperty(ve.default.SUB_SEGMENT_ALIGNMENT))&&ee[ve.default.SUB_SEGMENT_ALIGNMENT]==="true"},getSuggestedPresentationDelay:function(ee){return ee&&ee.hasOwnProperty(ve.default.SUGGESTED_PRESENTATION_DELAY)?ee.suggestedPresentationDelay:null},getSupplementalProperties:ne,getUTCTimingSources:function(ee){const ae=J(ee),de=!!ee&&ee.hasOwnProperty(ve.default.AVAILABILITY_START_TIME),le=ee?ee.UTCTiming:null,ue=[];return(ae||de)&&le&&le.forEach((function(pe){const W=new ir.default;pe.hasOwnProperty(h.default.SCHEME_ID_URI)&&(W.schemeIdUri=pe.schemeIdUri,pe.hasOwnProperty(ve.default.VALUE)&&(W.value=pe.value.toString(),ue.push(W)))})),ue},getViewpointForAdaptation:function(ee){return ee&&ee.hasOwnProperty(ve.default.VIEWPOINT)&&ee[ve.default.VIEWPOINT].length?ee[ve.default.VIEWPOINT].map((ae=>{const de=new Gn;return de.init(ae),de})):[]},hasProfile:function(ee,ae){let de=!1;return ee&&ee.profiles&&ee.profiles.length>0&&(de=ee.profiles.indexOf(ae)!==-1),de},isPeriodEncrypted:X,setConfig:function(ee){ee&&(ee.errHandler&&(v=ee.errHandler),ee.BASE64&&(w=ee.BASE64))}},y=(0,l.default)(_).getInstance().getLogger(b),b}Yn.__dashjs_factory_name="DashManifestModel";var Vn=n.default.getSingletonFactory(Yn);const ar="utf-16",si="utf-16be",oi="utf-16le",li="utf-8";function gn(b,y){if(b<0)return-gn(-b,y);const v=Math.pow(10,y);if(Math.abs(b*v%1-.5)<Number.EPSILON){const w=Math.floor(b*v);return(w%2==0?w:w+1)/v}return Math.round(b*v)/v}const Jn=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g;function Ti(b){return b.indexOf("&")===-1?b:b.replace(Jn,(y=>{switch(y){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'";case"&nbsp;":return"";case"&lrm;":return"";case"&rlm;":return"";default:if(y[1]==="#"){const v=y[2]==="x"||y[2]==="X"?parseInt(y.slice(3),16):parseInt(y.slice(2),10);return String.fromCodePoint(v)}return y}}))}var Hr=class Ah{constructor(y,v){Array.isArray(y)&&(y=y.map((w=>w instanceof Ah?w:new Ah(w)))),this.value=y,this.params=v}};const Fi="Dict";function Cr(b,y){return{value:b,src:y}}function hs(b,y,v,w){return new Error(`failed to ${b} "${_=y,Array.isArray(_)?JSON.stringify(_):_ instanceof Map?"Map{}":_ instanceof Set?"Set{}":typeof _=="object"?JSON.stringify(_):String(_)}" as ${v}`,{cause:w});var _}function cr(b,y,v){return hs("parse",b,y,v)}const oo="Inner List",lo="Bare Item",co="Boolean",uo="Byte Sequence",ul="Date",fo="Decimal",dl="Integer",ur=`${dl} or ${fo}`;function wa(b){return b<-999999999999999||999999999999999<b}function Ga(b){let y,v=1,w="";const _=cr(b,ur);if(b[0]==="-"&&(v=-1,b=b.substring(1)),b.length<=0)throw _;const I=/^(\d+)?/g,M=I.exec(b);if(M[0].length===0)throw _;if(w+=M[1],(b=b.substring(I.lastIndex))[0]==="."){if(w.length>12)throw _;const D=/^(\.\d+)?/g,N=D.exec(b);if(b=b.substring(D.lastIndex),N[0].length===0||N[1].length>4||(w+=N[1],w.length>16))throw _;y=parseFloat(w)*v}else{if(w.length>15)throw _;if(y=parseInt(w)*v,wa(y))throw cr(w,ur)}return Cr(y,b)}const Si="String",fl=/[\x00-\x1f\x7f]+/;var Zr=class{constructor(b){this.description=b}};const hl="Token";function zi(b,y){const v=b[0];if(v==='"')return(function(w){let _="",I=0;if(w[I]!=='"')throw cr(w,Si);for(I++;w.length>I;){if(w[I]==="\\"){if(w.length<=I+1||(I++,w[I]!=='"'&&w[I]!=="\\"))throw cr(w,Si);_+=w[I]}else{if(w[I]==='"')return Cr(_,w.substring(++I));if(fl.test(w[I]))throw cr(w,Si);_+=w[I]}I++}throw cr(w,Si)})(b);if(/^[-0-9]/.test(v))return Ga(b);if(v==="?")return(function(w){let _=0;if(w[_]!=="?")throw cr(w,co);if(_++,w[_]==="1")return Cr(!0,w.substring(++_));if(w[_]==="0")return Cr(!1,w.substring(++_));throw cr(w,co)})(b);if(v===":")return(function(w){if(w[0]!==":"||(w=w.substring(1)).includes(":")===!1)throw cr(w,uo);const _=/(^.*?)(:)/g,I=_.exec(w)[1];return w=w.substring(_.lastIndex),Cr(new Uint8Array([...atob(I)].map((M=>M.charCodeAt(0)))),w)})(b);if(/^[a-zA-Z*]/.test(v))return(function(w,_){if(/^[a-zA-Z*]$/.test(w[0])===!1)throw cr(w,hl);const I=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,M=I.exec(w)[1];return w=w.substring(I.lastIndex),Cr(Symbol.for(M),w)})(b);if(v==="@")return(function(w){let _=0;if(w[_]!=="@")throw cr(w,ul);_++;const I=Ga(w.substring(_));if(Number.isInteger(I.value)===!1)throw cr(w,ul);return Cr(new Date(1e3*I.value),I.src)})(b);throw cr(b,lo)}const Cm="Key";function km(b){let y=0;if(/^[a-z*]$/.test(b[y])===!1)throw cr(b,Cm);let v="";for(;b.length>y;){if(/^[a-z0-9_\-.*]$/.test(b[y])===!1)return Cr(v,b.substring(y));v+=b[y],y++}return Cr(v,b.substring(y))}function ou(b,y){let v;for(;b.length>0&&b[0]===";";){const w=km(b=b.substring(1).trim()),_=w.value;let I=!0;if((b=w.src)[0]==="="){const M=zi(b=b.substring(1));I=M.value,b=M.src}v==null&&(v={}),v[_]=I}return Cr(v,b)}function Lm(b,y){const v=zi(b),w=ou(b=v.src);return b=w.src,Cr(new Hr(v.value,w.value),b)}function Nm(b,y){return b[0]==="("?(function(v,w){if(v[0]!=="(")throw cr(v,oo);v=v.substring(1);const _=[];for(;v.length>0;){if((v=v.trim())[0]===")"){const M=ou(v=v.substring(1));return Cr(new Hr(_,M.value),M.src)}const I=Lm(v);if(_.push(I.value),(v=I.src)[0]!==" "&&v[0]!==")")throw cr(v,oo)}throw cr(v,oo)})(b):Lm(b)}const ml="List";function Wi(b,y,v){return hs("serialize",b,y,v)}function Dm(b){if(wa(b))throw Wi(b,dl);return b.toString()}function lw(b){const y=gn(b,3);if(Math.floor(Math.abs(y)).toString().length>12)throw Wi(b,fo);const v=y.toString();return v.includes(".")?v:`${v}.0`}function Pm(b){return b.description||b.toString().slice(7,-1)}function Mm(b){const y=Pm(b);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(y)===!1)throw Wi(y,hl);return y}function lu(b){switch(typeof b){case"number":if(!Number.isFinite(b))throw Wi(b,lo);return Number.isInteger(b)?Dm(b):lw(b);case"string":return(function(y){if(fl.test(y))throw Wi(y,Si);return`"${y.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`})(b);case"symbol":return Mm(b);case"boolean":return(function(y){if(typeof y!="boolean")throw Wi(y,co);return y?"?1":"?0"})(b);case"object":if(b instanceof Date)return(function(y){return`@${Dm(y.getTime()/1e3)}`})(b);if(b instanceof Uint8Array)return(function(y){if(ArrayBuffer.isView(y)===!1)throw Wi(y,uo);return`:${v=y,btoa(String.fromCharCode(...v))}:`;var v})(b);if(b instanceof Zr)return Mm(b);default:throw Wi(b,lo)}}function cu(b){if(/^[a-z*][a-z0-9\-_.*]*$/.test(b)===!1)throw Wi(b,Cm);return b}function uu(b){return b==null?"":Object.entries(b).map((([y,v])=>v===!0?`;${cu(y)}`:`;${cu(y)}=${lu(v)}`)).join("")}function Om(b){return b instanceof Hr?`${lu(b.value)}${uu(b.params)}`:lu(b)}function Fm(b,y){return(function(v,w={whitespace:!0}){if(typeof v!="object"||v==null)throw Wi(v,Fi);const _=v instanceof Map?v.entries():Object.entries(v),I=w?.whitespace?" ":"";return Array.from(_).map((([M,D])=>{D instanceof Hr==0&&(D=new Hr(D));let N=cu(M);return D.value===!0?N+=uu(D.params):(N+="=",Array.isArray(D.value)?N+=(function($){return`(${$.value.map(Om).join(" ")})${uu($.params)}`})(D):N+=Om(D)),N})).join(`,${I}`)})(b,y)}const zm={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ui="CMCD-Object",xr="CMCD-Request",_a="CMCD-Session",ca="CMCD-Status",cw={br:Ui,ab:Ui,d:Ui,ot:Ui,tb:Ui,tpb:Ui,lb:Ui,tab:Ui,lab:Ui,url:Ui,pb:xr,bl:xr,tbl:xr,dl:xr,ltc:xr,mtp:xr,nor:xr,nrr:xr,rc:xr,sn:xr,sta:xr,su:xr,ttfb:xr,ttfbb:xr,ttlb:xr,cmsdd:xr,cmsds:xr,smrt:xr,df:xr,cs:xr,ts:xr,cid:_a,pr:_a,sf:_a,sid:_a,st:_a,v:_a,msd:_a,bs:ca,bsd:ca,cdn:ca,rtp:ca,bg:ca,pt:ca,ec:ca,e:ca},du={OBJECT:Ui,REQUEST:xr,SESSION:_a,STATUS:ca},Um="event",gl=b=>Math.round(b),fu=(b,y)=>Array.isArray(b)?b.map((v=>fu(v,y))):b instanceof Hr&&typeof b.value=="string"?new Hr(fu(b.value,y),b.params):(y.baseUrl&&(b=(function(v,w){const _=new URL(v),I=new URL(w);if(_.origin!==I.origin)return v;const M=_.pathname.split("/").slice(1),D=I.pathname.split("/").slice(1,-1),N=Math.min(M.length,D.length);for(let $=0;$<N&&M[$]===D[$];$++)M.shift(),D.shift();for(;D.length;)D.shift(),M.unshift("..");return M.join("/")+_.search+_.hash})(b,y.baseUrl)),y.version===1?encodeURIComponent(b):b),pl=b=>100*gl(b/100),uw={br:gl,d:gl,bl:pl,dl:pl,mtp:pl,nor:(b,y)=>{let v=b;return y.version>=2&&(b instanceof Hr&&typeof b.value=="string"?v=new Hr([b]):typeof b=="string"&&(v=[b])),fu(v,y)},rtp:pl,tb:gl},Bm="request",hu=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],$m=["e"],mu=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"],dw=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function gu(b){return dw.test(b)}const jm=["d","dl","nor","ot","rtp","su"],qm=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function fw(b){return qm.includes(b)||gu(b)}const hw={[Um]:function(b){return hu.includes(b)||$m.includes(b)||mu.includes(b)||gu(b)},[Bm]:function(b){return hu.includes(b)||jm.includes(b)||gu(b)}};function Gm(b,y={}){const v={};if(b==null||typeof b!="object")return v;const w=y.version||b.v||1,_=y.reportingMode||Bm,I=w===1?fw:hw[_];let M=Object.keys(b).filter(I);b.e&&b.e!=="rr"&&(M=M.filter((R=>!(function(P){return mu.includes(P)})(R))));const D=y.filter;typeof D=="function"&&(M=M.filter(D));const N=_===Um;N&&!M.includes("ts")&&M.push("ts"),w>1&&!M.includes("v")&&M.push("v");const $=Object.assign({},uw,y.formatters),q={version:w,reportingMode:_,baseUrl:y.baseUrl};return M.sort().forEach((R=>{let P=b[R];const z=$[R];if(typeof z=="function"&&(P=z(P,q)),R==="v"){if(w===1)return;P=w}R=="pr"&&P===1||(N&&R==="ts"&&!Number.isFinite(P)&&(P=Date.now()),(function(X){return typeof X=="number"?Number.isFinite(X):X!=null&&X!==""&&X!==!1})(P)&&((function(X){return["ot","sf","st","e","sta"].includes(X)})(R)&&typeof P=="string"&&(P=new Zr(P)),v[R]=P))})),v}function mw(b,y={}){const v={};if(!b)return v;const w=(function(_,I){const M={};if(!_)return M;const D=Object.keys(_),N=I?($=I,Object.keys($).reduce(((q,R)=>($[R]?.forEach((P=>q[P]=R)),q)),{})):{};var $;return D.reduce(((q,R)=>{const P=cw[R]||N[R]||du.REQUEST;return(q[P]??={})[R]=_[R],q}),M)})(Gm(b,y),y?.customHeaderMap);return Object.entries(w).reduce(((_,[I,M])=>{const D=Fm(M,{whitespace:!1});return D&&(_[I]=D),_}),v)}const gw=new Set([...qm,...hu,...jm,...mu,...$m]),Xi=(Array.from(gw),zm),Hm={DASH:"d",HLS:"h",SMOOTH:"s",OTHER:"o"},Vm={VOD:"v",LIVE:"l"},Km="segment";function Ym(){let b,y,v,w,_,I,M,D,N,$,q,R,P,z,X,re,ie=this.context,J=(0,m.default)(ie).getInstance(),ce=(0,c.default)(ie).getInstance(),fe=(0,l.default)(ie).getInstance();function me(){w={pr:1,nor:null,st:null,sf:null,sid:`${et.default.generateUuid()}`,cid:null},P={},R={},z={},q=void 0,X=void 0,re=!1,B()}function Ee(){B()}function ne(){X||(X=Date.now())}function K(){X&&!w.msd&&(w.msd=Date.now()-X)}function B(){if(!M)return;const ue=M.getStreamController();if(!ue||typeof ue.getActiveStream!="function")return;const pe=ue.getActiveStream();pe&&($=pe.getStreamProcessors())}function j(ue){try{const pe=se(),W=pe.version?pe.keys:ce.get().streaming.cmcd.enabledKeys;return Object.keys(ue).filter((be=>W.includes(be))).reduce(((be,we)=>(be[we]=ue[we],be)),{})}catch{return ue}}function Se(){const ue=se();return(function(pe){if(Object.keys(pe).length){if(parseInt(pe.version)!==1)return v.error("version parameter must be defined in 1."),!1;if(!pe.keys)return v.error("keys parameter must be defined."),!1}const W=pe.version,be=ce.get().streaming.cmcd&&ce.get().streaming.cmcd.enabled;return W||be})(ue)&&(function(pe){let W=ce.get().streaming.cmcd.includeInRequests;pe.version&&(W=pe.includeInRequests??[Km]);const be=h.default.CMCD_AVAILABLE_REQUESTS,we=W.filter((Ce=>!be.includes(Ce)));return we.length===W.length?(v.error("None of the request types are supported."),!1):(we.map((Ce=>{v.warn(`request type ${Ce} is not supported.`)})),!0)})(ue)&&(function(pe){const W=h.default.CMCD_AVAILABLE_KEYS,be=h.default.CMCD_V2_AVAILABLE_KEYS,we=pe.version?pe.keys:ce.get().streaming.cmcd.enabledKeys,Ce=ce.get().streaming.cmcd.version,ze=we.filter((Fe=>!(W.includes(Fe)||Ce===2&&be.includes(Fe))));return ze.length===we.length&&we.length>0?(v.error(`None of the keys are implemented for CMCD version ${Ce}.`),!1):(ze.map((Fe=>{v.warn(`key parameter ${Fe} is not implemented for CMCD version ${Ce}.`)})),!0)})(ue)}function se(){let ue={};if(D){const pe=D.getServiceDescriptionSettings();ce.get().streaming.cmcd.applyParametersFromMpd&&pe.clientDataReporting&&pe.clientDataReporting.cmcdParameters&&(ue=pe.clientDataReporting.cmcdParameters)}return ue}function Ae(ue){try{let W=null;if(ue.type,(pe=ue.mediaType)!==h.default.VIDEO&&pe!==h.default.AUDIO||q&&q!=h.default.AUDIO||(q=pe),(function(be){const we=se();let Ce=ce.get().streaming.cmcd.includeInRequests;we.version&&(Ce=we.includeInRequests?we.includeInRequests:[Km]);const ze={[Q.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[Q.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[Q.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[Q.HTTPRequest.MPD_TYPE]:"mpd",[Q.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[Q.HTTPRequest.OTHER_TYPE]:"other"};return Ce.some((Fe=>ze[be]===Fe))})(ue.type)){if(ue.type===Q.HTTPRequest.MPD_TYPE)return(function(){const be=Ue();return be.ot=Xi.MANIFEST,be})();if(ue.type===Q.HTTPRequest.MEDIA_SEGMENT_TYPE)return Re(ue.mediaType),Te(ue,ue.mediaType);if(ue.type===Q.HTTPRequest.INIT_SEGMENT_TYPE)return(function(){const be=Ue();return be.ot=Xi.INIT,be.su=!0,be})();if(ue.type===Q.HTTPRequest.OTHER_TYPE||ue.type===Q.HTTPRequest.XLINK_EXPANSION_TYPE)return(function(){const be=Ue();return be.ot=Xi.OTHER,be})();if(ue.type===Q.HTTPRequest.LICENSE)return(function(){const be=Ue();return be.ot=Xi.KEY,be})();if(ue.type===Q.HTTPRequest.CONTENT_STEERING_TYPE)return(function(be){const we=q?Te(be,q):Ue();return we.ot=Xi.OTHER,we})(ue)}return W}catch{return null}var pe}function Te(ue,pe){Re(pe);const W=Ue(),be=(function(Mt){try{return parseInt(Mt.bandwidth/1e3)}catch{return null}})(ue),we=(function(Mt){try{return isNaN(Mt.duration)?NaN:Math.round(1e3*Mt.duration)}catch{return null}})(ue),Ce=(function(Mt){try{return 100*parseInt(N.getSafeAverageThroughput(Mt)/100)}catch{return null}})(pe),ze=(function(Mt){try{const sn=w.pr,vn=I.getCurrentBufferLevel(Mt);return isNaN(sn)||isNaN(vn)?null:100*parseInt(vn/sn*10)}catch{return null}})(pe),Fe=Ne(pe),We=(function(Mt){try{const sn=_.getPossibleVoRepresentationsFilteredBySettings(Mt).map((vn=>vn.bitrateInKbit));return Math.max(...sn)}catch{return null}})(ue.representation?.mediaInfo),lt=w.pr,St=(function(Mt){if($&&$.length!==0){for(let sn of $)if(sn.getType()===Mt)return sn.probeNextRequest()}})(pe);let Nt;pe===h.default.VIDEO&&(Nt=Xi.VIDEO),pe===h.default.AUDIO&&(Nt=Xi.AUDIO),ue.mediaType===h.default.ENHANCEMENT&&(Nt=Xi.OTHER),pe===h.default.TEXT&&(Nt=ue.representation.mediaInfo.mimeType==="application/mp4"?Xi.TIMED_TEXT:Xi.CAPTION);let ln=ce.get().streaming.cmcd.rtp;return ln||(ln=(function(Mt){try{let sn=M.getPlaybackRate();sn||(sn=1);let{bandwidth:vn,mediaType:On,representation:Pn,duration:wn}=Mt;if(!Pn.mediaInfo)return NaN;let kn=Ne(On);kn===0&&(kn=500);let nt=vn*wn/1e3/(kn/sn/1e3),xt=ce.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(ce.get().streaming.cmcd.rtpSafetyFactor)?ce.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(nt*xt/100)+1)}catch{return NaN}})(ue)),isNaN(ln)||(W.rtp=ln),St&&(ue.url!==St.url?W.nor=encodeURIComponent(et.default.getRelativeUrl(ue.url,St.url)):St.range&&(W.nrr=St.range)),be&&(W.br=be),Nt&&(W.ot=Nt),isNaN(we)||(W.d=we),isNaN(Ce)||(W.mtp=Ce),isNaN(ze)||(W.dl=ze),isNaN(Fe)||(W.bl=Fe),isNaN(We)||(W.tb=We),isNaN(lt)||lt===1||(W.pr=lt),P[pe]&&(W.bs=!0,P[pe]=!1),!R[pe]&&z[pe]||(W.su=!0,R[pe]=!1,z[pe]=!0),W}function Re(ue){z.hasOwnProperty(ue)||(z[ue]=!1),R.hasOwnProperty(ue)||(R[ue]=!1),P.hasOwnProperty(ue)||(P[ue]=!1)}function Ue(){const ue=se(),pe={};let W=ce.get().streaming.cmcd.cid?ce.get().streaming.cmcd.cid:w.cid;if(W=ue.contentID?ue.contentID:W,pe.v=ce.get().streaming.cmcd.version??1,pe.sid=ce.get().streaming.cmcd.sid?ce.get().streaming.cmcd.sid:w.sid,pe.sid=ue.sessionID?ue.sessionID:pe.sid,pe.sid=`${pe.sid}`,W&&(pe.cid=`${W}`),isNaN(w.pr)||w.pr===1||w.pr===null||(pe.pr=w.pr),w.st&&(pe.st=w.st),w.sf&&(pe.sf=w.sf),pe.v===2){let be=1e3*M.getCurrentLiveLatency();isNaN(be)||(pe.ltc=be);const we=w.msd;re||isNaN(we)||(pe.msd=we,re=!0)}return pe}function Ne(ue){try{const pe=I.getCurrentBufferLevel(ue);return isNaN(pe)?null:100*parseInt(10*pe)}catch{return null}}function ee(ue){try{w.pr=ue.playbackRate}catch{}}function ae(ue){try{const pe=b.getIsDynamic(ue.data)?Vm.LIVE:Vm.VOD,W=ue.protocol&&ue.protocol==="MSS"?Hm.SMOOTH:Hm.DASH;w.st=`${pe}`,w.sf=`${W}`}catch{}}function de(ue){try{ue.state&&ue.mediaType&&ue.state===g.default.BUFFER_EMPTY&&(P[ue.mediaType]||(P[ue.mediaType]=!0),R[ue.mediaType]||(R[ue.mediaType]=!0))}catch{}}function le(){for(let ue in P)P.hasOwnProperty(ue)&&(P[ue]=!0);for(let ue in R)R.hasOwnProperty(ue)&&(R[ue]=!0)}return y={getCmcdData:Ae,getQueryParameter:function(ue){try{if(Se()){const pe=Ae(ue),W=(function(be,we={}){return be?Fm(Gm(be,we),{whitespace:!1}):""})(j(pe));return J.trigger(Hn.default.CMCD_DATA_GENERATED,{url:ue.url,mediaType:ue.mediaType,cmcdData:pe,cmcdString:W}),{key:"CMCD",value:W}}return null}catch{return null}},getHeaderParameters:function(ue){try{if(Se()){const pe=Ae(ue),W=mw(j(pe),ce.get().streaming.cmcd.version===1?{}:{customHeaderMap:{[du.REQUEST]:["ltc"],[du.SESSION]:["msd"]}});return J.trigger(Hn.default.CMCD_DATA_GENERATED,{url:ue.url,mediaType:ue.mediaType,cmcdData:pe,headers:W}),W}return null}catch{return null}},getCmcdParametersFromManifest:se,setConfig:function(ue){ue&&(ue.abrController&&(_=ue.abrController),ue.dashMetrics&&(I=ue.dashMetrics),ue.throughputController&&(N=ue.throughputController),ue.playbackController&&(M=ue.playbackController),ue.serviceDescriptionController&&(D=ue.serviceDescriptionController))},reset:function(){J.off(g.default.PLAYBACK_RATE_CHANGED,ee,this),J.off(g.default.MANIFEST_LOADED,ae,this),J.off(g.default.BUFFER_LEVEL_STATE_CHANGED,de,y),J.off(g.default.PLAYBACK_SEEKED,le,y),J.off(g.default.PLAYBACK_STARTED,ne,y),J.off(g.default.PLAYBACK_PLAYING,K,y),me()},initialize:function(ue){J.on(g.default.PLAYBACK_RATE_CHANGED,ee,y),J.on(g.default.MANIFEST_LOADED,ae,y),J.on(g.default.BUFFER_LEVEL_STATE_CHANGED,de,y),J.on(g.default.PLAYBACK_SEEKED,le,y),J.on(g.default.PERIOD_SWITCH_COMPLETED,Ee,y),ue?J.on(g.default.MANIFEST_LOADING_STARTED,ne,y):J.on(g.default.PLAYBACK_STARTED,ne,y),J.on(g.default.PLAYBACK_PLAYING,K,y)},isCmcdEnabled:Se},b=Vn(ie).getInstance(),v=fe.getLogger(y),me(),y}Ym.__dashjs_factory_name="CmcdModel";var Wm=n.default.getSingletonFactory(Ym);const ho="CMSD-Dynamic",Xm="CMSD-Static",yl=zm,pw=Xm.toLowerCase(),yw=ho.toLowerCase(),bw=["mb","st","sf","v"],pu="stream",Ew={video:yl.VIDEO,audio:yl.AUDIO,text:yl.TIMED_TEXT,stream:pu};function Qm(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_,I;function M(){_={},I={}}function D(P){P&&Object.keys(P).forEach((z=>{bw.includes(z)||delete P[z]}))}function N(P){try{return(z=P)?Object.entries((function(X,re){try{const{src:ie,value:J}=(function(ce,fe){const me={};for(;ce.length>0;){let Ee;const ne=km(ce),K=ne.value;if((ce=ne.src)[0]==="="){const B=Nm(ce.substring(1),fe);Ee=B.value,ce=B.src}else{const B=ou(ce,fe);Ee=new Hr(!0,B.value),ce=B.src}if(me[K]=Ee,(ce=ce.trim()).length===0)return Cr(me,ce);if(ce[0]!==","||(ce=ce.substring(1).trim()).length===0||ce[0]===",")throw cr(ce,Fi)}return Cr(me,ce)})(X.trim(),re);if(ie!=="")throw cr(ie,Fi);return J}catch(ie){throw cr(X,Fi,ie)}})(z)).reduce(((X,[re,ie])=>{const{value:J}=ie;return X[re]=typeof J=="symbol"?Pm(J):J,X}),{}):{}}catch(X){w.error("Failed to parse CMSD-Static response header value:",X)}var z}function $(P){try{const X=(z=P)?(function(ie,J){try{const{src:ce,value:fe}=(function(me,Ee){const ne=[];for(;me.length>0;){const K=Nm(me,Ee);if(ne.push(K.value),(me=K.src.trim()).length===0)return Cr(ne,me);if(me[0]!==","||(me=me.substring(1).trim()).length===0||me[0]===",")throw cr(me,ml)}return Cr(ne,me)})(ie.trim(),J);if(ce!=="")throw cr(ce,ml);return fe}catch(ce){throw cr(ie,ml,ce)}})(z):[];return X[X.length-1]?.params||{}}catch(X){return w.error("Failed to parse CMSD-Dynamic response header value:",X),{}}var z}function q(P){return Ew[P]||yl.OTHER}function R(P,z,X){const re=P===Xm?_:I,ie=re[z]||{},J=re[pu]||{};return ie[X]||J[X]}return v={setConfig:function(){},initialize:function(){},reset:function(){M()},parseResponseHeaders:function(P,z){let X=null,re=null;for(const J in P){const ce=P[J];switch(J){case pw:X=N(ce),y.trigger(f.default.CMSD_STATIC_HEADER,X);break;case yw:re||(re=$(ce))}}let ie=pu;return X&&X.ot?ie=X.ot:z&&(ie=q(z)),D(_[ie]),D(I[ie]),X&&(_[ie]=Object.assign(_[ie]||{},X)),re&&(I[ie]=Object.assign(I[ie]||{},re)),{static:X,dynamic:re}},getMaxBitrate:function(P){let z=q(P);return R(ho,z,"mb")||-1},getEstimatedThroughput:function(P){let z=q(P);return R(ho,z,"etp")||null},getResponseDelay:function(P){let z=q(P);return R(ho,z,"rd")||null},getRoundTripTime:function(P){let z=q(P);return R(ho,z,"rtt")||null}},w=(0,l.default)(b).getInstance().getLogger(v),M(),v}Qm.__dashjs_factory_name="CmsdModel";var Zm=n.default.getSingletonFactory(Qm),yu=t(1926);function Jm(){let b,y;function v(){y={}}return b={reset:function(){v()},processResponseHeaders:function(w){if(!(w&&w.headers&&w.request&&w.request.url))return;const _=w.headers[h.default.COMMON_ACCESS_TOKEN_HEADER];if(_){const I=et.default.getHostFromUrl(w.request.url);I&&(y[I]=_)}},getCommonAccessTokenForUrl:function(w){if(!w)return null;const _=et.default.getHostFromUrl(w);return _?y[_]?y[_]:null:void 0}},v(),b}Jm.__dashjs_factory_name="CommonAccessTokenController";var vw=n.default.getSingletonFactory(Jm);function eg(){let b,y;return b={setConfig:function(v){v&&v.serviceDescriptionController&&(y=v.serviceDescriptionController)},isAdaptationsIncluded:function(v){const{adaptationSetsArray:w}=y?.getServiceDescriptionSettings()?.clientDataReporting??{};return!w||w?.length===0||w.includes(v)},isServiceLocationIncluded:function(v,w){if(v===Q.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:_}=y?.getServiceDescriptionSettings()?.clientDataReporting??{};return!_||_?.length===0||_.includes(w)}},b}eg.__dashjs_factory_name="ClientDataReportingController";var tg=n.default.getSingletonFactory(eg);function ng(){let b,y,v;const w=this.context;function _(I,M,D,N,$){const q=(function(R,P){let z=[];return z=P===ve.default.PERIOD?R[ve.default.SUPPLEMENTAL_PROPERTY]||[]:[...R[ve.default.ESSENTIAL_PROPERTY]||[],...R[ve.default.SUPPLEMENTAL_PROPERTY]||[]],z.find((X=>X.schemeIdUri===h.default.URL_QUERY_INFO_SCHEME&&X.UrlQueryInfo||X.schemeIdUri===h.default.EXT_URL_QUERY_INFO_SCHEME&&X.ExtUrlQueryInfo))})(M,$);(function(R,P,z,X){z.initialQueryString="";let re="";const ie=R?.ExtUrlQueryInfo||R?.UrlQueryInfo;re=ie&&ie.queryString?P&&P.length>0?P+"&"+ie.queryString:ie.queryString:P,ie?.useMPDUrlQuery==="true"&&X&&(re=re?re+"&"+X:X),z.initialQueryString=re})(q,N.initialQueryString,I,D),(function(R,P,z){if(!R)return void(P.finalQueryString=z);const X=R?.ExtUrlQueryInfo?.queryTemplate||R?.UrlQueryInfo?.queryTemplate||"";P.finalQueryString=X===ve.default.QUERY_PART?P?.initialQueryString:""})(q,I,N.finalQueryString),I.sameOriginOnly=q?.ExtUrlQueryInfo?.sameOriginOnly,I.queryParams=et.default.parseQueryParams(I?.finalQueryString),I.includeInRequests=(function(R,P){return R?R.ExtUrlQueryInfo?.includeInRequests?R.ExtUrlQueryInfo.includeInRequests.split(" "):[ve.default.SEGMENT_TYPE]:P})(q,N.includeInRequests)}return y=(0,l.default)(w).getInstance().getLogger(b),b={getFinalQueryString:function(I){try{if(!v)return null;if(I.type===Q.HTTPRequest.MEDIA_SEGMENT_TYPE||I.type===Q.HTTPRequest.INIT_SEGMENT_TYPE){const M=I.representation;if(!M)return null;const D=M.adaptation,N=D.period,$=v.period[N.index].adaptation[D.index].representation[M.index],q=new URL(I.url),R=!$.sameOriginOnly||v.origin===q.origin;if($.includeInRequests.includes(ve.default.SEGMENT_TYPE)&&R)return $.queryParams}else if(I.type===Q.HTTPRequest.MPD_TYPE){if([ve.default.MPD_TYPE,ve.default.MPD_PATCH_TYPE].some((M=>v.includeInRequests.includes(M))))return v.queryParams}else if(I.type===Q.HTTPRequest.CONTENT_STEERING_TYPE&&v.includeInRequests.includes(ve.default.STEERING_TYPE))return v.queryParams}catch(M){return y.error(M),null}},createFinalQueryStrings:function(I){v={origin:new URL(I.url).origin,period:[]};const M=I.url.split("?")[1];_(v,I,M,{initialQueryString:"",includeInRequests:[]},ve.default.MPD),I.Period.forEach((D=>{const N={adaptation:[]};_(N,D,M,v,ve.default.PERIOD),D.AdaptationSet.forEach(($=>{const q={representation:[]};_(q,$,M,N,ve.default.ADAPTATION_SET),$.Representation.forEach((R=>{const P={};_(P,R,M,q,ve.default.REPRESENTATION),q.representation.push(P)})),N.adaptation.push(q)})),v.period.push(N)}))}},b}ng.__dashjs_factory_name="ExtUrlQueryInfoController";var rg=n.default.getSingletonFactory(ng),bu=class{constructor(b){this.url=b.url,this.method=b.method,this.responseType=b.responseType!==void 0?b.responseType:null,this.headers=b.headers!==void 0?b.headers:{},this.credentials=b.credentials!==void 0?b.credentials:null,this.mode=b.mode!==void 0?b.mode:null,this.timeout=b.timeout!==void 0?b.timeout:0,this.cmcd=b.cmcd!==void 0?b.cmcd:null,this.customData=b.customData!==void 0?b.customData:null}},Eu=class{constructor(b){this.request=b.request,this.url=b.url!==void 0?b.url:null,this.redirected=b.redirected!==void 0&&b.redirected,this.status=b.status!==void 0?b.status:null,this.statusText=b.statusText!==void 0?b.statusText:"",this.type=b.type!==void 0?b.type:"",this.headers=b.headers!==void 0?b.headers:{},this.data=b.data!==void 0?b.data:null,this.resourceTiming=b.resourceTiming!==void 0?b.resourceTiming:null}};function ig(b){b=b||{};const y=this.context,v=b.errHandler,w=b.dashMetrics,_=b.mediaPlayerModel,I=b.boxParser,M=b.errors,D=b.requestTimeout||0,N=(0,m.default)(y).getInstance(),$=(0,c.default)(y).getInstance();let q,R,P,z,X,re,ie,J,ce,fe,me,Ee,ne,K;function B(j,Se){const se=function(){Ue()},Ae=function(Mt){const sn=new Date;pe&&(pe=!1,(!Mt.lengthComputable||Mt.lengthComputable&&Mt.total!==Mt.loaded)&&(le.firstByteDate=sn,Fe.resourceTiming.responseStart=sn.getTime())),Mt.lengthComputable&&(le.bytesLoaded=Fe.length=Mt.loaded,le.bytesTotal=Fe.resourceTiming.encodedBodySize=Mt.total,Fe.length=Mt.total,Fe.resourceTiming.encodedBodySize=Mt.loaded),Mt.noTrace||(ue.push({s:be,d:Mt.time?Mt.time:sn.getTime()-be.getTime(),b:[Mt.loaded?Mt.loaded-we:0],t:Mt.throughput}),le.traces=ue,be=sn,we=Mt.loaded),Ce&&(clearTimeout(Ce),Ce=null),$.get().streaming.fragmentRequestProgressTimeout>0&&(Ce=setTimeout((function(){K.warn("Abort request "+ze.url+" due to progress timeout"),lt.abort(ze),se()}),$.get().streaming.fragmentRequestProgressTimeout)),j.progress&&Mt&&j.progress(Mt)},Te=function(){Ue(!0)},Re=function(Mt){let sn;if(Mt.lengthComputable){let vn=Mt.loaded/Mt.total*100;sn="Request timeout: loaded: "+Mt.loaded+", out of: "+Mt.total+" : "+vn.toFixed(3)+"% Completed"}else sn="Request timeout: non-computable download size";K.warn(sn)},Ue=function(Mt=!1){R.indexOf(ze)!==-1&&R.splice(R.indexOf(ze),1),Ce&&(clearTimeout(Ce),Ce=null),me.processResponseHeaders(Fe),Ne(),ee(),(function(sn){const vn=fe.getResponseInterceptors();return vn?vn.reduce(((On,Pn)=>On.then((wn=>Pn(wn)))),Promise.resolve(sn)):Promise.resolve(sn)})(Fe).then((sn=>{if(Fe=sn,(function(vn,On,Pn){const wn=vn.customData.request,kn=$.get().streaming.cmsd&&$.get().streaming.cmsd.enabled?ie.parseResponseHeaders(On.headers,wn.mediaType):null;w.addHttpRequest(wn,On.url,On.status,On.headers,Pn,kn)})(ze,Fe,ue),Mt)j.abort&&j.abort(le);else if(le.type===Q.HTTPRequest.MPD_TYPE&&(w.addManifestUpdate(le),N.trigger(f.default.MANIFEST_LOADING_FINISHED,{requestObject:le})),Fe.status>=200&&Fe.status<=299&&Fe.data)j.success&&j.success(Fe.data,Fe.statusText,Fe.url),j.complete&&j.complete(le,Fe.statusText);else{try{Fe.status===404&&$.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&le.type===Q.HTTPRequest.MEDIA_SEGMENT_TYPE&&_.getRetryAttemptsForType(Q.HTTPRequest.MEDIA_SEGMENT_TYPE)===Se&&N.trigger(f.default.ATTEMPT_BACKGROUND_SYNC)}catch{}de()}}))},Ne=function(){le.startDate=W,le.endDate=new Date,le.firstByteDate=le.firstByteDate||W},ee=function(){Fe.resourceTiming.responseEnd=Date.now(),(function(Mt,sn){if(!$.get().streaming.abr.throughput.useResourceTimingApi||typeof performance>"u"||Mt.range)return;const vn=performance.getEntriesByType?.("resource");if(vn===void 0||vn.length<=0)return;let On=0,Pn=null;for(;On<vn.length;){if(vn[On].name===Mt.url){Pn=vn[On];break}On+=1}(function(wn){return wn&&!isNaN(wn.responseStart)&&wn.responseStart>0&&!isNaN(wn.responseEnd)&&wn.responseEnd>0&&!isNaN(wn.transferSize)&&wn.transferSize>0})(Pn)&&(Mt.customData.request.resourceTimingValues=Pn,sn.resourceTiming.startTime=Pn.startTime,sn.resourceTiming.encodedBodySize=Pn.encodedBodySize,sn.resourceTiming.responseStart=Pn.startTime,sn.resourceTiming.responseEnd=Pn.responseEnd,sn.resourceTiming.duration=Pn.duration)})(ze,Fe)},ae=function(Mt,sn,vn){return new Promise((On=>{(function(Pn){const wn=fe.getRequestInterceptors();return wn?wn.reduce(((kn,nt)=>kn.then((xt=>nt(xt)))),Promise.resolve(Pn)):Promise.resolve(Pn)})(sn).then((Pn=>{(sn=Pn).customData.onloadend=se,sn.customData.onprogress=Ae,sn.customData.onabort=Te,sn.customData.ontimeout=Re,vn.resourceTiming.startTime=Date.now(),Mt.load(sn,vn),On()}))}))},de=function(){if(Se>0){Se--,j&&j.request&&(j.request.retryAttempts+=1);let Mt={config:j};z.push(Mt),Mt.timeout=setTimeout((function(){z.indexOf(Mt)!==-1&&(z.splice(z.indexOf(Mt),1),B(j,Se))}),_.getRetryIntervalsForType(le.type))}else{if(le.type===Q.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;v.error(new Tt.default(X[le.type],le.url+" is not available",{request:le,response:Fe})),j.error&&j.error(le,"error",Fe.statusText,Fe),j.complete&&j.complete(le,Fe.statusText)}},le=j.request,ue=[];let pe,W,be,we,Ce,ze,Fe;if(le.bytesLoaded=NaN,le.bytesTotal=NaN,le.firstByteDate=null,le.traces=[],pe=!0,W=new Date,be=W,we=0,Ce=null,!w||!v)throw new Error("config object is not correct or missing");const We=(function(Mt){let sn,vn;return!Mt.isPartialSegmentRequest&&Mt.hasOwnProperty("availabilityTimeComplete")&&Mt.availabilityTimeComplete===!1&&window.fetch&&Mt.responseType==="arraybuffer"&&Mt.type===Q.HTTPRequest.MEDIA_SEGMENT_TYPE?(ce||(ce=$n(y).create(),ce.setConfig({dashMetrics:w,boxParser:I})),sn=ce,vn=h.default.FILE_LOADER_TYPES.FETCH):(J||(J=nn(y).create()),sn=J,vn=h.default.FILE_LOADER_TYPES.XHR),{loader:sn,fileLoaderType:vn}})(le),lt=We.loader;var St;le.fileLoaderType=We.fileLoaderType,le.headers={},(function(Mt){const sn=Mt?.serviceLocation,vn=Mt?.mediaInfo?.id?.toString();if(Ee.isServiceLocationIncluded(Mt.type,sn)&&Ee.isAdaptationsIncluded(vn)&&re.isCmcdEnabled()){const On=re.getCmcdParametersFromManifest(),Pn=On.mode?On.mode:$.get().streaming.cmcd.mode;if(Pn===h.default.CMCD_MODE_QUERY){Mt.url=et.default.removeQueryParameterFromUrl(Mt.url,h.default.CMCD_QUERY_KEY);const wn=(function(kn){try{const nt=[],xt=re.getQueryParameter(kn);return xt&&nt.push(xt),nt}catch{return[]}})(Mt);Mt.url=et.default.addAdditionalQueryParameterToUrl(Mt.url,wn)}else Pn===h.default.CMCD_MODE_HEADER&&(Mt.headers=Object.assign(Mt.headers,re.getHeaderParameters(Mt)))}})(St=le),St.retryAttempts===0&&(function(Mt){let sn=ne.getFinalQueryString(Mt);sn&&(Mt.url=et.default.addAdditionalQueryParameterToUrl(Mt.url,sn))})(St),(function(Mt){if(Mt.queryParams){const sn=Object.keys(Mt.queryParams).map((vn=>({key:vn,value:Mt.queryParams[vn]})));Mt.url=et.default.addAdditionalQueryParameterToUrl(Mt.url,sn)}})(St),(function(Mt){const sn=me.getCommonAccessTokenForUrl(Mt.url);sn&&(Mt.headers[h.default.COMMON_ACCESS_TOKEN_HEADER]=sn)})(St),le.range&&(le.headers.Range="bytes="+le.range);const Nt=fe.getXHRWithCredentialsForType(le.type);ze=new bu({url:le.url,method:Q.HTTPRequest.GET,responseType:le.responseType,headers:le.headers,credentials:Nt?"include":"omit",timeout:D,cmcd:re.getCmcdData(le),customData:{request:le}}),Fe=new Eu({request:ze,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let ln=new Date().getTime();if(isNaN(le.delayLoadingTime)||ln>=le.delayLoadingTime)return R.push(ze),ae(lt,ze,Fe);{let Mt={httpRequest:ze,httpResponse:Fe};return P.push(Mt),Mt.delayTimeout=setTimeout((function(){if(P.indexOf(Mt)!==-1){P.splice(P.indexOf(Mt),1);try{W=new Date,be=W,R.push(Mt.httpRequest),ae(lt,Mt.httpRequest,Mt.httpResponse)}catch{Mt.httpRequest.onloadend()}}}),le.delayLoadingTime-ln),Promise.resolve()}}return q={abort:function(){z.forEach((j=>{clearTimeout(j.timeout),j.config.request&&j.config.abort&&j.config.abort(j.config.request)})),z=[],P.forEach((j=>clearTimeout(j.delayTimeout))),P=[],R.forEach((j=>{const Se=j.customData;Se&&(Se.request&&Se.request.type===Q.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(Se.onloadend=Se.onprogress=void 0,Se.abort&&Se.abort()))})),R=[]},load:function(j){return j.request?B(j,_.getRetryAttemptsForType(j.request.type)):(j.error&&j.error(j.request,"error"),Promise.resolve())},reset:function(){R=[],P=[],z=[],J&&J.reset(),ce&&ce.reset(),J=null,ce=null},resetInitialSettings:function(){J&&J.resetInitialSettings()},setConfig:function(j){j&&(j.commonAccessTokenController&&(me=j.commonAccessTokenController),j.extUrlQueryInfoController&&(ne=j.extUrlQueryInfoController))}},K=(0,l.default)(y).getInstance().getLogger(q),R=[],P=[],z=[],re=Wm(y).getInstance(),Ee=tg(y).getInstance(),ie=Zm(y).getInstance(),fe=(0,yu.default)(y).getInstance(),me=vw(y).getInstance(),ne=rg(y).getInstance(),X={[Q.HTTPRequest.MPD_TYPE]:M.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[Q.HTTPRequest.XLINK_EXPANSION_TYPE]:M.DOWNLOAD_ERROR_ID_XLINK_CODE,[Q.HTTPRequest.INIT_SEGMENT_TYPE]:M.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[Q.HTTPRequest.MEDIA_SEGMENT_TYPE]:M.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Q.HTTPRequest.INDEX_SEGMENT_TYPE]:M.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Q.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:M.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Q.HTTPRequest.OTHER_TYPE]:M.DOWNLOAD_ERROR_ID_CONTENT_CODE},q}ig.__dashjs_factory_name="HTTPLoader";var Tw=n.default.getClassFactory(ig);function ag(){let b,y;function v(){y={}}function w(){v()}return w(),b={getLoader:function(_){for(var I in y)if(y.hasOwnProperty(I)&&_.startsWith(I))return y[I];return Tw},registerLoader:function(_,I){y[_]=I},unregisterLoader:function(_){y[_]&&delete y[_]},unregisterAllLoader:v,reset:w},b}ag.__dashjs_factory_name="SchemeLoaderFactory";var sg=n.default.getSingletonFactory(ag);function og(b){b=b||{};const y=this.context;let v,w,_;return w=sg(y).getInstance(),v={abort:function(){_&&_.abort()},load:function(I){_||(_=w.getLoader(I&&I.request?I.request.url:null)(y).create({errHandler:b.errHandler,mediaPlayerModel:b.mediaPlayerModel,dashMetrics:b.dashMetrics,boxParser:b.boxParser?b.boxParser:null,constants:b.constants?b.constants:null,dashConstants:b.dashConstants?b.dashConstants:null,urlUtils:b.urlUtils?b.urlUtils:null,requestTimeout:isNaN(b.requestTimeout)?0:b.requestTimeout,errors:b.errors})),_.load(I)},reset:function(){w&&(w.reset(),w=null),_&&typeof _.reset=="function"&&_.reset(),_=null},resetInitialSettings:function(){_&&typeof _.resetInitialSettings=="function"&&_.resetInitialSettings()}},v}og.__dashjs_factory_name="URLLoader";var ms=n.default.getClassFactory(og),Sw=class{constructor(b){this.url=b||null,this.type=Q.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},ww=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function lg(){const b=this.context,y=Zn(b).getInstance();let v,w,_,I,M,D,N,$,q,R,P,z,X,re,ie,J;function ce(Te){Ee(Te,"baseUrl")}function fe(Te){Ee(Te,"location")}function me(Te){var Re,Ue;Te&&Te.throughputValues&&Te.throughputValues.serviceLocation&&(Re=Te.throughputValues.serviceLocation,Ue=Te.throughputValues,re[Re]||(re[Re]=[]),re[Re].push(Ue),re[Re].length>4&&re[Re].shift())}function Ee(Te,Re){if(Te&&Te.request&&Te.request.serviceLocation){const Ue=Te.request.serviceLocation;z[Re].all.indexOf(Ue)===-1&&z[Re].all.push(Ue),z[Re].current=Ue}}function ne(){const Te=$.getValue();let Re=v.getContentSteering(Te);return Re||(Re=P.getServiceDescriptionSettings().contentSteering),!Re&&w&&(Re=w),w=Re,Re}function K(){return new Promise((Te=>{try{const Re=ne();if(!Re||!Re.serverUrl)return void Te();const Ue=(function(ee){let ae=ee.serverUrl;_&&_.reloadUri&&(ae=y.isRelative(_.reloadUri)?y.resolve(_.reloadUri,ee.serverUrl):_.reloadUri);const de=[],le=z.baseUrl.all.concat(z.location.all);if(le.length>0){const ue=le.map((be=>{const we=(function(Ce){if(!Ce||!re[Ce]||re[Ce].length===0)return-1;const ze=X.getArithmeticMean(re[Ce],re[Ce].length,!0);return parseInt(1e3*ze)})(be);return{serviceLocation:be,throughput:we}}));let pe="",W="";ue.forEach(((be,we)=>{we!==0&&(pe+=",",W+=","),pe+=be.serviceLocation,W+=be.throughput>-1?be.throughput:""})),de.push({key:"_DASH_pathway",value:`"${pe}"`}),de.push({key:"_DASH_throughput",value:W})}return ae=et.default.addAdditionalQueryParameterToUrl(ae,de),ae})(Re),Ne=new Sw(Ue);ie.load({request:Ne,success:ee=>{(function(ae){ae&&ae[ve.default.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(ae[ve.default.CONTENT_STEERING_RESPONSE.VERSION])===1&&(_=new ww,_.version=ae[ve.default.CONTENT_STEERING_RESPONSE.VERSION],ae[ve.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(ae[ve.default.CONTENT_STEERING_RESPONSE.TTL])&&(_.ttl=ae[ve.default.CONTENT_STEERING_RESPONSE.TTL]),ae[ve.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(_.reloadUri=ae[ve.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),ae[ve.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(_.pathwayPriority=ae[ve.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),ae[ve.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(_.pathwayClones=ae[ve.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],_.pathwayClones=_.pathwayClones.filter((de=>(function(le){return le[ve.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&le[ve.default.CONTENT_STEERING_RESPONSE.ID]&&le[ve.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&le[ve.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ve.default.CONTENT_STEERING_RESPONSE.HOST]})(de)))),Se())})(ee),D.trigger(g.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:_,url:Ue}),Te()},error:(ee,ae,de,le)=>{(function(ue,pe){try{switch(N.warn("Error fetching data from content steering server",ue),pe.status){case 404:case 410:w=null;break;case 429:const W=pe&&pe.getResponseHeader?pe.getResponseHeader("retry-after"):null;W!==null&&(_||(_={}),_.ttl=parseInt(W)),Se();break;default:Se()}}catch(W){N.error(W)}})(ee,le),Te(ee)},complete:()=>{z.baseUrl.all=B(z.baseUrl),z.location.all=B(z.location)}})}catch(Re){Te(Re)}}))}function B(Te){return Te.all&&Te.all.length!==0&&Te.current?Te.all.filter((Re=>Re===Te.current)):[]}function j(Te){try{const Re=[];return Te&&Te.length!==0&&_&&_.pathwayClones&&_.pathwayClones.length!==0&&_.pathwayClones.forEach((Ue=>{let Ne=Te.filter((ae=>Ue[ve.default.CONTENT_STEERING_RESPONSE.BASE_ID]===ae.serviceLocation)),ee=null;if(Ne&&Ne.length>0&&(ee=Ne[0]),ee){const ae=new URL(ee.url);let de=Ue[ve.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ve.default.CONTENT_STEERING_RESPONSE.HOST];de=et.default.stringHasProtocol(de)?de:`${ae.protocol}//${de}`;const le={synthesizedUrl:`${de}${ae.pathname}`,serviceLocation:Ue[ve.default.CONTENT_STEERING_RESPONSE.ID],queryParams:Ue[ve.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ve.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:ee};Re.push(le)}})),Re}catch(Re){return N.error(Re),[]}}function Se(){_&&_.ttl&&!isNaN(_.ttl)&&(R&&clearTimeout(R),R=setTimeout((()=>{K()}),1e3*_.ttl))}function se(){R&&clearTimeout(R),R=null}function Ae(){_=null,w=null,re={},z={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},se()}return J={reset:function(){Ae(),D.off(g.default.FRAGMENT_LOADING_STARTED,ce,J),D.off(g.default.MANIFEST_LOADING_STARTED,fe,J),D.off(g.default.THROUGHPUT_MEASUREMENT_STORED,me,J)},setConfig:function(Te){Te&&(Te.adapter&&(v=Te.adapter),Te.errHandler&&(M=Te.errHandler),Te.dashMetrics&&(I=Te.dashMetrics),Te.mediaPlayerModel&&(q=Te.mediaPlayerModel),Te.manifestModel&&($=Te.manifestModel),Te.serviceDescriptionController&&(P=Te.serviceDescriptionController),Te.throughputController&&(X=Te.throughputController),Te.eventBus&&(D=Te.eventBus))},loadSteeringData:K,getCurrentSteeringResponseData:function(){return _},shouldQueryBeforeStart:function(){const Te=ne();return!!Te&&Te.queryBeforeStart},getSteeringDataFromManifest:ne,stopSteeringRequestTimer:se,getSynthesizedBaseUrlElements:function(Te){try{return j(Te).map((Re=>{const Ue=new sr(Re.synthesizedUrl,Re.serviceLocation);return Ue.queryParams=Re.queryParams,Ue.dvbPriority=Re.reference.dvbPriority,Ue.dvbWeight=Re.reference.dvbWeight,Ue.availabilityTimeOffset=Re.reference.availabilityTimeOffset,Ue.availabilityTimeComplete=Re.reference.availabilityTimeComplete,Ue}))}catch(Re){return N.error(Re),[]}},getSynthesizedLocationElements:function(Te){try{return j(Te).map((Re=>{const Ue=new qa(Re.synthesizedUrl,Re.serviceLocation);return Ue.queryParams=Re.queryParams,Ue}))}catch(Re){return N.error(Re),[]}},initialize:function(){ie=ms(b).create({errHandler:M,dashMetrics:I,mediaPlayerModel:q,errors:Jt}),D.on(g.default.FRAGMENT_LOADING_STARTED,ce,J),D.on(g.default.MANIFEST_LOADING_STARTED,fe,J),D.on(g.default.THROUGHPUT_MEASUREMENT_STORED,me,J)}},N=(0,l.default)(b).getInstance().getLogger(J),Ae(),J}lg.__dashjs_factory_name="ContentSteeringController";var vu=n.default.getSingletonFactory(lg);function cg(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_,I=[];function M(N=[],$=[]){let q=0,R=NaN;for(;q<N.length;){const P=N[q],z=$.findIndex((X=>X.serviceLocation&&X.serviceLocation===P));if(z!==-1&&!_.contains($[z].serviceLocation)){R=z;break}q+=1}return R}function D(N){const $=w.getCurrentSteeringResponseData();if(!$)return;const q=N.entry,R=setTimeout((()=>{_.remove(q),I.splice(I.indexOf(R,1))}),1e3*$.ttl);I.push(R)}return v={selectBaseUrlIndex:function(N){let $=NaN;if(isNaN(N.selectedIdx)){const R=w.getSteeringDataFromManifest();R&&R.defaultServiceLocationArray.length>0&&($=M(R.defaultServiceLocationArray,N.baseUrls))}const q=w.getCurrentSteeringResponseData();return N.baseUrls&&N.baseUrls.length&&q&&q.pathwayPriority&&q.pathwayPriority.length&&($=M(q.pathwayPriority,N.baseUrls)),$},setConfig:function(N){N.blacklistController&&(_=N.blacklistController),N.contentSteeringController&&(w=N.contentSteeringController),y.on(N.addBlacklistEventName,D,v)},reset:function(){I.forEach((N=>clearTimeout(N))),I=[]}},w=vu(b).getInstance(),v}cg.__dashjs_factory_name="ContentSteeringSelector";var _w=n.default.getClassFactory(cg);function ug(){const b=this.context,y=(0,m.default)(b).getInstance(),v=(0,c.default)(b).getInstance();let w,_,I,M,D,N;function $(){D.reset(),_.reset()}return w={chooseSelector:function(q){(0,ut.checkParameterType)(q,"boolean"),N=q?M:I},select:function(q){if(!q)return;if(v.get().streaming.applyContentSteering){const P=D.selectBaseUrlIndex(q);isNaN(P)||P===-1||(q.selectedIdx=P)}if(!isNaN(q.selectedIdx))return q.baseUrls[q.selectedIdx];let R=N.select(q.baseUrls);return R?(q.selectedIdx=q.baseUrls.indexOf(R),R):(y.trigger(f.default.URL_RESOLUTION_FAILED,{error:new Tt.default(Jt.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Jt.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(N===I&&$()))},reset:$,setConfig:function(q){q.selector&&(N=q.selector),q.contentSteeringSelector&&(D=q.contentSteeringSelector)}},_=Zt(b).create({updateEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),I=cn(b).create({blacklistController:_}),M=jt(b).create({blacklistController:_}),D=_w(b).create(),D.setConfig({blacklistController:_,addBlacklistEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),N=I,w}ug.__dashjs_factory_name="BaseURLSelector";var xw=n.default.getClassFactory(ug);function dg(){let b,y;const v=this.context,w=(0,m.default)(v).getInstance(),_=Zn(v).getInstance();let I,M,D;function N(q){I.update(q),M.chooseSelector(y.getIsDVB(q)),w.trigger(g.default.BASE_URLS_UPDATED,{baseUrls:$(q)})}function $(q){return I.getBaseUrls(q)}return b={reset:function(){I.reset(),M.reset()},initialize:function(q){I.setConfig({adapter:y,contentSteeringController:D}),N(q)},resolve:function(q){const R=I.getForPath(q).reduce(((P,z)=>{const X=M.select(z);return X?(_.isRelative(X.url)?P.url=_.resolve(X.url,P.url):(P.url=X.url,P.serviceLocation=X.serviceLocation),P.availabilityTimeOffset=X.availabilityTimeOffset,P.availabilityTimeComplete=X.availabilityTimeComplete,P.queryParams=X.queryParams,P):new sr}),new sr);if(!_.isRelative(R.url))return R},setConfig:function(q){q.baseURLTreeModel&&(I=q.baseURLTreeModel),q.baseURLSelector&&(M=q.baseURLSelector),q.adapter&&(y=q.adapter),q.contentSteeringController&&(D=q.contentSteeringController)},getBaseUrls:$,update:N},I=Rt(v).create(),M=xw(v).create(),w.on(f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,(function(q){I.invalidateSelectedIndexes(q.entry)}),b),b}dg.__dashjs_factory_name="BaseURLController";var Iw=n.default.getClassFactory(dg);class Tu{constructor(y){if(this.offset=y._offset,this.type=y.type,this.size=y.size,this.boxes=[],y.boxes)for(let v=0;v<y.boxes.length;v++)this.boxes.push(new Tu(y.boxes[v]));switch(this.isComplete=!0,y.type){case"sidx":if(this.timescale=y.timescale,this.earliest_presentation_time=y.earliest_presentation_time,this.first_offset=y.first_offset,this.references=y.references,y.references){this.references=[];for(let v=0;v<y.references.length;v++){let w={reference_type:y.references[v].reference_type,referenced_size:y.references[v].referenced_size,subsegment_duration:y.references[v].subsegment_duration};this.references.push(w)}}break;case"emsg":this.id=y.id,this.version=y.version===1?1:0,this.value=y.value,this.timescale=y.timescale,this.scheme_id_uri=y.scheme_id_uri,this.presentation_time_delta=y.version===1?y.presentation_time:y.presentation_time_delta,this.event_duration=y.event_duration,this.message_data=y.message_data;break;case"mdhd":this.timescale=y.timescale;break;case"mfhd":this.sequence_number=y.sequence_number;break;case"subs":this.entry_count=y.entry_count,this.entries=y.entries;break;case"tfhd":this.base_data_offset=y.base_data_offset,this.sample_description_index=y.sample_description_index,this.default_sample_duration=y.default_sample_duration,this.default_sample_size=y.default_sample_size,this.default_sample_flags=y.default_sample_flags,this.flags=y.flags;break;case"tfdt":this.version=y.version,this.baseMediaDecodeTime=y.baseMediaDecodeTime,this.flags=y.flags;break;case"trun":if(this.sample_count=y.sample_count,this.first_sample_flags=y.first_sample_flags,this.data_offset=y.data_offset,this.flags=y.flags,this.samples=y.samples,y.samples){this.samples=[];for(let v=0,w=y.samples.length;v<w;v++){let _={sample_size:y.samples[v].sample_size,sample_duration:y.samples[v].sample_duration,sample_composition_time_offset:y.samples[v].sample_composition_time_offset};this.samples.push(_)}}break;case"prft":this.version=y.version,this.reference_track_ID=y.reference_track_ID,this.ntp_timestamp_sec=y.ntp_timestamp_sec,this.ntp_timestamp_frac=y.ntp_timestamp_frac,this.media_time=y.media_time,this.flags=y.flags}}getChildBox(y){for(let v=0;v<this.boxes.length;v++)if(this.boxes[v].type===y)return this.boxes[v]}getChildBoxes(y){let v=[];for(let w=0;w<this.boxes.length;w++)this.boxes[w].type===y&&v.push(this.boxes[w]);return v}}var Aw=Tu;function fg(){let b,y;function v(_){let I=[];if(!_||!y||typeof y.fetchAll!="function")return I;let M,D=y.fetchAll(_);for(let N=0,$=D.length;N<$;N++)M=w(D[N]),M&&I.push(M);return I}function w(_){if(!_)return null;let I=new Aw(_);return _.hasOwnProperty("_incomplete")&&(I.isComplete=!_._incomplete),I}return b={getBox:function(_){return _&&y&&y.boxes&&y.boxes.length!==0&&typeof y.fetch=="function"?w(y.fetch(_)):null},getBoxes:v,setData:function(_){y=_},getLastBox:function(){if(!y||!y.boxes||!y.boxes.length)return null;let _=v(y.boxes[y.boxes.length-1].type);return _.length>0?_[_.length-1]:null}},b}fg.__dashjs_factory_name="IsoFile";var Rw=n.default.getClassFactory(fg),mo=t(6877),Su=class{constructor({found:b,sizeOfLastCompletedBox:y,sizeOfLastFoundTargetBox:v,startOffsetOfLastCompletedBox:w,startOffsetOfLastFoundTargetBox:_,typeOfLastCompletedBox:I,typeOfLastTargetBox:M}){this.found=b!==void 0&&b,this.sizeOfLastCompletedBox=y!==void 0?y:0,this.sizeOfLastFoundTargetBox=v!==void 0?v:0,this.startOffsetOfLastCompletedBox=w!==void 0?w:0,this.startOffsetOfLastFoundTargetBox=_!==void 0?_:0,this.typeOfLastCompletedBox=I!==void 0?I:null,this.typeOfLastTargetBox=M!==void 0?M:null}};function hg(){let b,y,v=this.context;function w(M){if(!M)return null;M.fileStart===void 0&&(M.fileStart=0);let D=mo.parseBuffer(M),N=Rw(v).create();return N.setData(D),N}function _(M,D){return M[D+3]>>>0|M[D+2]<<8>>>0|M[D+1]<<16>>>0|M[D]<<24>>>0}function I(M,D){return String.fromCharCode(M[D++])+String.fromCharCode(M[D++])+String.fromCharCode(M[D++])+String.fromCharCode(M[D])}return y={findInitRange:function(M){let D,N,$=null;const q=w(M);if(!q)return $;const R=q.getBox("ftyp"),P=q.getBox("moov");return b.debug("Searching for initialization."),P&&P.isComplete&&(D=R?R.offset:P.offset,N=P.offset+P.size-1,$=D+"-"+N,b.debug("Found the initialization.  Range: "+$)),$},findLastTopIsoBoxCompleted:function(M,D,N){if(N===void 0&&(N=0),!D||N+8>=D.byteLength)return new Su({found:!1});const $=D instanceof ArrayBuffer?new Uint8Array(D):D;let q,R=0,P=0,z=null;for(;N<$.byteLength;){const X=_($,N),re=I($,N+4);if(X===0)break;N+X<=$.byteLength&&(M.indexOf(re)>=0?q=new Su({found:!0,startOffsetOfLastFoundTargetBox:N,sizeOfLastFoundTargetBox:X,typeOfLastTargetBox:re}):(R=N,P=X,z=re)),N+=X}return q||new Su({found:!1,startOffsetOfLastCompletedBox:R,sizeOfLastCompletedBox:P,typeOfLastCompletedBox:z})},getMediaTimescaleFromMoov:function(M){let D=w(M),N=D?D.getBox("mdhd"):void 0;return N?N.timescale:NaN},getSamplesInfo:function(M){if(!M||M.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let D,N,$,q,R,P,z,X,re,ie,J,ce,fe,me,Ee,ne,K,B=w(M),j=B.getBoxes("moof"),Se=B.getBoxes("mfhd");ne=B.getBoxes("moof").length,Ee=Se[Se.length-1].sequence_number,$=0,P=[];let se=-1,Ae=-1;for(J=0;J<j.length;J++){let Te=j[J],Re=Te.getChildBoxes("traf");for(re=0;re<Re.length;re++){let Ue=Re[re],Ne=Ue.getChildBox("tfhd"),ee=Ue.getChildBox("tfdt");R=ee.baseMediaDecodeTime;let ae=Ue.getChildBoxes("trun"),de=Ue.getChildBoxes("subs");for(ie=0;ie<ae.length;ie++){let le=ae[ie];for($=le.sample_count,me=(Ne.base_data_offset||0)+(le.data_offset||0),X=0;X<$;X++){z=le.samples[X],D=z.sample_duration!==void 0?z.sample_duration:Ne.default_sample_duration,q=z.sample_size!==void 0?z.sample_size:Ne.default_sample_size,N=z.sample_composition_time_offset!==void 0?z.sample_composition_time_offset:0;let ue={dts:R,cts:R+N,duration:D,offset:Te.offset+me,size:q,subSizes:[q]};if(de)for(ce=0;ce<de.length;ce++){let pe=de[ce];if(se<pe.entry_count-1&&X>Ae&&(se++,Ae+=pe.entries[se].sample_delta),X==Ae){ue.subSizes=[];let W=pe.entries[se];for(fe=0;fe<W.subsample_count;fe++)ue.subSizes.push(W.subsamples[fe].subsample_size)}}P.push(ue),me+=q,R+=D}}K=R-ee.baseMediaDecodeTime}}return{sampleList:P,lastSequenceNumber:Ee,totalDuration:K,numSequences:ne}},parse:w},b=(0,l.default)(v).getInstance().getLogger(y),y}hg.__dashjs_factory_name="BoxParser";var bl=n.default.getSingletonFactory(hg),mg=t(559);const wu={0:void 0,1:{channels:1,lfe:0},2:{channels:2,lfe:0},3:{channels:3,lfe:0},4:{channels:4,lfe:0},5:{channels:5,lfe:0},6:{channels:5,lfe:1},7:{channels:7,lfe:1},8:{channels:2,lfe:0},9:{channels:3,lfe:0},10:{channels:4,lfe:0},11:{channels:6,lfe:1},12:{channels:7,lfe:1},13:{channels:22,lfe:2},14:{channels:7,lfe:1},15:{channels:10,lfe:2},16:{channels:9,lfe:1},17:{channels:11,lfe:1},18:{channels:13,lfe:1},19:{channels:11,lfe:1},20:{channels:13,lfe:1}};function gg(b){return b==0?0:b.toString(2).match(/1/g).length}function _u(b,y){let v,w=parseInt("0x"+b,16),_=w&y[0],I=w&y[1];return v=gg(_)+2*gg(I),v}var pg=function(b,y=!1){let v;if(!b||!b.schemeIdUri||!b.value)return;const w=b.schemeIdUri,_=b.value;return w==="urn:mpeg:dash:23003:3:audio_channel_configuration:2011"||w==="urn:mpeg:mpegB:cicp:ChannelConfiguration"?v=wu[_]&&wu[_].channels+(y?wu[_].lfe:0):w==="tag:dolby.com,2014:dash:audio_channel_configuration:2011"?v=(function(I,M){if(I.length===4)return _u(I,[63880+(M?6:0),1648])})(_,y):w==="tag:dolby.com,2015:dash:audio_channel_configuration:2015"?v=(function(I,M){if(I.length===6)return I==="800000"?24:_u(I,[56834+(M?4160:0),205245])})(_,y):w==="tag:dts.com,2014:dash:audio_channel_configuration:2012"?v=parseInt(_):w==="tag:dts.com,2018:uhd:audio_channel_configuration"&&(v=(function(I,M){if(!(I.length>8))return _u(I,[4294901727+(M?65568:0),0])})(_,y)),v};function yg(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_,I,M,D,N;function $(J,ce,fe,me=void 0){const Ee=R(J,ce,fe,me);return _.isCodecSupportedBasedOnTestedConfigurations(Ee,J)}function q(J,ce,fe,me,Ee,ne=void 0){const K=R(J,ce,fe,ne),B=JSON.stringify(K);me.has(B)||(me.add(B),Ee.push(K))}function R(J,ce,fe,me){let Ee=null;switch(J){case h.default.VIDEO:Ee=(function(ne,K,B){let j={codec:K,width:ne&&ne.width||null,height:ne&&ne.height||null,framerate:w.getFramerate(ne)||null,bitrate:ne&&ne.bandwidth||null,isSupported:!0};if(ne.tagName===ve.default.PRESELECTION&&B&&(j.width||(j.width=B.width||null),j.height||(j.height=B.height||null),j.bitrate||(j.bitrate=B.bandwidth||null),j.framerate||(j.framerate=w.getFramerate(B)||null)),I.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(Object.assign(j,z(ne)),ne.tagName===ve.default.PRESELECTION&&B)){let Ae=z(B),Te=Ae.isSupported;delete Ae.isSupported,j.isSupported=j.isSupported&&Te,P(j,Ae)}let Se=j.isSupported;if(I.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(Object.assign(j,X(ne)),ne.tagName===ve.default.PRESELECTION&&B)){let Ae=X(B),Te=Ae.isSupported;delete Ae.isSupported,j.isSupported=j.isSupported&&Te,P(j,Ae)}let se=j.isSupported;return Se&&se||(j.isSupported=!1),j})(ce,fe,me);break;case h.default.AUDIO:Ee=(function(ne,K,B){let j={codec:K,samplerate:ne&&ne.audioSamplingRate||null,bitrate:ne&&ne.bandwidth||null,isSupported:!0};return ne.tagName===ve.default.PRESELECTION&&B&&(j.samplerate||(j.samplerate=B.audioSamplingRate||null),j.bitrate||(j.bitrate=B.bandwidth||null)),I.get().streaming.capabilities.filterAudioChannelConfiguration&&Object.assign(j,(function(Se,se){let Ae=Se[ve.default.AUDIO_CHANNEL_CONFIGURATION]||[],Te=null;Ae.length==0&&se&&(Ae=se[ve.default.AUDIO_CHANNEL_CONFIGURATION]||[]);const Re=Ae.map((Ue=>pg(Ue,!0)));return Re.every((Ue=>Ue==Re[0]))&&(Te=Re[0]),{channels:Te}})(ne,B)),j})(ce,fe,me);break;default:return Ee}return me&&(Ee=re(me,Ee)),re(ce,Ee)}function P(J,ce){for(const fe in ce)Object.prototype.hasOwnProperty.call(ce,fe)&&!(fe in J)&&(J[fe]=ce[fe]);return J}function z(J){let ce={colorGamut:null,transferFunction:null,isSupported:!0};for(const fe of J.EssentialProperty||[])fe.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes(fe.value.toString())?ce.colorGamut=h.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:fe.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes(fe.value.toString())?ce.colorGamut=h.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:fe.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes(fe.value.toString())?ce.colorGamut=h.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:fe.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes(fe.value.toString())?ce.colorGamut=null:fe.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(ce.isSupported=!1),fe.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes(fe.value.toString())?ce.transferFunction=h.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:fe.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes(fe.value.toString())?ce.transferFunction=h.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:fe.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes(fe.value.toString())?ce.transferFunction=h.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:fe.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes(fe.value.toString())?ce.transferFunction=null:fe.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(ce.isSupported=!1);return ce}function X(J){let ce={isSupported:!0,hdrMetadataType:null};for(const fe of J.EssentialProperty||[])fe.schemeIdUri===h.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&fe.value===h.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?ce.hdrMetadataType=h.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:fe.schemeIdUri===h.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&fe.value===h.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?ce.hdrMetadataType=h.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:fe.schemeIdUri===h.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&fe.value===h.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?ce.hdrMetadataType=h.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:fe.schemeIdUri===h.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(ce.isSupported=!1);return ce}function re(J,ce){return D&&J&&J[ve.default.CONTENT_PROTECTION]&&J[ve.default.CONTENT_PROTECTION].length>0&&(ce.keySystemsMetadata=D.getSupportedKeySystemMetadataFromContentProtection(J[ve.default.CONTENT_PROTECTION])),ce}function ie(J){if(!J||J.length===0)return!0;let ce=0;for(;ce<J.length;){if(!_.supportsEssentialProperty(J[ce]))return N.debug("[Stream] EssentialProperty not supported: "+J[ce].schemeIdUri),!1;ce+=1}return!0}return v={setConfig:function(J){J&&(J.adapter&&(w=J.adapter),J.capabilities&&(_=J.capabilities),J.settings&&(I=J.settings),J.protectionController&&(D=J.protectionController),J.customParametersModel&&(M=J.customParametersModel))},filterUnsupportedFeatures:function(J){return new Promise((ce=>{const fe=[h.default.VIDEO,h.default.AUDIO],me=[];fe.forEach((Ee=>{(function(K,B){if(!K||!K.Period||K.Period.length===0)return[];const j=new Set,Se=[];return K.Period.forEach((se=>{se.AdaptationSet.forEach((Ae=>{w.getIsTypeOf(Ae,B)&&Ae.Representation.forEach(((Te,Re)=>{const Ue=w.getCodec(Ae,Re,!1);q(B,Te,Ue,j,Se);const Ne=w.getSupplementalCodecs(Te);Ne.length>0&&q(B,Te,Ne[0],j,Se)}))})),se.Preselection&&se.Preselection.length&&se.Preselection.forEach((Ae=>{if(w.getPreselectionIsTypeOf(Ae,se.AdaptationSet,B)){const Te=w.getCodecForPreselection(Ae,se.AdaptationSet),Re=w.getCommonRepresentationForPreselection(Ae,se.AdaptationSet);q(B,Ae,Te,j,Se,Re)}}))})),Se})(J,Ee).forEach((K=>{me.push(_.runCodecSupportCheck(K,Ee))}))})),Promise.allSettled(me).then((()=>(fe.forEach((Ee=>{(function(ne,K){K&&K.Period&&K.Period.length!==0&&K.Period.forEach((B=>{(function(j,Se){j&&j.AdaptationSet&&j.AdaptationSet.length!==0&&(j.AdaptationSet=j.AdaptationSet.filter((se=>{w.getIsTypeOf(se,Se)&&(function(Te,Re){Te.Representation&&Te.Representation.length!==0&&(Te.Representation=Te.Representation.filter(((Ue,Ne)=>{const ee=w.getCodec(Te,Ne,!1),ae=$(Re,Ue,ee);let de=(function(le,ue){let pe=!1;const W=w.getSupplementalCodecs(le);return W.length>0&&(W.length>1&&N.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),pe=$(ue,le,W[0])),pe})(Ue,Re);return de&&(N.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${Ue.id}`),Ue.codecs=Ue[ve.default.SUPPLEMENTAL_CODECS]),ae||de||N.warn(`[CapabilitiesFilter] Codec ${ee} not supported. Removing Representation with ID ${Ue.id}`),ae||de})))})(se,Se);const Ae=se.Representation&&se.Representation.length>0;return Ae||(y.trigger(f.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:se}),N.warn(`[CapabilitiesFilter] AdaptationSet with ID ${se.id?se.id:"undefined"} and codec ${se.codecs?se.codecs:"undefined"} has been removed because of no supported Representation`)),Ae})))})(B,ne),(function(j,Se){j&&j.Preselection&&j.Preselection.length!==0&&(j.Preselection=j.Preselection.filter((se=>{if(w.getPreselectionIsTypeOf(se,j.AdaptationSet,Se)){const Ae=w.getCodecForPreselection(se,j.AdaptationSet);let Te=!0;if(Ae){let Re=w.getCommonRepresentationForPreselection(se,j.AdaptationSet);Te=$(Se,se,Ae,Re)}return Te||N.warn(`[CapabilitiesFilter] Preselection@codecs ${Ae} not supported. Removing Preselection with ID ${se.id}`),Te}return!0})))})(B,ne)}))})(Ee,J)})),I.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(function(Ee){Ee&&Ee.Period&&Ee.Period.length!==0&&Ee.Period.forEach((ne=>{ne.AdaptationSet=ne.AdaptationSet.filter((K=>!K.Representation||K.Representation.length===0||!!ie(w.getEssentialProperties(K))&&(K.Representation=K.Representation.filter((B=>ie(w.getEssentialProperties(B)))),K.Representation&&K.Representation.length>0))),ne.Preselection&&ne.Preselection.length&&(ne.Preselection=ne.Preselection.filter((K=>!!ie(w.getEssentialProperties(K))||(N.warn(`[CapabilitiesFilter] removed Preselection (id: ${K.id}) with unsupported EssentialProperty`),!1))))}))})(J),(function(Ee){Ee&&Ee.Period&&Ee.Period.length!==0&&Ee.Period.forEach((ne=>{ne.Preselection&&(ne.Preselection=ne.Preselection.filter((K=>{const B=String(K.preselectionComponents).split(" ").length;return B!==1&&N.warn(`Multi-Representation Preselection (id: ${K.id}) removed as not supported.`),B===1})))}))})(J),(function(Ee){Ee&&Ee.Period&&Ee.Period.length!==0&&Ee.Period.forEach((ne=>{ne.Preselection&&(ne.Preselection=ne.Preselection.filter((K=>{const B=String(K.preselectionComponents).split(" "),j=ne.AdaptationSet.map((Se=>Se.id));return B.every((Se=>j.includes(Se)))})))}))})(J),(function(Ee){if(!Ee||!Ee.Period||Ee.Period.length===0)return Promise.resolve();const ne=[];return Ee.Period.forEach((K=>{ne.push((function(B){return new Promise((j=>{if(!B||!B.AdaptationSet||B.AdaptationSet.length===0)return void j();const Se=[];B.AdaptationSet.forEach((se=>{Se.push((function(Ae){return new Promise((Te=>{if(!Ae.Representation||Ae.Representation.length===0)return void Te();const Re=[];Ae.Representation.forEach((Ue=>{Re.push((function(Ne){const ee=[],ae=M.getCustomCapabilitiesFilters();return ae&&ae.length!==0?ae.forEach((de=>{ee.push(new Promise((le=>le(de(Ne)))))})):ee.push(Promise.resolve(!0)),Promise.all(ee)})(Ue))})),Promise.all(Re).then((Ue=>{Ae.Representation=Ae.Representation.filter(((Ne,ee)=>{let ae=Ue[ee].every((de=>de));return ae||N.debug("[Stream] Representation "+Ne.id+" has been removed because of unsupported CustomFilter"),ae})),Te()})).catch((Ue=>{N.warn("[Stream] at least one promise rejected in CustomFilter with error: ",Ue),Te()}))}))})(se))})),Promise.all(Se).then((()=>{B.AdaptationSet=B.AdaptationSet.filter((se=>se.Representation&&se.Representation.length>0)),j()})).catch((()=>{j()}))}))})(K))})),Promise.all(ne)})(J)))).then((()=>{ce()})).catch((Ee=>{N.error(Ee),ce()}))}))}},N=(0,l.default)(b).getInstance().getLogger(v),v}yg.__dashjs_factory_name="CapabilitiesFilter";var Cw=n.default.getSingletonFactory(yg);function bg(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_,I,M,D,N,$,q,R;function P(){w=!1;const Ee=et.default.parseUserAgent();_=Ee&&Ee.browser&&Ee.browser.name&&Ee.browser.name.toLowerCase()==="safari"}function z(){w=!1}function X(Ee){if(Ee.streamId!==D.getActiveStreamInfo().id||!q)return;const ne=N.getLiveDelay();N.getBufferLevel()>ne/2&&(q=!1)}function re(Ee){Ee.streamId===D.getActiveStreamInfo().id&&(q=Ee.state===o.BUFFER_EMPTY)}function ie(){$.getCatchupModeEnabled()||I.setPlaybackRate(1)}function J(){N.getIsDynamic()&&$.getCatchupModeEnabled()&&($.getCatchupPlaybackRates().max>0||$.getCatchupPlaybackRates().min<0)&&!N.isPaused()&&!N.isSeeking()&&(function(){try{return!N.getTime()>0||w?!1:fe()===h.default.LIVE_CATCHUP_MODE_LOLP?(function(Ee,ne){try{return Math.abs(ce())>0||Ee<ne}catch{return!1}})(N.getBufferLevel(),M.get().streaming.liveCatchup.playbackBufferMin):(function(){try{return Math.abs(ce())>0}catch{return!1}})()}catch{return!1}})()&&(function(){if(!w&&I){let Ee;const ne=I.getPlaybackRate(),K=$.getCatchupPlaybackRates(),B=N.getBufferLevel(),j=ce(),Se=$.getCatchupMaxDrift();if(!isNaN(Se)&&Se>0&&j>Se)R.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),w=!0,N.seekToCurrentLive(!0,!1);else{const se=N.getCurrentLiveLatency(),Ae=N.getLiveDelay();Ee=fe()===h.default.LIVE_CATCHUP_MODE_LOLP?(function(Re,Ue,Ne,ee,ae){let de;if(ae<ee){const le=Math.abs(Re.min),ue=5*(ae-ee);de=1-le+2*le/(1+Math.pow(Math.E,-ue)),R.debug("[LoL+ playback control_buffer-based] bufferLevel: "+ae+", newRate: "+de)}else{if(Math.abs(Ue-Ne)<=.02*Ne)de=1;else{const ue=Ue-Ne,pe=ue<0?Math.abs(Re.min):Re.max,W=5*ue;de=1-pe+2*pe/(1+Math.pow(Math.E,-W))}R.debug("[LoL+ playback control_latency-based] latency: "+Ue+", newRate: "+de)}return de})(K,se,Ae,M.get().streaming.liveCatchup.playbackBufferMin,B):(function(Re,Ue,Ne,ee){if(q)return 1;const ae=Ue-Ne,de=ae<0?Math.abs(Re.min):Re.max,le=5*ae;let ue=1-de+2*de/(1+Math.pow(Math.E,-le));return N.getPlaybackStalled()&&ee<=Ne/2&&ae>0&&(ue=1),ue})(K,se,Ae,B);const Te=_?.25:.02/(.5/K.max);(Ee&&Math.abs(ne-Ee)>=Te||Ee==1)&&(R.debug(`[CatchupController]: Setting playback rate to ${Ee}`),I.setPlaybackRate(Ee))}}})()}function ce(){return N.getCurrentLiveLatency()-N.getLiveDelay()}function fe(){const Ee=M.get().streaming.liveCatchup.playbackBufferMin;return M.get().streaming.liveCatchup.mode!==h.default.LIVE_CATCHUP_MODE_LOLP||Ee===null||isNaN(Ee)?h.default.LIVE_CATCHUP_MODE_DEFAULT:h.default.LIVE_CATCHUP_MODE_LOLP}function me(){$.getCatchupPlaybackRates(!0)}return v={reset:function(){y.off(g.default.BUFFER_LEVEL_UPDATED,X,v),y.off(g.default.BUFFER_LEVEL_STATE_CHANGED,re,v),y.off(g.default.PLAYBACK_PROGRESS,J,v),y.off(g.default.PLAYBACK_TIME_UPDATED,J,v),y.off(g.default.PLAYBACK_SEEKED,z,v),y.off(f.default.SETTING_UPDATED_CATCHUP_ENABLED,ie,v),y.off(f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,me,v),y.off(f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,me,v),y.off(g.default.STREAM_INITIALIZED,me,v),P(),I.setPlaybackRate(1,!0)},setConfig:function(Ee){Ee&&(Ee.settings&&(M=Ee.settings),Ee.videoModel&&(I=Ee.videoModel),Ee.streamController&&(D=Ee.streamController),Ee.playbackController&&(N=Ee.playbackController),Ee.mediaPlayerModel&&($=Ee.mediaPlayerModel))},initialize:function(){y.on(g.default.BUFFER_LEVEL_UPDATED,X,v),y.on(g.default.BUFFER_LEVEL_STATE_CHANGED,re,v),y.on(g.default.PLAYBACK_PROGRESS,J,v),y.on(g.default.PLAYBACK_TIME_UPDATED,J,v),y.on(g.default.PLAYBACK_SEEKED,z,v),y.on(f.default.SETTING_UPDATED_CATCHUP_ENABLED,ie,v),y.on(f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,me,v),y.on(f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,me,v),y.on(g.default.STREAM_INITIALIZED,me,v),me()}},R=(0,l.default)(b).getInstance().getLogger(v),P(),v}bg.__dashjs_factory_name="CatchupController";var kw=n.default.getSingletonFactory(bg);const Lw=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Eg="dashjs_?_bitrate",vg="dashjs_?_settings",gs="localStorage",Tg="lastBitrate",Sg="lastMediaSettings";function wg(b){b=b||{};const y=this.context,v=b.settings;let w,_,I;function M(q){if(I!==void 0)return I;let R;I=!1;try{typeof window<"u"&&(R=window[q])}catch(P){return _.warn("DOMStorage access denied: "+P.message),I}if(!R||q!==gs)return I;try{R.setItem("1","1"),R.removeItem("1"),I=!0}catch(P){_.warn("DOMStorage is supported, but cannot be used: "+P.message)}return I}function D(){return Math.round(new Date().getTime()/6e5)*6e5}function N(q,R){return M(q)&&v.get().streaming[R+"CachingInfo"].enabled}function $(){if(!v)throw new Error(h.default.MISSING_CONFIG_ERROR)}return w={getSavedBitrateSettings:function(q){if($(),!v.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let R=NaN;if(N(gs,Tg)){const P=Eg.replace(/\?/,q);try{const z=JSON.parse(localStorage.getItem(P))||{},X=new Date().getTime()-parseInt(z.timestamp,10)>=v.get().streaming.lastBitrateCachingInfo.ttl||!1,re=parseFloat(z.bitrate);isNaN(re)||X?X&&localStorage.removeItem(P):(R=re,_.debug("Last saved bitrate for "+q+" was "+re))}catch{return null}}return R},setSavedBitrateSettings:function(q,R){if(N(gs,Tg)&&R){const P=Eg.replace(/\?/,q);try{localStorage.setItem(P,JSON.stringify({bitrate:R.toFixed(3),timestamp:D()}))}catch(z){_.error(z.message)}}},getSavedMediaSettings:function(q){if($(),!v.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let R=null;if(N(gs,Sg)){const P=vg.replace(/\?/,q);try{const z=JSON.parse(localStorage.getItem(P))||{},X=new Date().getTime()-parseInt(z.timestamp,10)>=v.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;R=z.settings,X&&(localStorage.removeItem(P),R=null)}catch{return null}}return R},setSavedMediaSettings:function(q,R){if(N(gs,Sg)){const P=vg.replace(/\?/,q);try{localStorage.setItem(P,JSON.stringify({settings:R,timestamp:D()}))}catch(z){_.error(z.message)}}}},_=(0,l.default)(y).getInstance().getLogger(w),M(gs)&&Lw.forEach((q=>{const R=localStorage.getItem(q.oldKey);if(R){localStorage.removeItem(q.oldKey);try{localStorage.setItem(q.newKey,R)}catch(P){_.error(P.message)}}})),w}wg.__dashjs_factory_name="DOMStorage";var Nw=n.default.getSingletonFactory(wg),El=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isPreselection=!1,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.segmentSequenceProperties=[],this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},_g=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},Dw=class{constructor(){this.availableFrom=null,this.duration=NaN,this.dvrWindowSize=NaN,this.isDynamic=!1,this.loadedTime=null,this.maxFragmentDuration=null,this.minBufferTime=NaN,this.protocol=null,this.serviceDescriptions=[]}},Pw=class{constructor(b){this.valid=b[0]=="/",this.path=b.split("/").filter((y=>y.length!==0)).map((y=>{let v={name:y},w=y.indexOf("[");if(w!=-1){v.name=y.substring(0,w);let _=y.substring(w+1,y.length-1);this.valid=this.valid&&_.indexOf("[")==-1;let I=_.indexOf("=");I!=-1?(v.attribute={name:_.substring(1,I),value:_.substring(I+1)},["'",'"'].indexOf(v.attribute.value[0])!=-1&&(v.attribute.value=v.attribute.value.substring(1,v.attribute.value.length-1))):v.position=parseInt(_,10)-1}return v}))}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return this.path[this.path.length-1].name==="text()"}getMpdTarget(b,y){let v=null,w=b,_=1,I="MPD";for(;_<this.path.length&&w!==null;){v=w;let M=this.path[_];if(I=M.name,_!==this.path.length-1||!I.startsWith("@")&&I!=="text()"){let D=v[I]||[];if(D.length===0&&v[I]&&D.push(v[I]),M.position)w=D[M.position]||null;else if(M.attribute){let N=M.attribute;w=D.filter(($=>$[N.name]==N.value))[0]||null}else w=Array.isArray(D)?D[0]:D}_++}return w===null?null:I.startsWith("@")?{name:I.substring(1),leaf:w,target:w}:I==="text()"?{name:"__text",leaf:w,target:w}:{name:I,leaf:w,target:y?v:w}}},Mw=class{constructor(b,y,v){this.action=b,this.xpath=y,this.value=v,this.position=null}getMpdTarget(b){let y=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(b,y)}};function xg(){let b,y;const v=this.context;return b={getIsPatch:function(w){return w&&w.hasOwnProperty(ve.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(w){return w&&w[ve.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(w){return w&&w.hasOwnProperty(ve.default.ORIGINAL_PUBLISH_TIME)?new Date(w[ve.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(w){return w?(w.__children||[]).map((_=>{const I=_.tagName;if(I!=="add"&&I!=="remove"&&I!=="replace")return y.warn(`Ignoring node of invalid action: ${I}`),null;let M=_.sel;if(I==="add"&&_.type){if(!_.type.startsWith("@"))return y.warn(`Ignoring add action for prefixed namespace declaration: ${_.type}=${_.__text}`),null;M=`${M}/${_.type}`}let D=new Pw(M);if(!D.isValid())return y.warn(`Ignoring action with invalid selector: ${I} - ${M}`),null;let N=null;D.findsAttribute()||D.findsTextReplace()?N=_.__text||"":I!=="remove"&&(N=_.__children.reduce(((q,R)=>{let P=R.tagName;return P!=="#text"&&(q[P]=q[P]||[],q[P].push(R)),q}),{}));let $=new Mw(I,D,N);return I==="add"&&($.position=_.pos),$})).filter((_=>!!_)):[]},getPublishTime:function(w){return w&&w.hasOwnProperty(ve.default.PUBLISH_TIME)?new Date(w[ve.default.PUBLISH_TIME]):null}},y=(0,l.default)(v).getInstance().getLogger(b),b}xg.__dashjs_factory_name="PatchManifestModel";var Ow=n.default.getSingletonFactory(xg);function Ha(b={}){let y=[];if(b.irregular)return b.irregular;if(b.regular)return b.regular;if(b.language){y=y.concat(b.language,b.extendedLanguageSubtags||[],b.script||[],b.region||[],b.variants||[]);const v=b.extensions||[];let w=-1;for(;++w<v.length;){const _=v[w];_.singleton&&_.extensions&&_.extensions.length>0&&y.push(_.singleton,..._.extensions)}}return b.privateuse&&b.privateuse.length>0&&y.push("x",...b.privateuse),y.join("-")}function Jr(b){const y=typeof b=="string"?b.charCodeAt(0):b;return y>=97&&y<=122||y>=65&&y<=90}function ps(b){const y=typeof b=="string"?b.charCodeAt(0):b;return y>=48&&y<=57}function xa(b){return Jr(b)||ps(b)}const Fw=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],Ig={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},zw={}.hasOwnProperty;function Ia(b,y={}){const v={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},w=String(b),_=w.toLowerCase();let I=0;if(b==null)throw new Error("Expected string, got `"+b+"`");if(zw.call(Ig,_)){const D=Ig[_];return y.normalize!==void 0&&y.normalize!==null&&!y.normalize||typeof D!="string"?(v[Fw.includes(_)?"regular":"irregular"]=w,v):Ia(D)}for(;Jr(_.charCodeAt(I))&&I<9;)I++;if(I>1&&I<9){if(v.language=w.slice(0,I),I<4){let D=0;for(;_.charCodeAt(I)===45&&Jr(_.charCodeAt(I+1))&&Jr(_.charCodeAt(I+2))&&Jr(_.charCodeAt(I+3))&&!Jr(_.charCodeAt(I+4));){if(D>2)return M(I,3,"Too many extended language subtags, expected at most 3 subtags");v.extendedLanguageSubtags.push(w.slice(I+1,I+4)),I+=4,D++}}for(_.charCodeAt(I)===45&&Jr(_.charCodeAt(I+1))&&Jr(_.charCodeAt(I+2))&&Jr(_.charCodeAt(I+3))&&Jr(_.charCodeAt(I+4))&&!Jr(_.charCodeAt(I+5))&&(v.script=w.slice(I+1,I+5),I+=5),_.charCodeAt(I)===45&&(Jr(_.charCodeAt(I+1))&&Jr(_.charCodeAt(I+2))&&!Jr(_.charCodeAt(I+3))?(v.region=w.slice(I+1,I+3),I+=3):ps(_.charCodeAt(I+1))&&ps(_.charCodeAt(I+2))&&ps(_.charCodeAt(I+3))&&!ps(_.charCodeAt(I+4))&&(v.region=w.slice(I+1,I+4),I+=4));_.charCodeAt(I)===45;){const D=I+1;let N=D;for(;xa(_.charCodeAt(N));){if(N-D>7)return M(N,1,"Too long variant, expected at most 8 characters");N++}if(!(N-D>4||N-D>3&&ps(_.charCodeAt(D))))break;v.variants.push(w.slice(D,N)),I=N}for(;_.charCodeAt(I)===45&&_.charCodeAt(I+1)!==120&&xa(_.charCodeAt(I+1))&&_.charCodeAt(I+2)===45&&xa(_.charCodeAt(I+3));){let D=I+2,N=0;for(;_.charCodeAt(D)===45&&xa(_.charCodeAt(D+1))&&xa(_.charCodeAt(D+2));){const $=D+1;for(D=$+2,N++;xa(_.charCodeAt(D));){if(D-$>7)return M(D,2,"Too long extension, expected at most 8 characters");D++}}if(!N)return M(D,4,"Empty extension, extensions must have at least 2 characters of content");v.extensions.push({singleton:w.charAt(I+1),extensions:w.slice(I+3,D).split("-")}),I=D}}else I=0;if(I===0&&_.charCodeAt(I)===120||_.charCodeAt(I)===45&&_.charCodeAt(I+1)===120){I=I?I+2:1;let D=I;for(;_.charCodeAt(D)===45&&xa(_.charCodeAt(D+1));){const N=I+1;for(D=N;xa(_.charCodeAt(D));){if(D-N>7)return M(D,5,"Too long private-use area, expected at most 8 characters");D++}v.privateuse.push(w.slice(I+1,D)),I=D}}return I!==w.length?M(I,6,"Found superfluous content after tag"):v;function M(D,N,$){return y.warning&&y.warning($,N,D),y.forgiving?v:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}function Uw(b,y){return function(v,w){let _=Ag(v,"tag");const I=Ag(w??"*","range"),M=[];let D=-1;for(;++D<I.length;){const N=I[D].toLowerCase();if(!y&&N==="*")continue;let $=-1;const q=[];for(;++$<_.length;)if(b(_[$].toLowerCase(),N)){if(!y)return _[$];M.push(_[$])}else q.push(_[$]);_=q}return y?M:void 0}}const xu=Uw((function(b,y){const v=b.split("-"),w=y.split("-");let _=0,I=0;if(w[I]!=="*"&&v[_]!==w[I])return!1;for(_++,I++;I<w.length;)if(w[I]!=="*"){if(!v[_])return!1;if(v[_]!==w[I]){if(v[_].length===1)return!1;_++}else _++,I++}else I++;return!0}),!0);function Ag(b,y){const v=b&&typeof b=="string"?[b]:b;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}const Iu=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],go=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],Au={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},vl={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},Tl={}.hasOwnProperty;function Sl(b){const{language:y,script:v,region:w}=b;let _;var I,M;return v&&w&&(_=vl[Ha({language:y,script:v,region:w})])?(b.script=void 0,b.region=void 0):v&&(_=vl[Ha({language:y,script:v})])?b.script=void 0:w&&(_=vl[Ha({language:y,region:w})])?b.region=void 0:y&&(_=vl[y]),_&&(b.language=void 0,I=b,M=Ia(_),I.language||(I.language=M.language),I.script||(I.script=M.script),I.region||(I.region=M.region),M.variants&&I.variants.push(...M.variants)),Ha(b)}function wl(b,y){const v={},w=Ia(String(b||"").toLowerCase(),v),_=Ha(w);if(!_)return _;let I=-1;for(;++I<Iu.length;){let M=Iu[I].from;M.slice(0,4)==="und-"&&w.language&&(M=w.language+M.slice(3)),xu(_,M).length>0&&Bw(w,M,Iu[I].to)}for(I=-1;++I<go.length;)Rg(w,go[I].from.field,go[I].from.value)&&Cg(w,go[I].to.field,go[I].to.value);if((function(M){Sl(M);const{language:D,script:N,region:$}=M;if(!D)return M;const q=Ha({language:D,script:N,region:$});q===Sl(Ia(D))?(M.script=void 0,M.region=void 0):$&&q===Sl(Ia(D+"-"+$))?M.script=void 0:N&&q===Sl(Ia(D+"-"+N))&&(M.region=void 0)})(w),w.variants.sort(),w.extensions.sort($w),v.warning){let M;for(M in Au)if(Tl.call(Au,M)){const D=Au[M],N=w[M];if(N&&Tl.call(D,N)){const $=D[N];v.warning("Deprecated "+M+" `"+N+"`, expected one of `"+$.join("`, `")+"`",-1,7)}}}return w.script&&(w.script=w.script.charAt(0).toUpperCase()+w.script.slice(1)),w.region&&(w.region=w.region.toUpperCase()),Ha(w)}function Bw(b,y,v){const w=Ia(y),_=Ia(v),I=[],M=w.language;let D;for(D in w)if(Tl.call(w,D)){const N=w[D];N&&Rg(b,D,N)&&I.push(D)}for(D in _)if(Tl.call(_,D)){const N=_[D];M&&N&&(I.includes(D)||!b[D])&&Cg(b,D,D==="language"&&N==="und"?M:N)}}function Rg(b,y,v){let w,_=!1;if(v){const I=b[y];if(w=I,Array.isArray(I)){w=[];let M=-1;for(;++M<I.length;){const D=I[M];v.includes(D)?_=!0:w.push(D)}}else I===v&&(w=null,_=!0);b[y]=w}return _}function Cg(b,y,v){const w=b[y];if(Array.isArray(w)){const _=Array.isArray(v)?v:[v];let I=-1;for(;++I<_.length;){const M=_[I];w.includes(M)||w.push(M)}}else b[y]=v}function $w(b,y){return b.singleton>y.singleton?1:b.singleton<y.singleton?-1:0}function jw(b,y){return y+10<=b.length&&b[y]===73&&b[y+1]===68&&b[y+2]===51&&b[y+3]<255&&b[y+4]<255&&b[y+6]<128&&b[y+7]<128&&b[y+8]<128&&b[y+9]<128}function kg(b,y){let v=0;return v=(127&b[y])<<21,v|=(127&b[y+1])<<14,v|=(127&b[y+2])<<7,v|=127&b[y+3],v}function qw(b,y){return y+10<=b.length&&b[y]===51&&b[y+1]===68&&b[y+2]===73&&b[y+3]<255&&b[y+4]<255&&b[y+6]<128&&b[y+7]<128&&b[y+8]<128&&b[y+9]<128}function Ru(b,y=0,v=1/0){return(function(w,_,I,M){const D=(N=w)instanceof ArrayBuffer?N:N.buffer;var N;let $=1;"BYTES_PER_ELEMENT"in M&&($=M.BYTES_PER_ELEMENT);const q=(X=w)&&X.buffer instanceof ArrayBuffer&&X.byteLength!==void 0&&X.byteOffset!==void 0?w.byteOffset:0,R=(q+w.byteLength)/$,P=(q+_)/$,z=Math.floor(Math.max(0,Math.min(P,R)));var X;return new M(D,z,Math.floor(Math.min(z+Math.max(I,0),R))-z)})(b,y,v,Uint8Array)}function Qi(b,y=!1){const v=y?b.indexOf(0):b.length,w=(function(_,I={}){let M;M=_ instanceof ArrayBuffer?new DataView(_):new DataView(_.buffer,_.byteOffset,_.byteLength);let D=0,{encoding:N}=I;if(!N){const z=M.getUint8(0),X=M.getUint8(1);z==239&&X==187&&M.getUint8(2)==191?(N=li,D=3):z==254&&X==255?(N=si,D=2):z==255&&X==254?(N=oi,D=2):N=li}if(typeof TextDecoder<"u")return new TextDecoder(N).decode(M);const{byteLength:$}=M,q=N!==si;let R,P="";for(;D<$;){switch(N){case li:if(R=M.getUint8(D),R<128)D++;else if(R>=194&&R<=223)if(D+1<$){const z=M.getUint8(D+1);z>=128&&z<=191?(R=(31&R)<<6|63&z,D+=2):D++}else D++;else if(R>=224&&R<=239)if(D+2<=$-1){const z=M.getUint8(D+1),X=M.getUint8(D+2);z>=128&&z<=191&&X>=128&&X<=191?(R=(15&R)<<12|(63&z)<<6|63&X,D+=3):D++}else D++;else if(R>=240&&R<=244)if(D+3<=$-1){const z=M.getUint8(D+1),X=M.getUint8(D+2),re=M.getUint8(D+3);z>=128&&z<=191&&X>=128&&X<=191&&re>=128&&re<=191?(R=(7&R)<<18|(63&z)<<12|(63&X)<<6|63&re,D+=4):D++}else D++;else D++;break;case si:case ar:case oi:R=M.getUint16(D,q),D+=2}P+=String.fromCodePoint(R)}return P})(new DataView(b.buffer,b.byteOffset,v),{encoding:li});return y?w:w.replace(/\0/g,"")}function Gw(b){return b.type==="PRIV"?(function(y){if(y.size<2)return;const v=Qi(y.data,!0),w=new Uint8Array(y.data.subarray(v.length+1));return{key:y.type,info:v,data:w.buffer}})(b):b.type[0]==="W"?(function(y){if(y.type==="WXXX"){if(y.size<2)return;let w=1;const _=Qi(y.data.subarray(w),!0);w+=_.length+1;const I=Qi(y.data.subarray(w));return{key:y.type,info:_,data:I}}const v=Qi(y.data);return{key:y.type,info:"",data:v}})(b):b.type==="APIC"?(function(y){const v={key:y.type,description:"",data:"",mimeType:null,pictureType:null};if(y.size<2)return;if(y.data[0]!==3)return void console.log("Ignore frame with unrecognized character encoding");const w=y.data.subarray(1).indexOf(0);if(w===-1)return;const _=Qi(Ru(y.data,1,w)),I=y.data[2+w],M=y.data.subarray(3+w).indexOf(0);if(M===-1)return;const D=Qi(Ru(y.data,3+w,M));let N;var $;return N=_==="-->"?Qi(Ru(y.data,4+w+M)):($=y.data.subarray(4+w+M))instanceof ArrayBuffer?$:$.byteOffset==0&&$.byteLength==$.buffer.byteLength?$.buffer:new Uint8Array($).buffer,v.mimeType=_,v.pictureType=I,v.description=D,v.data=N,v})(b):(function(y){if(y.size<2)return;if(y.type==="TXXX"){let w=1;const{data:_}=y,I=Qi(_.subarray(w),!0);w+=I.length+1;const M=Qi(_.subarray(w));return{key:y.type,info:I,data:M}}const v=Qi(y.data.subarray(1));return{key:y.type,info:"",data:v}})(b)}function Hw(b){const y=String.fromCharCode(b[0],b[1],b[2],b[3]),v=kg(b,4);return{type:y,size:v,data:b.subarray(10,10+v)}}const _l=10,Vw=10;function Lg(){let b,y,v,w,_,I,M;const D=this.context;function N(K,B){const j=B?B.index:0,Se=y.getAdaptationsForType(_[j].mpd.manifest,j,K);if(!Se||Se.length===0)return null;if(Se.length>1&&B){for(let Ae=0,Te=Se.length;Ae<Te;Ae++)if(se=Se[Ae],y.getRolesForAdaptation(se).filter((function(Re){return Re.schemeIdUri===h.default.DASH_ROLE_SCHEME_ID&&Re.value===ve.default.MAIN}))[0])return Se[Ae]}var se;return Se[0]}function $(K,B,j,Se,se,Ae){let Te,Re,Ue,Ne,ee,ae,de=[];if(!Se||Se.length===0)return[];const le=y.getAdaptationsForPeriod(B);for(Ne=0,ae=Se.length;Ne<ae;Ne++)if(Te=Se[Ne],Ue=y.getIndexForAdaptation(Te,K,j.index),Re=ie(le[Ue]),Ae){let ue=Re.accessibility.length;for(ee=0;ee<ue;ee++){if(!Re)continue;let pe=Re.accessibility[ee];if(pe.schemeIdUri===I.ACCESSIBILITY_CEA608_SCHEME)if(pe.value&&pe.value!==""){let W=pe.value.split(";");if(W[0].substring(0,2)==="CC")for(ee=0;ee<W.length;ee++)Re||(Re=ie.call(this,le[Ue])),ce(Re,W[ee].substring(0,3),W[ee].substring(4)),de.push(Re),Re=null;else for(ee=0;ee<W.length;ee++)Re||(Re=ie.call(this,le[Ue])),ce(Re,"CC"+(ee+1),W[ee]),de.push(Re),Re=null}else ce(Re,I.CC1,"eng"),de.push(Re),Re=null}}else se===I.IMAGE?(Re.type=I.IMAGE,de.push(Re),Re=null):Re&&de.push(Re);if(w.get().streaming.includePreselectionsInMediainfoArray){const ue=y.getPreselectionsForPeriod(B);for(Ne=0,ae=ue.length;Ne<ae;Ne++){const pe=ue[Ne];pe.hasOwnProperty("type")&&pe.type===se&&(Re=J(ue[Ne]),Re&&de.push(Re))}}return de}function q(K){const B=R(K);return y.getRegularPeriods(B)}function R(K){const B=z(K);return y.getMpd(B)}function P(){_=[]}function z(K){return K||(_.length>0?_[0].mpd.manifest:null)}function X(K){try{const B=re(K.streamInfo,_),j=y.getAdaptationsForPeriod(B);return K&&K.streamInfo&&K.streamInfo.id!==void 0&&j?j[K.index]:null}catch{return null}}function re(K,B){const j=B.length;for(let Se=0;Se<j;Se++){let se=B[Se];if(K&&K.id===se.id)return se}return null}function ie(K){if(!K)return null;let B=new El;const j=K.period.mpd.manifest.Period[K.period.index].AdaptationSet[K.index];B.id=K.id,B.index=K.index,B.codec=y.getCodec(j);const Se=w.get().streaming.enhancement.codecs;return B.type=Se.some((se=>B.codec?.includes(se)))?h.default.ENHANCEMENT:K.type,B.streamInfo=fe(K.period),B.representationCount=y.getRepresentationCount(j),B.labels=y.getLabelsForAdaptation(j),B.lang=y.getLanguageForAdaptation(j),B.segmentAlignment=y.getSegmentAlignment(j),B.subSegmentAlignment=y.getSubSegmentAlignment(j),B.viewpoint=y.getViewpointForAdaptation(j),B.accessibility=y.getAccessibilityForAdaptation(j),B.accessibility.filter((function(se){if(se.schemeIdUri&&se.schemeIdUri.search("cea-608")>=0&&M!==void 0)return!0}))[0]&&(B.embeddedCaptions=!0),B.audioChannelConfiguration=y.getAudioChannelConfigurationForAdaptation(j),B.audioChannelConfiguration.length===0&&j.Representation&&j.Representation.length>0&&(B.audioChannelConfiguration=y.getAudioChannelConfigurationForRepresentation(j.Representation[0])),B.roles=y.getRolesForAdaptation(j),B.mimeType=y.getMimeType(j),B.contentProtection=y.getContentProtectionByAdaptation(j),B.bitrateList=y.getBitrateListForAdaptation(j),B.selectionPriority=y.getSelectionPriority(j),B.contentProtection&&B.contentProtection.length>0&&(B.contentProtection=(function(se,Ae){if(!se||!se.length||!Ae)return se;const Te=y.getContentProtectionByManifest(Ae);if(!Te||!Te.length)return se;const Re=Te.reduce(((Ue,Ne)=>(Ne.refId&&Ue.set(Ne.refId,Ne),Ue)),new Map);return se.map((Ue=>{if(Ue.ref){const Ne=Re.get(Ue.ref);Ne&&Ue.mergeAttributesFromReference(Ne)}return Ue}))})(B.contentProtection,K.period.mpd.manifest),B.contentProtection=(function(se){const Ae=se.map((Te=>Te.cencDefaultKid)).filter((Te=>Te!==null));if(Ae.length){const Te=Ae[0];se.forEach((Re=>{Re.keyId=Te}))}return se})(B.contentProtection),B.normalizedKeyIds=(function(se){const Ae=new Set;return se.forEach((Te=>{Te.cencDefaultKid&&typeof Te.cencDefaultKid=="string"&&Ae.add(Te.cencDefaultKid.replace(/-/g,"").toLowerCase())})),Ae})(B.contentProtection)),B.isText=y.getIsText(j),B.essentialProperties=y.getCombinedEssentialPropertiesForAdaptationSet(j),B.supplementalProperties=y.getCombinedSupplementalPropertiesForAdaptationSet(j),B.isFragmented=y.getIsFragmented(j),B.isEmbedded=!1,B.adaptationSetSwitchingCompatibleIds=(function(se){if(!se||!se.supplementalProperties)return[];let Ae=[];const Te=se.supplementalProperties.filter((Re=>Re.schemeIdUri===ve.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI));return Te&&Te.length>0&&(Ae=Te[0].value.toString().split(",").map((Re=>Re))),Ae})(B),B.segmentSequenceProperties=y.getSegmentSequencePropertiesForAdaptationSet(j),B}function J(K){if(!K)return null;let B=new El;const j=K.period.mpd.manifest.Period[K.period.index].Preselection[K.index],Se=K.period.mpd.manifest.Period[K.period.index].AdaptationSet,se=y.getAdaptationsForPeriod(K.period);return B=ie(y.getMainAdaptationSetForPreselection(j,se)),B&&(B.isPreselection=!0,B.tag=K.tag,B.id=K.id,B.codec=y.getCodecForPreselection(j,Se),B.selectionPriority=y.getSelectionPriority(j),B.labels=y.getLabelsForAdaptation(j),B.lang=y.getLanguageForAdaptation(j),B.viewpoint=y.getViewpointForAdaptation(j),B.accessibility=y.getAccessibilityForAdaptation(j),B.audioChannelConfiguration=y.getAudioChannelConfigurationForAdaptation(j),B.roles=y.getRolesForAdaptation(j),B.essentialProperties=y.getCombinedEssentialPropertiesForAdaptationSet(j),B.supplementalProperties=y.getCombinedSupplementalPropertiesForAdaptationSet(j)),B}function ce(K,B,j){K.id=B,K.index=100+parseInt(B.substring(2,3)),K.type=I.TEXT,K.codec="cea-608-in-SEI",K.isEmbedded=!0,K.isFragmented=!1,K.lang=wl(j),K.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function fe(K){let B=new _g;return B.id=K.id,B.index=K.index,B.start=K.start,B.duration=K.duration,B.manifestInfo=(function(j){let Se=new Dw;return Se.dvrWindowSize=j.timeShiftBufferDepth,Se.loadedTime=j.manifest.loadedTime,Se.availableFrom=j.availabilityStartTime,Se.minBufferTime=j.manifest.minBufferTime,Se.maxFragmentDuration=j.maxSegmentDuration,Se.duration=y.getDuration(j.manifest),Se.isDynamic=y.getIsDynamic(j.manifest),Se.serviceDescriptions=y.getServiceDescriptions(j.manifest),Se.protocol=j.manifest.protocol,Se})(K.mpd),B.isLast=K.mpd.manifest.Period.length===1||Math.abs(B.start+B.duration-B.manifestInfo.duration)<1,B.isEncrypted=K.isEncrypted,B}function me(){if(!I)throw new Error("setConfig function has to be called previously")}function Ee(K){return _.length>0?_[0].mpd.manifest.Period[K]:null}function ne(K,B,j){let Se,se,Ae,Te,Re,Ue;if(K){for(se=K.AdaptationSet,Re=0;Re<se.length;Re+=1)for(Se=se[Re],Te=Se.Representation,Ue=0;Ue<Te.length;Ue+=1)if(Ae=Te[Ue],B===Ae.id)return j?Ue:Ae}return null}return b={applyPatchToManifest:function(K,B){v.getPatchOperations(B).forEach((j=>{let Se=j.getMpdTarget(K);if(Se===null)return;let{name:se,target:Ae,leaf:Te}=Se;if(j.xpath.findsAttribute()||se==="__text"){switch(j.action){case"add":case"replace":Ae[se]=j.value;break;case"remove":delete Ae[se]}return}let Re=(Ae[se]||[]).indexOf(Te),Ue=j.position==="prepend"||j.position==="before";if(j.action==="remove"||j.action==="replace")if(Array.isArray(Ae[se])){if(Re!=-1){let Ne=Ae[se];Ne.splice(Re,1),Ne.length>0?Ae[se]=Ne:delete Ae[se]}}else delete Ae[se];j.action!=="add"&&j.action!=="replace"||Object.keys(j.value).forEach((Ne=>{let ee=j.value[Ne],ae=Ae[Ne]||[];if(ae.length===0&&Ae[Ne]&&ae.push(Ae[Ne]),ae.length===0)ae=ee;else{let de=ae.length;de=Ne==se&&Re!=-1?Re+(Ue?0:1)+(j.action==="replace"?-1:0):Ue?0:ae.length,ae.splice.apply(ae,[de,0].concat(ee))}Ae[Ne]=ae}))}))},areMediaInfosEqual:function(K,B){if(!K||!B)return!1;const j=K.id===B.id,Se=K.codec===B.codec,se=JSON.stringify(K.viewpoint)===JSON.stringify(B.viewpoint),Ae=K.lang===B.lang,Te=JSON.stringify(K.roles)===JSON.stringify(B.roles),Re=JSON.stringify(K.accessibility)===JSON.stringify(B.accessibility),Ue=JSON.stringify(K.audioChannelConfiguration)===JSON.stringify(B.audioChannelConfiguration);return j&&Se&&se&&Ae&&Te&&Re&&Ue},getAllMediaInfoForType:function(K,B,j){let Se=_,se=j,Ae=[];if(se)me(),Se=q(se);else{if(!(_.length>0))return Ae;se=_[0].mpd.manifest}const Te=re(K,Se);let Re=y.getAdaptationsForType(se,K?K.index:null,B);return Ae=$(se,Te,K,Re,B),B===I.TEXT&&(Re=y.getAdaptationsForType(se,K?K.index:null,I.VIDEO),Ae=Ae.concat($(se,Te,K,Re,B,!0))),Ae},getAvailabilityStartTime:function(K){const B=R(K);return y.getAvailabilityStartTime(B)},getBandwidthForRepresentation:function(K,B){let j;return j=ne(Ee(B),K),j?j.bandwidth:null},getBaseURLsFromElement:function(K){return y.getBaseURLsFromElement(K)},getCodec:function(K,B,j){return y.getCodec(K,B,j)},getCodecForPreselection:function(K,B){return y.getCodecForPreselection(K,B)},getContentSteering:function(K){return y.getContentSteering(K)},getDuration:function(K){const B=z(K);return y.getDuration(B)},getEssentialProperties:function(K){try{return y.getEssentialProperties(K)}catch{return[]}},getEvent:function(K,B,j,Se){try{if(!K||!B||isNaN(j)||!Se)return null;const se=K.scheme_id_uri,Ae=K.value;if(!B[se+"/"+Ae])return null;const Te=new Sr,Re=K.timescale||1,Ue=Se.adaptation.period.start,Ne=B[se+"/"+Ae],ee=isNaN(Se.presentationTimeOffset)?isNaN(Ne.presentationTimeOffset)?0:Ne.presentationTimeOffset:Se.presentationTimeOffset;let ae,de=K.presentation_time_delta/Re;ae=K.version===0?Ue+j-ee+de:Ue-ee+de;const le=K.event_duration/Re,ue=K.id,pe=K.message_data;return Te.eventStream=Ne,Te.eventStream.value=Ae,Te.eventStream.timescale=Re,Te.duration=le,Te.id=ue,Te.calculatedPresentationTime=ae,Te.messageData=pe,Te.presentationTimeDelta=de,Te.parsedMessageData=se===h.default.ID3_SCHEME_ID_URI?(function(W){let be=0;const we=[];for(;jw(W,be);){const Ce=kg(W,be+6);W[be+5]>>6&1&&(be+=_l),be+=_l;const ze=be+Ce;for(;be+Vw<ze;){const Fe=Hw(W.subarray(be)),We=Gw(Fe);We&&we.push(We),be+=Fe.size+_l}qw(W,be)&&(be+=_l)}return we})(pe):null,Te}catch{return null}},getEventsFor:function(K,B,j){let Se=[];if(_.length>0){const se=_[0].mpd.manifest;if(K instanceof _g){const Ae=re(K,_);Se=y.getEventsForPeriod(Ae)}else if(K instanceof El){const Ae=re(j,_);Se=y.getEventStreamForAdaptationSet(se,X(K),Ae)}else if(K instanceof hn){const Ae=re(j,_);Se=y.getEventStreamForRepresentation(se,B,Ae)}}return Se},getFramerate:function(K){return y.getFramerate(K)},getIndexForRepresentation:function(K,B){return(function(j,Se){const se=ne(j,Se,!0);return se!==null?se:-1})(Ee(B),K)},getIsDVB:function(K){return y.hasProfile(K,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(K){const B=z(K);return y.getIsDynamic(B)},getIsPatch:function(K){return v.getIsPatch(K)},getIsTextTrack:function(K){return y.getIsText(K)},getIsTypeOf:function(K,B){return y.getIsTypeOf(K,B)},getLocation:function(K){return y.getLocation(K)},getMainAdaptationForType:N,getMainAdaptationSetForPreselection:function(K,B){return y.getMainAdaptationSetForPreselection(K,B)},getCommonRepresentationForPreselection:function(K,B){return y.getCommonRepresentationForPreselection(K,B)},getManifestUpdatePeriod:function(K,B=0){return y.getManifestUpdatePeriod(K,B)},getMediaInfoForType:function(K,B){if(_.length===0||!K)return null;let j=re(K,_);if(!j)return null;const Se=y.getAdaptationsForPeriod(j);let se=N(B,K);return se?ie(Se[y.getIndexForAdaptation(se,_[0].mpd.manifest,K.index)]):null},getMpd:R,getPatchLocation:function(K){const B=y.getPatchLocation(K),j=y.getPublishTime(K);return B&&B.length!==0&&j?B.filter((Se=>isNaN(Se.ttl)||j.getTime()+Se.ttl>new Date().getTime())):[]},getPeriodById:function(K){if(!K||_.length===0)return null;const B=_.filter((j=>j.id===K));return B&&B.length>0?B[0]:null},getPreselectionIsTypeOf:function(K,B,j){return y.getPreselectionIsTypeOf(K,B,j)},getProducerReferenceTimes:function(K,B){let j,Se;const se=re(K,_);return j=B?B.id:null,_.length>0&&se&&(Se=j?y.getAdaptationForId(j,_[0].mpd.manifest,se.index):y.getAdaptationForIndex(B?B.index:null,_[0].mpd.manifest,se.index)),Se?y.getProducerReferenceTimesForAdaptation(Se):[]},getPublishTime:function(K){return y.getPublishTime(K)},getRealAdaptation:function(K,B){let j,Se;const se=re(K,_);return j=B?B.id:null,_.length>0&&se&&(Se=j?y.getAdaptationForId(j,_[0].mpd.manifest,se.index):y.getAdaptationForIndex(B?B.index:null,_[0].mpd.manifest,se.index)),Se},getRealPeriodByIndex:function(K){return y.getRealPeriodForIndex(K,_[0].mpd.manifest)},getRegularPeriods:q,getRepresentationSortFunction:function(){return y.getRepresentationSortFunction()},getStreamsInfo:function(K,B){const j=[];let Se=_;if(K&&(me(),Se=q(K)),Se.length>0){(!B||B>Se.length)&&(B=Se.length);for(let se=0;se<B;se++)j.push(fe(Se[se]))}return j},getSuggestedPresentationDelay:function(){const K=_.length>0?_[0].mpd:null;return y.getSuggestedPresentationDelay(K)},getSupplementalCodecs:function(K){const B=K[ve.default.SUPPLEMENTAL_CODECS];return B?B.split(" ").map((j=>K.mimeType+';codecs="'+j+'"')):[]},getUTCTimingSources:function(){const K=z();return y.getUTCTimingSources(K)},getVoRepresentations:function(K){let B;const j=X(K);return B=y.getRepresentationsForAdaptation(j,K),B},isPatchValid:function(K,B){let j=y.getId(K),Se=v.getMpdId(B),se=y.getPublishTime(K),Ae=v.getPublishTime(B),Te=v.getOriginalPublishTime(B);return!!(j&&Se&&j==Se&&se&&Te&&se.getTime()==Te.getTime()&&Ae&&se.getTime()<Ae.getTime())},reset:P,setConfig:function(K){K&&(K.constants&&(I=K.constants),K.cea608parser&&(M=K.cea608parser),K.errHandler&&y.setConfig({errHandler:K.errHandler}),K.BASE64&&y.setConfig({BASE64:K.BASE64}))},updatePeriods:function(K){if(!K)return null;me(),_=q(K)}},y=Vn(D).getInstance(),v=Ow(D).getInstance(),w=(0,c.default)(D).getInstance(),P(),b}Lg.__dashjs_factory_name="DashAdapter";var Kw=n.default.getSingletonFactory(Lg);class Yw{static round10(y,v){return(function(w,_,I){return I===void 0||+I==0?Math[w](_):(I=+I,(_=+_)===null||isNaN(_)||typeof I!="number"||I%1!=0?NaN:(_=_.toString().split("e"),+((_=(_=Math[w](+(_[0]+"e"+(_[1]?+_[1]-I:-I)))).toString().split("e"))[0]+"e"+(_[1]?+_[1]+I:I))))})("round",y,v)}}var Ww=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},Xw=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},Qw=class{constructor(){this.t=null,this.level=null}},Zw=class{constructor(){this.target=null,this.state=o.BUFFER_EMPTY}},Jw=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},e_=class{constructor(){this.time=null,this.droppedFrames=null}};class t_{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class n_{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class r_{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var i_=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},a_=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function Ng(b){const y=(b=b||{}).settings;let v,w,_=this.context,I=(0,m.default)(_).getInstance();function M(){I.trigger(f.default.METRICS_CHANGED)}function D(z){I.trigger(f.default.METRIC_CHANGED,{mediaType:z}),M()}function N(z,X,re){I.trigger(f.default.METRIC_UPDATED,{mediaType:z,metric:X,value:re}),D(z)}function $(z,X,re){I.trigger(f.default.METRIC_ADDED,{mediaType:z,metric:X,value:re}),D(z)}function q(z,X){let re=null;return z&&(w.hasOwnProperty(z)?re=w[z]:X||(re=new Ww,w[z]=re)),re}function R(z,X,re){let ie=q(z);ie!==null&&(ie[X].push(re),ie[X].length>y.get().streaming.metrics.maxListDepth&&ie[X].shift())}function P(z,X,re){R(z,X,re),$(z,X,re)}return v={addBufferLevel:function(z,X,re){let ie=new Qw;ie.t=X,ie.level=re,P(z,o.BUFFER_LEVEL,ie)},addBufferState:function(z,X,re){let ie=new Zw;ie.target=re,ie.state=X,P(z,o.BUFFER_STATE,ie)},addDVBErrors:function(z){P(h.default.STREAM,o.DVB_ERRORS,z)},addDVRInfo:function(z,X,re,ie){let J=new Jw;J.time=X,J.range=ie,J.manifestInfo=re,P(z,o.DVR_INFO,J)},addDroppedFrames:function(z,X){let re=new e_,ie=q(z).DroppedFrames;X&&(re.time=X.creationTime,re.droppedFrames=X.droppedVideoFrames,ie.length>0&&ie[ie.length-1]==re||P(z,o.DROPPED_FRAMES,re))},addHttpRequest:function z(X,re,ie,J){let ce=new Q.HTTPRequest;re.url&&re.url!==X.url&&(z({mediaType:X.mediaType,type:X.type,url:X.url,serviceLocation:null,range:X.range,startDate:X.startDate,firstByteDate:null,endDate:null,duration:X.duration,fileLoaderType:X.fileLoaderType,resourceTimingValues:X.resourceTimingValues},{url:null,status:null,headers:null},null,J),ce.actualurl=re.url),ce.tcpid=null,ce.type=X.type,ce.url=X.url,ce.range=X.range||null,ce.trequest=X.startDate,ce.tresponse=X.firstByteDate,ce.responsecode=re.status,ce.cmsd=J,ce._tfinish=X.endDate,ce._stream=X.mediaType,ce._mediaduration=X.duration,ce._responseHeaders="";for(const fe in re.headers)ce._responseHeaders+=fe+": "+re.headers[fe]+`\r
`;ce._serviceLocation=X.serviceLocation||null,ce._fileLoaderType=X.fileLoaderType,ce._resourceTimingValues=X.resourceTimingValues,ce._streamId=X&&X.representation&&X.representation.mediaInfo&&X.representation.mediaInfo.streamInfo?X.representation.mediaInfo.streamInfo.id:null,ie?ie.forEach((fe=>{(function(me,Ee,ne,K){let B=new Q.HTTPRequestTrace;B.s=Ee,B.d=ne,B.b=K,me.trace.push(B),me.interval||(me.interval=0),me.interval+=ne})(ce,fe.s,fe.d,fe.b,fe.t)})):(delete ce.interval,delete ce.trace),P(X.mediaType,o.HTTP_REQUEST,ce)},addManifestUpdate:function(z,X,re,ie){let J=new t_;J.mediaType=z,J.type=X,J.requestTime=re,J.fetchTime=ie,R(h.default.STREAM,o.MANIFEST_UPDATE,J),$(z,o.MANIFEST_UPDATE,J)},addManifestUpdateRepresentationInfo:function(z,X,re){if(z&&z.representationInfo){const ie=new r_;ie.id=X?X.id:null,ie.index=X?X.index:null,ie.mediaType=re,ie.startNumber=X?X.startNumber:null,ie.presentationTimeOffset=X?X.presentationTimeOffset:null,z.representationInfo.push(ie),N(z.mediaType,o.MANIFEST_UPDATE_TRACK_INFO,z)}},addManifestUpdateStreamInfo:function(z,X,re,ie,J){if(z){let ce=new n_;ce.id=X,ce.index=re,ce.start=ie,ce.duration=J,z.streamInfo.push(ce),N(z.mediaType,o.MANIFEST_UPDATE_STREAM_INFO,z)}},addPlayList:function(z){z.trace&&Array.isArray(z.trace)?z.trace.forEach((X=>{X.hasOwnProperty("subreplevel")&&!X.subreplevel&&delete X.subreplevel})):delete z.trace,P(h.default.STREAM,o.PLAY_LIST,z)},addRepresentationSwitch:function(z,X,re,ie,J){let ce=new Xw;ce.t=X,ce.mt=re,ce.to=ie,J?ce.lto=J:delete ce.lto,P(z,o.TRACK_SWITCH,ce)},addRequestsQueue:function(z,X,re){let ie=new a_;ie.loadingRequests=X,ie.executedRequests=re,q(z).RequestsQueue=ie,$(z,o.REQUESTS_QUEUE,ie)},addSchedulingInfo:function(z,X,re,ie,J,ce,fe,me,Ee){let ne=new i_;ne.mediaType=z,ne.t=X,ne.type=re,ne.startTime=ie,ne.availabilityStartTime=J,ne.duration=ce,ne.bandwidth=fe,ne.range=me,ne.state=Ee,P(z,o.SCHEDULING_INFO,ne)},clearAllCurrentMetrics:function(){w={},M()},clearCurrentMetricsForType:function(z){delete w[z],D(z)},getMetricsFor:q,updateManifestUpdateInfo:function(z,X){if(z){for(let re in X)z[re]=X[re];N(z.mediaType,o.MANIFEST_UPDATE,z)}}},w={},v}Ng.__dashjs_factory_name="MetricsModel";var s_=n.default.getSingletonFactory(Ng);class Aa{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}Aa.INITIAL_PLAYOUT_START_REASON="initial_playout",Aa.SEEK_START_REASON="seek",Aa.RESUME_FROM_PAUSE_START_REASON="resume",Aa.METRICS_COLLECTION_START_REASON="metrics_collection_start";class Vr{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function Dg(b){b=b||{};const y=this.context;let v,w,_,I,M=b.metricsModel;function D(q){const R=M.getMetricsFor(q,!0);if(!R)return null;const P=R.HttpList;let z,X=null;if(!P||P.length<=0)return null;for(z=P.length-1;z>=0;){if(P[z].responsecode){X=P[z];break}z--}return X}function N(q){const R=M.getMetricsFor(q,!0);return R&&R.HttpList?R.HttpList:[]}function $(q,R){if(!q)return null;const P=q[R];return P&&P.length!==0?P[P.length-1]:null}return v={getCurrentRepresentationSwitch:function(q){return $(M.getMetricsFor(q,!0),o.TRACK_SWITCH)},getCurrentBufferState:function(q){return $(M.getMetricsFor(q,!0),o.BUFFER_STATE)},getCurrentBufferLevel:function(q){const R=$(M.getMetricsFor(q,!0),o.BUFFER_LEVEL);return R?Yw.round10(R.level/1e3,-3):0},getCurrentHttpRequest:D,getHttpRequests:N,getCurrentDroppedFrames:function(){return $(M.getMetricsFor(h.default.VIDEO,!0),o.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(q){return $(M.getMetricsFor(q,!0),o.SCHEDULING_INFO)},getCurrentDVRInfo:function(q){return $(q?M.getMetricsFor(q,!0):M.getMetricsFor(h.default.VIDEO,!0)||M.getMetricsFor(h.default.AUDIO,!0),o.DVR_INFO)},getCurrentManifestUpdate:function(){return $(M.getMetricsFor(h.default.STREAM),o.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(q,R){if(!R)return null;let P={},z=D(q);z&&(P=et.default.parseHttpHeaders(z._responseHeaders));const X=P[R.toLowerCase()];return X===void 0?null:X},getLatestMPDRequestHeaderValueByID:function(q){if(!q)return null;let R,P,z,X={};for(R=N(h.default.STREAM),z=R.length-1;z>=0;z--)if(P=R[z],P.type===Q.HTTPRequest.MPD_TYPE){X=et.default.parseHttpHeaders(P._responseHeaders);break}const re=X[q.toLowerCase()];return re===void 0?null:re},addRepresentationSwitch:function(q,R,P,z,X){M.addRepresentationSwitch(q,R,P,z,X)},addDVRInfo:function(q,R,P,z){M.addDVRInfo(q,R,P,z)},updateManifestUpdateInfo:function(q){const R=this.getCurrentManifestUpdate();M.updateManifestUpdateInfo(R,q)},addManifestUpdateStreamInfo:function(q){if(q){const R=this.getCurrentManifestUpdate();M.addManifestUpdateStreamInfo(R,q.id,q.index,q.start,q.duration)}},addManifestUpdateRepresentationInfo:function(q,R){if(q){const P=this.getCurrentManifestUpdate();M.addManifestUpdateRepresentationInfo(P,q,R)}},addManifestUpdate:function(q){M.addManifestUpdate(h.default.STREAM,q.type,q.startDate,q.endDate)},addHttpRequest:function(q,R,P,z,X,re){const ie={status:P,headers:z,url:R};M.addHttpRequest(q,ie,X,re)},addSchedulingInfo:function(q,R){M.addSchedulingInfo(q.mediaType,new Date,q.type,q.startTime,q.availabilityStartTime,q.duration,q.bandwidth,q.range,R)},addRequestsQueue:function(q,R,P){M.addRequestsQueue(q,R,P)},addBufferLevel:function(q,R,P){M.addBufferLevel(q,R,P)},addBufferState:function(q,R,P){M.addBufferState(q,R,P)},addDroppedFrames:function(q){M.addDroppedFrames(h.default.VIDEO,q)},addPlayList:function(){I&&(M.addPlayList(I),I=null)},addDVBErrors:function(q){M.addDVBErrors(q)},createPlaylistMetrics:function(q,R){I=new Aa,I.start=new Date,I.mstart=q,I.starttype=R},createPlaylistTraceMetrics:function(q,R,P){w===!0&&(w=!1,_=new Vr,_.representationid=q,_.start=new Date,_.mstart=R,_.playbackspeed=P!==null?P.toString():null)},updatePlayListTraceMetrics:function(q){if(_)for(let R in _)_[R]=q[R]},pushPlayListTraceMetrics:function(q,R){if(w===!1&&I&&_&&_.start){const P=_.start;_.duration=q.getTime()-P.getTime(),_.stopreason=R,I.trace.push(_),w=!0}},clearAllCurrentMetrics:function(){M.clearAllCurrentMetrics()}},M=M||s_(y).getInstance({settings:b.settings}),w=!0,_=null,I=null,v}Vr.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Vr.REBUFFERING_REASON="rebuffering",Vr.USER_REQUEST_STOP_REASON="user_request",Vr.END_OF_PERIOD_STOP_REASON="end_of_period",Vr.END_OF_CONTENT_STOP_REASON="end_of_content",Vr.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Vr.FAILURE_STOP_REASON="failure",Dg.__dashjs_factory_name="DashMetrics";var o_=n.default.getSingletonFactory(Dg);function Pg(){let b;const y=this.context,v=(0,m.default)(y).getInstance();return b={error:function(w){v.trigger(f.default.ERROR,{error:w})}},b}Pg.__dashjs_factory_name="ErrorHandler";var l_=n.default.getSingletonFactory(Pg),c_=t(5560);function Mg(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_,I,M,D,N,$,q,R,P,z;function X(){z.debug("Stopping the gap controller"),M&&(clearInterval(M),M=null),(function(){y.off(f.default.WALLCLOCK_TIME_UPDATED,fe,this),y.off(f.default.INITIAL_STREAM_SWITCH,ce,this),y.off(f.default.PLAYBACK_SEEKING,re,this),y.off(f.default.BUFFER_REPLACEMENT_STARTED,ie,v),y.off(f.default.TRACK_CHANGE_RENDERED,J,v)})(),M=null,D=NaN,I=0,R=null,P={}}function re(){R&&(clearTimeout(R),R=null)}function ie(ne){try{if(ne.streamId!==$.getActiveStreamInfo().id||ne.mediaType!==h.default.VIDEO&&ne.mediaType!==h.default.AUDIO)return;ne.streamId===$.getActiveStreamInfo().id&&(P[ne.mediaType]=!0)}catch(K){z.error(K)}}function J(ne){ne&&ne.mediaType&&(P[ne.mediaType]=!1)}function ce(){M||(function(){try{M||(z.debug("Starting the gap controller"),M=setInterval((()=>{me()&&Ee(N.getTime())}),100))}catch{}})()}function fe(){if(me(_.get().streaming.gaps.enableSeekFix)&&(I++,I>=10)){const ne=N.getTime();w===ne?Ee(ne,!0):(w=ne,D=NaN),I=0}}function me(ne=!1){if(!$.getActiveStream())return!1;const K=Object.keys(P).some((j=>P[j])),B=!!ne&&(function(){const j=$.getActiveStream(),Se=parseFloat((j.getStartTime()+j.getDuration()).toFixed(5));return N.getTime()+_.get().streaming.gaps.threshold>=Se})();return!K&&_.get().streaming.gaps.jumpGaps&&$.getActiveStreamProcessors().length>0&&(!N.isSeeking()||B)&&!N.isPaused()&&!$.getIsStreamSwitchInProgress()&&!$.getHasMediaOrInitialisationError()}function Ee(ne,K=!1){const B=_.get().streaming.gaps.enableStallFix,j=_.get().streaming.gaps.stallSeek,Se=_.get().streaming.gaps.smallGapLimit,se=_.get().streaming.gaps.jumpLargeGaps,Ae=_.get().streaming.gaps.seekOffset,Te=q.getBufferRange();let Re,Ue=NaN,Ne=!1;if(Re=(function(ae,de){try{if(!ae||ae.length<=1&&de>0)return NaN;let le=NaN,ue=0;for(;isNaN(le)&&ue<ae.length;){const pe=ue>0?ae.end(ue-1):0;de<ae.start(ue)&&pe-de<_.get().streaming.gaps.threshold&&(le=ue),ue+=1}return le}catch{return null}})(Te,ne),!isNaN(Re)){const ae=Te.start(Re),de=ae-ne;de>0&&(de<=Se||se)&&(Ue=ae)}const ee=N.getTimeToStreamEnd();if(isNaN(Ue)&&K&&isFinite(ee)&&!isNaN(ee)&&ee<Se&&(Ue=parseFloat(N.getStreamEndTime().toFixed(5)),Ne=!0),B&&isNaN(Ue)&&K&&isNaN(Re)&&(function(ae,de){for(let le=0,ue=ae.length;le<ue;le++)if(de>=ae.start(le)&&de<=ae.end(le))return!0;return!1})(Te,ne)&&(j===0?(z.warn("Toggle play pause to break stall"),q.pause(),q.play()):(z.warn(`Jumping ${j}s to break stall`),Ue=ne+j)),Ue>0&&D!==Ue&&Ue>ne&&!R){const ae=Ue-ne;if(Ne){const de=$.getStreamForTime(Ue),le=de&&!!de.getPreloaded();z.warn(`Jumping to end of stream because of gap from ${ne} to ${Ue}. Gap duration: ${ae}`),N.seek(Ue+Ae,!0,le)}else{const de=N.getIsDynamic(),le=Re>0?Te.end(Re-1):ne,ue=de?1e3*Math.max(0,ae-.1):0;R=window.setTimeout((()=>{N.seek(Ue+Ae,!0,!0);const pe=$.getActiveStream();pe&&z.warn(`Jumping gap occuring in period ${pe.getStreamId()} starting at ${le} and ending at ${Ue}. Jumping by: ${Ue+Ae-le}`),R=null}),ue)}D=Ue}}return v={reset:X,setConfig:function(ne){ne&&(ne.settings&&(_=ne.settings),ne.playbackController&&(N=ne.playbackController),ne.streamController&&($=ne.streamController),ne.videoModel&&(q=ne.videoModel))},initialize:function(){(function(){y.on(f.default.WALLCLOCK_TIME_UPDATED,fe,this),y.on(f.default.INITIAL_STREAM_SWITCH,ce,this),y.on(f.default.PLAYBACK_SEEKING,re,this),y.on(f.default.BUFFER_REPLACEMENT_STARTED,ie,v),y.on(f.default.TRACK_CHANGE_RENDERED,J,v)})()}},z=(0,l.default)(b).getInstance().getLogger(v),X(),v}Mg.__dashjs_factory_name="GapController";var u_=n.default.getSingletonFactory(Mg),Og=class extends oe{constructor(b,y){super(),this.url=b||null,this.type=y||null,this.mediaType=h.default.STREAM,this.responseType=""}};function Fg(b){b=b||{};const y=this.context,v=(0,m.default)(y).getInstance();let w,_=ms(y).create({errHandler:b.errHandler,dashMetrics:b.dashMetrics,mediaPlayerModel:b.mediaPlayerModel,errors:Jt});return w={load:function(I,M,D){const N=function($,q){M.resolved=!0,M.resolvedContent=$||null,v.trigger(f.default.XLINK_ELEMENT_LOADED,{element:M,resolveObject:D,error:$||q?null:new Tt.default(Jt.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Jt.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+I)})};if(I==="urn:mpeg:dash:resolve-to-zero:2013")N(null,!0);else{const $=new Og(I,Q.HTTPRequest.XLINK_EXPANSION_TYPE);_.load({request:$,success:function(q){N(q)},error:function(){N(null)}})}},reset:function(){_&&(_.abort(),_=null)}},w}Fg.__dashjs_factory_name="XlinkLoader";var d_=n.default.getClassFactory(Fg);const ys="onLoad";function zg(b){b=b||{};let y=this.context,v=(0,m.default)(y).getInstance();const w=Zn(y).getInstance();let _,I,M,D;function N(z,X,re){let ie,J,ce={};ce.elements=z,ce.type=X,ce.resolveType=re,ce.elements.length===0&&q(ce);for(let fe=0;fe<ce.elements.length;fe++)ie=ce.elements[fe],J=w.isHTTPURL(ie.url)?ie.url:ie.originalContent.BaseURL+ie.url,D.load(J,ie,ce)}function $(z){let X,re,ie="";if(X=z.element,re=z.resolveObject,X.resolvedContent){let J=0;X.resolvedContent.indexOf("<?xml")===0&&(J=X.resolvedContent.indexOf("?>")+2),ie=X.resolvedContent.substr(0,J)+"<response>"+X.resolvedContent.substr(J)+"</response>",X.resolvedContent=I.parseXml(ie).response}(function(J){let ce,fe;for(ce=0;ce<J.elements.length;ce++)if(fe=J.elements[ce],fe.resolved===!1)return!1;return!0})(re)&&q(re)}function q(z){let X,re,ie=[];if((function(J){let ce,fe,me,Ee,ne,K,B=[];for(Ee=J.elements.length-1;Ee>=0;Ee--){if(ce=J.elements[Ee],fe=ce.type,ce.resolvedContent){if(ce.resolvedContent)for(ne=0;ne<ce.resolvedContent[fe].length;ne++)me=ce.resolvedContent[fe][ne],B.push(me)}else delete ce.originalContent["xlink:actuate"],delete ce.originalContent["xlink:href"],B.push(ce.originalContent);for(ce.parentElement[fe].splice(ce.index,1),K=0;K<B.length;K++)ce.parentElement[fe].splice(ce.index+K,0,B[K]);B=[]}J.elements.length>0&&I.getIron().run(M)})(z),z.resolveType==="onActuate"&&v.trigger(f.default.XLINK_READY,{manifest:M}),z.resolveType===ys)switch(z.type){case ve.default.PERIOD:for(X=0;X<M[ve.default.PERIOD].length;X++)re=M[ve.default.PERIOD][X],re.hasOwnProperty(ve.default.ADAPTATION_SET)&&(ie=ie.concat(R(re[ve.default.ADAPTATION_SET],re,ve.default.ADAPTATION_SET,ys))),re.hasOwnProperty(ve.default.EVENT_STREAM)&&(ie=ie.concat(R(re[ve.default.EVENT_STREAM],re,ve.default.EVENT_STREAM,ys)));N(ie,ve.default.ADAPTATION_SET,ys);break;case ve.default.ADAPTATION_SET:v.trigger(f.default.XLINK_READY,{manifest:M})}}function R(z,X,re,ie){let J,ce,fe,me=[];for(ce=z.length-1;ce>=0;ce--)J=z[ce],J.hasOwnProperty("xlink:href")&&J["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&z.splice(ce,1);for(ce=0;ce<z.length;ce++)J=z[ce],J.hasOwnProperty("xlink:href")&&J.hasOwnProperty("xlink:actuate")&&J["xlink:actuate"]===ie&&(fe=P(J["xlink:href"],X,re,ce,ie,J),me.push(fe));return me}function P(z,X,re,ie,J,ce){return{url:z,parentElement:X,type:re,index:ie,resolveType:J,originalContent:ce,resolvedContent:null,resolved:!1}}return _={resolveManifestOnLoad:function(z){let X;M=z,M.Period?(X=R(M.Period,M,ve.default.PERIOD,ys),N(X,ve.default.PERIOD,ys)):v.trigger(f.default.XLINK_READY,{manifest:M})},setParser:function(z){z&&(I=z)},reset:function(){v.off(f.default.XLINK_ELEMENT_LOADED,$,_),D&&(D.reset(),D=null)}},v.on(f.default.XLINK_ELEMENT_LOADED,$,_),D=d_(y).create({errHandler:b.errHandler,dashMetrics:b.dashMetrics,mediaPlayerModel:b.mediaPlayerModel,settings:b.settings}),_}zg.__dashjs_factory_name="XlinkController";var f_=n.default.getClassFactory(zg);function Ug(b){function y(_,I){for(let M in _)I.hasOwnProperty(M)||(I[M]=_[M])}function v(_,I,M){for(let D=0,N=_.length;D<N;++D){const $=_[D];if(I[$.name])if(M[$.name]){if($.merge){const q=I[$.name],R=M[$.name];typeof q=="object"&&typeof R=="object"?y(q,R):M[$.name]=q+R}}else M[$.name]=I[$.name]}}function w(_,I){for(let M=0,D=_.children.length;M<D;++M){const N=_.children[M],$=I[N.name];if($)for(let q=0,R=$.length;q<R;++q){const P=$[q];v(_.properties,I,P),w(N,P)}}}return{run:function(_){if(_===null||typeof _!="object")return _;if(_.Period&&"period"in b){const I=b.period,M=_.Period;for(let D=0,N=M.length;D<N;++D){const $=M[D];if(w(I,$),"adaptationset"in b){const q=$.AdaptationSet;if(q){const R=b.adaptationset;for(let P=0,z=q.length;P<z;++P)w(R,q[P])}}}}return _}}}Ug.__dashjs_factory_name="ObjectIron";var h_=n.default.getClassFactory(Ug),xl=class{constructor(b,y){this._test=b,this._converter=y}get test(){return this._test}get converter(){return this._converter}};const Bg=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var m_=class extends xl{constructor(){super(((b,y,v)=>{const w=[ve.default.MIN_BUFFER_TIME,ve.default.MEDIA_PRESENTATION_DURATION,ve.default.MINIMUM_UPDATE_PERIOD,ve.default.TIMESHIFT_BUFFER_DEPTH,ve.default.MAX_SEGMENT_DURATION,ve.default.MAX_SUBSEGMENT_DURATION,ve.default.SUGGESTED_PRESENTATION_DELAY,ve.default.START,h.default.START_TIME,ve.default.DURATION],_=w.length;for(let I=0;I<_;I++)if(y===w[I])return Bg.test(v);return!1}),(b=>{const y=Bg.exec(b);let v=31536e3*parseFloat(y[3]||0)+2592e3*parseFloat(y[5]||0)+86400*parseFloat(y[7]||0)+3600*parseFloat(y[9]||0)+60*parseFloat(y[11]||0)+parseFloat(y[13]||0);return y[1]!==void 0&&(v=-v),v}))}};const $g=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var g_=class extends xl{constructor(){super(((b,y,v)=>$g.test(v)),(b=>{const y=$g.exec(b);let v;if(v=Date.UTC(parseInt(y[1],10),parseInt(y[2],10)-1,parseInt(y[3],10),parseInt(y[4],10),parseInt(y[5],10),y[6]&&parseInt(y[6],10)||0,y[7]&&1e3*parseFloat(y[7])||0),y[9]&&y[10]){const w=60*parseInt(y[9],10)+parseInt(y[10],10);v+=(y[8]==="+"?-1:1)*w*60*1e3}return new Date(v)}))}};const p_=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,y_=[ve.default.ID];var b_=class extends xl{constructor(){super(((b,y,v)=>p_.test(v)&&y_.indexOf(y)===-1),(b=>parseFloat(b)))}},E_=class extends xl{constructor(){super(((b,y)=>{const v={[ve.default.ADAPTATION_SET]:[ve.default.LANG],[ve.default.REPRESENTATION]:[ve.default.LANG],[ve.default.CONTENT_COMPONENT]:[ve.default.LANG],[ve.default.LABEL]:[ve.default.LANG],[ve.default.GROUP_LABEL]:[ve.default.LANG]};if(v.hasOwnProperty(b)){let w=v[b];return w!==void 0&&w.indexOf(y)>=0}return!1}),(b=>wl(b)||String(b)))}},v_=class{constructor(b){var y;this._name=b,this._merge=(y=b)&&y.length&&y.charAt(0)===y.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},bs=class{constructor(b,y,v){this._name=b||"",this._properties=[],this._children=v||[],Array.isArray(y)&&y.forEach((w=>{this._properties.push(new v_(w))}))}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},T_=class extends bs{constructor(){const b=[ve.default.AUDIO_CHANNEL_CONFIGURATION,ve.default.AUDIO_SAMPLING_RATE,ve.default.CODECS,ve.default.CODING_DEPENDENCY,ve.default.CONTENT_PROTECTION,ve.default.FRAMERATE,ve.default.FRAME_PACKING,ve.default.HEIGHT,ve.default.INBAND_EVENT_STREAM,ve.default.MAXIMUM_SAP_PERIOD,ve.default.MAX_PLAYOUT_RATE,ve.default.MIME_TYPE,ve.default.PROFILES,ve.default.SAR,ve.default.SCAN_TYPE,ve.default.SEGMENT_PROFILES,ve.default.SEGMENT_SEQUENCE_PROPERTIES,ve.default.START_WITH_SAP,ve.default.WIDTH];super(ve.default.ADAPTATION_SET,b,[new bs(ve.default.REPRESENTATION,b,[new bs(ve.default.SUB_REPRESENTATION,b)])])}},S_=class extends bs{constructor(){const b=[ve.default.SEGMENT_BASE,ve.default.SEGMENT_TEMPLATE,ve.default.SEGMENT_LIST];super(ve.default.PERIOD,b,[new bs(ve.default.ADAPTATION_SET,b,[new bs(ve.default.REPRESENTATION,b)])])}};const w_=[ve.default.ACCESSIBILITY,ve.default.ADAPTATION_SET,ve.default.ADD,ve.default.AUDIO_CHANNEL_CONFIGURATION,ve.default.BASE_URL,ve.default.CONTENT_COMPONENT,ve.default.CONTENT_PROTECTION,ve.default.CONTENT_STEERING,ve.default.ESSENTIAL_PROPERTY,ve.default.EVENT,ve.default.EVENT_STREAM,ve.default.INBAND_EVENT_STREAM,ve.default.LABEL,ve.default.LOCATION,ve.default.METRICS,ve.default.PATCH_LOCATION,ve.default.PERIOD,ve.default.PRESELECTION,ve.default.PRODUCER_REFERENCE_TIME,ve.default.REMOVE,ve.default.REPLACE,ve.default.REPORTING,ve.default.REPRESENTATION,ve.default.ROLE,ve.default.S,ve.default.SEGMENT_SEQUENCE_PROPERTIES,ve.default.SEGMENT_URL,ve.default.SERVICE_DESCRIPTION,ve.default.SUPPLEMENTAL_PROPERTY,ve.default.UTC_TIMING];function jg(b){b=b||{};const y=this.context,v=b.debug;let w,_,I,M;function D(N){try{const $=(function(q){const R=(function(z,X={}){let re=X.pos||0;const ie=z.length,J=!!X.keepComments,ce=!!X.keepWhitespace,fe="<",me=60,Ee=">",ne=62,K=45,B=47,j=63,Se=33,se=39,Ae=34,Te=91,Re=93,Ue=`\r
	>/= `;function Ne(pe,W="#text"){return{nodeName:W,nodeValue:pe,attributes:{},childNodes:[]}}function ee(pe=""){const W=[];for(;z[re];)if(z.charCodeAt(re)==me){if(z.charCodeAt(re+1)===B){const we=re+2;if(re=z.indexOf(Ee,re),!z.startsWith(pe,we)){const Ce=z.substring(0,re).split(`
`);throw new Error(`Unexpected close tag
Line: `+(Ce.length-1)+`
Column: `+(Ce[Ce.length-1].length+1)+`
Char: `+z[re])}return re+1&&(re+=1),W}if(z.charCodeAt(re+1)===j){re=z.indexOf(Ee,re),re++;continue}if(z.charCodeAt(re+1)===Se){if(z.charCodeAt(re+2)==K){const we=re;for(;re!==-1&&(z.charCodeAt(re)!==ne||z.charCodeAt(re-1)!=K||z.charCodeAt(re-2)!=K||re==-1);)re=z.indexOf(Ee,re+1);re===-1&&(re=ie),J&&W.push(Ne(z.substring(we,re+1),"#comment"))}else{if(z.charCodeAt(re+2)===Te&&z.charCodeAt(re+8)===Te&&z.startsWith("CDATA",re+3)){const we=z.indexOf("]]>",re);we==-1?(W.push(Ne(z.substr(re+9),"#cdata")),re=ie):(W.push(Ne(z.substring(re+9,we),"#cdata")),re=we+3);continue}{const we=re+1;re+=2;let Ce=!1;for(;(z.charCodeAt(re)!==ne||Ce===!0)&&z[re];)z.charCodeAt(re)===Te?Ce=!0:Ce===!0&&z.charCodeAt(re)===Re&&(Ce=!1),re++;W.push(Ne(z.substring(we,re),"#doctype"))}}re++;continue}const be=le();W.push(be)}else{const be=ae();if(ce)be.length>0&&W.push(Ne(be));else{const we=be.trim();we.length>0&&W.push(Ne(we))}re++}return W}function ae(){const pe=re;return re=z.indexOf(fe,re)-1,re===-2&&(re=ie),Ti(z.slice(pe,re+1))}function de(){const pe=re;for(;Ue.indexOf(z[re])===-1&&z[re];)re++;return z.slice(pe,re)}function le(){re++;const pe=de();let W=pe,be=null;const we=pe.indexOf(":");we!==-1&&(be=pe.slice(0,we),W=pe.slice(we+1));const Ce=(function(){const We={};for(;z.charCodeAt(re)!==ne&&z[re];){const lt=z.charCodeAt(re);if(lt>64&&lt<91||lt>96&&lt<123){const St=de();let Nt="",ln=z.charCodeAt(re);for(;ln!==se&&ln!==Ae;)re++,ln=z.charCodeAt(re);if(ln===se||ln===Ae){if(Nt=ue(),re===-1)throw new Error("Missing closing quote")}else re--;We[St]=Ti(Nt)}re++}return We})();let ze=[];const Fe=z.charCodeAt(re-1);return re++,Fe!==B&&(ze=ee(pe)),{nodeName:pe,nodeValue:null,attributes:Ce,childNodes:ze,prefix:be,localName:W}}function ue(){const pe=z[re],W=re+1;return re=z.indexOf(pe,W),z.slice(W,re)}return{nodeName:"#document",nodeValue:null,childNodes:ee(""),attributes:{}}})(q),P=R.childNodes.find((z=>z.nodeName==="MPD"||z.nodeName==="Patch"))||R.childNodes[0];return(function z(X){X.nodeName.indexOf(":")!==-1&&(X.__prefix=X.prefix,X.nodeName=X.localName);const{childNodes:re,attributes:ie,nodeName:J}=X;X.tagName=J;for(let fe in ie){let me=ie[fe];if(J==="S")me=parseInt(me);else for(let Ee=0,ne=I.length;Ee<ne;Ee++){const K=I[Ee];if(K.test(J,fe,me)){me=K.converter(me);break}}X[fe]=me}const ce=re?.length;for(let fe=0;fe<ce;fe++){const me=re[fe];if(me.nodeName==="#text"){X.__text=me.nodeValue;continue}z(me);const{nodeName:Ee}=me;Array.isArray(X[Ee])?X[Ee].push(me):w_.indexOf(Ee)!==-1?(X[Ee]||(X[Ee]=[]),X[Ee].push(me)):X[Ee]=me}X.__children=re})(P),P})(N);return{[$.tagName]:$}}catch{return null}}return w={getIron:function(){return M},parseXml:D,parse:function(N){let $;const q=window.performance.now();if($=D(N),!$)throw new Error("failed to parse the manifest");$.Patch?($=$.Patch,$.add&&$.add.forEach((P=>M.run(P))),$.replace&&$.replace.forEach((P=>M.run(P)))):($=$.MPD,M.run($));const R=window.performance.now();return _.info("Parsing complete: "+(R-q).toPrecision(3)+"ms"),$.protocol="DASH",$}},_=v.getLogger(w),I=[new m_,new g_,new b_,new E_],M=h_(y).create({adaptationset:new T_,period:new S_}),w}jg.__dashjs_factory_name="DashParser";var __=n.default.getClassFactory(jg);function qg(b){b=b||{};const y=this.context,v=b.debug,w=b.settings,_=(0,m.default)(y).getInstance(),I=Zn(y).getInstance();let M,D,N,$,q,R=b.mssHandler,P=b.errHandler;function z(X){_.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:X.manifest})}return M={load:function(X,re=null,ie=null){const J=new Date,ce=new Og(X,Q.HTTPRequest.MPD_TYPE);re&&(ce.serviceLocation=re),ie&&(ce.queryParams=ie),ce.startDate||(ce.startDate=J),_.trigger(f.default.MANIFEST_LOADING_STARTED,{request:ce}),N.load({request:ce,success:function(fe,me,Ee){if(!$)return;let ne,K,B;if(Ee&&Ee!==X?(K=I.parseBaseUrl(Ee),ne=Ee):(I.isRelative(X)&&(X=I.resolve(X,window.location.href)),K=I.parseBaseUrl(X)),me!="No Content")if(q===null&&(q=(function(j){let Se=null;return j.indexOf("SmoothStreamingMedia")>-1?(R&&(Se=R.createMssParser(),R.createMssFragmentProcessor(),R.registerEvents()),Se):j.indexOf("MPD")>-1||j.indexOf("Patch")>-1?__(y).create({debug:v}):Se})(fe)),q!==null){$.setParser(q);try{B=q.parse(fe)}catch{return void _.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Tt.default(Jt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Jt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${X}`)})}if(B){if(B.url=ne||X,B.originalUrl||(B.originalUrl=B.url),w&&w.get().streaming.enableManifestDurationMismatchFix&&B.mediaPresentationDuration&&B.Period.length>1){const j=B.Period.reduce(((Se,se)=>Se+se.duration),0);!isNaN(j)&&B.mediaPresentationDuration>j&&(D.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),B.mediaPresentationDuration=j)}B.baseUri=K,B.loadedTime=new Date,$.resolveManifestOnLoad(B),_.trigger(f.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:fe})}else _.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Tt.default(Jt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Jt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${X}`)})}else _.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Tt.default(Jt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Jt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${X}`)});else _.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(fe,me,Ee){_.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Tt.default(Jt.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Jt.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${X}, ${Ee}`)})}})},reset:function(){_.off(f.default.XLINK_READY,z,M),R&&R.reset(),$&&($.reset(),$=null),N&&(N.abort(),N=null)}},D=v.getLogger(M),_.on(f.default.XLINK_READY,z,M),N=ms(y).create({errHandler:b.errHandler,dashMetrics:b.dashMetrics,mediaPlayerModel:b.mediaPlayerModel,urlUtils:I,constants:h.default,dashConstants:ve.default,errors:Jt,requestTimeout:b.settings.get().streaming.manifestRequestTimeout}),$=f_(y).create({errHandler:P,dashMetrics:b.dashMetrics,mediaPlayerModel:b.mediaPlayerModel,settings:b.settings}),q=null,M}qg.__dashjs_factory_name="ManifestLoader";var x_=n.default.getClassFactory(qg);function Gg(){let b,y,v=this.context,w=(0,m.default)(v).getInstance();return b={getValue:function(){return y},setValue:function(_){y=_,_&&w.trigger(f.default.MANIFEST_LOADED,{data:_})}},b}Gg.__dashjs_factory_name="ManifestModel";var I_=n.default.getSingletonFactory(Gg);function Hg(){const b=this.context,y=(0,c.default)(b).getInstance();let v,w,_;return v={select:function(I){if(!I||I.length===0)return null;let M=null;return y.get().streaming.applyContentSteering&&(M=(function(D){const N=_.getCurrentSteeringResponseData();return N&&N.pathwayPriority&&N.pathwayPriority.length>0?(function($=[],q=[]){let R=0,P=null;for(;R<$.length;){const z=$[R],X=q.findIndex((re=>re.serviceLocation&&re.serviceLocation===z));if(X!==-1&&!w.contains(q[X].serviceLocation)){P=q[X];break}R+=1}return P})(N.pathwayPriority,D):null})(I)),M||(M=(function(D){return D[0]})(I)),M},setConfig:function(I){I.blacklistController&&(w=I.blacklistController),I.contentSteeringController&&(_=I.contentSteeringController)},reset:function(){w.reset()}},w=Zt(b).create({updateEventName:f.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),_=vu(b).getInstance(),v}Hg.__dashjs_factory_name="LocationSelector";var A_=n.default.getClassFactory(Hg);function Vg(){const b=this.context,y=(0,m.default)(b).getInstance(),v=Zn(b).getInstance();let w,_,I,M,D,N,$,q,R,P,z,X,re,ie,J;function ce(){re=NaN,q=!1,N=!0,$=!1,fe()}function fe(){ie!==null&&(clearTimeout(ie),ie=null)}function me(Te){fe(),$||(isNaN(Te)&&!isNaN(re)&&(Te=1e3*re),isNaN(Te)||(P.debug("Refresh manifest in "+Te+" milliseconds."),ie=setTimeout(K,Te)))}function Ee(Te=!1){q=!0;const Re=X.getValue();let Ue=Re.url;Ue&&(Ue=et.default.removeQueryParameterFromUrl(Ue,h.default.CMCD_QUERY_KEY));let Ne=null;const ee=w.getPatchLocation(Re),ae=R.select(ee);let de=null;if(ae&&!Te)Ue=ae.url,Ne=ae.serviceLocation,de=ae.queryParams;else{const le=(function(pe){const W=w.getLocation(pe),be=_.getSynthesizedLocationElements(W);return W.concat(be)})(Re),ue=R.select(le);ue&&(Ue=ue.url,Ne=ue.serviceLocation,de=ue.queryParams)}v.isRelative(Ue)&&(Ue=v.resolve(Ue,Re.url)),z.load(Ue,Ne,de)}function ne(Te){if(Te){if(w.getIsPatch(Te)){let Ne=Te;Te=X.getValue();let ee=w.isPatchValid(Te,Ne),ae=ee;if(ee){let de=w.getPublishTime(Te);w.applyPatchToManifest(Te,Ne);let le=w.getPublishTime(Te);ae=de.getTime()!==le.getTime()}if(!ae)return P.debug("Patch provided is invalid, performing full manifest refresh"),void Ee(!0);Te.loadedTime=new Date}}else(Te=X.getValue()).loadedTime=new Date;if(X.getValue()&&X.getValue().type===ve.default.DYNAMIC&&Te.type===ve.default.STATIC)return y.trigger(f.default.DYNAMIC_TO_STATIC),q=!1,void($=!0);X.setValue(Te);const Re=new Date,Ue=(Re.getTime()-Te.loadedTime.getTime())/1e3;re=w.getManifestUpdatePeriod(Te,Ue),1e3*re>2147483647&&(re=2147483647e-3),y.trigger(f.default.MANIFEST_UPDATED,{manifest:Te}),P.info("Manifest has been refreshed at "+Re+"["+Re.getTime()/1e3+"] "),N||me()}function K(){N||(q?me(J.get().streaming.manifestUpdateRetryInterval):Ee())}function B(Te){if(Te.error)Te.error.code===Jt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&M.error(Te.error);else{const Re=Te.manifest;(function(Ue){(function(Ne){const ee=I.getExternalSubtitles();if(!ee||ee.length===0)return;const ae=Ne&&Ne.Period?Ne.Period.length:0;ee.forEach((de=>{if(de.periodId===null&&ae>1)P.warn(`External subtitle with id ${de.id} has no periodId and the MPD contains more than one period. Unable to add the external subtitle as it is not clear which period shall be used.`);else if(ae===1)j(Ne.Period[0],de);else{const le=Ne.Period.find((ue=>ue.id===de.periodId));le?j(le,de):P.warn(`External subtitle with id ${de.id} has periodId ${de.periodId} but the MPD does not contain a period with that id. Unable to add the external subtitle.`)}}))})(Ue)})(Re),ne(Re)}}function j(Te,Re){if(!Te||!Te.AdaptationSet)return Te;Te.AdaptationSet.push(Re.serializeToMpdParserFormat())}function Se(){N=!1,me()}function se(){N=!J.get().streaming.scheduling.scheduleWhilePaused,N&&fe()}function Ae(){q=!1}return D={getIsUpdating:function(){return q},initialize:function(){ce(),y.on(f.default.STREAMS_COMPOSED,Ae,this),y.on(g.default.PLAYBACK_STARTED,Se,this),y.on(g.default.PLAYBACK_PAUSED,se,this),y.on(f.default.INTERNAL_MANIFEST_LOADED,B,this)},refreshManifest:Ee,reset:function(){y.off(g.default.PLAYBACK_STARTED,Se,this),y.off(g.default.PLAYBACK_PAUSED,se,this),y.off(f.default.STREAMS_COMPOSED,Ae,this),y.off(f.default.INTERNAL_MANIFEST_LOADED,B,this),ce()},setConfig:function(Te){Te&&(Te.manifestModel&&(X=Te.manifestModel),Te.adapter&&(w=Te.adapter),Te.manifestLoader&&(z=Te.manifestLoader),Te.errHandler&&(M=Te.errHandler),Te.locationSelector&&(R=Te.locationSelector),Te.settings&&(J=Te.settings),Te.contentSteeringController&&(_=Te.contentSteeringController),Te.customParametersModel&&(I=Te.customParametersModel))},setManifest:function(Te){ne(Te)}},P=(0,l.default)(b).getInstance().getLogger(D),R=A_(b).create(),I=(0,yu.default)(b).getInstance(),D}Vg.__dashjs_factory_name="ManifestUpdater";var Kg=n.default.getClassFactory(Vg);function Cu(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_,I,M,D,N,$,q,R,P;function z(W){if(!(W&&W.currentRepresentation&&W.currentRepresentation.mediaInfo&&W.currentRepresentation.mediaInfo.type))return;const be=W.currentRepresentation.mediaInfo.type;N[be]=W.currentRepresentation}function X(W,be){return W&&_[be]&&_[be][W]?_[be][W].list:[]}function re(W,be){return W&&_[be]&&_[be][W]?_[be][W].current:null}function ie(W,be={}){if(!W||!W.streamInfo)return;const we=W.type,Ce=W.streamInfo.id,ze=re(we,Ce);if(_[Ce]&&_[Ce][we]&&(_[Ce][we].current=W,_[Ce][we].current&&(we!==h.default.TEXT&&!fe(W,ze)||we===h.default.TEXT&&W.isFragmented)&&y.trigger(f.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:ze,newMediaInfo:W,switchMode:I.get().streaming.trackSwitchMode[we],options:be},{streamId:Ce}),!be.hasOwnProperty("noSettingsSave")||!be.noSettingsSave)){let Fe=(function(We){const lt={lang:We.lang,viewpoint:We.viewpoint,roles:We.roles,accessibility:We.accessibility,audioChannelConfiguration:We.audioChannelConfiguration,codec:We.codec};return lt.lang||lt.viewpoint||lt.role&&lt.role.length>0||lt.accessibility&&lt.accessibility.length>0||lt.audioChannelConfiguration&&lt.audioChannelConfiguration.length>0?lt:null})(W);if(!Fe||!_[Ce][we].storeLastSettings)return;Fe.roles&&(Fe.role=Fe.roles[0],delete Fe.roles),Fe.accessibility&&(Fe.accessibility=Fe.accessibility[0]),Fe.audioChannelConfiguration&&(Fe.audioChannelConfiguration=Fe.audioChannelConfiguration[0]),D[we]=Fe,P.setSavedMediaSettings(we,Fe)}}function J(W,be){W&&be&&(M[W]=be)}function ce(W){return W?M[W]:null}function fe(W,be){if(!W&&!be)return!0;if(!W||!be||W.isPreselection!==be.isPreselection)return!1;const we=W.id===be.id,Ce=JSON.stringify(W.viewpoint)===JSON.stringify(be.viewpoint),ze=W.lang===be.lang,Fe=W.codec===be.codec,We=JSON.stringify(W.roles)===JSON.stringify(be.roles),lt=JSON.stringify(W.accessibility)===JSON.stringify(be.accessibility),St=JSON.stringify(W.audioChannelConfiguration)===JSON.stringify(be.audioChannelConfiguration);return we&&Fe&&Ce&&ze&&We&&lt&&St}function me(){_={},D={},N={},M={audio:null,video:null,text:null},y.off(g.default.REPRESENTATION_SWITCH,z,v)}function Ee(W,be,we){let Ce=[];return W.forEach((function(ze){be(we,ze)&&Ce.push(ze)})),Ce.length!==0||be===Se&&I.get().streaming.assumeDefaultRoleAsMain&&pe(we.role,{schemeIdUri:h.default.DASH_ROLE_SCHEME_ID,value:ve.default.MAIN})&&(w.info("no track with Role set to main - assuming main as default and searching again"),Ce=Ee(W,se,null),Ce.length!==0)?Ce:(w.info("Filter-Function ("+be.name+") resulted in no tracks; setting ignored"),W)}function ne(W,be){try{return!W.lang||W.lang instanceof RegExp?be.lang.match(W.lang):be.lang!==""&&xu(be.lang,wl(W.lang)).length>0}catch{return!1}}function K(W,be){return W.index===void 0||W.index===null||be.index===W.index}function B(W,be){return W.id===void 0||W.id===null||be.id===W.id}function j(W,be){return!W.viewpoint||!!be.viewpoint.filter((function(we){return pe(we,W.viewpoint)}))[0]}function Se(W,be,we=!1){return!!be.roles&&(!W.role||!!be.roles.filter((function(Ce){return pe(Ce,W.role)}))[0]||be.type===h.default.AUDIO&&we)}function se(W,be){return!be.roles||be.roles.length===0}function Ae(W,be){let we;return we=W.accessibility?!!be.accessibility.filter((function(Ce){return pe(Ce,W.accessibility)}))[0]:!be.accessibility.length,we}function Te(W,be){return!W.audioChannelConfiguration||!!be.audioChannelConfiguration.filter((function(we){return pe(we,W.audioChannelConfiguration)}))[0]}function Re(W,be){return!W.codec||W.codec===be.codec}function Ue(W){let be=0,we=[];return W.forEach((Ce=>{isNaN(Ce.selectionPriority)||(Ce.selectionPriority>be?(be=Ce.selectionPriority,we=[Ce]):Ce.selectionPriority===be&&we.push(Ce))})),we}function Ne(W){let be,we=0,Ce=[];return W.forEach((function(ze){be=Math.max.apply(Math,ze.bitrateList.map((function(Fe){return Fe.bandwidth}))),be>we?(we=be,Ce=[ze]):be===we&&Ce.push(ze)})),Ce}function ee(W){return W[0]&&W[0].type===h.default.VIDEO?(function(be){let we,Ce=1/0,ze=[];return be.forEach((function(Fe){we=Fe.bitrateList.reduce((function(lt,St){const Nt=Math.max(1,St.width*St.height);return lt+St.bandwidth/Nt}),0)/Fe.bitrateList.length,we<Ce?(Ce=we,ze=[Fe]):we===Ce&&ze.push(Fe)})),ze})(W):W[0]&&W[0].type===h.default.AUDIO?(function(be){let we=1/0,Ce=[];return be.forEach((function(ze){let Fe=ze.audioChannelConfiguration.reduce((function(lt,St){return lt+(pg(St)||0)}),0)/ze.audioChannelConfiguration.length;ze.hasOwnProperty("supplementalProperties")&&ze.supplementalProperties.some((lt=>lt.schemeIdUri==="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&lt.value==="JOC"))&&(Fe=16),Fe||(Fe=1);let We=ze.bitrateList.reduce((function(lt,St){return lt+St.bandwidth/Fe}),0)/ze.bitrateList.length;We<we?(we=We,Ce=[ze]):We===we&&Ce.push(ze)})),Ce})(W):W}function ae(W){let be,we=0,Ce=[];return W.forEach((function(ze){be=ze.representationCount,be>we?(we=be,Ce=[ze]):be===we&&Ce.push(ze)})),Ce}function de(W,be){if(W===h.default.TEXT)return(function(ze){if(!ze||ze.length===0)return null;const Fe=ze.filter((We=>!(We&&We.roles&&We.roles.length>0)||We.roles.every((lt=>lt.schemeIdUri!==h.default.DASH_ROLE_SCHEME_ID||lt.value!==ve.default.FORCED_SUBTITLE))));return Fe.length>0?Fe[0]:ze[0]})(be);let we;const Ce=$.getCustomInitialTrackSelectionFunction();if(we=(function(ze){try{let Fe;return Fe=(function(We){try{const lt=We.filter((St=>{const Nt=St.type;return St.bitrateList.some((ln=>{const Mt=q.getAbrBitrateParameter("maxBitrate",Nt),sn=q.getAbrBitrateParameter("minBitrate",Nt);return!(Mt>-1&&ln.bandwidth>1e3*Mt||sn>-1&&ln.bandwidth<1e3*sn)}))}));return lt.length>0?lt:We}catch(lt){return w.error(lt),We}})(ze),Fe=(function(We){try{if(!I.get().streaming.abr.limitBitrateByPortal)return We;const{elementWidth:lt}=R.getVideoElementSize(),St=We.filter((Nt=>Nt.type!==h.default.VIDEO||Nt.bitrateList.some((ln=>ln.width<=lt))));return St.length>0?St:We}catch(lt){return w.error(lt),We}})(Fe),Fe}catch(Fe){return w.error(Fe),ze}})(be),Ce&&typeof Ce=="function")we=Ce(we);else if(N[W])we=(function(ze,Fe){if(!ze||ze.length===0||!Fe||!N[Fe])return ze;const We=N[Fe].bandwidth;if(!We||isNaN(We))return ze;let lt={min:NaN,track:null};return ze.forEach((St=>{St.bitrateList.forEach((Nt=>{const ln=Math.abs(Nt.bandwidth-We);(isNaN(lt.min)||ln<lt.min)&&(lt.min=ln,lt.track=St)}))})),lt.track?[lt.track]:ze})(we,W);else if(I.get().streaming.ignoreSelectionPriority||(w.info("Trying to find track with highest selectionPriority"),we=(function(ze){return Ue(ze)})(we)),we.length>1&&I.get().streaming.prioritizeRoleMain&&(w.info("Trying to find a main track"),we=Ee(we,Se,{role:{schemeIdUri:h.default.DASH_ROLE_SCHEME_ID,value:ve.default.MAIN}})),we.length>1){w.info("Selecting track based on selectionModeForInitialTrack");let ze=I.get().streaming.selectionModeForInitialTrack;switch(ze){case h.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:we=(function(Fe){let We=Ne(Fe);return We.length>1&&(We=ae(We)),We})(we);break;case h.default.TRACK_SELECTION_MODE_FIRST_TRACK:we=le(we);break;case h.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:we=ue(we);break;case h.default.TRACK_SELECTION_MODE_WIDEST_RANGE:we=(function(Fe){let We=ae(Fe);return We.length>1&&(We=Ne(Fe)),We})(we);break;case h.default.TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY:we=(function(Fe){let We=Fe.filter((lt=>!(!lt.segmentSequenceProperties||lt.segmentSequenceProperties.length===0)&&lt.segmentSequenceProperties.some((St=>St.cadence===1&&(St.sapType===0||St.sapType===1)))));return ue(We.length>0?We:Fe)})(we);break;default:w.warn(`Track selection mode ${ze} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),we=le(we)}}return we.length>0?we[0]:be[0]}function le(W){return W[0]}function ue(W){let be=ee(W);return be.length>1&&(be=Ne(be)),be}function pe(W,be){return!(!W||!be)&&JSON.stringify({schemeIdUri:W.schemeIdUri,value:W.value})===JSON.stringify({schemeIdUri:be.schemeIdUri,value:be.value})}return v={addTrack:function(W){if(!W)return;w.info("addTrack with track.codec='"+W.codec+"', track.type='"+W.type+"'");const be=W.type;if((we=be)!==h.default.AUDIO&&we!==h.default.VIDEO&&we!==h.default.TEXT&&we!==h.default.IMAGE)return;var we;let Ce=W.streamInfo.id;_[Ce]||(_[Ce]=(function(){const Fe=I.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:Fe,current:null},video:{list:[],storeLastSettings:Fe,current:null},text:{list:[],storeLastSettings:Fe,current:null},image:{list:[],storeLastSettings:Fe,current:null}}})());const ze=_[Ce][be].list;for(let Fe=0,We=ze.length;Fe<We;++Fe)if(fe(ze[Fe],W))return;ze.push(W)},areTracksEqual:fe,clearDataForStream:function(W){_[W]&&delete _[W]},getCurrentTrackFor:re,getInitialSettings:ce,getTracksFor:X,getTracksWithHighestSelectionPriority:Ue,getTracksWithHighestBitrate:Ne,getTracksWithHighestEfficiency:ee,getTracksWithWidestRange:ae,initialize:function(){y.on(g.default.REPRESENTATION_SWITCH,z,v)},isCurrentTrack:function(W){if(!W)return!1;const be=W.type,we=W.streamInfo.id;return _[we]&&_[we][be]&&fe(_[we][be].current,W)},matchSettings:function(W,be,we=!1){try{let Ce=!1;if(W.lang){if(W.lang instanceof RegExp)Ce=be.lang.match(W.lang);else if(be.lang!==""){const Nt=wl(W.lang);Nt&&(Ce=xu(be.lang,Nt).length>0)}}else Ce=!0;const ze=W.index===void 0||W.index===null||be.index===W.index,Fe=!W.viewpoint||!!be.viewpoint.filter((function(Nt){return pe(Nt,W.viewpoint)}))[0],We=!W.role||!!be.roles.filter((function(Nt){return pe(Nt,W.role)}))[0];let lt=!W.accessibility||!!be.accessibility.filter((function(Nt){return pe(Nt,W.accessibility)}))[0],St=!W.audioChannelConfiguration||!!be.audioChannelConfiguration.filter((function(Nt){return pe(Nt,W.audioChannelConfiguration)}))[0];return Ce&&ze&&Fe&&(We||be.type===h.default.AUDIO&&we)&&lt&&St}catch{return!1}},matchSettingsAccessibility:Ae,matchSettingsAudioChannelConfig:Te,matchSettingsIndex:K,matchSettingsLang:ne,matchSettingsRole:Se,matchSettingsViewPoint:j,reset:me,saveTextSettingsDisabled:function(){P.setSavedMediaSettings(h.default.TEXT,null)},selectInitialTrack:de,setConfig:function(W){W&&(W.domStorage&&(P=W.domStorage),W.settings&&(I=W.settings),W.customParametersModel&&($=W.customParametersModel),W.mediaPlayerModel&&(q=W.mediaPlayerModel),W.videoModel&&(R=W.videoModel))},setInitialMediaSettingsForType:function(W,be){let we=D[W]||ce(W);const Ce=X(W,be.id);let ze=[];we&&Object.keys(we).length!==0||(we=P.getSavedMediaSettings(W),we&&delete we.codec,J(W,we)),Ce&&Ce.length!==0&&(ze=I.get().streaming.includePreselectionsForInitialTrackSelection?Array.from(Ce):Ce.filter((Fe=>!Fe.isPreselection)),we&&(w.info("Filtering "+ze.length+" "+W+" tracks based on settings"),ze=Ee(ze,B,we),ze=Ee(ze,ne,we),ze=Ee(ze,K,we),ze=Ee(ze,j,we),W===h.default.AUDIO&&D[W]||(ze=Ee(ze,Se,we)),ze=Ee(ze,Ae,we),ze=Ee(ze,Te,we),ze=Ee(ze,Re,we),w.info("Filtering "+W+" tracks ended, found "+ze.length+" matching track(s).")),ze.length>1?ie(de(W,ze)):ie(ze[0]))},setInitialSettings:J,setTrack:ie},w=(0,l.default)(b).getInstance().getLogger(v),me(),v}Cu.__dashjs_factory_name="MediaController";const Yg=n.default.getSingletonFactory(Cu);n.default.updateSingletonFactory(Cu.__dashjs_factory_name,Yg);var R_=Yg;function Wg(){let b,y,v,w;const _=this.context,I=(0,c.default)(_).getInstance();function M(R,P){return isNaN(R)?0:R>0?(P&&y.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):R<-.5?(P&&y.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):R}function D(R,P){return isNaN(R)?0:R<0?(P&&y.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):R>1?(P&&y.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):R}function N(){const R=$(),P=v.getLiveDelay();return!isNaN(P)&&P>0?Math.min(R,P):R}function $(){return I.get().streaming.buffer.bufferTimeDefault>0?I.get().streaming.buffer.bufferTimeDefault:q()?20:12}function q(){return I.get().streaming.buffer.fastSwitchEnabled!==null?I.get().streaming.buffer.fastSwitchEnabled:!v.getLowLatencyModeEnabled()}return b={getAbrBitrateParameter:function(R,P){try{const z=I.get().streaming.abr[R][P];if(!isNaN(z)&&z!==-1)return z;const X=w.getServiceDescriptionSettings();return X&&X[R]&&!isNaN(X[R][P])?X[R][P]:-1}catch{return-1}},getBufferTimeDefault:N,getBufferTimeDefaultUnadjusted:$,getCatchupMaxDrift:function(){if(!isNaN(I.get().streaming.liveCatchup.maxDrift)&&I.get().streaming.liveCatchup.maxDrift>=0)return I.get().streaming.liveCatchup.maxDrift;const R=w.getServiceDescriptionSettings();return R&&R.liveCatchup&&!isNaN(R.liveCatchup.maxDrift)&&R.liveCatchup.maxDrift>=0?R.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return I.get().streaming.liveCatchup.enabled!==null?I.get().streaming.liveCatchup.enabled:v.getInitialCatchupModeActivated()},getCatchupPlaybackRates:function(R){const P=I.get().streaming.liveCatchup.playbackRate;if(!isNaN(P.min)||!isNaN(P.max))return{min:M(P.min,R),max:D(P.max,R)};const z=w.getServiceDescriptionSettings();if(z&&z.liveCatchup&&(!isNaN(z.liveCatchup.playbackRate.min)||!isNaN(z.liveCatchup.playbackRate.max))){const X=z.liveCatchup.playbackRate;return{min:M(X.min,R),max:D(X.max,R)}}return{min:-.5,max:.5}},getFastSwitchEnabled:q,getInitialBufferLevel:function(){const R=I.get().streaming.buffer.initialBufferLevel;return isNaN(R)||R<0?0:Math.min(N(),R)},getRetryAttemptsForType:function(R){const P=isNaN(I.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:I.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return v.getLowLatencyModeEnabled()?I.get().streaming.retryAttempts[R]*P:I.get().streaming.retryAttempts[R]},getRetryIntervalsForType:function(R){const P=isNaN(I.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:I.get().streaming.retryIntervals.lowLatencyReductionFactor;return v.getLowLatencyModeEnabled()?I.get().streaming.retryIntervals[R]/P:I.get().streaming.retryIntervals[R]},getScheduleTimeout:function(){return v.getLowLatencyModeEnabled()?I.get().streaming.scheduling.lowLatencyTimeout:I.get().streaming.scheduling.defaultTimeout},reset:function(){},setConfig:function(R){R.playbackController&&(v=R.playbackController),R.serviceDescriptionController&&(w=R.serviceDescriptionController)}},y=(0,l.default)(_).getInstance().getLogger(b),b}Wg.__dashjs_factory_name="MediaPlayerModel";var C_=n.default.getSingletonFactory(Wg);function Xg(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_,I,M,D,N,$,q,R,P,z,X,re,ie,J,ce,fe,me,Ee,ne,K,B,j;function Se(){Re(),ie=!1,R=0,re=0,w=0,X=!1,z=!1,I=!1,ce=NaN,q=NaN,B&&(y.off(f.default.DATA_UPDATE_COMPLETED,Fe,M),y.off(f.default.MANIFEST_UPDATED,at,M),y.off(f.default.STREAMS_COMPOSED,It,M),y.off(g.default.PLAYBACK_ENDED,rn,M),y.off(g.default.STREAM_INITIALIZING,Xt,M),y.off(g.default.REPRESENTATION_SWITCH,Ye,M),y.off(g.default.BUFFER_LEVEL_STATE_CHANGED,St,M),ze(),B.removeEventListener("canplay",We),B.removeEventListener("canplaythrough",lt),B.removeEventListener("ended",_t),B.removeEventListener("error",Cn),B.removeEventListener("loadeddata",xt),B.removeEventListener("loadedmetadata",nt),B.removeEventListener("pause",sn),B.removeEventListener("play",Nt),B.removeEventListener("playing",Mt),B.removeEventListener("progress",wn),B.removeEventListener("ratechange",kn),B.removeEventListener("seeked",On),B.removeEventListener("seeking",vn),B.removeEventListener("stalled",Dt),B.removeEventListener("timeupdate",Pn),B.removeEventListener("volumechange",zt),B.removeEventListener("waiting",ln)),j=null,B=null,ne=null,N=null}function se(ot=null){return parseFloat((Ae(ot)-ae()).toFixed(5))}function Ae(ot){const Bt=ot||ne;return Bt.start+Bt.duration}function Te(ot=!1){ne&&B&&B.getElement()?(ot&&N&&ee(ae()),B.play()):ie=!0}function Re(){ne&&B&&B.pause()}function Ue(ot,Bt=!1,Vt=!1,Le=!1){ne&&B&&B.getElement()&&ot!==(isNaN(ce)?B.getTime():ce)&&(D=Vt===!0,D||(ce=ot),P.info("Requesting seek to time: "+ot+(D?" (internal)":"")),N&&Le&&ee(ot),B.setCurrentTime(ot,Bt))}function Ne(){if(!ne||!B||!N)return;const ot=Ee&&Ee.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO,Bt=_.getCurrentDVRInfo(ot);return Bt&&Bt.range?Bt.range.end:0}function ee(ot){const Bt=new Date(K.getClientReferenceTime()),Vt=v.getRegularPeriods()[0];R=K.calcPresentationTimeFromWallTime(Bt,Vt)-ot}function ae(){return ne&&B?B.getTime():null}function de(){return ne&&B?B.isPaused():null}function le(){return ne&&B?B.isSeeking():null}function ue(){return ne&&B?B.isStalled():null}function pe(){return ne&&B?B.getPlaybackRate():null}function W(){return ne&&B?B.getEnded():null}function be(){return N}function we(ot=null){if(de()||!N||B.getReadyState()===0||le()||X)return;ot||(ot=Ee.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO);const Bt=ae(),Vt=(function(Le,ft){const Kt=_.getCurrentDVRInfo(ft),Yt=Kt?Kt.range:null;let Ln;return Yt?(Ln=Le>Yt.end?Math.max(Yt.end-R,Yt.start):Le>0&&Le+.25<Yt.start&&Math.abs(Le-Yt.start)<31536e4?z?Math.max(Yt.end-R,Yt.start):Yt.start:Le,Ln):NaN})(Bt,ot);!isNaN(Vt)&&Vt!==Bt&&!le()&&(ue()||J||B.getReadyState()===1)&&(P.debug(`UpdateCurrentTime: Seek to actual time: ${Vt} from currentTime: ${Bt}`),Ue(Vt,!1,!1))}function Ce(){j===null&&(j=setInterval((()=>{(function(){if(y.trigger(f.default.WALLCLOCK_TIME_UPDATED,{isDynamic:N,time:new Date}),be()){const ot=Date.now();(isNaN(q)||ot>q+me.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(Ee.addDVRMetric(),de()?(function(){const Bt=Date.now();(!$||Bt>$+500)&&($=Bt,Pn())})():we(),q=ot)}})()}),me.get().streaming.wallclockTimeUpdateInterval))}function ze(){clearInterval(j),j=null}function Fe(ot){const Bt=ot.currentRepresentation,Vt=Bt?Bt.mediaInfo.streamInfo:null;Vt!==null&&ne.id===Vt.id&&(ne=Vt)}function We(){y.trigger(f.default.CAN_PLAY)}function lt(){y.trigger(f.default.CAN_PLAY_THROUGH)}function St(ot){ot.streamId===Ee.getActiveStreamInfo().id&&(J=ot.state===o.BUFFER_EMPTY,me.get().streaming.buffer.setStallState&&B.setStallState(ot.mediaType,ot.state===o.BUFFER_EMPTY))}function Nt(){P.info("Native video element event: play"),we(),Ce(),y.trigger(f.default.PLAYBACK_STARTED,{startTime:ae()})}function ln(){P.info("Native video element event: waiting"),y.trigger(f.default.PLAYBACK_WAITING,{playingTime:ae()})}function Mt(){P.info("Native video element event: playing"),D=!1,y.trigger(f.default.PLAYBACK_PLAYING,{playingTime:ae()})}function sn(){P.info("Native video element event: pause"),y.trigger(f.default.PLAYBACK_PAUSED,{ended:W()})}function vn(){if(D)return;let ot=ae();isNaN(ce)||ce===ot||(ot=ce),ce=NaN,P.info("Seeking to: "+ot),Ce(),y.trigger(f.default.PLAYBACK_SEEKING,{seekTime:ot,streamId:ne.id})}function On(){P.info("Native video element event: seeked"),D=!1,y.trigger(f.default.PLAYBACK_SEEKED,{streamId:ne.id})}function Pn(){ne&&y.trigger(f.default.PLAYBACK_TIME_UPDATED,{timeToEnd:se(),time:ae(),streamId:ne.id})}function wn(){y.trigger(f.default.PLAYBACK_PROGRESS,{streamId:ne.id})}function kn(){const ot=pe();P.info("Native video element event: ratechange: ",ot),y.trigger(f.default.PLAYBACK_RATE_CHANGED,{playbackRate:ot})}function nt(){P.info("Native video element event: loadedmetadata"),y.trigger(f.default.PLAYBACK_METADATA_LOADED),Ce()}function xt(){P.info("Native video element event: loadeddata"),y.trigger(f.default.PLAYBACK_LOADED_DATA)}function _t(){P.info("Native video element event: ended"),Re(),ze();const ot=Ee?Ee.getActiveStreamInfo():null;ot&&y.trigger(f.default.PLAYBACK_ENDED,{isLast:ot.isLast})}function zt(){y.trigger(f.default.PLAYBACK_VOLUME_CHANGED)}function rn(ot){if(j&&ot.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const Bt=ot.seekTime?ot.seekTime:Ae();B.setCurrentTime(Bt),Re(),ze()}}function Cn(ot){const Bt=ot.target||ot.srcElement;y.trigger(f.default.PLAYBACK_ERROR,{error:Bt.error})}function gt(){N=!1}function Dt(ot){y.trigger(f.default.PLAYBACK_STALLED,{e:ot})}function Xt(ot){var Bt;(Bt=ot.mediaInfo)&&Bt.supplementalProperties&&Bt.supplementalProperties.find((Vt=>Vt.schemeIdUri===h.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME))&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),z=!0)}function Ye(ot){const Bt=Ee.getActiveStreamInfo();ot&&Bt&&ot.currentRepresentation&&ot.streamId&&ot.streamId===Bt.id&&ot.mediaType&&(ot.mediaType===h.default.VIDEO||ot.mediaType===h.default.AUDIO)&&(z=ot.currentRepresentation.availabilityTimeComplete===!1,z&&!I&&(I=!0))}function at(){X=!0}function It(){X=!1}return M={computeAndSetLiveDelay:function(ot,Bt){let Vt,Le,ft;const Kt=!isNaN(ot)&&isFinite(ot)?ot:NaN;let Yt=v.getSuggestedPresentationDelay();const Ln=fe.getServiceDescriptionSettings();return Vt=isNaN(me.get().streaming.delay.liveDelay)?me.get().streaming.delay.liveDelayFragmentCount===null||isNaN(me.get().streaming.delay.liveDelayFragmentCount)||isNaN(Kt)?Ln&&!isNaN(Ln.liveDelay)&&Ln.liveDelay>0?Ln.liveDelay:me.get().streaming.delay.useSuggestedPresentationDelay===!0&&Yt!==null&&!isNaN(Yt)&&Yt>0?Yt:isNaN(Kt)?Bt&&!isNaN(Bt.minBufferTime)?4*Bt.minBufferTime:4*ne.manifestInfo.minBufferTime:4*Kt:Kt*me.get().streaming.delay.liveDelayFragmentCount:me.get().streaming.delay.liveDelay,ft=v.getAvailabilityStartTime(),ft!==null&&(w=ft),Le=Bt&&Bt.dvrWindowSize>0?Math.min(Vt,Bt.dvrWindowSize):Vt,R=Le,re=Le,Le},getAvailabilityStartTime:function(){return w},getBufferLevel:function(ot=null){let Bt=null;return Ee.getActiveStreamProcessors().forEach((Vt=>{if(!ot||ot.length===0||ot.indexOf(Vt.getType())===-1){const Le=Vt.getBufferLevel();Bt=Bt===null?Le:Math.min(Bt,Le)}})),Bt},getCurrentLiveLatency:function(){if(!N||isNaN(w))return NaN;let ot=ae();if(isNaN(ot)||ot===0)return 0;const Bt=new Date().getTime()+1e3*K.getClientTimeOffset();return Math.max(((Bt-w-1e3*ot)/1e3).toFixed(3),0)},getEnded:W,getInitialCatchupModeActivated:function(){return I},getIsDynamic:be,getIsManifestUpdateInProgress:function(){return X},getLiveDelay:function(){return R},getLowLatencyModeEnabled:function(){return z},getOriginalLiveDelay:function(){return re},getPlaybackRate:pe,getPlaybackStalled:function(){return J},getPlayedRanges:function(){return ne&&B?B.getPlayedRanges():null},getStreamController:function(){return Ee},getStreamEndTime:Ae,getTime:ae,getTimeToStreamEnd:se,initialize:function(ot,Bt){ne=ot,Bt!==!0&&(B.addEventListener("canplay",We),B.addEventListener("canplaythrough",lt),B.addEventListener("ended",_t),B.addEventListener("error",Cn),B.addEventListener("loadeddata",xt),B.addEventListener("loadedmetadata",nt),B.addEventListener("pause",sn),B.addEventListener("play",Nt),B.addEventListener("playing",Mt),B.addEventListener("progress",wn),B.addEventListener("ratechange",kn),B.addEventListener("seeked",On),B.addEventListener("seeking",vn),B.addEventListener("stalled",Dt),B.addEventListener("timeupdate",Pn),B.addEventListener("volumechange",zt),B.addEventListener("waiting",ln),N=ne.manifestInfo.isDynamic,J=!1,D=!1,y.on(f.default.DATA_UPDATE_COMPLETED,Fe,M),y.on(f.default.MANIFEST_UPDATED,at,M),y.on(f.default.STREAMS_COMPOSED,It,M),y.on(g.default.PLAYBACK_ENDED,rn,M,{priority:m.default.EVENT_PRIORITY_HIGH}),y.on(g.default.STREAM_INITIALIZING,Xt,M),y.on(g.default.REPRESENTATION_SWITCH,Ye,M),y.on(g.default.BUFFER_LEVEL_STATE_CHANGED,St,M),y.on(g.default.DYNAMIC_TO_STATIC,gt,M),ie&&(ie=!1,Te()))},isPaused:de,isProgressing:function(ot=500){return new Promise((Bt=>{let Vt=-1,Le=null;const ft=Yt=>{clearTimeout(Le),Le=null,y.off(g.default.PLAYBACK_TIME_UPDATED,Kt,M),Bt(Yt)},Kt=Yt=>{Vt<0?Vt=Yt.time:Yt.time>Vt+.1&&ft(!0)};Le=setTimeout((()=>{ft(!1)}),ot),y.on(g.default.PLAYBACK_TIME_UPDATED,Kt,M)}))},isSeeking:le,isStalled:ue,pause:Re,play:Te,reset:Se,seek:Ue,seekToCurrentLive:function(ot=!1,Bt=!1,Vt=!1){const Le=Ne();Le!==0&&Ue(Le-R,ot,Bt,Vt)},seekToOriginalLive:function(ot=!1,Bt=!1,Vt=!1){const Le=Ne();Le!==0&&(R=re,Ue(Le-R,ot,Bt,Vt))},setConfig:function(ot){ot&&(ot.streamController&&(Ee=ot.streamController),ot.serviceDescriptionController&&(fe=ot.serviceDescriptionController),ot.dashMetrics&&(_=ot.dashMetrics),ot.adapter&&(v=ot.adapter),ot.videoModel&&(B=ot.videoModel),ot.timelineConverter&&(K=ot.timelineConverter),ot.settings&&(me=ot.settings))},updateCurrentTime:we},P=(0,l.default)(b).getInstance().getLogger(M),Se(),M}Xg.__dashjs_factory_name="PlaybackController";var k_=n.default.getSingletonFactory(Xg),Qg=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.isPartialSegment=!1,this.media=null,this.mediaRange=null,this.mediaUrl=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}assignAttributes(b){for(let y in b)b.hasOwnProperty(y)&&this.hasOwnProperty(y)&&(this[y]=b[y])}},ku=class extends Qg{constructor(){super()}};function Zg(){const b=this.context;let y,v,w,_,I,M,D,N,$,q,R,P;function z(J,ce,fe,me){let Ee=null;const ne=J?P.resolve(J.path):null,K=me||{init:!0,url:ne?ne.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ce,representation:J};v.debug("Start searching for initialization.");const B=ie(K);D.load({request:B,success:function(j){if(K.bytesLoaded=K.range.end,Ee=_.findInitRange(j),!Ee)return K.range.end=K.bytesLoaded+K.bytesToLoad,z(J,ce,fe,K);J.range=Ee,fe(J)},error:function(){fe(J)}}),v.debug("Perform init search: "+K.url)}function X(J,ce,fe,me,Ee,ne){if(fe&&(fe.start===void 0||fe.end===void 0)){const Te=fe?fe.toString().split("-"):null;fe=Te?{start:parseFloat(Te[0]),end:parseFloat(Te[1])}:null}Ee=Ee||re;let K=null,B=null;const j=!!fe,Se=J?P.resolve(J.path):null,se={init:!1,url:Se?Se.url:void 0,range:j?fe:{start:0,end:1500},searching:!j,bytesLoaded:ne?ne.bytesLoaded:0,bytesToLoad:1500,mediaType:ce,representation:J},Ae=ie(se);D.load({request:Ae,success:function(Te){const Re=se.bytesToLoad,Ue=Te.byteLength;if(se.bytesLoaded=se.range.end-se.range.start,K=_.parse(Te),B=K.getBox("sidx"),B&&B.isComplete){const Ne=B.references;let ee,ae;if(Ne!=null&&Ne.length>0&&(ee=Ne[0].reference_type===1),ee){let de,le,ue,pe,W;v.debug("Initiate multiple SIDX load."),se.range.end=se.range.start+B.size;let be=[],we=0,Ce=(B.offset||se.range.start)+B.size;const ze=function(Fe){Fe?(be=be.concat(Fe),we++,we>=le&&(be.sort((function(We,lt){return We.startTime-lt.startTime<0?-1:0})),Ee(be,J,me))):Ee(null,J,me)};for(de=0,le=Ne.length;de<le;de++)ue=Ce,pe=Ce+Ne[de].referenced_size-1,Ce+=Ne[de].referenced_size,W={start:ue,end:pe},X(J,ce,W,me,ze,se)}else v.debug("Parsing segments from SIDX. representation "+ce+" - id: "+J.id+" for range : "+se.range.start+" - "+se.range.end),ae=(function(de,le){const ue=de.references,pe=ue.length,W=de.timescale;let be=de.earliest_presentation_time,we=le.range.start+de.offset+de.first_offset+de.size;const Ce=[];let ze,Fe,We,lt;for(let St=0;St<pe;St++)We=ue[St].subsegment_duration,lt=ue[St].referenced_size,ze=new ku,ze.duration=We,ze.startTime=be,ze.timescale=W,Fe=we+lt-1,ze.mediaRange=we+"-"+Fe,Ce.push(ze),be+=We,we+=lt;return Ce})(B,se),Ee(ae,J,me)}else{if(B)se.range.start=B.offset||se.range.start,se.range.end=se.range.start+(B.size||Re);else{if(Ue<se.bytesLoaded)return void Ee(null,J,me);{const Ne=K.getLastBox();Ne&&Ne.size?(se.range.start=Ne.offset+Ne.size,se.range.end=se.range.start+Re):se.range.end+=Re}}X(J,ce,se.range,me,null,se)}},error:function(){Ee(null,J,me)}}),v.debug(`Perform SIDX load for type ${ce} : ${se.url} with range ${se.range.start} - ${se.range.end}`)}function re(J,ce,fe){fe({segments:J,representation:ce,error:J?void 0:new Tt.default(N.SEGMENT_BASE_LOADER_ERROR_CODE,N.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ie(J){if(!J.url)return;const ce=new oe;return ce.setInfo(J),ce}return y={setConfig:function(J){J.baseURLController&&(P=J.baseURLController),J.dashMetrics&&(I=J.dashMetrics),J.mediaPlayerModel&&(M=J.mediaPlayerModel),J.errHandler&&(w=J.errHandler),J.boxParser&&(_=J.boxParser),J.debug&&(v=J.debug.getLogger(y)),J.errors&&(N=J.errors),J.urlUtils&&(R=J.urlUtils),J.constants&&($=J.constants),J.dashConstants&&(q=J.dashConstants)},initialize:function(){D=ms(b).create({errHandler:w,dashMetrics:I,mediaPlayerModel:M,boxParser:_,errors:N,urlUtils:R,constants:$,dashConstants:q})},loadInitialization:function(J,ce){return new Promise((fe=>{z(J,ce,fe)}))},loadSegments:function(J,ce,fe){return new Promise((me=>{X(J,ce,fe,me)}))},reset:function(){D&&(D.abort(),D=null)}},y}Zg.__dashjs_factory_name="SegmentBaseLoader";var L_=n.default.getSingletonFactory(Zg);function Jg(b){let y;b=b||{};let v=new DataView(b.data),w=0;function _(M,D){let N,$,q=!0,R=0;if(D===void 0&&(D=!1),M.tag>16777215?(v.getUint32(w)!==M.tag&&(q=!1),R=4):M.tag>65535?(N=v.getUint16(w),$=v.getUint8(w+2),256*N+$!==M.tag&&(q=!1),R=3):M.tag>255?(v.getUint16(w)!==M.tag&&(q=!1),R=2):(v.getUint8(w)!==M.tag&&(q=!1),R=1),!q&&M.required&&!D)throw new Error("required tag not found");return q&&(w+=R),q}function I(M){let D=1,N=128,$=-1,q=0,R=v.getUint8(w),P=0;for(P=0;P<8;P+=1){if((R&N)===N){q=M===void 0?R&~N:R,$=P;break}N>>=1}for(P=0;P<$;P+=1,D+=1)q=q<<8|255&v.getUint8(w+D);return w+=D,q}return y={getPos:function(){return w},setPos:function(M){w=M},consumeTag:_,consumeTagAndSize:function(M,D){let N=_(M,D);return N&&I(),N},parseTag:function(M){let D;return _(M),D=I(),y[M.parse](D)},skipOverElement:function(M,D){let N,$=_(M,D);return $&&(N=I(),w+=N),$},getMatroskaCodedNum:I,getMatroskaFloat:function(M){let D;switch(M){case 4:D=v.getFloat32(w),w+=4;break;case 8:D=v.getFloat64(w),w+=8}return D},getMatroskaUint:function(M){if(M>4)return(function(N){const $=Math.floor(Number.MAX_SAFE_INTEGER/256);let q=0;for(let R=0;R<N;R+=1){if(q>$)throw new Error("Value exceeds safe integer limit");q*=256;const P=v.getUint8(w+R);if(q>Number.MAX_SAFE_INTEGER-P)throw new Error("Value exceeds safe integer limit");q+=P}return w+=N,q})(M);let D=0;for(let N=0;N<M;N+=1)D<<=8,D|=255&v.getUint8(w+N);return w+=M,D>>>0},moreData:function(){return w<v.byteLength}},y}Jg.__dashjs_factory_name="EBMLParser";var ep=n.default.getClassFactory(Jg);function tp(){const b=this.context;let y,v,w,_,I,M,D,N,$;function q(R){const P=new oe;return P.setInfo(R),P}return y={setConfig:function(R){if(!(R.baseURLController&&R.dashMetrics&&R.mediaPlayerModel&&R.errHandler))throw new Error(h.default.MISSING_CONFIG_ERROR);$=R.baseURLController,I=R.dashMetrics,M=R.mediaPlayerModel,_=R.errHandler,N=R.errors,v=R.debug.getLogger(y)},initialize:function(){D=ms(b).create({errHandler:_,dashMetrics:I,mediaPlayerModel:M,errors:N})},loadInitialization:function(R,P){return new Promise((z=>{let X=null,re=R?$.resolve(R.path):null,ie=R?R.range.split("-"):null,J={range:{start:ie?parseFloat(ie[0]):null,end:ie?parseFloat(ie[1]):null},request:X,url:re?re.url:void 0,init:!0,mediaType:P};v.info("Start loading initialization."),X=q(J),D.load({request:X,success:function(){z(R)},error:function(){z(R)}}),v.debug("Perform init load: "+J.url)}))},loadSegments:function(R,P,z){return new Promise((X=>{let re=null,ie=R?$.resolve(R.path):null,J=ie?ie.url:void 0;re=q({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:re,url:J,init:!1,mediaType:P,representation:R}),v.debug("Parsing ebml header"),D.load({request:re,success:function(ce){(function(fe,me,Ee,ne){if(!fe||fe.byteLength===0)return void ne(null);let K,B,j,Se,se=ep(b).create({data:fe}),Ae=Ee?Ee.split("-"):null,Te=null,Re={url:me,range:{start:Ae?parseFloat(Ae[0]):null,end:Ae?parseFloat(Ae[1]):null},request:Te};for(v.debug("Parse EBML header: "+Re.url),se.skipOverElement(w.EBML),se.consumeTag(w.Segment),j=se.getMatroskaCodedNum(),j+=se.getPos(),Se=se.getPos();se.moreData()&&!se.consumeTagAndSize(w.Segment.Info,!0);)if(!(se.skipOverElement(w.Segment.SeekHead,!0)||se.skipOverElement(w.Segment.Tracks,!0)||se.skipOverElement(w.Segment.Cues,!0)||se.skipOverElement(w.Void,!0)))throw new Error("no valid top level element found");for(;K===void 0;){let Ue=se.getMatroskaCodedNum(!0),Ne=se.getMatroskaCodedNum();Ue===w.Segment.Info.Duration.tag?K=se[w.Segment.Info.Duration.parse](Ne):se.setPos(se.getPos()+Ne)}Te=q(Re),D.load({request:Te,success:function(Ue){B=(function(Ne,ee,ae,de){let le,ue,pe,W,be,we,Ce,ze;for(ue=(function(Fe){let We,lt,St=[],Nt=ep(b).create({data:Fe});for(Nt.consumeTagAndSize(w.Segment.Cues);Nt.moreData()&&Nt.consumeTagAndSize(w.Segment.Cues.CuePoint,!0);){for(We={},We.CueTime=Nt.parseTag(w.Segment.Cues.CuePoint.CueTime),We.CueTracks=[];Nt.moreData()&&Nt.consumeTag(w.Segment.Cues.CuePoint.CueTrackPositions,!0);){const ln=Nt.getMatroskaCodedNum(),Mt=Nt.getPos();if(lt={},lt.Track=Nt.parseTag(w.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),lt.Track===0)throw new Error("Cue track cannot be 0");lt.ClusterPosition=Nt.parseTag(w.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),We.CueTracks.push(lt),Nt.setPos(Mt+ln)}if(We.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");St.push(We)}if(St.length===0)throw new Error("mandatory cuepoint not found");return St})(Ne),pe=[],be=0,we=ue.length;be<we;be+=1)W=new ku,le=0,le=be<ue.length-1?ue[be+1].CueTime-ue[be].CueTime:de-ue[be].CueTime,W.duration=le,W.startTime=ue[be].CueTime,W.timescale=1e3,Ce=ue[be].CueTracks[0].ClusterPosition+ee,ze=be<ue.length-1?ue[be+1].CueTracks[0].ClusterPosition+ee-1:ae-1,W.mediaRange=Ce+"-"+ze,pe.push(W);return v.debug("Parsed cues: "+pe.length+" cues."),pe})(Ue,Se,j,K),ne(B)},error:function(){v.error("Download Error: Cues "+Re.url),ne(null)}}),v.debug("Perform cues load: "+Re.url+" bytes="+Re.range.start+"-"+Re.range.end)})(ce,J,z,(function(fe){X({segments:fe,representation:R,error:fe?void 0:new Tt.default(N.SEGMENT_BASE_LOADER_ERROR_CODE,N.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function(){X({representation:R,error:new Tt.default(N.SEGMENT_BASE_LOADER_ERROR_CODE,N.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){D&&(D.abort(),D=null)}},w={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},y}tp.__dashjs_factory_name="WebmSegmentBaseLoader";var N_=n.default.getSingletonFactory(tp);function np(b){b=b||{};const y=this.context,v=b.eventBus,w=b.events,_=b.dashMetrics,I=b.mediaPlayerModel,M=b.errHandler,D=b.baseURLController,N=b.debug,$=b.boxParser,q=b.errors;let R,P,z;function X(re){return(re?re.split("/")[1]:"").toLowerCase()==="webm"}return R={initialize:function(){P.initialize(),z.initialize()},getSegmentBaseInitSegment:function(re){return X(re.representation.mimeType)?z.loadInitialization(re.representation,re.mediaType):P.loadInitialization(re.representation,re.mediaType)},getSegmentList:function(re){return X(re.mimeType)?z.loadSegments(re.representation,re.mediaType,re.representation?re.representation.indexRange:null):P.loadSegments(re.representation,re.mediaType,re.representation?re.representation.indexRange:null)},reset:function(){P.reset(),z.reset()}},P=L_(y).getInstance(),z=N_(y).getInstance(),P.setConfig({baseURLController:D,dashMetrics:_,mediaPlayerModel:I,errHandler:M,eventBus:v,events:w,errors:q,debug:N,boxParser:$}),z.setConfig({baseURLController:D,dashMetrics:_,mediaPlayerModel:I,errHandler:M,eventBus:v,events:w,errors:q,debug:N}),R}np.__dashjs_factory_name="SegmentBaseController";var D_=n.default.getSingletonFactory(np);const P_=[h.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],rp="video",ip="audio";function ap(){const b=this.context;let y,v,w,_,I;function M(){v={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},w=[]}function D(N,$,q){try{v[N][$]=q/1e3}catch(R){_.error(R)}}return y={getServiceDescriptionSettings:function(){return v},getProducerReferenceTimeOffsets:function(){return w},calculateProducerReferenceTimeOffsets:function(N){try{let $=[];if(N&&N.length>0){const q=[h.default.VIDEO,h.default.AUDIO,h.default.TEXT],R=I.getAvailabilityStartTime()/1e3;N.forEach((P=>{const z=q.reduce(((X,re)=>X.concat(I.getAllMediaInfoForType(P,re))),[]).reduce(((X,re)=>(I.getProducerReferenceTimes(P,re).forEach((ie=>{const J=I.getVoRepresentations(re);if(J&&J.length>0&&J[0].adaptation&&J[0].segmentInfoType===ve.default.SEGMENT_TEMPLATE){const ce=J[0],fe=new Date(ie[ve.default.WALL_CLOCK_TIME]).getTime()/1e3-(ie[ve.default.PRESENTATION_TIME]/ce[ve.default.TIMESCALE]-ce[ve.default.PRESENTATION_TIME_OFFSET]+P.start),me=R-fe;X.push({id:ie[ve.default.ID],to:me})}})),X)),[]);$=$.concat(z)}))}w=$}catch($){_.error($),w=[]}},applyServiceDescription:function(N){if(!N||!N.serviceDescriptions)return;const $=N.serviceDescriptions.filter((P=>P_.includes(P.schemeIdUri))),q=N.serviceDescriptions.filter((P=>P.schemeIdUri==null));let R=$.length>0?$[$.length-1]:q[q.length-1];R&&(R.latency&&R.latency.target>0&&(function(P){let z;if(P.schemeIdUri,h.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,z=(function(X){return{liveDelay:X.latency.target/1e3,maxDrift:!isNaN(X.latency.max)&&X.latency.max>X.latency.target?(X.latency.max-X.latency.target+500)/1e3:NaN,referenceId:X.latency.referenceId||NaN}})(P),w.length>0){let{to:X,id:re}=(function(ie){let J,ce=0,fe=w.filter((me=>me.id===ie.referenceId));return fe.length===0?(ce=w.length>0?w[0].to:0,J=w[0].id||NaN):(ce=fe[0].to||0,J=fe[0].id||NaN),{to:ce,id:J}})(z);v.liveDelay=z.liveDelay-X,v.liveCatchup.maxDrift=z.maxDrift,_.debug(`
                Found latency properties coming from service description. Applied time offset of ${X} from ProducerReferenceTime element with id ${re}.
                Live Delay: ${z.liveDelay-X}, Live catchup max drift: ${z.maxDrift}
            `)}else v.liveDelay=z.liveDelay,v.liveCatchup.maxDrift=z.maxDrift,_.debug(`Found latency properties coming from service description: Live Delay: ${z.liveDelay}, Live catchup max drift: ${z.maxDrift}`)})(R),R.playbackRate&&(function(P){const z=P.playbackRate.min?Math.round(1e3*(P.playbackRate.min-1))/1e3:NaN,X=P.playbackRate.max?Math.round(1e3*(P.playbackRate.max-1))/1e3:NaN;v.liveCatchup.playbackRate.min=z,v.liveCatchup.playbackRate.max=X,_.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${z}`),_.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${X}`)})(R),R.operatingQuality,R.operatingBandwidth&&(function(P){if(!P||!P.operatingBandwidth||!P.operatingBandwidth.mediaType||P.operatingBandwidth.mediaType==="all")return;const z={};z.minBandwidth=P.operatingBandwidth.min,z.maxBandwidth=P.operatingBandwidth.max,z.targetBandwidth=P.operatingBandwidth.target;const X=[];P.operatingBandwidth.mediaType===rp||P.operatingBandwidth.mediaType===ip?X.push(P.operatingBandwidth.mediaType):P.operatingBandwidth.mediaType==="any"&&(X.push(ip),X.push(rp)),X.forEach((re=>{isNaN(z.minBandwidth)||D("minBitrate",re,z.minBandwidth),isNaN(z.maxBandwidth)||D("maxBitrate",re,z.maxBandwidth),isNaN(z.targetBandwidth)||D("initialBitrate",re,z.targetBandwidth)}))})(R),R.contentSteering&&(function(P){v.contentSteering=P.contentSteering})(R),R.clientDataReporting&&(function(P){v.clientDataReporting=P.clientDataReporting})(R))},reset:function(){M()},setConfig:function(N){N&&N.adapter&&(I=N.adapter)}},_=(0,l.default)(b).getInstance().getLogger(y),M(),y}ap.__dashjs_factory_name="ServiceDescriptionController";var M_=n.default.getSingletonFactory(ap);class O_{constructor(y){this._ranges=[];for(const v of y){const w=this._ranges,_={start:v.start,end:v.end},I=w.length?w[w.length-1]:null;!I||_.start>I.end?w.push(_):I.end=_.end}}get length(){return this._ranges.length}start(y){return this._ranges[y].start}end(y){return this._ranges[y].end}}var sp=class{constructor(b,y){this.eventBus=y,this.mimeType=b,this.updating=!1,this.chunks=[],this.appendWindowStart=0,this.appendWindowEnd=1/0,this.timestampOffset=0,this.mode="segments"}appendBuffer(b,y,v){if(this.updating)throw new Error("SourceBuffer is currently updating");this.updating=!0,this.eventBus.trigger("externalSourceBufferUpdateStart",{mimeType:this.mimeType,request:"appendBuffer",data:b,start:y,end:v}),Number.isNaN(y)||(this.chunks.push({data:b,start:y,end:v}),this.chunks.sort(((w,_)=>w.start-_.start))),setTimeout((()=>{this.updating=!1,this.eventBus.trigger("externalSourceBufferUpdating",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType})}),10)}abort(){this.updating&&(this.updating=!1,this.eventBus.trigger("externalSourceBufferAbort",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType}))}remove(b,y){if(this.updating)throw new Error("SourceBuffer is currently updating");this.updating=!0,this.eventBus.trigger("externalSourceBufferUpdateStart",{mimeType:this.mimeType,request:"remove",start:b,end:y}),this.chunks=this.chunks.filter((v=>v.end<=b||v.start>=y)),setTimeout((()=>{this.updating=!1,this.eventBus.trigger("externalSourceBufferUpdating",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType})}),10)}get buffered(){return new O_(this.chunks)}},F_=class{constructor(b){this.eventBus=b,this.reset()}get duration(){return this._duration}set duration(b){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");this._duration=b}get readyState(){return this._readyState}addSourceBuffer(b){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");const y=new sp(b,this.eventBus);return this.sourceBuffers.set(y,b),y}removeSourceBuffer(b){if(!this.sourceBuffers.has(b))throw new Error("ExternalSourceBuffer not found");this.sourceBuffers.delete(b)}open(){this._readyState="open",this.eventBus.trigger("externalMediaSourceOpen",{})}endOfStream(){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");this._readyState="ended",this.eventBus.trigger("externalMediaSourceEnded",{})}close(){this._readyState="closed",this.eventBus.trigger("externalMediaSourceClosed",{})}reset(){this.sourceBuffers=new Map,this._duration=NaN,this._readyState="closed"}},z_=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},U_=class extends oe{constructor(b){super(b),this.checkForExistenceOnly=!0}};function op(b){b=b||{};const y=this.context,v=b.eventBus,w=b.events,_=b.urlUtils,I=b.errors,M=b.streamId;let D,N;return D={abort:function(){N&&N.abort()},checkForExistence:function($){const q=function(R){v.trigger(w.CHECK_FOR_EXISTENCE_COMPLETED,{request:$,exists:R})};if($){let R=new U_($.url);N.load({request:R,success:function(){q(!0)},error:function(){q(!1)}})}else q(!1)},load:function($){const q=function(R,P){v.trigger(w.LOADING_COMPLETED,{request:$,response:R||null,error:P||null,sender:D})};$?N.load({request:$,progress:function(R){v.trigger(w.LOADING_PROGRESS,{request:$,stream:R.stream,streamId:M}),R.data&&v.trigger(w.LOADING_DATA_PROGRESS,{request:$,response:R.data||null,error:null,sender:D})},success:function(R){q(R)},error:function(R,P,z){q(void 0,new Tt.default(I.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,z,P))},abort:function(R){R&&v.trigger(w.LOADING_ABANDONED,{mediaType:R.mediaType,request:R,sender:D})}}):q(void 0,new Tt.default(I.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,I.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){N&&(N.abort(),N.reset(),N=null)},resetInitialSettings:function(){N&&N.resetInitialSettings()}},N=ms(y).create({errHandler:b.errHandler,errors:I,dashMetrics:b.dashMetrics,mediaPlayerModel:b.mediaPlayerModel,urlUtils:_,constants:h.default,boxParser:b.boxParser,dashConstants:b.dashConstants,requestTimeout:b.settings.get().streaming.fragmentRequestTimeout}),D}op.__dashjs_factory_name="FragmentLoader";var B_=n.default.getClassFactory(op);function lp(b){b=b||{};const y=this.context,v=(0,m.default)(y).getInstance(),w=b.errHandler,_=b.mediaPlayerModel,I=b.dashMetrics,M=(0,l.default)(y).getInstance(),D=b.streamInfo;let N,$,q;function R(){return D.id}function P(){for(let X in q)q[X].reset();q={}}function z(X){if(!X.sender)return;const re=X.request,ie=X.response,J=re.isInitializationRequest(),ce=re.representation.mediaInfo.streamInfo;if(X.error&&(re.mediaType===h.default.AUDIO||re.mediaType===h.default.VIDEO||re.mediaType===h.default.TEXT&&re.representation.mediaInfo.isFragmented)&&v.trigger(f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:X.request.serviceLocation}),!ie||!ce)return void $.warn("No "+re.mediaType+" bytes to push or stream is inactive.");const fe=(function(me,Ee,ne,K){const B=new z_;return B.streamId=ne,B.segmentType=Ee.type,B.start=Ee.startTime,B.duration=Ee.duration,B.end=B.start+B.duration,B.bytes=me,B.index=Ee.index,B.representation=Ee.representation,B.endFragment=K,B})(ie,re,D.id,X.type!==f.default.FRAGMENT_LOADING_PROGRESS);v.trigger(J?f.default.INIT_FRAGMENT_LOADED:f.default.MEDIA_FRAGMENT_LOADED,{chunk:fe,request:re},{streamId:ce.id,mediaType:re.mediaType})}return N={getStreamId:R,getModel:function(X){let re=q[X];return re||(re=je(y).create({streamInfo:D,type:X,dashMetrics:I,fragmentLoader:B_(y).create({dashMetrics:I,mediaPlayerModel:_,errHandler:w,settings:b.settings,boxParser:b.boxParser,eventBus:v,events:f.default,errors:Jt,dashConstants:b.dashConstants,urlUtils:b.urlUtils,streamId:R()}),debug:M,eventBus:v,events:f.default}),q[X]=re),re},reset:function(){v.off(g.default.FRAGMENT_LOADING_COMPLETED,z,this),v.off(g.default.FRAGMENT_LOADING_PROGRESS,z,this),P()}},$=M.getLogger(N),P(),v.on(g.default.FRAGMENT_LOADING_COMPLETED,z,N),v.on(g.default.FRAGMENT_LOADING_PROGRESS,z,N),N}lp.__dashjs_factory_name="FragmentController";var $_=n.default.getClassFactory(lp),ua=class{constructor(b){this.newMediaInfo=b.newMediaInfo,this.previouslySelectedRepresentation=b.previouslySelectedRepresentation,this.newRepresentation=b.newRepresentation}};function cp(b){const y=this.context,v=(0,c.default)(y).getInstance(),w=b.textController,_=b.eventBus;let I,M,D,N,$,q,R=[],P=[],z=!1,X=b.mediaSource,re=null;function ie(se){return se.mimeType+';codecs="'+se.codecs+'"'}function J(se){return N=w.getTextSourceBuffer(se),Promise.resolve()}function ce(){if(typeof N.addEventListener=="function")try{N.addEventListener("updateend",B,!1),N.addEventListener("error",j,!1),N.addEventListener("abort",j,!1)}catch{q=setInterval(B,50)}else q=setInterval(B,50)}function fe(){try{typeof N.removeEventListener=="function"&&(N.removeEventListener("updateend",B,!1),N.removeEventListener("error",j,!1),N.removeEventListener("abort",j,!1)),clearInterval(q)}catch(se){D.error(se)}}function me(se){return new Promise((Ae=>{N&&v.get().streaming.buffer.useAppendWindow?Se((()=>{try{if(!N)return void Ae();let Te=X.duration,Re=0;se&&!isNaN(se.start)&&!isNaN(se.duration)&&isFinite(se.duration)&&(Te=se.start+se.duration),se&&!isNaN(se.start)&&(Re=se.start),N.appendWindowEnd===Te&&N.appendWindowStart===Re||(N.appendWindowStart=0,N.appendWindowEnd=Te+.01,N.appendWindowStart=Math.max(Re-.1,0),D.debug(`Updated append window for ${$.type}. Set start to ${N.appendWindowStart} and end to ${N.appendWindowEnd}`)),Ae()}catch{D.warn("Failed to set append window"),Ae()}})):Ae()}))}function Ee(se){return new Promise((Ae=>{N?Se((()=>{try{N.timestampOffset===se||isNaN(se)||(N.timestampOffset=se,D.debug(`Set MSE timestamp offset to ${se}`)),Ae()}catch{Ae()}})):Ae()}))}function ne(){if(!z&&P.length>0){z=!0;const se=P[0];P.splice(0,1);const Ae=function(){z=!1,P.length>0&&ne.call(this),se&&se.data&&se.data.segmentType&&se.data.segmentType!==Q.HTTPRequest.INIT_SEGMENT_TYPE&&delete se.data.bytes,se.promise.resolve({chunk:se.data})};try{if(re=se.request,se.data.bytes.byteLength===0)Ae.call(this);else{try{D.debug(`Appending ${se.data.segmentType} from period ${se.data.streamId} to buffer. Request URL: ${se.request.url}, Representation: ID: ${se.data.representation.id}, bitrate: ${se.data.representation.bitrateInKbit}`)}catch{}N instanceof sp?N.appendBuffer(se.data.bytes,se.data.start,se.data.end):N.appendBuffer?N.appendBuffer(se.data.bytes):N.append(se.data.bytes,se.data),Se(Ae.bind(this))}}catch(Te){D.fatal('SourceBuffer append failed "'+Te+'"'),P.length>0?ne():z=!1,delete se.data.bytes,se.promise.reject({chunk:se.data,error:new Tt.default(Te.code,Te.message)})}}}function K(){R.length>0&&!N.updating&&(R.shift()(),K())}function B(){N.updating||K()}function j(se){const Ae=se.target||{};(function(Te,Re){let Ue=Re||{};_.trigger(Te,Ue,{streamId:$.streamInfo.id,mediaType:M})})(f.default.SOURCE_BUFFER_ERROR,{error:Ae,lastRequestAppended:re})}function Se(se){try{R.push(se),N&&!N.updating&&K()}catch(Ae){D.error(Ae)}}return I={abort:function(){return new Promise((se=>{try{P=[],X.readyState==="open"?Se((()=>{try{N&&N.abort(),se()}catch{se()}})):(N&&N.setTextTrack&&X.readyState==="ended"&&N.abort(),se())}catch{se()}}))},abortBeforeAppend:function(){return new Promise((se=>{Se((()=>{const Ae=N.appendWindowStart,Te=N.appendWindowEnd;N&&(N.abort(),N.appendWindowStart=Ae,N.appendWindowEnd=Te),se()}))}))},append:function(se,Ae=null){return new Promise(((Te,Re)=>{se?(P.push({data:se,promise:{resolve:Te,reject:Re},request:Ae}),Se(ne.bind(this))):Re({chunk:se,error:new Tt.default(Jt.APPEND_ERROR_CODE,Jt.APPEND_ERROR_MESSAGE)})}))},changeType:function(se){const Ae=ie(se);return new Promise((Te=>{Se((()=>{N.changeType&&(D.debug(`Changing SourceBuffer codec to ${Ae}`),N.changeType(Ae)),Te()}))}))},getAllBufferRanges:function(){try{return N?.buffered}catch(se){return D.error("getAllBufferRanges exception: "+se.message),null}},getBuffer:function(){return N},getType:function(){return M},initializeForFirstUse:function(se,Ae){$=se;const Te=se.streamInfo;M=$.type;const Re=Ae?ie(Ae):se.codec;try{if(Re.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return J(Te);N=X.addSourceBuffer(Re),ce();const Ue=[];return Ue.push(me($.streamInfo)),Ae&&Ae.mseTimeOffset!==void 0&&Ue.push(Ee(Ae.mseTimeOffset)),Promise.all(Ue)}catch(Ue){return $.type==h.default.TEXT&&!$.isFragmented||Re.indexOf('codecs="stpp')!==-1||Re.indexOf('codecs="vtt')!==-1||Re.indexOf("text/vtt")!==-1?J(Te):Promise.reject(Ue)}},initializeForStreamSwitch:function(se,Ae,Te){$=se,M=$.type,(function(Re){N=Re.getBuffer()})(Te),ce()},remove:function(se){return new Promise(((Ae,Te)=>{const Re=se.start,Ue=se.end;Re>=0&&Ue>Re?Se((function(){try{N.remove(Re,Ue),Se((function(){Ae({from:Re,to:Ue,unintended:!1}),se.resolve&&se.resolve()}))}catch(Ne){Te({from:Re,to:Ue,unintended:!1,error:new Tt.default(Jt.REMOVE_ERROR_CODE,Jt.REMOVE_ERROR_MESSAGE)}),se.reject&&se.reject(Ne)}})):Ae()}))},removeEventListeners:fe,reset:function(){if(N){try{R=[],fe(),z=!1,P=[],N.getClassName&&N.getClassName()==="TextSourceBuffer"||(D.debug("Removing sourcebuffer from media source"),X.removeSourceBuffer(N))}catch{}N=null}re=null},updateAppendWindow:me,updateTimestampOffset:Ee},D=(0,l.default)(y).getInstance().getLogger(I),I}cp.__dashjs_factory_name="SourceBufferSink";var up=n.default.getClassFactory(cp);function dp(b){const y=this.context;let v,w,_,I=[],M=b;function D(N,$){return I=I.filter((q=>!((isNaN($)||q.start<$)&&(isNaN(N)||q.end>N)))),Promise.resolve()}return v={getAllBufferRanges:function(){let N=[];for(let q=0;q<I.length;q++){let R=I[q];N.length===0||R.start>N[N.length-1].end?N.push({start:R.start,end:R.end}):N[N.length-1].end=R.end}const $={start:function(q){return N[q].start},end:function(q){return N[q].end}};return Object.defineProperty($,"length",{get:function(){return N.length}}),$},append:function(N){return N.segmentType!=="InitializationSegment"?(I.push(N),I.sort((function($,q){return $.start-q.start})),_=null):_=N,w.debug("PreBufferSink appended chunk s: "+N.start+"; e: "+N.end),M&&M({chunk:N}),Promise.resolve()},remove:D,abort:function(){return Promise.resolve()},discharge:function(N,$){const q=(function(R,P){return I.filter((z=>(isNaN(P)||z.start<P)&&(isNaN(R)||z.end>R)))})(N,$);return _&&(q.push(_),_=null),D(N,$),q},reset:function(){I=[],_=null,M=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(N){N()},getBuffer:function(){return this}},w=(0,l.default)(y).getInstance().getLogger(v),v}dp.__dashjs_factory_name="PreBufferSink";var j_=n.default.getClassFactory(dp);function fp(){let b={};return{save:function(y){const v=y.streamId,w=y.representation.id;b[v]=b[v]||{},b[v][w]=y},extract:function(y,v){return b&&b[y]&&b[y][v]?b[y][v]:null},reset:function(){b={}}}}fp.__dashjs_factory_name="InitCache";var Lu=n.default.getSingletonFactory(fp);const Nu=.01,hp="BufferController";function mp(b){const y=(b=b||{}).capabilities,v=this.context,w=(0,m.default)(v).getInstance(),_=b.fragmentModel,I=b.playbackController,M=b.representationController,D=b.settings,N=b.streamInfo,$=b.textController,q=b.type;let R,P,z,X,re,ie,J,ce,fe,me,Ee,ne,K,B,j,Se,se,Ae,Te,Re,Ue;function Ne(Ye,at=null){return new Promise(((It,ot)=>{ie=Ye,fe&&at&&typeof fe.discharge=="function"?(me=fe,ee(at).then((()=>{It()})).catch((Bt=>{ot(Bt)}))):It()}))}function ee(Ye,at=new Map,It){return new Promise(((ot,Bt)=>{Ae&&Ye?ie?(Ee=!1,(function(Vt,Le,ft){return new Promise((Kt=>{fe=up(v).create({mediaSource:ie,textController:$,eventBus:w}),(function(Yt,Ln,Et){const tn=M.getCurrentRepresentation();let _n=null;return q!==h.default.VIDEO&&q!==h.default.AUDIO||(_n=Ln.get(q)),_n?(function(Sn,Dn,Rn,nr){fe.initializeForStreamSwitch(Sn,Dn,Rn);const mr=[];return mr.push(fe.abortBeforeAppend()),mr.push(nt()),mr.push(be(Dn,nr)),Dn&&Dn.mseTimeOffset!==void 0&&mr.push(kn(Dn)),Promise.allSettled(mr)})(Yt,tn,_n,Et):(function(Sn,Dn){return fe.initializeForFirstUse(Sn,Dn)})(Yt,tn)})(Vt,Le,ft).then((()=>kn(M.getCurrentRepresentation()))).then((()=>{Kt(fe)})).catch((Yt=>{P.warn("Caught error on create SourceBuffer: "+Yt),Kt(fe)}))}))})(Ye,at,It).then((Vt=>{ot(Vt)})).catch((Vt=>{Bt(Vt)}))):(Ee=!0,(function(){return new Promise(((Vt,Le)=>{fe=j_(v).create(pe.bind(this)),kn(M.getCurrentRepresentation()).then((()=>{Vt(fe)})).catch((()=>{Le()}))}))})().then((Vt=>{ot(Vt)})).catch((Vt=>{Bt(Vt)}))):ot(null)}))}function ae(Ye){D.get().streaming.cacheInitSegments&&(P.info("Init fragment finished loading saving to",q+"'s init cache"),Ae.save(Ye.chunk)),P.debug(`Appending init fragment for type ${q}, representationId ${Ye.chunk.representation.id} and bandwidth ${Ye.chunk.representation.bandwidth}`),le(Ye.chunk)}function de(Ye){le(Ye.chunk,Ye.request)}function le(Ye,at=null){fe&&(fe.append(Ye,at).then((It=>{pe(It)})).catch((It=>{pe(It)})),Ye.representation.mediaInfo.type===h.default.VIDEO&&Dt(f.default.VIDEO_CHUNK_RECEIVED,{chunk:Ye}))}function ue(Ye){if(Ye&&Ye.length>0)for(let at=0,It=Ye.length;at<It;at++)P.debug("Buffered range: "+Ye.start(at)+" - "+Ye.end(at)+", currentTime = ",I.getTime())}function pe(Ye){if(Ye.error)return Ye.error.code===22&&(function(){if(se=!0,re=.8*rn(),P.warn("Quota exceeded, Critical Buffer: "+re),re>0){const ot=Math.max(.2*re,1),Bt=re-ot,Vt=Math.min(D.get().streaming.buffer.bufferTimeAtTopQuality,.9*Bt),Le=Math.min(D.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Bt),ft={streaming:{buffer:{bufferToKeep:parseFloat(ot.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Vt.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Le.toFixed(5))}}};D.update(ft)}})(),void(Ye.error.code!==22&&gt()||(P.warn("Clearing playback buffer to overcome quota exceed situation"),Dt(f.default.QUOTA_EXCEEDED,{criticalBufferLevel:re,quotaExceededTime:Ye.chunk.start}),On(vn())));if(!fe||(St(),se=!1,B=Ye.chunk,!B||!B.endFragment))return;B&&!isNaN(B.index)&&(J=Math.max(B.index,J),Nt());const at=fe.getAllBufferRanges();B.segmentType===Q.HTTPRequest.MEDIA_SEGMENT_TYPE&&(ue(at),ze(),(function(){if(isNaN(Ue)||Ee)return;if(q!==h.default.AUDIO&&q!==h.default.VIDEO)return void(Ue=NaN);const ot=I.getTime(),Bt=lt(ot,0),Vt=lt(Ue,0);if(Bt&&Vt&&Bt.start===Vt.start)return void(Ue=NaN);const Le=M.getCurrentRepresentation().segmentDuration,ft=lt(Ue,Le);ft&&(D.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(ot-Ue)>Le?Ue<=ft.end&&I.seek(Math.max(Ue,ft.start),!1,!0):ot<ft.start&&I.seek(ft.start,!1,!0))})());let It=!1;ne&&(ne.indexOf(B)>0&&(It=!0),ne=null),B&&!It&&Dt(f.default.BYTES_APPENDED_END_FRAGMENT,{startTime:B.start,index:B.index,bufferedRanges:at,segmentType:B.segmentType,mediaType:q,representationId:B.representation.id})}function W(Ye,at){const It=[];return It.push(kn(Ye)),It.push(fe?fe.abort():Promise.resolve()),It.push(be(Ye,at)),Promise.allSettled(It)}function be(Ye,at){if(!Ye||!at)return P.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve();if(Ye&&at&&Ye.mimeType===at.mimeType&&Ye.codecFamily===at.codecFamily)return P.debug(`Switching to new codec ${Ye.codecs} without changeType as previous codec ${at.codecs} is compatible.`),Promise.resolve();if(!D.get().streaming.buffer.useChangeType||!y.supportsChangeType())return P.debug("changeType() not available"),Promise.resolve();P.debug(`Using changeType() to switch from codec ${at.codecs} to ${Ye.codecs}`);const It=Ye.dependentRepresentation?Ye.dependentRepresentation:Ye;return fe.changeType(It)}function we(){return new Promise(((Ye,at)=>{let It=Ce();if(!It||It.length===0)return ze(),void Ye();On(It).then((()=>{Ye()})).catch((ot=>{at(ot)}))}))}function Ce(Ye){const at=[],It=fe.getAllBufferRanges();if(!It||It.length===0)return at;if(!Ye&&Ye!==0||isNaN(Ye))at.push({start:It.start(0),end:It.end(It.length-1)+.5});else{const ot=(function(Vt,Le){const ft=D.get().streaming.buffer.bufferToKeep,Kt=Le.start(0);if(Vt-Kt>ft){let Yt=Math.max(0,Vt-ft);const Ln=_.getRequests({state:je.FRAGMENT_MODEL_EXECUTED,time:Vt,threshold:Nu})[0];if(Ln&&(Yt=Math.min(Ln.startTime,Yt)),Yt>0)return{start:Kt,end:Yt}}return null})(Ye,It),Bt=(function(Vt,Le){const ft=Le.end(Le.length-1)+.5,Kt=Cn(Vt),Yt=N.manifestInfo.duration>=D.get().streaming.buffer.longFormContentDurationThreshold?D.get().streaming.buffer.bufferTimeAtTopQualityLongForm:D.get().streaming.buffer.bufferTimeAtTopQuality;let Ln=isNaN(Kt)?Vt:Math.min(Kt,Vt+Yt);if(Ln>=Le.end(Le.length-1))return null;const Et=_.getRequests({state:je.FRAGMENT_MODEL_EXECUTED,time:Vt,threshold:Nu})[0];if(Et&&(Ln=Math.max(Et.startTime+Et.duration,Ln)),D.get().streaming.buffer.avoidCurrentTimeRangePruning){for(let tn=0;tn<Le.length;tn++)if(Le.start(tn)<=Vt&&Vt<=Le.end(tn)&&Le.start(tn)<=Ln&&Ln<=Le.end(tn)){let _n=Ln;Ln=tn+1<Le.length?Le.start(tn+1):Le.end(tn)+1,P.debug("Buffered range ["+Le.start(tn)+", "+Le.end(tn)+"] overlaps with targetTime "+Vt+" and range to be pruned ["+_n+", "+ft+"], using ["+Ln+", "+ft+"] instead"+(Ln<ft?"":" (no actual pruning)"));break}}return Ln<Le.end(Le.length-1)?{start:Ln,end:ft}:null})(Ye,It);ot&&at.push(ot),Bt&&at.push(Bt)}return at}function ze(){(!Re||q===h.default.TEXT&&$.isTextEnabled())&&St()}function Fe(){ln()}function We(){ln(),Ue=NaN}function lt(Ye,at){if(!fe)return null;const It=fe.getAllBufferRanges();let ot,Bt,Vt=0,Le=0,ft=null,Kt=null,Yt=0;const Ln=isNaN(at)?.15:at;if(It!=null){for(Bt=0,ot=It.length;Bt<ot;Bt++)if(Vt=It.start(Bt),Le=It.end(Bt),ft===null)Yt=Math.abs(Vt-Ye),(Ye>=Vt&&Ye<Le||Yt<=Ln)&&(ft=Vt,Kt=Le);else{if(Yt=Vt-Kt,!(Yt<=Ln))break;Kt=Le}if(ft!==null)return{start:ft,end:Kt}}return null}function St(){if(I){let Ye=I.getTime()||0;Ee&&(Ye=isNaN(Ue)?0:Ue);const at=D.get().streaming.gaps.jumpGaps&&!isNaN(D.get().streaming.gaps.smallGapLimit)?D.get().streaming.gaps.smallGapLimit:NaN;X=Math.max((function(It,ot){let Bt,Vt;return D.get().streaming.gaps.jumpGaps&&(ot=D.get().streaming.gaps.smallGapLimit),Bt=lt(It,ot),Vt=Bt===null?0:Bt.end-It,Vt})(Ye,at),0),Dt(f.default.BUFFER_LEVEL_UPDATED,{mediaType:q,bufferLevel:X}),ln()}}function Nt(){const Ye=J>=ce-1,at=I.getTimeToStreamEnd(N)-X<1e-5;!Ye&&!at||z||(zt(!0),P.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${N.id} and type ${q}`))}function ln(){if(q!==h.default.AUDIO&&q!==h.default.VIDEO)return;const Ye=I.getLowLatencyModeEnabled()?D.get().streaming.buffer.lowLatencyStallThreshold:D.get().streaming.buffer.stallThreshold;X<=Ye&&!z?Mt(o.BUFFER_EMPTY):(z||X>Ye)&&Mt(o.BUFFER_LOADED)}function Mt(Ye){K===Ye||Ye===o.BUFFER_EMPTY&&I.getTime()===0||q===h.default.TEXT&&!$.isTextEnabled()||(K=Ye,Dt(f.default.BUFFER_LEVEL_STATE_CHANGED,{state:Ye}),Dt(Ye===o.BUFFER_LOADED?f.default.BUFFER_LOADED:f.default.BUFFER_EMPTY),P.debug(Ye===o.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function sn(){fe&&q!==h.default.TEXT&&(z||On(vn()))}function vn(){const Ye=[],at=fe.getAllBufferRanges();if(!at||at.length===0)return Ye;const It=I.getTime();let ot=Math.max(0,It-D.get().streaming.buffer.bufferToKeep);const Bt=_.getRequests({state:je.FRAGMENT_MODEL_EXECUTED,time:It,threshold:Nu})[0];if(Bt)ot=Math.min(Bt.startTime,ot);else if(It===0&&I.getIsDynamic())return[];if(at.start(0)<=ot){const Vt={start:0,end:ot};for(let Le=0;Le<at.length&&at.end(Le)<=ot;Le++)Vt.end=at.end(Le);Vt.start<Vt.end&&Ye.push(Vt)}return Ye}function On(Ye){return new Promise(((at,It)=>{if(!Ye||!fe||Ye.length===0)return St(),void at();const ot=[];Ye.forEach((Bt=>{ot.push((function(Vt){return new Promise(((Le,ft)=>{Vt.resolve=Le,Vt.reject=ft,Te.push(Vt)}))})(Bt))})),Se||Pn(),Promise.all(ot).then((()=>{at()})).catch((Bt=>{It(Bt)}))}))}function Pn(){try{if(Te.length===0||!fe)return P.debug("Nothing to prune, halt pruning"),Te=[],void(Se=!1);const Ye=fe.getBuffer();if(!Ye||!Ye.buffered||Ye.buffered.length===0)return P.debug("SourceBuffer is empty (or does not exist), halt pruning"),Te=[],void(Se=!1);const at=Te.shift();P.debug(`${q}: Removing buffer from: ${at.start} to ${at.end}`),Se=!0,I.getTime()<at.end&&zt(!1),fe.remove(at).then((It=>{wn(It)})).catch((It=>{wn(It)}))}catch{Se=!1}}function wn(Ye){P.debug("onRemoved buffer from:",Ye.from,"to",Ye.to),fe&&(ue(fe.getAllBufferRanges()),Te.length===0&&(Se=!1,St()),Ye.unintended&&(P.warn("Detected unintended removal from:",Ye.from,"to",Ye.to,"setting streamprocessor time to",Ye.from),Dt(f.default.SEEK_TARGET,{time:Ye.from})),Se?Pn():(Re?Re=!1:St(),Dt(f.default.BUFFER_CLEARED,{from:Ye.from,to:Ye.to,unintended:Ye.unintended,hasEnoughSpaceToAppend:gt(),quotaExceeded:se})))}function kn(Ye){return new Promise((at=>{Ye&&Ye.mseTimeOffset!==void 0&&fe&&fe.updateTimestampOffset?fe.updateTimestampOffset(Ye.mseTimeOffset).then((()=>{at()})).catch((()=>{at()})):at()}))}function nt(){return fe&&!z?fe.updateAppendWindow(N):Promise.resolve()}function xt(){j++,j*(D.get().streaming.wallclockTimeUpdateInterval/1e3)>=D.get().streaming.buffer.bufferPruningInterval&&(j=0,sn())}function _t(){ln()}function zt(Ye){z=Ye,z?Dt(f.default.BUFFERING_COMPLETED):ce=Number.POSITIVE_INFINITY}function rn(){try{const Ye=fe.getAllBufferRanges();let at,It,ot=0;if(!Ye)return ot;for(It=0,at=Ye.length;It<at;It++)ot+=Ye.end(It)-Ye.start(It);return ot}catch{return 0}}function Cn(Ye){try{let at=Ye;const It=fe.getAllBufferRanges();if(!It||It.length===0)return NaN;let ot=0;for(;at===Ye&&ot<It.length;){const Bt=It.start(ot),Vt=It.end(ot);at>=Bt&&at<=Vt&&(at=Vt),ot+=1}return at===Ye?NaN:at}catch{return NaN}}function gt(){const Ye=rn();return isNaN(Ye)||Ye<re}function Dt(Ye,at){let It=at||{};w.trigger(Ye,It,{streamId:N.id,mediaType:q})}function Xt(Ye,at){if(re=Number.POSITIVE_INFINITY,K=void 0,ce=Number.POSITIVE_INFINITY,J=0,B=null,z=!1,Se=!1,se=!1,X=0,j=0,Te=[],Ue=NaN,Ee=!1,fe){let It=fe;fe=null,Ye||(at?It.removeEventListeners():It.abort().then((()=>{It.reset(at),It=null})))}Re=!1}return R={appendInitSegmentFromCache:function(Ye){const at=Ae.extract(N.id,Ye);return!!at&&(P.debug(`Appending init fragment for type ${q}, representationId ${at.representation.id} and bandwidth ${at.representation.bandwidth}`),le(at),!0)},clearBuffers:On,createBufferSink:ee,dischargePreBuffer:function(){if(fe&&me&&typeof me.discharge=="function"){const Ye=me.getAllBufferRanges();if(Ye.length>0){let ot="Beginning "+q+"PreBuffer discharge, adding buffer for:";for(let Bt=0;Bt<Ye.length;Bt++)ot+=" start: "+Ye.start(Bt)+", end: "+Ye.end(Bt)+";";P.debug(ot)}else P.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");ne=[];let at=me.discharge(),It=null;for(let ot=0;ot<at.length;ot++){const Bt=at[ot];if(Bt.segmentType!==Q.HTTPRequest.INIT_SEGMENT_TYPE){const Vt=Ae.extract(Bt.streamId,Bt.representation.id);Vt&&It!==Vt&&(ne.push(Vt),fe.append(Vt),It=Vt)}ne.push(Bt),fe.append(Bt)}me.reset(),me=null}},getAllRangesWithSafetyFactor:Ce,getBuffer:function(){return fe},getBufferControllerType:function(){return hp},getBufferLevel:function(){return X},getContinuousBufferTimeForTargetTime:Cn,getIsBufferingCompleted:function(){return z},getIsPruningInProgress:function(){return Se},getMediaSource:function(){return ie},getRangeAt:lt,getStreamId:function(){return N.id},getType:function(){return q},hasBufferAtTime:function(Ye){try{const at=fe.getAllBufferRanges();if(!at||at.length===0)return!1;let It=0;for(;It<at.length;){const ot=at.start(It),Bt=at.end(It);if(Ye>=ot&&Ye<=Bt)return!0;It+=1}return!1}catch(at){return P.error(at),!1}},initialize:function(Ye){Ne(Ye),w.on(f.default.INIT_FRAGMENT_LOADED,ae,R),w.on(f.default.MEDIA_FRAGMENT_LOADED,de,R),w.on(f.default.WALLCLOCK_TIME_UPDATED,xt,R),w.on(g.default.PLAYBACK_PLAYING,We,R),w.on(g.default.PLAYBACK_PROGRESS,ze,R),w.on(g.default.PLAYBACK_TIME_UPDATED,ze,R),w.on(g.default.PLAYBACK_RATE_CHANGED,_t,R),w.on(g.default.PLAYBACK_STALLED,Fe,R)},prepareForAbandonQualitySwitch:function(Ye,at){return W(Ye,at)},prepareForDefaultQualitySwitch:function(Ye,at){return W(Ye,at)},prepareForFastQualitySwitch:function(Ye,at){return W(Ye,at)},prepareForForceReplacementQualitySwitch:function(Ye,at){return new Promise((It=>{const ot=[];ot.push(fe.abort()),ot.push(nt()),ot.push(we()),ot.push(kn(Ye)),ot.push(be(Ye,at)),Promise.allSettled(ot).then((()=>{zt(!1),It()}))}))},prepareForNonReplacementTrackSwitch:function(Ye,at){return new Promise((It=>{const ot=[];ot.push(nt()),ot.push(be(Ye,at)),Promise.allSettled(ot).then((()=>{It()}))}))},prepareForPlaybackSeek:function(){return z&&zt(!1),fe.abort()},prepareForReplacementTrackSwitch:function(Ye,at){return new Promise((It=>{const ot=[];ot.push(fe.abort()),ot.push(nt()),ot.push(be(Ye,at)),ot.push(we()),ot.push(kn(Ye)),Promise.allSettled(ot).then((()=>{zt(!1),It()}))}))},pruneAllSafely:we,pruneBuffer:sn,reset:function(Ye,at){w.off(f.default.INIT_FRAGMENT_LOADED,ae,this),w.off(f.default.MEDIA_FRAGMENT_LOADED,de,this),w.off(f.default.WALLCLOCK_TIME_UPDATED,xt,this),w.off(g.default.PLAYBACK_PLAYING,We,this),w.off(g.default.PLAYBACK_PROGRESS,ze,this),w.off(g.default.PLAYBACK_TIME_UPDATED,ze,this),w.off(g.default.PLAYBACK_RATE_CHANGED,_t,this),w.off(g.default.PLAYBACK_STALLED,Fe,this),Xt(Ye,at)},segmentRequestingCompleted:function(Ye){isNaN(Ye)||(ce=Ye,Nt())},setIsBufferingCompleted:zt,setMediaSource:Ne,setSeekTarget:function(Ye){Ue=Ye},updateAppendWindow:nt,updateBufferTimestampOffset:kn},P=(0,l.default)(v).getInstance().getLogger(R),Ae=Lu(v).getInstance(),Xt(),R}mp.__dashjs_factory_name=hp;var q_=n.default.getClassFactory(mp);const gp="NotFragmentedTextBufferController";function pp(b){b=b||{};const y=this.context,v=(0,m.default)(y).getInstance(),w=b.textController,_=b.errHandler,I=b.streamInfo,M=b.type;let D,N,$,q,R,P;function z(ie){q=ie}function X(ie){N!==ie&&(N=ie,N&&(function(J){let ce={};v.trigger(J,ce,{streamId:I.id,mediaType:M})})(f.default.BUFFERING_COMPLETED))}function re(ie){ie.chunk.bytes&&!N&&(P.save(ie.chunk),R.append(ie.chunk),X(!0))}return D={initialize:function(ie){z(ie)},getStreamId:function(){return I.id},getType:function(){return M},getBufferControllerType:function(){return gp},createBufferSink:function(ie){return new Promise(((J,ce)=>{try{R=up(y).create({mediaSource:q,textController:w,eventBus:v}),R.initializeForFirstUse(ie),$||(R.getBuffer()&&typeof R.getBuffer().initialize=="function"&&R.getBuffer().initialize(),$=!0),J(R)}catch(fe){_.error(new Tt.default(Jt.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Jt.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+M)),ce(fe)}}))},dischargePreBuffer:function(){},getBuffer:function(){return R},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:z,getMediaSource:function(){return q},appendInitSegmentFromCache:function(ie){return P.extract(I.id,ie)!==null},getIsBufferingCompleted:function(){return N},setIsBufferingCompleted:X,getIsPruningInProgress:function(){return!1},reset:function(ie){v.off(f.default.INIT_FRAGMENT_LOADED,re,D),!ie&&R&&(R.abort(),R.reset(),R=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return N=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},$=!1,q=null,N=!1,P=Lu(y).getInstance(),v.on(f.default.INIT_FRAGMENT_LOADED,re,D),D}pp.__dashjs_factory_name=gp;var G_=n.default.getClassFactory(pp);function yp(b){b=b||{};const y=this.context,v=(0,m.default)(y).getInstance(),w=b.dashMetrics,_=b.mediaPlayerModel,I=b.fragmentModel,M=b.abrController,D=b.playbackController,N=b.textController,$=b.type,q=b.bufferController,R=b.representationController,P=b.settings;let z,X,re,ie,J,ce,fe,me,Ee,ne,K,B;function j(){fe=(0,l.default)(y).getInstance().getLogger(ie),ue(),ne=b.streamInfo}function Se(){me=!0}function se(){me=!1}function Ae(pe){if(q.getIsBufferingCompleted())return;Te();const W=isNaN(pe)?0:pe;Ee=setTimeout(Re,W)}function Te(){Ee&&(clearTimeout(Ee),Ee=null)}function Re(){const pe=_.getScheduleTimeout();try{if((function(){try{return $===h.default.TEXT&&!N.isTextEnabled()||D.isPaused()&&(!D.getStreamController().getInitialPlayback()||!D.getStreamController().getAutoPlay())&&!P.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}})())return void Te();(function(){try{return!!me&&R.getCurrentRepresentation()&&(ce==null||K||(function(){const W=R.getCurrentRepresentation();if(!$||!W)return!0;let be=W&&W.segmentDuration&&!isNaN(W.segmentDuration)?W.segmentDuration:0;const we=w.getCurrentBufferLevel($),Ce=Ue();return(Ce<=be||D.getLowLatencyModeEnabled()||$===h.default.AUDIO&&X)&&(be=0),we+be<Ce})())}catch{return!1}})()?(function(){if(M.handlePendingManualQualitySwitch(ne.id,$))return;let W=!1;z&&(W=M.checkPlaybackQuality($,ne.id)),W||(function(){const be=R.getCurrentRepresentation();re||be.id!==ce||K?(function(we){K?(fe.debug("Switch track for "+$+", representation id = "+we.id),K=!1):fe.debug("Quality has changed, get init request for representationid = "+we.id),v.trigger(f.default.INIT_FRAGMENT_NEEDED,{representationId:we.id,sender:ie},{streamId:ne.id,mediaType:$}),z=!1,re=!1})(be):(fe.debug(`Media segment needed for ${$} and stream id ${ne.id}`),v.trigger(f.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:ne.id,mediaType:$}),z=!0)})()})():Ae(pe)}catch{Ae(pe)}}function Ue(){let pe=NaN;const W=R.getCurrentRepresentation();return $&&W&&(pe=$===h.default.TEXT?(function(){try{if(N.isTextEnabled()){const be=R.getCurrentRepresentation();if(isNaN(be.fragmentDuration)){const we=w.getCurrentSchedulingInfo(o.SCHEDULING_INFO);return we?we.duration:0}return be.fragmentDuration}return 0}catch{return 0}})():$===h.default.AUDIO&&X?(function(){try{const be=w.getCurrentBufferLevel(h.default.VIDEO),we=R.getCurrentRepresentation();return isNaN(we.fragmentDuration)?be+1:Math.max(be+1,we.fragmentDuration)}catch{return 0}})():(function(){try{const be=P.get().streaming.enhancement.enabled?R.getCurrentCompositeRepresentation():R.getCurrentRepresentation(),we=be.mediaInfo.streamInfo;return M.isPlayingAtTopQuality(be)?we.manifestInfo.duration>=P.get().streaming.buffer.longFormContentDurationThreshold?P.get().streaming.buffer.bufferTimeAtTopQualityLongForm:P.get().streaming.buffer.bufferTimeAtTopQuality:_.getBufferTimeDefaultUnadjusted()}catch{return _.getBufferTimeDefaultUnadjusted()}})()),pe}function Ne(){ee(!0)}function ee(pe){if(D&&I){const W=I.getRequests({state:je.FRAGMENT_MODEL_EXECUTED,time:D.getTime(),threshold:0})[0];W&&D.getTime()>=W.startTime&&((!J.representation||W.representation.mediaInfo.type===J.representation.mediaInfo.type&&W.representation.mediaInfo.index!==J.representation.mediaInfo.index)&&pe&&(function(be){fe.debug(`Track change rendered for streamId ${ne.id} and type ${$}`),v.trigger(f.default.TRACK_CHANGE_RENDERED,{mediaType:$,oldMediaInfo:J&&J.representation&&J.representation.mediaInfo?J.representation.mediaInfo:null,newMediaInfo:be.representation.mediaInfo,streamId:ne.id})})(W),J.representation&&W.representation.id===J.representation.id||!pe||(function(be){fe.debug(`Quality change rendered for streamId ${ne.id} and type ${$}`),v.trigger(f.default.QUALITY_CHANGE_RENDERED,{mediaType:$,oldRepresentation:J.representation?J.representation:null,newRepresentation:be.representation,streamId:ne.id})})(W),J.representation=W.representation)}}function ae(){I.abortRequests(),Te()}function de(){P.get().streaming.scheduling.scheduleWhilePaused||Ae()}function le(pe){w.updatePlayListTraceMetrics({playbackspeed:pe.playbackRate.toString()})}function ue(){z=!0,B=0,ce=null,J={representation:null},K=!1,re=!1,me=!0}return ie={clearScheduleTimer:Te,getBufferTarget:Ue,getPlaybackController:function(){return D},getStreamId:function(){return ne.id},getSwitchTrack:function(){return K},getTimeToLoadDelay:function(){return B},getType:function(){return $},initialize:function(pe){X=pe,v.on(f.default.URL_RESOLUTION_FAILED,ae,ie),v.on(g.default.PLAYBACK_STARTED,de,ie),v.on(g.default.PLAYBACK_RATE_CHANGED,le,ie),v.on(g.default.PLAYBACK_TIME_UPDATED,Ne,ie),v.on(g.default.MANAGED_MEDIA_SOURCE_START_STREAMING,Se,ie),v.on(g.default.MANAGED_MEDIA_SOURCE_END_STREAMING,se,ie)},reset:function(){v.off(f.default.URL_RESOLUTION_FAILED,ae,ie),v.off(g.default.PLAYBACK_STARTED,de,ie),v.off(g.default.PLAYBACK_RATE_CHANGED,le,ie),v.off(g.default.PLAYBACK_TIME_UPDATED,Ne,ie),v.off(g.default.MANAGED_MEDIA_SOURCE_START_STREAMING,Se,ie),v.off(g.default.MANAGED_MEDIA_SOURCE_END_STREAMING,se,ie),Te(),ee(!1),ue(),ne=null},setShouldCheckPlaybackQuality:function(pe){z=pe},setInitSegmentRequired:function(pe){re=pe},setLastInitializedRepresentationId:function(pe){ce=pe},setup:j,setSwitchTrack:function(pe){K=pe},setTimeToLoadDelay:function(pe){B=pe},startScheduleTimer:Ae},j(),ie}yp.__dashjs_factory_name="ScheduleController";var H_=n.default.getClassFactory(yp);const V_=/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g;var K_=class extends Qg{constructor(){super(),this.isPartialSegment=!0,this.replacementSubNumber=NaN,this.totalNumberOfPartialSegments=NaN}};function bp(b){return b?b.totalNumberOfPartialSegments&&!isNaN(b.totalNumberOfPartialSegments)&&b.totalNumberOfPartialSegments>0&&!isNaN(b.subNumberOfPartialSegmentToRequest)?(function(y){const v=(function(w,_){const I=new K_,M=w.segmentDurationInSeconds/w.totalNumberOfPartialSegments,{representation:D,timelineConverter:N,isDynamic:$,index:q,totalNumberOfPartialSegments:R}=w,P=Ep({representation:D,segmentDurationInSeconds:M,presentationStartTime:w.presentationStartTime+_*M,presentationEndTime:w.presentationStartTime+(_+1)*M,timelineConverter:N,isDynamic:$,mediaTimeInSeconds:w.mediaTimeInSeconds+_*M,index:q});return I.assignAttributes(P),I.replacementSubNumber=_,I.totalNumberOfPartialSegments=R,I})(y,y.subNumberOfPartialSegmentToRequest);return vp(v,y),v})(b):(function(y){const v=new ku,w=Ep(y);return v.assignAttributes(w),vp(v,y),v})(b):null}function Ep(b){const{representation:y,segmentDurationInSeconds:v,presentationStartTime:w,presentationEndTime:_,mediaTimeInSeconds:I,timelineConverter:M,isDynamic:D,index:N}=b,$={availabilityEndTime:M.calcAvailabilityEndTimeFromPresentationTime(_+v,y,D),availabilityStartTime:M.calcAvailabilityStartTimeFromPresentationTime(_,y,D),duration:v,index:N,mediaStartTime:I,presentationStartTime:w,replacementNumber:y.startNumber+N,representation:y};return $.wallStartTime=M.calcWallTimeForSegment($,D),$}function vp(b,y){const{tManifest:v,mediaTime:w,mediaUrl:_,mediaRange:I}=y;b.replacementTime=v||w,b.media=po(_,b.representation.id,b.replacementNumber,b.replacementSubNumber,b.representation.bandwidth,b.replacementTime),b.mediaRange=I,b.mediaUrl=_}function Tp(b,y,v,w){const _=y.adaptation.period;if(isFinite(_.duration)&&_.start+_.duration<=v.presentationStartTime)return!1;if(w){if(y.availabilityTimeOffset==="INF")return!0;const I=b.getClientReferenceTime();return v.availabilityStartTime.getTime()<=I&&(!isFinite(v.availabilityEndTime)||v.availabilityEndTime.getTime()>=I)}return!0}function po(b,y,v,w,_,I){return b&&(function(M,D,N,$,q,R){return M.replace(V_,((P,z,X,re)=>{let ie,J;switch(z){case void 0:return"$";case"RepresentationID":ie=D;break;case"Number":ie=N;break;case"SubNumber":ie=$;break;case"Bandwidth":ie=q;break;case"Time":if(typeof R=="string")return R;ie=R&&Math.round(R);break;default:ie=null}if(ie==null)return P;switch(re){case void 0:case"d":case"i":case"u":J=ie.toString();break;case"o":J=ie.toString(8);break;case"x":J=ie.toString(16);break;case"X":J=ie.toString(16).toUpperCase();break;default:J=ie.toString()}const ce=parseInt(X,10)||1;return J.padStart(ce,"0")}))})(b,y,v,w,_,I)}function Sp(b){const{index:y,isDynamic:v,mediaRange:w,mediaTime:_,mediaUrl:I,representation:M,subNumberOfPartialSegmentToRequest:D,timelineConverter:N,totalNumberOfPartialSegments:$}=b;let q,R,P;q=M.segmentDuration,isNaN(q)&&(q=M.adaptation.period.duration),R=parseFloat((M.adaptation.period.start+y*q).toFixed(5)),P=parseFloat((R+q).toFixed(5));const z=bp({index:y,isDynamic:v,mediaRange:w,mediaTime:_,mediaTimeInSeconds:N.calcMediaTimeFromPresentationTime(R,M),mediaUrl:I,presentationEndTime:P,presentationStartTime:R,representation:M,segmentDurationInSeconds:q,subNumberOfPartialSegmentToRequest:D,timelineConverter:N,totalNumberOfPartialSegments:$});return Tp(N,M,z,v)?z:null}function Du(b){const{durationInTimescale:y,fTimescale:v,index:w,subNumberOfPartialSegmentToRequest:_,isDynamic:I,mediaRange:M,mediaTime:D,mediaUrl:N,totalNumberOfPartialSegments:$,representation:q,tManifest:R,timelineConverter:P}=b,z=D/v,X=y/v;let re=P.calcPresentationTimeFromMediaTime(z,q),ie=bp({representation:q,segmentDurationInSeconds:X,presentationStartTime:re,presentationEndTime:re+X,mediaTimeInSeconds:z,timelineConverter:P,isDynamic:I,index:w,totalNumberOfPartialSegments:$,subNumberOfPartialSegmentToRequest:_,mediaUrl:N,mediaRange:M,tManifest:R,mediaTime:D});return Tp(P,q,ie,I)?ie:null}function Pu(b){return b.k}function wp(b){const y=(b=b||{}).eventBus,v=b.events,w=b.abrController,_=b.dashMetrics,I=b.playbackController,M=b.timelineConverter,D=b.type,N=b.streamInfo,$=b.segmentsController,q=b.isDynamic;let R,P,z;function X(){return D}function re(){return z?.mediaInfo.type===D?z:(function(){let ne=z?.dependentRepresentation;if(ne){if(!ne.mediaInfo)throw new Error("dependentRepresentation has no mediaInfo!");if(ne.mediaInfo.type===D)return ne}return null})()}function ie(){z=null,P=[]}function J(ne){return new Promise(((K,B)=>{const j=ne.hasInitialization(),Se=ne.hasSegments(),se=[];se.push($.updateInitData(ne,j)),se.push($.updateSegmentData(ne,Se)),Promise.all(se).then((Ae=>{var Te;Ae[0]&&!Ae[0].error&&(ne=(function(Re,Ue){return Ue&&!Ue.error&&Ue.representation?Ue.representation:Re})(ne,Ae[0])),Ae[1]&&!Ae[1].error&&(ne=(function(Re,Ue){if(!Ue||Ue.error)return;const Ne=Ue.segments,ee=[];let ae,de,le,ue,pe=0;for(ae=0,de=Ne?Ne.length:0;ae<de;ae++)le=Ne[ae],ue=Du({durationInTimescale:le.duration,fTimescale:le.timescale,index:pe,isDynamic:q,mediaRange:le.mediaRange,mediaTime:le.startTime,mediaUrl:le.media,representation:Re,timelineConverter:M}),ue&&(ee.push(ue),ue=null,pe++);return ee.length>0&&(Re.segments=ee),Re})(ne,Ae[1])),ne.fragmentDuration=ne.segmentDuration?ne.segmentDuration:ne.segments&&ne.segments.length>0?ne.segments[0].duration:NaN,(Te=ne).mediaFinishedInformation=$.getMediaFinishedInformation(Te),(function(Re){let Ue,Ne=_.getCurrentManifestUpdate(),ee=!1;if(Ne){for(let ae=0;ae<Ne.representationInfo.length;ae++)if(Ue=Ne.representationInfo[ae],Ue.index===Re.index&&Ue.mediaType===X()){ee=!0;break}ee||_.addManifestUpdateRepresentationInfo(Re,X())}})(ne),K()})).catch((Ae=>{B(Ae)}))}))}function ce(ne){if(!P||P.length===0)return null;const K=P.filter((B=>B.id===ne));return K.length>0?K[0]:null}function fe(ne){y.trigger(v.DATA_UPDATE_COMPLETED,{currentRepresentation:z,error:ne},{streamId:N.id,mediaType:D})}function me(ne){z&&z.id===ne.id||(function(K){(function(){if(!(w&&_&&I&&M))throw new Error(h.default.MISSING_CONFIG_ERROR)})();const B=new Date,j=1e3*I.getTime();K&&_.addRepresentationSwitch(K.adaptation.type,B,j,K.id),y.trigger(g.default.REPRESENTATION_SWITCH,{mediaType:D,streamId:N.id,currentRepresentation:K},{streamId:N.id,mediaType:D})})(ne),z=ne}function Ee(ne){if(ne.newDuration){const K=re();K&&K.adaptation.period&&(K.adaptation.period.duration=ne.newDuration)}}return R={getCurrentCompositeRepresentation:function(){return z},getCurrentRepresentation:re,getRepresentationById:ce,getStreamId:function(){return N.id},getType:X,prepareQualityChange:function(ne){const K=P.filter((B=>B.id===ne.id));K.length>0&&me(K[0])},reset:function(){y.off(g.default.MANIFEST_VALIDITY_CHANGED,Ee,R),ie()},updateData:function(ne,K,B){return new Promise(((j,Se)=>{if(P=ne,me(ce(B)),D!==h.default.VIDEO&&D!==h.default.ENHANCEMENT&&D!==h.default.AUDIO&&(D!==h.default.TEXT||!K))return fe(),void j();const se=[];for(let Ae=0,Te=P.length;Ae<Te;Ae++){const Re=P[Ae];se.push(J(Re))}Promise.all(se).then((()=>{(function(){w.setPlaybackQuality(D,N,z);const Ae=_.getCurrentDVRInfo(D);Ae&&_.updateManifestUpdateInfo({latency:Ae.range.end-I.getTime()}),fe()})(),j()})).catch((Ae=>{Se(Ae)}))}))}},ie(),y.on(g.default.MANIFEST_VALIDITY_CHANGED,Ee,R),R}wp.__dashjs_factory_name="RepresentationController";var Y_=n.default.getClassFactory(wp);function _p(b){const y=(b=b||{}).eventBus,v=b.debug,w=b.urlUtils,_=b.type,I=b.streamInfo,M=b.segmentsController,D=b.timelineConverter,N=b.baseURLController;let $,q,R,P,z;function X(){return _}function re(){R=null}function ie(ne,K,B){const j=N.resolve(B.path);let Se,se,Ae={};return j&&K!==j.url&&w.isRelative(K)?(Se=j.url,se=j.serviceLocation,Ae=j.queryParams,K&&(Se=w.resolve(K,Se))):Se=K,!w.isRelative(Se)&&(ne.url=Se,ne.serviceLocation=se,ne.queryParams=Ae,!0)}function J(ne,K,B){let j=null;if(!K||!K.segmentInfoType)return j;const Se=M.getSegmentByTime(K,B);return Se&&(R=Se,q.debug("Index for time "+B+" is "+Se.index),j=ce(0,Se)),j}function ce(ne,K){if(K==null)return null;const B=new oe,j=K.representation,Se=j.bandwidth,se=po(K.media,j.id,K.replacementNumber,K.replacementSubNumber,Se,K.replacementTime);return B.adaptationIndex=j.adaptation.index,B.availabilityEndTime=K.availabilityEndTime,B.availabilityStartTime=K.availabilityStartTime,B.availabilityTimeComplete=j.availabilityTimeComplete,B.bandwidth=j.bandwidth,B.duration=K.duration,B.index=K.index,B.isPartialSegmentRequest=K.isPartialSegment,B.mediaStartTime=K.mediaStartTime,B.mediaType=X(),B.presentationStartTime=K.presentationStartTime,B.range=K.mediaRange,B.representation=j,B.startTime=K.presentationStartTime,B.timescale=j.timescale,B.type=Q.HTTPRequest.MEDIA_SEGMENT_TYPE,B.wallStartTime=K.wallStartTime,ie(B,se,j)?B:void 0}function fe(ne){if(!ne)return{indexToRequest:0,subNumberOfPartialSegmentToRequest:NaN};const K=ne.isPartialSegment,B=!isNaN(ne.replacementSubNumber),j=!isNaN(ne.totalNumberOfPartialSegments);if(K&&B&&j){const Se=ne.replacementSubNumber+1;return Se<ne.totalNumberOfPartialSegments?{indexToRequest:ne.index,subNumberOfPartialSegmentToRequest:Se}:{indexToRequest:ne.index+1,subNumberOfPartialSegmentToRequest:0}}return{indexToRequest:ne.index+1,subNumberOfPartialSegmentToRequest:NaN}}function me(ne,K,B,j){let Se=null;const se=M.getSegmentByIndex(K,B,j,R);if(se)Se=ce(0,se),R=se;else{if(P&&!z)return q.debug(X()+" No segment found at index: "+B+". Wait for next loop"),null;z=!0}return Se}function Ee(){q.debug("Dynamic stream complete"),z=!0}return $={getCurrentIndex:function(){return R?R.index:-1},getInitRequest:function(ne,K){return K?(function(B,j,Se){const se=new oe,Ae=j.adaptation.period,Te=Ae.start;if(se.mediaType=Se,se.type=Q.HTTPRequest.INIT_SEGMENT_TYPE,se.range=j.range,se.availabilityStartTime=D.calcAvailabilityStartTimeFromPresentationTime(Te,j,P),se.availabilityEndTime=D.calcAvailabilityEndTimeFromPresentationTime(Te+Ae.duration,j,P),se.representation=j,ie(se,j.initialization,j))return se.url=po(se.url,j.id,void 0,void 0,j.bandwidth),se})(0,K,X()):null},getLastSegment:function(){return R},getNextSegmentRequest:function(ne,K){if(!K||!K.segmentInfoType)return null;if((function(Se){return Se&&R&&Se.endNumber&&R.replacementNumber&&R.replacementNumber>=Se.endNumber})(K))return z=!0,null;let{indexToRequest:B,subNumberOfPartialSegmentToRequest:j}=fe(R);return me(0,K,B,j)},getNextSegmentRequestIdempotent:function(ne,K){let B=null,{indexToRequest:j,subNumberOfPartialSegmentToRequest:Se}=fe(R);const se=M.getSegmentByIndex(K,j,Se,R);return se?(B=ce(0,se),B):null},getSegmentRequestForTime:J,getStreamId:function(){return I.id},getStreamInfo:function(){return I},getType:X,getValidTimeAheadOfTargetTime:function(ne,K,B,j){try{if(isNaN(ne)||!K||!B)return NaN;if(ne<0&&(ne=0),isNaN(j)&&(j=.5),J(0,B,ne))return ne;if(B.adaptation.period.start+B.adaptation.period.duration<ne)return NaN;const Se=isFinite(B.adaptation.period.duration)?B.adaptation.period.start+B.adaptation.period.duration:ne+30;let se=Math.min(ne+j,Se),Ae=NaN,Te=null;for(;se<=Se;){let Re=null;if(se<=Se&&(Re=J(0,B,se)),Re){Ae=se,Te=Re;break}se+=j}if(Te){const Re=Te.startTime+Te.duration;return ne>Te.startTime&&Re-ne>j?ne:!isNaN(Te.startTime)&&ne<Te.startTime&&Ae>Te.startTime?Te.startTime+.001:Math.min(Re-j,Ae)}return Ae}catch{return NaN}},initialize:function(ne){P=ne,z=!1,M.initialize(ne)},isLastSegmentRequested:function(ne,K){return!ne||!R?!1:z?!0:!isFinite(ne.adaptation.period.duration)||R.presentationStartTime+R.duration>K?!1:ne.mediaFinishedInformation&&!isNaN(ne.mediaFinishedInformation.numberOfSegments)&&!isNaN(R.index)&&R.index>=ne.mediaFinishedInformation.numberOfSegments-1&&(!P||ne.segmentInfoType===ve.default.SEGMENT_TEMPLATE||P&&ne.segmentInfoType===ve.default.SEGMENT_LIST&&ne.adaptation.period.nextPeriodId)?!0:!!(P&&ne.adaptation.period.nextPeriodId&&ne.segmentInfoType===ve.default.SEGMENT_TIMELINE&&ne.mediaFinishedInformation&&!isNaN(ne.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&R&&!isNaN(R.mediaStartTime)&&!isNaN(R.duration)&&R.mediaStartTime+R.duration>=ne.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(ne,K){return K&&K.segmentInfoType?me(0,K,R?R.index:0,R&&R.isPartialSegment&&!isNaN(R.replacementSubNumber)?R.replacementSubNumber:NaN):null},reset:function(){re(),y.off(g.default.DYNAMIC_TO_STATIC,Ee,$)}},q=v.getLogger($),re(),y.on(g.default.DYNAMIC_TO_STATIC,Ee,$),$}_p.__dashjs_factory_name="DashHandler";var xp=n.default.getClassFactory(_p);function Ip(b,y){const v=(b=b||{}).timelineConverter,w=b.dashMetrics;let _;function I(D,N){if((function(){if(!v)throw new Error(h.default.MISSING_CONFIG_ERROR)})(),!D)return null;N===void 0&&(N=null);let $=null;const q=v.calcMediaTimeFromPresentationTime(N,D);return(function(R,P){const z=(function(Se){return Se.adaptation.period.mpd.manifest.Period[Se.adaptation.period.index].AdaptationSet[Se.adaptation.index].Representation[Se.index].SegmentTemplate||Se.adaptation.period.mpd.manifest.Period[Se.adaptation.period.index].AdaptationSet[Se.adaptation.index].Representation[Se.index].SegmentList})(R),X=z.SegmentTimeline,re=z.SegmentURL;let ie,J,ce,fe,me,Ee,ne=0,K=-1;Ee=R.timescale,ie=X.S;let B=!1;const j=ie.length;for(ce=0;ce<j&&!B;ce++)for(J=ie[ce],me=0,J.hasOwnProperty("r")&&(me=J.r),J.hasOwnProperty("t")&&(ne=J.t),me<0&&(me=M(R,ie[ce+1],J,Ee,ne/Ee)),fe=0;fe<=me&&!B;fe++)K++,B=P({mediaTime:ne,segmentBase:z,segmentURL:re,currentSElement:J,sElementCounterIncludingRepeats:K,sElementCounter:ce}),B&&(R.segmentDuration=J.d/Ee),ne+=J.d})(D,(function(R){const P=D.timescale;return(function(z,X){const{mediaTime:re,segmentBase:ie,segmentURL:J,currentSElement:ce,sElementCounterIncludingRepeats:fe,sElementCounter:me}=X,Ee=ce.d,ne=D.timescale;return z<re+Ee&&z>=re&&((function(K){const{segmentBase:B,segmentURL:j,sElementCounter:Se,currentSElement:se,mediaTime:Ae,durationInTimescale:Te,fTimescale:Re,requiredMediaTimeInTimescaleUnits:Ue,sElementCounterIncludingRepeats:Ne}=K;let ee=(function(ue,pe,W){let be=ue.media;return pe&&(be=pe[W].media||""),be})(B,j,Se),ae=(function(ue,pe,W){let be=ue.mediaRange;return pe&&(be=pe[W].mediaRange),be})(se,j,Se);const de=Pu(se),le=(function(ue){if(!ue||ue.totalNumberOfPartialSegments===void 0||isNaN(ue.totalNumberOfPartialSegments)||ue.totalNumberOfPartialSegments<1)return;const{durationInTimescale:pe,requiredMediaTimeInTimescaleUnits:W,mediaTime:be,totalNumberOfPartialSegments:we}=ue,Ce=pe/we;for(let ze=0;ze<we;ze++){const Fe=be+ze*Ce;if(W>=Fe&&W<Fe+Ce)return ze}return NaN})({durationInTimescale:Te,requiredMediaTimeInTimescaleUnits:Ue,mediaTime:Ae,totalNumberOfPartialSegments:de});$=Du({timelineConverter:v,isDynamic:y,representation:D,mediaTime:Ae,durationInTimescale:Te,fTimescale:Re,mediaUrl:ee,mediaRange:ae,index:Ne,tManifest:se.tManifest,totalNumberOfPartialSegments:de,subNumberOfPartialSegmentToRequest:le})})({segmentBase:ie,segmentURL:J,sElementCounter:me,currentSElement:ce,mediaTime:re,durationInTimescale:Ee,fTimescale:ne,requiredMediaTimeInTimescaleUnits:z,sElementCounterIncludingRepeats:fe}),!0)})(parseFloat((q*P).toPrecision(15)),R)})),$}function M(D,N,$,q,R){let P;if(N&&N.hasOwnProperty("t"))P=N.t/q;else try{let z=0;if(isNaN(D.adaptation.period.start)||isNaN(D.adaptation.period.duration)||!isFinite(D.adaptation.period.duration)){const X=w.getCurrentDVRInfo();z=isNaN(X.end)?0:X.end}else z=D.adaptation.period.start+D.adaptation.period.duration;P=v.calcMediaTimeFromPresentationTime(z,D),D.segmentDuration=$.d/q}catch{P=0}return Math.max(Math.ceil((P-R)/($.d/q))-1,0)}return _={getMediaFinishedInformation:function(D){if(!D)return 0;const N=(D.adaptation.period.mpd.manifest.Period[D.adaptation.period.index].AdaptationSet[D.adaptation.index].Representation[D.index].SegmentTemplate||D.adaptation.period.mpd.manifest.Period[D.adaptation.period.index].AdaptationSet[D.adaptation.index].Representation[D.index].SegmentList).SegmentTimeline;let $,q,R,P,z,X,re=0,ie=0,J=0;X=D.timescale,$=N.S;const ce=$.length;for(R=0;R<ce;R++)for(q=$[R],z=0,q.hasOwnProperty("r")&&(z=q.r),q.hasOwnProperty("t")&&(re=q.t,ie=re/X),z<0&&(z=M(D,$[R+1],q,X,ie)),P=0;P<=z;P++)J++,re+=q.d,ie=re/X;return{numberOfSegments:J,mediaTimeOfLastSignaledSegment:ie}},getSegmentByIndex:function(D,N){return D?I(D,N&&!isNaN(N.presentationStartTime)?N.presentationStartTime+N.duration+.01:0):null},getSegmentByTime:I},_}Ip.__dashjs_factory_name="TimelineSegmentsGetter";var W_=n.default.getClassFactory(Ip);function Ap(b,y){const v=(b=b||{}).timelineConverter;let w;function _(M,D,N){if(!M)return null;const $=I(M),q=Pu($);q!==void 0&&q>=0&&(N=N!==void 0&&N<q?N:0);const R=Sp({index:D=Math.max(D,0),isDynamic:y,mediaTime:Math.round(D*M.segmentDuration*M.timescale,10),mediaUrl:$.media,representation:M,subNumberOfPartialSegmentToRequest:N,timelineConverter:v,totalNumberOfPartialSegments:q});return R&&M.endNumber&&R.replacementNumber>M.endNumber?null:R}function I(M){return M.adaptation.period.mpd.manifest.Period[M.adaptation.period.index].AdaptationSet[M.adaptation.index].Representation[M.index].SegmentTemplate}return w={getMediaFinishedInformation:function(M){const D={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!M)return D;const N=M.segmentDuration;return isNaN(N)?D.numberOfSegments=1:D.numberOfSegments=Math.ceil(M.adaptation.period.duration/N),D},getSegmentByIndex:_,getSegmentByTime:function(M,D){if(!M)return null;const N=M.segmentDuration;if(isNaN(N))return null;let $=v.calcPeriodRelativeTimeFromMpdRelativeTime(M,D);const q=I(M),R=Math.floor($/N),P=(function(z){if(!z||z.totalNumberOfPartialSegments===void 0||isNaN(z.totalNumberOfPartialSegments)||z.totalNumberOfPartialSegments<1)return;const{totalNumberOfPartialSegments:X,representation:re,requestedTimeRelativeToPeriodStart:ie,indexWithoutStartNumber:J}=z,ce=J*re.segmentDuration,fe=re.segmentDuration/X,me=ie-ce;let Ee=Math.floor(me/fe);return Ee=Math.max(0,Math.min(Ee,X-1)),Ee})({totalNumberOfPartialSegments:Pu(q),representation:M,requestedTimeRelativeToPeriodStart:$,indexWithoutStartNumber:R});return _(M,R,P)}},w}Ap.__dashjs_factory_name="TemplateSegmentsGetter";var X_=n.default.getClassFactory(Ap);function Rp(b,y){const v=(b=b||{}).timelineConverter;let w;function _(){if(!v||!v.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(h.default.MISSING_CONFIG_ERROR)}function I(M,D){if(_(),!M)return null;const N=M.adaptation.period.mpd.manifest.Period[M.adaptation.period.index].AdaptationSet[M.adaptation.index].Representation[M.index].SegmentList,$=N.SegmentURL.length,q=M&&!isNaN(M.startNumber)?M.startNumber:1,R=Math.max(q-1,0),P=Math.max(D-R,0);let z=null;if(P<$){const X=N.SegmentURL[P];z=Sp({index:D,isDynamic:y,mediaRange:X.mediaRange,mediaTime:(q+D-1)*M.segmentDuration,representation:M,timelineConverter:v}),z&&(z.media=X.media?X.media:"",z.indexRange=X.indexRange)}return z}return w={getSegmentByIndex:I,getSegmentByTime:function(M,D){if(_(),!M)return null;const N=M.segmentDuration;if(isNaN(N))return null;const $=v.calcPeriodRelativeTimeFromMpdRelativeTime(M,D);return I(M,Math.floor($/N))},getMediaFinishedInformation:function(M){const D={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!M)return D;const N=M.adaptation.period.mpd.manifest.Period[M.adaptation.period.index].AdaptationSet[M.adaptation.index].Representation[M.index].SegmentList,$=M&&!isNaN(M.startNumber)?M.startNumber:1,q=Math.max($-1,0);return D.numberOfSegments=q+N.SegmentURL.length,D}},w}Rp.__dashjs_factory_name="ListSegmentsGetter";var Q_=n.default.getClassFactory(Rp);function Cp(b){const y=(b=b||{}).timelineConverter;let v;function w(){if(!y||!y.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(h.default.MISSING_CONFIG_ERROR)}function _(I,M){if(w(),!I)return null;const D=I.segments?I.segments.length:-1;let N;if(M<D&&(N=I.segments[M],N&&N.index===M))return N;for(let $=0;$<D;$++)if(N=I.segments[$],N&&N.index===M)return N;return null}return v={getSegmentByIndex:_,getSegmentByTime:function(I,M){w();const D=(function(N,$){if(!N)return-1;const q=N.segments,R=q?q.length:null;let P,z,X,re,ie,J=-1;if(q&&R>0){for(ie=0;ie<R;ie++)if(z=q[ie],X=z.presentationStartTime,re=z.duration,P=re/2,$+P>=X&&$-P<X+re){J=z.index;break}}return J})(I,M);return _(I,D)},getMediaFinishedInformation:function(I){const M={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return I&&I.segments&&(M.numberOfSegments=I.segments.length),M}},v}Cp.__dashjs_factory_name="SegmentBaseGetter";var Z_=n.default.getClassFactory(Cp);function kp(b){b=b||{};const y=this.context,v=b.dashConstants,w=b.type,_=b.segmentBaseController;let I,M;function D(N){return N?N.segments?M[v.SEGMENT_BASE]:M[N.segmentInfoType]:null}return I={initialize:function(N){M[v.SEGMENT_TIMELINE]=W_(y).create(b,N),M[v.SEGMENT_TEMPLATE]=X_(y).create(b,N),M[v.SEGMENT_LIST]=Q_(y).create(b,N),M[v.SEGMENT_BASE]=Z_(y).create(b,N)},updateInitData:function(N,$){return $?Promise.resolve():_.getSegmentBaseInitSegment({representation:N,mediaType:w})},updateSegmentData:function(N,$){return $?Promise.resolve():_.getSegmentList({mimeType:N.mimeType,representation:N,mediaType:w})},getSegmentByIndex:function(N,$,q,R){const P=D(N);return P?N.segmentInfoType?N.segmentInfoType===v.SEGMENT_TIMELINE?P.getSegmentByIndex(N,R):N.segmentInfoType===v.SEGMENT_TEMPLATE?P.getSegmentByIndex(N,$,q):P.getSegmentByIndex(N,$):P.getSegmentByIndex(N,$):null},getSegmentByTime:function(N,$){const q=D(N);return q?q.getSegmentByTime(N,$):null},getMediaFinishedInformation:function(N){const $=D(N);return $?$.getMediaFinishedInformation(N):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},M={},I}kp.__dashjs_factory_name="SegmentsController";var Lp=n.default.getClassFactory(kp);function Np(){let b;return b={ntpToUTC:function(y){const v=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(v.getTime()+y).getTime()}},b}Np.__dashjs_factory_name="TimeUtils";var J_=n.default.getSingletonFactory(Np);function Dp(b){b=b||{};let y,v,w,_,I,M,D,N,$,q,R,P,z,X,re,ie,J,ce,fe=this.context,me=(0,m.default)(fe).getInstance(),Ee=b.abrController,ne=b.adapter,K=b.boxParser,B=b.capabilities,j=b.dashMetrics,Se=b.errHandler,se=b.fragmentModel,Ae=b.manifestModel,Te=b.mediaController,Re=b.mediaPlayerModel,Ue=b.mimeType,Ne=b.playbackController,ee=b.segmentBlacklistController,ae=b.settings,de=b.streamInfo,le=b.textController,ue=b.timelineConverter,pe=b.type;function W(){return de.id}function be(){return pe}function we(){q=[],_=null,v=0,J=!1,ie=!1,P=!1,M=null,ce=!1,sn()}function Ce(Et){return!isNaN(Et)&&!isNaN(de.duration)&&isFinite(de.duration)&&Et>=de.start+de.duration}function ze(Et,tn=!0){if(Et.sender){if(Ne.getIsManifestUpdateInProgress())lt();else if((!_.isText||le.isTextEnabled())&&y&&Et.representationId&&!y.appendInitSegmentFromCache(Et.representationId)){const _n=z.getCurrentRepresentation();if(_n.range===0)return void Fe();const Sn=I?I.getInitRequest(_,_n):null;Sn?se.executeRequest(Sn):tn&&(X.setInitSegmentRequired(!0),lt())}}}function Fe(Et,tn=!0){if(Ne.getIsManifestUpdateInProgress()||y.getIsPruningInProgress())return void lt();let _n=(function(){let Sn;if(isNaN(v)||be()===h.default.TEXT&&!le.isTextEnabled())return null;if(I){const Dn=It();Sn=J?I.getSegmentRequestForTime(_,Dn,v):ie?I.repeatSegmentRequest(_,Dn):I.getNextSegmentRequest(_,Dn)}return Sn})();_n?(J=!1,ie=!1,(function(Sn){isNaN(Sn.startTime+Sn.duration)||(v=Sn.startTime+Sn.duration),Sn.delayLoadingTime=new Date().getTime()+X.getTimeToLoadDelay(),X.setTimeToLoadDelay(0),(function(Dn){let Rn=Dn.url;return Dn.range&&(Rn=Rn.concat("_",Dn.range)),ee.contains(Rn)})(Sn)?($.warn(`Fragment request url ${Sn.url} for stream id ${de.id} and media type ${pe} is on the ignore list and will be skipped`),lt()):($.debug(`Next fragment request url for stream id ${de.id} and media type ${pe} is ${Sn.url} with request range ${Sn.range}`),se.executeRequest(Sn))})(_n)):(function(Sn){const Dn=z.getCurrentRepresentation();try{if(ae.get().streaming.gaps.enableSeekFix&&(J||Ne.getTime()===0)){let Rn;if(N?N&&Dn.segmentInfoType===ve.default.SEGMENT_TIMELINE&&(Rn=(function(nr){return I.getValidTimeAheadOfTargetTime(v,_,nr,ae.get().streaming.gaps.threshold)})(Dn)):Rn=(function(nr){let mr=I.getValidTimeAheadOfTargetTime(v,_,nr,ae.get().streaming.gaps.threshold);return isNaN(mr)&&v>=nr.adaptation.period.mpd.mediaPresentationDuration-nr.segmentDuration&&(mr=v-.1),mr})(Dn),!isNaN(Rn)&&Rn!==v)return void(function(nr,mr){Ne.isSeeking()||Ne.getTime()===0?($.warn(`Adjusting playback time ${nr} because of gap in the manifest. Seeking by ${nr-v}`),Ne.seek(nr,!1,!1)):($.warn(`Adjusting buffering time ${nr} because of gap in the manifest. Adjusting time by ${nr-v}`),Yt(nr),mr&&lt())})(Rn,Sn)}}catch(Rn){$.error(Rn)}We()||Sn&&lt()})(tn)}function We(){const Et=z.getCurrentRepresentation(),tn=I.isLastSegmentRequested(Et,v);if(tn){const _n=I.getCurrentIndex();$.debug(`Segment requesting for stream ${de.id} has finished`),me.trigger(f.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:_n},{streamId:de.id,mediaType:pe}),y.segmentRequestingCompleted(_n),at()}return tn}function lt(){const Et=Re.getScheduleTimeout();X.startScheduleTimer(Et)}function St(Et){j.addBufferState(pe,Et.state,X.getBufferTarget()),Et.state!==o.BUFFER_EMPTY||Ne.isSeeking()||($.info("Buffer is empty! Stalling!"),j.pushPlayListTraceMetrics(new Date,Vr.REBUFFERING_REASON))}function Nt(Et){se.syncExecutedRequestsWithBufferedRange(y.getBuffer().getAllBufferRanges(),de.duration),Et.quotaExceeded&&Et.from>Ne.getTime()&&Yt(Et.from),Et.hasEnoughSpaceToAppend&&Et.quotaExceeded&&X.startScheduleTimer()}function ln(Et){if(!Et||!Et.lastRequestAppended||!Et.lastRequestAppended.url)return;let tn=Et.lastRequestAppended.url;Et.lastRequestAppended.range&&(tn=tn.concat("_",Et.lastRequestAppended.range)),$.warn(`Blacklisting segment with url ${tn}`),ee.add(tn)}function Mt(Et){if($.debug(`Appended bytes for ${Et.mediaType} and stream id ${Et.streamId}`),Et.segmentType===Q.HTTPRequest.INIT_SEGMENT_TYPE){const tn=Et.representationId;X.setLastInitializedRepresentationId(tn),$.info("["+pe+"] lastInitializedRepresentationId changed to "+tn)}R&&R.enabled?xt(R.newRepresentation,R.oldRepresentation):ce||X.startScheduleTimer(0)}function sn(){R={newRepresentation:null,oldRepresentation:null,enabled:!1}}function vn(Et){return new Promise((tn=>{if(!z)return Promise.resolve();let _n=null;var Sn;_n=Et.newRepresentation?{selectedRepresentation:(Sn=Et).newRepresentation,currentMediaInfo:Sn.newMediaInfo}:_!==null&&ne.areMediaInfosEqual(_,Et.newMediaInfo)?(function(Rn){return{currentMediaInfo:Rn.newMediaInfo,selectedRepresentation:z.getCurrentRepresentation()}})(Et):(function(Rn){let nr=NaN;return nr=!ae.get().streaming.abr.autoSwitchBitrate[Rn.newMediaInfo.type]&&Rn.previouslySelectedRepresentation?Rn.previouslySelectedRepresentation.bitrateInKbit:Ee.getInitialBitrateFor(pe),{selectedRepresentation:Ee.getOptimalRepresentationForBitrate(Rn.newMediaInfo,nr,!1),currentMediaInfo:Rn.newMediaInfo}})(Et),On(_n.currentMediaInfo),me.trigger(),(function(Rn){M&&Rn.selectedRepresentation.dependentRepresentation&&($.info("["+pe+"] selectMediaInfo : call selectMediaInfo on enhancementStreamProcessor for index = "+Rn.selectedRepresentation.absoluteIndex),M.selectMediaInfo(new ua({newMediaInfo:Rn.selectedRepresentation.mediaInfo,newRepresentation:Rn.selectedRepresentation})))})(_n);const Dn=Ee.getPossibleVoRepresentations(_,!1);return z.updateData(Dn,_.isFragmented,_n.selectedRepresentation.id).then((()=>{(function(){const Rn=z.getCurrentCompositeRepresentation();y.getIsBufferingCompleted()||y.updateBufferTimestampOffset(Rn)})(),tn()})).catch((Rn=>{$.error(Rn),tn()}))}))}function On(Et){ne.areMediaInfosEqual(_,Et)||me.trigger(g.default.NEW_TRACK_SELECTED,{value:Et}),_=Et,Ee.handleNewMediaInfo(_),me.trigger(f.default.MEDIAINFO_UPDATED,{mediaType:pe,streamId:de.id,currentMediaInfo:_})}function Pn(Et){const tn=Et.newRepresentation,_n=Et.oldRepresentation,Sn=Ln();tn&&_n||$.warn("_handleDifferentSwitchTypes() is missing the target representations"),Et.reason&&Et.reason.forceReplace?(function(Dn,Rn){se.abortRequests(),me.trigger(f.default.BUFFER_REPLACEMENT_STARTED,{mediaType:pe,streamId:de.id},{mediaType:pe,streamId:de.id}),X.setShouldCheckPlaybackQuality(!1),y.prepareForForceReplacementQualitySwitch(Dn,Rn).then((()=>{wn()})).catch((()=>{wn()}))})(tn,_n):Et&&Et.reason&&Et.reason.forceAbandon?(function(Dn,Rn){y.prepareForAbandonQualitySwitch(Dn,Rn).then((()=>{kn()})).catch((()=>{kn()}))})(tn,_n):!Re.getFastSwitchEnabled()||Sn&&Sn.isPartialSegment?xt(tn,_n):(function(Dn,Rn){const nr=Ne.getTime();let mr=1.5*(isNaN(Dn.fragmentDuration)?1:Dn.fragmentDuration);const Bi=se.getRequests({state:je.FRAGMENT_MODEL_EXECUTED,time:nr+mr,threshold:0})[0];if(Bi&&!_.isText){const $i=y.getBufferLevel(),Zi=Ee.getAbandonmentStateFor(de.id,pe);Bi.bandwidth<Dn.bandwidth&&$i>=mr&&Zi===o.ALLOW_LOAD?y.prepareForFastQualitySwitch(Dn,Rn).then((()=>{nt(nr,mr)})).catch((()=>{nt(nr,mr)})):xt(Dn,Rn)}else xt(Dn,Rn)})(tn,_n),j.pushPlayListTraceMetrics(new Date,Vr.REPRESENTATION_SWITCH_STOP_REASON),j.createPlaylistTraceMetrics(tn.id,1e3*Ne.getTime(),Ne.getPlaybackRate())}function wn(){Le(),sn(),P=!1}function kn(){se.abortRequests(),ie=!0,X.setShouldCheckPlaybackQuality(!1),X.startScheduleTimer(),P=!1}function nt(Et,tn){se.abortRequests(),Yt(Et+tn),X.setShouldCheckPlaybackQuality(!1),X.startScheduleTimer(),P=!1}function xt(Et,tn){const _n=se.getRequests({state:je.FRAGMENT_MODEL_LOADING});if(_n&&_n.length>0)return $.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),R.newRepresentation=Et,R.oldRepresentation=tn,void(R.enabled=!0);y.prepareForDefaultQualitySwitch(Et,tn).then((()=>{_t()})).catch((()=>{_t()}))}function _t(){X.setShouldCheckPlaybackQuality(!1),_.segmentAlignment||_.subSegmentAlignment?X.startScheduleTimer():ft(),sn(),P=!1}function zt(Et){$.info("onFragmentLoadingAbandoned request: "+Et.request.url+" has been aborted"),Ne.isSeeking()||X.getSwitchTrack()||P||($.info("onFragmentLoadingAbandoned request: "+Et.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Et.request&&Et.request.isInitializationRequest()?X.setInitSegmentRequired(!0):Yt(Et.request.startTime+Et.request.duration/2),X.startScheduleTimer(0))}function rn(Et){$.info("OnFragmentLoadingCompleted for stream id "+de.id+" and media type "+pe+" - Url:",Et.request?Et.request.url:"undefined",Et.request.range?", Range:"+Et.request.range:""),_.isText&&X.startScheduleTimer(0),Et.error&&Et.request.serviceLocation&&(function(tn){$.info("Fragment loading completed with an error"),tn&&tn.request&&tn.request.type&&(tn.request.type===Q.HTTPRequest.INIT_SEGMENT_TYPE?ze({representationId:tn.request.representation.id,sender:{}},!1):tn.request.type===Q.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Yt(tn.request.startTime+tn.request.duration/2),Fe(0,!1)))})(Et)}function Cn(){Yt(Ne.getTime()),Ye().startScheduleTimer()}function gt(Et){const tn=Et.currentTrackInfo;if(!tn)return;const _n=q.find((Sn=>Sn.index===tn.index&&Sn.lang===tn.lang));_n&&vn(new ua({newMediaInfo:_n})).then((()=>{y.setIsBufferingCompleted(!1),Yt(Ne.getTime()),X.setInitSegmentRequired(!0),X.startScheduleTimer()}))}function Dt(Et){Yt(Et.quotaExceededTime),at()}function Xt(){return y?y.getBuffer():null}function Ye(){return X}function at(){X&&X.clearScheduleTimer()}function It(Et=NaN){let tn;return isNaN(Et)?tn=z?z.getCurrentRepresentation():null:((0,ut.checkInteger)(Et),tn=z?z.getRepresentationById(Et):null),tn}function ot(){return!!y&&y.getIsBufferingCompleted()}function Bt(Et){if(!ae.get().streaming.enableManifestTimescaleMismatchFix)return;const tn=Et.chunk,_n=tn.bytes,Sn=It(tn.representation.id);Sn&&(Sn.timescale=K.getMediaTimescaleFromMoov(_n))}function Vt(Et){const tn=Et.chunk,_n=tn.bytes,Sn=It(tn.representation.id);if(Sn){let Dn;if(ae.get().streaming.parseInbandPrft&&Et.request.type===Q.HTTPRequest.MEDIA_SEGMENT_TYPE){Dn=Dn||K.parse(_n);const mr=(function(Bi,$i){const Zi=Bi.getBoxes("prft"),Ya=[];return Zi.forEach((Ra=>{Ya.push((function(wi,Ca){let _i="unknown";switch(wi.flags){case 0:_i=ve.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:_i=ve.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:_i=ve.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let ji=1e3*wi.ntp_timestamp_sec+wi.ntp_timestamp_frac/2**32*1e3;return ji=J_(fe).getInstance().ntpToUTC(ji),{type:_i,ntpTimestamp:ji,mediaTime:wi.media_time/Ca}})(Ra,$i))})),Ya})(Dn,Sn.timescale);mr&&mr.length&&me.trigger(g.default.INBAND_PRFT,{data:mr},{streamId:de.id,mediaType:pe})}const Rn=ne.getEventsFor(Sn.mediaInfo,null,de),nr=ne.getEventsFor(Sn,Sn,de);if(Rn&&Rn.length>0||nr&&nr.length>0){const mr=Et.request;Dn=Dn||K.parse(_n);const Bi=(function($i,Zi,Ya,Ra){try{const wi={},Ca=[],_i=Ya.concat(Ra);for(let ei=0,Ts=_i.length;ei<Ts;ei++)wi[_i[ei].schemeIdUri+"/"+_i[ei].value]=_i[ei];const ji=$i.getBoxes("emsg");if(!ji||ji.length===0)return Ca;const xi=$i.getBox("sidx"),vs=!xi||isNaN(xi.earliest_presentation_time)||isNaN(xi.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:xi.earliest_presentation_time/xi.timescale,Cl=Math.max(vs,0),kl=z.getCurrentRepresentation();for(let ei=0,Ts=ji.length;ei<Ts;ei++){const Wa=ne.getEvent(ji[ei],wi,Cl,kl);Wa&&Ca.push(Wa)}return Ca}catch{return[]}})(Dn,mr,Rn,nr);me.trigger(f.default.INBAND_EVENTS,{events:Bi},{streamId:de.id})}}}function Le(){const Et=Ne.getTime();ae.get().streaming.buffer.flushBufferAtTrackSwitch&&Ne.seek(Et+.001,!1,!0),Yt(Et),y.setSeekTarget(Et),X.startScheduleTimer()}function ft(){const Et=Ne.getTime(),tn=y.getContinuousBufferTimeForTargetTime(Et);Yt(isNaN(tn)?Et:tn),X.startScheduleTimer()}function Kt(Et){Et&&!isNaN(Et.time)&&(Yt(Et.time),y.setSeekTarget(Et.time))}function Yt(Et){v=Et,J=!0}function Ln(){return I.getLastSegment()}return D={checkAndHandleCompletedBuffering:We,clearScheduleTimer:at,createBufferSinks:function(Et,tn){const _n=Xt();return _n?Promise.resolve(_n):y?y.createBufferSink(_,Et,tn):Promise.resolve(null)},dischargePreBuffer:function(){y.dischargePreBuffer()},finalisePlayList:function(Et,tn){j.pushPlayListTraceMetrics(Et,tn)},getAllMediaInfos:function(){return q},getBuffer:Xt,getBufferController:function(){return y},getBufferLevel:function(){return y?y.getBufferLevel():0},getFragmentModel:function(){return se},getLastSegment:Ln,getMediaInfo:function(){return _},getMediaSource:function(){return y.getMediaSource()},getRepresentation:It,getRepresentationController:function(){return z},getScheduleController:Ye,getStreamId:W,getStreamInfo:function(){return de},getType:be,initialize:function(Et,tn,_n){re=Lp(fe).create({events:f.default,eventBus:me,streamInfo:de,timelineConverter:ue,dashConstants:ve.default,segmentBaseController:b.segmentBaseController,type:pe}),I=xp(fe).create({baseURLController:b.baseURLController,boxParser:K,constants:h.default,dashConstants:ve.default,dashMetrics:j,debug:(0,l.default)(fe).getInstance(),errHandler:Se,errors:Jt,eventBus:me,events:f.default,mediaPlayerModel:Re,segmentsController:re,settings:ae,streamInfo:de,timelineConverter:ue,type:pe,urlUtils:Zn(fe).getInstance()}),N=de.manifestInfo.isDynamic,I.initialize(N),Ee.registerStreamType(pe,D),z=Y_(fe).create({abrController:Ee,adapter:ne,dashConstants:ve.default,dashMetrics:j,errors:Jt,eventBus:me,events:f.default,isDynamic:N,playbackController:Ne,segmentsController:re,streamInfo:de,timelineConverter:ue,type:pe}),y=(function(Sn,Dn){let Rn=null;return Sn?(Rn=Sn!==h.default.TEXT||Dn?q_(fe).create({abrController:Ee,capabilities:B,errHandler:Se,fragmentModel:se,manifestModel:Ae,mediaController:Te,mediaPlayerModel:Re,playbackController:Ne,representationController:z,settings:ae,streamInfo:de,textController:le,type:Sn}):G_(fe).create({errHandler:Se,fragmentModel:se,mimeType:Ue,settings:ae,streamInfo:de,textController:le,type:Sn}),Rn):(Se.error(new Tt.default(Jt.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Jt.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)})(pe,_n),y&&y.initialize(Et),X=H_(fe).create({abrController:Ee,adapter:ne,bufferController:y,dashMetrics:j,fragmentModel:se,mediaController:Te,mediaPlayerModel:Re,mimeType:Ue,playbackController:Ne,representationController:z,settings:ae,streamInfo:de,textController:le,type:pe}),w=tn,X.initialize(tn),v=0,J=!1,ie=!1},isBufferingCompleted:ot,prepareInnerPeriodPlaybackSeeking:function(Et){return new Promise((tn=>{if(y.hasBufferAtTime(Et.seekTime))return y.pruneBuffer(),Ce(y.getContinuousBufferTimeForTargetTime(Et.seekTime))&&y.setIsBufferingCompleted(!0),void tn();at(),se.abortRequests(),y.prepareForPlaybackSeek().then((()=>{const _n=y.getAllRangesWithSafetyFactor(Et.seekTime);return y.clearBuffers(_n)})).then((()=>{const _n=y.getContinuousBufferTimeForTargetTime(Et.seekTime);if(Ce(_n))y.setIsBufferingCompleted(!0),tn();else{const Sn=isNaN(_n)?Et.seekTime:_n;Yt(Sn),y.setSeekTarget(Sn);const Dn=[];Dn.push(y.updateAppendWindow());const Rn=It();Dn.push(y.updateBufferTimestampOffset(Rn)),Promise.all(Dn).then((()=>{X.setInitSegmentRequired(!0),X.setShouldCheckPlaybackQuality(!1),X.startScheduleTimer(),tn()}))}})).catch((_n=>{$.error(_n)}))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(((Et,tn)=>{try{at(),se.abortRequests(),y.prepareForPlaybackSeek().then((()=>y.pruneAllSafely())).then((()=>{Et()}))}catch(_n){tn(_n)}}))},prepareQualityChange:function(Et){Et.newRepresentation&&((function(tn){if(M)M.prepareQualityChange(tn);else if(pe===h.default.ENHANCEMENT){const _n=tn.oldRepresentation.mediaInfo.type,Sn=tn.newRepresentation.mediaInfo.type;if(_n===h.default.ENHANCEMENT&&Sn===h.default.VIDEO)return $.info("Stop "+pe+" stream processor"),X.reset(),!0;if(_n===h.default.VIDEO&&Sn===h.default.ENHANCEMENT)return $.info("Start "+pe+" stream processor"),vn(new ua({newMediaInfo:tn.newRepresentation.mediaInfo,newRepresentation:tn.newRepresentation})).then((()=>{X.setup(),X.initialize(w),X.startScheduleTimer()})),!0}return!1})(Et)||(R&&R.enabled&&$.warn(`Canceling queued representation switch to ${R.newRepresentation.id} for ${pe}`),Et.isAdaptationSetSwitch?($.debug(`Preparing quality switch to different AdaptationSet for type ${pe} from representation id ${Et.oldRepresentation.id} to ${Et.newRepresentation.id}`),(function(tn){const _n=tn.newRepresentation;P=!0,at(),X.setSwitchTrack(!0);const Sn=_n.mediaInfo;On(Sn),vn(new ua({newMediaInfo:Sn,newRepresentation:_n})).then((()=>{Pn(tn)}))})(Et)):($.debug(`Preparing quality within the same AdaptationSet for type ${pe} from representation id ${Et.oldRepresentation.id} to ${Et.newRepresentation.id}`),(function(tn){const _n=tn.newRepresentation;P=!0,at(),z.prepareQualityChange(_n),Pn(tn)})(Et))))},prepareTrackSwitch:function(Et,tn=!1){return new Promise((_n=>{$.debug(`Preparing track switch for type ${pe}`);const Sn=pe===h.default.TEXT||tn||ae.get().streaming.trackSwitchMode[pe]===h.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ne.getTimeToStreamEnd(de)>ae.get().streaming.buffer.stallThreshold;y.getIsBufferingCompleted()&&!Sn?(function(Dn){return new Promise((Rn=>{const nr=z.getCurrentRepresentation();y.prepareForNonReplacementTrackSwitch(nr,Dn).then((()=>{me.trigger(f.default.BUFFERING_COMPLETED,{},{streamId:de.id,mediaType:pe}),Rn()})).catch((()=>{me.trigger(f.default.BUFFERING_COMPLETED,{},{streamId:de.id,mediaType:pe}),Rn()}))}))})(Et).then((()=>{_n()})):(X.setSwitchTrack(!0),Sn?(function(Dn){return new Promise((Rn=>{me.trigger(f.default.BUFFER_REPLACEMENT_STARTED,{mediaType:pe,streamId:de.id},{mediaType:pe,streamId:de.id}),se.abortRequests();const nr=It();y.prepareForReplacementTrackSwitch(nr,Dn).then((()=>{Le(),Rn()})).catch((()=>{Le(),Rn()}))}))})(Et).then((()=>{_n()})):(function(Dn){return new Promise((Rn=>{const nr=()=>{const mr=se.getRequests({state:je.FRAGMENT_MODEL_LOADING});if(mr&&mr.length!==0)me.once(g.default.FRAGMENT_LOADING_COMPLETED,nr,D);else{const Bi=It();y.prepareForNonReplacementTrackSwitch(Bi,Dn).then((()=>{ft(),Rn()})).catch(($i=>{$.error($i),ft(),Rn()}))}};nr()}))})(Et).then((()=>{_n()})))}))},probeNextRequest:function(){const Et=It();return I.getNextSegmentRequestIdempotent(_,Et)},reset:function(Et,tn){I&&I.reset(),y&&(y.reset(Et,tn),y=null),X&&(X.reset(),X=null),z&&(z.reset(),z=null),re&&(re=null),Ee&&Ee.unRegisterStreamType(W(),pe),me.off(f.default.BUFFER_CLEARED,Nt,D),me.off(f.default.BUFFER_LEVEL_STATE_CHANGED,St,D),me.off(f.default.BYTES_APPENDED_END_FRAGMENT,Mt,D),me.off(f.default.FRAGMENT_LOADING_ABANDONED,zt,D),me.off(f.default.FRAGMENT_LOADING_COMPLETED,rn,D),me.off(f.default.INIT_FRAGMENT_LOADED,Bt,D),me.off(f.default.INIT_FRAGMENT_NEEDED,ze,D),me.off(f.default.MEDIA_FRAGMENT_LOADED,Vt,D),me.off(f.default.MEDIA_FRAGMENT_NEEDED,Fe,D),me.off(f.default.QUOTA_EXCEEDED,Dt,D),me.off(f.default.SEEK_TARGET,Kt,D),me.off(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Cn,D),me.off(f.default.SET_NON_FRAGMENTED_TEXT,gt,D),me.off(f.default.SOURCE_BUFFER_ERROR,ln,D),we(),pe=null,de=null},selectMediaInfo:vn,setEnhancementStreamProcessor:function(Et){M=Et,$.info("enhancementStreamProcessor = "+M)},setExplicitBufferingTime:Yt,setMediaInfoArray:function(Et){q=Et},setMediaSource:function(Et){return y.setMediaSource(Et,_)},setTrackSwitchInProgress:function(Et){ce=Et},updateStreamInfo:function(Et){return de=Et,ot()?Promise.resolve():y.updateAppendWindow()}},$=(0,l.default)(fe).getInstance().getLogger(D),we(),me.on(f.default.BUFFER_CLEARED,Nt,D),me.on(f.default.BUFFER_LEVEL_STATE_CHANGED,St,D),me.on(f.default.BYTES_APPENDED_END_FRAGMENT,Mt,D),me.on(f.default.FRAGMENT_LOADING_ABANDONED,zt,D),me.on(f.default.FRAGMENT_LOADING_COMPLETED,rn,D),me.on(f.default.INIT_FRAGMENT_LOADED,Bt,D),me.on(f.default.INIT_FRAGMENT_NEEDED,ze,D),me.on(f.default.MEDIA_FRAGMENT_LOADED,Vt,D),me.on(f.default.MEDIA_FRAGMENT_NEEDED,Fe,D),me.on(f.default.QUOTA_EXCEEDED,Dt,D),me.on(f.default.SEEK_TARGET,Kt,D),me.on(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Cn,D),me.on(f.default.SET_NON_FRAGMENTED_TEXT,gt,D),me.on(f.default.SOURCE_BUFFER_ERROR,ln,D),D}Dp.__dashjs_factory_name="StreamProcessor";var ex=n.default.getClassFactory(Dp),tx=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},nx=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};function Pp(b){const y=this.context,v=b.adapter,w=b.baseURLController,_=b.streamInfo,I=b.timelineConverter,M=b.debug,D=b.eventBus,N=b.events,$=b.dashConstants,q=Zn(y).getInstance();let R,P,z,X,re,ie,J,ce,fe;function me(ne,K){const B=new nx;B.id=ne.id,B.bitrate=ne.bandwidth,B.width=ne.width,B.height=ne.height,B.tilesHor=1,B.tilesVert=1,ne.essentialProperties&&ne.essentialProperties.forEach((j=>{if(h.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(j.schemeIdUri)>=0&&j.value){const Se=j.value.split("x");Se.length!==2||isNaN(Se[0])||isNaN(Se[1])||(B.tilesHor=parseInt(Se[0],10),B.tilesVert=parseInt(Se[1],10))}})),K?J.updateSegmentData(ne).then((j=>{(function(Se,se,Ae){let Te=[];const Re=(function(Ue,Ne){const ee=[];let ae,de,le,ue,pe=0;for(ae=0,de=Ue.segments.length;ae<de;ae++)le=Ue.segments[ae],ue=Du({durationInTimescale:le.duration,fTimescale:le.timescale,index:pe,isDynamic:v.getIsDynamic(),mediaRange:le.mediaRange,mediaTime:le.startTime,mediaUrl:le.media,representation:Ne,timelineConverter:I}),ue&&(ee.push(ue),ue=null,pe++);return ee})(Ae,se);se.segments=Re,se.fragmentDuration=se.segmentDuration||(se.segments&&se.segments.length>0?se.segments[0].duration:NaN),Se.segmentDuration=se.segments[0].duration,Se.readThumbnail=function(Ue,Ne){let ee=null;Te.some((ae=>{if(ae.start<=Ue&&ae.end>Ue)return ee=ae.url,!0})),ee?Ne(ee):se.segments.some((ae=>{if(ae.mediaStartTime<=Ue&&ae.mediaStartTime+ae.duration>Ue){const de=w.resolve(se.path),le=new bu({method:"get",url:de.url,responseType:"arraybuffer",customData:{request:{range:ae.mediaRange},onloadend:function(pe){let W=fe.getSamplesInfo(pe.target.response),be=new Blob([pe.target.response.slice(W.sampleList[0].offset,W.sampleList[0].offset+W.sampleList[0].size)],{type:"image/jpeg"}),we=window.URL.createObjectURL(be);Te.push({start:ae.mediaStartTime,end:ae.mediaStartTime+ae.duration,url:we}),Ne&&Ne(we)}}}),ue=new Eu({request:le});return ce.load(le,ue),!0}}))}})(B,ne,j)})):(B.startNumber=ne.startNumber,B.segmentDuration=ne.segmentDuration,B.timescale=ne.timescale,B.templateUrl=(function(j){const Se=q.isRelative(j.media)?q.resolve(j.media,w.resolve(j.path).url):j.media;return Se?po(Se,j.id):""})(ne)),B.tilesHor>0&&B.tilesVert>0&&(B.widthPerTile=B.width/B.tilesHor,B.heightPerTile=B.height/B.tilesVert,P.push(B))}function Ee(){P=[],z=[],re=-1,ie=null,X&&(X.reset(),X=null)}return R={addTracks:function(){if(!_||!v||(ie=v.getMediaInfoForType(_,h.default.IMAGE),!ie))return;const ne=v.getVoRepresentations(ie);ne&&ne.length>0&&ne.forEach((K=>{(K.segmentInfoType===ve.default.SEGMENT_TEMPLATE&&K.segmentDuration>0&&K.media||K.segmentInfoType===ve.default.SEGMENT_TIMELINE)&&me(K),K.segmentInfoType===ve.default.SEGMENT_BASE&&me(K,!0),z.push(K)})),P.length>0&&P.sort(((K,B)=>K.bitrate-B.bitrate))},getCurrentTrack:function(){return re<0?null:P[re]},getCurrentTrackIndex:function(){return re},getRepresentations:function(){return z},getThumbnailRequestForTime:function(ne){let K;const B=v.getVoRepresentations(ie);for(let j=0;j<B.length;j++)if(P[re].id===B[j].id){K=B[j];break}return X.getSegmentRequestForTime(ie,K,ne)},getTracks:function(){return P},reset:Ee,setTrackById:function(ne){if(!P||P.length===0)return;const K=P.findIndex((B=>B.id===ne));K!==-1&&(re=K)},setTrackByIndex:function(ne){P&&P.length!==0&&(ne>=P.length&&(ne=P.length-1),re=ne)}},Ee(),ce=nn(y).create({}),fe=bl(y).getInstance(),J=Lp(y).create({events:N,eventBus:D,streamInfo:_,timelineConverter:I,dashConstants:$,dashMetrics:b.dashMetrics,segmentBaseController:b.segmentBaseController,type:h.default.IMAGE}),X=xp(y).create({streamInfo:_,type:h.default.IMAGE,timelineConverter:I,segmentsController:J,baseURLController:w,debug:M,eventBus:D,events:N,dashConstants:$,urlUtils:q}),X.initialize(!!v&&v.getIsDynamic()),R}Pp.__dashjs_factory_name="ThumbnailTracks";var rx=n.default.getClassFactory(Pp);function Mp(b){const y=this.context,v=b.streamInfo;let w,_;function I(D){_.setTrackByIndex(D)}function M(){_&&_.reset()}return w={getCurrentTrack:function(){return _.getCurrentTrack()},getCurrentTrackIndex:function(){return _.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return _.getRepresentations()},getStreamId:function(){return v.id},initialize:function(){_.addTracks();const D=_.getTracks();D&&D.length>0&&I(0)},provide:function(D,N){if(typeof N!="function")return;const $=_.getCurrentTrack();let q,R;if(!$||$.segmentDuration<=0||D==null)return void N(null);R=_.getThumbnailRequestForTime(D),R&&($.segmentDuration=R.duration),q=D%$.segmentDuration;const P=Math.floor(q*$.tilesHor*$.tilesVert/$.segmentDuration),z=new tx;if(z.width=Math.floor($.widthPerTile),z.height=Math.floor($.heightPerTile),z.x=Math.floor(P%$.tilesHor)*$.widthPerTile,z.y=Math.floor(P/$.tilesHor)*$.heightPerTile,"readThumbnail"in $)return $.readThumbnail(D,(X=>{z.url=X,N(z)}));if(R)z.url=R.url,$.segmentDuration=NaN;else{const X=Math.floor(D/$.segmentDuration);z.url=(function(re,ie){const J=ie+re.startNumber;return po(re.templateUrl,void 0,J,void 0,re.bandwidth,(J-1)*re.segmentDuration*re.timescale)})($,X)}N(z)},reset:M,setTrackByIndex:I,setTrackById:function(D){_.setTrackById(D)}},M(),_=rx(y).create({streamInfo:v,adapter:b.adapter,baseURLController:b.baseURLController,timelineConverter:b.timelineConverter,debug:b.debug,eventBus:b.eventBus,events:b.events,dashConstants:b.dashConstants,dashMetrics:b.dashMetrics,segmentBaseController:b.segmentBaseController}),w}Mp.__dashjs_factory_name="ThumbnailController";var ix=n.default.getClassFactory(Mp);const ax=[h.default.VIDEO,h.default.AUDIO,h.default.TEXT,h.default.MUXED,h.default.IMAGE];function Op(b){b=b||{};const y=this.context,v=(0,m.default)(y).getInstance(),w=Zn(y).getInstance(),_=b.manifestModel,I=b.mediaPlayerModel,M=b.dashMetrics,D=b.manifestUpdater,N=b.adapter,$=b.timelineConverter,q=b.capabilities,R=b.errHandler,P=b.abrController,z=b.playbackController,X=b.throughputController,re=b.eventController,ie=b.mediaController,J=b.protectionController,ce=b.textController,fe=b.videoModel;let me=b.streamInfo;const Ee=b.settings;let ne,K,B,j,Se,se,Ae,Te,Re,Ue,Ne,ee,ae,de,le,ue;function pe(gt,Dt,Xt){return new Promise(((Ye,at)=>{St(),ln();let It=fe.getElement();const ot=[];ax.forEach((Bt=>{if((Bt!==h.default.TEXT||gt)&&(Bt!==h.default.VIDEO||!It||It&&/^VIDEO$/i.test(It.nodeName))){const Vt=Xt.find((Le=>Le.mediaInfo.type===Bt));ot.push(W(Bt,gt,Vt))}})),Promise.all(ot).then((()=>(function(Bt){return new Promise((Vt=>{const Le={},ft=de.map((Kt=>{const Yt=Kt.getRepresentation();return Kt.createBufferSinks(Bt,Yt)}));Promise.all(ft).then((Kt=>{Kt.forEach((Yt=>{Yt&&(Le[Yt.getType()]=Yt)})),Vt(Le)})).catch((()=>{Vt(Le)}))}))})(Dt))).then((Bt=>{if(de.length===0){const Vt="No streams to play.";R.error(new Tt.default(Jt.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Vt,_.getValue())),Ne.fatal(Vt)}else zt();gt&&ce.createTracks(me),Ye(Bt)})).catch((Bt=>{at(Bt)}))}))}function W(gt,Dt,Xt){let Ye,at=N.getAllMediaInfoForType(me,gt),It=[],ot=null,Bt=-1;if(!at||at.length===0)return Ne.info("No "+gt+" data."),Promise.resolve();gt===h.default.VIDEO&&(se=!0),gt===h.default.AUDIO&&(j=!0);for(let Le=0,ft=at.length;Le<ft;Le++)ot=at[Le],gt===h.default.TEXT&&ot.isEmbedded&&(ce.addEmbeddedTrack(me,ot),It.push(ot)),be(ot)&&ie.addTrack(ot),ot.type===h.default.ENHANCEMENT&&(Bt=Le);if(It.length>0&&(ie.setInitialMediaSettingsForType(gt,me),ce.addMediaInfosToBuffer(me,gt,It)),at=at.filter((Le=>!Le.isEmbedded)),at.length===0)return Promise.resolve();if(gt===h.default.IMAGE)return le=ix(y).create({streamInfo:me,adapter:N,baseURLController:b.baseURLController,timelineConverter:b.timelineConverter,debug:K,eventBus:v,events:f.default,dashConstants:ve.default,dashMetrics:b.dashMetrics,segmentBaseController:b.segmentBaseController}),le.initialize(),Promise.resolve();v.trigger(f.default.STREAM_INITIALIZING,{streamInfo:me,mediaInfo:ot}),ie.setInitialMediaSettingsForType(gt,me);let Vt=we(at,Dt,gt);if(Bt>=0){let Le=new F_(v);Le.open(),Le.duration=me.manifestInfo.duration;let ft=we(at,Le,h.default.ENHANCEMENT);ft.selectMediaInfo(new ua({newMediaInfo:at[Bt]})),Vt.setEnhancementStreamProcessor(ft)}if(Ye=ie.getCurrentTrackFor(gt,me.id),Ye){const Le=gt===h.default.TEXT&&Ye.isEmbedded?at[0]:Ye,ft=new ua({newMediaInfo:Le,previouslySelectedRepresentation:Xt});return Vt.selectMediaInfo(ft)}return Promise.resolve()}function be(gt){const Dt=gt?gt.type:null;let Xt;return Dt===h.default.MUXED?(Xt="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Ne.fatal(Xt),R.error(new Tt.default(Jt.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Xt,_.getValue())),!1):!(Dt!==h.default.TEXT&&Dt!==h.default.IMAGE&&gt.contentProtection&&gt.contentProtection.length>0&&!q.supportsEncryptedMedia()&&(R.error(new Tt.default(Jt.CAPABILITY_MEDIAKEYS_ERROR_CODE,Jt.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function we(gt,Dt,Xt){const Ye=gt&&gt.length>0?gt.filter((Le=>Le.type===Xt))[0]:null;let at=B.getModel(Ye?Ye.type:null);const It=Ye?Ye.type:null,ot=Ye?Ye.mimeType:null,Bt=Ye?Ye.isFragmented:null;let Vt=ex(y).create({abrController:P,adapter:N,baseURLController:b.baseURLController,boxParser:ne,capabilities:q,dashMetrics:b.dashMetrics,errHandler:R,fragmentModel:at,manifestModel:_,mediaController:ie,mediaPlayerModel:I,mimeType:ot,playbackController:z,segmentBaseController:b.segmentBaseController,segmentBlacklistController:ae,settings:Ee,streamInfo:me,textController:ce,throughputController:X,timelineConverter:$,type:It});return Vt.initialize(Dt,se,Bt),de.push(Vt),Vt.setMediaInfoArray(gt),It===h.default.TEXT&&ce.addMediaInfosToBuffer(me,It,gt,at),Vt}function Ce(gt){let Dt=de?de.length:0;for(let Xt=0;Xt<Dt;Xt++){let Ye=de[Xt].getFragmentModel();Ye.abortRequests(),Ye.resetInitialSettings(),de[Xt].reset(!1,gt)}ce&&ce.deactivateStream(me),le&&(le.reset(),le=null),de=[],Te=!1,Se=!1,rn(!1),Fe(!1),v.trigger(f.default.STREAM_DEACTIVATED,{streamInfo:me})}function ze(gt){Ce(gt),Ue=!1,se=!1,j=!1,Re=!1,ue=[]}function Fe(gt){Re=gt}function We(){return me?me.start:NaN}function lt(){return me?me.id:null}function St(){if(!fe||!P)throw new Error(h.default.MISSING_CONFIG_ERROR)}function Nt(gt){gt.error&&(R.error(gt.error),Ne.fatal(gt.error.message))}function ln(){if(re){const gt=N.getEventsFor(me);gt&&gt.length>0&&re.addInlineEvents(gt,me.id)}}function Mt(gt){let Dt=sn(gt);return Dt?Dt.getMediaInfo():null}function sn(gt){return gt?de.find((Dt=>Dt.getType()===gt)):null}function vn(){let gt=xt();const Dt=gt.length;if(Dt!==0){for(let Xt=0;Xt<Dt;Xt++)if(!gt[Xt].isBufferingCompleted()&&(gt[Xt].getType()===h.default.AUDIO||gt[Xt].getType()===h.default.VIDEO))return void Ne.debug("onBufferingCompleted - One streamProcessor has finished but",gt[Xt].getType(),"one is not buffering completed");Ne.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),Se=!0,v.trigger(f.default.STREAM_BUFFERING_COMPLETED,{streamInfo:me},{streamInfo:me})}else Ne.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function On(gt){re&&re.addInbandEvents(gt.events,me.id)}function Pn(){zt()}function wn(){ln()}function kn(gt){return gt&&gt.type?nt(gt.type):null}function nt(gt){return gt?xt().filter((function(Dt){return Dt.getType()===gt}))[0]:null}function xt(){let gt,Dt,Xt=[];for(let Ye=0;Ye<de.length;Ye++)Dt=de[Ye],gt=Dt.getType(),gt!==h.default.AUDIO&&gt!==h.default.VIDEO&&gt!==h.default.TEXT&&gt!==h.default.ENHANCEMENT||Xt.push(Dt);return Xt}function _t(){const gt=de.length;for(let Dt=0;Dt<gt&&de[Dt];Dt++)de[Dt].getScheduleController().startScheduleTimer()}function zt(){const gt=de.length;if(J){J.clearMediaInfoArray();for(let Dt=0;Dt<gt&&de[Dt];Dt++){const Xt=de[Dt].getType(),Ye=de[Dt].getMediaInfo();if(Xt===h.default.AUDIO||Xt===h.default.VIDEO||Xt===h.default.TEXT&&Ye&&Ye.isFragmented){let at=de[Dt].getMediaInfo();at&&J.initializeForMedia(at)}}J.handleKeySystemFromManifest()}Ue||(Ue=!0,fe.waitForReadyState(h.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(()=>{v.trigger(f.default.STREAM_INITIALIZED,{streamInfo:me})})))}function rn(gt){ee=gt}function Cn(){return ee}return Ae={activate:function(gt,Dt,Xt=[]){return new Promise(((Ye,at)=>{if(!Te)return Cn()?(Te=!0,v.trigger(f.default.STREAM_ACTIVATED,{streamInfo:me}),void Ye()):void(function(It,ot,Bt=[]){return pe(It,ot,Bt)})(gt,Dt,Xt).then((()=>{Te=!0,Xt&&Xt.length>0&&_t(),v.trigger(f.default.STREAM_ACTIVATED,{streamInfo:me}),Ye()})).catch((It=>{at(It)}));Ye()}))},checkAndHandleCompletedBuffering:function(){Se||de.forEach((gt=>{gt.checkAndHandleCompletedBuffering()}))},deactivate:Ce,getAdapter:function(){return N},getCurrentMediaInfoForType:function(gt){const Dt=nt(gt);return Dt?Dt.getMediaInfo():null},getCurrentRepresentationForType:function(gt){const Dt=nt(gt);return Dt?Dt.getRepresentation():null},getDuration:function(){return me?me.duration:NaN},getHasAudioTrack:function(){return j},getHasFinishedBuffering:function(){return Se},getHasVideoTrack:function(){return se},getId:lt,getIsActive:function(){return Te},getIsEndedEventSignaled:function(){return Re},getPreloaded:Cn,getRepresentationForTypeById:function(gt,Dt){let Xt;if(gt===h.default.IMAGE){if(!le)return null;Xt=le.getPossibleVoRepresentations()}else Xt=(function(It){let ot=sn(It);return ot?ot.getAllMediaInfos():[]})(gt).flatMap((It=>P.getPossibleVoRepresentationsFilteredBySettings(It,!0)));if(!Xt||Xt.length===0)return null;const Ye=Xt.filter((at=>at.id===Dt));return Ye&&Ye.length>0?Ye[0]:null},getRepresentationForTypeByIndex:function(gt,Dt){let Xt;if(gt===h.default.IMAGE){if(!le)return null;Xt=le.getPossibleVoRepresentations()}else{const Ye=Mt(gt);Xt=P.getPossibleVoRepresentationsFilteredBySettings(Ye,!0)}return Xt[Dt=Math.max(Math.min(Dt,Xt.length-1),0)]},getRepresentationsByType:function(gt){if(St(),gt===h.default.IMAGE)return le?le.getPossibleVoRepresentations():[];const Dt=Mt(gt);return P.getPossibleVoRepresentationsFilteredBySettings(Dt,!0)},getStartTime:We,getStreamId:function(){return me?me.id:null},getStreamInfo:function(){return me},getStreamProcessors:xt,getThumbnailController:function(){return le},initialize:function(){v.on(f.default.BUFFERING_COMPLETED,vn,Ae),v.on(f.default.INBAND_EVENTS,On,Ae),v.on(f.default.DATA_UPDATE_COMPLETED,Pn,Ae),v.on(g.default.PLAYBACK_SEEKED,wn,Ae),J&&(v.on(f.default.KEY_ERROR,Nt,Ae),v.on(f.default.SERVER_CERTIFICATE_UPDATED,Nt,Ae),v.on(f.default.LICENSE_REQUEST_COMPLETE,Nt,Ae),v.on(f.default.KEY_SYSTEM_SELECTED,Nt,Ae),v.on(f.default.KEY_SESSION_CREATED,Nt,Ae)),ce.initializeForStream(me),v.trigger(f.default.STREAM_UPDATED,{streamInfo:me})},initializeForTextWithMediaSource:function(gt){return new Promise(((Dt,Xt)=>{W(h.default.TEXT,gt,null).then((()=>(function(){const Ye=nt(h.default.TEXT);return Ye?Ye.createBufferSinks():Promise.resolve()})())).then((()=>{ce.createTracks(me),Dt()})).catch((Ye=>{Xt(Ye)}))}))},prepareQualityChange:function(gt){const Dt=nt(gt.mediaType);Dt&&Dt.prepareQualityChange(gt)},prepareTrackChange:function(gt){if(!Te||!me)return;Se=!1;let Dt=gt.newMediaInfo,Xt=_.getValue(),Ye=kn(Dt);if(!Ye)return;let at=z.getTime();if(Ne.info("Stream -  Process track changed at current time "+at),Xt.refreshManifestOnSwitchTrack)ue.push(gt),D.getIsUpdating()||(Ne.debug("Stream -  Refreshing manifest for switch track"),D.refreshManifest());else{Ye.clearScheduleTimer(),Ye.setTrackSwitchInProgress(!0);const It=Ye.getRepresentation();Ye.selectMediaInfo(new ua({newMediaInfo:Dt})).then((()=>{const ot=!!(gt&&gt.options&&gt.options.hasOwnProperty("replaceBuffer"))&&gt.options.replaceBuffer;return Ye.prepareTrackSwitch(It,ot)})).then((()=>{Ye.setTrackSwitchInProgress(!1)}))}},reset:function(gt){B&&(B.reset(),B=null),P&&me&&P.clearDataForStream(me.id),ae&&(ae.reset(),ae=null),ce&&me&&ce.clearDataForStream(me.id),ie&&me&&ie.clearDataForStream(me.id),ze(gt),me=null,v.off(f.default.BUFFERING_COMPLETED,vn,Ae),v.off(f.default.INBAND_EVENTS,On,Ae),v.off(f.default.DATA_UPDATE_COMPLETED,Pn,Ae),v.off(g.default.PLAYBACK_SEEKED,wn,Ae),J&&(v.off(f.default.KEY_ERROR,Nt,Ae),v.off(f.default.SERVER_CERTIFICATE_UPDATED,Nt,Ae),v.off(f.default.LICENSE_REQUEST_COMPLETE,Nt,Ae),v.off(f.default.KEY_SYSTEM_SELECTED,Nt,Ae),v.off(f.default.KEY_SESSION_CREATED,Nt,Ae))},setIsEndedEventSignaled:Fe,setMediaSource:function(gt){return new Promise(((Dt,Xt)=>{const Ye=[];for(let at=0;at<de.length;)be(de[at].getMediaInfo())?(Ye.push(de[at].setMediaSource(gt)),at++):(de[at].reset(),de.splice(at,1));Promise.all(Ye).then((()=>{for(let at=0;at<de.length;at++)de[at].dischargePreBuffer();if(de.length===0){const at="No streams to play.";R.error(new Tt.default(Jt.MANIFEST_ERROR_ID_NOSTREAMS_CODE,at+"nostreams",_.getValue())),Ne.fatal(at)}Dt()})).catch((at=>{Ne.error(at),Xt(at)}))}))},startPreloading:function(gt,Dt,Xt=[]){return new Promise(((Ye,at)=>{Cn()?at():(Ne.info(`[startPreloading] Preloading next stream with id ${lt()}`),rn(!0),pe(gt,Dt,Xt).then((()=>{for(let It=0;It<de.length&&de[It];It++)de[It].setExplicitBufferingTime(We()),de[It].getScheduleController().startScheduleTimer();Ye()})).catch((()=>{rn(!1),at()})))}))},startScheduleControllers:_t,triggerProtectionError:function(gt){Nt(gt)},updateData:function(gt){return new Promise((Dt=>{me=gt,re&&ln();let Xt,Ye=[];for(let at=0,It=de.length;at<It;at++){let ot=de[at];const Bt=ot.getMediaInfo();Ye.push(ot.updateStreamInfo(me));let Vt=N.getAllMediaInfoForType(me,ot.getType());if(Vt=Vt.filter((Le=>!Le.isEmbedded)),ot.setMediaInfoArray(Vt),Vt)for(let Le=0;Le<Vt.length;Le++)N.areMediaInfosEqual(Bt,Vt[Le])&&Ye.push(ot.selectMediaInfo(new ua({newMediaInfo:Vt[Le]})))}Promise.all(Ye).then((()=>{let at=[];for(;ue.length>0;){let It=ue.pop(),ot=It.newMediaInfo;if(Xt=kn(It.oldMediaInfo),!Xt)return;const Bt=Xt.getRepresentation();Xt.setTrackSwitchInProgress(!0),at.push(Xt.prepareTrackSwitch(Bt)),at.push(Xt.selectMediaInfo(new ua({newMediaInfo:ot})))}return Promise.all(at)})).then((()=>{zt(),Xt&&Xt.setTrackSwitchInProgress(!1),v.trigger(f.default.STREAM_UPDATED,{streamInfo:me}),Dt()})).catch((at=>{R.error(at)}))}))}},(function(){try{K=(0,l.default)(y).getInstance(),Ne=K.getLogger(Ae),ze(),ne=bl(y).getInstance(),ae=Zt(y).create({updateEventName:f.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SEGMENT_LOCATION_BLACKLIST_ADD}),B=$_(y).create({streamInfo:me,mediaPlayerModel:I,dashMetrics:M,errHandler:R,settings:Ee,boxParser:ne,dashConstants:ve.default,urlUtils:w})}catch(gt){throw gt}})(),Ae}Op.__dashjs_factory_name="Stream";var sx=n.default.getClassFactory(Op);function Mu(){const b=this.context,y=(0,m.default)(b).getInstance(),v=Zn(b).getInstance();let w,_,I,M,D,N,$,q,R,P,z,X,re,ie,J,ce;function fe(){q=[],R=[],P=null,z=null,re=null,X=NaN,I=!1,M=!1,ie=D.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function me(){D.get().streaming.utcSynchronization.enabled&&!I&&!M&&re&&re.value&&re.schemeIdUri&&!isNaN(X)&&!isNaN(D.get().streaming.utcSynchronization.backgroundAttempts)&&(z&&(Date.now()-z)/1e3<30||(q=[],M=!0,Ee(isNaN(D.get().streaming.utcSynchronization.backgroundAttempts)?2:D.get().streaming.utcSynchronization.backgroundAttempts)))}function Ee(de){try{if(de<=0)return void ee();const le=Date.now();N[re.schemeIdUri](re.value,(function(ue){const pe=Date.now(),W=K(le,pe,ue);q.push(W),Ee(de-1)}),(function(){ee()}))}catch{ee()}}function ne(de=null){let le=de||0;if(!R||R.length===0||le>=R.length)return void B();let ue=R[le];if(ue)if(N.hasOwnProperty(ue.schemeIdUri)){const pe=new Date().getTime();N[ue.schemeIdUri](ue.value,(function(W){const be=new Date().getTime(),we=K(pe,be,W);re=ue,B(we)}),(function(){ne(le+1)}))}else ne(le+1);else B()}function K(de,le,ue){return ue-(le-(le-de)/2)}function B(de=NaN){let le=isNaN(de);le&&D.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?(function(){let ue=$.getLatestMPDRequestHeaderValueByID("Date"),pe=ue!==null?new Date(ue).getTime():Number.NaN;isNaN(pe)?Ne(!0):Ne(!1,pe-Date.now())})():Ne(le,de)}function j(de){let le=Date.parse(de);return isNaN(le)&&(le=(function(ue){let pe,W,be=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(ue);return pe=Date.UTC(parseInt(be[1],10),parseInt(be[2],10)-1,parseInt(be[3],10),parseInt(be[4],10),parseInt(be[5],10),be[6]&&(parseInt(be[6],10)||0),be[7]&&1e3*parseFloat(be[7])||0),be[9]&&be[10]&&(W=60*parseInt(be[9],10)+parseInt(be[10],10),pe+=(be[8]==="+"?-1:1)*W*60*1e3),new Date(pe).getTime()})(de)),le}function Se(de){return Date.parse(de)}function se(de){return Date.parse(de)}function Ae(de,le,ue){ue()}function Te(de,le,ue){let pe=j(de);isNaN(pe)?ue():le(pe)}function Re(de,le,ue,pe,W){let be,we,Ce=!1,ze=new XMLHttpRequest,Fe=W?Q.HTTPRequest.HEAD:Q.HTTPRequest.GET,We=le.match(/\S+/g);if(le=We.shift(),be=function(){Ce||(Ce=!0,We.length?Re(de,We.join(" "),ue,pe,W):pe())},we=function(){let lt,St;ze.status===200&&(lt=W?ze.getResponseHeader("Date"):ze.response,St=de(lt),isNaN(St)||(ue(St),Ce=!0))},v.isRelative(le)){const lt=ce.resolve();lt&&(le=v.resolve(le,lt.url))}ze.open(Fe,le),ze.timeout=5e3,ze.onload=we,ze.onloadend=be,ze.send()}function Ue(de,le,ue){Re(se,de,le,ue,!0)}function Ne(de,le){if(isNaN(X)||isNaN(le)||de||(function(pe){try{const W=ae(pe),be=isNaN(ie)?30:ie,we=isNaN(D.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:D.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Ce=isNaN(D.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:D.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,ze=isNaN(D.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:D.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let Fe;W?(Fe=Math.min(be*we,Ce),_.debug(`Increasing timeBetweenSyncAttempts to ${Fe}`)):(Fe=Math.max(be/we,ze),_.debug(`Decreasing timeBetweenSyncAttempts to ${Fe}`)),ie=Fe}catch{}})(le),!de&&!isNaN(le)){P=Date.now(),I=!1;const pe=isNaN(X);X=le,pe&&me(),_.debug(`Completed UTC sync. Setting client - server offset to ${le}`)}de&&(re=null,I=!1,J.error(new Tt.default(Jt.TIME_SYNC_FAILED_ERROR_CODE,Jt.TIME_SYNC_FAILED_ERROR_MESSAGE)));const ue=D.get().streaming.utcSynchronization.artificialTimeOffsetToApply;y.trigger(f.default.UPDATE_TIME_SYNC_OFFSET,{offset:le+ue}),y.trigger(f.default.TIME_SYNCHRONIZATION_COMPLETED)}function ee(){if(!q||q.length===0)return;const de=q.reduce(((le,ue)=>le+ue),0)/q.length;ae(de)?_.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(_.debug(`Completed background UTC sync. Setting client - server offset to ${de}`),X=de,y.trigger(f.default.UPDATE_TIME_SYNC_OFFSET,{offset:X})),M=!1,z=Date.now()}function ae(de){try{if(isNaN(X))return!0;const le=D.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(D.get().streaming.utcSynchronization.maximumAllowedDrift)?D.get().streaming.utcSynchronization.maximumAllowedDrift:100;return de>=X-le&&de<=X+le}catch{return!0}}return w={initialize:function(){fe(),N={"urn:mpeg:dash:utc:http-head:2014":Ue,"urn:mpeg:dash:utc:http-xsdate:2014":Re.bind(null,j),"urn:mpeg:dash:utc:http-iso:2014":Re.bind(null,Se),"urn:mpeg:dash:utc:direct:2014":Te,"urn:mpeg:dash:utc:http-head:2012":Ue,"urn:mpeg:dash:utc:http-xsdate:2012":Re.bind(null,j),"urn:mpeg:dash:utc:http-iso:2012":Re.bind(null,Se),"urn:mpeg:dash:utc:direct:2012":Te,"urn:mpeg:dash:utc:http-ntp:2014":Ae,"urn:mpeg:dash:utc:ntp:2014":Ae,"urn:mpeg:dash:utc:sntp:2014":Ae}},attemptSync:function(de,le){R=de,I||((function(ue){try{if(!ue||!D.get().streaming.utcSynchronization.enabled)return!1;const pe=isNaN(ie)?30:ie;return!(P&&pe&&!isNaN(pe))||(Date.now()-P)/1e3>=pe}catch{return!0}})(le)?(I=!0,ne()):y.trigger(f.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(de){de&&(de.dashMetrics&&($=de.dashMetrics),de.baseURLController&&(ce=de.baseURLController),de.errHandler&&(J=de.errHandler),de.settings&&(D=de.settings))},reset:function(){fe(),y.off(f.default.ATTEMPT_BACKGROUND_SYNC,me,w)}},_=(0,l.default)(b).getInstance().getLogger(w),y.on(f.default.ATTEMPT_BACKGROUND_SYNC,me,w),w}Mu.__dashjs_factory_name="TimeSyncController";const Ou=n.default.getSingletonFactory(Mu);Ou.HTTP_TIMEOUT_MS=5e3,n.default.updateSingletonFactory(Mu.__dashjs_factory_name,Ou);var ox=Ou;function Fp(){let b,y,v,w,_;const I=this.context,M=(0,m.default)(I).getInstance();return b={attachMediaSource:function(D){let N=window.URL.createObjectURL(y);return D.setSource(N),w==="managedMediaSource"&&(D.setDisableRemotePlayback(!0),y.addEventListener("startstreaming",(()=>{M.trigger(g.default.MANAGED_MEDIA_SOURCE_START_STREAMING)})),y.addEventListener("endstreaming",(()=>{M.trigger(g.default.MANAGED_MEDIA_SOURCE_END_STREAMING)}))),N},createMediaSource:function(){let D="WebKitMediaSource"in window,N="MediaSource"in window;return"ManagedMediaSource"in window?(y=new ManagedMediaSource,w="managedMediaSource",_.info("Created ManagedMediaSource")):N?(y=new MediaSource,w="mediaSource",_.info("Created MediaSource")):D&&(y=new WebKitMediaSource,_.info("Created WebkitMediaSource")),y},detachMediaSource:function(D){D.setSource(null)},setConfig:function(D){D&&D.settings&&(v=D.settings)},setDuration:function D(N){y&&y.readyState==="open"&&(N===null&&isNaN(N)||y.duration!==N&&(N!==1/0||v.get().streaming.buffer.mediaSourceDurationInfinity||(N=Math.pow(2,32)),(function($){let q=$.sourceBuffers;for(let R=0;R<q.length;R++)if(q[R].updating)return!0;return!1})(y)?setTimeout(D.bind(null,N),50):(_.info("Set MediaSource duration:"+N),y.duration=N)))},setSeekable:function(D,N){y&&typeof y.setLiveSeekableRange=="function"&&typeof y.clearLiveSeekableRange=="function"&&y.readyState==="open"&&D>=0&&D<N&&(y.clearLiveSeekableRange(),y.setLiveSeekableRange(D,N))},signalEndOfStream:function(D){if(!D||D.readyState!=="open")return;let N=D.sourceBuffers;for(let $=0;$<N.length;$++)if(N[$].updating||N[$].buffered.length===0)return;_.info("call to mediaSource endOfStream"),D.endOfStream()}},_=(0,l.default)(I).getInstance().getLogger(b),b}Fp.__dashjs_factory_name="MediaSourceController";var lx=n.default.getSingletonFactory(Fp);function zp(){const b="urn:mpeg:dash:event:2012",v="urn:mpeg:dash:event:callback:2015",I="discarded",M="updated",D="added",N=this.context,$=(0,m.default)(N).getInstance();let q,R,P,z,X,re,ie,J,ce,fe,me;function Ee(){if(!ie||!J)throw new Error("setConfig function has to be called previously")}function ne(){me=!1,P={},z={},X=null,fe=!1,re=Date.now()/1e3}function K(){try{if(!fe){fe=!0;const Ne=J.getTime();let ee=Ne-re;ee=re>0?Math.max(0,ee):0,B(z,ee,Ne),B(P,ee,Ne),j(z),j(P),re=Ne,fe=!1}}catch(Ne){fe=!1,R.error(Ne)}}function B(Ne,ee,ae){try{Te(Ne,function(le){if(le!==void 0){const ue=isNaN(le.duration)?0:le.duration;le.calculatedPresentationTime<=ae&&le.calculatedPresentationTime+ee+ue>=ae?Ue(le,g.default.EVENT_MODE_ON_START):(Re(ae,ue+ee,le.calculatedPresentationTime)||(function(pe){try{const W=pe.eventStream.period.start+pe.eventStream.period.duration;return pe.calculatedPresentationTime>W}catch(W){return R.error(W),!1}})(le))&&(R.debug(`Removing event ${le.id} from period ${le.eventStream.period.id} as it is expired or invalid`),(function(pe,W){try{const be=W.eventStream.schemeIdUri,we=W.eventStream.period.id,Ce=W.eventStream.value,ze=W.id;pe[we][be]=pe[we][be].filter((Fe=>Ce&&Fe.eventStream.value&&Fe.eventStream.value!==Ce||Fe.id!==ze)),pe[we][be].length===0&&delete pe[we][be]}catch(be){R.error(be)}})(Ne,le))}})}catch(de){R.error(de)}}function j(Ne){try{for(const ee in Ne)Ne.hasOwnProperty(ee)&&Object.keys(Ne[ee]).length===0&&delete Ne[ee]}catch(ee){R.error(ee)}}function Se(Ne,ee,ae=!1){const de=Ne.eventStream.schemeIdUri,le=Ne.eventStream.value,ue=Ne.id;let pe=I;ee[de]||(ee[de]=[]);const W=ee[de].findIndex((be=>(!le||be.eventStream.value&&be.eventStream.value===le)&&be.id===ue));if(W===-1)ee[de].push(Ne),Ne.triggeredReceivedEvent=!1,Ne.triggeredStartEvent=!1,pe=D;else if(ae){const be=ee[de][W];Ne.triggeredReceivedEvent=be.triggeredReceivedEvent,Ne.triggeredStartEvent=be.triggeredStartEvent,ee[de][W]=Ne,pe=M}return pe}function se(Ne){try{if(Ne.eventStream.value==1){const ee=Ne.calculatedPresentationTime;let ae;ae=Ne.calculatedPresentationTime==4294967295?NaN:Ne.calculatedPresentationTime+Ne.duration,$.trigger(g.default.MANIFEST_VALIDITY_CHANGED,{id:Ne.id,validUntil:ee,newDuration:ae,newManifestValidAfter:NaN},{mode:g.default.EVENT_MODE_ON_START})}}catch(ee){R.error(ee)}}function Ae(Ne){try{const ee=J.getTime();Te(Ne,(function(ae){const de=ae.eventStream&&ae.eventStream.period&&!isNaN(ae.eventStream.period.duration)?ae.eventStream.period.duration:NaN,le=ae.eventStream&&ae.eventStream.period&&!isNaN(ae.eventStream.period.start)?ae.eventStream.period.start:NaN;if(isNaN(de)||isNaN(le))return;const ue=ae.calculatedPresentationTime;Math.abs(ue-ee)<300&&Ue(ae,g.default.EVENT_MODE_ON_START)}))}catch(ee){R.error(ee)}}function Te(Ne,ee){try{if(Ne){const ae=Object.keys(Ne);for(let de=0;de<ae.length;de++){const le=Ne[ae[de]],ue=Object.keys(le);for(let pe=0;pe<ue.length;pe++)le[ue[pe]].forEach((W=>{W!==void 0&&ee(W)}))}}}catch(ae){R.error(ae)}}function Re(Ne,ee,ae){try{return Ne-ee>ae}catch(de){return R.error(de),!1}}function Ue(Ne,ee){try{const ae=J.getTime(),de=Ne.id;if(ee===g.default.EVENT_MODE_ON_RECEIVE&&!Ne.triggeredReceivedEvent)return R.debug(`Received event ${de}`),Ne.triggeredReceivedEvent=!0,void $.trigger(Ne.eventStream.schemeIdUri,{event:Ne},{mode:ee});Ne.triggeredStartEvent||(Ne.eventStream.schemeIdUri===b&&Ne.eventStream.value==1?Ne.duration===0&&Ne.presentationTimeDelta===0||(R.debug(`Starting manifest refresh event ${de} at ${ae}`),(function(){try{Ee(),ie.refreshManifest()}catch(le){R.error(le)}})()):Ne.eventStream.schemeIdUri===v&&Ne.eventStream.value==1?(R.debug(`Starting callback event ${de} at ${ae}`),(function(le){try{let ue=nn(N).create({});const pe=new bu({method:"get",url:le,responseType:"arraybuffer",customData:{}}),W=new Eu({request:pe});ue.load(pe,W)}catch(ue){R.error(ue)}})(Ne.messageData instanceof Uint8Array?et.default.uint8ArrayToString(Ne.messageData):Ne.messageData)):(R.debug(`Starting event ${de} from period ${Ne.eventStream.period.id} at ${ae}`),$.trigger(Ne.eventStream.schemeIdUri,{event:Ne},{mode:ee}),ce.get().streaming.events.deleteEventMessageDataTimeout>-1&&setTimeout((()=>{delete Ne.messageData,delete Ne.parsedMessageData}),ce.get().streaming.events.deleteEventMessageDataTimeout)),Ne.triggeredStartEvent=!0)}catch(ae){R.error(ae)}}return q={addInlineEvents:function(Ne,ee){try{if(Ee(),P[ee]||(P[ee]={}),Ne)for(let ae=0;ae<Ne.length;ae++){let de=Ne[ae];if(!Re(J.getTime(),isNaN(de.duration)?0:de.duration,de.calculatedPresentationTime)){let le=Se(de,P[ee],!0);le===D?(R.debug(`Added inline event with id ${de.id} from period ${ee}`),Ue(de,g.default.EVENT_MODE_ON_RECEIVE)):le===M&&R.debug(`Updated inline event with id ${de.id} from period ${ee}`)}}}catch(ae){throw ae}},addInbandEvents:function(Ne,ee){try{Ee(),z[ee]||(z[ee]={});for(let ae=0;ae<Ne.length;ae++){let de=Ne[ae];Re(J.getTime(),isNaN(de.duration)?0:de.duration,de.calculatedPresentationTime)||(Se(de,z[ee],!1)===D?(de.eventStream.schemeIdUri===b&&se(de),R.debug(`Added inband event with id ${de.id} from period ${ee}`),Ue(de,g.default.EVENT_MODE_ON_RECEIVE)):R.debug(`Inband event with scheme_id_uri ${de.eventStream.schemeIdUri}, value ${de.eventStream.value}, period id ${ee} and event id ${de.id} was ignored because it has been added before.`))}K()}catch(ae){throw ae}},getInbandEvents:function(){return z},getInlineEvents:function(){return P},start:function(){try{Ee(),R.debug("Start Event Controller");const Ne=ce.get().streaming.events.eventControllerRefreshDelay;me||isNaN(Ne)||(me=!0,X=setInterval(K,Ne))}catch(Ne){throw Ne}},setConfig:function(Ne){try{if(!Ne)return;Ne.manifestUpdater&&(ie=Ne.manifestUpdater),Ne.playbackController&&(J=Ne.playbackController),Ne.settings&&(ce=Ne.settings)}catch(ee){throw ee}},reset:function(){(function(){try{X!==null&&me&&(clearInterval(X),X=null,me=!1,(function(){try{Ae(z),Ae(P)}catch(Ne){R.error(Ne)}})())}catch(Ne){throw Ne}})(),ne()}},R=(0,l.default)(N).getInstance().getLogger(q),ne(),q}zp.__dashjs_factory_name="EventController";var cx=n.default.getSingletonFactory(zp),Es={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},Up=t(445),Bp=t(1923);function $p(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_,I,M,D,N,$,q,R,P,z,X,re,ie,J,ce,fe,me,Ee,ne,K,B,j,Se,se,Ae,Te,Re,Ue,Ne,ee,ae,de,le,ue,pe,W,be,we,Ce,ze,Fe,We,lt,St,Nt,ln;function Mt(){if(!(D&&D.hasOwnProperty("load")&&K&&K.hasOwnProperty("initialize")&&K.hasOwnProperty("reset")&&K.hasOwnProperty("getClientTimeOffset")&&N&&ne&&q&&le))throw new Error(h.default.MISSING_CONFIG_ERROR)}function sn(){(function(){try{const st=$.getStreamsInfo();if(!j&&st.length===0)throw new Error("There are no periods in the MPD");j&&st.length>0&&q.updateManifestUpdateInfo({currentTime:le.getTime(),buffered:de.getBufferRange(),presentationStartTime:st[0].start,clientTimeOffset:K.getClientTimeOffset()}),B.length>0&&(function(mn){mn.length!==0?B=B.filter((En=>{const Mn=mn.filter((Un=>Un.id===En.getId())).length>0||En.getId()===j.getId();return Mn||(w.debug(`Removing stream ${En.getId()}`),En.reset(!0),En=null),Mn})):w.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")})(st);const $t=[];for(let mn=0,En=st.length;mn<En;mn++){const Mn=st[mn];$t.push(On(Mn)),q.addManifestUpdateStreamInfo(Mn)}Promise.all($t).then((()=>new Promise(((mn,En)=>{j?mn():Pn(st,mn,En)})))).then((()=>{y.trigger(f.default.STREAMS_COMPOSED),Ln()})).catch((mn=>{throw mn}))}catch(st){ne.error(new Tt.default(Jt.MANIFEST_ERROR_ID_NOSTREAMS_CODE,st.message+" nostreamscomposed",N.getValue())),ee=!0,ei()}})()}function vn(){lt=!0}function On(st){let $t=vs(st.id);return $t?$t.updateData(st):($t=sx(b).create({manifestModel:N,mediaPlayerModel:pe,dashMetrics:q,manifestUpdater:M,adapter:$,timelineConverter:K,capabilities:_,capabilitiesFilter:I,errHandler:ne,baseURLController:X,segmentBaseController:re,textController:se,abrController:J,playbackController:le,throughputController:ce,eventController:me,mediaController:fe,protectionController:Se,videoModel:de,streamInfo:st,settings:We}),B.push($t),$t.initialize(),Promise.resolve())}function Pn(st,$t,mn){try{It();const En=q.getCurrentDVRInfo().range;if(En.end<En.start)return void(function(Un,dr,qi,Ii){St&&clearTimeout(St);const Ss=Math.min(1e3*(-1*(Un.end-Un.start)+2),2147483647);w.debug(`Waiting for ${Ss} ms before playback can start`),y.trigger(f.default.AST_IN_FUTURE,{delay:Ss}),St=setTimeout((()=>{Pn(dr,qi,Ii)}),Ss)})(En,st,$t,mn);We.get().streaming.applyProducerReferenceTime&&ue.calculateProducerReferenceTimeOffsets(st);const Mn=st[0].manifestInfo;if(We.get().streaming.applyServiceDescription&&ue.applyServiceDescription(Mn),$.getIsDynamic()){const Un=mr(0,Mn);le.computeAndSetLiveDelay(Un,Mn)}(We.get().streaming.applyContentSteering&&z.shouldQueryBeforeStart()?z.loadSteeringData():Promise.resolve()).then((()=>{const Un=N.getValue();Un&&X.update(Un),wn(),$t()})).catch((Un=>{w.error(Un),wn(),$t()}))}catch(En){mn(En)}}function wn(){const st=(function(){let En;return En=$.getIsDynamic()?(function(){let Mn;const Un=q.getCurrentDVRInfo();Mn=(Un&&Un.range?Un.range.end:0)-le.getOriginalLiveDelay();const dr=Un?Un.range:null;if(dr){if(isNaN(Nt)&&Nt.toString().indexOf("posix:")===-1){const Ii=Dn(!0);isNaN(Ii)||(w.info(`Start time from URI parameters: ${Ii}`),Mn=Math.min(Mn,Ii))}else{w.info(`Start time provided by the app: ${Nt}`);const Ii=Rn(!0,Nt);isNaN(Ii)||(Mn=Math.min(Mn,Ii))}const qi=We.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Mn=Math.max(Mn,dr.start+qi)}return Mn})():(function(){let Mn=Wa()[0].getStreamInfo().start;if(isNaN(Nt)){const Un=Dn(!1);isNaN(Un)||(w.info(`Start time from URI parameters: ${Un}`),Mn=Math.max(Mn,Un))}else{w.info(`Start time provided by the app: ${Nt}`);const Un=Rn(!1,Nt);isNaN(Un)||(Mn=Math.max(Mn,Un))}return Mn})(),En})();let $t=at(st);const mn=$t!==null?$t:B[0];y.trigger(f.default.INITIAL_STREAM_SWITCH,{startTime:st}),kn(mn,null,st),ze||(ze=setInterval((function(){!Ue&&le.getTimeToStreamEnd()<=0&&!le.isSeeking()&&y.trigger(f.default.PLAYBACK_ENDED,{isLast:xi().isLast})}),200))}function kn(st,$t,mn){try{if(Ue||!st||$t===st&&st.getIsActive())return;Ue=!0,y.trigger(f.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:$t?$t.getStreamInfo():null,toStreamInfo:st.getStreamInfo()});let En=!1,Mn=[],Un=zt($t);j=st,$t&&(En=Xt(st,$t),Mn=_t($t),$t.deactivate(En)),mn=isNaN(mn)?!En&&$t?st.getStreamInfo().start:NaN:mn,w.info(`Switch to stream ${st.getId()}. Seektime is ${mn}, current playback time is ${le.getTime()}. Seamless period switch is set to ${En}`),Fe=Fe.filter((dr=>dr.getId()!==j.getId())),le.initialize(xi(),!!$t),de.getElement()?nt({seekTime:mn,keepBuffers:En,sourceBufferSinksFromPreviousPeriod:Un,streamActivated:!1,representationsFromPreviousPeriod:Mn}):xt({seekTime:mn,keepBuffers:En,sourceBufferSinksFromPreviousPeriod:Un})}catch{Ue=!1}}function nt(st){let $t;function mn(){if(!ae||ae.readyState!=="open")return;w.debug("MediaSource is open!"),window.URL.revokeObjectURL($t),ae.removeEventListener("sourceopen",mn),ae.removeEventListener("webkitsourceopen",mn),Sn();const Mn=q.getCurrentDVRInfo();R.setSeekable(Mn.range.start,Mn.range.end),st.streamActivated?(isNaN(st.seekTime)||le.seek(st.seekTime,!0,!0),j.setMediaSource(ae).then((()=>{j.initializeForTextWithMediaSource(ae)}))):xt(st)}function En(){ae.addEventListener("sourceopen",mn,!1),ae.addEventListener("webkitsourceopen",mn,!1),$t=R.attachMediaSource(de),w.debug("MediaSource attached to element.  Waiting on open...")}ae?st.keepBuffers?xt(st):(R.detachMediaSource(de),En()):(ae=R.createMediaSource(),En())}function xt(st){const $t=st.representationsFromPreviousPeriod||[];j.activate(ae,st.sourceBufferSinksFromPreviousPeriod,$t).then((()=>{isNaN(st.seekTime)||(y.trigger(f.default.SEEK_TARGET,{time:st.seekTime},{streamId:j.getId()}),le.seek(st.seekTime,!1,!0),j.startScheduleControllers()),Ue=!1,y.trigger(f.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:xi()})}))}function _t(st){return(st?st.getStreamProcessors():[]).map(($t=>$t.getRepresentation()))}function zt(st){const $t=new Map;return st&&(st?st.getStreamProcessors():[]).forEach((mn=>{const En=mn.getBuffer();En&&$t.set(En.getType(),En)})),$t}function rn(st){const $t=at(st.seekTime);$t&&$t!==j?$t&&$t!==j&&(Cn($t),(function(mn,En){const Mn=mn&&!isNaN(mn.seekTime)?mn.seekTime:NaN,Un=j.getStreamProcessors().map((dr=>dr.prepareOuterPeriodPlaybackSeeking(mn)));Promise.all(Un).then((()=>{kn(En,j,Mn)})).catch((dr=>{ne.error(dr)}))})(st,$t)):(Cn(),(function(mn){j.getStreamProcessors().forEach((En=>En.prepareInnerPeriodPlaybackSeeking(mn))),Ra(Vr.USER_REQUEST_STOP_REASON)})(st)),wi(Aa.SEEK_START_REASON)}function Cn(st=null){gt()}function gt(){Fe&&Fe.length>0&&(Fe.forEach((st=>{st.deactivate(!0)})),Fe=[])}function Dt(st){if(st.newMediaInfo.streamInfo.id===j.getId()){if(gt(),We.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&st.oldMediaInfo&&st.oldMediaInfo.codec!==st.newMediaInfo.codec){const $t=le.getTime();return j.deactivate(!1),void nt({seekTime:$t,keepBuffers:!1,streamActivated:!1})}j.prepareTrackChange(st)}}function Xt(st,$t){try{return We.get().streaming.buffer.reuseExistingSourceBuffers&&(_.isProtectionCompatible($t.getStreamInfo(),st.getStreamInfo())||lt)&&_.supportsChangeType()&&We.get().streaming.buffer.useChangeType}catch{return!1}}function Ye(st,$t=null){if(!ae||st.getPreloaded()||!Xt(st,$t))return;const mn=_t($t),En=zt($t);st.startPreloading(ae,En,mn).then((()=>{Fe.push(st)}))}function at(st){if(isNaN(st))return null;const $t=B.length;for(let mn=0;mn<$t;mn++){const En=B[mn];if(st<parseFloat((En.getStartTime()+En.getDuration()).toFixed(5)))return En}return null}function It(){try{const st=$.getIsDynamic(),$t=$.getStreamsInfo()[0].manifestInfo,mn=le.getTime(),En=K.calcTimeShiftBufferWindow(B,st),Mn=tn();if(En.start===void 0||En.end===void 0)return;Mn&&Mn.length!==0?Mn.forEach((Un=>{q.addDVRInfo(Un.getType(),mn,$t,En)})):q.addDVRInfo(h.default.VIDEO,mn,$t,En)}catch{}}function ot(st){if(we&&Re){const $t=pe.getInitialBufferLevel(),mn=[h.default.TEXT];(isNaN($t)||$t<=le.getBufferLevel(mn)||$.getIsDynamic()&&$t>le.getLiveDelay())&&(we=!1,wi(Aa.INITIAL_PLAYOUT_START_REASON),le.play())}st&&st.mediaType&&q.addBufferLevel(st.mediaType,new Date,1e3*st.bufferLevel)}function Bt(st){st.streamInfo.id===j.getId()&&gt(),vs(st.streamInfo.id).prepareQualityChange(st)}function Vt(){if($.getIsDynamic()&&le.getOriginalLiveDelay()!==0&&j){const st=$.getStreamsInfo();if(st.length>0){const $t=st[0].manifestInfo,mn=mr(0,$t);le.computeAndSetLiveDelay(mn,$t)}}}function Le(){if(Zi()){const st=de.getPlaybackQuality();st&&q.addDroppedFrames(st)}}function ft(){w.debug("[onPlaybackStarted]"),!we&&be&&wi(Aa.RESUME_FROM_PAUSE_START_REASON),we&&(we=!1),Ce&&(Ce=!1,We.get().streaming.applyContentSteering&&!z.shouldQueryBeforeStart()&&z.loadSteeringData()),be=!1}function Kt(st){w.debug("[onPlaybackPaused]"),st.ended||(be=!0,Ra(Vr.USER_REQUEST_STOP_REASON))}function Yt(st){w.debug(`Stream with id ${st.streamInfo.id} finished buffering`);const $t=st.streamInfo.isLast;ae&&$t?(w.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),R.signalEndOfStream(ae)):Ln()}function Ln(){if(!j)return;if(!j.getHasFinishedBuffering())return void j.checkAndHandleCompletedBuffering();const st=(function(mn=null){try{const En=mn||j||null;if(En){const Mn=En.getStreamInfo();return B.filter((function(Un){const dr=Un.getStreamInfo();return dr.start>Mn.start&&Mn.id!==dr.id}))}}catch{return[]}})(j);let $t=0;for(;$t<st.length;){const mn=st[$t],En=$t===0?j:st[$t-1];!mn.getPreloaded()&&En.getHasFinishedBuffering()&&Ye(mn,En),$t+=1}}function Et(){ze&&(clearInterval(ze),ze=null)}function tn(){return j?j.getStreamProcessors():[]}function _n(st){if(j&&!j.getIsEndedEventSignaled()){j.setIsEndedEventSignaled(!0);const $t=(function(mn=null){const En=mn||j||null;if(!En)return null;const Mn=En.getStreamInfo(),Un=Mn.start;let dr=0,qi=-1,Ii=NaN;for(;dr<B.length;){const Ss=B[dr].getStreamInfo(),Bu=Ss.start-Un;Bu>0&&(isNaN(Ii)||Bu<Ii)&&Mn.id!==Ss.id&&(Ii=Bu,qi=dr),dr+=1}return qi>=0?B[qi]:null})();$t?(w.debug(`StreamController onEnded, found next stream with id ${$t.getStreamInfo().id}. Switching from ${j.getStreamInfo().id} to ${$t.getStreamInfo().id}`),kn($t,j,NaN)):(w.debug("StreamController no next stream found"),j.setIsEndedEventSignaled(!1)),Ra($t?Vr.END_OF_PERIOD_STOP_REASON:Vr.END_OF_CONTENT_STOP_REASON)}st&&st.isLast&&(Et(),z.stopSteeringRequestTimer())}function Sn(st){const $t=st||xi().manifestInfo.duration;R.setDuration($t)}function Dn(st){const $t=ie.getURIFragmentData();if(!$t||!$t.t)return NaN;const mn=Wa()[0].getStreamInfo().start;return $t.t=$t.t.split(",")[0],nr(st,$t.t,mn)}function Rn(st,$t){let mn=0;return st||(mn=Wa()[0].getStreamInfo().start),nr(st,$t,mn)}function nr(st,$t,mn){const En=$.getRegularPeriods()[0],Mn=$t.toString(),Un=Mn.indexOf("posix:")!==-1?Mn.substring(6)==="now"?Date.now()/1e3:parseFloat(Mn.substring(6)):NaN;return st&&!isNaN(Un)?K.calcPresentationTimeFromWallTime(new Date(1e3*Un),En):parseFloat(Mn)+mn}function mr(st,$t){try{let mn=NaN;return $t&&!isNaN($t.maxFragmentDuration)&&isFinite($t.maxFragmentDuration)?$t.maxFragmentDuration:isFinite(mn)?mn:NaN}catch{return NaN}}function Bi(){const st=N.getValue();X.initialize(st)}function $i(st){if(st.error)ee=!0,ei();else{w.info("Manifest updated... updating data system wide.");const $t=st.manifest;$.updatePeriods($t),I.filterUnsupportedFeatures($t).then((()=>{X.initialize($t);let mn=$.getUTCTimingSources();!$.getIsDynamic()||mn&&mn.length!==0||y.trigger(g.default.CONFORMANCE_VIOLATION,{level:Es.LEVELS.WARNING,event:Es.EVENTS.NO_UTC_TIMING_ELEMENT});let En=$.getIsDynamic()?mn.concat(W.getUTCTimingSources()):mn;P.attemptSync(En,$.getIsDynamic()),Te.createFinalQueryStrings($t)}))}}function Zi(){return!!j&&j.getHasVideoTrack()}function Ya(){return!!j&&j.getHasAudioTrack()}function Ra(st,$t){$t=$t||new Date,tn().forEach((mn=>{mn.finalisePlayList($t,st)})),q.addPlayList()}function wi(st){q.createPlaylistMetrics(1e3*le.getTime(),st)}function Ca(st){Se.updateKeyStatusesMap(st),(function(){const $t=tn();let mn=!1;$t.forEach((En=>{const Mn=En.getMediaInfo();!Mn||_.areKeyIdsUsable(Mn)?Mn&&_.areKeyIdsExpired(Mn)&&(function(Un){const dr=vs(Un.getStreamId());dr&&dr.triggerProtectionError({error:new Tt.default(Bp.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,Bp.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})})(En):(mn=!0,(function(Un){const dr=Un.getAllMediaInfos().filter((qi=>_.areKeyIdsUsable(qi)));if(dr&&dr.length!==0)fe.setTrack(dr[0],{replaceBuffer:!0});else{const qi=Un.getType();ne.error(new Tt.default(Jt.NO_SUPPORTED_KEY_IDS,`Type: ${qi}: ${Jt.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}})(En))})),mn&&(le.getTime()===0?y.once(g.default.FRAGMENT_LOADING_COMPLETED,(()=>{_i()}),v):le.isProgressing(500).then((En=>{En||_i()})))})()}function _i(){const st=le.getTime();le.seek(st+.01,!1,!1)}function ji(st){if(!st.error)return;let $t;switch(st.error.code){case 1:$t="MEDIA_ERR_ABORTED";break;case 2:$t="MEDIA_ERR_NETWORK";break;case 3:$t="MEDIA_ERR_DECODE",ln.counts.mediaErrorDecode+=1;break;case 4:$t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:$t="MEDIA_ERR_ENCRYPTED";break;default:$t="UNKNOWN"}$t==="MEDIA_ERR_DECODE"&&We.get().errors.recoverAttempts.mediaErrorDecode>=ln.counts.mediaErrorDecode?(function(){w.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const mn=le.getTime();j.deactivate(!1),w.info(`MediaSource has been resetted. Resuming playback from time ${mn}`),nt({seekTime:mn,keepBuffers:!1,streamActivated:!1})})():(Ne=!0,st.error.message&&($t+=" ("+st.error.message+")"),st.error.msExtendedCode&&($t+=" (0x"+(st.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),w.fatal("Video Element Error: "+$t),st.error&&w.fatal(st.error),ne.error(new Tt.default(st.error.code,$t)),ei())}function xi(){return j?j.getStreamInfo():null}function vs(st){for(let $t=0,mn=B.length;$t<mn;$t++)if(B[$t].getId()===st)return B[$t];return null}function Cl(st){isNaN(st.newDuration)||Sn(st.newDuration)}function kl(){B=[],Nt=NaN,Se=null,Ue=!1,j=null,Ne=!1,ee=!1,we=!0,Ce=!0,be=!1,Re=!0,ze=null,lt=!1,Fe=[],St=null,ln={counts:{mediaErrorDecode:0}}}function ei(){Mt(),P.reset(),Ra(Ne||ee?Vr.FAILURE_STOP_REASON:Vr.USER_REQUEST_STOP_REASON);for(let st=0,$t=B?B.length:0;st<$t;st++)B[st].reset(Ne);y.off(g.default.PLAYBACK_TIME_UPDATED,Le,v),y.off(g.default.PLAYBACK_SEEKING,rn,v),y.off(g.default.PLAYBACK_ERROR,ji,v),y.off(g.default.PLAYBACK_STARTED,ft,v),y.off(g.default.PLAYBACK_PAUSED,Kt,v),y.off(g.default.PLAYBACK_ENDED,_n,v),y.off(g.default.METRIC_ADDED,Ts,v),y.off(g.default.MANIFEST_VALIDITY_CHANGED,Cl,v),y.off(g.default.BUFFER_LEVEL_UPDATED,ot,v),y.off(g.default.QUALITY_CHANGE_REQUESTED,Bt,v),y.off(g.default.CONTENT_STEERING_REQUEST_COMPLETED,Bi,v),f.default.KEY_SESSION_UPDATED&&y.off(f.default.KEY_SESSION_UPDATED,vn,v),y.off(f.default.MANIFEST_UPDATED,$i,v),y.off(f.default.STREAM_BUFFERING_COMPLETED,Yt,v),y.off(f.default.TIME_SYNCHRONIZATION_COMPLETED,sn,v),y.off(f.default.CURRENT_TRACK_CHANGED,Dt,v),y.off(f.default.SETTING_UPDATED_LIVE_DELAY,Vt,v),y.off(f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Vt,v),y.off(Up.default.INTERNAL_KEY_STATUSES_CHANGED,Ca,v),X.reset(),M.reset(),me.reset(),q.clearAllCurrentMetrics(),N.setValue(null),D.reset(),K.reset(),Ee.reset(),ae&&(R.detachMediaSource(de),ae=null),de=null,Se&&(Se=null,Ae=null,N.getValue()&&y.trigger(f.default.PROTECTION_DESTROYED,{data:N.getValue().url})),Et(),y.trigger(f.default.STREAM_TEARDOWN_COMPLETE),kl()}function Ts(st){if(st.metric===o.DVR_INFO){const $t=Ya()?h.default.AUDIO:h.default.VIDEO;st.mediaType===$t&&R.setSeekable(st.value.range.start,st.value.range.end)}}function Wa(){return B}return v={addDVRMetric:It,getActiveStream:function(){return j},getActiveStreamInfo:xi,getActiveStreamProcessors:tn,getAutoPlay:function(){return Re},getHasMediaOrInitialisationError:function(){return Ne||ee},getInitialPlayback:function(){return we},getIsStreamSwitchInProgress:function(){return Ue},getStreamById:vs,getStreamForTime:at,getStreams:Wa,getTimeRelativeToStreamId:function(st,$t){let mn=null,En=0,Mn=0,Un=null;for(let dr=0;dr<B.length;dr++){if(mn=B[dr],Mn=mn.getStartTime(),Un=mn.getDuration(),Number.isFinite(Mn)&&(En=Mn),mn.getId()===$t)return st-En;Number.isFinite(Un)&&(En+=Un)}return null},hasAudioTrack:Ya,hasVideoTrack:Zi,initialize:function(st,$t){Mt(),Re=st,Ae=$t,K.initialize(),M=Kg(b).create(),M.setConfig({manifestModel:N,adapter:$,manifestLoader:D,errHandler:ne,settings:We,contentSteeringController:z}),M.initialize(),me=cx(b).getInstance(),me.setConfig({manifestUpdater:M,playbackController:le,settings:We}),me.start(),Te=rg(b).getInstance(),P.setConfig({dashMetrics:q,baseURLController:X,errHandler:ne,settings:We}),P.initialize(),R.setConfig({settings:We}),Se&&(y.trigger(f.default.PROTECTION_CREATED,{controller:Se}),Se.setMediaElement(de.getElement()),Ae&&Se.setProtectionData(Ae)),y.on(g.default.PLAYBACK_TIME_UPDATED,Le,v),y.on(g.default.PLAYBACK_SEEKING,rn,v),y.on(g.default.PLAYBACK_ERROR,ji,v),y.on(g.default.PLAYBACK_STARTED,ft,v),y.on(g.default.PLAYBACK_PAUSED,Kt,v),y.on(g.default.PLAYBACK_ENDED,_n,v),y.on(g.default.METRIC_ADDED,Ts,v),y.on(g.default.MANIFEST_VALIDITY_CHANGED,Cl,v),y.on(g.default.BUFFER_LEVEL_UPDATED,ot,v),y.on(g.default.QUALITY_CHANGE_REQUESTED,Bt,v),y.on(g.default.CONTENT_STEERING_REQUEST_COMPLETED,Bi,v),f.default.KEY_SESSION_UPDATED&&y.on(f.default.KEY_SESSION_UPDATED,vn,v),y.on(f.default.MANIFEST_UPDATED,$i,v),y.on(f.default.STREAM_BUFFERING_COMPLETED,Yt,v),y.on(f.default.TIME_SYNCHRONIZATION_COMPLETED,sn,v),y.on(f.default.CURRENT_TRACK_CHANGED,Dt,v),y.on(f.default.SETTING_UPDATED_LIVE_DELAY,Vt,v),y.on(f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Vt,v),y.on(Up.default.INTERNAL_KEY_STATUSES_CHANGED,Ca,v)},load:function(st,$t=NaN){Mt(),Nt=$t,D.load(st)},loadWithManifest:function(st,$t=NaN){(function(){if(!M||!M.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),Nt=$t,M.setManifest(st)},refreshManifest:function(){M.getIsUpdating()||M.refreshManifest()},reset:ei,setConfig:function(st){st&&(st.capabilities&&(_=st.capabilities),st.capabilitiesFilter&&(I=st.capabilitiesFilter),st.manifestLoader&&(D=st.manifestLoader),st.manifestModel&&(N=st.manifestModel),st.mediaPlayerModel&&(pe=st.mediaPlayerModel),st.customParametersModel&&(W=st.customParametersModel),st.protectionController&&(Se=st.protectionController),st.adapter&&($=st.adapter),st.dashMetrics&&(q=st.dashMetrics),st.errHandler&&(ne=st.errHandler),st.timelineConverter&&(K=st.timelineConverter),st.videoModel&&(de=st.videoModel),st.playbackController&&(le=st.playbackController),st.throughputController&&(ce=st.throughputController),st.serviceDescriptionController&&(ue=st.serviceDescriptionController),st.contentSteeringController&&(z=st.contentSteeringController),st.textController&&(se=st.textController),st.abrController&&(J=st.abrController),st.mediaController&&(fe=st.mediaController),st.settings&&(We=st.settings),st.baseURLController&&(X=st.baseURLController),st.uriFragmentModel&&(ie=st.uriFragmentModel),st.segmentBaseController&&(re=st.segmentBaseController),st.manifestUpdater&&(M=st.manifestUpdater))},setProtectionData:function(st){Ae=st,Se&&Se.setProtectionData(Ae)},switchToVideoElement:function(st){j&&(le.initialize(xi()),nt({seekTime:st,keepBuffers:!1,streamActivated:!0}))}},w=(0,l.default)(b).getInstance().getLogger(v),P=ox(b).getInstance(),R=lx(b).getInstance(),Ee=Lu(b).getInstance(),kl(),v}$p.__dashjs_factory_name="StreamController";var jp=n.default.getSingletonFactory($p),ux=class extends El{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},dx=t(7377);function qp(){let b,y=0;function v(N){let $="";for(let q=0;q<N.length;++q)$+=N[q].uchar;return $.length-$.replace(/^\s+/,"").length}function w(N){return"left: "+3.125*N.x+"%; top: "+6.66*N.y1+"%; width: "+(100-3.125*N.x)+"%; height: "+6.66*Math.max(N.y2-1-N.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function _(N){return N==="red"?"rgb(255, 0, 0)":N==="green"?"rgb(0, 255, 0)":N==="blue"?"rgb(0, 0, 255)":N==="cyan"?"rgb(0, 255, 255)":N==="magenta"?"rgb(255, 0, 255)":N==="yellow"?"rgb(255, 255, 0)":N==="white"?"rgb(255, 255, 255)":N==="black"?"rgb(0, 0, 0)":N}function I(N,$){const q=N.videoHeight/15;return $?"font-size: "+q+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+($.foreground?_($.foreground):"rgb(255, 255, 255)")+"; font-style: "+($.italics?"italic":"normal")+"; text-decoration: "+($.underline?"underline":"none")+"; white-space: pre; background-color: "+($.background?_($.background):"transparent")+";":"font-size: "+q+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function M(N){return N.replace(/^\s+/g,"")}function D(N){return N.replace(/\s+$/g,"")}return b={createHTMLCaptionsFromScreen:function(N,$,q,R){let P=null,z=null,X=!1,re=-1,ie={start:$,end:q,spans:[]},J="style_cea608_white_black";const ce={},fe={},me=[];let Ee,ne;for(Ee=0;Ee<15;++Ee){const B=R.rows[Ee];let j="",Se=null;if(B.isEmpty()===!1){const se=v(B.chars);P===null&&(P={x:se,y1:Ee,y2:Ee+1,p:[]}),se!==re&&X&&(P.p.push(ie),ie={start:$,end:q,spans:[]},P.y2=Ee,P.name="region_"+P.x+"_"+P.y1+"_"+P.y2,ce.hasOwnProperty(P.name)===!1?(me.push(P),ce[P.name]=P):(z=ce[P.name],z.p.contat(P.p)),P={x:se,y1:Ee,y2:Ee+1,p:[]});for(let Ae=0;Ae<B.chars.length;++Ae){const Te=B.chars[Ae],Re=Te.penState;if(Se===null||!Re.equals(Se)){j.trim().length>0&&(ie.spans.push({name:J,line:j,row:Ee}),j="");let Ue="style_cea608_"+Re.foreground+"_"+Re.background;Re.underline&&(Ue+="_underline"),Re.italics&&(Ue+="_italics"),fe.hasOwnProperty(Ue)||(fe[Ue]=JSON.parse(JSON.stringify(Re))),Se=Re,J=Ue}j+=Te.uchar}j.trim().length>0&&ie.spans.push({name:J,line:j,row:Ee}),X=!0,re=se}else X=!1,re=-1,P&&(P.p.push(ie),ie={start:$,end:q,spans:[]},P.y2=Ee,P.name="region_"+P.x+"_"+P.y1+"_"+P.y2,ce.hasOwnProperty(P.name)===!1?(me.push(P),ce[P.name]=P):(z=ce[P.name],z.p.contat(P.p)),P=null)}P&&(P.p.push(ie),P.y2=Ee+1,P.name="region_"+P.x+"_"+P.y1+"_"+P.y2,ce.hasOwnProperty(P.name)===!1?(me.push(P),ce[P.name]=P):(z=ce[P.name],z.p.contat(P.p)),P=null);const K=[];for(Ee=0;Ee<me.length;++Ee){const B=me[Ee],j="sub_cea608_"+y++,Se=document.createElement("div");Se.id=j;const se=w(B);Se.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+se;const Ae=document.createElement("div");Ae.className="paragraph bodyStyle",Ae.style.cssText=I(N);const Te=document.createElement("div");Te.className="cueUniWrapper",Te.style.cssText="unicode-bidi: normal; direction: ltr;";for(let Ue=0;Ue<B.p.length;++Ue){const Ne=B.p[Ue];let ee=0;for(ne=0;ne<Ne.spans.length;++ne){let ae=Ne.spans[ne];if(ae.line.length>0){if(ne!==0&&ee!=ae.row){const pe=document.createElement("br");pe.className="lineBreak",Te.appendChild(pe)}let de=!1;ee===ae.row&&(de=!0),ee=ae.row;const le=fe[ae.name],ue=document.createElement("span");ue.className="spanPadding "+ae.name+" customSpanColor",ue.style.cssText=I(N,le),ne!==0&&de?ne===Ne.spans.length-1?ue.textContent=D(ae.line):ue.textContent=ae.line:Ne.spans.length>1&&ne<Ne.spans.length-1&&ae.row===Ne.spans[ne+1].row?ue.textContent=M(ae.line):ue.textContent=ae.line.trim(),Te.appendChild(ue)}}}Ae.appendChild(Te),Se.appendChild(Ae);const Re={bodyStyle:["%",90]};for(const Ue in fe)fe.hasOwnProperty(Ue)&&(Re[Ue]=["%",90]);K.push({type:"html",start:$,end:q,cueHTMLElement:Se,cueID:j,cellResolution:[32,15],isFromCEA608:!0,fontSize:Re,lineHeight:{},linePadding:{}})}return K}},b}qp.__dashjs_factory_name="EmbeddedTextHtmlRender";var fx=n.default.getSingletonFactory(qp),Il=class{constructor(){this.time=null,this.verboseLevel=0}log(b,y){if(this.verboseLevel>=b){const v=typeof y=="function"?y():y;console.log(`${this.time} [${b}] ${v}`)}}},Gp=class{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(b){for(const y of["foreground","underline","italics","background","flash"])Object.prototype.hasOwnProperty.call(b,y)&&(this[y]=b[y])}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(b){return this.foreground===b.foreground&&this.underline===b.underline&&this.italics===b.italics&&this.background===b.background&&this.flash===b.flash}copy(b){this.foreground=b.foreground,this.underline=b.underline,this.italics=b.italics,this.background=b.background,this.flash=b.flash}},hx=class{constructor(){this.uchar=" ",this.penState=new Gp}reset(){this.uchar=" ",this.penState.reset()}setChar(b,y){this.uchar=b,this.penState.copy(y)}setPenState(b){this.penState.copy(b)}equals(b){return this.uchar===b.uchar&&this.penState.equals(b.penState)}copy(b){this.uchar=b.uchar,this.penState.copy(b.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}};const da=100,mx={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499};function Hp(b){return String.fromCharCode(mx[b]||b)}var gx=class{constructor(b=new Il){this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new Gp;for(let y=0;y<da;y++)this.chars.push(new hx);this.logger=b}equals(b){for(let y=0;y<da;y++)if(!this.chars[y].equals(b.chars[y]))return!1;return!0}copy(b){for(let y=0;y<da;y++)this.chars[y].copy(b.chars[y])}isEmpty(){let b=!0;for(let y=0;y<da;y++)if(!this.chars[y].isEmpty()){b=!1;break}return b}setCursor(b){this.pos!==b&&(this.pos=b),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>da&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=da)}moveCursor(b){const y=this.pos+b;if(b>1)for(let v=this.pos+1;v<y+1;v++)this.chars[v].setPenState(this.currPenState);this.setCursor(y)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(b){b>=144&&this.backSpace();const y=Hp(b);this.pos>=da?this.logger.log(0,(()=>"Cannot insert "+b.toString(16)+" ("+y+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(y,this.currPenState),this.moveCursor(1))}clearFromPos(b){let y;for(y=b;y<da;y++)this.chars[y].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const b=[];let y=!0;for(let v=0;v<da;v++){const w=this.chars[v].uchar;w!==" "&&(y=!1),b.push(w)}return y?"":b.join("")}setPenStyles(b){this.currPenState.setStyles(b),this.chars[this.pos].setPenState(this.currPenState)}};const Va=15;var Fu=class{constructor(b=new Il){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let y=0;y<Va;y++)this.rows.push(new gx(b));this.logger=b}reset(){for(let b=0;b<Va;b++)this.rows[b].clear();this.currRow=14}equals(b){let y=!0;for(let v=0;v<Va;v++)if(!this.rows[v].equals(b.rows[v])){y=!1;break}return y}copy(b){for(let y=0;y<Va;y++)this.rows[y].copy(b.rows[y])}isEmpty(){let b=!0;for(let y=0;y<Va;y++)if(!this.rows[y].isEmpty()){b=!1;break}return b}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(b){this.rows[this.currRow].insertChar(b)}setPen(b){this.rows[this.currRow].setPenStyles(b)}moveCursor(b){this.rows[this.currRow].moveCursor(b)}setCursor(b){this.logger.log(2,"setCursor: "+b),this.rows[this.currRow].setCursor(b)}setPAC(b){this.logger.log(2,(()=>"pacData = "+JSON.stringify(b)));let y=b.row-1;if(this.nrRollUpRows&&y<this.nrRollUpRows-1&&(y=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==y){for(let M=0;M<Va;M++)this.rows[M].clear();const _=this.currRow+1-this.nrRollUpRows,I=this.lastOutputScreen;if(I){const M=I.rows[_].cueStartTime,D=this.logger.time;if(M!==null&&D!==null&&M<D)for(let N=0;N<this.nrRollUpRows;N++)this.rows[y-this.nrRollUpRows+N+1].copy(I.rows[_+N])}}this.currRow=y;const v=this.rows[this.currRow];if(b.indent!==null){const _=b.indent,I=Math.max(_-1,0);v.setCursor(b.indent),b.color=v.chars[I].penState.foreground}const w={foreground:b.color,underline:b.underline,italics:b.italics,background:"black",flash:!1};this.setPen(w)}setBkgData(b){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(b))),this.backSpace(),this.setPen(b),this.insertChar(32)}setRollUpRows(b){this.nrRollUpRows=b}rollUp(){if(this.nrRollUpRows===null)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const b=this.currRow+1-this.nrRollUpRows,y=this.rows.splice(b,1)[0];y.clear(),this.rows.splice(this.currRow,0,y),this.logger.log(2,"Rolling up")}getDisplayText(b){b=b||!1;const y=[];let v="",w=-1;for(let _=0;_<Va;_++){const I=this.rows[_].getTextString();I&&(w=_+1,b?y.push("Row "+w+": '"+I+"'"):y.push(I.trim()))}return y.length>0&&(v=b?"["+y.join(" | ")+"]":y.join(`
`)),v}getTextAndFormat(){return this.rows}},Vp=class{constructor(b,y,v=new Il){this.chNr=b,this.outputFilter=y,this.mode=null,this.displayedMemory=new Fu(v),this.nonDisplayedMemory=new Fu(v),this.lastOutputScreen=new Fu(v),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=v,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter?.reset?.(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(b){this.outputFilter=b}setPAC(b){this.writeScreen.setPAC(b)}setBkgData(b){this.writeScreen.setBkgData(b)}setMode(b){b!==this.mode&&(this.mode=b,this.logger.log(2,(()=>"MODE="+b)),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=b)}insertChars(b){for(const v of b)this.writeScreen.insertChar(v);const y=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>y+": "+this.writeScreen.getDisplayText(!0))),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(b){this.logger.log(2,"RU("+b+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(b)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const b=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=b,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(b){this.logger.log(2,"TO("+b+") - Tab Offset"),this.writeScreen.moveCursor(b)}ccMIDROW(b){const y={flash:!1};y.underline=b%2==1,y.italics=b>=46,y.italics?y.foreground="white":y.foreground=["white","green","blue","cyan","red","yellow","magenta"][Math.floor(b/2)-16],this.logger.log(2,"MIDROW: "+JSON.stringify(y)),this.writeScreen.setPen(y)}outputDataUpdate(b=!1){const y=this.logger.time;y!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,y,this.lastOutputScreen),b&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:y):this.cueStartTime=y,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(b){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,b,this.displayedMemory),this.cueStartTime=b))}};const px=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function yx(b,y,v){return v.a===b&&v.b===y}function Ka(b){const y=[];for(const v of b)y.push(v.toString(16));return y}const bx={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ex={25:2,26:4,29:6,30:8,31:10,27:13,28:15},vx={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Tx={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function Al(b,y,v){v.a=b,v.b=y}var Kp=class{constructor(b,y,v){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const w=this.logger=new Il;this.channels=[null,new Vp(b,y,w),new Vp(b+1,v,w)]}addData(b,y){this.lastTime=b,this.logger.time=b;for(let v=0;v<y.length;v+=2){const w=127&y[v],_=127&y[v+1];let I=!1,M=null;if(this.lastTime!==null&&(b=this.lastTime+.5*v*1001/3e4,this.logger.time=b),w===0&&_===0)continue;this.logger.log(3,(()=>"["+Ka([y[v],y[v+1]])+"] -> ("+Ka([w,_])+")"));const D=this.cmdHistory;if(w>=16&&w<=31){if(yx(w,_,D)){Al(null,null,D),this.logger.log(3,(()=>"Repeated command ("+Ka([w,_])+") is dropped"));continue}Al(w,_,this.cmdHistory),I=this.parseCmd(w,_),I||(I=this.parseMidrow(w,_)),I||(I=this.parsePAC(w,_)),I||(I=this.parseBackgroundAttributes(w,_))}else Al(null,null,D);if(!I&&(M=this.parseChars(w,_),M.length)){const N=this.currentChannel;N&&N>0?this.channels[N].insertChars(M):this.logger.log(2,"No channel found yet. TEXT-MODE?")}I||M||this.logger.log(2,(()=>"Couldn't parse cleaned data "+Ka([w,_])+" orig: "+Ka([y[v],y[v+1]])))}}parseCmd(b,y){if(!((b===20||b===28||b===21||b===29)&&y>=32&&y<=47||(b===23||b===31)&&y>=33&&y<=35))return!1;const v=b===20||b===21||b===23?1:2,w=this.channels[v];return b===20||b===21||b===28||b===29?y===32?w.ccRCL():y===33?w.ccBS():y===34?w.ccAOF():y===35?w.ccAON():y===36?w.ccDER():y===37?w.ccRU(2):y===38?w.ccRU(3):y===39?w.ccRU(4):y===40?w.ccFON():y===41?w.ccRDC():y===42?w.ccTR():y===43?w.ccRTD():y===44?w.ccEDM():y===45?w.ccCR():y===46?w.ccENM():y===47&&w.ccEOC():w.ccTO(y-32),this.currentChannel=v,!0}parseMidrow(b,y){let v=0;if((b===17||b===25)&&y>=32&&y<=47){if(v=b===17?1:2,v!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const w=this.channels[v];return!!w&&(w.ccMIDROW(y),this.logger.log(3,(()=>"MIDROW ("+Ka([b,y])+")")),!0)}return!1}parsePAC(b,y){let v;if(!((b>=17&&b<=23||b>=25&&b<=31)&&y>=64&&y<=127||(b===16||b===24)&&y>=64&&y<=95))return!1;const w=b<=23?1:2;v=y>=64&&y<=95?w===1?vx[b]:Tx[b]:w===1?bx[b]:Ex[b];const _=this.channels[w];return!!_&&(_.setPAC(this.interpretPAC(v,y)),this.currentChannel=w,!0)}interpretPAC(b,y){let v;const w={color:null,italics:!1,indent:null,underline:!1,row:b};return v=y>95?y-96:y-64,w.underline=!(1&~v),v<=13?w.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(v/2)]:v<=15?(w.italics=!0,w.color="white"):w.indent=4*Math.floor((v-16)/2),w}parseChars(b,y){let v,w=[],_=null;if(b>=25?(v=2,_=b-8):(v=1,_=b),_>=17&&_<=19){let I;I=_===17?y+80:_===18?y+112:y+144,this.logger.log(2,(()=>"Special char '"+Hp(I)+"' in channel "+v)),w=[I]}else b>=32&&b<=127&&(w=y===0?[b]:[b,y]);return w&&this.logger.log(3,(()=>"Char codes =  "+Ka(w).join(","))),w}parseBackgroundAttributes(b,y){if(!((b===16||b===24)&&y>=32&&y<=47||(b===23||b===31)&&y>=45&&y<=47))return!1;let v;const w={};b===16||b===24?(v=Math.floor((y-32)/2),w.background=px[v],y%2==1&&(w.background=w.background+"_semi")):y===45?w.background="transparent":(w.foreground="black",y===47&&(w.underline=!0));const _=b<=23?1:2;return this.channels[_].setBkgData(w),!0}reset(){for(let b=0;b<Object.keys(this.channels).length;b++){const y=this.channels[b];y&&y.reset()}Al(null,null,this.cmdHistory)}cueSplitAtTime(b){for(const y of this.channels)y&&y.cueSplitAtTime(b)}};function Sx(b,y,v){const w=[];for(let _=y;_<v;_++)_+2<v&&b.getUint8(_)===0&&b.getUint8(_+1)===0&&b.getUint8(_+2)===3?(w.push(0),w.push(0),_+=2):w.push(b.getUint8(_));return new DataView(new Uint8Array(w).buffer)}function wx(b,y,v,w){return!(b!==4||y<8)&&v.getUint8(w)===181&&v.getUint16(w+1)===49&&v.getUint32(w+3)===1195456820&&v.getUint8(w+7)===3}function _x(b,y){return(127&b)>0||(127&y)>0}function xx(b,y){let v=0;for(;v<b.byteLength;){let _,I=0,M=0;do I+=_=b.getUint8(v++);while(_===255);do M+=_=b.getUint8(v++);while(_===255);if(wx(I,M,b,v)){const D=v+10,N=D+3*(31&b.getUint8(D-2));for(let $=D;$<N;$+=3){const q=b.getUint8($);if(4&q){const R=3&q;if((w=R)===0||w===1){const P=b.getUint8($+1),z=b.getUint8($+2);_x(P,z)&&y[R].push(P,z)}}}}v+=M}var w}function Ix(b,y,v){let w=0,_=0;const I=[[],[]];for(let M=y;M<y+v-5&&(w=b.getUint32(M),_=31&b.getUint8(M+4),!(M+5+w>y+v));M++)_===6&&M+5+w<=b.byteLength&&xx(Sx(b,M+5,M+5+w),I),M+=w+3;return I}function Yp(b){const y=b.errHandler,v=b.manifestModel,w=b.mediaController,_=b.videoModel,I=b.textTracks,M=b.vttParser,D=b.vttCustomRenderingParser,N=b.ttmlParser,$=b.streamInfo,q=b.settings,R=this.context,P=(0,m.default)(R).getInstance();let z,X,re,ie,J,ce,fe,me,Ee,ne,K,B,j,Se,se,Ae,Te,Re=!1;function Ue(){ce=null,me=NaN,Ee=[],ne=null,fe=!1,J=[],ie=null}function Ne(we){const Ce={};Ce[ve.default.SUBTITLE]="subtitles",Ce[ve.default.CAPTION]="captions",Ce[ve.default.FORCED_SUBTITLE]="subtitles";const ze=new ux;for(let Fe in we)ze[Fe]=we[Fe];ze.defaultTrack=(function(Fe){let We=!1;return B.length>1&&Fe.isEmbedded?We=Fe.id&&Fe.id===h.default.CC1:B.length===1?Fe.id&&typeof Fe.id=="string"&&Fe.id.substring(0,2)==="CC"&&(We=!0):B.length===0&&(We=Fe.index===J[0].index),We})(we),ze.isTTML=(function(Fe){return Fe.codec&&Fe.codec.search(h.default.STPP)>=0||Fe.mimeType&&Fe.mimeType.search(h.default.TTML)>=0})(we),ze.kind=(function(Fe,We){let lt=Fe.roles&&Fe.roles.length>0?We[Fe.roles[0].value]:We.caption;return lt=Object.values(We).includes(lt)?lt:We.caption,lt})(we,Ce),I.addTextTrackInfo(ze)}function ee(we){const Ce=we.chunk;Ce.representation.mediaInfo.embeddedCaptions&&de(Ce.bytes,Ce)}function ae(we){K=we}function de(we,Ce){const ze=Ce.representation.mediaInfo,Fe=ze.type,We=ze.mimeType,lt=ze.codec||We;lt?ze.codec.indexOf("application/mp4")!==-1?(function(St,Nt,ln){let Mt,sn;if(Nt.segmentType==="InitializationSegment")fe=!0,me=re.getMediaTimescaleFromMoov(St);else{if(!fe)return;sn=re.getSamplesInfo(St),Mt=sn.sampleList,Mt.length>0&&(ne=Mt[0].cts-Nt.start*me),ln.search(h.default.STPP)>=0?(function(vn,On,Pn){let wn,kn;for(ie=ie!==null?ie:pe(Pn),wn=0;wn<On.length;wn++){const nt=On[wn],xt=nt.cts,_t=ue(),zt=_t+xt/me,rn=zt+nt.duration/me;z.buffered.add(zt,rn);const Cn=new DataView(vn,nt.offset,nt.subSizes[0]);let gt=mo.Utils.dataViewToString(Cn,h.default.UTF8);const Dt=[];let Xt=nt.offset+nt.subSizes[0];for(kn=1;kn<nt.subSizes.length;kn++){const Ye=new Uint8Array(vn,Xt,nt.subSizes[kn]),at=String.fromCharCode.apply(null,Ye);Dt.push(at),Xt+=nt.subSizes[kn]}try{const Ye=v.getValue().ttmlTimeIsRelative?xt/me:0,at=ie.parse(gt,Ye,xt/me,(xt+nt.duration)/me,Dt);I.addCaptions(K,_t,at)}catch(Ye){ce.removeExecutedRequestsBeforeTime(),W(),X.error("TTML parser error: "+Ye)}}})(St,Mt,ln):(function(vn,On){let Pn,wn,kn;const nt=[];for(Pn=0;Pn<On.length;Pn++){const xt=On[Pn];xt.cts-=ne;const _t=ue()+xt.cts/me,zt=_t+xt.duration/me;z.buffered.add(_t,zt);const rn=vn.slice(xt.offset,xt.offset+xt.size),Cn=mo.parseBuffer(rn);for(wn=0;wn<Cn.boxes.length;wn++){const gt=Cn.boxes[wn];if(X.debug("VTT box1: "+gt.type),gt.type!=="vtte"&&gt.type==="vttc"){X.debug("VTT vttc boxes.length = "+gt.boxes.length);let Dt={styles:{}};for(kn=0;kn<gt.boxes.length;kn++){const Xt=gt.boxes[kn];if(X.debug("VTT box2: "+Xt.type),Xt.type==="payl")Dt.start=xt.cts/me,Dt.end=(xt.cts+xt.duration)/me,Dt.data=Xt.cue_text;else if(Xt.type==="sttg"&&Xt.settings&&Xt.settings!=="")try{const Ye=Xt.settings.split(" ");Dt.styles=M.getCaptionStyles(Ye)}catch{}}Dt&&Dt.data&&(nt.push(Dt),X.debug(`VTT  ${Dt.start} - ${Dt.end} :  ${Dt.data}`))}}}nt.length>0&&I.addCaptions(K,0,nt)})(St,Mt)}})(we,Ce,lt):Fe===h.default.VIDEO?(function(St,Nt){let ln,Mt;if(Nt.segmentType===Q.HTTPRequest.INIT_SEGMENT_TYPE)j===0&&(j=re.getMediaTimescaleFromMoov(St));else if(Nt.segmentType===Q.HTTPRequest.MEDIA_SEGMENT_TYPE){if(j===0)return void X.warn("CEA-608: No timescale for embeddedTextTrack yet");Mt=re.getSamplesInfo(St);const sn=Mt.lastSequenceNumber,vn=Math.trunc(Nt.start),On=Math.trunc(Nt.end);if(Ae[0]||Ae[1]||(function(){let Pn;for(let wn=0;wn<B.length;wn++){if(Pn=I.getTrackIdxForId(B[wn].id),Pn===-1)return void X.warn("CEA-608: data before track is ready.");const kn=le(Pn);Ae[wn]=new Kp(wn+1,{newCue:kn},null)}})(),j){if((function(wn,kn,nt,xt,_t){return wn!==null&&kn!==null&&xt!==null&&_t!==null&&(kn===wn?xt!==_t:kn!==wn+nt)})(Se,sn,Mt.numSequences,se,vn))for(ln=0;ln<Ae.length;ln++)Ae[ln]&&Ae[ln].reset();const Pn=(function(wn,kn){if(kn.length===0)return null;const nt={splits:[],fields:[[],[]]},xt=new DataView(wn);for(let _t=0;_t<kn.length;_t++){const zt=kn[_t],rn=Ix(xt,zt.offset,zt.size);let Cn=null,gt=0;for(let Dt=0;Dt<2;Dt++)if(rn[Dt].length>0){zt.cts!==Cn?gt=0:gt+=1;const Xt=ue();nt.fields[Dt].push([zt.cts+Xt*j,rn[Dt],gt]),Cn=zt.cts}}return nt.fields.forEach((function(_t){_t.sort((function(zt,rn){return zt[0]===rn[0]?zt[2]-rn[2]:zt[0]-rn[0]}))})),nt})(St,Mt.sampleList);for(let wn=0;wn<Ae.length;wn++){const kn=Pn.fields[wn],nt=Ae[wn];if(nt)for(ln=0;ln<kn.length;ln++)nt.addData(kn[ln][0]/j,kn[ln][1])}Se=sn,se=On}}})(we,Ce):(function(St,Nt,ln){let Mt,sn;const vn=new DataView(St,0,St.byteLength);sn=mo.Utils.dataViewToString(vn,h.default.UTF8);try{Mt=pe(ln).parse(sn,0),I.addCaptions(I.getCurrentTrackIdx(),0,Mt),z.buffered&&z.buffered.add(Nt.start,Nt.end)}catch(On){y.error(new Tt.default(Jt.TIMED_TEXT_ERROR_ID_PARSE_CODE,Jt.TIMED_TEXT_ERROR_MESSAGE_PARSE+On.message,sn))}})(we,Ce,lt):X.error("No text type defined")}function le(we){return function(Ce,ze,Fe){let We;We=_.getTTMLRenderingDiv()?Te.createHTMLCaptionsFromScreen(_.getElement(),Ce,ze,Fe):[{start:Ce,end:ze,data:Fe.getDisplayText(),styles:{}}],We&&I.addCaptions(we,0,We)}}function ue(){return isNaN(z.timestampOffset)?0:z.timestampOffset}function pe(we){let Ce;return we.search(h.default.VTT)>=0?Ce=q.get().streaming.text.webvtt.customRenderingEnabled&&D?D:M:(we.search(h.default.TTML)>=0||we.search(h.default.STPP)>=0)&&(Ce=N),Ce}function W(we,Ce){we===void 0&&we===Ce&&(we=z.buffered.start(0),Ce=z.buffered.end(z.buffered.length-1)),z.buffered.remove(we,Ce),I.deleteCuesFromTrackIdx(K,we,Ce)}function be(we){B.forEach((function(Ce){const ze=I.getTrackIdxForId(Ce.id);ze>=0&&I.deleteCuesFromTrackIdx(ze,we.from,we.to)}))}return z={initialize:function(){Re||(B=[],K=null,j=0,Ae=[],Se=null,se=null,Re=!0,Te=fx(R).getInstance(),P.on(f.default.VIDEO_CHUNK_RECEIVED,ee,z),P.on(f.default.BUFFER_CLEARED,be,z))},addMediaInfos:function(we,Ce,ze){if(J=J.concat(Ce),we===h.default.TEXT&&Ce[0].isFragmented&&!Ce[0].isEmbedded){ce=ze,z.buffered=(0,dx.default)(R).create(),Ee=w.getTracksFor(h.default.TEXT,$.id).filter((We=>We.isFragmented));const Fe=w.getCurrentTrackFor(h.default.TEXT,$.id);for(let We=0;We<Ee.length;We++)if(Ee[We]===Fe){ae(We);break}}for(let Fe=0;Fe<Ce.length;Fe++)Ne(Ce[Fe])},resetMediaInfos:function(){J=[]},getStreamId:function(){return $.id},append:de,abort:function(){},addEmbeddedTrack:function(we){if(Re&&we)if(we.id===h.default.CC1||we.id===h.default.CC3){for(let Ce=0;Ce<B.length;Ce++)if(B[Ce].id===we.id)return;B.push(we)}else X.warn("Embedded track "+we.id+" not supported!")},resetEmbedded:function(){P.off(f.default.VIDEO_CHUNK_RECEIVED,ee,z),P.off(f.default.BUFFER_CLEARED,be,z),I&&I.deleteAllTextTracks(),Re=!1,B=[],Ae=[null,null],Se=null,se=null},getConfig:function(){return{fragmentModel:ce,fragmentedTracks:Ee,videoModel:_}},setCurrentFragmentedTrackIdx:ae,remove:W,reset:function(){Ue(),J=[],re=null}},X=(0,l.default)(R).getInstance().getLogger(z),re=bl(R).getInstance(),Ue(),z}Yp.__dashjs_factory_name="TextSourceBuffer";var Ax=n.default.getClassFactory(Yp);class Rx{constructor(){this.root=null,this.size=0}addCue(y){const v={start:y.startTime,end:y.endTime,cue:y,maxEnd:y.endTime,left:null,right:null,height:1},[w,_]=this._insert(v,this.root);this.root=w,_&&this.size++}removeCue(y){const[v,w]=this._remove(y,this.root);return this.root=v,w&&this.size--,w}findCuesInRange(y,v){const w=[];return this._searchRange(this.root,y,v,w),w}findCuesAtTime(y){return this.findCuesInRange(y,y)}getAllCues(){const y=[];return this._inorderTraversal(this.root,y),y}getSize(){return this.size}clear(){this.root=null,this.size=0}_compareCues(y,v){return y.startTime!==v.startTime?y.startTime-v.startTime:y.endTime!==v.endTime?y.endTime-v.endTime:typeof VTTCue<"u"&&y instanceof VTTCue&&v instanceof VTTCue||y.text&&v.text?y.text.localeCompare(v.text):0}_compareIntervals(y,v){return this._compareCues(y.cue,v.cue)}_insert(y,v){if(!v)return[y,!0];const w=this._compareIntervals(y,v);if(w<0){const[I]=this._insert(y,v.left);v.left=I}else{if(!(w>0))return[v,!1];{const[I]=this._insert(y,v.right);v.right=I}}v.height=1+Math.max(this._getHeight(v.left),this._getHeight(v.right)),v.maxEnd=Math.max(v.maxEnd,y.maxEnd);const _=this._getBalance(v);return _>1?(this._compareIntervals(y,v.left)<0||(v.left=this._leftRotate(v.left)),[this._rightRotate(v),!0]):_<-1?(this._compareIntervals(y,v.right)>0||(v.right=this._rightRotate(v.right)),[this._leftRotate(v),!0]):[v,!0]}_searchRange(y,v,w,_){y&&(this._overlaps(y,v,w)&&_.push(y.cue),y.left&&y.left.maxEnd>=v&&this._searchRange(y.left,v,w,_),y.right&&y.start<=w&&this._searchRange(y.right,v,w,_))}_inorderTraversal(y,v){y&&(this._inorderTraversal(y.left,v),v.push(y.cue),this._inorderTraversal(y.right,v))}_overlaps(y,v,w){if(w===v){const _=v;return y.start<=_&&_<y.end}return y.start<w&&v<y.end}_getHeight(y){return y?y.height:0}_getBalance(y){return y?this._getHeight(y.left)-this._getHeight(y.right):0}_leftRotate(y){const v=y.right,w=v.left;return v.left=y,y.right=w,y.height=1+Math.max(this._getHeight(y.left),this._getHeight(y.right)),v.height=1+Math.max(this._getHeight(v.left),this._getHeight(v.right)),y.maxEnd=Math.max(y.end,y.left?y.left.maxEnd:0,y.right?y.right.maxEnd:0),v.maxEnd=Math.max(v.end,v.left?v.left.maxEnd:0,v.right?v.right.maxEnd:0),v}_rightRotate(y){const v=y.left,w=v.right;return v.right=y,y.left=w,y.height=1+Math.max(this._getHeight(y.left),this._getHeight(y.right)),v.height=1+Math.max(this._getHeight(v.left),this._getHeight(v.right)),y.maxEnd=Math.max(y.end,y.left?y.left.maxEnd:0,y.right?y.right.maxEnd:0),v.maxEnd=Math.max(v.end,v.left?v.left.maxEnd:0,v.right?v.right.maxEnd:0),v}_remove(y,v){if(!v)return[null,!1];const w=this._compareCues(y,v.cue);if(w<0){const[_,I]=this._remove(y,v.left);return v.left=_,I&&this._updateNode(v),[v,I]}if(w>0){const[_,I]=this._remove(y,v.right);return v.right=_,I&&this._updateNode(v),[v,I]}if(v.left||v.right){if(v.left){if(v.right){const _=this._findMin(v.right);v.cue=_.cue,v.start=_.start,v.end=_.end;const[I]=this._remove(_.cue,v.right);return v.right=I,this._updateNode(v),[v,!0]}return[v.left,!0]}return[v.right,!0]}return[null,!0]}_findMin(y){for(;y.left;)y=y.left;return y}_updateNode(y){y.height=1+Math.max(this._getHeight(y.left),this._getHeight(y.right)),y.maxEnd=Math.max(y.end,y.left?y.left.maxEnd:0,y.right?y.right.maxEnd:0)}}var zu=t(7640);const Wp=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Xp(b){const y=this.context,v=(0,m.default)(y).getInstance(),w=b.videoModel,_=b.streamInfo,I=b.settings;let M,D,N,$,q,R,P,z,X,re,ie,J,ce,fe,me,Ee,ne,K,B,j;const Se=new Map;function se(nt){const xt=nt.kind,_t=nt.id!==void 0?nt.id:nt.lang,zt=nt.lang,rn=nt.isTTML,Cn=nt.isEmbedded;return w.addTextTrack(xt,_t,zt,rn,Cn)}function Ae(nt,xt,_t,zt,rn,Cn){let gt=0,Dt=0;nt/xt>_t/zt?(Dt=xt,gt=Dt/zt*_t):(gt=nt,Dt=gt/_t*zt);let Xt=0,Ye=0,at=0,It=0;return gt/Dt>rn?(It=Dt,at=Dt*rn):(at=gt,It=gt/rn),Xt=(nt-at)/2,Ye=(xt-It)/2,Cn?{x:Xt+.1*at,y:Ye+.1*It,w:.8*at,h:.8*It}:{x:Xt,y:Ye,w:at,h:It}}function Te(nt,xt){const _t=w.getClientWidth(),zt=w.getClientHeight(),rn=w.getVideoWidth(),Cn=w.getVideoHeight(),gt=w.getVideoRelativeOffsetTop(),Dt=w.getVideoRelativeOffsetLeft();if(rn!==0&&Cn!==0){let Xt=rn/Cn,Ye=!1;nt.isFromCEA608&&(Xt=3.5/3,Ye=!0);const at=Ae.call(this,_t,zt,rn,Cn,Xt,Ye),It=at.w,ot=at.h,Bt=at.x,Vt=at.y;if(It!=X||ot!=re||Bt!=P||Vt!=z||xt){if(P=Bt+Dt,z=Vt+gt,X=It,re=ot,ie){const ft=ie.style;ft&&(ft.left=P+"px",ft.top=z+"px",ft.width=X+"px",ft.height=re+"px",ft.zIndex=fe&&document[fe]||me?ne:null,v.trigger(g.default.CAPTION_CONTAINER_RESIZE))}const Le=nt.activeCues;if(Le){const ft=Le.length;for(let Kt=0;Kt<ft;++Kt){const Yt=Le[Kt];Yt.scaleCue(Yt)}}}}}function Re(nt){const xt=X,_t=re;let zt,rn,Cn,gt,Dt;if(nt.cellResolution){const Xt=[xt/nt.cellResolution[0],_t/nt.cellResolution[1]];if(nt.linePadding){for(zt in nt.linePadding)if(nt.linePadding.hasOwnProperty(zt)){rn=(nt.linePadding[zt]*Xt[0]).toString();const Ye=document.getElementsByClassName("spanPadding");for(let at=0;at<Ye.length;at++)Ye[at].style.cssText=Ye[at].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+rn),Ye[at].style.cssText=Ye[at].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+rn)}}if(nt.fontSize){for(zt in nt.fontSize)if(nt.fontSize.hasOwnProperty(zt)){nt.fontSize[zt][0]==="%"?Cn=nt.fontSize[zt][1]/100:nt.fontSize[zt][0]==="c"&&(Cn=nt.fontSize[zt][1]),rn=(Cn*Xt[1]).toString(),Dt=zt!=="defaultFontSize"?document.getElementsByClassName(zt):document.getElementsByClassName("paragraph");for(let Ye=0;Ye<Dt.length;Ye++)Dt[Ye].style.cssText=Dt[Ye].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+rn)}if(nt.lineHeight){for(zt in nt.lineHeight)if(nt.lineHeight.hasOwnProperty(zt)){nt.lineHeight[zt][0]==="%"?gt=nt.lineHeight[zt][1]/100:nt.fontSize[zt][0]==="c"&&(gt=nt.lineHeight[zt][1]),rn=(gt*Xt[1]).toString(),Dt=document.getElementsByClassName(zt);for(let Ye=0;Ye<Dt.length;Ye++)Dt[Ye].style.cssText=Dt[Ye].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+rn)}}}}if(nt.isd){let Xt=document.getElementById(nt.cueID);Xt&&ie.removeChild(Xt),Ne(nt)}}function Ue(nt,xt){const _t=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,zt=/^#(.*)$/;if(_t.test(xt)){const rn=_t.exec(xt),Cn=parseInt(rn[4],10)-1;return"data:image/png;base64,"+btoa(nt.images[Cn])}if(zt.test(xt)){const rn=zt.exec(xt)[1];return"data:image/png;base64,"+nt.embeddedImages[rn]}return xt}function Ne(nt){if(ie){wn.call(this);const xt=document.createElement("div");ie.appendChild(xt),Ee=(0,zu.renderHTML)(nt.isd,xt,(function(_t){return Ue(nt,_t)}),ie.clientHeight,ie.clientWidth,I.get().streaming.text.imsc.displayForcedOnlyMode,(function(_t){D.info("renderCaption :",_t)}),Ee,I.get().streaming.text.imsc.enableRollUp),xt.id=nt.cueID,v.trigger(g.default.CAPTION_RENDERED,{captionDiv:xt,currentTrackIdx:R})}}function ee(nt,xt){const _t=xt.findCuesInRange(nt.startTime-.1,nt.endTime+.1);for(const zt of _t)if(ae(nt,zt)&&de(nt,zt,Wp)||ae(zt,nt)&&de(nt,zt,Wp))return zt;return null}function ae(nt,xt){return!!xt&&xt.endTime>=nt.startTime}function de(nt,xt,_t){for(let zt=0;zt<_t.length;zt++){const rn=_t[zt];if(JSON.stringify(nt[rn])!==JSON.stringify(xt[rn]))return!1}return!0}function le(nt,xt){xt&&xt.forEach((_t=>{_t.kind&&_t.kind==="image"&&(_t.src=Ue(nt,_t.src)),le(nt,_t.contents)}))}function ue(nt,xt,_t){const zt=St(nt),rn=Se.get(zt),Cn=I.get().streaming.text.dispatchForManualRendering;if(zt&&rn&&Array.isArray(_t)&&_t.length!==0){for(let Xt=0;Xt<_t.length;Xt++){let Ye=null;const at=_t[Xt];if(zt.cellResolution=at.cellResolution,zt.isFromCEA608=at.isFromCEA608,isNaN(at.start)||isNaN(at.end)||(Cn?Ye=pe(at,xt):ze(at)&&ie?Ye=we(at,xt,zt):at.data&&(Ye=Ce(at,xt,zt))),Ye){if(I.get().streaming.text.extendSegmentedCues){const It=ee(Ye,rn.allCues);It&&(rn.allCues.removeCue(It),Dt=Ye,(gt=It).startTime=Math.min(gt.startTime,Dt.startTime),gt.endTime=Math.max(gt.endTime,Dt.endTime),Ye=gt)}rn.allCues.addCue(Ye)}else D.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}var gt,Dt;vn()}}function pe(nt,xt){let _t=Fe(nt,xt);return _t.onenter=function(){ze(nt)&&j&&j.cueID!==_t.cueID&&be(j),delete _t.type,j=_t,W(_t)},_t.onexit=function(){be(_t),j=null},_t}function W(nt){v.trigger(g.default.CUE_ENTER,nt)}function be(nt){v.trigger(g.default.CUE_EXIT,{cueID:nt.cueID})}function we(nt,xt,_t){const zt=this;let rn=Fe(nt,xt);return ie.style.left=P+"px",ie.style.top=z+"px",ie.style.width=X+"px",ie.style.height=re+"px",rn.onenter=function(){_t.mode===h.default.TEXT_SHOWING&&(this.isd?(B?requestAnimationFrame((()=>Ne(this))):Ne(this),D.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),Re.call(zt,this),v.trigger(g.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:R})))},rn.onexit=function(){if(ie){const Cn=ie.childNodes;for(let gt=0;gt<Cn.length;++gt)Cn[gt].id===this.cueID&&(D.debug("Cue exit id:"+Cn[gt].id),ie.removeChild(Cn[gt]),--gt)}},rn}function Ce(nt,xt,_t){let zt=Fe(nt,xt);if(nt.styles)try{nt.styles.align!==void 0&&"align"in zt&&(zt.align=nt.styles.align),nt.styles.line!==void 0&&"line"in zt&&(zt.line=nt.styles.line),nt.styles.lineAlign!==void 0&&(zt.lineAlign=nt.styles.lineAlign),nt.styles.snapToLines!==void 0&&"snapToLines"in zt&&(zt.snapToLines=nt.styles.snapToLines),nt.styles.position!==void 0&&"position"in zt&&(zt.position=nt.styles.position),nt.styles.positionAlign!==void 0&&(zt.positionAlign=nt.styles.positionAlign),nt.styles.size!==void 0&&"size"in zt&&(zt.size=nt.styles.size)}catch(rn){D.error(rn)}return zt.onenter=function(){_t.mode===h.default.TEXT_SHOWING&&v.trigger(g.default.CAPTION_RENDERED,{currentTrackIdx:R})},zt}function ze(nt){return nt.type==="html"}function Fe(nt,xt){return ze(nt)?(function(_t,zt){let rn=new N(_t.start+zt,_t.end+zt,"");return rn.cueHTMLElement=_t.cueHTMLElement,rn.isd=_t.isd,rn.images=_t.images,rn.embeddedImages=_t.embeddedImages,rn.cueID=_t.cueID,rn.scaleCue=Re.bind(self),rn.cellResolution=_t.cellResolution,rn.lineHeight=_t.lineHeight,rn.linePadding=_t.linePadding,rn.fontSize=_t.fontSize,rn.isd&&le(rn,rn.isd.contents),rn})(nt,xt):(function(_t,zt){let rn=new N(_t.start-zt,_t.end-zt,_t.data);return rn.cueID=et.default.generateUuid(),rn})(nt,xt)}function We(nt){if(J){const xt=J.childNodes;for(let _t=0;_t<xt.length;++_t)xt[_t].id===nt.cueID&&(J.removeChild(xt[_t]),--_t)}}function lt(){const nt=w.getTextTracks(),xt=[];for(const _t of nt)_t.manualMode===h.default.TEXT_SHOWING&&xt.push(_t);return xt}function St(nt){return nt>=0&&$[nt]?w.getTextTrack($[nt].kind,$[nt].id,$[nt].lang,$[nt].isTTML,$[nt].isEmbedded):null}function Nt(nt){if(nt===R)return;R=nt;const xt=St(R);ln.call(this,xt),ce&&(clearInterval(ce),ce=null),xt&&xt.renderingType==="html"&&(Te.call(this,xt,!0),window.ResizeObserver?(K=new window.ResizeObserver((()=>{Te.call(this,xt,!0)})),K.observe(w.getElement())):ce=setInterval(Te.bind(this,xt),500))}function ln(nt){wn.call(this),nt&&nt.renderingType==="html"?On.call(this):Pn.call(this)}function Mt(nt,xt,_t,zt=!0){return!!nt&&(isNaN(xt)||(zt?nt.startTime:nt.endTime)>=xt)&&(isNaN(_t)||(zt?nt.endTime:nt.startTime)<=_t)}function sn(nt,xt,_t,zt=!0){if(!nt)return;if(nt.cues&&nt.cues.length>0)for(let Cn=nt.cues.length-1;Cn>=0;Cn--)Mt(nt.cues[Cn],xt,_t,zt)&&(nt.cues[Cn].onexit&&nt.cues[Cn].onexit(),nt.removeCue(nt.cues[Cn]));const rn=Se.get(nt);if(rn){const Cn=rn.activeCues,gt=Cn.filter((Dt=>Dt.startTime>=xt&&Dt.endTime<=_t));gt.forEach((Dt=>{I.get().streaming.text.dispatchForManualRendering?be(Dt):We(Dt)})),rn.activeCues=Cn.filter((Dt=>!gt.includes(Dt)))}}function vn(){for(const nt of Se.values())nt.lastCueWindowUpdate=-1/0}function On(){let nt=document.getElementById("native-cue-style");if(nt)return;nt=document.createElement("style"),nt.id="native-cue-style",document.head.appendChild(nt);const xt=nt.sheet,_t=w.getElement();try{_t&&(_t.id?xt.insertRule("#"+_t.id+"::cue {background: transparent}",0):_t.classList.length!==0?xt.insertRule("."+_t.className+"::cue {background: transparent}",0):xt.insertRule("video::cue {background: transparent}",0))}catch(zt){D.info(""+zt.message)}}function Pn(){const nt=document.getElementById("native-cue-style");nt&&document.head.removeChild(nt)}function wn(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}function kn(){return $}return M={addCaptions:ue,addTextTrackInfo:function(nt){$.push(nt)},createTracks:function(){$.sort((function(xt,_t){return xt.index-_t.index})),ie=w.getTTMLRenderingDiv(),J=w.getVttRenderingDiv();let nt=-1;for(let xt=0;xt<$.length;xt++){const _t=se($[xt]);q.push(_t),$[xt].defaultTrack&&(_t.default=!0,nt=xt);const zt=St(xt);zt&&(zt.mode=h.default.TEXT_SHOWING,ie&&($[xt].isTTML||$[xt].isEmbedded)?zt.renderingType="html":zt.renderingType="default",Se.set(zt,{allCues:new Rx,lastCueWindowUpdate:-1/0,activeCues:[]})),ue(xt,0,$[xt].captionData),v.trigger(g.default.TEXT_TRACK_ADDED)}if(Nt.call(this,nt),nt>=0){let xt=function(){const _t=St(nt);_t&&_t.renderingType==="html"&&Te.call(this,_t,!0),v.off(g.default.PLAYBACK_METADATA_LOADED,xt,this)};v.on(g.default.PLAYBACK_METADATA_LOADED,xt,this);for(let _t=0;_t<$.length;_t++){const zt=St(_t);if(zt){const rn=I.get().streaming.text.dispatchForManualRendering;zt.mode=_t!==nt||rn?h.default.TEXT_HIDDEN:h.default.TEXT_SHOWING,zt.manualMode=_t===nt?h.default.TEXT_SHOWING:h.default.TEXT_HIDDEN}}}v.trigger(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:R,tracks:$,streamId:_.id})},deleteAllTextTracks:function(){const nt=q?q.length:0;for(let xt=0;xt<nt;xt++){const _t=St(xt);_t&&sn.call(this,_t,_.start,_.start+_.duration,!1)}q=[],$=[],ce&&(clearInterval(ce),ce=null),K&&w&&(K.unobserve(w.getElement()),K=null),R=-1,wn.call(this),Se.clear()},deleteCuesFromTrackIdx:function(nt,xt,_t){const zt=St(nt);zt&&sn(zt,xt,_t)},disableManualTracks:function(){const nt=lt();if(nt&&nt.length>0){const xt=nt[0],_t=Se.get(xt);if(!_t)return;_t.activeCues.forEach((zt=>{I.get().streaming.text.dispatchForManualRendering?be(zt):We(zt)})),_t.activeCues=[]}},getCurrentTrackIdx:function(){return R},getCurrentTextTrackInfo:function(){return $[R]},getStreamId:function(){return _.id},getTextTrackInfos:kn,getTrackIdxForId:function(nt){let xt=-1;for(let _t=0;_t<$.length;_t++)if($[_t].id===nt){xt=_t;break}return xt},initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(N=window.VTTCue||window.TextTrackCue,$=[],q=[],R=-1,P=0,z=0,X=0,re=0,ie=null,J=null,ce=null,me=!1,ne=2147483647,Ee=null,B="requestAnimationFrame"in window,Se.clear(),document.fullscreenElement!==void 0?fe="fullscreenElement":document.webkitIsFullScreen!==void 0?fe="webkitIsFullScreen":document.msFullscreenElement?fe="msFullscreenElement":document.mozFullScreen&&(fe="mozFullScreen"))},manualCueProcessing:function(nt){const xt=lt();if(xt&&xt.length>0){const _t=xt[0],zt=Se.get(_t);if(!zt)return;const rn=zt.activeCues,Cn=zt.allCues.findCuesAtTime(nt),gt=rn.filter((Xt=>!Cn.includes(Xt))),Dt=Cn.filter((Xt=>!rn.includes(Xt)));gt.forEach((Xt=>{I.get().streaming.text.dispatchForManualRendering?be(Xt):We(Xt)})),Dt.forEach((Xt=>{I.get().streaming.text.dispatchForManualRendering?W(Xt):WebVTT.processCues(window,[Xt],J,Xt.cueID)})),zt.activeCues=Cn}},setCurrentTrackIdx:Nt,setModeForTrackIdx:function(nt,xt){const _t=St(nt);_t&&_t.mode!==xt&&(_t.mode=xt),_t&&_t.manualMode!==xt&&(_t.manualMode=xt)},updateTextTrackWindow:function(nt,xt=!1){const _t=kn(),zt=I.get().streaming.text.webvtt.customRenderingEnabled;for(let rn=0;rn<_t.length;rn++){const Cn=_t[rn],gt=St(rn),Dt=Se.get(gt);if(!gt||!Dt||!Cn.isEmbedded&&zt)continue;const{bufferToKeep:Xt,bufferPruningInterval:Ye}=I.get().streaming.buffer,at=Date.now();if((at-Dt.lastCueWindowUpdate)/1e3<Ye&&!xt)continue;const It=w.getPlaybackRate()||1,ot=Math.max(0,nt-Xt/It),Bt=nt+2*Ye/It;if(gt.cues)for(;gt.cues.length>0;)gt.removeCue(gt.cues[0]);gt.mode!==h.default.TEXT_DISABLED&&Dt.allCues.findCuesInRange(ot,Bt).forEach((Vt=>{gt.addCue(Vt)})),Dt.lastCueWindowUpdate=at}},invalidateCueWindow:vn},D=(0,l.default)(y).getInstance().getLogger(M),M}Xp.__dashjs_factory_name="TextTracks";var Cx=n.default.getClassFactory(Xp);function Qp(){const b=this.context;let y,v,w,_,I,M;function D(R){const P=R.split(":"),z=P.length-1;return R=60*parseInt(P[z-1],10)+parseFloat(P[z]),z===2&&(R+=3600*parseInt(P[0],10)),R}function N(R){const P=R.split(_),z=P[1].split(M);return z.shift(),P[1]=z[0],z.shift(),{cuePoints:P,styles:$(z)}}function $(R){const P={};return R.forEach((function(z){const X=z.split(":");if(X.length>1){const[re,ie]=X;switch(re){case"align":case"A":P.align=ie;break;case"line":case"L":const[J,ce]=ie.split(","),fe=J.endsWith("%");P.line=J==="auto"?J:parseInt(J,10),fe&&(P.snapToLines=!1),ce&&(P.lineAlign=ce);break;case"position":case"P":const[me,Ee]=ie.split(",");P.position=parseInt(me,10),Ee&&(P.positionAlign=Ee);break;case"size":case"S":P.size=parseInt(ie,10)}}})),P}function q(R,P){let z,X=P,re="",ie="";for(;R[X]!==""&&X<R.length;)X++;if(z=X-P,z>1)for(let J=0;J<z;J++){if(ie=R[P+J],ie.match(_)){re="";break}re+=ie,J!==z-1&&(re+=`
`)}else ie=R[P],ie.match(_)||(re=ie);return re}return y={parse:function(R){const P=[];let z,X;if(!R)return P;z=(R=R.split(w)).length,X=-1;for(let re=0;re<z;re++){let ie=R[re];if(ie.length>0&&ie!=="WEBVTT"&&ie.match(_)){const J=N(ie),ce=J.cuePoints,fe=J.styles,me=q(R,re+1),Ee=D(ce[0].replace(I,"")),ne=D(ce[1].replace(I,""));!isNaN(Ee)&&!isNaN(ne)&&Ee>=X&&ne>Ee?me!==""?(X=Ee,P.push({start:Ee,end:ne,data:me,styles:fe})):v.error("Skipping cue due to empty/malformed cue text"):v.error("Skipping cue due to incorrect cue timing")}}return P},getCaptionStyles:$},v=(0,l.default)(b).getInstance().getLogger(y),w=/(?:\r\n|\r|\n)/gm,_=/-->/,I=/(^[\s]+|[\s]+$)/g,M=/\s\b/g,y}Qp.__dashjs_factory_name="VTTParser";var kx=n.default.getSingletonFactory(Qp);function Zp(){let b,y;return b={parse:function(v){let w=[];return y.oncue=function(_){_.start=_.startTime,_.end=_.endTime,_.data=_.text,_.styles={align:_.align,line:_.line,position:_.position,size:_.size},w.push(_)},y.parse(v),w}},(function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(y=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}})(),b}Zp.__dashjs_factory_name="VttCustomRenderingParser";var Lx=n.default.getSingletonFactory(Zp);function Jp(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_=0;function I(){const M="cue_TTML_"+_;return _++,M}return v={parse:function(M,D,N,$,q){let R="";const P=[];let z,X,re;const ie={},J={};let ce="",fe="",me={onOpenTag:function(K,B,j){if(j[" imagetype"]&&!j[" imageType"]&&(y.trigger(g.default.CONFORMANCE_VIOLATION,{level:Es.LEVELS.ERROR,event:Es.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),j[" imageType"]=j[" imagetype"]),B==="image"&&(K==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||K==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!j[" imageType"]||j[" imageType"].value!=="PNG")return void w.warn("smpte-tt imageType != PNG. Discarded");ce=j["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){ce&&(J[ce]=fe.trim()),fe="",ce=""},onText:function(K){ce&&(fe+=K)}};if(!M)throw R="no ttml data to parse",new Error(R);ie.data=M,y.trigger(f.default.TTML_TO_PARSE,ie);let Ee=(0,zu.fromXML)(ie.data,(function(K){R=K}),me);y.trigger(f.default.TTML_PARSED,{ttmlString:ie.data,ttmlDoc:Ee});const ne=Ee.getMediaTimeEvents();for(re=0;re<ne.length;re++){let K=(0,zu.generateISD)(Ee,ne[re],(function(B){R=B}));K.contents.some((B=>B.contents.length))&&(z=ne[re]+D,X=ne[re+1]+D,z<X&&P.push({start:z,end:X,type:"html",cueID:I(),isd:K,images:q,embeddedImages:J}))}if(R!=="")throw w.error(R),new Error(R);return P}},w=(0,l.default)(b).getInstance().getLogger(v),v}Jp.__dashjs_factory_name="TTMLParser";var Nx=n.default.getSingletonFactory(Jp);function ey(b){let y=this.context;const v=(0,m.default)(y).getInstance(),w=Zn(y).getInstance(),_=b.adapter,I=b.baseURLController,M="error",D="loaded",N="unloaded";let $,q,R;function P(re,ie){let J,ce,fe=!1;if(I.resolve()){const ne=_.getVoRepresentations(re);ne&&ne.length>0&&(J=I.resolve(ne[0].path).url)}const me=re.essentialProperties.filter((ne=>ne.schemeIdUri&&ne.schemeIdUri===h.default.FONT_DOWNLOAD_DVB_SCHEME)),Ee=re.supplementalProperties.filter((ne=>ne.schemeIdUri&&ne.schemeIdUri===h.default.FONT_DOWNLOAD_DVB_SCHEME));me.length>0?(fe=!0,ce=me):ce=Ee,ce.forEach((ne=>{if((function(j){return!(!(j.value&&parseInt(j.value)===1&&j.dvbUrl&&j.dvbUrl.length>0&&j.dvbFontFamily&&j.dvbFontFamily.length>0&&j.dvbMimeType)||j.dvbMimeType!==h.default.OFF_MIMETYPE&&j.dvbMimeType!==h.default.WOFF_MIMETYPE)})(ne)){let j=(K=ne.dvbUrl,B=J,w.isPathAbsolute(K)?K:w.isRelative(K)?B?w.resolve(K,B):w.resolve(K):K);R.push({fontFamily:ne.dvbFontFamily,url:j,mimeType:ne.dvbMimeType,trackId:re.id,streamId:ie,isEssential:fe,status:N,fontFace:new FontFace(ne.dvbFontFamily,`url(${j})`,{display:"swap"})})}var K,B}))}function z(re,ie){const J=R[re];R[re]={...J,status:ie}}function X(){R=[]}return $={addFontsFromTracks:function(re,ie){if(re&&Array.isArray(re)&&ie)for(let J=0;J<re.length;J++)P(re[J],ie)},downloadFonts:function(){for(let re=0;re<R.length;re++){let ie=R[re];document.fonts.add(ie.fontFace),v.trigger(g.default.DVB_FONT_DOWNLOAD_ADDED,ie),ie.fontFace.load().then((()=>{z(re,D),v.trigger(g.default.DVB_FONT_DOWNLOAD_COMPLETE,ie)}),(J=>{z(re,M),q.debug("Font download error: ",J),v.trigger(g.default.DVB_FONT_DOWNLOAD_FAILED,ie)}))}},getFonts:function(){return R},getFontsForTrackId:function(re){return R.filter((ie=>ie.trackId&&ie.trackId===re))},reset:function(){(function(){for(const re of R){let ie=document.fonts.delete(re.fontFace);q.debug(`Removal of fontFamily: ${re.fontFamily} was ${ie?"successful":"unsuccessful"}`)}})(),X()}},q=(0,l.default)(y).getInstance().getLogger($),X(),$}ey.__dashjs_factory_name="DVBFonts";var Dx=n.default.getClassFactory(ey);function ty(b){let y=this.context;const v=b.adapter,w=b.errHandler,_=b.manifestModel,I=b.mediaController,M=b.baseURLController,D=b.videoModel,N=b.settings;let $,q,R,P,z,X,re,ie,J,ce,fe,me,Ee,ne;function K(le){if(ne.error(`Could not download ${le.isEssential?"an essential":"a"} font - fontFamily: ${le.fontFamily}, url: ${le.url}`),le.isEssential){let ue=P[le.streamId].getTrackIdxForId(le.trackId);P[le.streamId].setModeForTrackIdx(ue,h.default.TEXT_DISABLED)}}function B(le){if(ne.debug(`Successfully downloaded ${le.isEssential?"an essential":"a"} font - fontFamily: ${le.fontFamily}, url: ${le.url}`),le.isEssential){let ue=P[le.streamId].getTrackIdxForId(le.trackId);ue===P[le.streamId].getCurrentTrackIdx()?P[le.streamId].setModeForTrackIdx(ue,h.default.TEXT_SHOWING):P[le.streamId].setModeForTrackIdx(ue,h.default.TEXT_HIDDEN)}}function j(le){let ue=le.tracks,pe=le.index;const W=le.streamId;if(N.get().streaming.text.defaultEnabled===!1&&!Re()||me)Ue(W,-1);else{const be=I.getCurrentTrackFor(h.default.TEXT,W);if(be){const we={lang:be.lang,role:be.roles[0],index:be.index,codec:be.codec,accessibility:be.accessibility[0]};ue.some(((Ce,ze)=>{if(I.matchSettings(we,Ce))return Ue(W,ze),pe=ze,!0}))}J=!1}q[W].lastEnabledIndex=pe,ie.trigger(g.default.TEXT_TRACKS_ADDED,{enabled:Re(),index:pe,tracks:ue,streamId:W}),fe=!0,Ee.addFontsFromTracks(ue,W),Ee.getFonts().forEach((be=>{if(be.isEssential){let we=P[be.streamId].getTrackIdxForId(be.trackId);P[be.streamId].setModeForTrackIdx(we,h.default.TEXT_DISABLED)}})),Ee.downloadFonts()}function Se(le){try{const ue=le.streamId,pe=P[ue];if(!pe||isNaN(le.time))return;pe.updateTextTrackWindow(le.time),N.get().streaming.text.webvtt.customRenderingEnabled&&pe.manualCueProcessing(le.time)}catch{}}function se(le){try{const ue=le.streamId;if(!P[ue])return;P[ue].disableManualTracks()}catch{}}function Ae(le){try{const ue=P[le.streamId];if(!ue)return;const pe=D.getTime()||0;ue.updateTextTrackWindow(pe,!0)}catch(ue){ne.error(ue)}}function Te(le){try{if(!le||!le.mediaType||le.mediaType!==h.default.AUDIO||!le.currentMediaInfo)return;const ue=P[le.streamId].getCurrentTextTrackInfo();let pe=NaN;J?pe=Ne(le.streamId):ee(ue)&&le.currentMediaInfo.lang&&le.currentMediaInfo.lang!==ue.lang&&(pe=Ne(le.streamId),isNaN(pe)&&(pe=-1)),isNaN(pe)||Ue(le.streamId,pe)}catch(ue){ne.error(ue)}}function Re(){let le=!0;return J&&!ce&&(le=!1),le}function Ue(le,ue){J=ue===-1,J&&I&&I.saveTextSettingsDisabled();let pe=ae(le);if(pe===ue||!P[le])return;P[le].disableManualTracks(),P[le].invalidateCueWindow();let W=P[le].getCurrentTextTrackInfo(),be=W?D.getTextTrack(W.kind,W.id,W.lang,W.isTTML,W.isEmbedded):null;be&&be.mode!==h.default.TEXT_DISABLED&&P[le].setModeForTrackIdx(pe,h.default.TEXT_HIDDEN),P[le].setCurrentTrackIdx(ue),W=P[le].getCurrentTextTrackInfo();const we=N.get().streaming.text.dispatchForManualRendering;if(W&&!we&&W.mode!==h.default.TEXT_DISABLED&&P[le].setModeForTrackIdx(ue,h.default.TEXT_SHOWING),W&&W.isFragmented&&!W.isEmbedded)(function(Ce,ze,Fe){if(!R[Ce])return;let We=R[Ce].getConfig().fragmentedTracks;for(let lt=0;lt<We.length;lt++){let St=We[lt];if(ze.lang===St.lang&&(St.id?ze.id===St.id:ze.index===St.index)){let Nt=I.getCurrentTrackFor(h.default.TEXT,Ce);(St.id?Nt.id!==St.id:Nt.index!==St.index)?(P[Ce].deleteCuesFromTrackIdx(Fe),R[Ce].setCurrentFragmentedTrackIdx(lt)):Fe===-1&&ie.trigger(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Ce,mediaType:h.default.TEXT})}}})(le,W,pe);else if(W&&!W.isFragmented)(function(Ce,ze){ie.trigger(f.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:ze},{streamId:Ce,mediaType:h.default.TEXT})})(le,W);else if(!W&&J){const Ce=Ne(le);return void(isNaN(Ce)||Ue(le,Ce))}I.setTrack(W)}function Ne(le){const ue=(function(be){return P[be].getTextTrackInfos().filter(((we,Ce)=>(we._indexToSelect=Ce,!!(we&&we.roles&&we.roles.length>0)&&ee(we))))})(le);if(!ue||ue.length<=0)return NaN;const pe=I.getCurrentTrackFor(h.default.AUDIO,le);if(!pe)return NaN;const W=ue.find((be=>pe.lang===be.lang));return W?W._indexToSelect:NaN}function ee(le){return!(!le||!le.roles||le.roles.length===0)&&le.roles.some((ue=>ue.schemeIdUri===h.default.DASH_ROLE_SCHEME_ID&&ue.value===ve.default.FORCED_SUBTITLE))}function ae(le){return P[le].getCurrentTrackIdx()}function de(){R={},P={},q={},J=!0,fe=!1,me=!1}return $={addEmbeddedTrack:function(le,ue){const pe=le.id;R[pe]&&R[pe].addEmbeddedTrack(ue)},addMediaInfosToBuffer:function(le,ue,pe,W=null){const be=le.id;R[be]&&R[be].addMediaInfos(ue,pe,W)},createTracks:function(le){const ue=le.id;P[ue]&&P[ue].createTracks()},deactivateStream:function(le){if(!le)return;const ue=le.id;R[ue]&&R[ue].resetMediaInfos(),P[ue]&&P[ue].deleteAllTextTracks()},enableForcedTextStreaming:function(le){return(0,ut.checkParameterType)(le,"boolean"),ce=le,!0},enableText:function(le,ue){return(0,ut.checkParameterType)(ue,"boolean"),Re()!==ue&&(ue&&Ue(le,q[le].lastEnabledIndex),ue||(q[le].lastEnabledIndex=ae(le),fe?Ue(le,-1):me=!0)),!0},getAllTracksAreDisabled:function(){return J},getCurrentTrackIdx:ae,getTextSourceBuffer:function(le){const ue=le.id;if(R&&R[ue])return R[ue]},initialize:function(){Ee=Dx(y).create({adapter:v,baseURLController:M}),ie.on(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,j,$),ie.on(f.default.DVB_FONT_DOWNLOAD_FAILED,K,$),ie.on(f.default.DVB_FONT_DOWNLOAD_COMPLETE,B,$),ie.on(f.default.MEDIAINFO_UPDATED,Te,$),ie.on(f.default.PLAYBACK_TIME_UPDATED,Se,$),N.get().streaming.text.webvtt.customRenderingEnabled&&ie.on(f.default.PLAYBACK_SEEKING,se,$),ie.on(f.default.PLAYBACK_SEEKED,Ae,$)},initializeForStream:function(le){const ue=le.id,pe=Cx(y).create({videoModel:D,settings:N,streamInfo:le});pe.initialize(),P[ue]=pe;const W=Ax(y).create({errHandler:w,adapter:v,dvbFonts:Ee,manifestModel:_,mediaController:I,videoModel:D,textTracks:pe,vttParser:z,vttCustomRenderingParser:X,ttmlParser:re,streamInfo:le,settings:N});W.initialize(),R[ue]=W,q[ue]={},q[ue].lastEnabledIndex=-1},isTextEnabled:Re,reset:function(){Object.keys(R).forEach((le=>{R[le].resetEmbedded(),R[le].reset()})),Ee.reset(),de(),ie.off(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,j,$),ie.off(f.default.DVB_FONT_DOWNLOAD_FAILED,K,$),ie.off(f.default.DVB_FONT_DOWNLOAD_COMPLETE,B,$),ie.off(f.default.MEDIAINFO_UPDATED,Te,$),ie.off(f.default.PLAYBACK_TIME_UPDATED,Se,$),N.get().streaming.text.webvtt.customRenderingEnabled&&ie.off(f.default.PLAYBACK_SEEKING,se,$),ie.off(f.default.PLAYBACK_SEEKED,Ae,$)},setTextTrack:Ue,clearDataForStream:function(le){R[le]&&(R[le].resetEmbedded(),R[le].reset(),delete R[le]),P[le]&&(P[le].deleteAllTextTracks(),delete P[le]),q[le]&&delete q[le]}},ce=!1,fe=!1,me=!1,z=kx(y).getInstance(),X=Lx(y).getInstance(),re=Nx(y).getInstance(),ie=(0,m.default)(y).getInstance(),ne=(0,l.default)(y).getInstance().getLogger($),de(),$}ty.__dashjs_factory_name="TextController";var Px=n.default.getClassFactory(ty);function ny(b){b=b||{};const y=this.context,v=(0,l.default)(y).getInstance(),w=b.settings,_=(0,m.default)(y).getInstance();let I,M,D,N,$,q;function R(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function P(re,ie,J,ce){const fe=Math.pow(.5,J/ce.fast);re.fastEstimate=(1-fe)*ie+fe*re.fastEstimate;const me=Math.pow(.5,J/ce.slow);re.slowEstimate=(1-me)*ie+me*re.slowEstimate,re.totalWeight+=J}function z(){I={},M={},D={},N={}}const X={addEntry:function(re,ie){try{if(!(re&&ie&&ie.trace&&ie.trace.length))return;(function(fe){I[fe]=I[fe]||[],M[fe]=M[fe]||[],D[fe]=D[fe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},N[fe]=N[fe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}})(re);const J=ie.tresponse.getTime()-ie.trequest.getTime()||1;let ce=(function(fe,me){return fe._fileLoaderType&&fe._fileLoaderType===h.default.FILE_LOADER_TYPES.FETCH?(function(Ee){const ne=Ee.trace.reduce(((j,Se)=>j+Se.b[0]),0),K=Ee.trace.reduce(((j,Se)=>j+Se.d),0);let B=NaN;return w.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&(B=R()),isNaN(B)&&(B=Math.round(8*ne/K)),{downloadedBytes:ne,value:B,downloadTimeInMs:K}})(fe):(function(Ee,ne){let K=NaN,B=NaN,j=!1;if(w.get().streaming.abr.throughput.useResourceTimingApi&&Ee._resourceTimingValues)K=Ee._resourceTimingValues.transferSize,B=Ee._resourceTimingValues.responseEnd-Ee._resourceTimingValues.responseStart,j=!0;else{if(Ee.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};K=Ee.trace.reduce(((se,Ae)=>se+Ae.b[0]),0)-Ee.trace[0].b[0],B=Math.max(Ee.trace.reduce(((se,Ae)=>se+Ae.d),0)-Ee.trace[0].d,1)}let Se=NaN;if(!j&&w.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(Se=R()),isNaN(Se)){const se=w.get().streaming.abr.throughput.useDeadTimeLatency?B:B+ne;Se=Math.round(8*K/se)}return{downloadedBytes:K,value:Se,downloadTimeInMs:B}})(fe,me)})(ie,J);if(ce.latencyInMs=J,isNaN(ce.value)||!isFinite(ce.value))return;if(ie.cmsd){const fe=ie.cmsd.dynamic&&ie.cmsd.dynamic.etp?ie.cmsd.dynamic.etp:null;if(fe){const me=w.get().streaming.cmsd.abr.etpWeightRatio;me>0&&me<=1&&(ce.value=ce.value*(1-me)+fe*me)}}if((function(fe,me,Ee){return w.get().streaming.abr.throughput.useResourceTimingApi&&Ee._resourceTimingValues?Ee._resourceTimingValues.transferSize===0&&Ee._resourceTimingValues.decodedBodySize>0:!isNaN(me)&&(fe===h.default.VIDEO?me<w.get().streaming.cacheLoadThresholds[h.default.VIDEO]:fe===h.default.AUDIO?me<w.get().streaming.cacheLoadThresholds[h.default.AUDIO]:void 0)})(re,ie._tfinish.getTime()-ie.trequest.getTime(),ie))return void q.debug(`${re} Assuming segment ${ie.url} came from cache, ignoring it for throughput calculation`);q.debug(`Added throughput entry for ${re}: ${ce.value} kbit/s`),ce.serviceLocation=ie._serviceLocation,I[re].push(ce),M[re].push({value:J}),(function(fe){I[fe].length>w.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&I[fe].shift(),M[fe].length>w.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&M[fe].shift()})(re),_.trigger(g.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:ce}),ie.type!==Q.HTTPRequest.MPD_TYPE&&(P(D[re],ce.value,w.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*ce.downloadTimeInMs,$.bandwidthHalfLife),P(N[re],J,1,$.latencyHalfLife))}catch(J){q.error(J)}},getThroughputDict:function(re){return re?I[re]:I},getEwmaThroughputDict:function(re){return re?D[re]:D},getEwmaLatencyDict:function(re){return re?N[re]:N},getEwmaHalfLife:function(){return $},getLatencyDict:function(re){return re?M[re]:M},reset:z};return q=v.getLogger(X),$={bandwidthHalfLife:{fast:w.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:w.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:w.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:w.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},z(),X}ny.__dashjs_factory_name="ThroughputModel";var Mx=n.default.getClassFactory(ny);function ry(){const b=this.context,y=(0,m.default)(b).getInstance();let v,w,_;function I(){performance.clearResourceTimings()}function M(fe){fe.metric!==o.HTTP_REQUEST||!fe.value||fe.value.type!==Q.HTTPRequest.MPD_TYPE&&(fe.value.type!==Q.HTTPRequest.MEDIA_SEGMENT_TYPE||fe.mediaType!==h.default.AUDIO&&fe.mediaType!==h.default.VIDEO)||v.addEntry(fe.mediaType,fe.value)}function D(fe,me,Ee=null,ne=NaN){let K,B=null,j=v.getEwmaHalfLife(),Se=null,se=!0;switch(Ee||(Ee=_.get().streaming.abr.throughput.averageCalculationMode),fe){case h.default.THROUGHPUT_TYPES.BANDWIDTH:B=Ee===h.default.THROUGHPUT_CALCULATION_MODES.EWMA?v.getEwmaThroughputDict(me):v.getThroughputDict(me),Se=j.bandwidthHalfLife,se=!0,ne=isNaN(ne)?w.getIsDynamic()?_.get().streaming.abr.throughput.sampleSettings.live:_.get().streaming.abr.throughput.sampleSettings.vod:ne;break;case h.default.THROUGHPUT_TYPES.LATENCY:B=Ee===h.default.THROUGHPUT_CALCULATION_MODES.EWMA?v.getEwmaLatencyDict(me):v.getLatencyDict(me),Se=j.latencyHalfLife,se=!1,ne=isNaN(ne)?_.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:ne}if(!B||B.length===0)return NaN;switch(Ee){case h.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return K=N(B,ne,fe),$(B,K);case h.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return K=N(B,ne,fe),q(B,K);case h.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return K=N(B,ne,fe),R(B,K);case h.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return K=N(B,ne,fe),P(B,K);case h.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return K=N(B,ne,fe),z(B,K);case h.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return K=N(B,ne,fe),X(B,K);case h.default.THROUGHPUT_CALCULATION_MODES.EWMA:return re(B,Se,se);case h.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return K=N(B,ne,fe),ie(B,K)}}function N(fe,me,Ee){if(fe){if(me>=fe.length)me=fe.length;else if(Ee===h.default.THROUGHPUT_TYPES.BANDWIDTH&&_.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let ne=1;ne<me;++ne){const K=fe[fe.length-ne].value/fe[fe.length-ne-1].value;if((K>=_.get().streaming.abr.throughput.sampleSettings.increaseScale||K<=_.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(me+=1)===fe.length)break}}else me=0;return me}function $(fe,me){let Ee=fe;return me!==0&&Ee&&Ee.length!==0?(Ee=Ee.slice(-me),Ee.reduce(((ne,K)=>ne+K.value),0)/Ee.length):NaN}function q(fe,me){let Ee=fe;if(me===0||!Ee||Ee.length===0)return NaN;Ee=Ee.slice(-me);let ne=0;return Ee.reduce(((K,B)=>{let j=Math.sqrt(B.downloadedBytes);return ne+=j,K+B.value*j}),0)/ne}function R(fe,me){let Ee=fe;if(me===0||!Ee||Ee.length===0)return NaN;Ee=Ee.slice(-me);let ne=0;return Ee.reduce(((K,B,j)=>{let Se=j+1;return ne+=Se,K+B.value*Se}),0)/ne}function P(fe,me){let Ee=fe;if(me===0||!Ee||Ee.length===0)return NaN;Ee=Ee.slice(-me);const ne=Ee.reduce(((K,B)=>K+1/B.value),0);return Ee.length/ne}function z(fe,me){let Ee=fe;if(me===0||!Ee||Ee.length===0)return NaN;Ee=Ee.slice(-me);let ne=0;const K=Ee.reduce(((B,j)=>{let Se=Math.sqrt(j.downloadedBytes);return ne+=Se,B+1/j.value*Se}),0);return ne/K}function X(fe,me){let Ee=fe;if(me===0||!Ee||Ee.length===0)return NaN;Ee=Ee.slice(-me);let ne=0;const K=Ee.reduce(((B,j,Se)=>{let se=Se+1;return ne+=se,B+1/j.value*se}),0);return ne/K}function re(fe,me,Ee=!0){if(!fe||fe.totalWeight<=0)return NaN;const ne=fe.fastEstimate/(1-Math.pow(.5,fe.totalWeight/me.fast)),K=fe.slowEstimate/(1-Math.pow(.5,fe.totalWeight/me.slow));return Ee?Math.min(ne,K):Math.max(ne,K)}function ie(fe,me){if(me===0||!fe||fe.length===0)return NaN;let Ee=fe.slice(-me).map((j=>j.value)),ne=2/(Ee.length+1),K=Ee[Ee.length-1],B=Ee[Ee.length-1];for(let j=0;j<Ee.length;j++)K=ne*Ee[j]+(1-ne)*K,B=ne*K+(1-ne)*B;return B}function J(fe,me=null,Ee=NaN){const ne=D(h.default.THROUGHPUT_TYPES.BANDWIDTH,fe,me,Ee);return Math.round(ne)}const ce={getArithmeticMean:$,getAverageLatency:function(fe,me=null,Ee=NaN){const ne=D(h.default.THROUGHPUT_TYPES.LATENCY,fe,me,Ee);return Math.round(ne)},getAverageThroughput:J,getByteSizeWeightedArithmeticMean:q,getByteSizeWeightedHarmonicMean:z,getDateWeightedArithmeticMean:R,getDateWeightedHarmonicMean:X,getEwma:re,getHarmonicMean:P,getRawThroughputData:function(fe){return fe?v.getThroughputDict(fe):[]},getSafeAverageThroughput:function(fe,me=null,Ee=NaN){let ne=J(fe,me,Ee);return isNaN(ne)||(ne*=_.get().streaming.abr.throughput.bandwidthSafetyFactor),ne},getZlema:ie,initialize:function(){v=Mx(b).create({settings:_}),y.on(g.default.METRIC_ADDED,M,ce),window.performance?.addEventListener?.("resourcetimingbufferfull",I)},reset:function(){v.reset(),y.off(g.default.METRIC_ADDED,M,ce),window.performance?.removeEventListener?.("resourcetimingbufferfull",I)},setConfig:function(fe){fe.settings&&(_=fe.settings),fe.playbackController&&(w=fe.playbackController)}};return ce}ry.__dashjs_factory_name="ThroughputController";var Ox=n.default.getSingletonFactory(ry);function iy(){const b=this.context,y=(0,m.default)(b).getInstance(),v=(0,c.default)(b).getInstance();let w,_,I,M;function D(J){M=J}function N(J,ce,fe,me){let Ee,ne=ce.adaptation.period.mpd;const K=ne.availabilityStartTime;if(me)Ee=fe&&ne.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(K.getTime()+1e3*(J+ne.timeShiftBufferDepth)):ne.availabilityEndTime;else if(fe){const B=ce.availabilityTimeOffset;Ee=new Date(K.getTime()+1e3*(J-B))}else Ee=K;return Ee}function $(J,ce){return(J.getTime()-ce.mpd.availabilityStartTime.getTime()+1e3*M)/1e3}function q(J,ce){return J+(ce.adaptation.period.start-ce.presentationTimeOffset)}function R(J){const ce={start:NaN,end:NaN},fe=J[0].getAdapter().getRegularPeriods()[0],me=$(new Date,fe);if(!J||J.length===0)return{range:ce,now:me};J.forEach((ne=>{let K=ne.getCurrentRepresentationForType(h.default.VIDEO);if(K||(K=ne.getCurrentRepresentationForType(h.default.AUDIO)),!K){const j=ne.getAdapter(),Se=j.getMediaInfoForType(ne.getStreamInfo(),h.default.VIDEO)||j.getMediaInfoForType(ne.getStreamInfo(),h.default.AUDIO);K=j.getVoRepresentations(Se)[0]}let B={start:NaN,end:NaN};if(K)if(K.segmentInfoType===ve.default.SEGMENT_TIMELINE)B=(function(j){const Se=j.adaptation.period.mpd.manifest.Period[j.adaptation.period.index].AdaptationSet[j.adaptation.index],se=_.getRepresentationFor(j.index,Se),Ae=se.SegmentTemplate||se.SegmentList,Te=Ae.SegmentTimeline,Re=Ae.timescale,Ue=Te.S,Ne={start:0,end:0},ee=Ue[0].t,ae=!isNaN(ee),de=ae?ee:0;let le,ue,pe,W,be=0;for(ae&&(Ne.start=q(de/Re,j)),pe=0,W=Ue.length;pe<W;pe++)le=Ue[pe],ue=0,le.hasOwnProperty("r")&&(ue=le.r),be+=le.d*(1+ue);return Ne.end=q((de+be)/Re,j),Ne})(K);else{const j=K.adaptation.period;B.start=j.start,B.end=Math.max(me,j.start+j.duration)}!isNaN(B.start)&&(isNaN(ce.start)||ce.start>B.start)&&(ce.start=B.start),!isNaN(B.end)&&(isNaN(ce.end)||ce.end<B.end)&&(ce.end=B.end)})),ce.end=Math.min(me,ce.end);const Ee=z(J,ce.end,!0);return ce.end=isNaN(Ee)?ce.end:Ee,ce.start=fe&&fe.mpd&&fe.mpd.timeShiftBufferDepth&&!isNaN(fe.mpd.timeShiftBufferDepth)&&!isNaN(ce.end)?Math.max(ce.end-fe.mpd.timeShiftBufferDepth,ce.start):ce.start,ce.start=z(J,ce.start),{range:ce,now:me}}function P(J,ce){I=J-ce.end}function z(J,ce,fe=!1){try{let me=0,Ee=!1,ne=NaN;for(;!Ee&&me<J.length;){const K=J[me].getStreamInfo();K.start<=ce&&(!isFinite(K.duration)||K.start+K.duration>=ce)?(ne=ce,Ee=!0):!fe&&K.start>ce&&(isNaN(ne)||K.start<ne)?ne=K.start:fe&&K.start+K.duration<ce&&(isNaN(ne)||K.start+K.duration>ne)&&(ne=K.start+K.duration),me+=1}return ne}catch{return ce}}function X(J){J.offset===void 0||isNaN(J.offset)||D(J.offset/1e3)}function re(){M=0,I=0}function ie(){y.off(f.default.UPDATE_TIME_SYNC_OFFSET,X,this),re()}return w={calcAvailabilityEndTimeFromPresentationTime:function(J,ce,fe){return N(J,ce,fe,!0)},calcAvailabilityStartTimeFromPresentationTime:function(J,ce,fe){return N(J,ce,fe)},calcMediaTimeFromPresentationTime:function(J,ce){return J-ce.adaptation.period.start+ce.presentationTimeOffset},calcPeriodRelativeTimeFromMpdRelativeTime:function(J,ce){return ce-J.adaptation.period.start},calcPresentationTimeFromMediaTime:q,calcPresentationTimeFromWallTime:$,calcTimeShiftBufferWindow:function(J,ce){if(!ce)return(function(fe){const me={start:NaN,end:NaN};let Ee=0,ne=NaN;return fe.forEach((K=>{const B=K.getStreamInfo();Ee+=B.duration,(isNaN(ne)||B.start<ne)&&(ne=B.start)})),me.start=ne,me.end=ne+Ee,me})(J);if(v.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const fe=R(J);return P(fe.now,fe.range),fe.range}return(function(fe){const me={start:NaN,end:NaN};if(!fe||fe.length===0)return me;const Ee=fe[0].getAdapter().getRegularPeriods()[0],ne=$(new Date,Ee),K=Ee.mpd.timeShiftBufferDepth,B=isNaN(K)?0:ne-K;if(me.start=z(fe,B),me.end=!isNaN(me.start)&&ne<me.start?ne:z(fe,ne,!0),!isNaN(K)&&me.end<ne-K&&(me.end=NaN),v.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const j=R(fe);if(j.range.end<me.start)return y.trigger(g.default.CONFORMANCE_VIOLATION,{level:Es.LEVELS.WARNING,event:Es.EVENTS.INVALID_DVR_WINDOW}),P(j.now,j.range),j.range}return me})(J)},calcWallTimeForSegment:function(J,ce){let fe,me,Ee;return ce&&(fe=J.representation.adaptation.period.mpd.suggestedPresentationDelay,me=J.presentationStartTime+fe,Ee=new Date(J.availabilityStartTime.getTime()+1e3*me)),Ee},getClientReferenceTime:function(){return Date.now()-1e3*I+1e3*M},getClientTimeOffset:function(){return M},initialize:function(){re(),y.on(f.default.UPDATE_TIME_SYNC_OFFSET,X,this)},reset:ie,setClientTimeOffset:D,setConfig:function(J){J&&J.dashManifestModel&&(_=J.dashManifestModel)}},_=Vn(b).getInstance(),ie(),w}iy.__dashjs_factory_name="TimelineConverter";var Fx=n.default.getSingletonFactory(iy),zx=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function ay(){let b,y;return b={initialize:function(v){if(y=new zx,!v)return null;const w=v.indexOf("#");if(w!==-1){const _=v.substr(w+1).split("&");for(let I=0,M=_.length;I<M;++I){const D=_[I],N=D.indexOf("=");if(N!==-1){const $=D.substring(0,N);y.hasOwnProperty($)&&(y[$]=D.substr(N+1))}}}},getURIFragmentData:function(){return y}},b}ay.__dashjs_factory_name="URIFragmentModel";var Ux=n.default.getSingletonFactory(ay);const Bx=new Map([[h.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[h.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[h.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[h.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function sy(){let b,y,v,w,_,I,M,D,N,$,q,R;const P=this.context,z=(0,m.default)(P).getInstance(),X=[];function re(se,Ae=!1){v&&(Ae?v.playbackRate=se:Se(h.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,(()=>{v.playbackRate=se})))}function ie(){return X.length>0}function J(se){let Ae=X.indexOf(se);if(se!==null&&(Ae!==-1&&X.splice(Ae,1),$.get().streaming.buffer.syntheticStallEvents.enabled&&v&&!ie())){const Te=()=>{if(re(I||1,$.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!v.paused){const Re=document.createEvent("Event");Re.initEvent("playing",!0,!1),v.dispatchEvent(Re)}};$.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?Te():(D&&D.func&&D.event&&me(D.event,D.func),D=Se(h.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,Te))}}function ce(){if(v&&ie()&&v.playbackRate===0){const se=document.createEvent("Event");se.initEvent("waiting",!0,!1),v.dispatchEvent(se)}}function fe(se,Ae){v&&v.addEventListener(se,Ae)}function me(se,Ae){v&&v.removeEventListener(se,Ae)}function Ee(){return v?v.readyState:NaN}function ne(){return v?v.buffered:null}function K(){return v?v.clientWidth:NaN}function B(){return v?v.clientHeight:NaN}function j(se,Ae,Te,Re,Ue){if(v){for(let Ne=0;Ne<v.textTracks.length;Ne++)if(v.textTracks[Ne].kind===se&&(!Ae||v.textTracks[Ne].label==Ae)&&v.textTracks[Ne].language===Te&&v.textTracks[Ne].isTTML===Re&&v.textTracks[Ne].isEmbedded===Ue)return v.textTracks[Ne]}return null}function Se(se,Ae){return se===h.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ee()>=se?(Ae(),null):(function(Te,Re){const Ue=()=>{me(Te,Ue),Re(Te)};return fe(Te,Ue),{func:Ue,event:Te}})(Bx.get(se),Ae)}return w={addEventListener:fe,addTextTrack:function(se,Ae,Te,Re,Ue){if(!v)return null;let Ne=j(se,Ae,Te,Re,Ue);return Ne||(Ne=v.addTextTrack(se,Ae,Te),Ne.isEmbedded=Ue,Ne.isTTML=Re),Ne},appendChild:function(se){v&&(v.appendChild(se),se.isTTML!==void 0&&(v.textTracks[v.textTracks.length-1].isTTML=se.isTTML,v.textTracks[v.textTracks.length-1].isEmbedded=se.isEmbedded))},getBufferRange:ne,getClientHeight:B,getClientWidth:K,getElement:function(){return v},getEnded:function(){return v?v.ended:null},getPlaybackQuality:function(){if(!v)return null;let se="webkitDroppedFrameCount"in v&&"webkitDecodedFrameCount"in v,Ae=null;return"getVideoPlaybackQuality"in v?Ae=v.getVideoPlaybackQuality():se&&(Ae={droppedVideoFrames:v.webkitDroppedFrameCount,totalVideoFrames:v.webkitDroppedFrameCount+v.webkitDecodedFrameCount,creationTime:new Date}),Ae},getPlaybackRate:function(){return v?v.playbackRate:null},getPlayedRanges:function(){return v?v.played:null},getReadyState:Ee,getSource:function(){return v?v.src:null},getTTMLRenderingDiv:function(){return b},getTextTrack:j,getTextTracks:function(){return v?v.textTracks:[]},getTime:function(){return v?isNaN(y)?v.currentTime:y:null},getVideoElementSize:function(){const se=$.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:K()*se,elementHeight:B()*se}},getVideoHeight:function(){return v?v.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(v){const se=v.parentNode.host||v.parentNode;return se?v.getBoundingClientRect().left-se.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(v){const se=v.parentNode.host||v.parentNode;return se?v.getBoundingClientRect().top-se.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return v?v.videoWidth:NaN},getVttRenderingDiv:function(){return R},initialize:function(){z.on(f.default.PLAYBACK_PLAYING,ce,this)},isPaused:function(){return v?v.paused:null},isSeeking:function(){return v?v.seeking||!isNaN(y):null},isStalled:ie,pause:function(){v&&(v.pause(),v.autoplay=!1)},play:function(){if(v){v.autoplay=!0;const se=v.play();se&&se.catch&&typeof Promise<"u"&&se.catch((Ae=>{Ae.name==="NotAllowedError"&&z.trigger(f.default.PLAYBACK_NOT_ALLOWED),_.warn(`Caught pending play exception - continuing (${Ae})`)}))}},removeChild:function(se){v&&v.removeChild(se)},removeEventListener:me,reset:function(){clearTimeout(q),z.off(f.default.PLAYBACK_PLAYING,ce,this),X.length=0,(function(){try{M&&v&&(M.unobserve(v),M.disconnect(),M=null)}catch{}})()},setConfig:function(se){se&&se.settings&&($=se.settings)},setCurrentTime:function(se,Ae){v&&(N&&N.func&&N.event&&me(N.event,N.func),y=se,N=Se(h.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(()=>{if(v)if(v.currentTime!==y)try{y=Ae?(function(Te){const Re=ne();let Ue=Te,Ne=9999999999;if(Re)for(let ee=0;ee<Re.length;ee++){const ae=Re.start(ee),de=Re.end(ee),le=Math.abs(ae-Te),ue=Math.abs(de-Te);if(Te>=ae&&Te<=de)return Te;le<Ne&&(Ne=le,Ue=ae),ue<Ne&&(Ne=ue,Ue=de)}return Ue})(y):y,isNaN(y)||(v.currentTime=y),y=NaN}catch(Te){v.readyState===0&&Te.code===Te.INVALID_STATE_ERR&&(q=setTimeout((function(){v.currentTime=y,y=NaN}),400))}else y=NaN})))},setDisableRemotePlayback:function(se){v&&(v.disableRemotePlayback=se)},setElement:function(se){if(!(se==null||se&&/^(VIDEO|AUDIO)$/i.test(se.nodeName)))throw"element is not video or audio DOM type!";v=se,(function(Ae){try{if(!M||!Ae)return;M.observe(Ae)}catch{}})(v)},setPlaybackRate:re,setSource:function(se){v&&(se?v.src=se:(v.removeAttribute("src"),v.load()))},setStallState:function(se,Ae){(function(Te,Re){Re?(function(Ue){if(Ue!==null&&v&&!v.seeking&&X.indexOf(Ue)===-1&&(X.push(Ue),$.get().streaming.buffer.syntheticStallEvents.enabled&&v&&X.length===1&&($.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||Ee()>=h.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){I=v.playbackRate,re(0,!0);const Ne=document.createEvent("Event");Ne.initEvent("waiting",!0,!1),v.dispatchEvent(Ne)}})(Te):J(Te)})(se,Ae)},setTTMLRenderingDiv:function(se){b=se,b.style.position="absolute",b.style.display="flex",b.style.overflow="hidden",b.style.pointerEvents="none",b.style.top=0,b.style.left=0},setVttRenderingDiv:function(se){R=se},waitForReadyState:Se},_=(0,l.default)(P).getInstance().getLogger(w),$=(0,c.default)(P).getInstance(),y=NaN,(function(){try{M=new ResizeObserver((()=>{z.trigger(f.default.VIDEO_ELEMENT_RESIZED)}))}catch{}})(),w}sy.__dashjs_factory_name="VideoModel";var $x=n.default.getSingletonFactory(sy),jx=t(8986);function Uu(){const b="You must first call initialize() and set a source before calling this method",y="You must first call initialize() and set a valid source and view before calling this method",v="You must first call attachView() to set the video element before calling this method",w="You must first call attachSource() with a valid source before calling this method",_="MediaPlayer not initialized!",I=this.context,M=(0,m.default)(I).getInstance();let D=(0,c.default)(I).getInstance();const N=(0,l.default)(I).getInstance({settings:D});let $,q,R,P,z,X,re,ie,J,ce,fe,me,Ee,ne,K,B,j,Se,se,Ae,Te,Re,Ue,Ne,ee,ae,de,le,ue,pe,W,be,we,Ce,ze,Fe,We,lt,St,Nt,ln;function Mt(){Dt(null),Cn(null),P=null,K&&(K.reset(),K=null),B&&(B.reset(),B=null),Te&&Te.reset(),D.reset(),Se&&(Se.reset(),Se=null)}function sn(){return!!R&&!!We.getElement()}function vn(){return(0,jx.getVersionString)()}function On(){if(!re)throw y;return ue.isPaused()}function Pn(){if(!re)throw y;return ue.getIsDynamic()}function wn(Le){const ft=ae&&ae.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let Kt=we.getCurrentDVRInfo(ft);return Kt?kn(Kt.range.start+Le,Kt):0}function kn(Le,ft){let Kt=ue.getOriginalLiveDelay();return Le>ft.range.end-Kt&&(Le=ft.range.end-Kt),Le}function nt(Le=""){if(!re)throw y;let ft=rn().currentTime;return Le!==""&&(ft=ae.getTimeRelativeToStreamId(ft,Le)),ft}function xt(Le){(0,ut.checkParameterType)(Le,"boolean"),ie=Le}function _t(){Te.restoreDefaultUTCTimingSources()}function zt(){return we}function rn(){if(!We.getElement())throw v;return We.getElement()}function Cn(Le){if(!z)throw _;We.setElement(Le),Le&&(ot(),(function(){if(B||typeof dashjs>"u")return;let ft=dashjs.MetricsReporting;typeof ft=="function"&&(B=ft(I).create().createMetricsReporting({debug:N,eventBus:M,mediaElement:rn(),adapter:se,dashMetrics:we,mediaPlayerModel:Ae,events:f.default,constants:h.default,metricsConstants:o}))})(),(function(){if(j||typeof dashjs>"u")return;let ft=dashjs.MssHandler;typeof ft=="function"&&(Jt.extend(ft.errors),j=ft(I).create({eventBus:M,mediaPlayerModel:Ae,dashMetrics:we,manifestModel:Ce,playbackController:ue,streamController:ae,protectionController:K,baseURLController:Ue,errHandler:Re,events:f.default,constants:h.default,debug:N,initSegmentType:Q.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:ht,ISOBoxer:mo,settings:D}))})(),ae&&ae.switchToVideoElement(J)),re&&(Ye(),at()),Vt(J)}function gt(Le){if(!X)throw b;let ft=ae.getActiveStreamInfo();return ft?ne.getTracksFor(Le,ft.id).filter((Kt=>!K||K.areKeyIdsUsable(Kt.normalizedKeyIds))):[]}function Dt(Le,ft=NaN){if(!z)throw _;typeof Le=="string"&&lt.initialize(Le),ft==null&&(ft=NaN),isNaN(ft)||(ft=Math.max(0,ft)),J=ft,R=Le,(X||re)&&(Ye(),at()),sn()&&Vt(J)}function Xt(){if(!X)throw b;let Le=ae.getActiveStreamInfo();return Le?ae.getStreamById(Le.id):null}function Ye(){re=!1,X=!1,se.reset(),ae.reset(),le.reset(),be.reset(),ue.reset(),pe.reset(),W.reset(),ce.reset(),fe.reset(),ne.reset(),Nt.reset(),K&&(D.get().streaming.protection.keepProtectionMediaKeys?K.stop():(K.reset(),K=null,ot())),de.reset(),ze.reset(),Fe.reset()}function at(){Te.resetPlaybackSessionSpecificSettings()}function It(){return x_(I).create({debug:N,errHandler:Re,dashMetrics:we,mediaPlayerModel:Ae,mssHandler:j,settings:D})}function ot(){if(K)return K;if(typeof dashjs>"u")return null;let Le=dashjs.Protection;if(typeof Le=="function"){let ft=Le(I).create();return f.default.extend(Le.events),g.default.extend(Le.events,{publicOnly:!0}),Jt.extend(Le.errors),K=ft.createProtectionSystem({debug:N,errHandler:Re,videoModel:We,customParametersModel:Te,capabilities:Ne,eventBus:M,events:f.default,BASE64:ht,constants:h.default,cmcdModel:ze,settings:D}),Ne||(Ne=(0,mg.default)(I).getInstance()),Ne.setProtectionController(K),K}return null}function Bt(){if(!z)throw _;if(Se)return Se;if(typeof dashjs>"u")return null;let Le=dashjs.OfflineController;if(typeof Le=="function"){f.default.extend(Le.events),g.default.extend(Le.events,{publicOnly:!0}),Jt.extend(Le.errors);const ft=It(),Kt=Kg(I).create();return Kt.setConfig({manifestModel:Ce,adapter:se,manifestLoader:ft,errHandler:Re,contentSteeringController:W}),Se=Le(I).create({debug:N,manifestUpdater:Kt,baseURLController:Ue,manifestLoader:ft,manifestModel:Ce,mediaPlayerModel:Ae,abrController:ce,playbackController:ue,adapter:se,errHandler:Re,dashMetrics:we,timelineConverter:Ee,segmentBaseController:Nt,schemeLoaderFactory:me,eventBus:M,events:f.default,errors:Jt,constants:h.default,settings:D,dashConstants:ve.default,urlUtils:Zn(I).getInstance()}),Se}return null}function Vt(Le=NaN){Se&&Se.resetRecords(),!X&&R&&(X=!0,q.info("Streaming Initialized"),(function(){const ft=It();ae||(ae=jp(I).getInstance()),de||(de=Px(I).create({errHandler:Re,manifestModel:Ce,adapter:se,mediaController:ne,baseURLController:Ue,videoModel:We,settings:D})),ee.setConfig({capabilities:Ne,customParametersModel:Te,adapter:se,settings:D,protectionController:K,manifestModel:Ce,errHandler:Re}),ae.setConfig({capabilities:Ne,capabilitiesFilter:ee,manifestLoader:ft,manifestModel:Ce,mediaPlayerModel:Ae,customParametersModel:Te,protectionController:K,textController:de,adapter:se,dashMetrics:we,errHandler:Re,timelineConverter:Ee,videoModel:We,playbackController:ue,serviceDescriptionController:pe,contentSteeringController:W,abrController:ce,throughputController:fe,mediaController:ne,settings:D,baseURLController:Ue,uriFragmentModel:lt,segmentBaseController:Nt}),le.setConfig({settings:D,playbackController:ue,streamController:ae,videoModel:We,timelineConverter:Ee,adapter:se}),ue.setConfig({streamController:ae,serviceDescriptionController:pe,dashMetrics:we,adapter:se,videoModel:We,timelineConverter:Ee,settings:D}),be.setConfig({streamController:ae,playbackController:ue,mediaPlayerModel:Ae,videoModel:We,settings:D}),fe.setConfig({settings:D,playbackController:ue}),ce.setConfig({streamController:ae,capabilities:Ne,domStorage:St,mediaPlayerModel:Ae,customParametersModel:Te,throughputController:fe,cmsdModel:Fe,dashMetrics:we,adapter:se,videoModel:We,settings:D}),ze.setConfig({abrController:ce,dashMetrics:we,playbackController:ue,serviceDescriptionController:pe,throughputController:fe}),ln.setConfig({serviceDescriptionController:pe}),Fe.setConfig({}),ne.initialize(),fe.initialize(),ce.initialize(),ae.initialize(ie,P),de.initialize(),le.initialize(),be.initialize(),ze.initialize(ie),Fe.initialize(),W.initialize(),Nt.initialize()})(),typeof R=="string"?ae.load(R,Le):ae.loadWithManifest(R,Le)),!re&&sn()&&(re=!0,M.trigger(g.default.PLAYBACK_INITIALIZED),q.info("Playback Initialized"))}return $={addABRCustomRule:function(Le,ft,Kt){Te.addAbrCustomRule(Le,ft,Kt)},addExternalSubtitle:function(Le){Le instanceof c_.default||q.error("Invalid external subtitle object. Must be an instance of dashjs.ExternalSubtitle"),Te.addExternalSubtitle(Le)},addRequestInterceptor:function(Le){Te.addRequestInterceptor(Le)},addResponseInterceptor:function(Le){Te.addResponseInterceptor(Le)},addUTCTimingSource:function(Le,ft){Te.addUTCTimingSource(Le,ft)},attachProtectionController:function(Le){K=Le},attachSource:Dt,attachTTMLRenderingDiv:function(Le){if(!We.getElement())throw v;We.setTTMLRenderingDiv(Le)},attachView:Cn,attachVttRenderingDiv:function(Le){if(!We.getElement())throw v;We.setVttRenderingDiv(Le)},clearDefaultUTCTimingSources:function(){Te.clearDefaultUTCTimingSources()},convertToTimeCode:function(Le){Le=Math.max(Le,0);let ft=Math.floor(Le/3600),Kt=Math.floor(Le%3600/60),Yt=Math.floor(Le%3600%60);return(ft===0?"":ft<10?"0"+ft.toString()+":":ft.toString()+":")+(Kt<10?"0"+Kt.toString():Kt.toString())+":"+(Yt<10?"0"+Yt.toString():Yt.toString())},destroy:function(){Mt(),n.default.deleteSingletonInstances(I)},duration:function(){if(!re)throw y;let Le=rn().duration;if(ue.getIsDynamic()){const ft=ae&&ae.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let Kt=we.getCurrentDVRInfo(ft);Le=Kt?Kt.range.end-Kt.range.start:0}return Le},enableForcedTextStreaming:function(Le){return!(!ae.getActiveStreamInfo()||!de)&&de.enableForcedTextStreaming(Le)},enableText:function(Le){const ft=ae.getActiveStreamInfo();return!(!ft||!de)&&de.enableText(ft.id,Le)},extend:function(Le,ft,Kt){n.default.extend(Le,ft,Kt,I)},formatUTC:function(Le,ft,Kt,Yt=!1){const Ln=new Date(1e3*Le),Et=Ln.toLocaleDateString(ft),tn=Ln.toLocaleTimeString(ft,{hour12:Kt});return Yt?tn+" "+Et:tn},getABRCustomRules:function(){return Te.getAbrCustomRules()},getActiveStream:Xt,getAutoPlay:function(){return ie},getAvailableBaseUrls:function(){const Le=Ce.getValue();return Le?Ue.getBaseUrls(Le):[]},getAvailableLocations:function(){const Le=Ce.getValue();if(!Le)return[];const ft=se.getLocation(Le),Kt=W.getSynthesizedLocationElements(ft);return ft.concat(Kt)},getAverageLatency:function(Le=h.default.VIDEO,ft=null,Kt=NaN){return fe?fe.getAverageLatency(Le,ft,Kt):0},getAverageThroughput:function(Le=h.default.VIDEO,ft=null,Kt=NaN){return fe?fe.getAverageThroughput(Le,ft,Kt):0},getBufferLength:function(Le){const ft=[h.default.VIDEO,h.default.AUDIO,h.default.TEXT];if(Le)return ft.indexOf(Le)!==-1?zt().getCurrentBufferLevel(Le)||NaN:(q.warn("getBufferLength requested for invalid type"),NaN);{const Kt=ft.map((Yt=>gt(Yt).length>0?zt().getCurrentBufferLevel(Yt):Number.MAX_VALUE)).reduce(((Yt,Ln)=>Math.min(Yt,Ln)));return Kt===Number.MAX_VALUE?NaN:Kt}},getCurrentLiveLatency:function(){if(!z)throw _;return re?ue.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(Le){if(!X)throw b;if(Le!==h.default.IMAGE&&Le!==h.default.VIDEO&&Le!==h.default.AUDIO)return null;const ft=Xt();if(!ft)return null;if(Le===h.default.IMAGE){const Kt=ft.getThumbnailController();return Kt?Kt.getCurrentTrack():-1}return ft.getCurrentRepresentationForType(Le)},getCurrentSteeringResponseData:function(){if(W)return W.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let Le=NaN;const ft=ae.getActiveStreamInfo();if(ft&&de)return Le=de.getCurrentTrackIdx(ft.id),Le},getCurrentTrackFor:function(Le){if(!X)throw b;let ft=ae.getActiveStreamInfo();return ft?ne.getCurrentTrackFor(Le,ft.id):null},getDashAdapter:function(){return se},getDashMetrics:zt,getDebug:function(){return N},getDvrSeekOffset:wn,getDvrWindow:function(){if(!re)throw y;const Le=ae&&ae.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let ft=we.getCurrentDVRInfo(Le);if(!ft)return{};let Kt=0;const Yt=ue.getIsDynamic();return Yt&&(Kt=ft.manifestInfo.availableFrom.getTime()/1e3),{start:ft.range.start,end:ft.range.end,startAsUtc:Yt?Kt+ft.range.start:NaN,endAsUtc:Yt?Kt+ft.range.end:NaN,size:ft.range.end-ft.range.start}},getExternalSubtitles:function(){Te.getExternalSubtitles()},getInitialMediaSettingsFor:function(Le){if(!z)throw _;return ne.getInitialSettings(Le)},getLowLatencyModeEnabled:function(){if(!re)throw y;return ue.getLowLatencyModeEnabled()},getManifest:function(){return Ce.getValue()},getOfflineController:function(){return Bt()},getPlaybackRate:function(){return rn().playbackRate},getProtectionController:function(){return ot()},getRawThroughputData:function(Le=h.default.VIDEO){return fe?fe.getRawThroughputData(Le):[]},getRepresentationsByType:function(Le,ft=null){if(!X)throw b;let Kt=ft?ae.getStreamById(ft):Xt();return Kt?Kt.getRepresentationsByType(Le):[]},getSafeAverageThroughput:function(Le=h.default.VIDEO,ft=null,Kt=NaN){return fe?fe.getSafeAverageThroughput(Le,ft,Kt):0},getSettings:function(){return D.get()},getSource:function(){if(!R)throw w;return R},getStreamsFromManifest:function(Le){if(!X)throw b;return se.getStreamsInfo(Le)},getTTMLRenderingDiv:function(){return We?We.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!re)throw y;return ue.getOriginalLiveDelay()},getTracksFor:gt,getTracksForTypeFromManifest:function(Le,ft,Kt){if(!X)throw b;return(Kt=Kt||se.getStreamsInfo(ft,1)[0])?se.getAllMediaInfoForType(Kt,Le,ft):[]},getVersion:vn,getVideoElement:rn,getVolume:function(){return rn().volume},getXHRWithCredentialsForType:function(Le){return Te.getXHRWithCredentialsForType(Le)},initialize:function(Le,ft,Kt,Yt=NaN){Ne||(Ne=(0,mg.default)(I).getInstance(),Ne.setConfig({settings:D,protectionController:K})),Re||(Re=l_(I).getInstance()),Ne.supportsMediaSource()?(z||(z=!0,Ee=Fx(I).getInstance(),fe||(fe=Ox(I).getInstance()),ce||(ce=pn(I).getInstance()),me||(me=sg(I).getInstance()),ue||(ue=k_(I).getInstance()),ne||(ne=R_(I).getInstance()),ae||(ae=jp(I).getInstance()),le||(le=u_(I).getInstance()),be||(be=kw(I).getInstance()),pe||(pe=M_(I).getInstance()),W||(W=vu(I).getInstance()),ee||(ee=Cw(I).getInstance()),se=Kw(I).getInstance(),Ce=I_(I).getInstance(),ze=Wm(I).getInstance(),Fe=Zm(I).getInstance(),ln=tg(I).getInstance(),we=o_(I).getInstance({settings:D}),St=Nw(I).getInstance({settings:D}),se.setConfig({constants:h.default,cea608parser:new Kp,errHandler:Re,BASE64:ht}),Ue||(Ue=Iw(I).create()),Ue.setConfig({adapter:se,contentSteeringController:W}),pe.setConfig({adapter:se}),Nt||(Nt=D_(I).getInstance({dashMetrics:we,mediaPlayerModel:Ae,errHandler:Re,baseURLController:Ue,events:f.default,eventBus:M,debug:N,boxParser:bl(I).getInstance(),errors:Jt})),ne.setConfig({domStorage:St,settings:D,mediaPlayerModel:Ae,customParametersModel:Te,videoModel:We}),Ae.setConfig({playbackController:ue,serviceDescriptionController:pe}),W.setConfig({adapter:se,errHandler:Re,dashMetrics:we,mediaPlayerModel:Ae,manifestModel:Ce,serviceDescriptionController:pe,throughputController:fe,eventBus:M}),_t(),xt(Kt===void 0||Kt),Bt()),Le&&Cn(Le),ft&&Dt(ft,Yt),q.info("[dash.js "+vn()+"] MediaPlayer has been initialized")):Re.error(new Tt.default(Jt.CAPABILITY_MEDIASOURCE_ERROR_CODE,Jt.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:Pn,isMuted:function(){return rn().muted},isPaused:On,isReady:sn,isSeeking:function(){if(!re)throw y;return ue.isSeeking()},isTextEnabled:function(){const Le=ae.getActiveStreamInfo();return!(!Le||!de)&&de.isTextEnabled(Le)},off:function(Le,ft,Kt){M.off(Le,ft,Kt)},on:function(Le,ft,Kt,Yt){M.on(Le,ft,Kt,Yt)},pause:function(){if(!re)throw y;ue.pause()},play:function(){if(!re)throw y;(!ie||On()&&re)&&ue.play(!0)},preload:function(){if(!We.getElement()&&!X){if(!R)throw w;Vt(J)}},provideThumbnail:function(Le,ft){if(typeof ft!="function")return;if(Le<0)return void ft(null);const Kt=ue.getIsDynamic()?wn(Le):Le,Yt=ae.getStreamForTime(Kt);if(Yt===null)return void ft(null);const Ln=Yt.getThumbnailController();if(Ln)return Ln.provide(Kt,ft);ft(null)},refreshManifest:function(Le){if(!z)throw _;if(!sn())return Le(null,w);let ft=this;if(typeof Le=="function"){const Kt=function(Yt){M.off(f.default.INTERNAL_MANIFEST_LOADED,Kt,ft),Yt.error?Le(null,Yt.error):Le(Yt.manifest)};M.on(f.default.INTERNAL_MANIFEST_LOADED,Kt,ft)}ae.refreshManifest()},registerCustomCapabilitiesFilter:function(Le){Te.registerCustomCapabilitiesFilter(Le)},registerLicenseRequestFilter:function(Le){Te.registerLicenseRequestFilter(Le)},registerLicenseResponseFilter:function(Le){Te.registerLicenseResponseFilter(Le)},removeABRCustomRule:function(Le){Te.removeAbrCustomRule(Le)},removeAllABRCustomRule:function(){Te.removeAllAbrCustomRule()},removeExternalSubtitleById:function(Le){Te.removeExternalSubtitleById(Le)},removeExternalSubtitleByUrl:function(Le){Te.removeExternalSubtitleByUrl(Le)},removeRequestInterceptor:function(Le){Te.removeRequestInterceptor(Le)},removeResponseInterceptor:function(Le){Te.removeResponseInterceptor(Le)},removeUTCTimingSource:function(Le,ft){Te.removeUTCTimingSource(Le,ft)},reset:Mt,resetCustomInitialTrackSelectionFunction:function(){Te.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){D.reset()},restoreDefaultUTCTimingSources:_t,retrieveManifest:function(Le,ft){let Kt=It(),Yt=this;const Ln=function(Et){Et.error?ft(null,Et.error):ft(Et.manifest),M.off(f.default.INTERNAL_MANIFEST_LOADED,Ln,Yt),Kt.reset()};M.on(f.default.INTERNAL_MANIFEST_LOADED,Ln,Yt),lt.initialize(Le),Kt.load(Le)},seek:function(Le){if(!re)throw y;if((0,ut.checkParameterType)(Le,"number"),isNaN(Le))throw h.default.BAD_ARGUMENT_ERROR;Le<0&&(Le=0);let ft=ue.getIsDynamic()?wn(Le):Le;const Kt=rn();!ue.getIsDynamic()&&Kt.duration&&(ft=Math.min(Kt.duration,ft)),ue.seek(ft,!1,!1,!0)},seekToOriginalLive:function(){re&&Pn()&&ue.seekToOriginalLive()},seekToPresentationTime:function(Le){if(!re)throw y;if((0,ut.checkParameterType)(Le,"number"),isNaN(Le))throw h.default.BAD_ARGUMENT_ERROR;Le<0&&(Le=0);const ft=rn();if(!ue.getIsDynamic()&&ft.duration&&(Le=Math.min(ft.duration,Le)),ue.getIsDynamic()){const Kt=ae&&ae.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let Yt=we.getCurrentDVRInfo(Kt);if(!Yt)return;(Le=kn(Le,Yt))<Yt.range.start&&(Le=Yt.range.start)}ue.seek(Le,!1,!1,!0)},setAutoPlay:xt,setConfig:function(Le){Le&&(Le.capabilities&&(Ne=Le.capabilities),Le.capabilitiesFilter&&(ee=Le.capabilitiesFilter),Le.streamController&&(ae=Le.streamController),Le.textController&&(de=Le.textController),Le.gapController&&(le=Le.gapController),Le.throughputController&&(fe=Le.throughputController),Le.playbackController&&(ue=Le.playbackController),Le.serviceDescriptionController&&(pe=Le.serviceDescriptionController),Le.contentSteeringController&&(W=Le.contentSteeringController),Le.clientDataReportingController&&(ln=Le.clientDataReportingController),Le.catchupController&&(be=Le.catchupController),Le.mediaPlayerModel&&(Ae=Le.mediaPlayerModel),Le.customParametersModel&&(Te=Le.customParametersModel),Le.abrController&&(ce=Le.abrController),Le.schemeLoaderFactory&&(me=Le.schemeLoaderFactory),Le.mediaController&&(ne=Le.mediaController),Le.settings&&(D=Le.settings),Le.dashMetrics&&(we=Le.dashMetrics))},setCurrentTrack:function(Le,ft=!1){if(!X)throw b;!K||K.areKeyIdsUsable(Le.normalizedKeyIds)?ne.setTrack(Le,{noSettingsSave:ft}):q.error(`Can not switch to track with index ${Le.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(Le){Te.setCustomInitialTrackSelectionFunction(Le)},setInitialMediaSettingsFor:function(Le,ft){if(!z)throw _;let Kt=(function(Yt){const Ln=D.get().streaming.defaultSchemeIdUri;let Et={};function tn(_n,Sn,Dn){let Rn={};if(Sn){if(Sn instanceof Array)throw"Array type not supported for settings!";return Sn instanceof Object?(Rn.schemeIdUri=Sn.schemeIdUri?Sn.schemeIdUri:"",Rn.value=Sn.value?Sn.value:""):(Rn.schemeIdUri=Dn,Rn.value=Sn,q.warn("No schemeIdUri provided for "+_n+', using default "'+Dn+'"')),Rn}return null}return Yt.id!==void 0&&(Et.id=Yt.id),Yt.lang!==void 0&&(Et.lang=Yt.lang),isNaN(Yt.index)||(Et.index=Yt.index),Yt.viewpoint!==void 0&&(Et.viewpoint=tn("viewpoint",Yt.viewpoint,Ln.viewpoint)),Yt.audioChannelConfiguration!==void 0&&(Et.audioChannelConfiguration=tn("audioChannelConfiguration",Yt.audioChannelConfiguration,Ln.audioChannelConfiguration)),Yt.role!==void 0&&Yt.role!==null&&(Et.role=tn("role",Yt.role,Ln.role),Et.role.schemeIdUri===h.default.DASH_ROLE_SCHEME_ID&&Et.role.value==="Main"&&(Et.role.value=ve.default.MAIN)),Yt.accessibility!==void 0&&(Et.accessibility=tn("accessibility",Yt.accessibility,Ln.accessibility)),Et})(ft);ne.setInitialSettings(Le,Kt)},setMute:function(Le){(0,ut.checkParameterType)(Le,"boolean"),rn().muted=Le},setPlaybackRate:function(Le){rn().playbackRate=Le},setProtectionData:function(Le){P=Le,ae&&ae.setProtectionData(P)},setRepresentationForTypeById:function(Le,ft,Kt=!1){if(Le!==h.default.IMAGE&&Le!==h.default.VIDEO&&Le!==h.default.AUDIO)return;if(!X)throw b;const Yt=Xt();if(Yt)if(Le===h.default.IMAGE){const Ln=Yt.getThumbnailController();Ln&&Ln.setTrackById(ft)}else{const Ln=Yt.getRepresentationForTypeById(Le,ft);Ln&&ce.manuallySetPlaybackQuality(Le,ae.getActiveStreamInfo(),Ln,{forceReplace:Kt})}},setRepresentationForTypeByIndex:function(Le,ft,Kt=!1){if(Le!==h.default.IMAGE&&Le!==h.default.VIDEO&&Le!==h.default.AUDIO)return;if(!X)throw b;const Yt=Xt();if(Yt)if(Le===h.default.IMAGE){const Ln=Yt.getThumbnailController();Ln&&Ln.setTrackByIndex(ft)}else{const Ln=Yt.getRepresentationForTypeByIndex(Le,ft);Ln&&ce.manuallySetPlaybackQuality(Le,ae.getActiveStreamInfo(),Ln,{forceReplace:Kt})}},setTextTrack:function(Le){if(!re)throw y;const ft=ae.getActiveStreamInfo();ft&&de&&de.setTextTrack(ft.id,Le)},setVolume:function(Le){if(typeof Le!="number"||isNaN(Le)||Le<0||Le>1)throw h.default.BAD_ARGUMENT_ERROR;rn().volume=Le},setXHRWithCredentialsForType:function(Le,ft){Te.setXHRWithCredentialsForType(Le,ft)},time:nt,timeAsUTC:function(){if(!re)throw y;if(!ue.getIsDynamic()||nt()<0)return NaN;const Le=ae&&ae.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let ft,Kt,Yt=we.getCurrentDVRInfo(Le);return Yt?(ft=Yt.manifestInfo.availableFrom.getTime()/1e3,Kt=ft+nt(),Kt):0},timeInDvrWindow:function(){if(!re)throw y;if(!ue.getIsDynamic())return nt();let Le=rn().currentTime;const ft=ae&&ae.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let Kt=we.getCurrentDVRInfo(ft);return Le=Kt===null||Le===0?0:Math.max(0,Le-Kt.range.start),Le},trigger:function(Le,ft,Kt){M.trigger(Le,ft,Kt)},triggerSteeringRequest:function(){if(W)return W.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(Le){Te.unregisterCustomCapabilitiesFilter(Le)},unregisterLicenseRequestFilter:function(Le){Te.unregisterLicenseRequestFilter(Le)},unregisterLicenseResponseFilter:function(Le){Te.unregisterLicenseResponseFilter(Le)},updateSettings:function(Le){D.update(Le)},updateSource:function(Le){R=Le,ae.load(R)}},q=N.getLogger($),z=!1,re=!1,X=!1,ie=!0,J=NaN,K=null,Se=null,P=null,se=null,Nt=null,f.default.extend(g.default),Ae=C_(I).getInstance(),Te=(0,yu.default)(I).getInstance(),We=$x(I).getInstance(),lt=Ux(I).getInstance(),$}Uu.__dashjs_factory_name="MediaPlayer";const Rl=n.default.getClassFactory(Uu);Rl.events=g.default,Rl.errors=Jt,n.default.updateClassFactory(Uu.__dashjs_factory_name,Rl);var qx=Rl},1191:function(r,e,t){t.r(e);var n=t(7252);class i extends n.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let o=new i;e.default=o},5212:function(r,e,t){t.r(e),e.default={STREAM:"stream",VIDEO:"video",ENHANCEMENT:"enhancement",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY:"lowestStartupDelay",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",SEGMENT_SEQUENCE_REPRESENTATION_SCHEME_ID_URI:"urn:mpeg:dash:ssr:2023",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(r,e,t){t.r(e),e.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(r,e,t){t.r(e),t.d(e,{default:function(){return F}});class n{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00";var i=n,o=t(913),l=t(138);function c(oe){let Z,Be;const Xe=(oe=oe||{}).eventBus,$e=oe.dashMetrics,Ve=oe.metricsConstants,je=oe.events;function Qe(kt){let wt=new i;if(Be){for(const fn in kt)kt.hasOwnProperty(fn)&&(wt[fn]=kt[fn]);wt.mpdurl||(wt.mpdurl=Be.originalUrl||Be.url),wt.terror||(wt.terror=new Date),$e.addDVBErrors(wt)}}function dt(kt){kt.error||(Be=kt.manifest)}function it(kt){Qe({errorcode:i.BASE_URL_CHANGED,servicelocation:kt.entry})}function rt(){Qe({errorcode:i.BECAME_REPORTER})}function Ot(kt){var wt;kt.metric===Ve.HTTP_REQUEST&&((wt=kt.value).responsecode===0||wt.responsecode==null||wt.responsecode>=400||wt.responsecode<100||wt.responsecode>=600)&&Qe({errorcode:wt.responsecode||i.CONNECTION_ERROR,url:wt.url,terror:wt.tresponse,servicelocation:wt._serviceLocation})}function pt(kt){let wt;switch(kt.error?kt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:wt=i.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:wt=i.CORRUPT_MEDIA_OTHER;break;default:return}Qe({errorcode:wt})}return Z={initialize:function(){Xe.on(je.MANIFEST_UPDATED,dt,Z),Xe.on(je.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,it,Z),Xe.on(je.METRIC_ADDED,Ot,Z),Xe.on(je.METRIC_UPDATED,Ot,Z),Xe.on(je.PLAYBACK_ERROR,pt,Z),Xe.on(o.default.BECAME_REPORTING_PLAYER,rt,Z)},reset:function(){Xe.off(je.MANIFEST_UPDATED,dt,Z),Xe.off(je.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,it,Z),Xe.off(je.METRIC_ADDED,Ot,Z),Xe.off(je.METRIC_UPDATED,Ot,Z),Xe.off(je.PLAYBACK_ERROR,pt,Z),Xe.off(o.default.BECAME_REPORTING_PLAYER,rt,Z)}},Z}c.__dashjs_factory_name="DVBErrorsTranslator";var u=l.default.getSingletonFactory(c),d=t(7377);function m(oe){oe=oe||{};let Z,Be,Xe=!1,$e=this.context,Ve=oe.mediaElement;return Z={initialize:function(je){je&&je.length&&(je.forEach((Qe=>{let dt=Qe.starttime,it=dt+Qe.duration;Be.add(dt,it)})),Xe=!!je[0]._useWallClockTime)},reset:function(){Be.clear()},isEnabled:function(){let je,Qe=Be.length;if(!Qe)return!0;je=Xe?new Date().getTime()/1e3:Ve.currentTime;for(let dt=0;dt<Qe;dt+=1){let it=Be.start(dt),rt=Be.end(dt);if(it<=je&&je<rt)return!0}return!1}},Be=(0,d.default)($e).create(),Z}m.__dashjs_factory_name="RangeController";var f=l.default.getClassFactory(m);function h(){return{serialise:function oe(Z){let Be,Xe,$e=[],Ve=[];for(Be in Z)if(Z.hasOwnProperty(Be)&&Be.indexOf("_")!==0){if(Xe=Z[Be],Xe==null&&(Xe=""),Array.isArray(Xe)){if(!Xe.length)continue;Ve=[],Xe.forEach((function(je){let Qe=Object.prototype.toString.call(je).slice(8,-1)!=="Object";Ve.push(Qe?je:oe(je))})),Xe=Ve.map(encodeURIComponent).join(",")}else typeof Xe=="string"?Xe=encodeURIComponent(Xe):Xe instanceof Date?Xe=Xe.toISOString():typeof Xe=="number"&&(Xe=Math.round(Xe));$e.push(Be+"="+Xe)}return $e.join("&")}}}h.__dashjs_factory_name="MetricSerialiser";var g=l.default.getSingletonFactory(h);function p(){let oe,Z,Be,Xe=window.crypto||window.msCrypto,$e=Uint32Array,Ve=Math.pow(2,8*$e.BYTES_PER_ELEMENT)-1;function je(){Xe&&(oe||(oe=new $e(10)),Xe.getRandomValues(oe),Z=0)}return Be={random:function(Qe,dt){let it;return Qe||(Qe=0),dt||(dt=1),Xe?(Z===oe.length&&je(),it=oe[Z]/Ve,Z+=1):it=Math.random(),it*(dt-Qe)+Qe}},je(),Be}p.__dashjs_factory_name="RNG";var E=l.default.getSingletonFactory(p),S=t(1926);function A(oe){let Z;oe=oe||{};let Be,Xe,$e,Ve,je,Qe,dt,it=this.context,rt=[];const Ot=oe.metricsConstants;function pt(){Ve=!1,je=!1,Qe=null,dt=null}return Z={report:function(kt,wt){Array.isArray(wt)||(wt=[wt]),je&&dt.isEnabled()&&wt.forEach((function(fn){let Tn=Be.serialise(fn);kt!==Ot.DVB_ERRORS&&(Tn=`metricname=${kt}&${Tn}`),Tn=`${Qe}?${Tn}`,(function(Fn,In,dn){let pn=new XMLHttpRequest;pn.withCredentials=Xe.getXHRWithCredentialsForType(Ot.HTTP_REQUEST_DVB_REPORTING_TYPE);const Pt=function(){let At=rt.indexOf(pn);At!==-1&&(rt.splice(At,1),!(pn.status>=200&&pn.status<300)&&dn&&dn())};rt.push(pn);try{pn.open("GET",Fn),pn.onloadend=Pt,pn.onerror=Pt,pn.send()}catch{pn.onerror()}})(Tn,0,(function(){je=!1}))}))},initialize:function(kt,wt){let fn;if(dt=wt,Qe=kt.dvbReportingUrl,!Qe)throw new Error("required parameter missing (dvb:reportingUrl)");Ve||(fn=kt.dvbProbability,fn&&(fn===1e3||fn/1e3>=$e.random())&&(je=!0),Ve=!0)},reset:function(){pt()}},Be=g(it).getInstance(),$e=E(it).getInstance(),Xe=(0,S.default)(it).getInstance(),pt(),Z}A.__dashjs_factory_name="DVBReporting";var x=l.default.getClassFactory(A);function k(oe){oe=oe||{};const Z={"urn:dvb:dash:reporting:2014":x},Be=this.context;let Xe;const $e=oe.debug?oe.debug.getLogger(Xe):{},Ve=oe.metricsConstants,je=oe.mediaPlayerModel||{};return Xe={create:function(Qe,dt){let it;try{it=Z[Qe.schemeIdUri](Be).create({metricsConstants:Ve,mediaPlayerModel:je}),it.initialize(Qe,dt)}catch(rt){it=null,$e.error(`ReportingFactory: could not create Reporting with schemeIdUri ${Qe.schemeIdUri} (${rt.message})`)}return it},register:function(Qe,dt){Z[Qe]=dt},unregister:function(Qe){delete Z[Qe]}},Xe}k.__dashjs_factory_name="ReportingFactory";var U=l.default.getSingletonFactory(k);function Y(oe){let Z,Be=[];const Xe=U(this.context).getInstance(oe);return Z={initialize:function($e,Ve){$e.some((je=>{let Qe=Xe.create(je,Ve);if(Qe)return Be.push(Qe),!0}))},reset:function(){Be.forEach(($e=>$e.reset())),Be=[]},report:function($e,Ve){Be.forEach((je=>je.report($e,Ve)))}},Z}Y.__dashjs_factory_name="ReportingController";var Q=l.default.getClassFactory(Y);function L(){return{reconstructFullMetricName:function(oe,Z,Be){let Xe=oe;return Z&&(Xe+="("+Z,Be&&Be.length&&(Xe+=","+Be),Xe+=")"),Xe},validateN:function(oe){if(!oe)throw new Error("missing n");if(isNaN(oe))throw new Error("n is NaN");if(oe<0)throw new Error("n must be positive");return oe}}}L.__dashjs_factory_name="HandlerHelpers";var O=l.default.getSingletonFactory(L);function G(oe){let Z,Be,Xe,$e,Ve,je;oe=oe||{};let Qe=this.context,dt=O(Qe).getInstance(),it=[];const rt=oe.metricsConstants;function Ot(){let pt=(function(){try{return Object.keys(it).map((kt=>it[kt])).reduce(((kt,wt)=>kt.level<wt.level?kt:wt))}catch{return}})();pt&&je!==pt.t&&(je=pt.t,Be.report($e,pt))}return Z={initialize:function(pt,kt,wt){kt&&(Xe=dt.validateN(wt),Be=kt,$e=dt.reconstructFullMetricName(pt,wt),Ve=setInterval(Ot,Xe))},reset:function(){clearInterval(Ve),Ve=null,Xe=0,Be=null,je=null},handleNewMetric:function(pt,kt,wt){pt===rt.BUFFER_LEVEL&&(it[wt]=kt)}},Z}G.__dashjs_factory_name="BufferLevelHandler";var te=l.default.getClassFactory(G),ge=l.default.getClassFactory((function(oe){let Z,Be,Xe=(oe=oe||{}).eventBus;const $e=oe.metricsConstants;function Ve(){Xe.off(o.default.METRICS_INITIALISATION_COMPLETE,Ve,this),Xe.trigger(o.default.BECAME_REPORTING_PLAYER)}return Z={initialize:function(je,Qe){Qe&&(Be=Qe,Xe.on(o.default.METRICS_INITIALISATION_COMPLETE,Ve,this))},reset:function(){Be=null},handleNewMetric:function(je,Qe){je===$e.DVB_ERRORS&&Be&&Be.report(je,Qe)}},Z}));function Me(oe){let Z,Be,Xe,$e,Ve,je;oe=oe||{};let Qe=[],dt=O(this.context).getInstance();const it=oe.metricsConstants;function rt(){var Ot=Qe;Ot.length&&Be&&Be.report(Ve,Ot),Qe=[]}return Z={initialize:function(Ot,pt,kt,wt){pt&&(Xe=dt.validateN(kt),Be=pt,wt&&wt.length&&($e=wt),Ve=dt.reconstructFullMetricName(Ot,kt,wt),je=setInterval(rt,Xe))},reset:function(){clearInterval(je),je=null,Xe=null,$e=null,Qe=[],Be=null},handleNewMetric:function(Ot,pt){Ot===it.HTTP_REQUEST&&($e&&$e!==pt.type||Qe.push(pt))}},Z}Me.__dashjs_factory_name="HttpListHandler";var he=l.default.getClassFactory(Me);function De(){let oe,Z,Be;return oe={initialize:function(Xe,$e){Z=Xe,Be=$e},reset:function(){Be=null,Z=void 0},handleNewMetric:function(Xe,$e){Xe===Z&&Be&&Be.report(Z,$e)}},oe}De.__dashjs_factory_name="GenericMetricHandler";var _e=l.default.getClassFactory(De);function ke(oe){let Z;const Be=(oe=oe||{}).debug?oe.debug.getLogger(Z):{};let Xe=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const $e=this.context;let Ve={BufferLevel:te,DVBErrors:ge,HttpList:he,PlayList:_e,RepSwitchList:_e,TcpList:_e};return Z={create:function(je,Qe){var dt,it=je.match(Xe);if(it){try{(dt=Ve[it[1]]($e).create({eventBus:oe.eventBus,metricsConstants:oe.metricsConstants})).initialize(it[1],Qe,it[3],it[5])}catch(rt){dt=null,Be.error(`MetricsHandlerFactory: Could not create handler for type ${it[1]} with args ${it[3]}, ${it[5]} (${rt.message})`)}return dt}},register:function(je,Qe){Ve[je]=Qe},unregister:function(je){delete Ve[je]}},Z}ke.__dashjs_factory_name="MetricsHandlerFactory";var Oe=l.default.getSingletonFactory(ke);function He(oe){oe=oe||{};let Z,Be=[];const Xe=this.context,$e=oe.eventBus,Ve=oe.events;let je=Oe(Xe).getInstance({debug:oe.debug,eventBus:oe.eventBus,metricsConstants:oe.metricsConstants});function Qe(dt){Be.forEach((it=>{it.handleNewMetric(dt.metric,dt.value,dt.mediaType)}))}return Z={initialize:function(dt,it){dt.split(",").forEach(((rt,Ot,pt)=>{let kt;if(rt.indexOf("(")!==-1&&rt.indexOf(")")===-1){let wt=pt[Ot+1];wt&&wt.indexOf("(")===-1&&wt.indexOf(")")!==-1&&(rt+=","+wt,delete pt[Ot+1])}kt=je.create(rt,it),kt&&Be.push(kt)})),$e.on(Ve.METRIC_ADDED,Qe,Z),$e.on(Ve.METRIC_UPDATED,Qe,Z)},reset:function(){$e.off(Ve.METRIC_ADDED,Qe,Z),$e.off(Ve.METRIC_UPDATED,Qe,Z),Be.forEach((dt=>dt.reset())),Be=[]}},Z}He.__dashjs_factory_name="MetricsHandlersController";var Pe=l.default.getClassFactory(He);function Ge(oe){let Z,Be,Xe,$e;oe=oe||{};let Ve=this.context;function je(){Z&&Z.reset(),Be&&Be.reset(),Xe&&Xe.reset()}return $e={initialize:function(Qe){try{Xe=f(Ve).create({mediaElement:oe.mediaElement}),Xe.initialize(Qe.Range),Be=Q(Ve).create({debug:oe.debug,metricsConstants:oe.metricsConstants,mediaPlayerModel:oe.mediaPlayerModel}),Be.initialize(Qe.Reporting,Xe),Z=Pe(Ve).create({debug:oe.debug,eventBus:oe.eventBus,metricsConstants:oe.metricsConstants,events:oe.events}),Z.initialize(Qe.metrics,Be)}catch(dt){throw je(),dt}},reset:je},$e}Ge.__dashjs_factory_name="MetricsController";var qe=l.default.getClassFactory(Ge),Ze=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},ct=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},mt=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function xe(oe){let Z,Be=(oe=oe||{}).adapter;const Xe=oe.constants;return Z={getMetrics:function($e){let Ve=[];return $e&&$e.Metrics&&$e.Metrics.forEach((je=>{var Qe=new Ze,dt=Be.getIsDynamic($e);je.hasOwnProperty("metrics")&&(Qe.metrics=je.metrics,je.Range&&je.Range.forEach((it=>{var rt=new ct;rt.starttime=(function(Ot,pt,kt){let wt,fn,Tn=0;return pt?Tn=Be.getAvailabilityStartTime(Ot)/1e3:(wt=Be.getRegularPeriods(Ot),wt.length&&(Tn=wt[0].start)),fn=Tn,kt&&kt.hasOwnProperty(Xe.START_TIME)&&(fn+=kt.starttime),fn})($e,dt,it),it.hasOwnProperty("duration")?rt.duration=it.duration:rt.duration=Be.getDuration($e),rt._useWallClockTime=dt,Qe.Range.push(rt)})),je.Reporting&&(je.Reporting.forEach((it=>{var rt=new mt;it.hasOwnProperty(Xe.SCHEME_ID_URI)&&(rt.schemeIdUri=it.schemeIdUri,it.hasOwnProperty("value")&&(rt.value=it.value),it.hasOwnProperty(Xe.DVB_REPORTING_URL)&&(rt.dvbReportingUrl=it[Xe.DVB_REPORTING_URL]),it.hasOwnProperty(Xe.DVB_PROBABILITY)&&(rt.dvbProbability=it[Xe.DVB_PROBABILITY]),Qe.Reporting.push(rt))})),Ve.push(Qe)))})),Ve}},Z}xe.__dashjs_factory_name="ManifestParsing";var Ie=l.default.getSingletonFactory(xe);function Ke(oe){let Z;oe=oe||{};let Be={},Xe=this.context,$e=oe.eventBus;const Ve=oe.events;function je(dt){if(dt.error)return;let it=Object.keys(Be);Ie(Xe).getInstance({adapter:oe.adapter,constants:oe.constants}).getMetrics(dt.manifest).forEach((rt=>{const Ot=JSON.stringify(rt);if(Be.hasOwnProperty(Ot))it.splice(Ot,1);else try{let pt=qe(Xe).create(oe);pt.initialize(rt),Be[Ot]=pt}catch{}})),it.forEach((rt=>{Be[rt].reset(),delete Be[rt]})),$e.trigger(o.default.METRICS_INITIALISATION_COMPLETE)}function Qe(){Object.keys(Be).forEach((dt=>{Be[dt].reset()})),Be={}}return Z={reset:function(){$e.off(Ve.MANIFEST_UPDATED,je,Z),$e.off(Ve.STREAM_TEARDOWN_COMPLETE,Qe,Z)}},$e.on(Ve.MANIFEST_UPDATED,je,Z),$e.on(Ve.STREAM_TEARDOWN_COMPLETE,Qe,Z),Z}Ke.__dashjs_factory_name="MetricsCollectionController";var H=l.default.getClassFactory(Ke);function V(){let oe,Z,Be=this.context;return oe={createMetricsReporting:function(Xe){return Z=u(Be).getInstance({eventBus:Xe.eventBus,dashMetrics:Xe.dashMetrics,metricsConstants:Xe.metricsConstants,events:Xe.events}),Z.initialize(),H(Be).create(Xe)},getReportingFactory:function(){return U(Be).getInstance()},getMetricsHandlerFactory:function(){return Oe(Be).getInstance()}},oe}V.__dashjs_factory_name="MetricsReporting";const C=l.default.getClassFactory(V);C.events=o.default,l.default.updateClassFactory(V.__dashjs_factory_name,C);var F=C},913:function(r,e,t){t.r(e);var n=t(7252);class i extends n.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let o=new i;e.default=o},1926:function(r,e,t){t.r(e);var n=t(5717),i=t(138),o=t(8261),l=t(656),c=t(5212),u=t(5560);function d(){let m,f,h,g,p,E,S,A,x,k,U;const Y=this.context,Q=(0,o.default)(Y).getInstance();function L(){g=[],p=[],E=[],S=[],A=[],U=[],x=null,f=[],k=new Set}function O(he,De){let _e=-1;he.some(((ke,Oe)=>{if(ke===De)return _e=Oe,!0})),_e<0||he.splice(_e,1)}function G(he){let De;for(De=0;De<U.length;De++)if(U[De].rulename===he)return De;return-1}function te(he,De){let _e=!1;return k.forEach((ke=>{ke[he]===De&&(_e=!0)})),_e}function ge(he,De){Me(he,De);let _e=new n.default;_e.schemeIdUri=he,_e.value=De,f.push(_e)}function Me(he,De){(0,l.checkParameterType)(he,"string"),(0,l.checkParameterType)(De,"string"),f.forEach((function(_e,ke){_e.schemeIdUri===he&&_e.value===De&&f.splice(ke,1)}))}return m={addAbrCustomRule:function(he,De,_e){if(typeof he!="string"||he!==c.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&he!==c.default.RULES_TYPES.QUALITY_SWITCH_RULES||typeof De!="string")throw c.default.BAD_ARGUMENT_ERROR;let ke=G(De);ke===-1?U.push({type:he,rulename:De,rule:_e}):(U[ke].type=he,U[ke].rule=_e)},addExternalSubtitle:function(he){if(!(he&&he.id!==void 0&&he.url&&he.language&&he.mimeType&&he.bandwidth!==void 0))return;const De=new u.default(he);te("url",De.url)||te("id",De.id)||k.add(De)},addRequestInterceptor:function(he){g.push(he)},addResponseInterceptor:function(he){p.push(he)},addUTCTimingSource:ge,clearDefaultUTCTimingSources:function(){f=[]},getAbrCustomRules:function(){return U},getCustomCapabilitiesFilters:function(){return A},getCustomInitialTrackSelectionFunction:function(){return x},getExternalSubtitles:function(){return k},getLicenseRequestFilters:function(){return E},getLicenseResponseFilters:function(){return S},getRequestInterceptors:function(){return g},getResponseInterceptors:function(){return p},getUTCTimingSources:function(){return f},getXHRWithCredentialsForType:function(he){const De=h[he];return De===void 0?h.default:De},registerCustomCapabilitiesFilter:function(he){A.push(he)},registerLicenseRequestFilter:function(he){E.push(he)},registerLicenseResponseFilter:function(he){S.push(he)},removeAbrCustomRule:function(he){if(he){let De=G(he);De!==-1&&U.splice(De,1)}else U=[]},removeAllAbrCustomRule:function(){U=[]},removeExternalSubtitleById:function(he){k.forEach((De=>{De.id===he&&k.delete(De)}))},removeExternalSubtitleByUrl:function(he){k.forEach((De=>{De.url===he&&k.delete(De)}))},removeRequestInterceptor:function(he){O(g,he)},removeResponseInterceptor:function(he){O(p,he)},removeUTCTimingSource:Me,reset:function(){L()},resetCustomInitialTrackSelectionFunction:function(){x=null},resetPlaybackSessionSpecificSettings:function(){k=new Set},restoreDefaultUTCTimingSources:function(){let he=Q.get().streaming.utcSynchronization.defaultTimingSource;ge(he.scheme,he.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(he){x=he},setXHRWithCredentialsForType:function he(De,_e){De?h[De]=!!_e:Object.keys(h).forEach((ke=>{he(ke,_e)}))},unregisterCustomCapabilitiesFilter:function(he){O(A,he)},unregisterLicenseRequestFilter:function(he){O(E,he)},unregisterLicenseResponseFilter:function(he){O(S,he)}},h={default:!1},L(),m}d.__dashjs_factory_name="CustomParametersModel",e.default=i.default.getSingletonFactory(d)},3888:function(r,e,t){t.r(e),t.d(e,{default:function(){return pn}});var n=t(8854),i=t(2861);const o={prefixes:["clearkey","dashif","ck"]};class l{static findMp4ProtectionElement(At){let tt=null;for(let ht=0;ht<At.length;++ht){let Ut=At[ht];Ut.schemeIdUri&&Ut.schemeIdUri.toLowerCase()===n.default.MP4_PROTECTION_SCHEME&&Ut.value&&(Ut.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CENC||Ut.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CBCS)&&(tt=Ut)}return tt}static getPSSHData(At){let tt=8,ht=new DataView(At),Ut=ht.getUint8(tt);return tt+=20,Ut>0&&(tt+=4+16*ht.getUint32(tt)),tt+=4,At.slice(tt)}static getPSSHForKeySystem(At,tt){let ht=l.parsePSSHList(tt);return At&&ht.hasOwnProperty(At.uuid.toLowerCase())?ht[At.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(At,tt){return"pssh"in At&&At.pssh?(At.pssh.__text=At.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),tt.decodeArray(At.pssh.__text).buffer):null}static parsePSSHList(At){if(At==null)return[];let tt=new DataView(At.buffer||At),ht={},Ut=0;for(;;){let Lt,qt,en,Rt,Ft,Wt,Jt=Ut;if(Ut>=tt.buffer.byteLength)break;if(Lt=tt.getUint32(Ut),qt=Ut+Lt,Ut+=4,tt.getUint32(Ut)===1886614376)if(Ut+=4,en=tt.getUint8(Ut),en===0||en===1){for(Ut++,Ut+=3,Rt="",Ft=0;Ft<4;Ft++)Wt=tt.getUint8(Ut+Ft).toString(16),Rt+=Wt.length===1?"0"+Wt:Wt;for(Ut+=4,Rt+="-",Ft=0;Ft<2;Ft++)Wt=tt.getUint8(Ut+Ft).toString(16),Rt+=Wt.length===1?"0"+Wt:Wt;for(Ut+=2,Rt+="-",Ft=0;Ft<2;Ft++)Wt=tt.getUint8(Ut+Ft).toString(16),Rt+=Wt.length===1?"0"+Wt:Wt;for(Ut+=2,Rt+="-",Ft=0;Ft<2;Ft++)Wt=tt.getUint8(Ut+Ft).toString(16),Rt+=Wt.length===1?"0"+Wt:Wt;for(Ut+=2,Rt+="-",Ft=0;Ft<6;Ft++)Wt=tt.getUint8(Ut+Ft).toString(16),Rt+=Wt.length===1?"0"+Wt:Wt;Ut+=6,Rt=Rt.toLowerCase(),Ut+=4,ht[Rt]=tt.buffer.slice(Jt,qt),Ut=qt}else Ut=qt;else Ut=qt}return ht}static getLicenseServerUrlFromMediaInfo(At,tt){try{if(!At||At.length===0)return null;let ht=0,Ut=null;for(;ht<At.length&&!Ut;){const Lt=At[ht];if(Lt&&Lt.contentProtection&&Lt.contentProtection.length>0){const qt=Lt.contentProtection.filter((en=>en.schemeIdUri&&en.schemeIdUri===tt));if(qt&&qt.length>0){let en=0;for(;en<qt.length&&!Ut;){const Rt=qt[en];Rt.laUrl&&Rt.laUrl.__prefix&&o.prefixes.includes(Rt.laUrl.__prefix)&&Rt.laUrl.__text&&(Ut=Rt.laUrl.__text),en+=1}}}ht+=1}return Ut}catch{return null}}static hexKidToBufferSource(At){const tt=At.replace(/-/g,"");return new Uint8Array(tt.match(/[\da-f]{2}/gi).map((function(ht){return parseInt(ht,16)}))).buffer}}var c=l,u=class{constructor(Pt,At){this.contentType=Pt,this.robustness=At}},d=class{constructor(Pt,At,tt,ht,Ut,Lt){this.initDataTypes=Lt&&Lt.length>0?Lt:[i.default.INITIALIZATION_DATA_TYPE_CENC],Pt&&Pt.length&&(this.audioCapabilities=Pt),At&&At.length&&(this.videoCapabilities=At),this.distinctiveIdentifier=tt,this.persistentState=ht,this.sessionTypes=Ut}},m=t(1923),f=t(1944),h=class{constructor(Pt,At,tt,ht,Ut,Lt,qt,en){this.url=Pt,this.method=At,this.responseType=tt,this.headers=ht,this.withCredentials=Ut,this.messageType=Lt,this.sessionId=qt,this.data=en}},g=class{constructor(Pt,At,tt){this.url=Pt,this.headers=At,this.data=tt}},p=t(7568),E=t(7263),S=t(5212),A=t(138);function x(Pt){const At=(Pt=Pt||{}).BASE64,tt=Pt.cmcdModel,ht=Pt.constants,Ut=Pt.customParametersModel,Lt=Pt.debug,qt=Pt.eventBus,en=Pt.events,Rt=Pt.protectionKeyController,Ft=Pt.settings;let Wt,Jt,yt,Zt,un,jt,on,cn,Tt,ut,et,Gt,nn=Pt.protectionModel,bn=[];function $n(){if(!(qt&&qt.hasOwnProperty("on")&&Rt&&Rt.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function Hn(Ht,hn){et||Zt?et&&lr():(function(An,jn){if(Zt)return;var zn;Zt=!0;const Zn=(function(Xn){const Yn=[];for(let Vn=0;Vn<Xn.length;Vn++){const ar=tr(Xn[Vn]);Yn.push({ks:Xn[Vn].ks,configs:[ar],protData:Xn[Vn].protData})}return Yn})(An=(zn=An).sort(((Xn,Yn)=>(Wt&&Wt[Xn.ks.systemString]&&Wt[Xn.ks.systemString].priority>=0?Wt[Xn.ks.systemString].priority:zn.length)-(Wt&&Wt[Yn.ks.systemString]&&Wt[Yn.ks.systemString].priority>=0?Wt[Yn.ks.systemString].priority:zn.length))));let ir;nn.requestKeySystemAccess(Zn).then((Xn=>(ir=Xn.data,(function(Yn){let Vn=Yn&&Yn.selectedSystemString?Yn.selectedSystemString:Yn.keySystem.systemString;return on.info("DRM: KeySystem Access Granted for system string ("+Vn+")!  Selecting key system..."),nn.selectKeySystem(Yn)})(ir)))).then((Xn=>{(function(Yn,Vn){try{et=Yn,Zt=!1,qt.trigger(en.KEY_SYSTEM_SELECTED,{data:Vn});const ar=Gn(et);ar&&ar.serverCertificate&&ar.serverCertificate.length>0&&nn.setServerCertificate(At.decodeArray(ar.serverCertificate).buffer),lr()}catch(ar){on.error(ar)}})(Xn,ir)})).catch((Xn=>{(function(Yn,Vn){et=null,Zt=!1,Vn||qt.trigger(en.KEY_SYSTEM_SELECTED,{data:null,error:new f.default(m.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,m.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Yn.error)})})(Xn,jn)}))})(Ht,hn)}function lr(){let Ht;for(let An=0;An<Tt.length;An++)for(Ht=0;Ht<Tt[An].length;Ht++)if(et===Tt[An][Ht].ks){hn=Tt[An][Ht],Rt.isClearKey(et)&&(function(jn){if(jn.protData&&jn.protData.hasOwnProperty("clearkeys")&&Object.keys(jn.protData.clearkeys).length!==0){const zn={kids:Object.keys(jn.protData.clearkeys)};jn.initData=new TextEncoder().encode(JSON.stringify(zn))}})(hn),hn.sessionId?sr(hn):hn.initData!==null&&ve(hn);break}var hn;Tt=[]}function tr(Ht){const hn=Ht.protData,An=[],jn=[],zn=hn&&hn.initDataTypes&&hn.initDataTypes.length>0?hn.initDataTypes:[i.default.INITIALIZATION_DATA_TYPE_CENC],Zn=hn&&hn.audioRobustness&&hn.audioRobustness.length>0?hn.audioRobustness:ut,ir=hn&&hn.videoRobustness&&hn.videoRobustness.length>0?hn.videoRobustness:ut,Xn=Ht.sessionType,Yn=hn&&hn.distinctiveIdentifier?hn.distinctiveIdentifier:"optional",Vn=hn&&hn.persistentState?hn.persistentState:Xn==="temporary"?"optional":"required";return cn.forEach((ar=>{ar.type===ht.AUDIO?An.push(new u(ar.codec,Zn)):ar.type===ht.VIDEO&&jn.push(new u(ar.codec,ir))})),new d(An,jn,Yn,Vn,[Xn],zn)}function sr(Ht){$n(),nn.loadKeySession(Ht)}function ve(Ht){if(Ht&&(function(An){if(!An)return!1;try{const jn=nn.getSessionTokens();for(let zn=0;zn<jn.length;zn++)if(jn[zn].getKeyId()===An)return!0;return!1}catch{return!1}})(Ht.keyId))return;(function(){if(!Ft)return;const An=Ft.get().streaming.protection.keepProtectionMediaKeys,jn=Ft.get().streaming.protection.keepProtectionMediaKeysMaximumOpenSessions;if(typeof jn!="number"||jn<=0)return;if(!An)return void on.warn("DRM: keepProtectionMediaKeysMaximumOpenSessions is set to "+jn+", but keepProtectionMediaKeys is not enabled. Therefore, keepProtectionMediaKeysMaximumOpenSessions will be ignored.");if(!nn||typeof nn.getSessionTokens!="function")return;const zn=nn.getSessionTokens()||[];if(zn.length<jn)return;const Zn=zn[0];Zn&&(on.info("DRM: Maximum number of open MediaKeySessions reached ("+jn+"), closing oldest session."),Tr(Zn))})();const hn=c.getPSSHForKeySystem(et,Ht?Ht.initData:null);if(hn){if(rr(hn))return;try{Ht.initData=hn,nn.createKeySession(Ht)}catch(An){qt.trigger(en.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+An.message)})}}else Ht&&Ht.initData?nn.createKeySession(Ht):qt.trigger(en.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(et?et.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Gn(Ht){if(Ht){const hn=Ht.systemString;if(Wt)return hn in Wt?Wt[hn]:null}return null}function rr(Ht){if(!Ht)return!1;try{const hn=nn.getAllInitData();for(let An=0;An<hn.length;An++)if(Rt.initDataEquals(Ht,hn[An]))return on.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function Tr(Ht){$n(),nn.closeKeySession(Ht)}function vr(Ht){$n(),Ht?(nn.setMediaElement(Ht),qt.on(en.NEED_KEY,Oi,Jt)):Ht===null&&(nn.setMediaElement(Ht),qt.off(en.NEED_KEY,Oi,Jt))}function Qr(Ht){on.debug("DRM: onKeyMessage");const hn=Ht.data;qt.trigger(en.KEY_MESSAGE,{data:hn});const An=hn.messageType?hn.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,jn=hn.message,zn=hn.sessionToken,Zn=Gn(et),ir=Rt.getLicenseServerModelInstance(et,Zn,An),Xn={sessionToken:zn,messageType:An};if(jn&&jn.byteLength!==0){if(!ir)return on.debug("DRM: License server request not required for this message (type = "+Ht.data.messageType+").  Session ID = "+zn.getSessionId()),void Sr(Xn);if(Rt.isClearKey(et)){const Yn=Rt.processClearKeyLicenseRequest(et,Zn,jn);if(Yn&&Yn.keyPairs&&Yn.keyPairs.length>0)return on.debug("DRM: ClearKey license request handled by application!"),Sr(Xn),void nn.updateKeySession(zn,Yn)}(function(Yn,Vn,ar){const si=Yn.sessionToken,oi=Yn.messageType?Yn.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,li={sessionToken:si,messageType:oi},gn=et?et.systemString:null;let Jn=(function(ur,wa,Ga,Si,fl){let Zr=null;const hl=Si.message;if(ur&&ur.serverURL){const zi=ur.serverURL;typeof zi=="string"&&zi!==""?Zr=zi:typeof zi=="object"&&zi.hasOwnProperty(wa)&&(Zr=zi[wa])}else if(ur&&ur.laURL&&ur.laURL!=="")Zr=ur.laURL;else if(Zr=c.getLicenseServerUrlFromMediaInfo(cn,et.schemeIdURI),!Zr&&!Rt.isClearKey(et)){const zi=c.getPSSHData(Ga.initData);Zr=et.getLicenseServerURLFromInitData(zi),Zr||(Zr=Si.laURL)}return Zr=fl.getServerURLFromMessage(Zr,hl,wa),Zr})(ar,oi,si,Yn,Vn);if(!Jn)return void Sr(li,new f.default(m.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const Ti={};let Hr=!1;ar&&qa(Ti,ar.httpRequestHeaders);const Fi=Yn.message;qa(Ti,et.getRequestHeadersFromMessage(Fi)),Object.keys(Ti).forEach((ur=>{ur.toLowerCase()==="authorization"&&(Hr=!0)})),ar&&typeof ar.withCredentials=="boolean"&&(Hr=ar.withCredentials);const Cr=function(ur){if(nn)if(ur.status>=200&&ur.status<=299){const wa=E.default.parseHttpHeaders(ur.getAllResponseHeaders?ur.getAllResponseHeaders():null);let Ga=new g(ur.responseURL,wa,ur.response);vi(Ut.getLicenseResponseFilters(),Ga).then((()=>{const Si=Vn.getLicenseMessage(Ga.data,gn,oi);Si!==null?(Sr(li),nn.updateKeySession(si,Si)):fs(ur,li,gn,oi,Vn)}))}else fs(ur,li,gn,oi,Vn)},hs=function(ur){Sr(li,new f.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+gn+' update, XHR aborted. status is "'+ur.statusText+'" ('+ur.status+"), readyState is "+ur.readyState))},cr=function(ur){Sr(li,new f.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+gn+' update, XHR error. status is "'+ur.statusText+'" ('+ur.status+"), readyState is "+ur.readyState))},oo=et.getLicenseRequestFromMessage(Fi),lo=Vn.getHTTPMethod(oi),co=Vn.getResponseType(gn,oi),uo=ar&&!isNaN(ar.httpTimeout)?ar.httpTimeout:8e3,ul=si.getSessionId()||null;let fo=new h(Jn,lo,co,Ti,Hr,oi,ul,oo);const dl=isNaN(Ft.get().streaming.retryAttempts[p.HTTPRequest.LICENSE])?3:Ft.get().streaming.retryAttempts[p.HTTPRequest.LICENSE];vi(Ut.getLicenseRequestFilters(),fo).then((()=>{Mi(fo,dl,uo,Cr,hs,cr)}))})(hn,ir,Zn)}else Sr(Xn,new f.default(m.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Sr(Ht,hn=null){qt.trigger(en.LICENSE_REQUEST_COMPLETE,{data:Ht,error:hn})}function Mi(Ht,hn,An,jn,zn,Zn){const ir=new XMLHttpRequest,Xn=tt.getCmcdParametersFromManifest();if(tt.isCmcdEnabled()&&(Xn.mode?Xn.mode:Ft.get().streaming.cmcd.mode)===S.default.CMCD_MODE_QUERY){const Vn=tt.getQueryParameter({url:Ht.url,type:p.HTTPRequest.LICENSE});Vn&&(Ht.url=E.default.addAdditionalQueryParameterToUrl(Ht.url,[Vn]))}ir.open(Ht.method,Ht.url,!0),ir.responseType=Ht.responseType,ir.withCredentials=Ht.withCredentials,An>0&&(ir.timeout=An);for(const Vn in Ht.headers)ir.setRequestHeader(Vn,Ht.headers[Vn]);if(tt.isCmcdEnabled()&&(Xn.mode?Xn.mode:Ft.get().streaming.cmcd.mode)===S.default.CMCD_MODE_HEADER){const Vn=tt.getHeaderParameters({url:Ht.url,type:p.HTTPRequest.LICENSE});if(Vn)for(const ar in Vn){let si=Vn[ar];si&&ir.setRequestHeader(ar,si)}}const Yn=function(){hn--;const Vn=isNaN(Ft.get().streaming.retryIntervals[p.HTTPRequest.LICENSE])?1e3:Ft.get().streaming.retryIntervals[p.HTTPRequest.LICENSE];un=setTimeout((function(){Mi(Ht,hn,An,jn,zn,Zn)}),Vn)};ir.onload=function(){jt=null,this.status>=200&&this.status<=299||hn<=0?jn(this):(on.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+hn),Yn())},ir.ontimeout=ir.onerror=function(){jt=null,hn<=0?Zn(this):(on.warn("License request network request failed . Retrying it... Pending retries: "+hn),Yn())},ir.onabort=function(){zn(this)},qt.trigger(en.LICENSE_REQUEST_SENDING,{url:Ht.url,headers:Ht.headers,payload:Ht.data,sessionId:Ht.sessionId}),jt=ir,ir.send(Ht.data)}function Ta(){jt&&(jt.onloadend=jt.onerror=jt.onprogress=void 0,jt.abort(),jt=null),un&&(clearTimeout(un),un=null)}function qa(Ht,hn){if(hn)for(const An in hn)Ht[An]=hn[An]}function fs(Ht,hn,An,jn,zn){let Zn="NONE",ir=null;Ht.response&&(Zn=zn.getErrorResponse(Ht.response,An,jn),ir={serverResponse:Ht.response||null,responseCode:Ht.status||null,responseText:Ht.statusText||null}),Sr(hn,new f.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+An+' update, XHR complete. status is "'+Ht.statusText+'" ('+Ht.status+"), readyState is "+Ht.readyState+".  Response is "+Zn,ir))}function vi(Ht,hn){return Ht?Ht.reduce(((An,jn)=>An.then((()=>jn(hn)))),Promise.resolve()):Promise.resolve()}function Oi(Ht,hn){if(Ft.get().streaming.protection.ignoreEmeEncryptedEvent)return;if(on.debug("DRM: onNeedKey"),Ht.key.initDataType!==i.default.INITIALIZATION_DATA_TYPE_CENC)return void on.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Ht.key.initDataType);if(cn.length===0&&(on.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(hn=hn===void 0?1:hn+1)<5))return void bn.push(setTimeout((()=>{Oi(Ht,hn)}),500));let An=Ht.key.initData;if(ArrayBuffer.isView(An)&&(An=An.buffer),et){const zn=c.getPSSHForKeySystem(et,An);if(zn&&rr(zn))return}on.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(An)));const jn=Rt.getSupportedKeySystemMetadataFromSegmentPssh(An,Wt,Gt);jn.length!==0?(function(zn){Tt.push(zn),Hn(zn,!1)})(jn):on.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}function Sa(Ht,hn){if(Ht.size<=0)return!1;if(hn.size>0&&[...Ht].every((jn=>{const zn=hn.get(jn);return zn!==void 0&&zn!==""})))return!0;const An=nn.getSessionTokens();if(An&&An.length>0){const jn=An.filter((zn=>[...Ht].includes(zn.normalizedKeyId)));if(jn.some((zn=>!zn.hasTriggeredKeyStatusMapUpdate))||jn.length===0)return!1}return!Ft.get().streaming.protection.ignoreKeyStatuses&&Ht&&Ht.size>0&&hn&&hn.size>0}return Jt={areKeyIdsExpired:function(Ht){try{return!!Sa(Ht,yt)&&[...Ht].every((hn=>yt.get(hn)===i.default.MEDIA_KEY_STATUSES.EXPIRED))}catch(hn){return on.error(hn),!1}},areKeyIdsUsable:function(Ht){try{return!Sa(Ht,yt)||[...Ht].some((hn=>{const An=yt.get(hn);return An&&An!==i.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&An!==i.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED}))}catch(hn){return on.error(hn),!0}},clearMediaInfoArray:function(){cn=[]},closeKeySession:Tr,createKeySession:ve,getKeySystems:function(){return Rt?Rt.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function(Ht){return $n(),Rt.getSupportedKeySystemMetadataFromContentProtection(Ht,Wt,Gt)},handleKeySystemFromManifest:function(){if(!cn||cn.length===0)return;let Ht=[];cn.forEach((hn=>{const An=Rt.getSupportedKeySystemMetadataFromContentProtection(hn.contentProtection,Wt,Gt);An.length>0&&(Ht.length===0&&(Ht=An),Tt.push(An))})),Ht&&Ht.length>0&&Hn(Ht,!0)},initializeForMedia:function(Ht){if(!Ht)throw new Error("mediaInfo can not be null or undefined");$n(),cn.push(Ht)},loadKeySession:sr,removeKeySession:function(Ht){$n(),nn.removeKeySession(Ht)},reset:function(){qt.off(en.INTERNAL_KEY_MESSAGE,Qr,Jt),$n(),Ta(),vr(null),et=null,Zt=!1,yt=new Map,nn&&(nn.reset(),nn=null),bn.forEach((Ht=>clearTimeout(Ht))),bn=[],cn=[],Tt=[]},setKeySystems:function(Ht){Rt&&Rt.setKeySystems(Ht)},setMediaElement:vr,setProtectionData:function(Ht){Wt=Ht,Rt.setProtectionData(Ht)},setRobustnessLevel:function(Ht){ut=Ht},setServerCertificate:function(Ht){return $n(),nn.setServerCertificate(Ht)},setSessionType:function(Ht){Gt=Ht},stop:function(){Ta(),nn&&nn.stop()},updateKeyStatusesMap:function(Ht){try{if(!Ht||!Ht.sessionToken||!Ht.parsedKeyStatuses)return;Ht.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const hn=Ht.parsedKeyStatuses,An=E.default.parseUserAgent(),jn=An&&An.browser&&An.browser.name&&An.browser.name.toLowerCase()==="edge";hn.forEach((zn=>{jn&&et.uuid===i.default.PLAYREADY_UUID&&zn.keyId&&zn.keyId.byteLength===16&&(function(ir){const Xn=E.default.bufferSourceToDataView(ir),Yn=Xn.getUint32(0,!0),Vn=Xn.getUint16(4,!0),ar=Xn.getUint16(6,!0);Xn.setUint32(0,Yn,!1),Xn.setUint16(4,Vn,!1),Xn.setUint16(6,ar,!1)})(zn.keyId);const Zn=E.default.bufferSourceToHex(zn.keyId).slice(0,32);Zn&&Zn!==""&&yt.set(Zn,zn.status)})),qt.trigger(en.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:yt})}catch(hn){on.error(hn)}}},on=Lt.getLogger(Jt),Tt=[],cn=[],Gt="temporary",ut="",jt=null,un=null,yt=new Map,qt.on(en.INTERNAL_KEY_MESSAGE,Qr,Jt),Jt}x.__dashjs_factory_name="ProtectionController";var k=A.default.getClassFactory(x),U=class{constructor(Pt,At){this.keyID=Pt,this.key=At}},Y=class{constructor(Pt,At){if(At&&At!=="persistent"&&At!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Pt,this.type=At}toJWK(){let Pt,At=this.keyPairs.length,tt={keys:[]};for(Pt=0;Pt<At;Pt++){let en={kty:"oct",alg:"A128KW",kid:this.keyPairs[Pt].keyID,k:this.keyPairs[Pt].key};tt.keys.push(en)}this.type&&(tt.type=this.type);let ht=JSON.stringify(tt);const Ut=ht.length;let Lt=new ArrayBuffer(Ut),qt=new Uint8Array(Lt);for(Pt=0;Pt<Ut;Pt++)qt[Pt]=ht.charCodeAt(Pt);return Lt}};const Q=i.default.CLEARKEY_UUID,L=i.default.CLEARKEY_KEYSTEM_STRING,O="urn:uuid:"+Q;function G(Pt){let At;const tt=(Pt=Pt||{}).BASE64;return At={uuid:Q,schemeIdURI:O,systemString:L,getInitData:function(ht,Ut){try{let Lt=c.parseInitDataFromContentProtection(ht,tt);if(!Lt&&Ut){const qt={kids:[(function(en){try{let Rt=en.replace(/-/g,"");return Rt=btoa(Rt.match(/\w{2}/g).map((Ft=>String.fromCharCode(parseInt(Ft,16)))).join("")),Rt.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}})(Ut.cencDefaultKid)]};Lt=new TextEncoder().encode(JSON.stringify(qt))}return Lt}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(ht){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(ht))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(ht,Ut){let Lt=null;if(ht){const qt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Ut))),en=[];for(let Rt=0;Rt<qt.kids.length;Rt++){const Ft=qt.kids[Rt],Wt=ht.clearkeys&&ht.clearkeys.hasOwnProperty(Ft)?ht.clearkeys[Ft]:null;if(!Wt)throw new Error("DRM: ClearKey keyID ("+Ft+") is not known!");en.push(new U(Ft,Wt))}Lt=new Y(en)}return Lt}},At}G.__dashjs_factory_name="KeySystemClearKey";var te=A.default.getSingletonFactory(G);const ge=i.default.W3C_CLEARKEY_UUID,Me=i.default.CLEARKEY_KEYSTEM_STRING,he="urn:uuid:"+ge;function De(Pt){let At;const tt=Pt.BASE64,ht=Pt.debug.getLogger(At);return At={uuid:ge,schemeIdURI:he,systemString:Me,getInitData:function(Ut){return c.parseInitDataFromContentProtection(Ut,tt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Ut){return new Uint8Array(Ut)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Ut,Lt){let qt=null;if(Ut){const en=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Lt))),Rt=[];for(let Ft=0;Ft<en.kids.length;Ft++){const Wt=en.kids[Ft],Jt=Ut.clearkeys&&Ut.clearkeys.hasOwnProperty(Wt)?Ut.clearkeys[Wt]:null;if(!Jt)throw new Error("DRM: ClearKey keyID ("+Wt+") is not known!");Rt.push(new U(Wt,Jt))}qt=new Y(Rt),ht.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return qt}},At}De.__dashjs_factory_name="KeySystemW3CClearKey";var _e=A.default.getSingletonFactory(De);const ke=i.default.WIDEVINE_UUID,Oe=i.default.WIDEVINE_KEYSTEM_STRING,He="urn:uuid:"+ke;function Pe(Pt){let At;const tt=(Pt=Pt||{}).BASE64;return At={uuid:ke,schemeIdURI:He,systemString:Oe,getInitData:function(ht){return c.parseInitDataFromContentProtection(ht,tt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(ht){return new Uint8Array(ht)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},At}Pe.__dashjs_factory_name="KeySystemWidevine";var Ge=A.default.getSingletonFactory(Pe);const qe=i.default.PLAYREADY_UUID,Ze=i.default.PLAYREADY_KEYSTEM_STRING,ct="urn:uuid:"+qe;function mt(Pt){let At,tt="utf-16";const ht=(Pt=Pt||{}).BASE64,Ut=Pt.settings;function Lt(){if(!ht||!ht.hasOwnProperty("decodeArray")||!ht.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return At={uuid:qe,schemeIdURI:ct,systemString:Ze,getInitData:function(qt){const en=new Uint8Array([112,115,115,104,0,0,0,0]),Rt=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let Ft,Wt,Jt,yt,Zt,un=0,jt=null;if(Lt(),!qt)return null;if("pssh"in qt&&qt.pssh)return c.parseInitDataFromContentProtection(qt,ht);if("pro"in qt&&qt.pro)jt=ht.decodeArray(qt.pro.__text);else{if(!("prheader"in qt)||!qt.prheader)return null;jt=ht.decodeArray(qt.prheader.__text)}return Ft=jt.length,Wt=4+en.length+Rt.length+4+Ft,Jt=new ArrayBuffer(Wt),yt=new Uint8Array(Jt),Zt=new DataView(Jt),Zt.setUint32(un,Wt),un+=4,yt.set(en,un),un+=en.length,yt.set(Rt,un),un+=Rt.length,Zt.setUint32(un,Ft),un+=4,yt.set(jt,un),un+=Ft,yt.buffer},getRequestHeadersFromMessage:function(qt){let en,Rt;const Ft={},Wt=new DOMParser;if(Ut&&Ut.get().streaming.protection.detectPlayreadyMessageFormat&&tt==="utf-16"&&qt&&qt.byteLength%2==1)return Ft["Content-Type"]="text/xml; charset=utf-8",Ft;const Jt=tt==="utf-16"?new Uint16Array(qt):new Uint8Array(qt);en=String.fromCharCode.apply(null,Jt),Rt=Wt.parseFromString(en,"application/xml");const yt=Rt.getElementsByTagName("name"),Zt=Rt.getElementsByTagName("value");for(let un=0;un<yt.length;un++)Ft[yt[un].childNodes[0].nodeValue]=Zt[un].childNodes[0].nodeValue;return Ft.hasOwnProperty("Content")&&(Ft["Content-Type"]=Ft.Content,delete Ft.Content),Ft.hasOwnProperty("Content-Type")||(Ft["Content-Type"]="text/xml; charset=utf-8"),Ft},getLicenseRequestFromMessage:function(qt){let en=null;const Rt=new DOMParser;if(Ut&&Ut.get().streaming.protection.detectPlayreadyMessageFormat&&tt==="utf-16"&&qt&&qt.byteLength%2==1)return qt;const Ft=tt==="utf-16"?new Uint16Array(qt):new Uint8Array(qt);Lt();const Wt=String.fromCharCode.apply(null,Ft),Jt=Rt.parseFromString(Wt,"application/xml");if(!Jt.getElementsByTagName("PlayReadyKeyMessage")[0])return qt;{const yt=Jt.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;yt&&(en=ht.decode(yt))}return en},getLicenseServerURLFromInitData:function(qt){if(qt){const en=new DataView(qt),Rt=en.getUint16(4,!0);let Ft=6;const Wt=new DOMParser;for(let Jt=0;Jt<Rt;Jt++){const yt=en.getUint16(Ft,!0);Ft+=2;const Zt=en.getUint16(Ft,!0);if(Ft+=2,yt!==1){Ft+=Zt;continue}const un=qt.slice(Ft,Ft+Zt),jt=String.fromCharCode.apply(null,new Uint16Array(un)),on=Wt.parseFromString(jt,"application/xml");if(on.getElementsByTagName("LA_URL")[0]){const cn=on.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(cn)return cn}if(on.getElementsByTagName("LUI_URL")[0]){const cn=on.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(cn)return cn}}}return null},getCDMData:function(qt){let en,Rt,Ft,Wt;if(Lt(),!qt)return null;for(en=[],Wt=0;Wt<qt.length;++Wt)en.push(qt.charCodeAt(Wt)),en.push(0);for(en=String.fromCharCode.apply(null,en),en=ht.encode(en),Rt='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",en),Ft=[],Wt=0;Wt<Rt.length;++Wt)Ft.push(Rt.charCodeAt(Wt)),Ft.push(0);return new Uint8Array(Ft).buffer},setPlayReadyMessageFormat:function(qt){if(qt!=="utf-8"&&qt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');tt=qt}},At}mt.__dashjs_factory_name="KeySystemPlayReady";var xe=A.default.getSingletonFactory(mt);function Ie(Pt){const At=(Pt=Pt||{}).BASE64,tt={};let ht;return tt[i.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Ut){return At.decodeArray(Ut.license)},getErrorResponse:function(Ut){return Ut}},tt[i.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Ut){return Ut},getErrorResponse:function(Ut){return String.fromCharCode.apply(null,new Uint8Array(Ut))}},ht={getServerURLFromMessage:function(Ut){return Ut},getHTTPMethod:function(){return"POST"},getResponseType:function(Ut){return tt[Ut].responseType},getLicenseMessage:function(Ut,Lt){return(function(){if(!At||!At.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")})(),tt[Lt].getLicenseMessage(Ut)},getErrorResponse:function(Ut,Lt){return tt[Lt].getErrorResponse(Ut)}},ht}Ie.__dashjs_factory_name="DRMToday";var Ke=A.default.getSingletonFactory(Ie);function H(){let Pt;const At="http://schemas.xmlsoap.org/soap/envelope/";function tt(Lt){const qt=String.fromCharCode.apply(null,new Uint8Array(Lt));return decodeURIComponent(escape(qt))}function ht(Lt){if(window.DOMParser){const qt=tt(Lt),en=new window.DOMParser().parseFromString(qt,"text/xml"),Rt=en?en.getElementsByTagNameNS(At,"Envelope")[0]:null,Ft=Rt?Rt.getElementsByTagNameNS(At,"Body")[0]:null;if(Ft&&Ft.getElementsByTagNameNS(At,"Fault")[0])return null}return Lt}function Ut(Lt){let qt="",en="",Rt="",Ft=-1,Wt=-1;if(window.DOMParser){const yt=tt(Lt),Zt=new window.DOMParser().parseFromString(yt,"text/xml"),un=Zt?Zt.getElementsByTagNameNS(At,"Envelope")[0]:null,jt=un?un.getElementsByTagNameNS(At,"Body")[0]:null,on=jt?jt.getElementsByTagNameNS(At,"Fault")[0]:null,cn=on?on.getElementsByTagName("detail")[0]:null,Tt=cn?cn.getElementsByTagName("Exception")[0]:null;let ut=null;if(on===null)return yt;ut=on.getElementsByTagName("faultstring")[0].firstChild,qt=ut?ut.nodeValue:null,Tt!==null&&(ut=Tt.getElementsByTagName("StatusCode")[0],en=ut?ut.firstChild.nodeValue:null,ut=Tt.getElementsByTagName("Message")[0],Rt=ut?ut.firstChild.nodeValue:null,Ft=Rt?Rt.lastIndexOf("[")+1:-1,Wt=Rt?Rt.indexOf("]"):-1,Rt=Rt?Rt.substring(Ft,Wt):"")}let Jt=`code: ${en}, name: ${qt}`;return Rt&&(Jt+=`, message: ${Rt}`),Jt}return Pt={getServerURLFromMessage:function(Lt){return Lt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Lt){return ht.call(this,Lt)},getErrorResponse:function(Lt){return Ut.call(this,Lt)}},Pt}H.__dashjs_factory_name="PlayReady";var V=A.default.getSingletonFactory(H);function C(){let Pt;return Pt={getServerURLFromMessage:function(At){return At},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(At){return At},getErrorResponse:function(At){return String.fromCharCode.apply(null,new Uint8Array(At))}},Pt}C.__dashjs_factory_name="Widevine";var F=A.default.getSingletonFactory(C);function oe(){let Pt;return Pt={getServerURLFromMessage:function(At){return At},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(At){if(!At.hasOwnProperty("keys"))return null;let tt=[];for(let ht=0;ht<At.keys.length;ht++){let Ut=At.keys[ht],Lt=Ut.kid.replace(/=/g,""),qt=Ut.k.replace(/=/g,"");tt.push(new U(Lt,qt))}return new Y(tt)},getErrorResponse:function(At){return String.fromCharCode.apply(null,new Uint8Array(At))}},Pt}oe.__dashjs_factory_name="ClearKey";var Z=A.default.getSingletonFactory(oe),Be=class{constructor(Pt){this.ks=Pt.ks,this.keyId=Pt.keyId,this.initData=Pt.initData,this.protData=Pt.protData,this.cdmData=Pt.cdmData,this.sessionId=Pt.sessionId,this.sessionType=Pt.sessionType}};function Xe(){let Pt,At,tt,ht,Ut,Lt,qt,en,Rt=this.context;function Ft(yt,Zt){return Zt&&yt in Zt?Zt[yt]:null}function Wt(yt,Zt){return yt&&yt.sessionId?yt.sessionId:Zt&&Zt.sessionId?Zt.sessionId:null}function Jt(yt,Zt){return yt&&yt.sessionType?yt.sessionType:Zt}return Pt={getKeySystemBySystemString:function(yt){for(let Zt=0;Zt<ht.length;Zt++)if(ht[Zt].systemString===yt)return ht[Zt];return null},getKeySystems:function(){return ht},getLicenseServerModelInstance:function(yt,Zt,un){if(un===i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||un===i.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let jt=null;return Zt&&Zt.hasOwnProperty("drmtoday")?jt=Ke(Rt).getInstance({BASE64:Ut}):yt.systemString===i.default.WIDEVINE_KEYSTEM_STRING?jt=F(Rt).getInstance():yt.systemString===i.default.PLAYREADY_KEYSTEM_STRING?jt=V(Rt).getInstance():yt.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(jt=Z(Rt).getInstance()),jt},getSupportedKeySystemMetadataFromContentProtection:function(yt,Zt,un){let jt,on,cn,Tt,ut=[];if(!yt||!yt.length)return ut;const et=c.findMp4ProtectionElement(yt);for(cn=0;cn<ht.length;cn++){on=ht[cn];const Gt=Ft(on.systemString,Zt);for(Tt=0;Tt<yt.length;Tt++)if(jt=yt[Tt],jt.schemeIdUri.toLowerCase()===on.schemeIdURI){let nn=on.getInitData(jt,et);const bn=new Be({ks:ht[cn],keyId:jt.keyId,initData:nn,protData:Gt,cdmData:on.getCDMData(Gt?Gt.cdmData:null),sessionId:Wt(Gt,jt),sessionType:Jt(Gt,un)});Gt?ut.unshift(bn):ut.push(bn)}}return ut},getSupportedKeySystemMetadataFromSegmentPssh:function(yt,Zt,un){let jt,on,cn=[],Tt=c.parsePSSHList(yt);for(let ut=0;ut<ht.length;++ut){jt=ht[ut],on=jt.systemString;const et=Ft(on,Zt);jt.uuid in Tt&&cn.push({ks:jt,initData:Tt[jt.uuid],protData:et,cdmData:jt.getCDMData(et?et.cdmData:null),sessionId:Wt(et),sessionType:Jt(et,un)})}return cn},initDataEquals:function(yt,Zt){if(yt.byteLength===Zt.byteLength){let un=new Uint8Array(yt),jt=new Uint8Array(Zt);for(let on=0;on<un.length;on++)if(un[on]!==jt[on])return!1;return!0}return!1},initialize:function(){let yt;ht=[],yt=xe(Rt).getInstance({BASE64:Ut,settings:Lt}),ht.push(yt),yt=Ge(Rt).getInstance({BASE64:Ut}),ht.push(yt),yt=te(Rt).getInstance({BASE64:Ut}),ht.push(yt),qt=yt,yt=_e(Rt).getInstance({BASE64:Ut,debug:At}),ht.push(yt),en=yt},isClearKey:function(yt){return yt===qt||yt===en},processClearKeyLicenseRequest:function(yt,Zt,un){try{return yt.getClearKeysFromProtectionData(Zt,un)}catch{return tt.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(yt){yt&&(yt.debug&&(At=yt.debug,tt=At.getLogger(Pt)),yt.BASE64&&(Ut=yt.BASE64),yt.settings&&(Lt=yt.settings))},setKeySystems:function(yt){ht=yt},setProtectionData:function(yt){for(var Zt,un,jt=0;jt<ht.length;jt++){var on=ht[jt];on.hasOwnProperty("init")&&on.init((Zt=on.systemString,un=void 0,un=null,yt&&(un=Zt in yt?yt[Zt]:null),un))}}},Pt}Xe.__dashjs_factory_name="ProtectionKeyController";var $e=A.default.getSingletonFactory(Xe),Ve=t(445),je=class{constructor(Pt,At){this.initData=Pt,this.initDataType=At}},Qe=class{constructor(Pt,At,tt,ht){this.sessionToken=Pt,this.message=At,this.defaultURL=tt,this.messageType=ht||i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},dt=class{constructor(Pt,At){this.keySystem=Pt,this.ksConfiguration=At,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const it={};function rt(Pt){Pt=Pt||{};const At=this.context,tt=Pt.eventBus,ht=Pt.events,Ut=Pt.debug;let Lt,qt,en,Rt,Ft,Wt,Jt,yt;function Zt(ut,et,Gt,nn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){const tr="Insecure origins are not allowed";return tt.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{error:tr}),void nn({error:tr})}const bn=ut[et].protData&&ut[et].protData.systemStringPriority?ut[et].protData.systemStringPriority:null,$n=ut[et].configs,Hn=ut[et].ks;let lr=Hn.systemString;(function(tr,sr){return new Promise(((ve,Gn)=>{un(tr,sr,0,ve,Gn)}))})(bn||(it[lr]?it[lr]:[lr]),$n).then((tr=>{const sr=tr&&tr.nativeMediaKeySystemAccessObject&&typeof tr.nativeMediaKeySystemAccessObject.getConfiguration=="function"?tr.nativeMediaKeySystemAccessObject.getConfiguration():null,ve=new dt(Hn,sr);ve.selectedSystemString=tr.selectedSystemString,ve.nativeMediaKeySystemAccessObject=tr.nativeMediaKeySystemAccessObject,tt.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{data:ve}),Gt({data:ve})})).catch((tr=>{if(et+1<ut.length)Zt(ut,et+1,Gt,nn);else{const sr="Key system access denied! ";tt.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{error:sr+tr.message}),nn({error:sr+tr.message})}}))}function un(ut,et,Gt,nn,bn){const $n=ut[Gt];qt.debug(`Requesting key system access for system string ${$n}`),navigator.requestMediaKeySystemAccess($n,et).then((Hn=>{nn({nativeMediaKeySystemAccessObject:Hn,selectedSystemString:$n})})).catch((Hn=>{Gt+1<ut.length?un(ut,et,Gt+1,nn,bn):bn(Hn)}))}function jt(ut){if(!ut||!ut.session)return Promise.resolve;const et=ut.session;return et.removeEventListener("keystatuseschange",ut),et.removeEventListener("message",ut),et.close()}function on(ut){for(let et=0;et<Wt.length;et++)if(Wt[et]===ut){Wt.splice(et,1);break}}function cn(ut,et){const Gt={session:ut,keyId:et.keyId,normalizedKeyId:et&&et.keyId&&typeof et.keyId=="string"?et.keyId.replace(/-/g,"").toLowerCase():"",initData:et.initData,sessionId:et.sessionId,sessionType:et.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(nn){switch(nn.type){case"keystatuseschange":this._onKeyStatusesChange(nn);break;case"message":this._onKeyMessage(nn)}},_onKeyStatusesChange:function(nn){tt.trigger(ht.KEY_STATUSES_CHANGED,{data:this});const bn=[];nn.target.keyStatuses.forEach((function(){bn.push(Tt(arguments))})),tt.trigger(ht.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:bn,sessionToken:Gt})},_onKeyMessage:function(nn){let bn=ArrayBuffer.isView(nn.message)?nn.message.buffer:nn.message;tt.trigger(ht.INTERNAL_KEY_MESSAGE,{data:new Qe(this,bn,void 0,nn.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return ut.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return ut.expiration},getKeyStatuses:function(){return ut.keyStatuses},getUsable:function(){let nn=!1;return ut.keyStatuses.forEach((function(){Tt(arguments).status===i.default.MEDIA_KEY_STATUSES.USABLE&&(nn=!0)})),nn}};return ut.addEventListener("keystatuseschange",Gt),ut.addEventListener("message",Gt),ut.closed.then((()=>{on(Gt),qt.debug("DRM: Session closed.  SessionID = "+Gt.getSessionId()),tt.trigger(ht.KEY_SESSION_CLOSED,{data:Gt.getSessionId()})})),Wt.push(Gt),Gt}function Tt(ut){let et,Gt;return ut&&ut.length>0&&(ut[0]&&(typeof ut[0]=="string"?et=ut[0]:Gt=ut[0]),ut[1]&&(typeof ut[1]=="string"?et=ut[1]:Gt=ut[1])),{status:et,keyId:Gt}}return Lt={closeKeySession:function(ut){jt(ut).catch((function(et){on(ut),tt.trigger(ht.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+ut.getSessionId()+") "+et.name})}))},createKeySession:function(ut){if(!en||!Ft)throw new Error("Can not create sessions until you have selected a key system");const et=Ft.createSession(ut.sessionType),Gt=cn(et,ut),nn=en.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(ut.initData||ut.protData&&ut.protData.clearkeys)?i.default.INITIALIZATION_DATA_TYPE_KEYIDS:i.default.INITIALIZATION_DATA_TYPE_CENC;et.generateRequest(nn,ut.initData).then((function(){qt.debug("DRM: Session created.  SessionID = "+Gt.getSessionId()),tt.trigger(ht.KEY_SESSION_CREATED,{data:Gt})})).catch((function(bn){on(Gt),tt.trigger(ht.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+bn.name)})}))},getAllInitData:function(){const ut=[];for(let et=0;et<Wt.length;et++)Wt[et].initData&&ut.push(Wt[et].initData);return ut},getSessionTokens:function(){return Wt},loadKeySession:function(ut){if(!en||!Ft)throw new Error("Can not load sessions until you have selected a key system");const et=ut.sessionId;for(let bn=0;bn<Wt.length;bn++)if(et===Wt[bn].sessionId)return void qt.warn("DRM: Ignoring session ID because we have already seen it!");const Gt=Ft.createSession(ut.sessionType),nn=cn(Gt,ut);nn.hasTriggeredKeyStatusMapUpdate=!0,Gt.load(et).then((function(bn){bn?(qt.debug("DRM: Session loaded.  SessionID = "+nn.getSessionId()),tt.trigger(ht.KEY_SESSION_CREATED,{data:nn})):(on(nn),tt.trigger(ht.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+et+")")}))})).catch((function(bn){on(nn),tt.trigger(ht.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+et+")! "+bn.name)})}))},removeKeySession:function(ut){ut.session.remove().then((function(){qt.debug("DRM: Session removed.  SessionID = "+ut.getSessionId()),tt.trigger(ht.KEY_SESSION_REMOVED,{data:ut.getSessionId()})}),(function(et){tt.trigger(ht.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+ut.getSessionId()+"). "+et.name})}))},requestKeySystemAccess:function(ut){return new Promise(((et,Gt)=>{Zt(ut,0,et,Gt)}))},reset:function(){const ut=Wt.length;let et;if(ut!==0){const Gt=function(nn){on(nn),Wt.length===0&&(Rt?(Rt.removeEventListener("encrypted",Jt),Rt.setMediaKeys(null).then((function(){tt.trigger(ht.TEARDOWN_COMPLETE)}))):tt.trigger(ht.TEARDOWN_COMPLETE))};for(let nn=0;nn<ut;nn++)et=Wt[nn],(function(bn){jt(et),Gt(bn)})(et)}else tt.trigger(ht.TEARDOWN_COMPLETE)},selectKeySystem:function(ut){return new Promise(((et,Gt)=>{ut.nativeMediaKeySystemAccessObject.createMediaKeys().then((nn=>(en=ut.keySystem,Ft=nn,Rt?Rt.setMediaKeys(Ft):Promise.resolve()))).then((()=>{et(en)})).catch((function(){Gt({error:"Error selecting keys system ("+ut.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(ut){Rt!==ut&&(Rt&&(Rt.removeEventListener("encrypted",Jt),Rt.setMediaKeys&&Rt.setMediaKeys(null)),Rt=ut,Rt&&(Rt.addEventListener("encrypted",Jt),Rt.setMediaKeys&&Ft&&Rt.setMediaKeys(Ft)))},setServerCertificate:function(ut){return new Promise((et=>{Ft.setServerCertificate(ut).then((function(){qt.info("DRM: License server certificate successfully updated."),tt.trigger(ht.SERVER_CERTIFICATE_UPDATED),et()})).catch((Gt=>{tt.trigger(ht.SERVER_CERTIFICATE_UPDATED,{error:new f.default(m.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,m.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+Gt.name)}),et()}))}))},stop:function(){let ut;for(let et=0;et<Wt.length;et++)ut=Wt[et],ut.getUsable()||(jt(ut),on(ut))},updateKeySession:function(ut,et){const Gt=ut.session;yt.isClearKey(en)&&(et=et.toJWK()),Gt.update(et).then((()=>{tt.trigger(ht.KEY_SESSION_UPDATED)})).catch((function(nn){tt.trigger(ht.KEY_ERROR,{error:new f.default(m.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+nn.name,ut)})}))}},qt=Ut.getLogger(Lt),en=null,Rt=null,Ft=null,Wt=[],yt=$e(At).getInstance(),Jt={handleEvent:function(ut){if(ut.type==="encrypted"&&ut.initData){let et=ArrayBuffer.isView(ut.initData)?ut.initData.buffer:ut.initData;tt.trigger(ht.NEED_KEY,{key:new je(et,ut.initDataType)})}}},Lt}it[i.default.PLAYREADY_KEYSTEM_STRING]=[i.default.PLAYREADY_KEYSTEM_STRING,i.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],it[i.default.WIDEVINE_KEYSTEM_STRING]=[i.default.WIDEVINE_KEYSTEM_STRING],it[i.default.CLEARKEY_KEYSTEM_STRING]=[i.default.CLEARKEY_KEYSTEM_STRING],rt.__dashjs_factory_name="DefaultProtectionModel";var Ot=A.default.getClassFactory(rt);function pt(Pt){Pt=Pt||{};const At=this.context,tt=Pt.eventBus,ht=Pt.events,Ut=Pt.debug,Lt=Pt.api;let qt,en,Rt,Ft,Wt,Jt,yt,Zt,un;function jt(){try{for(let Tt=0;Tt<yt.length;Tt++)on(yt[Tt]);Rt&&Rt.removeEventListener(Lt.needkey,Zt),tt.trigger(ht.TEARDOWN_COMPLETE)}catch(Tt){tt.trigger(ht.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+Tt.message})}}function on(Tt){const ut=Tt.session;ut.removeEventListener(Lt.error,Tt),ut.removeEventListener(Lt.message,Tt),ut.removeEventListener(Lt.ready,Tt),ut.removeEventListener(Lt.close,Tt);for(let et=0;et<yt.length;et++)if(yt[et]===Tt){yt.splice(et,1);break}ut[Lt.release]()}function cn(){let Tt=null;const ut=function(){Rt.removeEventListener("loadedmetadata",Tt),Rt[Lt.setMediaKeys](Wt),tt.trigger(ht.VIDEO_ELEMENT_SELECTED)};Rt.readyState>=1?ut():(Tt=ut.bind(this),Rt.addEventListener("loadedmetadata",Tt))}return qt={getAllInitData:function(){const Tt=[];for(let ut=0;ut<yt.length;ut++)Tt.push(yt[ut].initData);return Tt},getSessionTokens:function(){return yt},requestKeySystemAccess:function(Tt){return new Promise(((ut,et)=>{let Gt=!1;for(let nn=0;nn<Tt.length;nn++){const bn=Tt[nn].ks.systemString,$n=Tt[nn].configs;let Hn=null,lr=null;for(let tr=0;tr<$n.length;tr++){const sr=$n[tr].audioCapabilities,ve=$n[tr].videoCapabilities;if(sr&&sr.length!==0){Hn=[];for(let vr=0;vr<sr.length;vr++)window[Lt.MediaKeys].isTypeSupported(bn,sr[vr].contentType)&&Hn.push(sr[vr])}if(ve&&ve.length!==0){lr=[];for(let vr=0;vr<ve.length;vr++)window[Lt.MediaKeys].isTypeSupported(bn,ve[vr].contentType)&&lr.push(ve[vr])}if(!Hn&&!lr||Hn&&Hn.length===0||lr&&lr.length===0)continue;Gt=!0;const Gn=new d(Hn,lr),rr=un.getKeySystemBySystemString(bn),Tr=new dt(rr,Gn);tt.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{data:Tr}),ut({data:Tr});break}}if(!Gt){const nn="Key system access denied! -- No valid audio/video content configurations detected!";tt.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{error:nn}),et({error:nn})}}))},selectKeySystem:function(Tt){return new Promise(((ut,et)=>{try{Wt=Tt.mediaKeys=new window[Lt.MediaKeys](Tt.keySystem.systemString),Ft=Tt.keySystem,Jt=Tt,Rt&&cn(),ut(Ft)}catch{et({error:"Error selecting keys system ("+Ft.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(Tt){Rt!==Tt&&(Rt&&Rt.removeEventListener(Lt.needkey,Zt),Rt=Tt,Rt&&(Rt.addEventListener(Lt.needkey,Zt),Wt&&cn()))},createKeySession:function(Tt){if(!Ft||!Wt||!Jt)throw new Error("Can not create sessions until you have selected a key system");let ut=null;if(Jt.ksConfiguration.videoCapabilities&&Jt.ksConfiguration.videoCapabilities.length>0&&(ut=Jt.ksConfiguration.videoCapabilities[0]),ut===null&&Jt.ksConfiguration.audioCapabilities&&Jt.ksConfiguration.audioCapabilities.length>0&&(ut=Jt.ksConfiguration.audioCapabilities[0]),ut===null)throw new Error("Can not create sessions for unknown content types.");const et=ut.contentType,Gt=Wt.createSession(et,new Uint8Array(Tt.initData),Tt.cdmData?new Uint8Array(Tt.cdmData):null),nn=(function(bn,$n){return{session:bn,keyId:$n.keyId,normalizedKeyId:$n&&$n.keyId&&typeof $n.keyId=="string"?$n.keyId.replace(/-/g,"").toLowerCase():"",initData:$n.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(Hn){switch(Hn.type){case Lt.error:let lr="KeyError";tt.trigger(ht.KEY_ERROR,{error:new f.default(m.default.MEDIA_KEYERR_CODE,lr,this)});break;case Lt.message:let tr=ArrayBuffer.isView(Hn.message)?Hn.message.buffer:Hn.message;tt.trigger(ht.INTERNAL_KEY_MESSAGE,{data:new Qe(this,tr,Hn.destinationURL)});break;case Lt.ready:en.debug("DRM: Key added."),tt.trigger(ht.KEY_ADDED);break;case Lt.close:en.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),tt.trigger(ht.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}})(Gt,Tt);Gt.addEventListener(Lt.error,nn),Gt.addEventListener(Lt.message,nn),Gt.addEventListener(Lt.ready,nn),Gt.addEventListener(Lt.close,nn),yt.push(nn),en.debug("DRM: Session created.  SessionID = "+nn.getSessionId()),tt.trigger(ht.KEY_SESSION_CREATED,{data:nn})},updateKeySession:function(Tt,ut){const et=Tt.session;un.isClearKey(Ft)?et.update(new Uint8Array(ut.toJWK())):et.update(new Uint8Array(ut)),tt.trigger(ht.KEY_SESSION_UPDATED)},closeKeySession:on,setServerCertificate:function(){return Promise.resolve()},loadKeySession:function(){},removeKeySession:function(){},stop:jt,reset:jt},en=Ut.getLogger(qt),Rt=null,Ft=null,Wt=null,Jt=null,yt=[],un=$e(At).getInstance(),Zt={handleEvent:function(Tt){if(Tt.type===Lt.needkey&&Tt.initData){const ut=ArrayBuffer.isView(Tt.initData)?Tt.initData.buffer:Tt.initData;tt.trigger(ht.NEED_KEY,{key:new je(ut,i.default.INITIALIZATION_DATA_TYPE_CENC)})}}},qt}pt.__dashjs_factory_name="ProtectionModel_3Feb2014";var kt=A.default.getClassFactory(pt);function wt(Pt){Pt=Pt||{};const At=this.context,tt=Pt.eventBus,ht=Pt.events,Ut=Pt.debug,Lt=Pt.api,qt=Pt.errHandler;let en,Rt,Ft,Wt,Jt,yt,Zt,un,jt;function on(){Ft&&ut();for(let et=0;et<Zt.length;et++)cn(Zt[et]);tt.trigger(ht.TEARDOWN_COMPLETE)}function cn(et){try{Ft[Lt.cancelKeyRequest](Wt.systemString,et.sessionId)}catch(Gt){tt.trigger(ht.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+et.sessionId+") "+Gt.message})}}function Tt(et,Gt){if(Gt&&et){const nn=et.length;for(let bn=0;bn<nn;bn++)if(et[bn].sessionId==Gt)return et[bn];return null}return null}function ut(){Ft.removeEventListener(Lt.keyerror,jt),Ft.removeEventListener(Lt.needkey,jt),Ft.removeEventListener(Lt.keymessage,jt),Ft.removeEventListener(Lt.keyadded,jt)}return en={getAllInitData:function(){const et=[];for(let Gt=0;Gt<yt.length;Gt++)et.push(yt[Gt].initData);for(let Gt=0;Gt<Zt.length;Gt++)et.push(Zt[Gt].initData);return et},getSessionTokens:function(){return Zt.concat(yt)},requestKeySystemAccess:function(et){return new Promise(((Gt,nn)=>{let bn=Ft;bn||(bn=document.createElement("video"));let $n=!1;for(let Hn=0;Hn<et.length;Hn++){const lr=et[Hn].ks.systemString,tr=et[Hn].configs;let sr=null,ve=null;for(let Gn=0;Gn<tr.length;Gn++){const rr=tr[Gn].videoCapabilities;if(rr&&rr.length!==0){ve=[];for(let Sr=0;Sr<rr.length;Sr++)bn.canPlayType(rr[Sr].contentType,lr)!==""&&ve.push(rr[Sr])}if(!ve||sr||ve&&ve.length===0)continue;$n=!0;const Tr=new d(sr,ve),vr=Jt.getKeySystemBySystemString(lr),Qr=new dt(vr,Tr);tt.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{data:Qr}),Gt({data:Qr});break}}if(!$n){const Hn="Key system access denied! -- No valid audio/video content configurations detected!";tt.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{error:Hn}),nn({error:Hn})}}))},selectKeySystem:function(et){return Wt=et.keySystem,Promise.resolve(Wt)},setMediaElement:function(et){if(Ft!==et){if(Ft){ut();for(var Gt=0;Gt<Zt.length;Gt++)cn(Zt[Gt]);Zt=[]}Ft=et,Ft&&(Ft.addEventListener(Lt.keyerror,jt),Ft.addEventListener(Lt.needkey,jt),Ft.addEventListener(Lt.keymessage,jt),Ft.addEventListener(Lt.keyadded,jt),tt.trigger(ht.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(et){if(!Wt)throw new Error("Can not create sessions until you have selected a key system");if(un||Zt.length===0){const Gt={sessionId:null,keyId:et.keyId,normalizedKeyId:et&&et.keyId&&typeof et.keyId=="string"?et.keyId.replace(/-/g,"").toLowerCase():"",initData:et.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return yt.push(Gt),Ft[Lt.generateKeyRequest](Wt.systemString,new Uint8Array(et.initData)),Gt}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(et,Gt){const nn=et.sessionId;if(Jt.isClearKey(Wt))for(let bn=0;bn<Gt.keyPairs.length;bn++)Ft[Lt.addKey](Wt.systemString,Gt.keyPairs[bn].key,Gt.keyPairs[bn].keyID,nn);else Ft[Lt.addKey](Wt.systemString,new Uint8Array(Gt),new Uint8Array(et.initData),nn);tt.trigger(ht.KEY_SESSION_UPDATED)},closeKeySession:cn,setServerCertificate:function(){return Promise.resolve()},loadKeySession:function(){},removeKeySession:function(){},stop:on,reset:on},Rt=Ut.getLogger(en),Ft=null,Wt=null,yt=[],Zt=[],Jt=$e(At).getInstance(),jt={handleEvent:function(et){let Gt=null;switch(et.type){case Lt.needkey:let nn=ArrayBuffer.isView(et.initData)?et.initData.buffer:et.initData;tt.trigger(ht.NEED_KEY,{key:new je(nn,i.default.INITIALIZATION_DATA_TYPE_CENC)});break;case Lt.keyerror:if(Gt=Tt(Zt,et.sessionId),Gt||(Gt=Tt(yt,et.sessionId)),Gt){let bn=m.default.MEDIA_KEYERR_CODE,$n="";switch(et.errorCode.code){case 1:bn=m.default.MEDIA_KEYERR_UNKNOWN_CODE,$n+="MEDIA_KEYERR_UNKNOWN - "+m.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:bn=m.default.MEDIA_KEYERR_CLIENT_CODE,$n+="MEDIA_KEYERR_CLIENT - "+m.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:bn=m.default.MEDIA_KEYERR_SERVICE_CODE,$n+="MEDIA_KEYERR_SERVICE - "+m.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:bn=m.default.MEDIA_KEYERR_OUTPUT_CODE,$n+="MEDIA_KEYERR_OUTPUT - "+m.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:bn=m.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,$n+="MEDIA_KEYERR_HARDWARECHANGE - "+m.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:bn=m.default.MEDIA_KEYERR_DOMAIN_CODE,$n+="MEDIA_KEYERR_DOMAIN - "+m.default.MEDIA_KEYERR_DOMAIN_MESSAGE}$n+="  System Code = "+et.systemCode,tt.trigger(ht.KEY_ERROR,{error:new f.default(bn,$n,Gt)})}else Rt.error("No session token found for key error");break;case Lt.keyadded:Gt=Tt(Zt,et.sessionId),Gt||(Gt=Tt(yt,et.sessionId)),Gt?(Rt.debug("DRM: Key added."),tt.trigger(ht.KEY_ADDED,{data:Gt})):Rt.debug("No session token found for key added");break;case Lt.keymessage:if(un=et.sessionId!==null&&et.sessionId!==void 0,un?(Gt=Tt(Zt,et.sessionId),!Gt&&yt.length>0&&(Gt=yt.shift(),Zt.push(Gt),Gt.sessionId=et.sessionId,tt.trigger(ht.KEY_SESSION_CREATED,{data:Gt}))):yt.length>0&&(Gt=yt.shift(),Zt.push(Gt),yt.length!==0&&qt.error(new f.default(m.default.MEDIA_KEY_MESSAGE_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Gt){let bn=ArrayBuffer.isView(et.message)?et.message.buffer:et.message;Gt.keyMessage=bn,tt.trigger(ht.INTERNAL_KEY_MESSAGE,{data:new Qe(Gt,bn,et.defaultURL)})}else Rt.warn("No session token found for key message")}}},en}wt.__dashjs_factory_name="ProtectionModel_01b";var fn=A.default.getClassFactory(wt);const Tn=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Fn=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function In(){let Pt;const At=this.context;function tt(ht,Ut){for(let Lt=0;Lt<Ut.length;Lt++){const qt=Ut[Lt];if(typeof ht[qt[Object.keys(qt)[0]]]=="function")return qt}return null}return Pt={createProtectionSystem:function(ht){let Ut=null;const Lt=$e(At).getInstance();Lt.setConfig({debug:ht.debug,BASE64:ht.BASE64,settings:ht.settings}),Lt.initialize();let qt=(function(en){const Rt=en.debug,Ft=Rt.getLogger(Pt),Wt=en.eventBus,Jt=en.errHandler,yt=en.videoModel?en.videoModel.getElement():null;return yt&&yt.onencrypted===void 0||yt&&yt.mediaKeys===void 0?tt(yt,Fn)?(Ft.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),kt(At).create({debug:Rt,eventBus:Wt,events:en.events,api:tt(yt,Fn)})):tt(yt,Tn)?(Ft.info("EME detected on this user agent! (ProtectionModel_01b)"),fn(At).create({debug:Rt,eventBus:Wt,errHandler:Jt,events:en.events,api:tt(yt,Tn)})):(Ft.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Ft.info("EME detected on this user agent! (DefaultProtectionModel"),Ot(At).create({debug:Rt,eventBus:Wt,events:en.events}))})(ht);return qt&&(Ut=k(At).create({BASE64:ht.BASE64,cmcdModel:ht.cmcdModel,constants:ht.constants,customParametersModel:ht.customParametersModel,debug:ht.debug,eventBus:ht.eventBus,events:ht.events,protectionKeyController:Lt,protectionModel:qt,settings:ht.settings}),ht.capabilities.setEncryptedMediaSupported(!0)),Ut}},Pt}In.__dashjs_factory_name="Protection";const dn=A.default.getClassFactory(In);dn.events=Ve.default,dn.errors=m.default,A.default.updateClassFactory(In.__dashjs_factory_name,dn);var pn=dn},445:function(r,e,t){t.r(e);var n=t(7252);class i extends n.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let o=new i;e.default=o},1923:function(r,e,t){t.r(e);var n=t(8748);class i extends n.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let o=new i;e.default=o},4246:function(r,e,t){t.r(e);var n=t(138);const i={DEFAULT:.5,STRONG:1,WEAK:0};function o(c,u,d,m){let f,h,g,p,E;return h=c===void 0?null:c,g=(function(S){let A=i.DEFAULT;return S!==i.DEFAULT&&S!==i.STRONG&&S!==i.WEAK||(A=S),A})(d),p=u===void 0?null:u,E=m===void 0?null:m,f={representation:h,reason:p,rule:E,priority:g},f}o.__dashjs_factory_name="SwitchRequest";const l=n.default.getClassFactory(o);l.NO_CHANGE=null,l.PRIORITY=i,n.default.updateClassFactory(o.__dashjs_factory_name,l),e.default=l},559:function(r,e,t){t.r(e),t.d(e,{supportsMediaSource:function(){return u}});var n=t(138),i=t(5212),o=t(2861),l=t(7393),c=t(649);function u(){let m="ManagedMediaSource"in window,f="WebKitMediaSource"in window,h="MediaSource"in window;return m||f||h}function d(){let m,f,h,g,p,E;const S=this.context,A=(0,l.default)(S).getInstance();function x(L,O){let G;O===i.default.VIDEO?G=(function(ge){const Me={video:{}};return ge&&(ge.width&&(Me.video.width=ge.width),ge.height&&(Me.video.height=ge.height),ge.framerate&&(Me.video.framerate=parseFloat(ge.framerate)),ge.hdrMetadataType&&(Me.video.hdrMetadataType=ge.hdrMetadataType),ge.colorGamut&&(Me.video.colorGamut=ge.colorGamut),ge.transferFunction&&(Me.video.transferFunction=ge.transferFunction)),Me})(L):O===i.default.AUDIO&&(G=(function(ge){const Me={audio:{}};return ge.samplerate&&(Me.audio.samplerate=ge.samplerate),ge.channels&&(Me.audio.channels=ge.channels),Me})(L)),G[O].contentType=L.codec,G[O].bitrate=parseInt(L.bitrate),G.type="media-source";let te=L.codec;return L.width&&L.height&&(te+=';width="'+L.width+'";height="'+L.height+'"'),G.mediaSourceCodecString=te,(function(ge,Me,he){if(!Me||!Me.keySystemsMetadata||Me.keySystemsMetadata.length===0)return[ge];const De=[];return Me.keySystemsMetadata.forEach((_e=>{if(!_e.ks)return void De.push({...ge});const ke=_e.protData&&_e.protData.systemStringPriority?_e.protData.systemStringPriority:null;let Oe=_e.ks.systemString;(ke||[Oe]).forEach((He=>{const Pe={...ge};Pe.keySystemConfiguration={},He&&(Pe.keySystemConfiguration.keySystem=He);let Ge="";_e.ks.systemString===o.default.WIDEVINE_KEYSTEM_STRING&&(Ge=o.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const qe=_e.protData,Ze=qe&&qe.audioRobustness&&qe.audioRobustness.length>0?qe.audioRobustness:Ge,ct=qe&&qe.videoRobustness&&qe.videoRobustness.length>0?qe.videoRobustness:Ge;he===i.default.AUDIO?Pe.keySystemConfiguration[he]={robustness:Ze}:he===i.default.VIDEO&&(Pe.keySystemConfiguration[he]={robustness:ct}),De.push(Pe)}))})),De})(G,L,O)}function k(L){return f.get().streaming.enhancement.codecs.some((O=>L.includes(O)))}function U(L){if(g&&g.length!==0&&L)return g.find((O=>{const G=Y(L,O,i.default.AUDIO),te=Y(L,O,i.default.VIDEO),ge=Y(L,O,"keySystemConfiguration");return G&&te&&ge}))}function Y(L,O,G){return!L[G]&&!O[G]||!(!L[G]||!O[G])&&A.areEqual(L[G],O[G])}function Q(L,O){return(L=L.filter((G=>!(G.schemeIdUri&&O.some((te=>te.schemeIdUri===G.schemeIdUri)))))).push(...O),L}return m={areKeyIdsExpired:function(L){return!!(h&&L&&L.normalizedKeyIds&&L.normalizedKeyIds.size!==0)&&h.areKeyIdsExpired(L.normalizedKeyIds)},areKeyIdsUsable:function(L){return!(h&&L&&L.normalizedKeyIds&&L.normalizedKeyIds.size!==0)||h.areKeyIdsUsable(L.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(L,O){if(!L||!L.codec||L.isSupported===!1)return!1;const G=x(L,O).map((te=>U(te))).filter((te=>te!=null));return!(G&&G.length>0)||(function(te){return te.some((ge=>ge&&ge.decodingInfo&&ge.decodingInfo.supported))})(G)},isProtectionCompatible:function(L,O){return!O||!(!L.isEncrypted&&O.isEncrypted)},runCodecSupportCheck:function(L,O){if(O!==i.default.AUDIO&&O!==i.default.VIDEO)return Promise.resolve();if(f.get().streaming.enhancement.enabled&&k(L.codec))return g=g.filter((te=>!k(te.mediaSourceCodecString))),Promise.resolve(!0);const G=x(L,O);return(function(te,ge){return f.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(te.codec&&ge===i.default.AUDIO||ge===i.default.VIDEO&&te.codec&&te.width&&te.height&&te.bitrate&&te.framerate)})(L,O)?(function(te){return new Promise((ge=>{if(!te||te.length===0)return void ge();const Me=te.map((he=>(function(De){return new Promise((_e=>{U(De)?_e():navigator.mediaCapabilities.decodingInfo(De).then((ke=>{De.decodingInfo=ke,g.push(De),_e()})).catch((ke=>{De.decodingInfo={supported:!1},g.push(De),E.error(ke),_e()}))}))})(he)));Promise.allSettled(Me).then((()=>{ge()})).catch((he=>{E.error(he),ge()}))}))})(G):((function(te){if(!te||!te.length)return;const ge=te[0];if(U(ge))return;let Me={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(ge.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(ge.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(ge.mediaSourceCodecString))&&(Me.supported=!0),ge.decodingInfo=Me,g.push(ge)})(G),Promise.resolve())},setConfig:function(L){L&&(L.settings&&(f=L.settings),L.protectionController&&(h=L.protectionController))},setEncryptedMediaSupported:function(L){p=L},setProtectionController:function(L){h=L},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return p},supportsEssentialProperty:function(L){let O=f.get().streaming.capabilities.supportedEssentialProperties;f.get().streaming.capabilities.useMediaCapabilitiesApi&&f.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(O=Q(O,[{schemeIdUri:i.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:i.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:i.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),f.get().streaming.capabilities.useMediaCapabilitiesApi&&f.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(O=Q(O,[{schemeIdUri:i.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return L.inArray(O)}catch{return!0}},supportsMediaSource:u},p=!1,g=[],E=(0,c.default)(S).getInstance().getLogger(m),m}d.__dashjs_factory_name="Capabilities",e.default=n.default.getSingletonFactory(d)},7377:function(r,e,t){t.r(e);var n=t(138),i=t(656);function o(){return{customTimeRangeArray:[],length:0,add:function(l,c){let u;for(u=0;u<this.customTimeRangeArray.length&&l>this.customTimeRangeArray[u].start;u++);for(this.customTimeRangeArray.splice(u,0,{start:l,end:c}),u=0;u<this.customTimeRangeArray.length-1;u++)this.mergeRanges(u,u+1)&&u--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(l,c){for(let u=0;u<this.customTimeRangeArray.length;u++)if(l<=this.customTimeRangeArray[u].start&&c>=this.customTimeRangeArray[u].end)this.customTimeRangeArray.splice(u,1),u--;else{if(l>this.customTimeRangeArray[u].start&&c<this.customTimeRangeArray[u].end){this.customTimeRangeArray.splice(u+1,0,{start:c,end:this.customTimeRangeArray[u].end}),this.customTimeRangeArray[u].end=l;break}l>this.customTimeRangeArray[u].start&&l<this.customTimeRangeArray[u].end?this.customTimeRangeArray[u].end=l:c>this.customTimeRangeArray[u].start&&c<this.customTimeRangeArray[u].end&&(this.customTimeRangeArray[u].start=c)}this.length=this.customTimeRangeArray.length},mergeRanges:function(l,c){let u=this.customTimeRangeArray[l],d=this.customTimeRangeArray[c];return u.start<=d.start&&d.start<=u.end&&u.end<=d.end?(u.end=d.end,this.customTimeRangeArray.splice(c,1),!0):d.start<=u.start&&u.start<=d.end&&d.end<=u.end?(u.start=d.start,this.customTimeRangeArray.splice(c,1),!0):d.start<=u.start&&u.start<=d.end&&u.end<=d.end?(this.customTimeRangeArray.splice(l,1),!0):u.start<=d.start&&d.start<=u.end&&d.end<=u.end&&(this.customTimeRangeArray.splice(c,1),!0)},start:function(l){return(0,i.checkInteger)(l),l>=this.customTimeRangeArray.length||l<0?NaN:this.customTimeRangeArray[l].start},end:function(l){return(0,i.checkInteger)(l),l>=this.customTimeRangeArray.length||l<0?NaN:this.customTimeRangeArray[l].end}}}o.__dashjs_factory_name="CustomTimeRanges",e.default=n.default.getClassFactory(o)},7393:function(r,e,t){t.r(e);var n=t(138),i=t(7316);function o(){let l;return l={areEqual:function(c,u){return i(c,u)}},l}o.__dashjs_factory_name="ObjectUtils",e.default=n.default.getSingletonFactory(o)},656:function(r,e,t){t.r(e),t.d(e,{checkInteger:function(){return o},checkIsVideoOrAudioType:function(){return c},checkParameterType:function(){return i},checkRange:function(){return l}});var n=t(5212);function i(u,d){if(typeof u!==d)throw n.default.BAD_ARGUMENT_ERROR}function o(u){if(u===null||isNaN(u)||u%1!=0)throw n.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function l(u,d,m){if(u<d||u>m)throw n.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function c(u){if(typeof u!="string"||u!==n.default.AUDIO&&u!==n.default.VIDEO)throw n.default.BAD_ARGUMENT_ERROR}},1944:function(r,e,t){t.r(e),e.default=class{constructor(n,i,o){this.code=n||null,this.message=i||null,this.data=o||null}}},5560:function(r,e,t){t.r(e);var n=t(8854);e.default=class{constructor(i){this.id=i.id,this.url=i.url,this.language=i.language,this.mimeType=i.mimeType,this.bandwidth=i.bandwidth,this.periodId=i.periodId||null}serializeToMpdParserFormat(){return{tagName:n.default.ADAPTATION_SET,mimeType:this.mimeType,lang:this.language,Representation:[{tagName:n.default.REPRESENTATION,id:this.id,bandwidth:this.bandwidth,BaseURL:[{tagName:n.default.BASE_URL,__text:this.url}],mimeType:this.mimeType}]}}}},7568:function(r,e,t){t.r(e),t.d(e,{HTTPRequest:function(){return n},HTTPRequestTrace:function(){return i}});class n{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class i{constructor(){this.s=null,this.d=null,this.b=[]}}n.GET="GET",n.HEAD="HEAD",n.MPD_TYPE="MPD",n.XLINK_EXPANSION_TYPE="XLinkExpansion",n.INIT_SEGMENT_TYPE="InitializationSegment",n.INDEX_SEGMENT_TYPE="IndexSegment",n.MEDIA_SEGMENT_TYPE="MediaSegment",n.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",n.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",n.DVB_REPORTING_TYPE="DVBReporting",n.LICENSE="license",n.CONTENT_STEERING_TYPE="ContentSteering",n.OTHER_TYPE="other"}},uE={};function Br(r){var e=uE[r];if(e!==void 0)return e.exports;var t=uE[r]={exports:{}};return zU[r].call(t.exports,t,t.exports,Br),t.exports}Br.amdO={},Br.d=function(r,e){for(var t in e)Br.o(e,t)&&!Br.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},Br.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),Br.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},Br.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var Di={};Br.r(Di),Br.d(Di,{Constants:function(){return HS.default},Debug:function(){return GS.default},ExternalSubtitle:function(){return KS.default},MediaPlayer:function(){return UU.MediaPlayer},MediaPlayerFactory:function(){return qS},MetricsReporting:function(){return $S.default},Protection:function(){return jS.default},default:function(){return $U},supportsMediaSource:function(){return VS.supportsMediaSource}});var UU=Br(5393),$S=Br(4469),jS=Br(3888),BU=Br(8200);let dE,mc=(function(){const r="application/dash+xml";let e;function t(i,o,l){if(!i||!/^VIDEO$/i.test(i.nodeName))return null;if(i._dashjs_player)return i._dashjs_player;let c,u=i.id||i.name||"video element";if(!(o=o||[].slice.call(i.querySelectorAll("source")).filter((function(d){return d.type==r}))[0])&&i.src)(o=document.createElement("source")).src=i.src;else if(!o&&!i.src)return null;return l=l||{},c=(0,BU.default)(l).create(),c.initialize(i,o.src,i.autoplay),e||(e=c.getDebug().getLogger()),e.debug("Converted "+u+" to dash.js player and added content: "+o.src),i._dashjs_player=c,c}function n(i){return/^VIDEO$/i.test(i.nodeName)?i:n(i.parentNode)}return{create:t,createAll:function(i,o){let l=[];i=i||"[data-dashjs-player]";let c=(o=o||document).querySelectorAll(i);for(let d=0;d<c.length;d++){let m=t(c[d],null);l.push(m)}let u=o.querySelectorAll('source[type="'+r+'"]');for(let d=0;d<u.length;d++){let m=t(n(u[d]),null);l.push(m)}return l}}})();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?mc.createAll():dE=window.setInterval((function(){window.dashjs&&(window.clearInterval(dE),mc.createAll())}),500):window.addEventListener("load",(function r(){window.removeEventListener("load",r),mc.createAll()})));var qS=mc,GS=Br(649),HS=Br(5212),VS=Br(559),KS=Br(5560);dashjs.Protection=jS.default,dashjs.MetricsReporting=$S.default,dashjs.MediaPlayerFactory=qS,dashjs.Debug=GS.default,dashjs.supportsMediaSource=VS.supportsMediaSource,dashjs.Constants=HS.default,dashjs.ExternalSubtitle=KS.default;var $U=dashjs;(Di=Di.default).Constants;var jU=Di.Debug;Di.ExternalSubtitle;var ma=Di.MediaPlayer;Di.MediaPlayerFactory;Di.MetricsReporting;Di.Protection;Di.default;var qU=Di.supportsMediaSource;function cl(r,e){e===void 0&&(e={});var t=e.insertAt;if(!(!r||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r))}}var GU=`/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */
@layer properties;
@layer theme, base, components, utilities;
@layer theme {
  :root, :host {
    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;
    --color-red-400: oklch(70.4% 0.191 22.216);
    --color-red-500: oklch(63.7% 0.237 25.331);
    --color-red-600: oklch(57.7% 0.245 27.325);
    --color-red-700: oklch(50.5% 0.213 27.518);
    --color-green-500: oklch(72.3% 0.219 149.579);
    --color-sky-300: oklch(82.8% 0.111 230.318);
    --color-blue-500: oklch(62.3% 0.214 259.815);
    --color-purple-500: oklch(62.7% 0.265 303.9);
    --color-gray-200: oklch(92.8% 0.006 264.531);
    --color-gray-300: oklch(87.2% 0.01 258.338);
    --color-gray-400: oklch(70.7% 0.022 261.325);
    --color-gray-500: oklch(55.1% 0.027 264.364);
    --color-gray-600: oklch(44.6% 0.03 256.802);
    --color-gray-700: oklch(37.3% 0.034 259.733);
    --color-gray-900: oklch(21% 0.034 264.665);
    --color-black: #000;
    --color-white: #fff;
    --spacing: 0.25rem;
    --container-md: 28rem;
    --text-xs: 0.75rem;
    --text-xs--line-height: calc(1 / 0.75);
    --text-sm: 0.875rem;
    --text-sm--line-height: calc(1.25 / 0.875);
    --text-base: 1rem;
    --text-base--line-height: calc(1.5 / 1);
    --text-lg: 1.125rem;
    --text-lg--line-height: calc(1.75 / 1.125);
    --text-xl: 1.25rem;
    --text-xl--line-height: calc(1.75 / 1.25);
    --text-2xl: 1.5rem;
    --text-2xl--line-height: calc(2 / 1.5);
    --text-3xl: 1.875rem;
    --text-3xl--line-height: calc(2.25 / 1.875);
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --tracking-wider: 0.05em;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --animate-spin: spin 1s linear infinite;
    --blur-sm: 8px;
    --blur-md: 12px;
    --default-transition-duration: 150ms;
    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    --default-font-family: var(--font-sans);
    --default-mono-font-family: var(--font-mono);
  }
}
@layer base {
  *, ::after, ::before, ::backdrop, ::file-selector-button {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: 0 solid;
  }
  html, :host {
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    tab-size: 4;
    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");
    font-feature-settings: var(--default-font-feature-settings, normal);
    font-variation-settings: var(--default-font-variation-settings, normal);
    -webkit-tap-highlight-color: transparent;
  }
  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }
  abbr:where([title]) {
    -webkit-text-decoration: underline dotted;
    text-decoration: underline dotted;
  }
  h1, h2, h3, h4, h5, h6 {
    font-size: inherit;
    font-weight: inherit;
  }
  a {
    color: inherit;
    -webkit-text-decoration: inherit;
    text-decoration: inherit;
  }
  b, strong {
    font-weight: bolder;
  }
  code, kbd, samp, pre {
    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
    font-feature-settings: var(--default-mono-font-feature-settings, normal);
    font-variation-settings: var(--default-mono-font-variation-settings, normal);
    font-size: 1em;
  }
  small {
    font-size: 80%;
  }
  sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }
  sub {
    bottom: -0.25em;
  }
  sup {
    top: -0.5em;
  }
  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }
  :-moz-focusring {
    outline: auto;
  }
  progress {
    vertical-align: baseline;
  }
  summary {
    display: list-item;
  }
  ol, ul, menu {
    list-style: none;
  }
  img, svg, video, canvas, audio, iframe, embed, object {
    display: block;
    vertical-align: middle;
  }
  img, video {
    max-width: 100%;
    height: auto;
  }
  button, input, select, optgroup, textarea, ::file-selector-button {
    font: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    letter-spacing: inherit;
    color: inherit;
    border-radius: 0;
    background-color: transparent;
    opacity: 1;
  }
  :where(select:is([multiple], [size])) optgroup {
    font-weight: bolder;
  }
  :where(select:is([multiple], [size])) optgroup option {
    padding-inline-start: 20px;
  }
  ::file-selector-button {
    margin-inline-end: 4px;
  }
  ::placeholder {
    opacity: 1;
  }
  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {
    ::placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
  }
  textarea {
    resize: vertical;
  }
  ::-webkit-search-decoration {
    -webkit-appearance: none;
  }
  ::-webkit-date-and-time-value {
    min-height: 1lh;
    text-align: inherit;
  }
  ::-webkit-datetime-edit {
    display: inline-flex;
  }
  ::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
  }
  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {
    padding-block: 0;
  }
  ::-webkit-calendar-picker-indicator {
    line-height: 1;
  }
  :-moz-ui-invalid {
    box-shadow: none;
  }
  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {
    appearance: button;
  }
  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
    height: auto;
  }
  [hidden]:where(:not([hidden="until-found"])) {
    display: none !important;
  }
}
@layer utilities {
  .pointer-events-none {
    pointer-events: none;
  }
  .absolute {
    position: absolute;
  }
  .relative {
    position: relative;
  }
  .static {
    position: static;
  }
  .inset-0 {
    inset: calc(var(--spacing) * 0);
  }
  .-top-2 {
    top: calc(var(--spacing) * -2);
  }
  .top-0 {
    top: calc(var(--spacing) * 0);
  }
  .top-1\\/2 {
    top: calc(1/2 * 100%);
  }
  .top-full {
    top: 100%;
  }
  .right-0 {
    right: calc(var(--spacing) * 0);
  }
  .right-32 {
    right: calc(var(--spacing) * 32);
  }
  .right-full {
    right: 100%;
  }
  .bottom-36 {
    bottom: calc(var(--spacing) * 36);
  }
  .bottom-full {
    bottom: 100%;
  }
  .left-0 {
    left: calc(var(--spacing) * 0);
  }
  .left-1\\/2 {
    left: calc(1/2 * 100%);
  }
  .left-32 {
    left: calc(var(--spacing) * 32);
  }
  .left-full {
    left: 100%;
  }
  .z-40 {
    z-index: 40;
  }
  .z-50 {
    z-index: 50;
  }
  .z-\\[-1\\] {
    z-index: -1;
  }
  .container {
    width: 100%;
    @media (width >= 40rem) {
      max-width: 40rem;
    }
    @media (width >= 48rem) {
      max-width: 48rem;
    }
    @media (width >= 64rem) {
      max-width: 64rem;
    }
    @media (width >= 80rem) {
      max-width: 80rem;
    }
    @media (width >= 96rem) {
      max-width: 96rem;
    }
  }
  .mx-2 {
    margin-inline: calc(var(--spacing) * 2);
  }
  .mx-auto {
    margin-inline: auto;
  }
  .mt-1 {
    margin-top: calc(var(--spacing) * 1);
  }
  .mt-2 {
    margin-top: calc(var(--spacing) * 2);
  }
  .mt-4 {
    margin-top: calc(var(--spacing) * 4);
  }
  .mr-2 {
    margin-right: calc(var(--spacing) * 2);
  }
  .mb-1 {
    margin-bottom: calc(var(--spacing) * 1);
  }
  .mb-2 {
    margin-bottom: calc(var(--spacing) * 2);
  }
  .mb-4 {
    margin-bottom: calc(var(--spacing) * 4);
  }
  .ml-1 {
    margin-left: calc(var(--spacing) * 1);
  }
  .ml-2 {
    margin-left: calc(var(--spacing) * 2);
  }
  .flex {
    display: flex;
  }
  .hidden {
    display: none;
  }
  .inline {
    display: inline;
  }
  .inline-block {
    display: inline-block;
  }
  .inline-flex {
    display: inline-flex;
  }
  .h-1 {
    height: calc(var(--spacing) * 1);
  }
  .h-3 {
    height: calc(var(--spacing) * 3);
  }
  .h-4 {
    height: calc(var(--spacing) * 4);
  }
  .h-5 {
    height: calc(var(--spacing) * 5);
  }
  .h-6 {
    height: calc(var(--spacing) * 6);
  }
  .h-10 {
    height: calc(var(--spacing) * 10);
  }
  .h-12 {
    height: calc(var(--spacing) * 12);
  }
  .h-14 {
    height: calc(var(--spacing) * 14);
  }
  .h-full {
    height: 100%;
  }
  .max-h-80 {
    max-height: calc(var(--spacing) * 80);
  }
  .w-3 {
    width: calc(var(--spacing) * 3);
  }
  .w-4 {
    width: calc(var(--spacing) * 4);
  }
  .w-5 {
    width: calc(var(--spacing) * 5);
  }
  .w-6 {
    width: calc(var(--spacing) * 6);
  }
  .w-12 {
    width: calc(var(--spacing) * 12);
  }
  .w-14 {
    width: calc(var(--spacing) * 14);
  }
  .w-80 {
    width: calc(var(--spacing) * 80);
  }
  .w-\\[2px\\] {
    width: 2px;
  }
  .w-\\[10vw\\] {
    width: 10vw;
  }
  .w-\\[15vw\\] {
    width: 15vw;
  }
  .w-fit {
    width: fit-content;
  }
  .w-full {
    width: 100%;
  }
  .max-w-md {
    max-width: var(--container-md);
  }
  .flex-1 {
    flex: 1;
  }
  .shrink-0 {
    flex-shrink: 0;
  }
  .-translate-x-1\\/2 {
    --tw-translate-x: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .-translate-y-1\\/2 {
    --tw-translate-y: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .rotate-45 {
    rotate: 45deg;
  }
  .rotate-180 {
    rotate: 180deg;
  }
  .transform {
    transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);
  }
  .animate-spin {
    animation: var(--animate-spin);
  }
  .cursor-default {
    cursor: default;
  }
  .cursor-not-allowed {
    cursor: not-allowed;
  }
  .cursor-pointer {
    cursor: pointer;
  }
  .flex-col {
    flex-direction: column;
  }
  .items-center {
    align-items: center;
  }
  .items-start {
    align-items: flex-start;
  }
  .justify-between {
    justify-content: space-between;
  }
  .justify-center {
    justify-content: center;
  }
  .justify-end {
    justify-content: flex-end;
  }
  .gap-1 {
    gap: calc(var(--spacing) * 1);
  }
  .gap-2 {
    gap: calc(var(--spacing) * 2);
  }
  .gap-3 {
    gap: calc(var(--spacing) * 3);
  }
  .gap-4 {
    gap: calc(var(--spacing) * 4);
  }
  .gap-7 {
    gap: calc(var(--spacing) * 7);
  }
  .space-y-0 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 0) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 0) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-3 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 3) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .overflow-hidden {
    overflow: hidden;
  }
  .overflow-y-auto {
    overflow-y: auto;
  }
  .rounded {
    border-radius: 0.25rem;
  }
  .rounded-\\[5px\\] {
    border-radius: 5px;
  }
  .rounded-\\[7px\\] {
    border-radius: 7px;
  }
  .rounded-full {
    border-radius: calc(infinity * 1px);
  }
  .rounded-lg {
    border-radius: var(--radius-lg);
  }
  .rounded-md {
    border-radius: var(--radius-md);
  }
  .border {
    border-style: var(--tw-border-style);
    border-width: 1px;
  }
  .border-t {
    border-top-style: var(--tw-border-style);
    border-top-width: 1px;
  }
  .border-b {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 1px;
  }
  .border-l {
    border-left-style: var(--tw-border-style);
    border-left-width: 1px;
  }
  .border-gray-600 {
    border-color: var(--color-gray-600);
  }
  .border-gray-700\\/60 {
    border-color: color-mix(in srgb, oklch(37.3% 0.034 259.733) 60%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      border-color: color-mix(in oklab, var(--color-gray-700) 60%, transparent);
    }
  }
  .border-white\\/10 {
    border-color: color-mix(in srgb, #fff 10%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      border-color: color-mix(in oklab, var(--color-white) 10%, transparent);
    }
  }
  .border-white\\/30 {
    border-color: color-mix(in srgb, #fff 30%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      border-color: color-mix(in oklab, var(--color-white) 30%, transparent);
    }
  }
  .border-white\\/40 {
    border-color: color-mix(in srgb, #fff 40%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      border-color: color-mix(in oklab, var(--color-white) 40%, transparent);
    }
  }
  .bg-\\[\\#3a4049\\] {
    background-color: #3a4049;
  }
  .bg-\\[\\#454545\\] {
    background-color: #454545;
  }
  .bg-\\[rgba\\(0\\,0\\,0\\,0\\.5\\)\\] {
    background-color: rgba(0,0,0,0.5);
  }
  .bg-black {
    background-color: var(--color-black);
  }
  .bg-black\\/60 {
    background-color: color-mix(in srgb, #000 60%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-black) 60%, transparent);
    }
  }
  .bg-black\\/90 {
    background-color: color-mix(in srgb, #000 90%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-black) 90%, transparent);
    }
  }
  .bg-blue-500 {
    background-color: var(--color-blue-500);
  }
  .bg-gray-500 {
    background-color: var(--color-gray-500);
  }
  .bg-gray-900 {
    background-color: var(--color-gray-900);
  }
  .bg-green-500 {
    background-color: var(--color-green-500);
  }
  .bg-purple-500 {
    background-color: var(--color-purple-500);
  }
  .bg-red-600 {
    background-color: var(--color-red-600);
  }
  .bg-transparent {
    background-color: transparent;
  }
  .bg-white {
    background-color: var(--color-white);
  }
  .bg-white\\/10 {
    background-color: color-mix(in srgb, #fff 10%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-white) 10%, transparent);
    }
  }
  .bg-white\\/20 {
    background-color: color-mix(in srgb, #fff 20%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-white) 20%, transparent);
    }
  }
  .bg-white\\/80 {
    background-color: color-mix(in srgb, #fff 80%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-white) 80%, transparent);
    }
  }
  .bg-linear-to-b {
    --tw-gradient-position: to bottom;
    @supports (background-image: linear-gradient(in lab, red, red)) {
      --tw-gradient-position: to bottom in oklab;
    }
    background-image: linear-gradient(var(--tw-gradient-stops));
  }
  .from-black {
    --tw-gradient-from: var(--color-black);
    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));
  }
  .from-black\\/80 {
    --tw-gradient-from: color-mix(in srgb, #000 80%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      --tw-gradient-from: color-mix(in oklab, var(--color-black) 80%, transparent);
    }
    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));
  }
  .via-transparent {
    --tw-gradient-via: transparent;
    --tw-gradient-via-stops: var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-via) var(--tw-gradient-via-position), var(--tw-gradient-to) var(--tw-gradient-to-position);
    --tw-gradient-stops: var(--tw-gradient-via-stops);
  }
  .to-black\\/90 {
    --tw-gradient-to: color-mix(in srgb, #000 90%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      --tw-gradient-to: color-mix(in oklab, var(--color-black) 90%, transparent);
    }
    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));
  }
  .bg-cover {
    background-size: cover;
  }
  .bg-center {
    background-position: center;
  }
  .object-contain {
    object-fit: contain;
  }
  .p-0 {
    padding: calc(var(--spacing) * 0);
  }
  .p-1 {
    padding: calc(var(--spacing) * 1);
  }
  .p-2 {
    padding: calc(var(--spacing) * 2);
  }
  .p-4 {
    padding: calc(var(--spacing) * 4);
  }
  .p-6 {
    padding: calc(var(--spacing) * 6);
  }
  .p-10 {
    padding: calc(var(--spacing) * 10);
  }
  .px-3 {
    padding-inline: calc(var(--spacing) * 3);
  }
  .px-4 {
    padding-inline: calc(var(--spacing) * 4);
  }
  .px-5 {
    padding-inline: calc(var(--spacing) * 5);
  }
  .px-6 {
    padding-inline: calc(var(--spacing) * 6);
  }
  .px-10 {
    padding-inline: calc(var(--spacing) * 10);
  }
  .px-20 {
    padding-inline: calc(var(--spacing) * 20);
  }
  .py-1 {
    padding-block: calc(var(--spacing) * 1);
  }
  .py-2 {
    padding-block: calc(var(--spacing) * 2);
  }
  .py-3 {
    padding-block: calc(var(--spacing) * 3);
  }
  .py-4 {
    padding-block: calc(var(--spacing) * 4);
  }
  .pt-6 {
    padding-top: calc(var(--spacing) * 6);
  }
  .pb-3 {
    padding-bottom: calc(var(--spacing) * 3);
  }
  .pb-4 {
    padding-bottom: calc(var(--spacing) * 4);
  }
  .pb-6 {
    padding-bottom: calc(var(--spacing) * 6);
  }
  .pb-10 {
    padding-bottom: calc(var(--spacing) * 10);
  }
  .pb-16 {
    padding-bottom: calc(var(--spacing) * 16);
  }
  .text-center {
    text-align: center;
  }
  .text-left {
    text-align: left;
  }
  .text-lg {
    font-size: var(--text-lg);
    line-height: var(--tw-leading, var(--text-lg--line-height));
  }
  .text-sm {
    font-size: var(--text-sm);
    line-height: var(--tw-leading, var(--text-sm--line-height));
  }
  .text-xl {
    font-size: var(--text-xl);
    line-height: var(--tw-leading, var(--text-xl--line-height));
  }
  .text-xs {
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
  }
  .font-bold {
    --tw-font-weight: var(--font-weight-bold);
    font-weight: var(--font-weight-bold);
  }
  .font-medium {
    --tw-font-weight: var(--font-weight-medium);
    font-weight: var(--font-weight-medium);
  }
  .font-normal {
    --tw-font-weight: var(--font-weight-normal);
    font-weight: var(--font-weight-normal);
  }
  .font-semibold {
    --tw-font-weight: var(--font-weight-semibold);
    font-weight: var(--font-weight-semibold);
  }
  .tracking-wider {
    --tw-tracking: var(--tracking-wider);
    letter-spacing: var(--tracking-wider);
  }
  .whitespace-nowrap {
    white-space: nowrap;
  }
  .text-gray-200 {
    color: var(--color-gray-200);
  }
  .text-gray-300 {
    color: var(--color-gray-300);
  }
  .text-gray-400 {
    color: var(--color-gray-400);
  }
  .text-gray-500 {
    color: var(--color-gray-500);
  }
  .text-gray-900 {
    color: var(--color-gray-900);
  }
  .text-red-400 {
    color: var(--color-red-400);
  }
  .text-red-500 {
    color: var(--color-red-500);
  }
  .text-red-600 {
    color: var(--color-red-600);
  }
  .text-sky-300 {
    color: var(--color-sky-300);
  }
  .text-white {
    color: var(--color-white);
  }
  .normal-case {
    text-transform: none;
  }
  .opacity-0 {
    opacity: 0%;
  }
  .opacity-50 {
    opacity: 50%;
  }
  .opacity-100 {
    opacity: 100%;
  }
  .shadow-2xl {
    --tw-shadow: 0 25px 50px -12px var(--tw-shadow-color, rgb(0 0 0 / 0.25));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-lg {
    --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-md {
    --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .backdrop-blur-md {
    --tw-backdrop-blur: blur(var(--blur-md));
    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
  }
  .backdrop-blur-sm {
    --tw-backdrop-blur: blur(var(--blur-sm));
    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
  }
  .transition {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, -webkit-backdrop-filter, backdrop-filter, display, content-visibility, overlay, pointer-events;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-all {
    transition-property: all;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-colors {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-opacity {
    transition-property: opacity;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .duration-200 {
    --tw-duration: 200ms;
    transition-duration: 200ms;
  }
  .duration-300 {
    --tw-duration: 300ms;
    transition-duration: 300ms;
  }
  .ease-in-out {
    --tw-ease: var(--ease-in-out);
    transition-timing-function: var(--ease-in-out);
  }
  .ease-out {
    --tw-ease: var(--ease-out);
    transition-timing-function: var(--ease-out);
  }
  .select-none {
    -webkit-user-select: none;
    user-select: none;
  }
  .hover\\:scale-105 {
    &:hover {
      @media (hover: hover) {
        --tw-scale-x: 105%;
        --tw-scale-y: 105%;
        --tw-scale-z: 105%;
        scale: var(--tw-scale-x) var(--tw-scale-y);
      }
    }
  }
  .hover\\:border-white\\/50 {
    &:hover {
      @media (hover: hover) {
        border-color: color-mix(in srgb, #fff 50%, transparent);
        @supports (color: color-mix(in lab, red, red)) {
          border-color: color-mix(in oklab, var(--color-white) 50%, transparent);
        }
      }
    }
  }
  .hover\\:bg-gray-300 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-gray-300);
      }
    }
  }
  .hover\\:bg-red-700 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-red-700);
      }
    }
  }
  .hover\\:bg-white\\/5 {
    &:hover {
      @media (hover: hover) {
        background-color: color-mix(in srgb, #fff 5%, transparent);
        @supports (color: color-mix(in lab, red, red)) {
          background-color: color-mix(in oklab, var(--color-white) 5%, transparent);
        }
      }
    }
  }
  .hover\\:bg-white\\/10 {
    &:hover {
      @media (hover: hover) {
        background-color: color-mix(in srgb, #fff 10%, transparent);
        @supports (color: color-mix(in lab, red, red)) {
          background-color: color-mix(in oklab, var(--color-white) 10%, transparent);
        }
      }
    }
  }
  .hover\\:bg-white\\/30 {
    &:hover {
      @media (hover: hover) {
        background-color: color-mix(in srgb, #fff 30%, transparent);
        @supports (color: color-mix(in lab, red, red)) {
          background-color: color-mix(in oklab, var(--color-white) 30%, transparent);
        }
      }
    }
  }
  .hover\\:bg-white\\/90 {
    &:hover {
      @media (hover: hover) {
        background-color: color-mix(in srgb, #fff 90%, transparent);
        @supports (color: color-mix(in lab, red, red)) {
          background-color: color-mix(in oklab, var(--color-white) 90%, transparent);
        }
      }
    }
  }
  .hover\\:text-gray-200 {
    &:hover {
      @media (hover: hover) {
        color: var(--color-gray-200);
      }
    }
  }
  .hover\\:text-white {
    &:hover {
      @media (hover: hover) {
        color: var(--color-white);
      }
    }
  }
  .hover\\:shadow-lg {
    &:hover {
      @media (hover: hover) {
        --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .focus\\:ring-2 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-gray-400 {
    &:focus {
      --tw-ring-color: var(--color-gray-400);
    }
  }
  .focus\\:ring-offset-1 {
    &:focus {
      --tw-ring-offset-width: 1px;
      --tw-ring-offset-shadow: var(--tw-ring-inset,) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
    }
  }
  .focus\\:outline-none {
    &:focus {
      --tw-outline-style: none;
      outline-style: none;
    }
  }
  .active\\:scale-95 {
    &:active {
      --tw-scale-x: 95%;
      --tw-scale-y: 95%;
      --tw-scale-z: 95%;
      scale: var(--tw-scale-x) var(--tw-scale-y);
    }
  }
  .disabled\\:cursor-not-allowed {
    &:disabled {
      cursor: not-allowed;
    }
  }
  .disabled\\:bg-white\\/50 {
    &:disabled {
      background-color: color-mix(in srgb, #fff 50%, transparent);
      @supports (color: color-mix(in lab, red, red)) {
        background-color: color-mix(in oklab, var(--color-white) 50%, transparent);
      }
    }
  }
  .disabled\\:opacity-50 {
    &:disabled {
      opacity: 50%;
    }
  }
  .lg\\:h-18 {
    @media (width >= 64rem) {
      height: calc(var(--spacing) * 18);
    }
  }
  .lg\\:w-18 {
    @media (width >= 64rem) {
      width: calc(var(--spacing) * 18);
    }
  }
  .lg\\:pb-12 {
    @media (width >= 64rem) {
      padding-bottom: calc(var(--spacing) * 12);
    }
  }
  .lg\\:text-2xl {
    @media (width >= 64rem) {
      font-size: var(--text-2xl);
      line-height: var(--tw-leading, var(--text-2xl--line-height));
    }
  }
  .lg\\:text-3xl {
    @media (width >= 64rem) {
      font-size: var(--text-3xl);
      line-height: var(--tw-leading, var(--text-3xl--line-height));
    }
  }
  .lg\\:text-base {
    @media (width >= 64rem) {
      font-size: var(--text-base);
      line-height: var(--tw-leading, var(--text-base--line-height));
    }
  }
}
.noCursor {
  cursor: none !important;
}
.icon-class {
  height: calc(var(--spacing) * 14);
  width: calc(var(--spacing) * 14);
  cursor: pointer;
  color: var(--color-gray-400);
  transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
  transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
  transition-duration: var(--tw-duration, var(--default-transition-duration));
  --tw-duration: 200ms;
  transition-duration: 200ms;
  &:hover {
    @media (hover: hover) {
      color: var(--color-gray-200);
    }
  }
  @media (width >= 64rem) {
    height: calc(var(--spacing) * 18);
  }
  @media (width >= 64rem) {
    width: calc(var(--spacing) * 18);
  }
}
@property --tw-translate-x {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-y {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-z {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-rotate-x {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-y {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-z {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-x {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-y {
  syntax: "*";
  inherits: false;
}
@property --tw-space-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-border-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-gradient-position {
  syntax: "*";
  inherits: false;
}
@property --tw-gradient-from {
  syntax: "<color>";
  inherits: false;
  initial-value: #0000;
}
@property --tw-gradient-via {
  syntax: "<color>";
  inherits: false;
  initial-value: #0000;
}
@property --tw-gradient-to {
  syntax: "<color>";
  inherits: false;
  initial-value: #0000;
}
@property --tw-gradient-stops {
  syntax: "*";
  inherits: false;
}
@property --tw-gradient-via-stops {
  syntax: "*";
  inherits: false;
}
@property --tw-gradient-from-position {
  syntax: "<length-percentage>";
  inherits: false;
  initial-value: 0%;
}
@property --tw-gradient-via-position {
  syntax: "<length-percentage>";
  inherits: false;
  initial-value: 50%;
}
@property --tw-gradient-to-position {
  syntax: "<length-percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-font-weight {
  syntax: "*";
  inherits: false;
}
@property --tw-tracking {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-inset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-ring-inset {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-offset-width {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --tw-ring-offset-color {
  syntax: "*";
  inherits: false;
  initial-value: #fff;
}
@property --tw-ring-offset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-backdrop-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-duration {
  syntax: "*";
  inherits: false;
}
@property --tw-ease {
  syntax: "*";
  inherits: false;
}
@property --tw-scale-x {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-y {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-z {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
@layer properties {
  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
    *, ::before, ::after, ::backdrop {
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-translate-z: 0;
      --tw-rotate-x: initial;
      --tw-rotate-y: initial;
      --tw-rotate-z: initial;
      --tw-skew-x: initial;
      --tw-skew-y: initial;
      --tw-space-y-reverse: 0;
      --tw-border-style: solid;
      --tw-gradient-position: initial;
      --tw-gradient-from: #0000;
      --tw-gradient-via: #0000;
      --tw-gradient-to: #0000;
      --tw-gradient-stops: initial;
      --tw-gradient-via-stops: initial;
      --tw-gradient-from-position: 0%;
      --tw-gradient-via-position: 50%;
      --tw-gradient-to-position: 100%;
      --tw-font-weight: initial;
      --tw-tracking: initial;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-color: initial;
      --tw-shadow-alpha: 100%;
      --tw-inset-shadow: 0 0 #0000;
      --tw-inset-shadow-color: initial;
      --tw-inset-shadow-alpha: 100%;
      --tw-ring-color: initial;
      --tw-ring-shadow: 0 0 #0000;
      --tw-inset-ring-color: initial;
      --tw-inset-ring-shadow: 0 0 #0000;
      --tw-ring-inset: initial;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-backdrop-blur: initial;
      --tw-backdrop-brightness: initial;
      --tw-backdrop-contrast: initial;
      --tw-backdrop-grayscale: initial;
      --tw-backdrop-hue-rotate: initial;
      --tw-backdrop-invert: initial;
      --tw-backdrop-opacity: initial;
      --tw-backdrop-saturate: initial;
      --tw-backdrop-sepia: initial;
      --tw-duration: initial;
      --tw-ease: initial;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-scale-z: 1;
    }
  }
}
`;cl(GU,{insertAt:"top"});const HU=r=>({videoRef:null,setVideoRef:e=>r({videoRef:e}),videoWrapperRef:null,setVideoWrapperRef:e=>r({videoWrapperRef:e})}),VU=r=>({playing:!1,setPlaying:e=>r({playing:e}),isBuffering:!1,setIsBuffering:e=>r({isBuffering:e}),isPlaying:!1,setIsPlaying:e=>r({isPlaying:e}),muted:!1,setMuted:e=>r({muted:e}),volume:1,setVolume:e=>r({volume:e})}),KU=r=>({currentTime:0,setCurrentTime:e=>r({currentTime:e}),duration:0,setDuration:e=>r({duration:e}),bufferedProgress:0,setBufferedProgress:e=>r({bufferedProgress:e})}),YU=r=>({controls:!1,setControls:e=>r({controls:e}),isFullscreen:!1,setIsFullscreen:e=>r({isFullscreen:e})}),WU=r=>({hlsInstance:null,setHlsInstance:e=>r({hlsInstance:e}),dashInstance:null,setDashInstance:e=>r({dashInstance:e}),qualityLevels:[],setQualityLevels:e=>r({qualityLevels:e}),activeQuality:"auto",setActiveQuality:e=>r({activeQuality:e}),currentQuality:"auto",setCurrentQuality:e=>r({currentQuality:e}),streamType:"mp4",setStreamType:e=>r({streamType:e})}),XU=r=>({activeSubtitle:null,setActiveSubtitle:e=>r({activeSubtitle:e}),subtitles:[],setSubtitles:e=>r({subtitles:e})}),QU=r=>({episodeList:[],setEpisodeList:e=>r({episodeList:e}),currentEpisodeIndex:0,setCurrentEpisodeIndex:e=>r({currentEpisodeIndex:e}),showCountdown:!1,setShowCountdown:e=>r({showCountdown:e}),countdownTime:10,setCountdownTime:e=>r({countdownTime:e}),autoPlayNext:!1,setAutoPlayNext:e=>r({autoPlayNext:e})}),ZU=r=>({showIntroSkip:!1,setShowIntroSkip:e=>r({showIntroSkip:e})}),JU=(r,e)=>({isAdPlaying:!1,setIsAdPlaying:t=>r({isAdPlaying:t}),currentAd:null,setCurrentAd:t=>r({currentAd:t}),adType:null,setAdType:t=>r({adType:t}),adCurrentTime:0,setAdCurrentTime:t=>r({adCurrentTime:t}),canSkipAd:!1,setCanSkipAd:t=>r({canSkipAd:t}),skipCountdown:0,setSkipCountdown:t=>r({skipCountdown:t}),playedAdBreaks:[],addPlayedAdBreak:t=>r(n=>({playedAdBreaks:[...n.playedAdBreaks,t]})),midRollQueue:[],setMidRollQueue:t=>r({midRollQueue:t}),adVideoRef:null,setAdVideoRef:t=>r({adVideoRef:t})}),eB=r=>({error:null,setError:e=>r({error:e}),clearError:()=>r({error:null})}),tB=(r,e)=>({resetStore:()=>{const t=c=>{if(c){try{c.pause()}catch{}try{c.currentTime=0}catch{}c.removeAttribute("src"),c.load()}},{videoRef:n,adVideoRef:i,hlsInstance:o,dashInstance:l}=e();t(n),t(i),o&&typeof o.destroy=="function"&&o.destroy(),l&&typeof l.reset=="function"&&l.reset(),r({videoRef:null,videoWrapperRef:null,playing:!1,isBuffering:!1,isPlaying:!1,muted:!1,volume:1,currentTime:0,duration:0,bufferedProgress:0,controls:!1,isFullscreen:!1,hlsInstance:void 0,dashInstance:void 0,qualityLevels:void 0,activeQuality:"auto",activeSubtitle:null,subtitles:[],episodeList:[],currentEpisodeIndex:0,showCountdown:!1,countdownTime:10,autoPlayNext:!1,showIntroSkip:!1,isAdPlaying:!1,currentAd:null,adType:null,adCurrentTime:0,canSkipAd:!1,skipCountdown:0,playedAdBreaks:[],midRollQueue:[],adVideoRef:null})}}),Kn=_M()((r,e,t)=>({...HU(r),...VU(r),...KU(r),...YU(r),...WU(r),...XU(r),...QU(r),...ZU(r),...JU(r),...eB(r),...tB(r,e)}));class fE{static setHlsQuality(e,t){if(!e)return;const n=e?.levels??[],i=t>=0&&n[t];if(!(t<-1||t>=0&&!i)){if(t===-1){e.currentLevel=-1,e.nextLevel=-1,e.loadLevel=-1;return}e.loadLevel=t,e.nextLevel=t,e.currentLevel=t}}static setDashQuality(e,t){if(!e)return;const n=e;if(t==null||t<0){n.setAutoSwitchQualityFor("video",!0);return}n.setAutoSwitchQualityFor("video",!1),n.getQualityFor("video")!==t&&n.setQualityFor("video",t)}static getHlsQualityLevels(e){if(!e||!e.levels)return[];try{return e.levels.map((t,n)=>({height:t.height||0,bitrate:t.bitrate||0,originalIndex:n}))}catch{return[]}}static getDashQualityLevels(e){if(!e)return[];try{const t=e.getRepresentationsByType("video");return!t||!t.length?[]:t.map(n=>({height:n.height||Math.round(n.bandwidth/1e3)||0,bitrate:n.bandwidth,id:n.id}))}catch{return[]}}static setQuality(e,t){const{hlsInstance:n,dashInstance:i,setActiveQuality:o,setCurrentQuality:l}=Kn.getState();if(t==="auto"){e==="hls"&&this.setHlsQuality(n,-1),e==="dash"&&this.setDashQuality(i??null,null),o("auto"),l("auto");return}const c=u=>parseInt(t.replace(u,""),10);if(e==="hls"&&t.startsWith("hls-")){const u=c("hls-");Number.isNaN(u)||(this.setHlsQuality(n,u),o(t),l(t));return}if(e==="dash"&&t.startsWith("dash-")){const u=c("dash-");Number.isNaN(u)||(this.setDashQuality(i??null,u),o(t),l(t))}}static setAutoQuality(e){this.setQuality(e,"auto")}}const nB=r=>{if(isNaN(r))return"00:00";const e=new Date(r*1e3),t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds().toString().padStart(2,"0");return t?`${t}:${n.toString().padStart(2,"0")}:${i}`:`${n}:${i}`},Vd=r=>r*1e3,rB=r=>{if(!r)return;const t=(r.split("#")[0]?.split("?")[0]??r)?.split(".")?.pop()?.toLowerCase();return t==="m3u8"?"hls":t==="mpd"?"dash":t==="mp4"?"mp4":t};function iB(r,e){const t=r||-1;return e*100/t}const Hs=(r,e,t)=>r>=e&&r<=t;function Kd(r,e,t,n){const i=Hs(r,e,t),o=t-e,l=r-e,c=i?l/o:0;return n?1:c}const YS=T.memo(({label:r="",startTime:e,maxTime:t,endTime:n,currentTime:i,seekHoverTime:o,bufferTime:l,isTimePassed:c=!1,isBufferPassed:u=!1,isHoverPassed:d=!1,onHover:m=()=>{},withGap:f,trackColor:h})=>{const g=iB(t,e),E=(n-e)/t*100,S=`main${f?" with-gap":""}`,A=Kd(i,e,n,c),x=Kd(o,e,n,d),k=Kd(l,e,n,u),U=()=>m(r);return Je.createElement("div",{className:S,onMouseMove:U,style:{width:`${E}%`,left:`${g}%`}},Je.createElement("div",{className:"inner-seek-block buffered","data-test-id":"test-buffered",style:{transform:`scaleX(${k})`}}),Je.createElement("div",{className:"inner-seek-block seek-hover","data-test-id":"test-seek-hover",style:{transform:`scaleX(${x})`}}),Je.createElement("div",{className:"inner-seek-block connect",style:{transform:`scaleX(${A})`,backgroundColor:h||"#ff0000"}}))});function WS(r,e,t){const n=e*100/t;return Math.floor(+(n*(r/100)))}const Rh=(r,e,t)=>e+1<r.length?r[e+1].fromMs:t,aB=({max:r=1e3,currentTime:e=0,bufferTime:t=0,seekHoverPosition:n=0,timeCodes:i,trackWidth:o,mobileSeeking:l,label:c,setLabel:u,trackColor:d})=>{const m=WS(r,n,o),f=T.useCallback(h=>{c!==h&&u(h)},[c,u]);return T.useEffect(()=>{if(!l)return;const h=i?.find(({fromMs:g},p)=>{const E=Rh(i,p,r);return Hs(e,g,E)});h?.description!==c&&u(h?.description||"")},[e,c,r,i,l,u]),Je.createElement(Je.Fragment,null,i?.map(({fromMs:h,description:g},p)=>{const E=Rh(i,p,r),S=E<=e,A=E<=t,x=E<=m;let k=Hs(e,h,E);const U=S||!k?0:e;k=Hs(t,h,E);const Y=A||!k?0:t;k=Hs(m,h,E);const Q=x||!k?0:m;return Je.createElement(YS,{key:h,label:g,maxTime:r,startTime:h,endTime:E,isTimePassed:S,isBufferPassed:A,isHoverPassed:x,currentTime:U,bufferTime:Y,seekHoverTime:Q,onHover:f,withGap:!0,trackColor:d})}))};function sB(r,e,t,n){let i=0;return e&&(i=r-e.offsetWidth/2,n&&(i<0?i=0:i+e.offsetWidth>t&&(i=t-e.offsetWidth))),{transform:`translateX(${i}px)`}}function oB(r,e=0){const t=Math.round(r/1e3+e),n=Math.floor(t/3600),i=t%3600,o=Math.floor(i/60),l=Math.ceil(i%60);return{hh:n.toString(),mm:o<10?`0${o}`:o.toString(),ss:l<10?`0${l}`:l.toString()}}function lB(r,e,t=0,n="",i=""){const o=oB(e,t);return r+t<60*1e3?i+o.ss:r+t<3600*1e3?`${n+o.mm}:${o.ss}`:`${o.hh}:${o.mm}:${o.ss}`}const cB=({max:r,hoverTimeValue:e,offset:t,trackWidth:n,seekHoverPosition:i,isThumbActive:o,limitTimeTooltipBySides:l,label:c,minutesPrefix:u,secondsPrefix:d,getPreviewScreenUrl:m})=>{const f=T.useRef(null),h=o?"hover-time active":"hover-time",g=sB(i,f?.current,n,l),p=lB(r,e,t,u,d);return Je.createElement("div",{className:h,style:g,ref:f,"data-testid":"hover-time"},o&&m&&Je.createElement("div",{className:"preview-screen",style:{backgroundImage:`url(${m(e)})`}}),c&&Je.createElement("div",null,c),p)},uB=({max:r,currentTime:e,isThumbActive:t,trackColor:n})=>{const i=()=>({left:`calc(${e/r*100}% + -6px)`});return Je.createElement("div",{className:"thumb active","data-testid":"testThumb",style:i()},Je.createElement("div",{className:"handler",style:{backgroundColor:n||"#ff0000"}}))};var dB=`.ui-video-seek-slider {
  position: relative;
  touch-action: none;
}
.ui-video-seek-slider:focus {
  outline: none;
}
.ui-video-seek-slider .track {
  padding: 0;
  cursor: pointer;
  outline: none;
}
.ui-video-seek-slider .track:focus {
  border: 0;
  outline: none;
}
.ui-video-seek-slider .track .main {
  width: 100%;
  outline: none;
  height: 18px;
  top: 0;
  position: absolute;
  display: flex;
  align-items: center;
  box-sizing: border-box;
}
.ui-video-seek-slider .track .main:before {
  content: "";
  position: absolute;
  width: 100%;
  height: 3px;
  background-color: rgba(255, 255, 255, 0.2);
  overflow: hidden;
  transition: height 0.1s;
  outline: none;
}
.ui-video-seek-slider .track .main .inner-seek-block {
  position: absolute;
  width: 100%;
  height: 3px;
  transition: height 0.1s, opacity 0.4s, transform 0.2s ease-out;
  transform-origin: 0 0;
}
.ui-video-seek-slider .track .main:focus {
  border: 0;
  outline: none;
}
.ui-video-seek-slider .track .main .buffered {
  background-color: rgba(255, 255, 255, 0.3);
  z-index: 2;
  transition: transform 0.2s ease-out;
}
.ui-video-seek-slider .track .main .seek-hover {
  background-color: rgba(255, 255, 255, 0.5);
  z-index: 1;
}
.ui-video-seek-slider .track .main .connect {
  background-color: #ff0000;
  z-index: 3;
  transform-origin: 0 0;
}
.ui-video-seek-slider .track .main.with-gap .inner-seek-block,
.ui-video-seek-slider .track .main.with-gap:before {
  width: calc(100% - 2px);
  margin: 0 auto;
}
@media (hover) {
  .ui-video-seek-slider .track .main:hover:before {
    height: 8px;
  }
  .ui-video-seek-slider .track .main:hover .inner-seek-block {
    height: 8px;
  }
}
.ui-video-seek-slider .thumb {
  pointer-events: none;
  position: absolute;
  width: 12px;
  height: 12px;
  left: -6px;
  z-index: 4;
  top: 3px;
}
.ui-video-seek-slider .thumb .handler {
  border-radius: 100%;
  width: 100%;
  height: 100%;
  background-color: #ff0000;
  opacity: 0;
  transform: scale(0.4);
  transition: transform 0.2s, opacity 0.2s;
}
.ui-video-seek-slider .thumb.active .handler {
  opacity: 1;
  transform: scale(1);
}
.ui-video-seek-slider .hover-time {
  text-shadow: 1px 1px 1px #000;
  position: absolute;
  line-height: 18px;
  font-size: 16px;
  color: #ddd;
  bottom: 5px;
  left: 0;
  padding: 5px 10px;
  opacity: 0;
  pointer-events: none;
  text-align: center;
}
.ui-video-seek-slider .hover-time.active {
  opacity: 1;
}
.ui-video-seek-slider .hover-time .preview-screen {
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
  width: 200px;
  height: 110px;
  border-radius: 5px;
  background-color: #000;
  margin: 0 auto 10px;
}
.ui-video-seek-slider:hover .track .main .seek-hover {
  opacity: 1;
}

`;cl(dB,{insertAt:"top"});const fB=({max:r=1e3,currentTime:e=0,bufferTime:t=0,hideThumbTooltip:n=!1,offset:i=0,secondsPrefix:o="",minutesPrefix:l="",limitTimeTooltipBySides:c=!0,timeCodes:u,onChange:d=()=>{},getPreviewScreenUrl:m,trackColor:f})=>{const[h,g]=T.useState(0),[p,E]=T.useState(""),S=T.useRef(!1),A=T.useRef(!1),x=T.useRef(null),k=x.current?.offsetWidth||0,U=h>0||S.current,Y=WS(r,h,k),Q=De=>{const _e=x.current?.getBoundingClientRect(),ke=_e?.left||0,Oe=_e?.width||0;let He=De-ke;He=He<0?0:He,He=He>Oe?Oe:He;const Ge=+(He*100/Oe*(r/100)).toFixed(0);g(He),d(Ge,Ge+i)},L=De=>{if(De.preventDefault(),De.stopPropagation(),!A.current)return;const{changedTouches:_e}=De;let ke=_e?.[_e.length-1]?.pageX||0;ke=ke<0?0:ke,Q(ke)},O=De=>{S.current&&Q(De.pageX)},G=(De,_e)=>{const ke=x.current?.getBoundingClientRect().left||0,Oe=De?0:_e.pageX-ke;g(Oe)},te=(De=!0)=>{A.current=De,g(De?h:0)},ge=(De,_e)=>{_e.preventDefault(),O(_e),S.current=De,g(De?h:0)},Me=De=>{ge(!1,De)},he=()=>{te(!1)};return T.useEffect(()=>{if(!A.current)return;const De=u?.find(({fromMs:_e},ke)=>{const Oe=Rh(u,ke,r);return Hs(e,_e,Oe)});De?.description!==p&&E(De?.description||"")},[e,p,r,u]),T.useEffect(()=>(window.addEventListener("mousemove",O),window.addEventListener("mouseup",Me),window.addEventListener("touchmove",L),window.addEventListener("touchend",he),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",Me),window.removeEventListener("touchmove",L),window.removeEventListener("touchend",he)}),[r,i,k]),Je.createElement("div",{className:"ui-video-seek-slider"},Je.createElement("div",{className:U?"track active":"track",ref:x,onMouseMove:De=>G(!1,De),onMouseLeave:De=>G(!0,De),onMouseDown:De=>ge(!0,De),onTouchStart:()=>te(!0),"data-testid":"main-track"},!!u?.length&&Je.createElement(aB,{currentTime:e,max:r,bufferTime:t,seekHoverPosition:h,timeCodes:u,mobileSeeking:A.current,trackWidth:k,label:p,setLabel:E,trackColor:f}),!u&&Je.createElement(YS,{maxTime:r,startTime:0,endTime:r,currentTime:e,bufferTime:t,seekHoverTime:Y,trackColor:f})),!n&&Je.createElement(cB,{max:r,hoverTimeValue:Y,isThumbActive:U,label:p,limitTimeTooltipBySides:c,offset:i,seekHoverPosition:h,trackWidth:k,getPreviewScreenUrl:m,minutesPrefix:l,secondsPrefix:o}),Je.createElement(uB,{max:r,currentTime:e,isThumbActive:U,trackColor:f}))},hE=(()=>{const r=new Map;return e=>{if(r.has(e))return r.get(e);const t=nB(e);if(r.set(e,t),r.size>100){const n=r.keys().next().value;n!==void 0&&r.delete(n)}return t}})(),XS=T.memo(({config:r})=>{const{videoRef:e,currentTime:t,isFullscreen:n,bufferedProgress:i,isAdPlaying:o}=Kn(Li(A=>({videoRef:A.videoRef,currentTime:A.currentTime,isFullscreen:A.isFullscreen,bufferedProgress:A.bufferedProgress,isAdPlaying:A.isAdPlaying}))),l=e?.duration??0,c=t||0,u=i||0,d=T.useCallback(A=>{e&&(e.currentTime=A/1e3)},[e]),m=T.useMemo(()=>l?Vd(l*(u/100)):0,[u,l]),f=T.useMemo(()=>Math.floor(c),[c]),h=T.useMemo(()=>Math.floor(l),[l]),g=T.useMemo(()=>hE(h),[h]),p=T.useMemo(()=>hE(f),[f]),E=T.useMemo(()=>Vd(l),[l]),S=T.useMemo(()=>Vd(c),[c]);return o?null:Je.createElement("div",{className:"px-10"},Je.createElement(fB,{max:E,currentTime:S,bufferTime:m,onChange:d,secondsPrefix:"00:00:",minutesPrefix:"00:",getPreviewScreenUrl:r?.seekBarConfig?.getPreviewScreenUrl,timeCodes:r?.seekBarConfig?.timeCodes,trackColor:r?.seekBarConfig?.trackColor}),Je.createElement("div",{className:`pt-6 ${n?"pb-10":"pb-16"} lg:pb-12 flex items-center gap-4 text-white`},Je.createElement("span",{className:"text-lg lg:text-2xl font-semibold text-white cursor-pointer hover:text-gray-200 transition-colors duration-200"},p),Je.createElement("span",{className:"text-lg lg:text-3xl font-semibold text-gray-500 cursor-pointer hover:text-gray-200 transition-colors duration-200"},"/"),Je.createElement("span",{className:"text-lg lg:text-2xl font-semibold text-gray-400 cursor-pointer hover:text-gray-200 transition-colors duration-200"},g)))});XS.displayName="BottomControls";var hB=`.icon-button {
  width: 20px;
  height: 20px;
  cursor: pointer;
  color: #9ca3af;
  transition: color 0.2s ease-in-out;
}

.icon-button:hover {
  color: #e5e7eb;
}

@media (min-width: 1024px) {
  .icon-button {
    width: 32px;
    height: 32px;
  }
}

.fullscreen-icon {
  width: 20px;
  height: 20px;
  cursor: pointer;
  color: #9ca3af;
  transition: color 0.2s ease-in-out;
}

.fullscreen-icon:hover {
  color: #e5e7eb;
}

@media (min-width: 1024px) {
  .fullscreen-icon {
    width: 32px;
    height: 32px;
  }
}

.pip-toggle {
  cursor: pointer;
  color: #9ca3af;
  transition: color 0.2s ease-in-out;
}

.pip-toggle:hover {
  color: #e5e7eb;
}

.pip-icon {
  width: 15px;
  height: 15px;
}

@media (min-width: 1024px) {
  .pip-icon {
    width: 28px;
    height: 28px;
  }
}

/* Ad Badge Header - Dark/Black Background */
.ad-badge-header {
  background: rgba(45, 47, 49, 0.95);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.1);
  position: relative;
}

/* Time display in badge - lighter gray */
.ad-badge-header > span:last-child {
  color: rgba(209, 213, 219, 0.9);
  font-weight: 500;
  letter-spacing: 0.025em;
}

/* Pulse animation for the dot */
@keyframes pulse-dot {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(0.9);
  }
}

.ad-badge-header .animate-pulse {
  animation: pulse-dot 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .ad-badge-header {
    padding: 0.375rem 0.75rem;
    font-size: 0.625rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .ad-badge-header .animate-pulse {
    animation: none;
  }
}

@media (prefers-contrast: high) {
  .ad-badge-header {
    background: #2d2f31;
    border: 2px solid #fff;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.6);
  }
}`;cl(hB,{insertAt:"top"});const mB=({isFullScreen:r,onClick:e,className:t="fullscreen-icon"})=>Je.createElement("div",{onClick:e},r?Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",className:t},Je.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.849 4.71l4.77 4.77H5.857a1.111 1.111 0 1 0 0 2.221H10.3a1.11 1.11 0 0 0 1.111-1.11V6.145a1.111 1.111 0 0 0-2.222 0v1.762l-4.77-4.77A1.111 1.111 0 1 0 2.85 4.709zm19.349 16.206l-4.77-4.77h1.762a1.111 1.111 0 0 0 0-2.223h-4.444c-.614 0-1.111.498-1.111 1.112v4.444a1.111 1.111 0 0 0 2.222 0v-1.762l4.77 4.77a1.111 1.111 0 1 0 1.571-1.571z",clipRule:"evenodd"})):Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",className:t},Je.createElement("path",{fill:"currentColor",d:"M4.746 8.056V6.294L18.73 20.278h-1.762a1.111 1.111 0 1 0 0 2.222h4.444a1.11 1.11 0 0 0 1.111-1.111v-4.445a1.111 1.111 0 0 0-2.222 0v1.762L6.317 4.722h1.762a1.111 1.111 0 1 0 0-2.222H3.635c-.614 0-1.112.497-1.112 1.111v4.445a1.111 1.111 0 1 0 2.223 0z"}))),gB=({onClick:r,className:e=""})=>Je.createElement("div",{onClick:r,className:"pip-toggle"},Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",className:`pip-icon ${e}`},Je.createElement("rect",{width:"9",height:"6",x:"11",y:"11.99",fill:"#fff",rx:"1"}),Je.createElement("rect",{width:"22",height:"18",x:"1",y:"3",stroke:"#B3B3B3",strokeWidth:"2",rx:"3"}))),pB=({button:r,children:e,closeOnButtonClick:t=!1,className:n="",align:i="left"})=>{const[o,l]=T.useState(!1),c=T.useRef(null),u=T.useRef(null);T.useEffect(()=>{const h=p=>{c.current&&!c.current.contains(p.target)&&u.current&&!u.current.contains(p.target)&&l(!1)},g=p=>{p.key==="Escape"&&l(!1)};return document.addEventListener("mousedown",h),document.addEventListener("keydown",g),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",g)}},[]);const d=()=>{l(h=>t?!h:!0)},m=()=>{switch(i){case"center":return"left-1/2 -translate-x-1/2";case"right":return"right-0";default:return"left-0"}},f=()=>"left-1/2 -translate-x-1/2";return Je.createElement("div",{className:"relative inline-block"},Je.createElement("div",{ref:u,onClick:d,tabIndex:0,role:"button"},r),o&&Je.createElement("div",{ref:c,className:`absolute ${m()} mt-2 w-fit bg-[#3a4049] text-white shadow-2xl rounded-lg border border-white/10 z-50 p-0 transition-all duration-200 ${n}`},Je.createElement("div",{className:`absolute -top-2 ${f()} w-3 h-3 bg-[#3a4049] transform rotate-45 border-l border-t border-white/10 z-[-1]`}),e))},$s=({children:r,title:e,position:t="top",className:n})=>{const[i,o]=T.useState(!1),l={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"};return Je.createElement("div",{className:`relative inline-block cursor-pointer ${n||""}`,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},r,i&&Je.createElement("div",{className:`absolute z-50 px-3 py-1 text-sm text-white bg-gray-900 rounded-md shadow-md transition-opacity duration-200 ease-in-out whitespace-nowrap ${l[t]}`},e))},mE=[.25,.5,.75,1,1.25,1.5,1.75,2],yB=({iconClassName:r,qualityConfig:e})=>{const t=e?.showInSettings!==!1,{qualityLevels:n,activeQuality:i,currentQuality:o,subtitles:l,activeSubtitle:c,setActiveSubtitle:u,videoRef:d,streamType:m}=Kn(),f=()=>{try{const G=localStorage.getItem("react-player-playback-speed");if(G){const te=parseFloat(G);if(mE.includes(te))return te}}catch{}return 1},[h,g]=T.useState(f()),[p,E]=T.useState("main");T.useEffect(()=>{if(d){const G=f();d.playbackRate=G,g(G)}},[d]);const S=G=>{g(G),d&&(d.playbackRate=G);try{localStorage.setItem("react-player-playback-speed",G.toString())}catch{}},A=m==="hls"||m==="dash",x=T.useMemo(()=>{if(!n||!A)return[];const G=m==="dash"?"dash":"hls";return[...n].map(te=>({value:`${G}-${te.originalIndex}`,height:te.height,bitrate:te.bitrate,originalIndex:te.originalIndex})).sort((te,ge)=>{const Me=(ge.height||0)-(te.height||0);if(Me!==0)return Me;const he=(ge.bitrate||0)-(te.bitrate||0);return he!==0?he:ge.originalIndex-te.originalIndex})},[n,A,m]),k=()=>E("main"),U=G=>!G||G<=0?"":G>=1e6?`${(G/1e6).toFixed(1)} Mbps`:`${Math.round(G/1e3)} Kbps`,Y=(G,te)=>G&&G>0?`${G}p`:U(te)||"Quality",Q=()=>{if(!A||x.length===0)return"Off";if(o==="auto")return"Auto";const G=x.find(ge=>ge.value===o);if(!G)return"Auto";const te=Y(G.height,G.bitrate);return te==="Quality"?"Custom":te},L=A&&x.length>0,O=(G,te)=>te&&te>0?`Uses about ${(te*3600/8/1e9).toFixed(2)} GB per hour`:G>=2160?"Uses about 7.00 GB per hour":G>=1440?"Uses about 3.50 GB per hour":G>=1080?"Uses about 2.50 GB per hour":G>=720?"Uses about 1.00 GB per hour":G>=480?"Uses about 0.70 GB per hour":G>=360?"Uses about 0.50 GB per hour":"Uses about 0.30 GB per hour";return T.createElement($s,{title:"Settings"},T.createElement(pB,{button:T.createElement(bM,{className:r}),align:"center"},T.createElement("div",{className:"bg-[#3a4049] text-white rounded-[7px] w-80 overflow-hidden"},p==="main"&&T.createElement("div",{className:"p-4"},T.createElement("h3",{className:"text-white font-bold text-xl mb-4"},"Settings"),T.createElement("p",{className:"text-gray-300 text-sm mb-4"},"Customize playback"),T.createElement("div",{className:"space-y-0 border-t border-gray-600"},t&&T.createElement("button",{onClick:()=>E("quality"),className:"w-full flex items-center justify-between py-4 border-b border-gray-600 rounded-[5px] transition-colors"},T.createElement("div",{className:"flex items-center gap-3"},T.createElement("div",{className:"p-2 bg-blue-500 rounded-md"},T.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}))),T.createElement("div",{className:"text-left"},T.createElement("div",{className:"text-white font-semibold"},"Quality"),T.createElement("div",{className:"text-gray-400 text-sm"},Q()))),T.createElement(Ps,{className:"w-5 h-5 text-gray-400"})),T.createElement("button",{onClick:()=>E("subtitles"),className:"w-full flex items-center justify-between py-4 border-b border-gray-600 rounded-[5px] transition-colors"},T.createElement("div",{className:"flex items-center gap-3"},T.createElement("div",{className:"p-2 bg-purple-500 rounded-md"},T.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"}))),T.createElement("div",{className:"text-left"},T.createElement("div",{className:"text-white font-semibold"},"Subtitles"),T.createElement("div",{className:"text-gray-400 text-sm"},c?c.label:"Off"))),T.createElement(Ps,{className:"w-5 h-5 text-gray-400"})),T.createElement("button",{onClick:()=>E("speed"),className:"w-full flex items-center justify-between py-4 rounded-[5px] transition-colors"},T.createElement("div",{className:"flex items-center gap-3"},T.createElement("div",{className:"p-2 bg-green-500 rounded-md"},T.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"}))),T.createElement("div",{className:"text-left"},T.createElement("div",{className:"text-white font-semibold"},"Speed"),T.createElement("div",{className:"text-gray-400 text-sm"},h,"x"))),T.createElement(Ps,{className:"w-5 h-5 text-gray-400"})))),p==="quality"&&T.createElement("div",{className:"p-4"},T.createElement("div",{className:"flex items-center gap-3 mb-4"},T.createElement("button",{onClick:k,className:"p-1 rounded-md transition-colors"},T.createElement(Ps,{className:"w-6 h-6 text-white rotate-180"})),T.createElement("h3",{className:"text-white font-bold text-xl"},"Video Quality")),T.createElement("div",{className:"space-y-3"},L?T.createElement(T.Fragment,null,T.createElement("button",{onClick:()=>fE.setQuality(m,"auto"),className:`w-full text-left px-4 py-3 rounded-md transition-all ${i==="auto"?"bg-white/10":"hover:bg-white/5"}`},T.createElement("div",{className:"flex items-start justify-between"},T.createElement("div",null,T.createElement("div",{className:"text-white font-semibold text-lg mb-1"},"Auto"),T.createElement("div",{className:"text-gray-400 text-sm"},"Adjust to your connection")),i==="auto"&&T.createElement(Ds,{className:"w-6 h-6 text-white mt-1"}))),x.map(G=>T.createElement("button",{key:G.value,onClick:()=>fE.setQuality(m,G.value),className:`w-full text-left px-4 py-3 rounded-md transition-all ${i===G.value?"bg-white/10":"hover:bg-white/5"}`},T.createElement("div",{className:"flex items-start justify-between"},T.createElement("div",null,T.createElement("div",{className:"text-white font-semibold text-lg mb-1"},Y(G.height,G.bitrate)),T.createElement("div",{className:"text-gray-400 text-sm"},O(G.height,G.bitrate))),i===G.value&&T.createElement(Ds,{className:"w-6 h-6 text-white mt-1"}))))):T.createElement("button",{className:"w-full text-left px-4 py-3 rounded-md bg-white/10 cursor-default"},T.createElement("div",{className:"flex items-start justify-between"},T.createElement("span",{className:"text-white font-semibold text-lg"},"Off"),T.createElement(Ds,{className:"w-6 h-6 text-white mt-1"}))))),p==="subtitles"&&T.createElement("div",{className:"p-4"},T.createElement("div",{className:"flex items-center gap-3 mb-4"},T.createElement("button",{onClick:k,className:"p-1 hover:bg-white/10 rounded-md transition-colors"},T.createElement(Ps,{className:"w-6 h-6 text-white rotate-180"})),T.createElement("h3",{className:"text-white font-bold text-xl"},"Subtitles")),T.createElement("div",{className:"space-y-3"},T.createElement("button",{onClick:()=>u(null),className:`w-full text-left px-4 py-3 rounded-[5px] transition-all flex items-center justify-between ${c?"":"bg-[#454545]"}`},T.createElement("span",{className:"text-white font-semibold text-lg"},"Off"),!c&&T.createElement(Ds,{className:"w-6 h-6 text-white"})),l?.map((G,te)=>T.createElement("button",{key:te,onClick:()=>u(G),className:`w-full text-left px-4 py-3 rounded-md transition-all flex items-center justify-between ${c?.label===G.label?"bg-white/10":"hover:bg-white/5"}`},T.createElement("span",{className:"text-white font-semibold text-lg"},G.label),c?.label===G.label&&T.createElement(Ds,{className:"w-6 h-6 text-white"}))))),p==="speed"&&T.createElement("div",{className:"p-4"},T.createElement("div",{className:"flex items-center gap-3 mb-4"},T.createElement("button",{onClick:k,className:"p-1 hover:bg-white/10 rounded-md transition-colors"},T.createElement(Ps,{className:"w-6 h-6 text-white rotate-180"})),T.createElement("h3",{className:"text-white font-bold text-xl"},"Playback Speed")),T.createElement("div",{className:"space-y-3 max-h-80 overflow-y-auto"},mE.map(G=>T.createElement("button",{key:G,onClick:()=>S(G),className:`w-full text-left px-4 py-3 rounded-[5px] transition-all flex items-center justify-between ${h===G?"bg-[#454545]":""}`},T.createElement("span",{className:"text-white font-semibold text-lg"},G===1?"Normal":`${G}x`),h===G&&T.createElement(Ds,{className:"w-6 h-6 text-white"}))))))))},QS=({config:r})=>{const e="icon-button",{videoWrapperRef:t,videoRef:n,adVideoRef:i,episodeList:o,currentEpisodeIndex:l,resetStore:c,isAdPlaying:u,muted:d,setMuted:m,adCurrentTime:f}=Kn(Li(te=>({videoWrapperRef:te.videoWrapperRef,videoRef:te.videoRef,adVideoRef:te.adVideoRef,episodeList:te.episodeList,currentEpisodeIndex:te.currentEpisodeIndex,resetStore:te.resetStore,isAdPlaying:te.isAdPlaying,muted:te.muted,setMuted:te.setMuted,adCurrentTime:te.adCurrentTime}))),[h,g]=T.useState(0);T.useEffect(()=>{if(!i||!u){g(0);return}const te=()=>{i.duration&&Number.isFinite(i.duration)&&g(i.duration)};return te(),i.addEventListener("loadedmetadata",te),i.addEventListener("durationchange",te),()=>{i.removeEventListener("loadedmetadata",te),i.removeEventListener("durationchange",te)}},[i,u]);const p=T.useCallback(te=>{if(isNaN(te)||te<0)return"0:00";const ge=Math.floor(te/60),Me=Math.floor(te%60);return`${ge}:${Me.toString().padStart(2,"0")}`},[]),E=T.useMemo(()=>{if(h<=0||f<=0)return null;const te=Math.max(0,h-f);return p(te)},[h,f,p]),[S,A]=T.useState(!1),[x,k]=T.useState(!1),U=()=>{!Pr.isEnabled||S||(Pr.isFullscreen?Pr.exit():t&&Pr.request(t))};T.useEffect(()=>{if(!Pr.isEnabled)return;const te=()=>k(Pr.isFullscreen);return Pr.on("change",te),()=>{Pr.off("change",te)}},[]);const Y=()=>{const te=u?i??n:n;if(!te)return;const ge=!te.muted;n&&n.muted!==ge&&(n.muted=ge),i&&i.muted!==ge&&(i.muted=ge),m(ge)},Q=async()=>{if(n)try{!document.pictureInPictureElement&&!S?(await n.requestPictureInPicture(),A(!0)):document.pictureInPictureElement&&S&&(await document.exitPictureInPicture(),A(!1))}catch{}};T.useEffect(()=>{const te=()=>A(!!document.pictureInPictureElement);return document.addEventListener("enterpictureinpicture",te),document.addEventListener("leavepictureinpicture",te),()=>{document.removeEventListener("enterpictureinpicture",te),document.removeEventListener("leavepictureinpicture",te)}},[]);const L=()=>{c(),r?.onClose?.()},O=()=>T.createElement("div",{className:"flex items-center gap-4"},T.createElement("span",{className:"inline-flex items-center gap-1 rounded-full px-4 py-2 font-medium text-xs tracking-wider text-red-600 border border-gray-700/60"},T.createElement("span",null,"Ad"),E&&T.createElement("span",{className:"text-gray-300 font-normal normal-case ml-1 text-xs"},E))),G=()=>T.createElement("div",{className:"flex"},T.createElement("div",null,T.createElement("h1",{className:"text-gray-200 text-lg lg:text-2xl font-semibold"},o.length>0?o[l]?.title:r?.title),r?.isTrailer&&T.createElement("p",{className:"text-gray-300 text-sm lg:text-base font-normal"},"Trailer")));return T.createElement("div",{className:"flex items-center justify-between p-10 bg-linear-to-b from-black"},u?O():G(),T.createElement("div",{className:"flex items-center gap-7 text-white"},!u&&T.createElement(yB,{iconClassName:e,qualityConfig:r?.qualityConfig}),T.createElement("div",{onClick:Y},d?T.createElement($s,{title:"Unmute"},T.createElement(DM,{className:e})):T.createElement($s,{title:"Mute"},T.createElement(NM,{className:e}))),T.createElement($s,{title:S?"Disabled in PiP":x?"Exit Fullscreen":"Fullscreen",className:`${e} ${S?"opacity-50 cursor-not-allowed":""}`},T.createElement("div",{onClick:U,className:S?"pointer-events-none":""},T.createElement(mB,{isFullScreen:x,className:e}))),!u&&T.createElement($s,{className:"whitespace-nowrap",title:S?"Exit PiP":"Enter PiP"},T.createElement("div",{onClick:Q},T.createElement(gB,{className:e}))),r?.onClose&&T.createElement(T.Fragment,null,T.createElement("div",{className:"w-[2px] h-10 bg-gray-500 hover:bg-gray-300 mx-2"}),T.createElement("div",{onClick:L},T.createElement($s,{title:"Close"},T.createElement(PM,{className:e}))))))},Ch="video-controls:interaction",bB=3e3,gE=10,ZS=T.memo(()=>Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon-class",fill:"currentColor",viewBox:"0 0 67 67"},Je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.5 0C52 0 67 15 67 33.5S52 67 33.5 67 0 52 0 33.5c.03-1.4 1.17-2.53 2.58-2.53 1.4 0 2.55 1.13 2.57 2.53 0 15.65 12.7 28.35 28.35 28.35 15.66 0 28.35-12.7 28.35-28.35 0-15.66-12.69-28.35-28.35-28.35h-.04c-7 0-13.76 2.61-18.94 7.3-.46.42-.91.85-1.34 1.29h6.58c1.42 0 2.57 1.16 2.57 2.58 0 1.42-1.15 2.58-2.57 2.58H6.01c-1.42 0-2.57-1.16-2.57-2.58V2.58C3.44 1.15 4.59 0 6.01 0c1.43 0 2.58 1.15 2.58 2.58v8.52c.78-.86 1.61-1.7 2.47-2.47A33.407 33.407 0 0 1 33.46 0h.04zM33.98 41.34c-1.6-2.21-2-5.2-2-7.85 0-2.65.4-5.63 2-7.83 1.44-1.97 3.47-2.84 5.88-2.84 2.41 0 4.42.87 5.86 2.84 1.61 2.21 2.03 5.16 2.03 7.83 0 2.66-.4 5.64-2 7.85-1.43 1.97-3.47 2.84-5.89 2.84-2.41 0-4.45-.86-5.88-2.84zm-9.73-12.77l-5 1.58v-4.21l5.87-2.65h4.28v20.47h-5.15V28.57zm17.61 9.96c.61-1.33.68-3.6.68-5.04s-.07-3.7-.68-5.02c-.4-.86-1.04-1.29-2-1.29-.95 0-1.59.42-1.99 1.29-.61 1.32-.68 3.58-.68 5.02 0 1.44.07 3.71.68 5.04.4.87 1.04 1.29 1.99 1.29.96 0 1.6-.42 2-1.29z"})));ZS.displayName="BackwardIcon";const JS=T.memo(()=>Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon-class",fill:"currentColor",viewBox:"0 0 67 67"},Je.createElement("path",{fillRule:"evenodd",d:"M33.5 0C15 0 0 15 0 33.5S15 67 33.5 67 67 52 67 33.5a2.583 2.583 0 0 0-2.58-2.53c-1.4 0-2.55 1.13-2.57 2.53 0 15.66-12.69 28.35-28.35 28.35-15.65 0-28.35-12.7-28.35-28.35 0-15.66 12.7-28.35 28.35-28.35 7.3 0 13.96 2.76 18.99 7.3.46.42.9.85 1.34 1.29h-6.59a2.58 2.58 0 0 0 0 5.16h13.75c1.42 0 2.57-1.16 2.57-2.58V2.58c0-1.43-1.15-2.58-2.57-2.58-1.43 0-2.58 1.15-2.58 2.58v8.52c-.78-.87-1.61-1.7-2.47-2.48A33.446 33.446 0 0 0 33.54 0h-.04zM33.98 41.34c-1.6-2.21-2-5.2-2-7.85 0-2.65.4-5.63 2-7.83 1.44-1.97 3.47-2.84 5.88-2.84 2.41 0 4.42.87 5.86 2.84 1.61 2.21 2.03 5.16 2.03 7.83 0 2.66-.4 5.64-2 7.85-1.43 1.97-3.47 2.84-5.89 2.84-2.41 0-4.45-.87-5.88-2.84zm-9.73-12.77l-5 1.58v-4.21l5.87-2.65h4.28v20.47h-5.15V28.57zm17.61 9.96c.61-1.33.68-3.6.68-5.04s-.07-3.7-.68-5.02c-.4-.87-1.04-1.29-2-1.29-.95 0-1.59.42-1.99 1.29-.61 1.32-.68 3.58-.68 5.02 0 1.44.07 3.71.68 5.04.4.86 1.04 1.28 1.99 1.28.96 0 1.6-.42 2-1.28z"})));JS.displayName="ForwardIcon";const kh=T.memo(()=>Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon-class",fill:"currentColor",viewBox:"0 0 67 67"},Je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.332 5.773a4.125 4.125 0 0 0-4.125 4.125v46.75a4.127 4.127 0 0 0 4.125 4.125 4.127 4.127 0 0 0 4.125-4.125V9.898a4.125 4.125 0 0 0-4.125-4.125zM25.707 9.898v46.75a4.125 4.125 0 1 1-8.25 0V9.898a4.123 4.123 0 0 1 4.125-4.125 4.123 4.123 0 0 1 4.125 4.125z"})));kh.displayName="PauseIcon";const Lh=T.memo(()=>Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon-class",fill:"currentColor",viewBox:"0 0 67 67"},Je.createElement("path",{d:"M20.28 9.65c-2.205-1.268-4.026-.228-4.026 2.307v43.805c0 2.535 1.82 3.574 4.027 2.307l38.471-21.903a2.556 2.556 0 0 0 1.094-.935 2.514 2.514 0 0 0 0-2.743 2.556 2.556 0 0 0-1.093-.936L20.28 9.65z"})));Lh.displayName="PlayIcon";const EB=({onClick:r,icon:e,className:t})=>Je.createElement("button",{onClick:r,className:`flex justify-center items-center h-full cursor-pointer ${t}`},e),Co=T.memo(EB);Co.displayName="ControlButton";const ew=()=>{const{videoRef:r,adVideoRef:e,isPlaying:t,setIsPlaying:n,isAdPlaying:i}=Kn(Li(g=>({videoRef:g.videoRef,adVideoRef:g.adVideoRef,isPlaying:g.isPlaying,setIsPlaying:g.setIsPlaying,isAdPlaying:g.isAdPlaying}))),{setIsBuffering:o}=Kn(Li(g=>({setIsBuffering:g.setIsBuffering}))),[l,c]=T.useState(!1),u=i?e:r,d=T.useCallback(()=>{typeof window>"u"||window.dispatchEvent(new Event(Ch))},[]),m=T.useCallback(()=>{u&&(u.paused?u.play().then(()=>{n(!0),d()}).catch(()=>{}):(u.pause(),n(!1),d()))},[u,n,d]),f=T.useCallback(()=>{u&&(u.currentTime=Math.max(0,u.currentTime-gE),d())},[u,d]),h=T.useCallback(()=>{u&&(u.currentTime=Math.min(u.duration,u.currentTime+gE),d())},[u,d]);return T.useEffect(()=>{if(!u)return;const g=()=>{c(!0),o(!0)},p=()=>{c(!1),o(!1)},E=()=>{c(!1),o(!1)},S=()=>{c(!0),o(!0)};return u.addEventListener("waiting",g),u.addEventListener("playing",p),u.addEventListener("canplay",E),u.addEventListener("stalled",S),()=>{u.removeEventListener("waiting",g),u.removeEventListener("playing",p),u.removeEventListener("canplay",E),u.removeEventListener("stalled",S)}},[u,i,o]),T.useEffect(()=>{const g=p=>{if(!(!u||i))switch(p.code){case"Space":p.preventDefault(),m(),d();break;case"ArrowLeft":p.preventDefault(),f();break;case"ArrowRight":p.preventDefault(),h();break}};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[u,m,f,h,i]),i?Je.createElement("div",{className:"flex justify-center items-center"},Je.createElement(Co,{onClick:m,className:"w-[10vw]",icon:l?Je.createElement("div",{className:"relative"},Je.createElement(oh,{className:"w-14 h-14 lg:w-18 lg:h-18 animate-spin text-white"})):t?Je.createElement(kh,null):Je.createElement(Lh,null)})):Je.createElement("div",{className:"flex justify-center items-center"},Je.createElement(Co,{onClick:f,className:"w-[15vw]",icon:Je.createElement(ZS,null)}),Je.createElement(Co,{onClick:m,className:"w-[10vw]",icon:l?Je.createElement(oh,{className:"w-14 h-14 lg:w-18 lg:h-18 animate-spin text-white"}):t?Je.createElement(kh,null):Je.createElement(Lh,null)}),Je.createElement(Co,{onClick:h,className:"w-[15vw]",icon:Je.createElement(JS,null)}))},vB=({config:r})=>T.createElement("div",{className:"px-20"},T.createElement("div",{className:"absolute top-0 left-0 h-full w-full bg-[rgba(0,0,0,0.5)] flex flex-col justify-between"},T.createElement(QS,{config:r?.headerConfig?.config}),T.createElement(ew,null),T.createElement(XS,{config:r?.bottomConfig?.config}))),Rm=Je.memo(({text:r,onClick:e,icon:t,disabled:n=!1,position:i="left"})=>{const o=t?Je.cloneElement(t,{className:"h-5 w-5 text-gray-900"}):null;return Je.createElement("div",{className:`absolute bottom-36 ${i==="left"?"left-32":"right-32"}`},Je.createElement("button",{onClick:e,disabled:n,className:`
          bg-white/80 text-gray-900 font-semibold px-6 py-2 
          rounded-md text-sm flex items-center
          backdrop-blur-sm shadow-md
          hover:bg-white/90
          transition
          focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-gray-400
          disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-white/50
        `},o&&Je.createElement("span",{className:"inline mr-2"},o),r))});Rm.displayName="VideoActionButton";const tw=Je.memo(({config:r})=>{const e=T.useRef(null),t=T.useRef(null),{setControls:n,controls:i,showCountdown:o,countdownTime:l,setShowCountdown:c,setAutoPlayNext:u,setCurrentEpisodeIndex:d,episodeList:m,setCountdownTime:f,videoRef:h,currentEpisodeIndex:g,isAdPlaying:p}=Kn(Li(Q=>({setControls:Q.setControls,controls:Q.controls,showCountdown:Q.showCountdown,countdownTime:Q.countdownTime,setShowCountdown:Q.setShowCountdown,setAutoPlayNext:Q.setAutoPlayNext,setCurrentEpisodeIndex:Q.setCurrentEpisodeIndex,episodeList:Q.episodeList,setCountdownTime:Q.setCountdownTime,videoRef:Q.videoRef,currentEpisodeIndex:Q.currentEpisodeIndex,isAdPlaying:Q.isAdPlaying}))),{onClose:E}=r?.headerConfig?.config||{},S=T.useCallback(()=>{n(!1),t.current?.classList.add("noCursor")},[n]),A=T.useCallback(()=>{e.current&&clearTimeout(e.current),e.current=setTimeout(S,bB)},[S]),x=T.useCallback(()=>{t.current?.classList.remove("noCursor"),n(!0),A()},[A,n]),k=T.useCallback(()=>{x()},[x]);T.useEffect(()=>()=>{e.current&&clearTimeout(e.current)},[]),T.useEffect(()=>{let Q;return o&&l>0&&m.length>0&&(Q=setInterval(()=>{const O=Kn.getState().countdownTime-1;f(O>0?O:0)},1e3)),()=>{Q&&clearInterval(Q)}},[o,l,m.length,f]),T.useEffect(()=>{if(typeof window>"u")return;const Q=()=>{x()};return window.addEventListener(Ch,Q),()=>{window.removeEventListener(Ch,Q)}},[x]);const U=T.useCallback(()=>{const Q=g+1;Q<m.length&&h&&m[Q]?(d(Q),u(!0),h.src=m[Q].url,h.play().catch(()=>{}),c(!1),f(10),x()):E&&E()},[g,m,h,d,u,c,f,x,E]),Y=T.useMemo(()=>o&&m.length>0&&g+1<m.length,[o,m.length,g]);return Je.createElement("div",{id:"videoPlayerControls",ref:t,className:"absolute inset-0",onMouseMove:k},i&&!p&&Je.createElement(vB,{config:r}),Y&&Je.createElement(Rm,{text:"Next Episode",onClick:U,icon:Je.createElement(hM,{className:"h-5 w-5 text-gray-900"}),disabled:g+1>=m.length,position:"right"}))});tw.displayName="Overlay";const nw=r=>typeof r=="string"&&(r.trim().startsWith("bg-")||r.trim().toLowerCase()==="transparent"),TB=r=>{const{videoRef:e}=Kn();T.useEffect(()=>e?((()=>{const n=document.createElement("style");n.id="custom-subtitle-styles";const i=document.getElementById("custom-subtitle-styles");i&&i.remove();const o=r?.backgroundColor,c=nw(o)?"transparent":o||"linear-gradient(135deg, #fbbf24, #f59e0b)",u=`
        .video-player video::cue {
          font-size: ${r?.fontSize||"1.75rem"} !important;
          background: ${c} !important;
          color: ${r?.textColor||"#000000"} !important;
          border-radius: ${r?.borderRadius||"12px"} !important;
          padding: ${r?.padding||"12px 20px"} !important;
          max-width: ${r?.maxWidth||"80%"} !important;
          ${r?.position==="top"?"top: 10% !important; bottom: auto !important;":""}
          ${r?.position==="center"?"top: 50% !important; bottom: auto !important; transform: translateX(-50%) translateY(-50%) !important;":""}
          ${r?.position==="bottom"||!r?.position?"bottom: 15% !important; top: auto !important;":""}
        }
      `;n.textContent=u,document.head.appendChild(n)})(),()=>{const n=document.getElementById("custom-subtitle-styles");n&&n.remove()}):void 0,[e,r])},SB=r=>{switch(r||"bottom"){case"top":return{top:"10%",left:"50%",transform:"translateX(-50%)"};case"center":return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};default:return{bottom:"15%",left:"50%",transform:"translateX(-50%)"}}},rw=({styleConfig:r})=>{const{videoRef:e,activeSubtitle:t}=Kn(Li(g=>({videoRef:g.videoRef,activeSubtitle:g.activeSubtitle}))),[n,i]=T.useState(""),[o,l]=T.useState(!1),c=T.useRef(null);T.useEffect(()=>{if(!e)return;const g=()=>{c.current===null&&(c.current=requestAnimationFrame(()=>{if(c.current=null,!t){i(""),l(!1);return}const p=e.currentTime,S=Array.from(e.textTracks).find(A=>A.mode==="showing"&&A.label===t.label);if(S?.cues){const A=Array.from(S.cues).filter(x=>p>=x.startTime&&p<=x.endTime);if(A.length>0){const x=A[0];let k="";try{"text"in x?k=x.text:typeof x.getCueAsHTML=="function"?k=x.getCueAsHTML()?.textContent??"":k=x.toString()??""}catch{k=""}i(k),l(!!k)}else i(""),l(!1)}else i(""),l(!1)}))};return e.addEventListener("timeupdate",g),()=>{e.removeEventListener("timeupdate",g),c.current!==null&&(cancelAnimationFrame(c.current),c.current=null)}},[e,t]),T.useEffect(()=>{t||(i(""),l(!1))},[t]);const u=r?.backgroundColor??"rgba(0, 0, 0, 0.4)",d=nw(u),m=d?u.trim().toLowerCase()==="transparent"?"bg-transparent":u.trim():void 0,f=u.trim().toLowerCase()==="transparent"||m==="bg-transparent",h=T.useMemo(()=>{const g={position:"absolute",...SB(r?.position),fontSize:r?.fontSize??"1.2rem",fontWeight:"500",lineHeight:"1.2",textAlign:"center",color:r?.textColor??"#fff",padding:r?.padding??"8px 16px",borderRadius:r?.borderRadius??"5px",maxWidth:r?.maxWidth??"60%",minWidth:"fit-content",boxShadow:f?"none":"0 6px 20px rgba(0, 0, 0, 0.4)",backdropFilter:f?"none":"blur(6px)",border:f?"none":"1px solid rgba(255, 255, 255, 0.2)",transition:"all 0.2s ease-in-out",opacity:o?1:0,zIndex:10,pointerEvents:"none"};return d||(g.background=u),g},[r,o,u,d,f]);return!o||!n?null:Je.createElement("div",{className:m,style:h},n)};rw.displayName="SubtitleOverlay";const wB={enableWorker:!0,lowLatencyMode:!1,backBufferLength:90,liveSyncDurationCount:3,maxBufferSize:80*1e6,maxBufferLength:30,manifestLoadingMaxRetry:4,manifestLoadingRetryDelay:1e3,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,fragLoadingMaxRetry:6,fragLoadingRetryDelay:750,startLevel:-1,startPosition:-1,capLevelToPlayerSize:!0},_B={streaming:{abr:{autoSwitchBitrate:{video:!0,audio:!0},limitBitrateByPortal:!0,ABRStrategy:"abrThroughput",bandwidthSafetyFactor:.9},buffer:{fastSwitchEnabled:!0,bufferTimeAtTopQuality:28,bufferTimeAtTopQualityLongForm:55},lowLatencyEnabled:!1},debug:{logLevel:jU.LOG_LEVEL_NONE}},xB=4,IB=3,AB=r=>r?r.split("#")[0]?.split("?")[0]??r:"",RB=(r,e)=>{if(r==="hls"||r==="dash"||r==="mp4")return r;if(r==="youtube"||r==="other")return"other";const t=AB(e).toLowerCase(),n=rB(t);return n==="hls"?"hls":n==="dash"?"dash":n==="mp4"?"mp4":t.includes(".m3u8")?"hls":t.includes(".mpd")?"dash":t.includes(".mp4")?"mp4":"other"},CB=({enabled:r,source:e,videoElement:t,setHlsInstance:n,setQualityLevels:i,setCurrentQuality:o})=>{const l=T.useRef(0),c=T.useRef(void 0);T.useEffect(()=>{if(!r||!t)return;l.current=0,i([]),o("auto");const u=()=>{c.current&&(window.clearTimeout(c.current),c.current=void 0)},d=()=>{n(null),t.src=e,t.load();const x=()=>{try{const k=t?.videoTracks;if(k&&k.length>0){const U=Array.from(k).map((Y,Q)=>({height:Y.height??0,bitrate:Y.bandwidth??0,originalIndex:Q}));i(U)}}catch{i([])}};return t.addEventListener("loadedmetadata",x),()=>{t.removeEventListener("loadedmetadata",x)}};if(!Ri.isSupported()&&t.canPlayType("application/vnd.apple.mpegurl"))return d();if(!Ri.isSupported()){n(null),t.src=e,t.load();return}const m=new Ri(wB);n(m);const f=()=>{const k=(m.levels??[]).map((U,Y)=>({height:U.height??0,bitrate:U.bitrate??0,originalIndex:Y}));i(k)},h=()=>{l.current=0,f();const{activeQuality:x}=Kn.getState();if(x&&x.startsWith("hls-")){const k=parseInt(x.replace("hls-",""),10);if(!Number.isNaN(k)&&k>=0){m.loadLevel=k,m.nextLevel=k,m.currentLevel=k,o(x);return}}o("auto"),m.currentLevel=-1,m.loadLevel=-1,m.nextLevel=-1},g=()=>{f()},p=(x,k)=>{typeof k?.level=="number"&&k.level>=0&&o(`hls-${k.level}`)},E=()=>{if(l.current>=xB)return;const x=Math.min(2e3*(l.current+1),1e4);u(),c.current=window.setTimeout(()=>{try{m.startLoad()}catch{}},x),l.current+=1},S=(x,k)=>{if(!k)return;const U=Ri.ErrorTypes??{};if(k.fatal)switch(k.type){case(U.NETWORK_ERROR??"networkError"):E();break;case(U.MEDIA_ERROR??"mediaError"):try{m.recoverMediaError()}catch{E()}break;default:u(),m.destroy(),n(null);break}else k.type===(U.NETWORK_ERROR??"networkError")&&E()};m.attachMedia(t),m.loadSource(e);const A=Ri.Events??{};return m.on(A.MANIFEST_PARSED??"manifestParsed",h),m.on(A.LEVELS_UPDATED??"levelsUpdated",g),m.on(A.LEVEL_SWITCHED??"levelSwitched",p),m.on(A.ERROR??"error",S),()=>{u(),m.off(A.MANIFEST_PARSED??"manifestParsed",h),m.off(A.LEVELS_UPDATED??"levelsUpdated",g),m.off(A.LEVEL_SWITCHED??"levelSwitched",p),m.off(A.ERROR??"error",S),m.destroy(),n(null),i([]),o("auto")}},[r,e,t,n,i,o])},kB=({enabled:r,source:e,videoElement:t,setDashInstance:n,setQualityLevels:i,setCurrentQuality:o})=>{const l=T.useRef(0),c=T.useRef(void 0);T.useEffect(()=>{if(!r||!t)return;if(!qU()){n(null),i([]),t.src=e,t.load();return}l.current=0,i([]),o("auto");const u=ma().create();n(u);const d=u,m=()=>{c.current&&(window.clearTimeout(c.current),c.current=void 0)},f=()=>{u.updateSettings(_B)},h=()=>{try{const U=d.getBitrateInfoListFor?.("video")??[],Y=Array.from(U).map(Q=>({height:Q.height??0,bitrate:Q.bitrate,originalIndex:Q.qualityIndex??Q.index??0,id:Q.id}));i(Y)}catch{i([])}},g=()=>{l.current=0,h();const{activeQuality:U}=Kn.getState();if(U&&U.startsWith("dash-")){const Q=parseInt(U.replace("dash-",""),10);if(!Number.isNaN(Q)&&Q>=0){d.setAutoSwitchQualityFor?.("video",!1),d.setQualityFor?.("video",Q),o(U);return}}d.setAutoSwitchQualityFor?.("video",!0);const Y=d.getQualityFor?.("video");typeof Y=="number"&&Y>=0?o(`dash-${Y}`):o("auto")},p=()=>{h()},E=U=>{if(U?.mediaType==="video"){const Y=d.getQualityFor?.("video");typeof Y=="number"&&Y>=0&&o(`dash-${Y}`)}},S=()=>{u.on(ma.events.STREAM_INITIALIZED,g),u.on(ma.events.MANIFEST_LOADED,p),u.on(ma.events.QUALITY_CHANGE_RENDERED,E),u.on(ma.events.ERROR,k)},A=()=>{u.off(ma.events.STREAM_INITIALIZED,g),u.off(ma.events.MANIFEST_LOADED,p),u.off(ma.events.QUALITY_CHANGE_RENDERED,E),u.off(ma.events.ERROR,k)},x=()=>{if(l.current>=IB)return;l.current+=1,m();const U=Math.min(1500*l.current,6e3);c.current=window.setTimeout(()=>{A(),u.reset(),i([]),f(),S(),u.initialize(t,e,t.autoplay??!1)},U)},k=U=>{if(!U)return;const Q=(typeof U?.error=="string"?U.error:typeof U?.event=="object"&&U.event?U.event.id:void 0)?.toString().toLowerCase();Q&&(Q.includes("download")||Q.includes("manifest")||Q.includes("mediasource")||Q.includes("capability")||Q.includes("fragment"))&&x()};return f(),S(),u.initialize(t,e,t.autoplay??!1),()=>{m(),A(),u.reset(),n(null),i([]),o("auto")}},[r,e,t,n,i,o])},LB=(r,e)=>{const{videoRef:t,setQualityLevels:n,setHlsInstance:i,setDashInstance:o,setStreamType:l,setActiveQuality:c,setCurrentQuality:u}=Kn(Li(m=>({videoRef:m.videoRef,setQualityLevels:m.setQualityLevels,setHlsInstance:m.setHlsInstance,setDashInstance:m.setDashInstance,setStreamType:m.setStreamType,setActiveQuality:m.setActiveQuality,setCurrentQuality:m.setCurrentQuality}))),d=T.useMemo(()=>RB(e,r),[e,r]);T.useEffect(()=>{r&&(l(d),c("auto"),u("auto"),n([]))},[r,d,l,c,u,n]),T.useEffect(()=>{d!=="dash"&&o(null),d!=="hls"&&i(null)},[d,o,i]),T.useEffect(()=>{t&&(d==="mp4"||d==="other"?(t.src=r,t.load()):t.removeAttribute("src"))},[t,r,d]),CB({enabled:d==="hls",source:r,videoElement:t,setHlsInstance:i,setQualityLevels:n,setCurrentQuality:u}),kB({enabled:d==="dash",source:r,videoElement:t,setDashInstance:o,setQualityLevels:n,setCurrentQuality:u}),T.useEffect(()=>{if(t)return()=>{t.pause(),t.removeAttribute("src"),t.load();const{setIsPlaying:m,setBufferedProgress:f}=Kn.getState();m(!1),f(0)}},[t,r])},NB=r=>{const{videoRef:e,activeSubtitle:t,setSubtitles:n}=Kn(),i=T.useRef([]);T.useEffect(()=>{if(i.current.forEach(u=>clearTimeout(u)),i.current=[],!e)return;const o=e.getElementsByTagName("track");for(;o.length>0;)e.removeChild(o[0]);Array.from(e.textTracks).forEach(u=>{u.mode="disabled"});let l=null,c=null;return t&&r&&r.findIndex(d=>d.label===t.label)!==-1&&(l=document.createElement("track"),l.kind="subtitles",l.label=t.label,l.srclang=t.lang,l.src=t.url,l.default=!1,e.appendChild(l),c=()=>{const m=Array.from(e.textTracks).find(f=>f.label===t.label);m&&(m.mode="showing")},l.addEventListener("load",c),[100,500,1e3].forEach(m=>{const f=setTimeout(()=>{const h=Array.from(e.textTracks).find(g=>g.label===t.label);h&&h.mode!=="showing"&&(h.mode="showing")},m);i.current.push(f)})),()=>{i.current.forEach(u=>clearTimeout(u)),i.current=[],l&&c&&l.removeEventListener("load",c)}},[e,t,r]),T.useEffect(()=>{r&&n(r)},[r,n])},DB=(r,e,t,n)=>{const{videoRef:i,setShowCountdown:o}=Kn(),l=T.useRef(!1),c=T.useRef(null);T.useEffect(()=>{if(!i)return;const u=i.src||i.currentSrc;c.current!==u&&(l.current=!1,c.current=u)},[i?.src,i?.currentSrc,i]),T.useEffect(()=>{if(!i)return;const u=()=>{l.current||(l.current=!0,r?.onViewed?.())},d=()=>{e&&e.length>0&&t!==void 0&&t+1<e.length?o(!0):n&&n()};return i.addEventListener("play",u),i.addEventListener("ended",d),()=>{i.removeEventListener("play",u),i.removeEventListener("ended",d)}},[i,e,t,n,r,o])},PB=r=>{const{videoRef:e}=Kn(),[t,n]=T.useState(!1);return T.useEffect(()=>{if(!e||!r)return;const o=()=>{e.currentTime>=r.start&&e.currentTime<r.end?n(!0):n(!1)};return e.addEventListener("timeupdate",o),()=>{e.removeEventListener("timeupdate",o)}},[e,r]),{showSkipIntro:t,handleSkipIntro:()=>{e&&r&&(e.currentTime=r.end,n(!1))}}},MB=(r,e,t)=>{const{videoRef:n,setEpisodeList:i,setCurrentEpisodeIndex:o,setShowCountdown:l}=Kn();T.useEffect(()=>{r&&i(r),e!==void 0&&o(e)},[r,e,i,o]),T.useEffect(()=>{if(!n||!t)return;const c=()=>{const u=n.currentTime||0;(t.showAtEnd&&n.ended||t.showAtTime&&u>=t.showAtTime)&&l(!0)};return n.addEventListener("timeupdate",c),n.addEventListener("ended",c),()=>{n.removeEventListener("timeupdate",c),n.removeEventListener("ended",c)}},[n,t,l])},OB=()=>{const{setCurrentTime:r,setDuration:e,setBufferedProgress:t,setIsPlaying:n}=Kn(Li(Q=>({setCurrentTime:Q.setCurrentTime,setDuration:Q.setDuration,setBufferedProgress:Q.setBufferedProgress,setIsPlaying:Q.setIsPlaying}))),i=T.useRef(0),o=T.useRef(0),l=T.useRef(null),c=T.useRef(null),u=T.useRef(null),d=T.useRef(null),m=Q=>{if(Q){try{Q.pause()}catch{}try{Q.currentTime=0}catch{}Q.removeAttribute("src"),Q.load()}},f=Q=>{u.current!==null&&(cancelAnimationFrame(u.current),u.current=null),l.current=null,i.current=Q,r(Q)},h=Q=>{l.current=Q,u.current===null&&(u.current=requestAnimationFrame(()=>{u.current=null;const L=l.current;typeof L=="number"&&(l.current=null,i.current=L,r(L))}))},g=Q=>{c.current=Q,d.current===null&&(d.current=requestAnimationFrame(()=>{d.current=null;const L=c.current;typeof L=="number"&&(c.current=null,o.current=L,t(L))}))},p=Q=>{Q.preventDefault()},E=Q=>{const L=Q?.currentTarget?.currentTime;typeof L=="number"&&!Number.isNaN(L)&&f(L)},S=Q=>{const L=Q?.currentTarget?.currentTime;typeof L=="number"&&!Number.isNaN(L)&&(Math.abs(L-i.current)>=.1||L===0)&&h(L)},A=Q=>{const L=Q?.currentTarget?.duration;typeof L=="number"&&!Number.isNaN(L)&&e(L)},x=Q=>{const L=Q.currentTarget;if(L.buffered.length>0&&L.duration>0&&!isNaN(L.duration)){let O=0;for(let te=0;te<L.buffered.length;te++)if(L.currentTime>=L.buffered.start(te)&&L.currentTime<=L.buffered.end(te)){O=L.buffered.end(te);break}O===0&&L.buffered.length>0&&(O=L.buffered.end(L.buffered.length-1));const G=Math.min(O/L.duration*100,100);Math.abs(G-o.current)>=1&&g(G)}},k=()=>{const Q=Kn.getState();Q.adVideoRef&&(m(Q.adVideoRef),Q.setAdVideoRef(null)),(Q.isAdPlaying||Q.currentAd)&&(Q.setIsAdPlaying(!1),Q.setCurrentAd(null),Q.setAdType(null),Q.setAdCurrentTime(0),Q.setCanSkipAd(!1),Q.setSkipCountdown(0)),Q.isPlaying||n(!0)},U=()=>{Kn.getState().isPlaying&&n(!1)},Y=Q=>{Kn.getState().isPlaying&&n(!1)};return T.useEffect(()=>()=>{u.current!==null&&(cancelAnimationFrame(u.current),u.current=null),d.current!==null&&(cancelAnimationFrame(d.current),d.current=null)},[]),{onRightClick:p,onSeeked:E,onTimeUpdate:S,onLoadedMetadata:A,onProgress:x,onPlay:k,onPause:U,onEnded:Y}},FB=r=>{const{videoRef:e,setPlaying:t,setIsPlaying:n,currentTime:i,duration:o,isAdPlaying:l,setIsAdPlaying:c,currentAd:u,setCurrentAd:d,adType:m,setAdType:f,adVideoRef:h,setAdVideoRef:g,setAdCurrentTime:p,setCanSkipAd:E,setSkipCountdown:S,playedAdBreaks:A,addPlayedAdBreak:x,midRollQueue:k,setMidRollQueue:U}=Kn(Li(Oe=>({videoRef:Oe.videoRef,setPlaying:Oe.setPlaying,setIsPlaying:Oe.setIsPlaying,currentTime:Oe.currentTime,duration:Oe.duration,isAdPlaying:Oe.isAdPlaying,setIsAdPlaying:Oe.setIsAdPlaying,currentAd:Oe.currentAd,setCurrentAd:Oe.setCurrentAd,adType:Oe.adType,setAdType:Oe.setAdType,adVideoRef:Oe.adVideoRef,setAdVideoRef:Oe.setAdVideoRef,setAdCurrentTime:Oe.setAdCurrentTime,setCanSkipAd:Oe.setCanSkipAd,setSkipCountdown:Oe.setSkipCountdown,playedAdBreaks:Oe.playedAdBreaks,addPlayedAdBreak:Oe.addPlayedAdBreak,midRollQueue:Oe.midRollQueue,setMidRollQueue:Oe.setMidRollQueue}))),Y=T.useRef(!1),Q=T.useRef(!1),L=T.useRef(!1),O=T.useRef(0),G=T.useRef(null),te=T.useRef(!1),ge=T.useCallback(Oe=>{if(Oe){try{Oe.pause()}catch{}try{Oe.currentTime=0}catch{}Oe.removeAttribute("src"),Oe.load()}},[]);T.useEffect(()=>{if(!r?.midRoll||r.midRoll.length===0){U([]);return}const Oe=r.midRoll.filter(Ge=>Ge&&typeof Ge.time=="number"&&Ge.time>=0&&Ge.time<Number.MAX_SAFE_INTEGER&&typeof Ge.id=="string"&&Ge.id.trim()!==""&&typeof Ge.adUrl=="string"&&Ge.adUrl.trim()!==""&&typeof Ge.type=="string"&&Ge.type==="mid-roll");if(Oe.length===0){U([]);return}const Pe=[...Oe].sort((Ge,qe)=>Ge.time-qe.time).filter((Ge,qe,Ze)=>qe===Ze.findIndex(ct=>ct.id===Ge.id));U(Pe)},[r?.midRoll,U]);const Me=async()=>{if(!r?.preRoll||Y.current||!e)return;const Oe=r.preRoll;Y.current=!0,L.current=!0,ge(Kn.getState().adVideoRef),e.pause(),t(!1),n(!1),c(!0),d(Oe),f("pre-roll"),r.onAdStart?.(Oe)},he=T.useCallback(async Oe=>{if(!e||l||te.current||A.includes(Oe.id))return;te.current=!0;const He=k.filter(Ge=>Ge.id!==Oe.id);U(He),x(Oe.id);const Pe=!e.paused;e.pause(),t(!1),n(!1),L.current=Pe,ge(Kn.getState().adVideoRef),c(!0),d(Oe),f("mid-roll"),r?.onAdStart?.(Oe),setTimeout(()=>{te.current=!1},100)},[e,l,A,k,U,x,t,n,d,f,c,r,ge]),De=async()=>{if(!r?.postRoll||Q.current||!e)return;const Oe=r.postRoll;Q.current=!0,L.current=!1,ge(Kn.getState().adVideoRef),c(!0),d(Oe),f("post-roll"),r.onAdStart?.(Oe)},_e=T.useCallback(()=>{const Oe=Kn.getState().currentAd,He=Kn.getState().adType,Pe=Kn.getState().videoRef,Ge=Kn.getState().adVideoRef;Oe&&(te.current=!1,Ge&&(ge(Ge),g(null)),c(!1),d(null),f(null),p(0),E(!1),S(0),r?.onAdEnd?.(Oe),L.current&&He!=="post-roll"&&Pe&&setTimeout(()=>{Pe&&!Pe.paused||(Pe.play().catch(()=>{t(!1),n(!1)}),t(!0),n(!0))},100),L.current=!1)},[r,c,d,f,p,E,S,g,t,n,ge]),ke=()=>{!u||!u.skipable||(r?.onAdSkip?.(u),_e())};return T.useEffect(()=>{if(!h||!l)return;const Oe=()=>{_e()};let He=!1;const Pe=()=>{if(!u)return;const Ge=Number(u.duration);if(!(!Number.isFinite(Ge)||Ge<=0)&&h.currentTime>=Ge){if(h.currentTime>Ge)try{h.currentTime=Ge}catch{}He||(He=!0,_e())}};return h.addEventListener("ended",Oe),h.addEventListener("timeupdate",Pe),()=>{h.removeEventListener("ended",Oe),h.removeEventListener("timeupdate",Pe)}},[h,l,_e,u]),T.useEffect(()=>{l||!h||(ge(h),g(null))},[l,h,g,ge]),T.useEffect(()=>{if(!e||!r?.preRoll||Y.current)return;const Oe=()=>{Me()};return e.addEventListener("canplay",Oe,{once:!0}),e.readyState>=2&&Me(),()=>{e.removeEventListener("canplay",Oe)}},[e,r?.preRoll]),T.useEffect(()=>{if(!e||!r?.midRoll||l){G.current!==null&&(cancelAnimationFrame(G.current),G.current=null);return}const Oe=()=>{G.current=null;const Ge=Kn.getState();if(Ge.isAdPlaying||te.current||!Ge.midRollQueue||Ge.midRollQueue.length===0)return;const qe=e.currentTime||0;qe>O.current&&(O.current=qe);for(const Ze of Ge.midRollQueue){if(Ge.playedAdBreaks.includes(Ze.id))continue;const ct=qe-Ze.time,mt=ct>=0&&ct<=1,xe=O.current>=Ze.time;if(mt&&xe){he(Ze);break}}},He=()=>{G.current===null&&(G.current=requestAnimationFrame(Oe))};e.addEventListener("timeupdate",He);const Pe=()=>{G.current!==null&&(cancelAnimationFrame(G.current),G.current=null),Oe()};return e.addEventListener("seeking",Pe),e.addEventListener("seeked",Pe),()=>{e.removeEventListener("timeupdate",He),e.removeEventListener("seeking",Pe),e.removeEventListener("seeked",Pe),G.current!==null&&(cancelAnimationFrame(G.current),G.current=null)}},[e,l,r,he]),T.useEffect(()=>{if(!e||!r?.postRoll||Q.current)return;const Oe=()=>{setTimeout(()=>{De()},500)};return e.addEventListener("ended",Oe),()=>{e.removeEventListener("ended",Oe)}},[e,r?.postRoll]),T.useEffect(()=>{if(!e?.src)return;if(Y.current=!1,Q.current=!1,L.current=!1,O.current=0,te.current=!1,G.current!==null&&(cancelAnimationFrame(G.current),G.current=null),c(!1),d(null),f(null),r?.midRoll&&r.midRoll.length>0){const He=r.midRoll.filter(Pe=>Pe&&typeof Pe.time=="number"&&Pe.time>=0&&typeof Pe.id=="string"&&Pe.id.trim()!==""&&typeof Pe.adUrl=="string"&&Pe.adUrl.trim()!==""&&typeof Pe.type=="string"&&Pe.type==="mid-roll");if(He.length>0){const Ge=[...He].sort((qe,Ze)=>qe.time-Ze.time).filter((qe,Ze,ct)=>Ze===ct.findIndex(mt=>mt.id===qe.id));U(Ge)}else U([])}else U([]);const Oe=Kn.getState().adVideoRef;Oe&&(ge(Oe),g(null))},[e?.src,r?.midRoll,c,d,f,U,ge,g]),{isAdPlaying:l,currentAd:u,adType:m,skipAd:ke,endAd:_e}},zB=({hasPreRoll:r,trackSrc:e})=>{const{videoRef:t,setVideoRef:n,isAdPlaying:i,currentAd:o,adType:l,setMuted:c,setPlaying:u,setIsPlaying:d}=Kn(Li(x=>({videoRef:x.videoRef,setVideoRef:x.setVideoRef,isAdPlaying:x.isAdPlaying,currentAd:x.currentAd,adType:x.adType,setMuted:x.setMuted,setPlaying:x.setPlaying,setIsPlaying:x.setIsPlaying}))),[m,f]=T.useState(!r),[h,g]=T.useState(!r),p=T.useRef(i);T.useEffect(()=>{r?(f(!1),g(!1)):(f(!0),g(!0))},[r,e]),T.useEffect(()=>{r&&!m&&i&&l==="pre-roll"&&f(!0)},[r,m,i,l]),T.useEffect(()=>{const x=p.current;r&&m&&x&&!i&&!h&&g(!0),p.current=i},[r,m,h,i]),T.useEffect(()=>{if(t&&r&&!h){t.pause();return}},[t,r,h]),T.useEffect(()=>{if(!t)return;const x=()=>{c(t.muted)};return x(),t.addEventListener("volumechange",x),()=>{t.removeEventListener("volumechange",x)}},[t,c]),T.useEffect(()=>{t&&(t.preload="auto")},[t]),T.useEffect(()=>{const x=t;return()=>{if(x){try{x.pause()}catch{}x.removeAttribute("src"),x.load()}}},[t]),T.useEffect(()=>{if(!t||r&&!h||i)return;let x=!1;const k=()=>{x||(u(!0),d(!0))},U=()=>{if(!t||x)return;if(!t.paused){k();return}const Y=t.play();Y&&typeof Y.then=="function"?Y.then(k).catch(Q=>{if(x)return;if(typeof Q=="object"&&Q!==null&&"name"in Q&&Q.name==="NotAllowedError"&&t.muted===!1){t.muted=!0;const O=t.play();if(O&&typeof O.then=="function"){O.then(k).catch(()=>{x||(u(!1),d(!1))});return}}u(!1),d(!1)}):k()};if(t.readyState>=2)U();else{const Y=()=>{U()};return t.addEventListener("canplay",Y,{once:!0}),()=>{x=!0,t.removeEventListener("canplay",Y)}}return()=>{x=!0}},[t,r,h,i,u,d]),T.useEffect(()=>{if(!t)return;const x=Kn.getState().videoWrapperRef;x&&(x.dataset.ready=(!r||h).toString())},[t,r,h]);const E=T.useCallback(x=>{n(x)},[n]),S=T.useMemo(()=>r&&!h,[r,h]),A=T.useMemo(()=>S&&!i,[S,i]);return{registerVideoRef:E,videoRef:t,isAdPlaying:i,currentAd:o,adType:l,initialAdFinished:h,shouldCoverMainVideo:S,shouldShowPlaceholder:A}},UB=r=>{switch(r){case 1:return"unknown";case 2:return"network";case 3:return"decode";case 4:return"src";default:return"unknown"}},BB=r=>{switch(r){case 1:return"Video playback was aborted.";case 2:return"A network error occurred while loading the video.";case 3:return"An error occurred while decoding the video.";case 4:return"The video format is not supported.";default:return"An unknown error occurred."}},$B=()=>{const{setError:r,clearError:e,error:t}=Kn(),n=T.useCallback(o=>{const c=o.currentTarget.error;if(c){const u={code:c.code,message:c.message||BB(c.code),type:UB(c.code)};r(u)}else r({code:0,message:"An unknown error occurred.",type:"unknown"})},[r]),i=T.useCallback(()=>{e();const{videoRef:o}=Kn.getState();o&&(o.load(),o.play().catch(()=>{}))},[e]);return{error:t,handleVideoError:n,clearError:e,retry:i}},iw=Je.memo(({adBreak:r,onSkip:e,config:t})=>{const{adVideoRef:n,setAdVideoRef:i,adCurrentTime:o,setAdCurrentTime:l,canSkipAd:c,setCanSkipAd:u,skipCountdown:d,setSkipCountdown:m,videoRef:f,muted:h,setIsPlaying:g}=Kn(Li(Pe=>({adVideoRef:Pe.adVideoRef,setAdVideoRef:Pe.setAdVideoRef,adCurrentTime:Pe.adCurrentTime,setAdCurrentTime:Pe.setAdCurrentTime,canSkipAd:Pe.canSkipAd,setCanSkipAd:Pe.setCanSkipAd,skipCountdown:Pe.skipCountdown,setSkipCountdown:Pe.setSkipCountdown,videoRef:Pe.videoRef,muted:Pe.muted,setIsPlaying:Pe.setIsPlaying}))),[p,E]=T.useState(!0),[S,A]=T.useState(!1),[x,k]=T.useState(0),[U,Y]=T.useState(!1),[Q,L]=T.useState(!1),O=T.useRef(null),G=T.useRef(null),te=T.useCallback(Pe=>{Kn.getState().canSkipAd!==Pe&&u(Pe)},[u]),ge=T.useCallback(Pe=>{Kn.getState().skipCountdown!==Pe&&m(Pe)},[m]);T.useEffect(()=>{if(S){E(!0),O.current&&clearTimeout(O.current);return}return O.current=setTimeout(()=>{E(!1)},3e3),()=>{O.current&&clearTimeout(O.current)}},[S]);const Me=T.useMemo(()=>{const Pe=Number.isFinite(r.skipAfter)?Math.max(0,Number(r.skipAfter)):0;return x>0?Math.min(Pe,x):Pe},[r.skipAfter,x]),he=r.sponsoredUrl;T.useEffect(()=>{k(0),Y(!1),L(!1),l(0),G.current&&(clearTimeout(G.current),G.current=null),r.skipable!==void 0&&(u(!1),m(0))},[r.id,r.skipable,l,u,m]),T.useEffect(()=>{if(!r.skipable){te(!1),ge(0);return}te(!1),ge(Math.max(Math.ceil(Me),0)),Me<=0&&(te(!0),ge(0))},[r.id,r.skipable,Me,te,ge]);const De=T.useCallback(()=>{if(!n)return;if(Y(!1),L(!1),!n.src&&r.adUrl){n.src=r.adUrl,n.load();return}const Pe=n.play();Pe&&"catch"in Pe&&Pe.catch(Ge=>{console.warn("Ad play failed:",Ge),Y(!0),g(!1)})},[n,r.adUrl,g]),_e=T.useRef(null),ke=T.useRef(0);T.useEffect(()=>{if(!n)return;const Pe=()=>{_e.current===null&&(_e.current=requestAnimationFrame(()=>{_e.current=null;const Ie=n.currentTime;if(!(Math.abs(Ie-ke.current)<.1)&&(ke.current=Ie,l(Ie),r.skipable)){const Ke=Me-Ie;if(Ke<=0)te(!0),ge(0);else{const H=Math.max(Math.ceil(Ke),0);ge(H),c&&te(!1)}}}))},Ge=()=>{G.current&&(clearTimeout(G.current),G.current=null);const Ie=Number.isFinite(n.duration)?n.duration:0;k(Ie),L(!1),g(!n.paused),De()};G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{n&&n.readyState<2&&(console.warn("Ad load timeout:",r.id),L(!0),Y(!0))},3e4);const qe=()=>{g(!0),Y(!1)},Ze=()=>{g(!1)},ct=()=>{g(!1)},mt=()=>{g(!0),Y(!1)},xe=Ie=>{G.current&&(clearTimeout(G.current),G.current=null);const Ke=Ie.target,H=Ke.error?.code,V=Ke.error?.message||"Unknown ad error";console.error("Ad playback error:",{adId:r.id,errorCode:H,errorMessage:V,src:n.src}),L(!0),Y(!0),g(!1)};return n.addEventListener("timeupdate",Pe),n.addEventListener("loadedmetadata",Ge),n.addEventListener("play",qe),n.addEventListener("pause",Ze),n.addEventListener("waiting",ct),n.addEventListener("playing",mt),n.addEventListener("error",xe),()=>{n.removeEventListener("timeupdate",Pe),n.removeEventListener("loadedmetadata",Ge),n.removeEventListener("play",qe),n.removeEventListener("pause",Ze),n.removeEventListener("waiting",ct),n.removeEventListener("playing",mt),n.removeEventListener("error",xe),G.current&&(clearTimeout(G.current),G.current=null),_e.current!==null&&(cancelAnimationFrame(_e.current),_e.current=null),ke.current=0}},[n,r.skipable,r.id,Me,c,l,g,ge,te,De]),T.useEffect(()=>{if(!n||!f)return;n.volume=f.volume,n.muted=h;const Pe=n.src||n.currentSrc||"",Ge=!Pe||Pe!==r.adUrl;if(Ge&&r.adUrl)try{n.pause(),n.removeAttribute("src"),n.src="",n.src=r.adUrl,n.load()}catch(ct){console.warn("Error loading ad:",ct),L(!0)}const qe=()=>{!n||n.paused===!1||De()},Ze=()=>{if(f&&n)try{n.volume=f.volume,n.muted=h}catch{}};return n.addEventListener("canplay",qe),n.addEventListener("loadeddata",Ze),n.readyState>=3&&!Ge&&De(),()=>{n&&(n.removeEventListener("canplay",qe),n.removeEventListener("loadeddata",Ze))}},[n,f,h,r.adUrl,De]),T.useEffect(()=>{if(n)try{n.muted=h,f&&(n.volume=f.volume)}catch{}},[n,h,f]);const Oe=()=>{c&&e&&e()},He=x>0?o/x*100:0;return Je.createElement("div",{className:"absolute inset-0 bg-black z-50 flex flex-col overflow-hidden transition-opacity duration-300",onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),onMouseMove:()=>{A(!0),E(!0)}},Je.createElement("div",{className:"relative flex-1 w-full flex items-center justify-center"},Je.createElement("video",{ref:Pe=>{Pe&&(Pe!==n&&i(Pe),Pe.muted=h,f&&(Pe.volume=f.volume),r.adUrl&&(Pe.src||Pe.currentSrc||"")!==r.adUrl&&(Pe.src=r.adUrl))},className:"w-full h-full object-contain",autoPlay:!0,playsInline:!0,muted:h,preload:"auto",key:r.id}),(U||Q)&&Je.createElement("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm"},Je.createElement("div",{className:"flex flex-col items-center gap-4"},Q&&Je.createElement("p",{className:"text-red-400 text-sm"},"Ad failed to load"),Je.createElement("button",{onClick:De,className:"px-5 py-3 rounded bg-white/20 text-white font-semibold border border-white/40 hover:bg-white/30 transition"},Q?"Retry Ad":"Tap to Play Ad")))),Je.createElement("div",{className:`absolute inset-0 transition-all duration-300 ${p?"opacity-100":"opacity-0 pointer-events-none"}`},Je.createElement("div",{className:"absolute inset-0 bg-linear-to-b from-black/80 via-transparent to-black/90 flex flex-col justify-between"},Je.createElement("div",{className:"shrink-0 relative"},Je.createElement(QS,{config:{title:t?.config?.headerConfig?.config?.title||"Advertisement",isTrailer:t?.config?.headerConfig?.config?.isTrailer,onClose:t?.config?.headerConfig?.config?.onClose}})),Je.createElement("div",{className:"flex-1 flex items-center justify-center"},Je.createElement(ew,null)),Je.createElement("div",{className:"shrink-0 relative"},r.skipable&&Je.createElement("div",{className:"px-10 pb-3 flex justify-end"},Je.createElement("button",{onClick:Oe,disabled:!c,className:`flex items-center gap-2 px-4 py-2 rounded transition-all duration-200 ${c?"bg-white/20 hover:bg-white/30 text-white cursor-pointer hover:scale-105 active:scale-95 shadow-md hover:shadow-lg border border-white/30 hover:border-white/50 backdrop-blur-md":"bg-black/60 text-gray-400 cursor-not-allowed border border-gray-700/60"}`,style:{borderRadius:"4px"}},Je.createElement(vM,{className:"w-4 h-4"}),Je.createElement("span",{className:"text-sm font-medium"},c?"Skip Ad":`Skip in ${Math.max(d,0)}s`))),Je.createElement("div",{className:"px-10 pb-4"},Je.createElement("div",{className:"relative h-1 bg-white/20 rounded-full overflow-hidden pointer-events-none select-none"},Je.createElement("div",{className:"absolute left-0 top-0 h-full bg-white rounded-full transition-all duration-300 ease-out",style:{width:`${He}%`}}),Je.createElement("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-lg transition-all duration-300 ease-out pointer-events-none",style:{left:`calc(${He}% - 6px)`}}))),he&&Je.createElement("div",{className:"px-10 pb-6 flex items-center justify-end"},Je.createElement("a",{href:he,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-sky-300 hover:text-white transition-colors"},"Learn More"))))))});iw.displayName="AdOverlay";const aw=Je.memo(({error:r,onRetry:e})=>{const t=()=>{switch(r.type){case"network":return Je.createElement("svg",{className:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Je.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"}));case"src":return Je.createElement("svg",{className:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Je.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),Je.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3l18 18"}));default:return Je.createElement("svg",{className:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Je.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}))}};return Je.createElement("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/90"},Je.createElement("div",{className:"flex flex-col items-center gap-4 p-6 text-center"},t(),Je.createElement("h3",{className:"text-xl font-semibold text-white"},r.type==="network"?"Network Error":r.type==="src"?"Video Unavailable":"Playback Error"),Je.createElement("p",{className:"text-sm text-gray-400 max-w-md"},r.message),Je.createElement("button",{onClick:e,className:"mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200 flex items-center gap-2"},Je.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Je.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})),"Retry")))});aw.displayName="ErrorOverlay";var jB=`.video-player video::cue {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
}

.custom-subtitle-overlay {
  position: absolute;
  bottom: 10%;
  left: 50%;
  transform: translateX(-50%);

  font-size: 1.5rem;
  font-weight: 600;
  line-height: 1.4;
  text-align: center;

  color: #000;
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

  padding: 10px 16px;
  border-radius: 10px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);

  max-width: 70%;
  min-width: fit-content;

  transition: all 0.2s ease-in-out;
}

.custom-subtitle-overlay:hover {
  transform: translateX(-50%) scale(1.02);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
}

@media (max-width: 768px) {
  .custom-subtitle-overlay {
    font-size: 1.25rem;
    padding: 8px 14px;
    bottom: 8%;
    max-width: 85%;
  }
}

@media (max-width: 480px) {
  .custom-subtitle-overlay {
    font-size: 1rem;
    padding: 6px 10px;
    bottom: 6%;
    max-width: 90%;
  }
}

@media (prefers-contrast: high) {
  .custom-subtitle-overlay {
    background: #ffff00;
    color: #000;
    border: 3px solid #000;
  }
}

@media (prefers-reduced-motion: reduce) {
  .custom-subtitle-overlay {
    transition: none;
  }

  .custom-subtitle-overlay:hover {
    transform: translateX(-50%);
  }
}
`;cl(jB,{insertAt:"top"});var qB=`
.loader {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  display: inline-block;
  border-top: 3px solid #fff;
  border-right: 3px solid transparent;
  box-sizing: border-box;
  animation: rotation 1s linear infinite;
}

@keyframes rotation {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: reduce) {
  .loader {
    animation: none;
  }
}
`;cl(qB,{insertAt:"top"});const sw=Je.memo(({video:r,style:e,events:t,features:n})=>{const{src:i,title:o,poster:l,type:c,isTrailer:u,showControls:d=!0,isMute:m=!1,startFrom:f}=r,{className:h,width:g,height:p,subtitleStyle:E,qualityConfig:S}=e||{},{onEnded:A,onError:x,onClose:k,onWatchHistoryUpdate:U}=t||{},{timeCodes:Y,getPreviewScreenUrl:Q,tracking:L,subtitles:O,episodeList:G,currentEpisodeIndex:te=0,intro:ge,nextEpisodeConfig:Me,ads:he}=n||{},{setVideoWrapperRef:De,setActiveQuality:_e}=Kn(Li(pt=>({setVideoWrapperRef:pt.setVideoWrapperRef,setActiveQuality:pt.setActiveQuality})));Je.useEffect(()=>{S?.defaultQuality&&_e(S.defaultQuality)},[S?.defaultQuality,_e]);const ke=Je.useMemo(()=>u?void 0:he,[he,u]),Oe=Je.useMemo(()=>!!ke?.preRoll,[ke?.preRoll]),{registerVideoRef:He,videoRef:Pe,isAdPlaying:Ge,currentAd:qe,initialAdFinished:Ze,shouldCoverMainVideo:ct,shouldShowPlaceholder:mt}=zB({hasPreRoll:Oe,trackSrc:i}),xe=Je.useRef(U);Je.useEffect(()=>{xe.current=U},[U]);const Ie=Je.useCallback(()=>{const pt=Kn.getState().videoRef;if(!pt||!pt.duration||isNaN(pt.duration))return null;const kt=pt.currentTime||0,wt=pt.duration,fn=Math.round(kt/wt*100),Tn=fn>=90;return{currentTime:kt,duration:wt,progress:fn,isCompleted:Tn,watchedAt:Date.now()}},[]),Ke=Je.useCallback(()=>{const pt=Ie();pt&&U&&U(pt),k?.()},[Ie,U,k]),H=Je.useMemo(()=>({headerConfig:{config:{isTrailer:u,title:o,onClose:Ke,videoRef:Pe,qualityConfig:S}},bottomConfig:{config:{seekBarConfig:{timeCodes:Y,trackColor:"red",getPreviewScreenUrl:Q}}}}),[u,o,Ke,Pe,Y,Q,S]),V=Je.useMemo(()=>({config:{headerConfig:{config:{isTrailer:u,title:o,onClose:Ke}},bottomConfig:{config:{seekBarConfig:{timeCodes:Y,trackColor:"red",getPreviewScreenUrl:Q}}}}}),[u,o,Ke,Y,Q]);LB(i,c),NB(O),TB(E),DB(L,G,te,Ke);const{showSkipIntro:C,handleSkipIntro:F}=PB(ge);MB(G,te,Me);const{onSeeked:oe,onTimeUpdate:Z,onLoadedMetadata:Be,onProgress:Xe,onPlay:$e,onPause:Ve,onEnded:je}=OB(),{skipAd:Qe}=FB(ke),{error:dt,handleVideoError:it,retry:rt}=$B(),Ot=Je.useRef(!1);return Je.useEffect(()=>()=>{const pt=Ie();pt&&xe.current&&xe.current(pt)},[Ie]),Je.useEffect(()=>{if(!Pe||!f||Ot.current)return;const pt=()=>{!Ot.current&&f>0&&(Pe.currentTime=f,Ot.current=!0)};return Pe.addEventListener("canplay",pt),()=>Pe.removeEventListener("canplay",pt)},[Pe,f]),Je.createElement("div",{ref:De,className:`video-player ${p||"h-full"} ${g||"w-full"} mx-auto absolute`},l&&Je.createElement("div",{className:"pip-poster absolute inset-0 bg-center bg-cover hidden",style:{backgroundImage:`url(${l})`}}),Je.createElement("video",{playsInline:!0,preload:Oe?"metadata":"auto",ref:He,onSeeked:oe,poster:l,crossOrigin:"anonymous",controls:!1,disableRemotePlayback:!0,controlsList:"nodownload",onContextMenu:pt=>pt.preventDefault(),onTimeUpdate:Z,onLoadedMetadata:Be,onProgress:Xe,onPlay:$e,onPause:Ve,onEnded:pt=>{je(pt),A?.(pt)},onError:pt=>{it(pt),x?.(pt)},autoPlay:!Oe,muted:m,className:`w-full h-full relative ${h||""} ${ct?"opacity-0":"opacity-100"} transition-opacity duration-200 ease-out`}),mt&&Je.createElement("div",{className:"absolute inset-0 z-40 flex flex-col items-center justify-center bg-black/90 backdrop-blur-sm"},Je.createElement(oh,{className:"w-14 h-14 lg:w-18 lg:h-18 animate-spin text-white"})),d&&Ze&&Je.createElement(tw,{config:H}),Je.createElement(rw,{styleConfig:E}),C&&!Ge&&Ze&&Je.createElement(Rm,{text:"Skip Intro",onClick:F,position:"left"}),Ge&&qe&&Je.createElement(iw,{adBreak:qe,onSkip:Qe,config:V}),dt&&x&&Je.createElement(aw,{error:dt,onRetry:rt}))});sw.displayName="VideoPlayer";var Yd={exports:{}};var pE;function GB(){return pE||(pE=1,(function(r){(function(){var e={}.hasOwnProperty;function t(){for(var o="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(o=i(o,n(c)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var c in o)e.call(o,c)&&o[c]&&(l=i(l,c));return l}function i(o,l){return l?o?o+" "+l:o+l:o}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(Yd)),Yd.exports}var HB=GB();const ow=xE(HB),VB="!block !text-center",yE=({pendingClassName:r,pendingSize:e="large",pendingTip:t=" ",pendingIndicator:n,pendingWrapperClassName:i,isError:o,errorTip:l="  ",children:c,isLoading:u=!1,prefixCls:d,style:m,isRender:f=!0})=>o?yr.jsx("div",{className:"!block !text-center !text-3xl mt-14",style:m,children:yr.jsx("p",{className:"!text-red-500 !mt-xs",children:l})}):yr.jsx("div",{className:ow(u&&VB,i),style:m,children:yr.jsx(nT,{tip:t,spinning:u,indicator:n,prefixCls:d,className:r,size:e,children:f&&yr.jsx("div",{className:"!text-left",children:c})})}),KB=async()=>{const r=await fetch("http://45.80.129.209:9011/health");if(!r.ok)throw new Error("Network response was not ok");return r.json()},YB=()=>nM({queryKey:["health"],queryFn:KB}),WB=async r=>{const e=new FormData;e.append("file",r);const t=await fetch("http://45.80.129.209:9011/analyze_video",{method:"POST",body:e});if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.message||"   ")}return t.json()},XB=()=>rM({mutationFn:WB,onSuccess:r=>{console.log("  :",r)},onError:r=>{console.error(" :",r)}}),{Dragger:QB}=tm,ZB=["video/mp4","video/webm","video/quicktime"],JB=()=>{const[r,e]=T.useState(void 0),t=T.useRef(!1),n=T.useRef(null),{isLoading:i,isError:o}=YB(),{mutate:l,data:c,isPending:u,isError:d}=XB(),m=c?.timeline.map((f,h)=>h===c.timeline.length-1&&f.timestamp_sec>=c.metadata.duration_sec?{fromMs:Math.round(c.metadata.duration_sec*1e3),description:f.caption}:{fromMs:Math.round(f.timestamp_sec*1e3),description:f.caption});return yr.jsxs(Ns,{className:"!p-[16px] !max-w-6xl !mx-auto",gap:32,vertical:!0,children:[yr.jsxs(Ns,{align:"center",vertical:!0,children:[yr.jsx(bd,{className:"!text-[#f8fafc] !text-[60px]",children:"AI Video Detector"}),yr.jsx(bd,{className:"!m-0 !text-mauve-300",level:2,children:"      "})]}),yr.jsx(yE,{isLoading:i,isError:o,children:yr.jsx(Lc,{className:"!bg-[#1e1e2ebb] !rounded-2xl !backdrop-blur-lg !shadow-[0_20px_50px_rgba(0,0,0,0.5)] !border !border-[#33334d]",children:yr.jsx(yE,{pendingTip:"   ",isLoading:u,isError:d,children:yr.jsxs(Ns,{gap:16,vertical:!0,children:[yr.jsxs(QB,{maxCount:1,showUploadList:!1,beforeUpload:()=>!1,onChange:f=>{const{file:h}=f,{status:g}=h;if(!ZB.includes(h.type||"")){ac.error(`${h.name} is not a video file`);return}g==="done"?ac.success(`${f.file.name} file uploaded successfully.`):g==="error"&&ac.error(`${f.file.name} file upload failed.`),l(h),e(URL.createObjectURL(h))},children:[yr.jsx("p",{className:"ant-upload-drag-icon",children:yr.jsx(sM,{className:"!text-white/70"})}),yr.jsx("p",{className:"text-white text-2xl",children:"        "}),yr.jsx("p",{className:"text-white text-base",children:"  "}),yr.jsx("p",{className:"text-white text-base",children:"      MP4, WebM, MOV"})]}),r&&yr.jsxs(Ns,{gap:16,vertical:!0,children:[yr.jsx("div",{className:ow("[&_.video-player]:relative"),children:yr.jsx(sw,{video:{src:r,showControls:!0},style:{width:"800px",height:"800px"},features:{timeCodes:m?[{fromMs:0,description:" "}].concat(m):[]},events:{onClose:()=>{t.current?t.current=!1:e(void 0)},onEnded:()=>t.current=!0}})}),c?.events&&yr.jsxs(Ns,{gap:16,vertical:!0,children:[yr.jsx(bd,{className:"!text-[#f8fafc] ",level:3,children:" ():"}),yr.jsx(Ns,{gap:8,children:c.events.map(f=>yr.jsxs(Lc,{className:"!w-[200px] !cursor-pointer",onClick:()=>{n.current=document.querySelector("video"),n.current&&(n.current.currentTime=f.highlight_start_sec)},children:[f.description.slice(0,100),"..."]},f.description))})]})]})]})})})})]})},a$=()=>yr.jsx(JB,{});export{a$ as default};
